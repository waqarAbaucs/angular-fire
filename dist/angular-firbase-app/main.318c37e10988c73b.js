"use strict";(self.webpackChunkangular_firbase_app=self.webpackChunkangular_firbase_app||[]).push([[179],{2011:(Et,Me,V)=>{V.d(Me,{Dh:()=>Ie,GT:()=>ge,cc:()=>Ne,hO:()=>He,on:()=>z,pX:()=>ae,xv:()=>_e});var f=V(4650),ee=V(9260),F=V(4976);Et=V.hmd(Et);const ue=["ngOnDestroy"],ae=(we,yt,St,Fe={})=>new Proxy(we,{get:(Ce,ve)=>St.runOutsideAngular(()=>{var ze;if(we[ve])return!(null===(ze=Fe?.spy)||void 0===ze)&&ze.get&&Fe.spy.get(ve,we[ve]),we[ve];if(ue.indexOf(ve)>-1)return()=>{};const je=yt.toPromise().then(it=>{const re=it&&it[ve];return"function"==typeof re?re.bind(it):re&&re.then?re.then(Pt=>St.run(()=>Pt)):St.run(()=>re)});return new Proxy(()=>{},{get:(it,re)=>je[re],apply:(it,re,Pt)=>je.then(ut=>{var Ht;const at=ut&&ut(...Pt);return!(null===(Ht=Fe?.spy)||void 0===Ht)&&Ht.apply&&Fe.spy.apply(ve,Pt,at),at})})})}),ge=(we,yt)=>{yt.forEach(St=>{Object.getOwnPropertyNames(St.prototype||St).forEach(Fe=>{Object.defineProperty(we.prototype,Fe,Object.getOwnPropertyDescriptor(St.prototype||St,Fe))})})};class pe{constructor(yt){return yt}}const Ie=new f.OlP("angularfire2.app.options"),_e=new f.OlP("angularfire2.app.name");function z(we,yt,St){const Ce="object"==typeof St&&St||{};Ce.name=Ce.name||"string"==typeof St&&St||"[DEFAULT]";const ze=ee.Z.apps.filter(je=>je&&je.name===Ce.name)[0]||yt.runOutsideAngular(()=>ee.Z.initializeApp(we,Ce));try{JSON.stringify(we)!==JSON.stringify(ze.options)&&H("error",`${ze.name} Firebase App already initialized with different options${Et.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new pe(ze)}const H=(we,...yt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[we](...yt)},Z={provide:pe,useFactory:z,deps:[Ie,f.R0b,[new f.FiY,_e]]};let He=(()=>{class we{constructor(St){ee.Z.registerVersion("angularfire",F.q4.full,"core"),ee.Z.registerVersion("angularfire",F.q4.full,"app-compat"),ee.Z.registerVersion("angular",f.q4F.full,St.toString())}static initializeApp(St,Fe){return{ngModule:we,providers:[{provide:Ie,useValue:St},{provide:_e,useValue:Fe}]}}}return we.\u0275fac=function(St){return new(St||we)(f.LFG(f.Lbi))},we.\u0275mod=f.oAB({type:we}),we.\u0275inj=f.cJS({providers:[Z]}),we})();function Ne(we,yt,St,Fe,Ce){const[,ve,ze]=globalThis.\u0275AngularfireInstanceCache.find(je=>je[0]===we)||[];if(ve)return function Te(we,yt){try{return we.toString()===yt.toString()}catch{return we===yt}}(Ce,ze)||(Ee("error",`${yt} was already initialized on the ${St} Firebase App with different settings.${rt?" You may need to reload as Firebase is not HMR aware.":""}`),Ee("warn",{is:Ce,was:ze})),ve;{const je=Fe();return globalThis.\u0275AngularfireInstanceCache.push([we,je,Ce]),je}}const rt=!!Et.hot,Ee=(we,...yt)=>{(0,f.X6Q)()&&typeof console<"u"&&console[we](...yt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Et,Me,V)=>{V.d(Me,{q4:()=>or,iC:()=>kl,fc:()=>rd,HU:()=>yu,vb:()=>td,JM:()=>Jp});var f=V(4650),ee=V(259),F=V(5861),ue=V(6881),ae=V(2090),ge=V(4859),pe=V(1877);let _e,z;const He=new WeakMap,Ne=new WeakMap,Te=new WeakMap,rt=new WeakMap,Ee=new WeakMap;let St={get(I,b,R){if(I instanceof IDBTransaction){if("done"===b)return Ne.get(I);if("objectStoreNames"===b)return I.objectStoreNames||Te.get(I);if("store"===b)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return ze(I[b])},set:(I,b,R)=>(I[b]=R,!0),has:(I,b)=>I instanceof IDBTransaction&&("done"===b||"store"===b)||b in I};function ve(I){return"function"==typeof I?function Ce(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Z(){return z||(z=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...b){return I.apply(je(this),b),ze(He.get(this))}:function(...b){return ze(I.apply(je(this),b))}:function(b,...R){const O=I.call(je(this),b,...R);return Te.set(O,b.sort?b.sort():[b]),ze(O)}}(I):(I instanceof IDBTransaction&&function yt(I){if(Ne.has(I))return;const b=new Promise((R,O)=>{const W=()=>{I.removeEventListener("complete",Y),I.removeEventListener("error",he),I.removeEventListener("abort",he)},Y=()=>{R(),W()},he=()=>{O(I.error||new DOMException("AbortError","AbortError")),W()};I.addEventListener("complete",Y),I.addEventListener("error",he),I.addEventListener("abort",he)});Ne.set(I,b)}(I),((I,b)=>b.some(R=>I instanceof R))(I,function H(){return _e||(_e=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,St):I)}function ze(I){if(I instanceof IDBRequest)return function we(I){const b=new Promise((R,O)=>{const W=()=>{I.removeEventListener("success",Y),I.removeEventListener("error",he)},Y=()=>{R(ze(I.result)),W()},he=()=>{O(I.error),W()};I.addEventListener("success",Y),I.addEventListener("error",he)});return b.then(R=>{R instanceof IDBCursor&&He.set(R,I)}).catch(()=>{}),Ee.set(b,I),b}(I);if(rt.has(I))return rt.get(I);const b=ve(I);return b!==I&&(rt.set(I,b),Ee.set(b,I)),b}const je=I=>Ee.get(I),Pt=["get","getKey","getAll","getAllKeys","count"],ut=["put","add","delete","clear"],Ht=new Map;function at(I,b){if(!(I instanceof IDBDatabase)||b in I||"string"!=typeof b)return;if(Ht.get(b))return Ht.get(b);const R=b.replace(/FromIndex$/,""),O=b!==R,W=ut.includes(R);if(!(R in(O?IDBIndex:IDBObjectStore).prototype)||!W&&!Pt.includes(R))return;const Y=function(){var he=(0,F.Z)(function*(qe,...$e){const ft=this.transaction(qe,W?"readwrite":"readonly");let pt=ft.store;return O&&(pt=pt.index($e.shift())),(yield Promise.all([pt[R](...$e),W&&ft.done]))[0]});return function($e){return he.apply(this,arguments)}}();return Ht.set(b,Y),Y}!function Fe(I){St=I(St)}(I=>({...I,get:(b,R,O)=>at(b,R)||I.get(b,R,O),has:(b,R)=>!!at(b,R)||I.has(b,R)}));const Fs="@firebase/installations",_s="w:0.6.4",ie="FIS_v2",lt=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function kt(I){return I instanceof ae.ZR&&I.code.includes("request-failed")}function dn({projectId:I}){return`https://firebaseinstallations.googleapis.com/v1/projects/${I}/installations`}function It(I){return{token:I.token,requestStatus:2,expiresIn:ri(I.expiresIn),creationTime:Date.now()}}function Yt(I,b){return kn.apply(this,arguments)}function kn(){return(kn=(0,F.Z)(function*(I,b){const O=(yield b.json()).error;return lt.create("request-failed",{requestName:I,serverCode:O.code,serverMessage:O.message,serverStatus:O.status})})).apply(this,arguments)}function bn({apiKey:I}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I})}function Vn(I,{refreshToken:b}){const R=bn(I);return R.append("Authorization",function Ni(I){return`${ie} ${I}`}(b)),R}function nr(I){return rr.apply(this,arguments)}function rr(){return(rr=(0,F.Z)(function*(I){const b=yield I();return b.status>=500&&b.status<600?I():b})).apply(this,arguments)}function ri(I){return Number(I.replace("s","000"))}function ct(I,b){return ii.apply(this,arguments)}function ii(){return(ii=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:b},{fid:R}){const O=dn(I),W=bn(I),Y=b.getImmediate({optional:!0});if(Y){const ft=yield Y.getHeartbeatsHeader();ft&&W.append("x-firebase-client",ft)}const qe={method:"POST",headers:W,body:JSON.stringify({fid:R,authVersion:ie,appId:I.appId,sdkVersion:_s})},$e=yield nr(()=>fetch(O,qe));if($e.ok){const ft=yield $e.json();return{fid:ft.fid||R,registrationStatus:2,refreshToken:ft.refreshToken,authToken:It(ft.authToken)}}throw yield Yt("Create Installation",$e)})).apply(this,arguments)}function qi(I){return new Promise(b=>{setTimeout(b,I)})}const ua=/^[cdef][\w-]{21}$/;function _r(){try{const I=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(I),I[0]=112+I[0]%16;const R=function Dn(I){return function si(I){return btoa(String.fromCharCode(...I)).replace(/\+/g,"-").replace(/\//g,"_")}(I).substr(0,22)}(I);return ua.test(R)?R:""}catch{return""}}function rn(I){return`${I.appName}!${I.appId}`}const st=new Map;function bt(I,b){const R=rn(I);oi(R,b),function ir(I,b){const R=function xr(){return!xt&&"BroadcastChannel"in self&&(xt=new BroadcastChannel("[Firebase] FID Change"),xt.onmessage=I=>{oi(I.data.key,I.data.fid)}),xt}();R&&R.postMessage({key:I,fid:b}),function hn(){0===st.size&&xt&&(xt.close(),xt=null)}()}(R,b)}function oi(I,b){const R=st.get(I);if(R)for(const O of R)O(b)}let xt=null;const yr="firebase-installations-store";let Fr=null;function Ki(){return Fr||(Fr=function it(I,b,{blocked:R,upgrade:O,blocking:W,terminated:Y}={}){const he=indexedDB.open(I,b),qe=ze(he);return O&&he.addEventListener("upgradeneeded",$e=>{O(ze(he.result),$e.oldVersion,$e.newVersion,ze(he.transaction))}),R&&he.addEventListener("blocked",()=>R()),qe.then($e=>{Y&&$e.addEventListener("close",()=>Y()),W&&$e.addEventListener("versionchange",()=>W())}).catch(()=>{}),qe}("firebase-installations-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(yr)}})),Fr}function Un(I,b){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,F.Z)(function*(I,b){const R=rn(I),W=(yield Ki()).transaction(yr,"readwrite"),Y=W.objectStore(yr),he=yield Y.get(R);return yield Y.put(b,R),yield W.done,(!he||he.fid!==b.fid)&&bt(I,b.fid),b})).apply(this,arguments)}function vs(I){return qn.apply(this,arguments)}function qn(){return(qn=(0,F.Z)(function*(I){const b=rn(I),O=(yield Ki()).transaction(yr,"readwrite");yield O.objectStore(yr).delete(b),yield O.done})).apply(this,arguments)}function yi(I,b){return ai.apply(this,arguments)}function ai(){return(ai=(0,F.Z)(function*(I,b){const R=rn(I),W=(yield Ki()).transaction(yr,"readwrite"),Y=W.objectStore(yr),he=yield Y.get(R),qe=b(he);return void 0===qe?yield Y.delete(R):yield Y.put(qe,R),yield W.done,qe&&(!he||he.fid!==qe.fid)&&bt(I,qe.fid),qe})).apply(this,arguments)}function j(I){return B.apply(this,arguments)}function B(){return(B=(0,F.Z)(function*(I){let b;const R=yield yi(I.appConfig,O=>{const W=K(O),Y=le(I,W);return b=Y.registrationPromise,Y.installationEntry});return""===R.fid?{installationEntry:yield b}:{installationEntry:R,registrationPromise:b}})).apply(this,arguments)}function K(I){return Ue(I||{fid:_r(),registrationStatus:0})}function le(I,b){if(0===b.registrationStatus){if(!navigator.onLine)return{installationEntry:b,registrationPromise:Promise.reject(lt.create("app-offline"))};const R={fid:b.fid,registrationStatus:1,registrationTime:Date.now()},O=function X(I,b){return We.apply(this,arguments)}(I,R);return{installationEntry:R,registrationPromise:O}}return 1===b.registrationStatus?{installationEntry:b,registrationPromise:Mt(I)}:{installationEntry:b}}function We(){return(We=(0,F.Z)(function*(I,b){try{const R=yield ct(I,b);return Un(I.appConfig,R)}catch(R){throw kt(R)&&409===R.customData.serverCode?yield vs(I.appConfig):yield Un(I.appConfig,{fid:b.fid,registrationStatus:0}),R}})).apply(this,arguments)}function Mt(I){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,F.Z)(function*(I){let b=yield fn(I.appConfig);for(;1===b.registrationStatus;)yield qi(100),b=yield fn(I.appConfig);if(0===b.registrationStatus){const{installationEntry:R,registrationPromise:O}=yield j(I);return O||R}return b})).apply(this,arguments)}function fn(I){return yi(I,b=>{if(!b)throw lt.create("installation-not-found");return Ue(b)})}function Ue(I){return function dt(I){return 1===I.registrationStatus&&I.registrationTime+1e4<Date.now()}(I)?{fid:I.fid,registrationStatus:0}:I}function Ct(I,b){return _n.apply(this,arguments)}function _n(){return(_n=(0,F.Z)(function*({appConfig:I,heartbeatServiceProvider:b},R){const O=Vr(I,R),W=Vn(I,R),Y=b.getImmediate({optional:!0});if(Y){const ft=yield Y.getHeartbeatsHeader();ft&&W.append("x-firebase-client",ft)}const qe={method:"POST",headers:W,body:JSON.stringify({installation:{sdkVersion:_s,appId:I.appId}})},$e=yield nr(()=>fetch(O,qe));if($e.ok)return It(yield $e.json());throw yield Yt("Generate Auth Token",$e)})).apply(this,arguments)}function Vr(I,{fid:b}){return`${dn(I)}/${b}/authTokens:generate`}function yn(I){return Zi.apply(this,arguments)}function Zi(){return(Zi=(0,F.Z)(function*(I,b=!1){let R;const O=yield yi(I.appConfig,Y=>{if(!Vt(Y))throw lt.create("not-registered");const he=Y.authToken;if(!b&&sn(he))return Y;if(1===he.requestStatus)return R=oe(I,b),Y;{if(!navigator.onLine)throw lt.create("app-offline");const qe=Kt(Y);return R=Le(I,qe),qe}});return R?yield R:O.authToken})).apply(this,arguments)}function oe(I,b){return ne.apply(this,arguments)}function ne(){return(ne=(0,F.Z)(function*(I,b){let R=yield Oe(I.appConfig);for(;1===R.authToken.requestStatus;)yield qi(100),R=yield Oe(I.appConfig);const O=R.authToken;return 0===O.requestStatus?yn(I,b):O})).apply(this,arguments)}function Oe(I){return yi(I,b=>{if(!Vt(b))throw lt.create("not-registered");return function Ur(I){return 1===I.requestStatus&&I.requestTime+1e4<Date.now()}(b.authToken)?Object.assign(Object.assign({},b),{authToken:{requestStatus:0}}):b})}function Le(I,b){return At.apply(this,arguments)}function At(){return(At=(0,F.Z)(function*(I,b){try{const R=yield Ct(I,b),O=Object.assign(Object.assign({},b),{authToken:R});return yield Un(I.appConfig,O),R}catch(R){if(!kt(R)||401!==R.customData.serverCode&&404!==R.customData.serverCode){const O=Object.assign(Object.assign({},b),{authToken:{requestStatus:0}});yield Un(I.appConfig,O)}else yield vs(I.appConfig);throw R}})).apply(this,arguments)}function Vt(I){return void 0!==I&&2===I.registrationStatus}function sn(I){return 2===I.requestStatus&&!function On(I){const b=Date.now();return b<I.creationTime||I.creationTime+I.expiresIn<b+36e5}(I)}function Kt(I){const b={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},I),{authToken:b})}function vi(){return(vi=(0,F.Z)(function*(I){const b=I,{installationEntry:R,registrationPromise:O}=yield j(b);return O?O.catch(console.error):yn(b).catch(console.error),R.fid})).apply(this,arguments)}function Ku(){return(Ku=(0,F.Z)(function*(I,b=!1){const R=I;return yield vn(R),(yield yn(R,b)).token})).apply(this,arguments)}function vn(I){return ws.apply(this,arguments)}function ws(){return(ws=(0,F.Z)(function*(I){const{registrationPromise:b}=yield j(I);b&&(yield b)})).apply(this,arguments)}function vr(I){return lt.create("missing-app-config-values",{valueName:I})}const ui="installations",Yu=I=>{const b=I.getProvider("app").getImmediate(),R=function ah(I){if(!I||!I.options)throw vr("App Configuration");if(!I.name)throw vr("App Name");const b=["projectId","apiKey","appId"];for(const R of b)if(!I.options[R])throw vr(R);return{appName:I.name,projectId:I.options.projectId,apiKey:I.options.apiKey,appId:I.options.appId}}(b);return{app:b,appConfig:R,heartbeatServiceProvider:(0,ue._getProvider)(b,"heartbeat"),_delete:()=>Promise.resolve()}},Ls=I=>{const b=I.getProvider("app").getImmediate(),R=(0,ue._getProvider)(b,ui).getImmediate();return{getId:()=>function ki(I){return vi.apply(this,arguments)}(R),getToken:W=>function Ka(I){return Ku.apply(this,arguments)}(R,W)}};(function Yi(){(0,ue._registerComponent)(new ge.wA(ui,Yu,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("installations-internal",Ls,"PRIVATE"))})(),(0,ue.registerVersion)(Fs,"0.6.4"),(0,ue.registerVersion)(Fs,"0.6.4","esm2017");const da="@firebase/remote-config",Sn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Oi{constructor(b,R,O,W){this.client=b,this.storage=R,this.storageCache=O,this.logger=W}isCachedDataFresh(b,R){if(!R)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const O=Date.now()-R,W=O<=b;return this.logger.debug(`Config fetch cache check. Cache age millis: ${O}. Cache max age millis (minimumFetchIntervalMillis setting): ${b}. Is cache hit: ${W}.`),W}fetch(b){var R=this;return(0,F.Z)(function*(){const[O,W]=yield Promise.all([R.storage.getLastSuccessfulFetchTimestampMillis(),R.storage.getLastSuccessfulFetchResponse()]);if(W&&R.isCachedDataFresh(b.cacheMaxAgeMillis,O))return W;b.eTag=W&&W.eTag;const Y=yield R.client.fetch(b),he=[R.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Y.status&&he.push(R.storage.setLastSuccessfulFetchResponse(Y)),yield Promise.all(he),Y})()}}function _h(I=navigator){return I.languages&&I.languages[0]||I.language}class Za{constructor(b,R,O,W,Y,he){this.firebaseInstallations=b,this.sdkVersion=R,this.namespace=O,this.projectId=W,this.apiKey=Y,this.appId=he}fetch(b){var R=this;return(0,F.Z)(function*(){const[O,W]=yield Promise.all([R.firebaseInstallations.getId(),R.firebaseInstallations.getToken()]),he=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${R.projectId}/namespaces/${R.namespace}:fetch?key=${R.apiKey}`,qe={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":b.eTag||"*"},$e={sdk_version:R.sdkVersion,app_instance_id:O,app_instance_id_token:W,app_id:R.appId,language_code:_h()},ft={method:"POST",headers:qe,body:JSON.stringify($e)},pt=fetch(he,ft),Ot=new Promise((Mr,Ks)=>{b.signal.addEventListener(()=>{const Ol=new Error("The operation was aborted.");Ol.name="AbortError",Ks(Ol)})});let $r;try{yield Promise.race([pt,Ot]),$r=yield pt}catch(Mr){let Ks="fetch-client-network";throw"AbortError"===Mr?.name&&(Ks="fetch-timeout"),Sn.create(Ks,{originalErrorMessage:Mr?.message})}let wn=$r.status;const _t=$r.headers.get("ETag")||void 0;let os,yo;if(200===$r.status){let Mr;try{Mr=yield $r.json()}catch(Ks){throw Sn.create("fetch-client-parse",{originalErrorMessage:Ks?.message})}os=Mr.entries,yo=Mr.state}if("INSTANCE_STATE_UNSPECIFIED"===yo?wn=500:"NO_CHANGE"===yo?wn=304:("NO_TEMPLATE"===yo||"EMPTY_CONFIG"===yo)&&(os={}),304!==wn&&200!==wn)throw Sn.create("fetch-status",{httpStatus:wn});return{status:wn,eTag:_t,config:os}})()}}class xp{constructor(b,R){this.client=b,this.storage=R}fetch(b){var R=this;return(0,F.Z)(function*(){const O=(yield R.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return R.attemptFetch(b,O)})()}attemptFetch(b,{throttleEndTimeMillis:R,backoffCount:O}){var W=this;return(0,F.Z)(function*(){yield function Rc(I,b){return new Promise((R,O)=>{const W=Math.max(b-Date.now(),0),Y=setTimeout(R,W);I.addEventListener(()=>{clearTimeout(Y),O(Sn.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}(b.signal,R);try{const Y=yield W.client.fetch(b);return yield W.storage.deleteThrottleMetadata(),Y}catch(Y){if(!function Xu(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}(Y))throw Y;const he={throttleEndTimeMillis:Date.now()+(0,ae.$s)(O),backoffCount:O+1};return yield W.storage.setThrottleMetadata(he),W.attemptFetch(b,he)}})()}}class Rp{constructor(b,R,O,W,Y){this.app=b,this._client=R,this._storageCache=O,this._storage=W,this._logger=Y,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Rr(I,b){const R=I.target.error||void 0;return Sn.create(b,{originalErrorMessage:R&&R?.message})}const Wr="app_namespace_store";class UI{constructor(b,R,O,W=function nl(){return new Promise((I,b)=>{try{const R=indexedDB.open("firebase_remote_config",1);R.onerror=O=>{b(Rr(O,"storage-open"))},R.onsuccess=O=>{I(O.target.result)},R.onupgradeneeded=O=>{0===O.oldVersion&&O.target.result.createObjectStore(Wr,{keyPath:"compositeKey"})}}catch(R){b(Sn.create("storage-open",{originalErrorMessage:R?.message}))}})}()){this.appId=b,this.appName=R,this.namespace=O,this.openDbPromise=W}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(b){return this.set("last_fetch_status",b)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(b){return this.set("last_successful_fetch_timestamp_millis",b)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(b){return this.set("last_successful_fetch_response",b)}getActiveConfig(){return this.get("active_config")}setActiveConfig(b){return this.set("active_config",b)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(b){return this.set("active_config_etag",b)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(b){return this.set("throttle_metadata",b)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(b){var R=this;return(0,F.Z)(function*(){const O=yield R.openDbPromise;return new Promise((W,Y)=>{const qe=O.transaction([Wr],"readonly").objectStore(Wr),$e=R.createCompositeKey(b);try{const ft=qe.get($e);ft.onerror=pt=>{Y(Rr(pt,"storage-get"))},ft.onsuccess=pt=>{const Ot=pt.target.result;W(Ot?Ot.value:void 0)}}catch(ft){Y(Sn.create("storage-get",{originalErrorMessage:ft?.message}))}})})()}set(b,R){var O=this;return(0,F.Z)(function*(){const W=yield O.openDbPromise;return new Promise((Y,he)=>{const $e=W.transaction([Wr],"readwrite").objectStore(Wr),ft=O.createCompositeKey(b);try{const pt=$e.put({compositeKey:ft,value:R});pt.onerror=Ot=>{he(Rr(Ot,"storage-set"))},pt.onsuccess=()=>{Y()}}catch(pt){he(Sn.create("storage-set",{originalErrorMessage:pt?.message}))}})})()}delete(b){var R=this;return(0,F.Z)(function*(){const O=yield R.openDbPromise;return new Promise((W,Y)=>{const qe=O.transaction([Wr],"readwrite").objectStore(Wr),$e=R.createCompositeKey(b);try{const ft=qe.delete($e);ft.onerror=pt=>{Y(Rr(pt,"storage-delete"))},ft.onsuccess=()=>{W()}}catch(ft){Y(Sn.create("storage-delete",{originalErrorMessage:ft?.message}))}})})()}createCompositeKey(b){return[this.appId,this.appName,this.namespace,b].join()}}class Zn{constructor(b){this.storage=b}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var b=this;return(0,F.Z)(function*(){const R=b.storage.getLastFetchStatus(),O=b.storage.getLastSuccessfulFetchTimestampMillis(),W=b.storage.getActiveConfig(),Y=yield R;Y&&(b.lastFetchStatus=Y);const he=yield O;he&&(b.lastSuccessfulFetchTimestampMillis=he);const qe=yield W;qe&&(b.activeConfig=qe)})()}setLastFetchStatus(b){return this.lastFetchStatus=b,this.storage.setLastFetchStatus(b)}setLastSuccessfulFetchTimestampMillis(b){return this.lastSuccessfulFetchTimestampMillis=b,this.storage.setLastSuccessfulFetchTimestampMillis(b)}setActiveConfig(b){return this.activeConfig=b,this.storage.setActiveConfig(b)}}function li(){return Nc.apply(this,arguments)}function Nc(){return(Nc=(0,F.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}let ha,Yn;!function Us(){(0,ue._registerComponent)(new ge.wA("remote-config",function I(b,{instanceIdentifier:R}){const O=b.getProvider("app").getImmediate(),W=b.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Sn.create("registration-window");if(!(0,ae.hl)())throw Sn.create("indexed-db-unavailable");const{projectId:Y,apiKey:he,appId:qe}=O.options;if(!Y)throw Sn.create("registration-project-id");if(!he)throw Sn.create("registration-api-key");if(!qe)throw Sn.create("registration-app-id");const $e=new UI(qe,O.name,R=R||"firebase"),ft=new Zn($e),pt=new pe.Yd(da);pt.logLevel=pe.in.ERROR;const Ot=new Za(W,ue.SDK_VERSION,R,Y,he,qe),$r=new xp(Ot,$e),wn=new Oi($r,$e,ft,pt),_t=new Rp(O,wn,ft,$e,pt);return function d_(I){const b=(0,ae.m9)(I);b._initializePromise||(b._initializePromise=b._storageCache.loadFromStorage().then(()=>{b._isInitializationComplete=!0}))}(_t),_t},"PUBLIC").setMultipleInstances(!0)),(0,ue.registerVersion)(da,"0.4.4"),(0,ue.registerVersion)(da,"0.4.4","esm2017")}();const Pc=new WeakMap,wi=new WeakMap,fo=new WeakMap,Br=new WeakMap,Nt=new WeakMap;let Ya={get(I,b,R){if(I instanceof IDBTransaction){if("done"===b)return wi.get(I);if("objectStoreNames"===b)return I.objectStoreNames||fo.get(I);if("store"===b)return R.objectStoreNames[1]?void 0:R.objectStore(R.objectStoreNames[0])}return Ji(I[b])},set:(I,b,R)=>(I[b]=R,!0),has:(I,b)=>I instanceof IDBTransaction&&("done"===b||"store"===b)||b in I};function Ih(I){return"function"==typeof I?function Eh(I){return I!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ro(){return Yn||(Yn=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(I)?function(...b){return I.apply(sl(this),b),Ji(Pc.get(this))}:function(...b){return Ji(I.apply(sl(this),b))}:function(b,...R){const O=I.call(sl(this),b,...R);return fo.set(O,b.sort?b.sort():[b]),Ji(O)}}(I):(I instanceof IDBTransaction&&function vh(I){if(wi.has(I))return;const b=new Promise((R,O)=>{const W=()=>{I.removeEventListener("complete",Y),I.removeEventListener("error",he),I.removeEventListener("abort",he)},Y=()=>{R(),W()},he=()=>{O(I.error||new DOMException("AbortError","AbortError")),W()};I.addEventListener("complete",Y),I.addEventListener("error",he),I.addEventListener("abort",he)});wi.set(I,b)}(I),((I,b)=>b.some(R=>I instanceof R))(I,function f_(){return ha||(ha=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(I,Ya):I)}function Ji(I){if(I instanceof IDBRequest)return function yh(I){const b=new Promise((R,O)=>{const W=()=>{I.removeEventListener("success",Y),I.removeEventListener("error",he)},Y=()=>{R(Ji(I.result)),W()},he=()=>{O(I.error),W()};I.addEventListener("success",Y),I.addEventListener("error",he)});return b.then(R=>{R instanceof IDBCursor&&Pc.set(R,I)}).catch(()=>{}),Nt.set(b,I),b}(I);if(Br.has(I))return Br.get(I);const b=Ih(I);return b!==I&&(Br.set(I,b),Nt.set(b,I)),b}const sl=I=>Nt.get(I);function Ae(I,b,{blocked:R,upgrade:O,blocking:W,terminated:Y}={}){const he=indexedDB.open(I,b),qe=Ji(he);return O&&he.addEventListener("upgradeneeded",$e=>{O(Ji(he.result),$e.oldVersion,$e.newVersion,Ji(he.transaction))}),R&&he.addEventListener("blocked",()=>R()),qe.then($e=>{Y&&$e.addEventListener("close",()=>Y()),W&&$e.addEventListener("versionchange",()=>W())}).catch(()=>{}),qe}function Gt(I,{blocked:b}={}){const R=indexedDB.deleteDatabase(I);return b&&R.addEventListener("blocked",()=>b()),Ji(R).then(()=>{})}const ol=["get","getKey","getAll","getAllKeys","count"],kc=["put","add","delete","clear"],Bn=new Map;function al(I,b){if(!(I instanceof IDBDatabase)||b in I||"string"!=typeof b)return;if(Bn.get(b))return Bn.get(b);const R=b.replace(/FromIndex$/,""),O=b!==R,W=kc.includes(R);if(!(R in(O?IDBIndex:IDBObjectStore).prototype)||!W&&!ol.includes(R))return;const Y=function(){var he=(0,F.Z)(function*(qe,...$e){const ft=this.transaction(qe,W?"readwrite":"readonly");let pt=ft.store;return O&&(pt=pt.index($e.shift())),(yield Promise.all([pt[R](...$e),W&&ft.done]))[0]});return function($e){return he.apply(this,arguments)}}();return Bn.set(b,Y),Y}!function wh(I){Ya=I(Ya)}(I=>({...I,get:(b,R,O)=>al(b,R)||I.get(b,R,O),has:(b,R)=>!!al(b,R)||I.has(b,R)}));const Mo="/firebase-messaging-sw.js",Ei="/firebase-cloud-messaging-push-scope",fa="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Fc="google.c.a.c_id",jn="google.c.a.c_l",Mp="google.c.a.ts",Np="google.c.a.e";var Ii=(()=>{return(I=Ii||(Ii={})).PUSH_RECEIVED="push-received",I.NOTIFICATION_CLICKED="notification-clicked",Ii;var I})();function Xi(I){const b=new Uint8Array(I);return btoa(String.fromCharCode(...b)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Bs(I){const R=(I+"=".repeat((4-I.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),O=atob(R),W=new Uint8Array(O.length);for(let Y=0;Y<O.length;++Y)W[Y]=O.charCodeAt(Y);return W}const Ci="fcm_token_details_db",No="fcm_token_object_Store";function p_(I){return pa.apply(this,arguments)}function pa(){return pa=(0,F.Z)(function*(I){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Y=>Y.name).includes(Ci))return null;let b=null;return(yield Ae(Ci,5,{upgrade:(O=(0,F.Z)(function*(W,Y,he,qe){var $e;if(Y<2||!W.objectStoreNames.contains(No))return;const ft=qe.objectStore(No),pt=yield ft.index("fcmSenderId").get(I);if(yield ft.clear(),pt)if(2===Y){const Ot=pt;if(!Ot.auth||!Ot.p256dh||!Ot.endpoint)return;b={token:Ot.fcmToken,createTime:null!==($e=Ot.createTime)&&void 0!==$e?$e:Date.now(),subscriptionOptions:{auth:Ot.auth,p256dh:Ot.p256dh,endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:"string"==typeof Ot.vapidKey?Ot.vapidKey:Xi(Ot.vapidKey)}}}else if(3===Y){const Ot=pt;b={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:Xi(Ot.auth),p256dh:Xi(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:Xi(Ot.vapidKey)}}}else if(4===Y){const Ot=pt;b={token:Ot.fcmToken,createTime:Ot.createTime,subscriptionOptions:{auth:Xi(Ot.auth),p256dh:Xi(Ot.p256dh),endpoint:Ot.endpoint,swScope:Ot.swScope,vapidKey:Xi(Ot.vapidKey)}}}}),function(Y,he,qe,$e){return O.apply(this,arguments)})})).close(),yield Gt(Ci),yield Gt("fcm_vapid_details_db"),yield Gt("undefined"),Lc(b)?b:null;var O}),pa.apply(this,arguments)}function Lc(I){if(!I||!I.subscriptionOptions)return!1;const{subscriptionOptions:b}=I;return"number"==typeof I.createTime&&I.createTime>0&&"string"==typeof I.token&&I.token.length>0&&"string"==typeof b.auth&&b.auth.length>0&&"string"==typeof b.p256dh&&b.p256dh.length>0&&"string"==typeof b.endpoint&&b.endpoint.length>0&&"string"==typeof b.swScope&&b.swScope.length>0&&"string"==typeof b.vapidKey&&b.vapidKey.length>0}const Kr="firebase-messaging-store";let Vc=null;function Ja(){return Vc||(Vc=Ae("firebase-messaging-database",1,{upgrade:(I,b)=>{0===b&&I.createObjectStore(Kr)}})),Vc}function Xa(I){return Po.apply(this,arguments)}function Po(){return(Po=(0,F.Z)(function*(I){const b=ll(I),O=yield(yield Ja()).transaction(Kr).objectStore(Kr).get(b);if(O)return O;{const W=yield p_(I.appConfig.senderId);if(W)return yield Uc(I,W),W}})).apply(this,arguments)}function Uc(I,b){return eu.apply(this,arguments)}function eu(){return(eu=(0,F.Z)(function*(I,b){const R=ll(I),W=(yield Ja()).transaction(Kr,"readwrite");return yield W.objectStore(Kr).put(b,R),yield W.done,b})).apply(this,arguments)}function bh(I){return ga.apply(this,arguments)}function ga(){return(ga=(0,F.Z)(function*(I){const b=ll(I),O=(yield Ja()).transaction(Kr,"readwrite");yield O.objectStore(Kr).delete(b),yield O.done})).apply(this,arguments)}function ll({appConfig:I}){return I.appId}const on=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function js(I,b){return Rn.apply(this,arguments)}function Rn(){return(Rn=(0,F.Z)(function*(I,b){const R=yield jc(I),O=tu(b),W={method:"POST",headers:R,body:JSON.stringify(O)};let Y;try{Y=yield(yield fetch(cl(I.appConfig),W)).json()}catch(he){throw on.create("token-subscribe-failed",{errorInfo:he?.toString()})}if(Y.error)throw on.create("token-subscribe-failed",{errorInfo:Y.error.message});if(!Y.token)throw on.create("token-subscribe-no-token");return Y.token})).apply(this,arguments)}function Dh(I,b){return Th.apply(this,arguments)}function Th(){return(Th=(0,F.Z)(function*(I,b){const R=yield jc(I),O=tu(b.subscriptionOptions),W={method:"PATCH",headers:R,body:JSON.stringify(O)};let Y;try{Y=yield(yield fetch(`${cl(I.appConfig)}/${b.token}`,W)).json()}catch(he){throw on.create("token-update-failed",{errorInfo:he?.toString()})}if(Y.error)throw on.create("token-update-failed",{errorInfo:Y.error.message});if(!Y.token)throw on.create("token-update-no-token");return Y.token})).apply(this,arguments)}function Bc(I,b){return Sh.apply(this,arguments)}function Sh(){return(Sh=(0,F.Z)(function*(I,b){const O={method:"DELETE",headers:yield jc(I)};try{const Y=yield(yield fetch(`${cl(I.appConfig)}/${b}`,O)).json();if(Y.error)throw on.create("token-unsubscribe-failed",{errorInfo:Y.error.message})}catch(W){throw on.create("token-unsubscribe-failed",{errorInfo:W?.toString()})}})).apply(this,arguments)}function cl({projectId:I}){return`https://fcmregistrations.googleapis.com/v1/projects/${I}/registrations`}function jc(I){return ko.apply(this,arguments)}function ko(){return(ko=(0,F.Z)(function*({appConfig:I,installations:b}){const R=yield b.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":I.apiKey,"x-goog-firebase-installations-auth":`FIS ${R}`})})).apply(this,arguments)}function tu({p256dh:I,auth:b,endpoint:R,vapidKey:O}){const W={web:{endpoint:R,auth:b,p256dh:I}};return O!==fa&&(W.web.applicationPubKey=O),W}const ma=6048e5;function Ah(I){return nu.apply(this,arguments)}function nu(){return(nu=(0,F.Z)(function*(I){const b=yield $c(I.swRegistration,I.vapidKey),R={vapidKey:I.vapidKey,swScope:I.swRegistration.scope,endpoint:b.endpoint,auth:Xi(b.getKey("auth")),p256dh:Xi(b.getKey("p256dh"))},O=yield Xa(I.firebaseDependencies);if(O){if(Op(O.subscriptionOptions,R))return Date.now()>=O.createTime+ma?ru(I,{token:O.token,createTime:Date.now(),subscriptionOptions:R}):O.token;try{yield Bc(I.firebaseDependencies,O.token)}catch(W){console.warn(W)}return kp(I.firebaseDependencies,R)}return kp(I.firebaseDependencies,R)})).apply(this,arguments)}function Pp(I){return $s.apply(this,arguments)}function $s(){return($s=(0,F.Z)(function*(I){const b=yield Xa(I.firebaseDependencies);b&&(yield Bc(I.firebaseDependencies,b.token),yield bh(I.firebaseDependencies));const R=yield I.swRegistration.pushManager.getSubscription();return!R||R.unsubscribe()})).apply(this,arguments)}function ru(I,b){return dl.apply(this,arguments)}function dl(){return(dl=(0,F.Z)(function*(I,b){try{const R=yield Dh(I.firebaseDependencies,b),O=Object.assign(Object.assign({},b),{token:R,createTime:Date.now()});return yield Uc(I.firebaseDependencies,O),R}catch(R){throw yield Pp(I),R}})).apply(this,arguments)}function kp(I,b){return es.apply(this,arguments)}function es(){return(es=(0,F.Z)(function*(I,b){const O={token:yield js(I,b),createTime:Date.now(),subscriptionOptions:b};return yield Uc(I,O),O.token})).apply(this,arguments)}function $c(I,b){return xh.apply(this,arguments)}function xh(){return(xh=(0,F.Z)(function*(I,b){return(yield I.pushManager.getSubscription())||I.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Bs(b)})})).apply(this,arguments)}function Op(I,b){return b.vapidKey===I.vapidKey&&b.endpoint===I.endpoint&&b.auth===I.auth&&b.p256dh===I.p256dh}function Hc(I){const b={from:I.from,collapseKey:I.collapse_key,messageId:I.fcmMessageId};return function hl(I,b){if(!b.notification)return;I.notification={};const R=b.notification.title;R&&(I.notification.title=R);const O=b.notification.body;O&&(I.notification.body=O);const W=b.notification.image;W&&(I.notification.image=W);const Y=b.notification.icon;Y&&(I.notification.icon=Y)}(b,I),function fl(I,b){!b.data||(I.data=b.data)}(b,I),function pl(I,b){var R,O,W,Y,he;if(!(b.fcmOptions||null!==(R=b.notification)&&void 0!==R&&R.click_action))return;I.fcmOptions={};const qe=null!==(W=null===(O=b.fcmOptions)||void 0===O?void 0:O.link)&&void 0!==W?W:null===(Y=b.notification)||void 0===Y?void 0:Y.click_action;qe&&(I.fcmOptions.link=qe);const $e=null===(he=b.fcmOptions)||void 0===he?void 0:he.analytics_label;$e&&(I.fcmOptions.analyticsLabel=$e)}(b,I),b}function Fp(I){return"object"==typeof I&&!!I&&Fc in I}function _a(I,b){const R=[];for(let O=0;O<I.length;O++)R.push(I.charAt(O)),O<b.length&&R.push(b.charAt(O));return R.join("")}function Gc(I){return on.create("missing-app-config-values",{valueName:I})}_a("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),_a("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class iu{constructor(b,R,O){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const W=function Rh(I){if(!I||!I.options)throw Gc("App Configuration Object");if(!I.name)throw Gc("App Name");const b=["projectId","apiKey","appId","messagingSenderId"],{options:R}=I;for(const O of b)if(!R[O])throw Gc(O);return{appName:I.name,projectId:R.projectId,apiKey:R.apiKey,appId:R.appId,senderId:R.messagingSenderId}}(b);this.firebaseDependencies={app:b,appConfig:W,installations:R,analyticsProvider:O}}_delete(){return Promise.resolve()}}function Lp(I){return Es.apply(this,arguments)}function Es(){return(Es=(0,F.Z)(function*(I){try{I.swRegistration=yield navigator.serviceWorker.register(Mo,{scope:Ei}),I.swRegistration.update().catch(()=>{})}catch(b){throw on.create("failed-service-worker-registration",{browserErrorMessage:b?.message})}})).apply(this,arguments)}function su(I,b){return Hs.apply(this,arguments)}function Hs(){return(Hs=(0,F.Z)(function*(I,b){if(!b&&!I.swRegistration&&(yield Lp(I)),b||!I.swRegistration){if(!(b instanceof ServiceWorkerRegistration))throw on.create("invalid-sw-registration");I.swRegistration=b}})).apply(this,arguments)}function Oo(I,b){return Is.apply(this,arguments)}function Is(){return(Is=(0,F.Z)(function*(I,b){b?I.vapidKey=b:I.vapidKey||(I.vapidKey=fa)})).apply(this,arguments)}function ou(){return(ou=(0,F.Z)(function*(I,b){if(!navigator)throw on.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw on.create("permission-blocked");return yield Oo(I,b?.vapidKey),yield su(I,b?.serviceWorkerRegistration),Ah(I)})).apply(this,arguments)}function Li(I,b,R){return zc.apply(this,arguments)}function zc(){return(zc=(0,F.Z)(function*(I,b,R){const O=ya(b);(yield I.firebaseDependencies.analyticsProvider.get()).logEvent(O,{message_id:R[Fc],message_name:R[jn],message_time:R[Mp],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function ya(I){switch(I){case Ii.NOTIFICATION_CLICKED:return"notification_open";case Ii.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function Fo(){return(Fo=(0,F.Z)(function*(I,b){const R=b.data;if(!R.isFirebaseMessaging)return;I.onMessageHandler&&R.messageType===Ii.PUSH_RECEIVED&&("function"==typeof I.onMessageHandler?I.onMessageHandler(Hc(R)):I.onMessageHandler.next(Hc(R)));const O=R.data;Fp(O)&&"1"===O[Np]&&(yield Li(I,R.messageType,O))})).apply(this,arguments)}const Lo="@firebase/messaging",Vo=I=>{const b=new iu(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),I.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",R=>function Wc(I,b){return Fo.apply(this,arguments)}(b,R)),b},ml=I=>{const b=I.getProvider("messaging").getImmediate();return{getToken:O=>function gl(I,b){return ou.apply(this,arguments)}(b,O)}};function uu(){return va.apply(this,arguments)}function va(){return(va=(0,F.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Vp(){(0,ue._registerComponent)(new ge.wA("messaging",Vo,"PUBLIC")),(0,ue._registerComponent)(new ge.wA("messaging-internal",ml,"PRIVATE")),(0,ue.registerVersion)(Lo,"0.12.4"),(0,ue.registerVersion)(Lo,"0.12.4","esm2017")}();const Mn="analytics",qc="firebase_id",yl="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Gs="https://www.googletagmanager.com/gtag/js",$n=new pe.Yd("@firebase/analytics"),jr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function wa(I){if(!I.startsWith(Gs)){const b=jr.create("invalid-gtag-resource",{gtagURL:I});return $n.warn(b.message),""}return I}function zs(I){return Promise.all(I.map(b=>b.catch(R=>R)))}function du(I,b){const R=function vl(I,b){let R;return window.trustedTypes&&(R=window.trustedTypes.createPolicy(I,b)),R}("firebase-js-sdk-policy",{createScriptURL:wa}),O=document.createElement("script"),W=`${Gs}?l=${I}&id=${b}`;O.src=R?R?.createScriptURL(W):W,O.async=!0,document.head.appendChild(O)}function Kc(I,b,R,O,W,Y){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,F.Z)(function*(I,b,R,O,W,Y){const he=O[W];try{if(he)yield b[he];else{const $e=(yield zs(R)).find(ft=>ft.measurementId===W);$e&&(yield b[$e.appId])}}catch(qe){$n.error(qe)}I("config",W,Y)})).apply(this,arguments)}function jp(I,b,R,O,W){return Mh.apply(this,arguments)}function Mh(){return(Mh=(0,F.Z)(function*(I,b,R,O,W){try{let Y=[];if(W&&W.send_to){let he=W.send_to;Array.isArray(he)||(he=[he]);const qe=yield zs(R);for(const $e of he){const ft=qe.find(Ot=>Ot.measurementId===$e),pt=ft&&b[ft.appId];if(!pt){Y=[];break}Y.push(pt)}}0===Y.length&&(Y=Object.values(b)),yield Promise.all(Y),I("event",O,W||{})}catch(Y){$n.error(Y)}})).apply(this,arguments)}function Gp(I){const b=window.document.getElementsByTagName("script");for(const R of Object.values(b))if(R.src&&R.src.includes(Gs)&&R.src.includes(I))return R;return null}const dr=new class wl{constructor(b={},R=1e3){this.throttleMetadata=b,this.intervalMillis=R}getThrottleMetadata(b){return this.throttleMetadata[b]}setThrottleMetadata(b,R){this.throttleMetadata[b]=R}deleteThrottleMetadata(b){delete this.throttleMetadata[b]}};function El(I){return new Headers({Accept:"application/json","x-goog-api-key":I})}function Vi(I){return Nh.apply(this,arguments)}function Nh(){return(Nh=(0,F.Z)(function*(I){var b;const{appId:R,apiKey:O}=I,W={method:"GET",headers:El(O)},Y=yl.replace("{app-id}",R),he=yield fetch(Y,W);if(200!==he.status&&304!==he.status){let qe="";try{const $e=yield he.json();null!==(b=$e.error)&&void 0!==b&&b.message&&(qe=$e.error.message)}catch{}throw jr.create("config-fetch-failed",{httpStatus:he.status,responseMessage:qe})}return he.json()})).apply(this,arguments)}function zp(I){return sr.apply(this,arguments)}function sr(){return(sr=(0,F.Z)(function*(I,b=dr,R){const{appId:O,apiKey:W,measurementId:Y}=I.options;if(!O)throw jr.create("no-app-id");if(!W){if(Y)return{measurementId:Y,appId:O};throw jr.create("no-api-key")}const he=b.getThrottleMetadata(O)||{backoffCount:0,throttleEndTimeMillis:Date.now()},qe=new Ph;return setTimeout((0,F.Z)(function*(){qe.abort()}),void 0!==R?R:6e4),ts({appId:O,apiKey:W,measurementId:Y},he,qe,b)})).apply(this,arguments)}function ts(I,b,R){return Yc.apply(this,arguments)}function Yc(){return(Yc=(0,F.Z)(function*(I,{throttleEndTimeMillis:b,backoffCount:R},O,W=dr){var Y;const{appId:he,measurementId:qe}=I;try{yield Qc(O,b)}catch($e){if(qe)return $n.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${$e?.message}]`),{appId:he,measurementId:qe};throw $e}try{const $e=yield Vi(I);return W.deleteThrottleMetadata(he),$e}catch($e){const ft=$e;if(!Ea(ft)){if(W.deleteThrottleMetadata(he),qe)return $n.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${ft?.message}]`),{appId:he,measurementId:qe};throw $e}const pt=503===Number(null===(Y=ft?.customData)||void 0===Y?void 0:Y.httpStatus)?(0,ae.$s)(R,W.intervalMillis,30):(0,ae.$s)(R,W.intervalMillis),Ot={throttleEndTimeMillis:Date.now()+pt,backoffCount:R+1};return W.setThrottleMetadata(he,Ot),$n.debug(`Calling attemptFetch again in ${pt} millis`),ts(I,Ot,O,W)}})).apply(this,arguments)}function Qc(I,b){return new Promise((R,O)=>{const W=Math.max(b-Date.now(),0),Y=setTimeout(R,W);I.addEventListener(()=>{clearTimeout(Y),O(jr.create("fetch-throttle",{throttleEndTimeMillis:b}))})})}function Ea(I){if(!(I instanceof ae.ZR&&I.customData))return!1;const b=Number(I.customData.httpStatus);return 429===b||500===b||503===b||504===b}class Ph{constructor(){this.listeners=[]}addEventListener(b){this.listeners.push(b)}abort(){this.listeners.forEach(b=>b())}}let kh,Oh;function Wp(){return(Wp=(0,F.Z)(function*(I,b,R,O,W){if(W&&W.global)I("event",R,O);else{const Y=yield b;I("event",R,Object.assign(Object.assign({},O),{send_to:Y}))}})).apply(this,arguments)}function Tl(I){Oh=I}function Sl(I){kh=I}function Jt(){return Ui.apply(this,arguments)}function Ui(){return(Ui=(0,F.Z)(function*(){if(!(0,ae.hl)())return $n.warn(jr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(I){return $n.warn(jr.create("indexeddb-unavailable",{errorInfo:I?.toString()}).message),!1}return!0})).apply(this,arguments)}function hr(){return(hr=(0,F.Z)(function*(I,b,R,O,W,Y,he){var qe;const $e=zp(I);$e.then(wn=>{R[wn.measurementId]=wn.appId,I.options.measurementId&&wn.measurementId!==I.options.measurementId&&$n.warn(`The measurement ID in the local Firebase config (${I.options.measurementId}) does not match the measurement ID fetched from the server (${wn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(wn=>$n.error(wn)),b.push($e);const ft=Jt().then(wn=>{if(wn)return O.getId()}),[pt,Ot]=yield Promise.all([$e,ft]);Gp(Y)||du(Y,pt.measurementId),Oh&&(W("consent","default",Oh),Tl(void 0)),W("js",new Date);const $r=null!==(qe=he?.config)&&void 0!==qe?qe:{};return $r.origin="firebase",$r.update=!0,null!=Ot&&($r[qc]=Ot),W("config",pt.measurementId,$r),kh&&(W("set",kh),Sl(void 0)),pt.measurementId})).apply(this,arguments)}class fr{constructor(b){this.app=b}_delete(){return delete Zr[this.app.options.appId],Promise.resolve()}}let Zr={},pu=[];const Bi={};let jo,Yr,Al="dataLayer",xl=!1;function vt(I,b,R){!function $o(){const I=[];if((0,ae.ru)()&&I.push("This is a browser extension environment."),(0,ae.zI)()||I.push("Cookies are not available."),I.length>0){const b=I.map((O,W)=>`(${W+1}) ${O}`).join(" "),R=jr.create("invalid-analytics-context",{errorInfo:b});$n.warn(R.message)}}();const O=I.options.appId;if(!O)throw jr.create("no-app-id");if(!I.options.apiKey){if(!I.options.measurementId)throw jr.create("no-api-key");$n.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${I.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Zr[O])throw jr.create("already-exists",{id:O});if(!xl){!function pn(I){let b=[];Array.isArray(window[I])?b=window[I]:window[I]=b}(Al);const{wrappedGtag:Y,gtagCore:he}=function Hp(I,b,R,O,W){let Y=function(...he){window[O].push(arguments)};return window[W]&&"function"==typeof window[W]&&(Y=window[W]),window[W]=function $p(I,b,R,O){function Y(){return(Y=(0,F.Z)(function*(he,...qe){try{if("event"===he){const[$e,ft]=qe;yield jp(I,b,R,$e,ft)}else if("config"===he){const[$e,ft]=qe;yield Kc(I,b,R,O,$e,ft)}else if("consent"===he){const[$e]=qe;I("consent","update",$e)}else if("get"===he){const[$e,ft,pt]=qe;I("get",$e,ft,pt)}else if("set"===he){const[$e]=qe;I("set",$e)}else I(he,...qe)}catch($e){$n.error($e)}})).apply(this,arguments)}return function W(he){return Y.apply(this,arguments)}}(Y,I,b,R),{gtagCore:Y,wrappedGtag:window[W]}}(Zr,pu,Bi,Al,"gtag");Yr=Y,jo=he,xl=!0}return Zr[O]=function ht(I,b,R,O,W,Y,he){return hr.apply(this,arguments)}(I,pu,Bi,b,jo,Al,R),new fr(I)}function Rl(){return Ml.apply(this,arguments)}function Ml(){return(Ml=(0,F.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const mu="@firebase/analytics";!function ed(){(0,ue._registerComponent)(new ge.wA(Mn,(b,{options:R})=>vt(b.getProvider("app").getImmediate(),b.getProvider("installations-internal").getImmediate(),R),"PUBLIC")),(0,ue._registerComponent)(new ge.wA("analytics-internal",function I(b){try{const R=b.getProvider(Mn).getImmediate();return{logEvent:(O,W,Y)=>function Ws(I,b,R,O){I=(0,ae.m9)(I),function y_(I,b,R,O,W){return Wp.apply(this,arguments)}(Yr,Zr[I.app.options.appId],b,R,O).catch(W=>$n.error(W))}(R,O,W,Y)}}catch(R){throw jr.create("interop-component-reg-failed",{reason:R})}},"PRIVATE")),(0,ue.registerVersion)(mu,"0.10.0"),(0,ue.registerVersion)(mu,"0.10.0","esm2017")}();var ji=V(4408),Uh=V(7565);const Nl=new class pr extends Uh.v{}(class ns extends ji.o{constructor(b,R){super(b,R),this.scheduler=b,this.work=R}schedule(b,R=0){return R>0?super.schedule(b,R):(this.delay=R,this.state=b,this.scheduler.flush(this),this)}execute(b,R){return R>0||this.closed?super.execute(b,R):this._execute(b,R)}requestAsyncId(b,R,O=0){return null!=O&&O>0||null==O&&this.delay>0?super.requestAsyncId(b,R,O):(b.flush(this),0)}});var Hn=V(4986),_u=V(8505),zo=V(5363),ci=V(9468);const or=new f.GfV("7.4.0"),mo="__angularfire_symbol__analyticsIsSupportedValue",Ca="__angularfire_symbol__analyticsIsSupported",Pl="__angularfire_symbol__remoteConfigIsSupportedValue",rs="__angularfire_symbol__remoteConfigIsSupported",is="__angularfire_symbol__messagingIsSupportedValue",wr="__angularfire_symbol__messagingIsSupported";function Jp(I,b,R){if(b){if(1===b.length)return b[0];const Y=b.filter(he=>he.app===R);if(1===Y.length)return Y[0]}return R.container.getProvider(I).getImmediate({optional:!0})}globalThis[Ca]||(globalThis[Ca]=Rl().then(I=>globalThis[mo]=I).catch(()=>globalThis[mo]=!1)),globalThis[wr]||(globalThis[wr]=uu().then(I=>globalThis[is]=I).catch(()=>globalThis[is]=!1)),globalThis[rs]||(globalThis[rs]=li().then(I=>globalThis[Pl]=I).catch(()=>globalThis[Pl]=!1));const td=(I,b)=>{const R=b?[b]:(0,ee.C6)(),O=[];return R.forEach(W=>{W.container.getProvider(I).instances.forEach(he=>{O.includes(he)||O.push(he)})}),O};function Wo(){}class nd{constructor(b,R=Nl){this.zone=b,this.delegate=R}now(){return this.delegate.now()}schedule(b,R,O){const W=this.zone;return this.delegate.schedule(function(he){W.runGuarded(()=>{b.apply(this,[he])})},R,O)}}class zt{constructor(b){this.zone=b,this.task=null}call(b,R){const O=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Wo,{},Wo,Wo)),R.pipe((0,_u.b)({next:O,complete:O,error:O})).subscribe(b).add(O)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let yu=(()=>{class I{constructor(R){this.ngZone=R,this.outsideAngular=R.runOutsideAngular(()=>new nd(Zone.current)),this.insideAngular=R.run(()=>new nd(Zone.current,Hn.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return I.\u0275fac=function(R){return new(R||I)(f.LFG(f.R0b))},I.\u0275prov=f.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function ba(){const I=globalThis.\u0275AngularFireScheduler;if(!I)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return I}function rd(I){return I.pipe((0,zo.Q)(ba().outsideAngular))}function kl(I){return ba(),function id(I){return function(R){return(R=R.lift(new zt(I.ngZone))).pipe((0,ci.R)(I.outsideAngular),(0,zo.Q)(I.insideAngular))}}(ba())(I)}},2090:(Et,Me,V)=>{V.d(Me,{$s:()=>vs,BH:()=>ve,DV:()=>ri,Dv:()=>oi,G6:()=>_s,GJ:()=>nr,L:()=>_e,LL:()=>ye,Pz:()=>Ce,Sg:()=>ze,UG:()=>re,UI:()=>ct,US:()=>ge,Wj:()=>xr,Wl:()=>It,Yr:()=>co,ZB:()=>Z,ZR:()=>xe,aH:()=>Fe,b$:()=>Ht,cI:()=>dn,dS:()=>Ao,eu:()=>te,g5:()=>F,gK:()=>ir,gQ:()=>Dn,h$:()=>Ie,hl:()=>ie,hu:()=>ee,jU:()=>Pt,lb:()=>hn,m9:()=>ai,ne:()=>rn,p$:()=>H,pd:()=>_r,r3:()=>rr,ru:()=>ut,tV:()=>z,uI:()=>it,ug:()=>tn,vZ:()=>ii,w1:()=>Fs,w9:()=>Vn,xO:()=>ua,xb:()=>Ni,z$:()=>je,zI:()=>Se,zd:()=>Pi});const ee=function(j,B){if(!j)throw F(B)},F=function(j){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+j)},ue=function(j){const B=[];let K=0;for(let le=0;le<j.length;le++){let X=j.charCodeAt(le);X<128?B[K++]=X:X<2048?(B[K++]=X>>6|192,B[K++]=63&X|128):55296==(64512&X)&&le+1<j.length&&56320==(64512&j.charCodeAt(le+1))?(X=65536+((1023&X)<<10)+(1023&j.charCodeAt(++le)),B[K++]=X>>18|240,B[K++]=X>>12&63|128,B[K++]=X>>6&63|128,B[K++]=63&X|128):(B[K++]=X>>12|224,B[K++]=X>>6&63|128,B[K++]=63&X|128)}return B},ge={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,B){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=B?this.byteToCharMapWebSafe_:this.byteToCharMap_,le=[];for(let X=0;X<j.length;X+=3){const We=j[X],Mt=X+1<j.length,Lt=Mt?j[X+1]:0,fn=X+2<j.length,Ue=fn?j[X+2]:0;let _n=(15&Lt)<<2|Ue>>6,Vr=63&Ue;fn||(Vr=64,Mt||(_n=64)),le.push(K[We>>2],K[(3&We)<<4|Lt>>4],K[_n],K[Vr])}return le.join("")},encodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?btoa(j):this.encodeByteArray(ue(j),B)},decodeString(j,B){return this.HAS_NATIVE_SUPPORT&&!B?atob(j):function(j){const B=[];let K=0,le=0;for(;K<j.length;){const X=j[K++];if(X<128)B[le++]=String.fromCharCode(X);else if(X>191&&X<224){const We=j[K++];B[le++]=String.fromCharCode((31&X)<<6|63&We)}else if(X>239&&X<365){const fn=((7&X)<<18|(63&j[K++])<<12|(63&j[K++])<<6|63&j[K++])-65536;B[le++]=String.fromCharCode(55296+(fn>>10)),B[le++]=String.fromCharCode(56320+(1023&fn))}else{const We=j[K++],Mt=j[K++];B[le++]=String.fromCharCode((15&X)<<12|(63&We)<<6|63&Mt)}}return B.join("")}(this.decodeStringToByteArray(j,B))},decodeStringToByteArray(j,B){this.init_();const K=B?this.charToByteMapWebSafe_:this.charToByteMap_,le=[];for(let X=0;X<j.length;){const We=K[j.charAt(X++)],Lt=X<j.length?K[j.charAt(X)]:0;++X;const Ue=X<j.length?K[j.charAt(X)]:64;++X;const Ct=X<j.length?K[j.charAt(X)]:64;if(++X,null==We||null==Lt||null==Ue||null==Ct)throw new pe;le.push(We<<2|Lt>>4),64!==Ue&&(le.push(Lt<<4&240|Ue>>2),64!==Ct&&le.push(Ue<<6&192|Ct))}return le},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class pe extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ie=function(j){const B=ue(j);return ge.encodeByteArray(B,!0)},_e=function(j){return Ie(j).replace(/\./g,"")},z=function(j){try{return ge.decodeString(j,!0)}catch(B){console.error("base64Decode failed: ",B)}return null};function H(j){return Z(void 0,j)}function Z(j,B){if(!(B instanceof Object))return B;switch(B.constructor){case Date:return new Date(B.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return B}for(const K in B)!B.hasOwnProperty(K)||!He(K)||(j[K]=Z(j[K],B[K]));return j}function He(j){return"__proto__"!==j}const we=()=>{try{return function Ne(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const B=j&&z(j[1]);return B&&JSON.parse(B)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},Fe=()=>{var j;return null===(j=we())||void 0===j?void 0:j.config},Ce=j=>{var B;return null===(B=we())||void 0===B?void 0:B[`_${j}`]};class ve{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((B,K)=>{this.resolve=B,this.reject=K})}wrapCallback(B){return(K,le)=>{K?this.reject(K):this.resolve(le),"function"==typeof B&&(this.promise.catch(()=>{}),1===B.length?B(K):B(K,le))}}}function ze(j,B){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const le=B||"demo-project",X=j.iat||0,We=j.sub||j.user_id;if(!We)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Mt=Object.assign({iss:`https://securetoken.google.com/${le}`,aud:le,iat:X,exp:X+3600,auth_time:X,sub:We,user_id:We,firebase:{sign_in_provider:"custom",identities:{}}},j);return[_e(JSON.stringify({alg:"none",type:"JWT"})),_e(JSON.stringify(Mt)),""].join(".")}function je(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(je())}function re(){var j;const B=null===(j=we())||void 0===j?void 0:j.forceEnvironment;if("node"===B)return!0;if("browser"===B)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Pt(){return"object"==typeof self&&self.self===self}function ut(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function Ht(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Fs(){const j=je();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function co(){return!1}function _s(){return!re()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function ie(){try{return"object"==typeof indexedDB}catch{return!1}}function te(){return new Promise((j,B)=>{try{let K=!0;const le="validate-browser-context-for-indexeddb-analytics-module",X=self.indexedDB.open(le);X.onsuccess=()=>{X.result.close(),K||self.indexedDB.deleteDatabase(le),j(!0)},X.onupgradeneeded=()=>{K=!1},X.onerror=()=>{var We;B((null===(We=X.error)||void 0===We?void 0:We.message)||"")}}catch(K){B(K)}})}function Se(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class xe extends Error{constructor(B,K,le){super(K),this.code=B,this.customData=le,this.name="FirebaseError",Object.setPrototypeOf(this,xe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ye.prototype.create)}}class ye{constructor(B,K,le){this.service=B,this.serviceName=K,this.errors=le}create(B,...K){const le=K[0]||{},X=`${this.service}/${B}`,We=this.errors[B],Mt=We?function lt(j,B){return j.replace(kt,(K,le)=>{const X=B[le];return null!=X?String(X):`<${le}?>`})}(We,le):"Error";return new xe(X,`${this.serviceName}: ${Mt} (${X}).`,le)}}const kt=/\{\$([^}]+)}/g;function dn(j){return JSON.parse(j)}function It(j){return JSON.stringify(j)}const Yt=function(j){let B={},K={},le={},X="";try{const We=j.split(".");B=dn(z(We[0])||""),K=dn(z(We[1])||""),X=We[2],le=K.d||{},delete K.d}catch{}return{header:B,claims:K,data:le,signature:X}},Vn=function(j){const K=Yt(j).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},nr=function(j){const B=Yt(j).claims;return"object"==typeof B&&!0===B.admin};function rr(j,B){return Object.prototype.hasOwnProperty.call(j,B)}function ri(j,B){if(Object.prototype.hasOwnProperty.call(j,B))return j[B]}function Ni(j){for(const B in j)if(Object.prototype.hasOwnProperty.call(j,B))return!1;return!0}function ct(j,B,K){const le={};for(const X in j)Object.prototype.hasOwnProperty.call(j,X)&&(le[X]=B.call(K,j[X],X,j));return le}function ii(j,B){if(j===B)return!0;const K=Object.keys(j),le=Object.keys(B);for(const X of K){if(!le.includes(X))return!1;const We=j[X],Mt=B[X];if(qi(We)&&qi(Mt)){if(!ii(We,Mt))return!1}else if(We!==Mt)return!1}for(const X of le)if(!K.includes(X))return!1;return!0}function qi(j){return null!==j&&"object"==typeof j}function ua(j){const B=[];for(const[K,le]of Object.entries(j))Array.isArray(le)?le.forEach(X=>{B.push(encodeURIComponent(K)+"="+encodeURIComponent(X))}):B.push(encodeURIComponent(K)+"="+encodeURIComponent(le));return B.length?"&"+B.join("&"):""}function Pi(j){const B={};return j.replace(/^\?/,"").split("&").forEach(le=>{if(le){const[X,We]=le.split("=");B[decodeURIComponent(X)]=decodeURIComponent(We)}}),B}function _r(j){const B=j.indexOf("?");if(!B)return"";const K=j.indexOf("#",B);return j.substring(B,K>0?K:void 0)}class Dn{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let B=1;B<this.blockSize;++B)this.pad_[B]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(B,K){K||(K=0);const le=this.W_;if("string"==typeof B)for(let Ct=0;Ct<16;Ct++)le[Ct]=B.charCodeAt(K)<<24|B.charCodeAt(K+1)<<16|B.charCodeAt(K+2)<<8|B.charCodeAt(K+3),K+=4;else for(let Ct=0;Ct<16;Ct++)le[Ct]=B[K]<<24|B[K+1]<<16|B[K+2]<<8|B[K+3],K+=4;for(let Ct=16;Ct<80;Ct++){const _n=le[Ct-3]^le[Ct-8]^le[Ct-14]^le[Ct-16];le[Ct]=4294967295&(_n<<1|_n>>>31)}let Ue,dt,X=this.chain_[0],We=this.chain_[1],Mt=this.chain_[2],Lt=this.chain_[3],fn=this.chain_[4];for(let Ct=0;Ct<80;Ct++){Ct<40?Ct<20?(Ue=Lt^We&(Mt^Lt),dt=1518500249):(Ue=We^Mt^Lt,dt=1859775393):Ct<60?(Ue=We&Mt|Lt&(We|Mt),dt=2400959708):(Ue=We^Mt^Lt,dt=3395469782);const _n=(X<<5|X>>>27)+Ue+fn+dt+le[Ct]&4294967295;fn=Lt,Lt=Mt,Mt=4294967295&(We<<30|We>>>2),We=X,X=_n}this.chain_[0]=this.chain_[0]+X&4294967295,this.chain_[1]=this.chain_[1]+We&4294967295,this.chain_[2]=this.chain_[2]+Mt&4294967295,this.chain_[3]=this.chain_[3]+Lt&4294967295,this.chain_[4]=this.chain_[4]+fn&4294967295}update(B,K){if(null==B)return;void 0===K&&(K=B.length);const le=K-this.blockSize;let X=0;const We=this.buf_;let Mt=this.inbuf_;for(;X<K;){if(0===Mt)for(;X<=le;)this.compress_(B,X),X+=this.blockSize;if("string"==typeof B){for(;X<K;)if(We[Mt]=B.charCodeAt(X),++Mt,++X,Mt===this.blockSize){this.compress_(We),Mt=0;break}}else for(;X<K;)if(We[Mt]=B[X],++Mt,++X,Mt===this.blockSize){this.compress_(We),Mt=0;break}}this.inbuf_=Mt,this.total_+=K}digest(){const B=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let X=this.blockSize-1;X>=56;X--)this.buf_[X]=255&K,K/=256;this.compress_(this.buf_);let le=0;for(let X=0;X<5;X++)for(let We=24;We>=0;We-=8)B[le]=this.chain_[X]>>We&255,++le;return B}}function rn(j,B){const K=new st(j,B);return K.subscribe.bind(K)}class st{constructor(B,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{B(this)}).catch(le=>{this.error(le)})}next(B){this.forEachObserver(K=>{K.next(B)})}error(B){this.forEachObserver(K=>{K.error(B)}),this.close(B)}complete(){this.forEachObserver(B=>{B.complete()}),this.close()}subscribe(B,K,le){let X;if(void 0===B&&void 0===K&&void 0===le)throw new Error("Missing Observer.");X=function mn(j,B){if("object"!=typeof j||null===j)return!1;for(const K of B)if(K in j&&"function"==typeof j[K])return!0;return!1}(B,["next","error","complete"])?B:{next:B,error:K,complete:le},void 0===X.next&&(X.next=ys),void 0===X.error&&(X.error=ys),void 0===X.complete&&(X.complete=ys);const We=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?X.error(this.finalError):X.complete()}catch{}}),this.observers.push(X),We}unsubscribeOne(B){void 0===this.observers||void 0===this.observers[B]||(delete this.observers[B],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(B){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,B)}sendOne(B,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[B])try{K(this.observers[B])}catch(le){typeof console<"u"&&console.error&&console.error(le)}})}close(B){this.finalized||(this.finalized=!0,void 0!==B&&(this.finalError=B),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ys(){}const oi=function(j,B,K,le){let X;if(le<B?X="at least "+B:le>K&&(X=0===K?"none":"no more than "+K),X)throw new Error(j+" failed: Was called with "+le+(1===le?" argument.":" arguments.")+" Expects "+X+".")};function ir(j,B){return`${j} failed: ${B} argument `}function xr(j,B,K,le){if((!le||K)&&"function"!=typeof K)throw new Error(ir(j,B)+"must be a valid function.")}function hn(j,B,K,le){if((!le||K)&&("object"!=typeof K||null===K))throw new Error(ir(j,B)+"must be a valid context object.")}const Ao=function(j){const B=[];let K=0;for(let le=0;le<j.length;le++){let X=j.charCodeAt(le);if(X>=55296&&X<=56319){const We=X-55296;le++,ee(le<j.length,"Surrogate pair missing trail surrogate."),X=65536+(We<<10)+(j.charCodeAt(le)-56320)}X<128?B[K++]=X:X<2048?(B[K++]=X>>6|192,B[K++]=63&X|128):X<65536?(B[K++]=X>>12|224,B[K++]=X>>6&63|128,B[K++]=63&X|128):(B[K++]=X>>18|240,B[K++]=X>>12&63|128,B[K++]=X>>6&63|128,B[K++]=63&X|128)}return B},tn=function(j){let B=0;for(let K=0;K<j.length;K++){const le=j.charCodeAt(K);le<128?B++:le<2048?B+=2:le>=55296&&le<=56319?(B+=4,K++):B+=3}return B};function vs(j,B=1e3,K=2){const le=B*Math.pow(K,j),X=Math.round(.5*le*(Math.random()-.5)*2);return Math.min(144e5,le+X)}function ai(j){return j&&j._delegate?j._delegate:j}},9303:(Et,Me,V)=>{var f=V(4650);let ee=null;function F(){return ee}const pe=new f.OlP("DocumentToken");let Ie=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return function _e(){return(0,f.LFG)(H)}()},providedIn:"platform"}),n})();const z=new f.OlP("Location Initialized");let H=(()=>{class n extends Ie{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,r,i){Z()?this._history.pushState(t,r,i):this.location.hash=i}replaceState(t,r,i){Z()?this._history.replaceState(t,r,i):this.location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function He(){return new H((0,f.LFG)(pe))}()},providedIn:"platform"}),n})();function Z(){return!!window.history.pushState}function Ne(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Te(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function rt(n){return n&&"?"!==n[0]?"?"+n:n}let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(yt)},providedIn:"root"}),n})();const we=new f.OlP("appBaseHref");let yt=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,f.f3M)(pe).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ne(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+rt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,a){const l=this.prepareExternalUrl(i+rt(a));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){const l=this.prepareExternalUrl(i+rt(a));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ie),f.LFG(we,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),St=(()=>{class n extends Ee{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ne(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,a){let l=this.prepareExternalUrl(i+rt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,a){let l=this.prepareExternalUrl(i+rt(a));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Ie),f.LFG(we,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Fe=(()=>{class n{constructor(t){this._subject=new f.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._baseHref=Te(ze(r)),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+rt(r))}normalize(t){return n.stripTrailingSlash(function ve(n,e){return n&&e.startsWith(n)?e.substring(n.length):e}(this._baseHref,ze(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+rt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=rt,n.joinWithSlash=Ne,n.stripTrailingSlash=Te,n.\u0275fac=function(t){return new(t||n)(f.LFG(Ee))},n.\u0275prov=f.Yz7({token:n,factory:function(){return function Ce(){return new Fe((0,f.LFG)(Ee))}()},providedIn:"root"}),n})();function ze(n){return n.replace(/\/index.html$/,"")}let Kn=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new ah,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){vr("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){vr("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.s_b),f.Y36(f.Rgc))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class ah{constructor(){this.$implicit=null,this.ngIf=null}}function vr(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,f.AaK)(e)}'.`)}let Mc=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();function tl(n){return"server"===n}let Us=(()=>{class n{}return n.\u0275prov=(0,f.Yz7)({token:n,providedIn:"root",factory:()=>new rl((0,f.LFG)(pe),window)}),n})();class rl{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function li(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const a=i.shadowRoot;if(a){const l=a.getElementById(e)||a.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,a=this.offset();this.window.scrollTo(r-a[0],i-a[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Fi(this.window.history)||Fi(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Fi(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Hc extends class Op extends class ge{}{constructor(){super(...arguments),this.supportsDOMEvents=!0}}{static makeCurrent(){!function ae(n){ee||(ee=n)}(new Hc)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function fl(){return hl=hl||document.querySelector("base"),hl?hl.getAttribute("href"):null}();return null==t?null:function Fp(n){pl=pl||document.createElement("a"),pl.setAttribute("href",n);const e=pl.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){hl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function Ku(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,a]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}(document.cookie,e)}}let pl,hl=null;const _a=new f.OlP("TRANSITION_ID"),Gc=[{provide:f.ip1,useFactory:function Rh(n,e,t){return()=>{t.get(f.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let a=0;a<i.length;a++)r.remove(i[a])})}},deps:[_a,pe,f.zs3],multi:!0}];let Lp=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const Es=new f.OlP("EventManagerPlugins");let su=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>i.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let a=0;a<i.length;a++){const l=i[a];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Es),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class Hs{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let Oo=(()=>{class n{constructor(){this._stylesSet=new Set}addStyles(t){const r=new Set;t.forEach(i=>{this._stylesSet.has(i)||(this._stylesSet.add(i),r.add(i))}),this.onStylesAdded(r)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})(),Is=(()=>{class n extends Oo{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,r,i){t.forEach(a=>{const l=this._doc.createElement("style");l.textContent=a,i.push(r.appendChild(l))})}addHost(t){const r=[];this._addStylesToHost(this._stylesSet,t,r),this._hostNodes.set(t,r)}removeHost(t){const r=this._hostNodes.get(t);r&&r.forEach(gl),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((r,i)=>{this._addStylesToHost(t,i,r)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(gl))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function gl(n){F().remove(n)}const ou={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Li=/%COMP%/g;function Vo(n,e,t){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?Vo(n,i,t):(i=i.replace(Li,n),t.push(i))}return t}function ml(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let uu=(()=>{class n{constructor(t,r,i){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.rendererByCompId=new Map,this.defaultRenderer=new va(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;switch(r.encapsulation){case f.ifc.Emulated:{let i=this.rendererByCompId.get(r.id);return i||(i=new Uo(this.eventManager,this.sharedStylesHost,r,this.appId),this.rendererByCompId.set(r.id,i)),i.applyToHost(t),i}case 1:case f.ifc.ShadowDom:return new Up(this.eventManager,this.sharedStylesHost,t,r);default:if(!this.rendererByCompId.has(r.id)){const i=Vo(r.id,r.styles,[]);this.sharedStylesHost.addStyles(i),this.rendererByCompId.set(r.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(su),f.LFG(Is),f.LFG(f.AFp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();class va{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ou[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(lu(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(lu(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const a=ou[i];a?e.setAttributeNS(a,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ou[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(f.JOm.DashCase|f.JOm.Important)?e.style.setProperty(t,r,i&f.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&f.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ml(r)):this.eventManager.addEventListener(e,t,ml(r))}}function lu(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Uo extends va{constructor(e,t,r,i){super(e),this.component=r;const a=Vo(i+"-"+r.id,r.styles,[]);t.addStyles(a),this.contentAttr=function Lo(n){return"_ngcontent-%COMP%".replace(Li,n)}(i+"-"+r.id),this.hostAttr=function au(n){return"_nghost-%COMP%".replace(Li,n)}(i+"-"+r.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}class Up extends va{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const a=Vo(i.id,i.styles,[]);for(let l=0;l<a.length;l++){const d=document.createElement("style");d.textContent=a[l],this.shadowRoot.appendChild(d)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let _l=(()=>{class n extends Hs{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const bs=["alt","control","meta","shift"],__={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Mn={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let qc=(()=>{class n extends Hs{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const a=n.parseEventName(r),l=n.eventCallback(a.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,a.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const a=n._normalizeKey(r.pop());let l="",d=r.indexOf("code");if(d>-1&&(r.splice(d,1),l="code."),bs.forEach(w=>{const T=r.indexOf(w);T>-1&&(r.splice(T,1),l+=w+".")}),l+=a,0!=r.length||0===a.length)return null;const _={};return _.domEventName=i,_.fullKey=l,_}static matchEventFullKeyCode(t,r){let i=__[t.key]||t.key,a="";return r.indexOf("code.")>-1&&(i=t.code,a="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),bs.forEach(l=>{l!==i&&(0,Mn[l])(t)&&(a+=l+".")}),a+=i,a===r)}static eventCallback(t,r,i){return a=>{n.matchEventFullKeyCode(a,t)&&i.runGuarded(()=>r(a))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();const vl=(0,f.eFA)(f._c5,"browser",[{provide:f.Lbi,useValue:"browser"},{provide:f.g9A,useValue:function Bo(){Hc.makeCurrent()},multi:!0},{provide:pe,useFactory:function wa(){return(0,f.RDi)(document),document},deps:[]}]),du=new f.OlP(""),pn=[{provide:f.rWj,useClass:class iu{addToWindow(e){f.dqk.getAngularTestability=(r,i=!0)=>{const a=e.findTestabilityInTree(r,i);if(null==a)throw new Error("Could not find testability for element.");return a},f.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),f.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),f.dqk.frameworkStabilizers||(f.dqk.frameworkStabilizers=[]),f.dqk.frameworkStabilizers.push(r=>{const i=f.dqk.getAllAngularTestabilities();let a=i.length,l=!1;const d=function(_){l=l||_,a--,0==a&&r(l)};i.forEach(function(_){_.whenStable(d)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:f.lri,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]},{provide:f.dDg,useClass:f.dDg,deps:[f.R0b,f.eoX,f.rWj]}],Kc=[{provide:f.zSh,useValue:"root"},{provide:f.qLn,useFactory:function jr(){return new f.qLn},deps:[]},{provide:Es,useClass:_l,multi:!0,deps:[pe,f.R0b,f.Lbi]},{provide:Es,useClass:qc,multi:!0,deps:[pe]},{provide:uu,useClass:uu,deps:[su,Is,f.AFp]},{provide:f.FYo,useExisting:uu},{provide:Oo,useExisting:Is},{provide:Is,useClass:Is,deps:[pe]},{provide:su,useClass:su,deps:[Es,f.R0b]},{provide:class il{},useClass:Lp,deps:[]},[]];let Zc=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:f.AFp,useValue:t.appId},{provide:_a,useExisting:f.AFp},Gc]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(du,12))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[...Kc,...pn],imports:[Mc,f.hGG]}),n})(),Gp=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(pe))},n.\u0275prov=f.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function Hp(){return new Gp((0,f.LFG)(pe))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var Jt=V(8996),Ui=V(7669);function ht(...n){const e=(0,Ui.yG)(n);return(0,Jt.D)(n,e)}var hr=V(7579);class fr extends hr.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const pu=(0,V(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});var Bi=V(9751);const{isArray:Al}=Array,{getPrototypeOf:gu,prototype:jo,keys:Yr}=Object;function xl(n){if(1===n.length){const e=n[0];if(Al(e))return{args:e,keys:null};if(function Qn(n){return n&&"object"==typeof n&&gu(n)===jo}(e)){const t=Yr(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}var $o=V(4671),vt=V(4004);const{isArray:Fh}=Array;function Rl(n){return(0,vt.U)(e=>function Ho(n,e){return Fh(e)?n(...e):n(e)}(n,e))}function Ml(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var Fn=V(5403),Lh=V(9672);function po(...n){const e=(0,Ui.yG)(n),t=(0,Ui.jO)(n),{args:r,keys:i}=xl(n);if(0===r.length)return(0,Jt.D)([],e);const a=new Bi.y(function Xc(n,e,t=$o.y){return r=>{Go(e,()=>{const{length:i}=n,a=new Array(i);let l=i,d=i;for(let _=0;_<i;_++)Go(e,()=>{const w=(0,Jt.D)(n[_],e);let T=!1;w.subscribe((0,Fn.x)(r,S=>{a[_]=S,T||(T=!0,d--),d||r.next(t(a.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>Ml(i,l):$o.y));return t?a.pipe(Rl(t)):a}function Go(n,e,t){n?(0,Lh.f)(t,n,e):e()}var Ia=V(8189);function Ws(...n){return function Kp(){return(0,Ia.J)(1)}()((0,Jt.D)(n,(0,Ui.yG)(n)))}var go=V(8421);function mu(n){return new Bi.y(e=>{(0,go.Xf)(n()).subscribe(e)})}var Vh=V(9635),ed=V(576);function ji(n,e){const t=(0,ed.m)(n)?n:()=>n,r=i=>i.error(t());return new Bi.y(e?i=>e.schedule(r,0,i):r)}var ns=V(515),Uh=V(727),pr=V(4482);function Nl(){return(0,pr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,Fn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,a=t;t=null,i&&(!a||i===a)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Zp extends Bi.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,pr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new Uh.w0;const t=this.getSubject();e.add(this.source.subscribe((0,Fn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=Uh.w0.EMPTY)}return e}refCount(){return Nl()(this)}}function Hn(n,e){return(0,pr.e)((t,r)=>{let i=null,a=0,l=!1;const d=()=>l&&!i&&r.complete();t.subscribe((0,Fn.x)(r,_=>{i?.unsubscribe();let w=0;const T=a++;(0,go.Xf)(n(_,T)).subscribe(i=(0,Fn.x)(r,S=>r.next(e?e(_,S,T,w++):S),()=>{i=null,d()}))},()=>{l=!0,d()}))})}function _u(n){return n<=0?()=>ns.E:(0,pr.e)((e,t)=>{let r=0;e.subscribe((0,Fn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function zo(...n){const e=(0,Ui.yG)(n);return(0,pr.e)((t,r)=>{(e?Ws(n,t,e):Ws(n,t)).subscribe(r)})}function ci(n,e){return(0,pr.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>n.call(e,a,i++)&&r.next(a)))})}var or=V(5577);function mo(n){return(0,pr.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function Ca(n=Pl){return(0,pr.e)((e,t)=>{let r=!1;e.subscribe((0,Fn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function Pl(){return new pu}function rs(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((i,a)=>n(i,a,r)):$o.y,_u(1),t?mo(e):Ca(()=>new pu))}function is(n,e){return(0,ed.m)(e)?(0,or.z)(n,e,1):(0,or.z)(n,1)}var wr=V(8505);function Ds(n){return(0,pr.e)((e,t)=>{let a,r=null,i=!1;r=e.subscribe((0,Fn.x)(t,void 0,void 0,l=>{a=(0,go.Xf)(n(l,Ds(n)(e))),r?(r.unsubscribe(),r=null,a.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,a.subscribe(t))})}function Yp(n,e,t,r,i){return(a,l)=>{let d=t,_=e,w=0;a.subscribe((0,Fn.x)(l,T=>{const S=w++;_=d?n(_,T,S):(d=!0,T),r&&l.next(_)},i&&(()=>{d&&l.next(_),l.complete()})))}}function Ts(n,e){return(0,pr.e)(Yp(n,e,arguments.length>=2,!0))}function Qp(n){return n<=0?()=>ns.E:(0,pr.e)((e,t)=>{let r=[];e.subscribe((0,Fn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function Jp(n,e){const t=arguments.length>=2;return r=>r.pipe(n?ci((i,a)=>n(i,a,r)):$o.y,Qp(1),t?mo(e):Ca(()=>new pu))}function nd(n){return(0,pr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const zt="primary",yu=Symbol("RouteTitle");class ba{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function qs(n){return new ba(n)}function _o(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let a=0;a<r.length;a++){const l=r[a],d=n[a];if(l.startsWith(":"))i[l.substring(1)]=d;else if(l!==d.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Ss(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let a=0;a<t.length;a++)if(i=t[a],!kl(n[i],e[i]))return!1;return!0}function kl(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,a)=>r[a]===i)}return n===e}function id(n){return Array.prototype.concat.apply([],n)}function ss(n){return n.length>0?n[n.length-1]:null}function I(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function b(n){return(0,f.CqO)(n)?n:(0,f.QGY)(n)?(0,Jt.D)(Promise.resolve(n)):ht(n)}const R=!1,W={exact:function $e(n,e,t){if(!Mr(n.segments,e.segments)||!$r(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!$e(n.children[r],e.children[r],t))return!1;return!0},subset:pt},Y={exact:function qe(n,e){return Ss(n,e)},subset:function ft(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>kl(n[t],e[t]))},ignored:()=>!0};function he(n,e,t){return W[t.paths](n.root,e.root,t.matrixParams)&&Y[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function pt(n,e,t){return Ot(n,e,e.segments,t)}function Ot(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Mr(i,t)||e.hasChildren()||!$r(i,t,r))}if(n.segments.length===t.length){if(!Mr(n.segments,t)||!$r(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!pt(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),a=t.slice(n.segments.length);return!!(Mr(n.segments,i)&&$r(n.segments,i,r)&&n.children[zt])&&Ot(n.children[zt],e,a,r)}}function $r(n,e,t){return e.every((r,i)=>Y[t](n[i].parameters,r.parameters))}class wn{constructor(e,t,r){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return w_.serialize(this)}}class _t{constructor(e,t){this.segments=e,this.children=t,this.parent=null,I(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Xp(this)}}class os{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=qs(this.parameters)),this._parameterMap}toString(){return E_(this)}}function Mr(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ol=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return new sd},providedIn:"root"}),n})();class sd{parse(e){const t=new ad(e);return new wn(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Da(e.root,!0)}`,r=function aw(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${vu(t)}=${vu(i)}`).join("&"):`${vu(t)}=${vu(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function Bh(n){return encodeURI(n)}(e.fragment)}`:""}`}}const w_=new sd;function Xp(n){return n.segments.map(e=>E_(e)).join("/")}function Da(n,e){if(!n.hasChildren())return Xp(n);if(e){const t=n.children[zt]?Da(n.children[zt],!1):"",r=[];return I(n.children,(i,a)=>{a!==zt&&r.push(`${a}:${Da(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function Ks(n,e){let t=[];return I(n.children,(r,i)=>{i===zt&&(t=t.concat(e(r,i)))}),I(n.children,(r,i)=>{i!==zt&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===zt?[Da(n.children[zt],!1)]:[`${i}:${Da(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[zt]?`${Xp(n)}/${t[0]}`:`${Xp(n)}/(${t.join("//")})`}}function eg(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function vu(n){return eg(n).replace(/%3B/gi,";")}function Fl(n){return eg(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function jh(n){return decodeURIComponent(n)}function tg(n){return jh(n.replace(/\+/g,"%20"))}function E_(n){return`${Fl(n.path)}${function od(n){return Object.keys(n).map(e=>`;${Fl(e)}=${Fl(n[e])}`).join("")}(n.parameters)}`}const I_=/^[^\/()?;=#]+/;function Ll(n){const e=n.match(I_);return e?e[0]:""}const C_=/^[^=?&#]+/,BI=/^[^&#]+/;class ad{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _t([],{}):new _t([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[zt]=new _t(e,t)),r}parseSegment(){const e=Ll(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new f.vHH(4009,R);return this.capture(e),new os(jh(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=Ll(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=Ll(this.remaining);i&&(r=i,this.capture(r))}e[jh(t)]=jh(r)}parseQueryParam(e){const t=function Ta(n){const e=n.match(C_);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function Vl(n){const e=n.match(BI);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=tg(t),a=tg(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(a)}else e[i]=a}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=Ll(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new f.vHH(4010,R);let a;r.indexOf(":")>-1?(a=r.slice(0,r.indexOf(":")),this.capture(a),this.capture(":")):e&&(a=zt);const l=this.parseChildren();t[a]=1===Object.keys(l).length?l[zt]:new _t([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new f.vHH(4011,R)}}function $h(n){return n.segments.length>0?new _t([],{[zt]:n}):n}function Ul(n){const e={};for(const r of Object.keys(n.children)){const a=Ul(n.children[r]);(a.segments.length>0||a.hasChildren())&&(e[r]=a)}return function ng(n){if(1===n.numberOfChildren&&n.children[zt]){const e=n.children[zt];return new _t(n.segments.concat(e.segments),e.children)}return n}(new _t(n.segments,e))}function wu(n){return n instanceof wn}function lw(n,e,t,r,i){if(0===t.length)return Iu(e.root,e.root,e.root,r,i);const a=function Gh(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new ig(!0,0,n);let e=0,t=!1;const r=n.reduce((i,a,l)=>{if("object"==typeof a&&null!=a){if(a.outlets){const d={};return I(a.outlets,(_,w)=>{d[w]="string"==typeof _?_.split("/"):_}),[...i,{outlets:d}]}if(a.segmentPath)return[...i,a.segmentPath]}return"string"!=typeof a?[...i,a]:0===l?(a.split("/").forEach((d,_)=>{0==_&&"."===d||(0==_&&""===d?t=!0:".."===d?e++:""!=d&&i.push(d))}),i):[...i,a]},[]);return new ig(t,e,r)}(t);return a.toRoot()?Iu(e.root,e.root,new _t([],{}),r,i):function l(_){const w=function qo(n,e,t,r){if(n.isAbsolute)return new Cu(e.root,!0,0);if(-1===r)return new Cu(t,t===e.root,0);return function ld(n,e,t){let r=n,i=e,a=t;for(;a>i;){if(a-=i,r=r.parent,!r)throw new f.vHH(4005,!1);i=r.segments.length}return new Cu(r,!1,i-a)}(t,r+(Bl(n.commands[0])?0:1),n.numberOfDoubleDots)}(a,e,n.snapshot?._urlSegment,_),T=w.processChildren?bu(w.segmentGroup,w.index,a.commands):sg(w.segmentGroup,w.index,a.commands);return Iu(e.root,w.segmentGroup,T,r,i)}(n.snapshot?._lastPathIndex)}function Bl(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Eu(n){return"object"==typeof n&&null!=n&&n.outlets}function Iu(n,e,t,r,i){let l,a={};r&&I(r,(_,w)=>{a[w]=Array.isArray(_)?_.map(T=>`${T}`):`${_}`}),l=n===e?t:Hh(n,e,t);const d=$h(Ul(l));return new wn(d,a,i)}function Hh(n,e,t){const r={};return I(n.children,(i,a)=>{r[a]=i===e?t:Hh(i,e,t)}),new _t(n.segments,r)}class ig{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Bl(r[0]))throw new f.vHH(4003,!1);const i=r.find(Eu);if(i&&i!==ss(r))throw new f.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Cu{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function sg(n,e,t){if(n||(n=new _t([],{})),0===n.segments.length&&n.hasChildren())return bu(n,e,t);const r=function zh(n,e,t){let r=0,i=e;const a={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return a;const l=n.segments[i],d=t[r];if(Eu(d))break;const _=`${d}`,w=r<t.length-1?t[r+1]:null;if(i>0&&void 0===_)break;if(_&&w&&"object"==typeof w&&void 0===w.outlets){if(!ag(_,w,l))return a;r+=2}else{if(!ag(_,{},l))return a;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const a=new _t(n.segments.slice(0,r.pathIndex),{});return a.children[zt]=new _t(n.segments.slice(r.pathIndex),n.children),bu(a,0,i)}return r.match&&0===i.length?new _t(n.segments,{}):r.match&&!n.hasChildren()?og(n,e,t):r.match?bu(n,0,i):og(n,e,t)}function bu(n,e,t){if(0===t.length)return new _t(n.segments,{});{const r=function D_(n){return Eu(n[0])?n[0].outlets:{[zt]:n}}(t),i={};return I(r,(a,l)=>{"string"==typeof a&&(a=[a]),null!==a&&(i[l]=sg(n.children[l],e,a))}),I(n.children,(a,l)=>{void 0===r[l]&&(i[l]=a)}),new _t(n.segments,i)}}function og(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const a=t[i];if(Eu(a)){const _=T_(a.outlets);return new _t(r,_)}if(0===i&&Bl(t[0])){r.push(new os(n.segments[e].path,Wh(t[0]))),i++;continue}const l=Eu(a)?a.outlets[zt]:`${a}`,d=i<t.length-1?t[i+1]:null;l&&d&&Bl(d)?(r.push(new os(l,Wh(d))),i+=2):(r.push(new os(l,{})),i++)}return new _t(r,{})}function T_(n){const e={};return I(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=og(new _t([],{}),0,t))}),e}function Wh(n){const e={};return I(n,(t,r)=>e[r]=`${t}`),e}function ag(n,e,t){return n==t.path&&Ss(e,t.parameters)}class Zs{constructor(e,t){this.id=e,this.url=t}}class qh extends Zs{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ys extends Zs{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qs extends Zs{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class ug extends Zs{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Kh extends Zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class lg extends Zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cg extends Zs{constructor(e,t,r,i,a){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=a,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class cd extends Zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class cw extends Zs{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dg{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class hg{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fg{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class pg{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gg{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jl{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Zh{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class $l{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Yh(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Yh(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=S_(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return S_(e,this._root).map(t=>t.value)}}function Yh(n,e){if(n===e.value)return e;for(const t of e.children){const r=Yh(n,t);if(r)return r}return null}function S_(n,e){if(n===e.value)return[e];for(const t of e.children){const r=S_(n,t);if(r.length)return r.unshift(e),r}return[]}class Js{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function vo(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class A_ extends $l{constructor(e,t){super(e),this.snapshot=t,ef(this,e)}toString(){return this.snapshot.toString()}}function Qh(n,e){const t=function Jh(n,e){const l=new dd([],{},{},"",{},zt,e,null,n.root,-1,{});return new mg("",new Js(l,[]))}(n,e),r=new fr([new os("",{})]),i=new fr({}),a=new fr({}),l=new fr({}),d=new fr(""),_=new di(r,i,l,d,a,zt,e,t.root);return _.snapshot=t.root,new A_(new Js(_,[]),t)}class di{constructor(e,t,r,i,a,l,d,_){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.pipe((0,vt.U)(w=>w[yu]))??ht(void 0),this._futureSnapshot=_}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>qs(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>qs(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Xh(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],a=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(a.component)break;r--}}return function x_(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class dd{constructor(e,t,r,i,a,l,d,_,w,T,S,P){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=a,this.outlet=l,this.component=d,this.title=this.data?.[yu],this.routeConfig=_,this._urlSegment=w,this._lastPathIndex=T,this._correctedLastPathIndex=P??T,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=qs(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=qs(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class mg extends $l{constructor(e,t){super(t),this.url=e,ef(this,t)}toString(){return Di(this._root)}}function ef(n,e){e.value._routerState=n,e.children.forEach(t=>ef(n,t))}function Di(n){const e=n.children.length>0?` { ${n.children.map(Di).join(", ")} } `:"";return`${n.value}${e}`}function hd(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ss(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),Ss(e.params,t.params)||n.params.next(t.params),function rd(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ss(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),Ss(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function fd(n,e){const t=Ss(n.params,e.params)&&function yo(n,e){return Mr(n,e)&&n.every((t,r)=>Ss(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||fd(n.parent,e.parent))}function Er(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function Ko(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Er(n,r,i);return Er(n,r)})}(n,e,t);return new Js(r,i)}{if(n.shouldAttach(e.value)){const a=n.retrieve(e.value);if(null!==a){const l=a.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(d=>Er(n,d)),l}}const r=function R_(n){return new di(new fr(n.url),new fr(n.params),new fr(n.queryParams),new fr(n.fragment),new fr(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(a=>Er(n,a));return new Js(r,i)}}const _g="ngNavigationCancelingError";function hw(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=wu(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=yg(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function yg(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[_g]=!0,r.cancellationCode=e,t&&(r.url=t),r}function fw(n){return pw(n)&&wu(n.url)}function pw(n){return n&&n[_g]}class M_{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new pd,this.attachRef=null}}let pd=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new M_,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const y=!1;let p=(()=>{class n{constructor(t,r,i,a,l){this.parentContexts=t,this.location=r,this.changeDetector=a,this.environmentInjector=l,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=i||zt,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new f.vHH(4012,y);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new f.vHH(4012,y);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new f.vHH(4012,y);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new f.vHH(4013,y);this._activatedRoute=t;const i=this.location,l=t._futureSnapshot.component,d=this.parentContexts.getOrCreateContext(this.name).children,_=new g(t,d,i.injector);if(r&&function E(n){return!!n.resolveComponentFactory}(r)){const w=r.resolveComponentFactory(l);this.activated=i.createComponent(w,i.length,_)}else this.activated=i.createComponent(l,{index:i.length,injector:_,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(pd),f.Y36(f.s_b),f.$8M("name"),f.Y36(f.sBO),f.Y36(f.lqb))},n.\u0275dir=f.lG2({type:n,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),n})();class g{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===di?this.route:e===pd?this.childContexts:this.parent.get(e,t)}}let A=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[f.jDz],decls:1,vars:0,template:function(t,r){1&t&&f._UZ(0,"router-outlet")},dependencies:[p],encapsulation:2}),n})();function M(n,e){return n.providers&&!n._injector&&(n._injector=(0,f.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function gd(n){const e=n.children&&n.children.map(gd),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==zt&&(t.component=A),t}function As(n){return n.outlet||zt}function md(n,e){const t=n.filter(r=>As(r)===e);return t.push(...n.filter(r=>As(r)!==e)),t}function Hl(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class vg{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),hd(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=vo(t);e.children.forEach(a=>{const l=a.value.outlet;this.deactivateRoutes(a,i[l],r),delete i[l]}),I(i,(a,l)=>{this.deactivateRouteAndItsChildren(a,r)})}deactivateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(i===a)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else a&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=vo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);if(r&&r.outlet){const l=r.outlet.detach(),d=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:d})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,a=vo(e);for(const l of Object.keys(a))this.deactivateRouteAndItsChildren(a[l],i);r&&r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated(),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=vo(t);e.children.forEach(a=>{this.activateRoutes(a,i[a.value.outlet],r),this.forwardEvent(new jl(a.value.snapshot))}),e.children.length&&this.forwardEvent(new pg(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,a=t?t.value:null;if(hd(i),i===a)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const d=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(d.contexts),l.attachRef=d.componentRef,l.route=d.route.value,l.outlet&&l.outlet.attach(d.componentRef,d.route.value),hd(d.route.value),this.activateChildRoutes(e,null,l.children)}else{const d=Hl(i.snapshot),_=d?.get(f._Vd)??null;l.attachRef=null,l.route=i,l.resolver=_,l.injector=d,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class wg{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Gl{constructor(e,t){this.component=e,this.route=t}}function zl(n,e,t){const r=n._root;return Du(r,e?e._root:null,t,[r.value])}function Sa(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,f.Z0I)(n)?e.get(n):n:r}function Du(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=vo(e);return n.children.forEach(l=>{(function Ir(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const a=n.value,l=e?e.value:null,d=t?t.getContext(n.value.outlet):null;if(l&&a.routeConfig===l.routeConfig){const _=function gS(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Mr(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Mr(n.url,e.url)||!Ss(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!fd(n,e)||!Ss(n.queryParams,e.queryParams);default:return!fd(n,e)}}(l,a,a.routeConfig.runGuardsAndResolvers);_?i.canActivateChecks.push(new wg(r)):(a.data=l.data,a._resolvedData=l._resolvedData),Du(n,e,a.component?d?d.children:null:t,r,i),_&&d&&d.outlet&&d.outlet.isActivated&&i.canDeactivateChecks.push(new Gl(d.outlet.component,l))}else l&&Eg(e,d,i),i.canActivateChecks.push(new wg(r)),Du(n,null,a.component?d?d.children:null:t,r,i)})(l,a[l.value.outlet],t,r.concat([l.value]),i),delete a[l.value.outlet]}),I(a,(l,d)=>Eg(l,t.getContext(d),i)),i}function Eg(n,e,t){const r=vo(n),i=n.value;I(r,(a,l)=>{Eg(a,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Gl(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function _d(n){return"function"==typeof n}function yd(n){return n instanceof pu||"EmptyError"===n?.name}const tf=Symbol("INITIAL_VALUE");function vd(){return Hn(n=>po(n.map(e=>e.pipe(_u(1),zo(tf)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===tf)return tf;if(!1===t||t instanceof wn)return t}return!0}),ci(e=>e!==tf),_u(1)))}function _w(n){return(0,Vh.z)((0,wr.b)(e=>{if(wu(e))throw hw(0,e)}),(0,vt.U)(e=>!0===e))}const Tu={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function KI(n,e,t,r,i){const a=Ig(n,e,t);return a.matched?function qI(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ht(i.map(l=>{const d=Sa(l,n);return b(function wS(n){return n&&_d(n.canMatch)}(d)?d.canMatch(e,t):n.runInContext(()=>d(e,t)))})).pipe(vd(),_w()):ht(!0)}(r=M(e,r),e,t).pipe((0,vt.U)(l=>!0===l?a:{...Tu})):ht(a)}function Ig(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Tu}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||_o)(t,n,e);if(!i)return{...Tu};const a={};I(i.posParams,(d,_)=>{a[_]=d.path});const l=i.consumed.length>0?{...a,...i.consumed[i.consumed.length-1].parameters}:a;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function wd(n,e,t,r,i="corrected"){if(t.length>0&&function k_(n,e,t){return t.some(r=>Cg(n,e,r)&&As(r)!==zt)}(n,t,r)){const l=new _t(e,function yw(n,e,t,r){const i={};i[zt]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const a of t)if(""===a.path&&As(a)!==zt){const l=new _t([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[As(a)]=l}return i}(n,e,r,new _t(t,n.children)));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:[]}}if(0===t.length&&function Ed(n,e,t){return t.some(r=>Cg(n,e,r))}(n,t,r)){const l=new _t(n.segments,function CS(n,e,t,r,i,a){const l={};for(const d of r)if(Cg(n,t,d)&&!i[As(d)]){const _=new _t([],{});_._sourceSegment=n,_._segmentIndexShift="legacy"===a?n.segments.length:e.length,l[As(d)]=_}return{...i,...l}}(n,e,t,r,n.children,i));return l._sourceSegment=n,l._segmentIndexShift=e.length,{segmentGroup:l,slicedSegments:t}}const a=new _t(n.segments,n.children);return a._sourceSegment=n,a._segmentIndexShift=e.length,{segmentGroup:a,slicedSegments:t}}function Cg(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function O_(n,e,t,r){return!!(As(n)===r||r!==zt&&Cg(e,t,n))&&("**"===n.path||Ig(e,n,t).matched)}function ZI(n,e,t){return 0===e.length&&!n.children[t]}const F_=!1;class bg{constructor(e){this.segmentGroup=e||null}}class Id{constructor(e){this.urlTree=e}}function Dg(n){return ji(new bg(n))}function YI(n){return ji(new Id(n))}class TS{constructor(e,t,r,i,a){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=a,this.allowRedirects=!0}apply(){const e=wd(this.urlTree.root,[],[],this.config).segmentGroup,t=new _t(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,zt).pipe((0,vt.U)(a=>this.createUrlTree(Ul(a),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Ds(a=>{if(a instanceof Id)return this.allowRedirects=!1,this.match(a.urlTree);throw a instanceof bg?this.noMatchError(a):a}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,zt).pipe((0,vt.U)(i=>this.createUrlTree(Ul(i),e.queryParams,e.fragment))).pipe(Ds(i=>{throw i instanceof bg?this.noMatchError(i):i}))}noMatchError(e){return new f.vHH(4002,F_)}createUrlTree(e,t,r){const i=$h(e);return new wn(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(a=>new _t([],a))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const a of Object.keys(r.children))"primary"===a?i.unshift(a):i.push(a);return(0,Jt.D)(i).pipe(is(a=>{const l=r.children[a],d=md(t,a);return this.expandSegmentGroup(e,d,l,a).pipe((0,vt.U)(_=>({segment:_,outlet:a})))}),Ts((a,l)=>(a[l.outlet]=l.segment,a),{}),Jp())}expandSegment(e,t,r,i,a,l){return(0,Jt.D)(r).pipe(is(d=>this.expandSegmentAgainstRoute(e,t,r,d,i,a,l).pipe(Ds(w=>{if(w instanceof bg)return ht(null);throw w}))),rs(d=>!!d),Ds((d,_)=>{if(yd(d))return ZI(t,i,a)?ht(new _t([],{})):Dg(t);throw d}))}expandSegmentAgainstRoute(e,t,r,i,a,l,d){return O_(i,t,a,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,a,l):d&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l):Dg(t):Dg(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const a=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?YI(a):this.lineralizeSegments(r,a).pipe((0,or.z)(l=>{const d=new _t(l,{});return this.expandSegment(e,d,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,a,l){const{matched:d,consumedSegments:_,remainingSegments:w,positionalParamSegments:T}=Ig(t,i,a);if(!d)return Dg(t);const S=this.applyRedirectCommands(_,i.redirectTo,T);return i.redirectTo.startsWith("/")?YI(S):this.lineralizeSegments(i,S).pipe((0,or.z)(P=>this.expandSegment(e,t,r,P.concat(w),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,a){return"**"===r.path?(e=M(r,e),r.loadChildren?(r._loadedRoutes?ht({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(d=>(r._loadedRoutes=d.routes,r._loadedInjector=d.injector,new _t(i,{})))):ht(new _t(i,{}))):KI(t,r,i,e).pipe(Hn(({matched:l,consumedSegments:d,remainingSegments:_})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,or.z)(T=>{const S=T.injector??e,P=T.routes,{segmentGroup:U,slicedSegments:q}=wd(t,d,_,P),de=new _t(U.segments,U.children);if(0===q.length&&de.hasChildren())return this.expandChildren(S,P,de).pipe((0,vt.U)(Xe=>new _t(d,Xe)));if(0===P.length&&0===q.length)return ht(new _t(d,{}));const fe=As(r)===a;return this.expandSegment(S,de,P,q,fe?zt:a,!0).pipe((0,vt.U)(tt=>new _t(d.concat(tt.segments),tt.children)))})):Dg(t)))}getChildConfig(e,t,r){return t.children?ht({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ht({routes:t._loadedRoutes,injector:t._loadedInjector}):function mw(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ht(!0):ht(i.map(l=>{const d=Sa(l,n);return b(function mS(n){return n&&_d(n.canLoad)}(d)?d.canLoad(e,t):n.runInContext(()=>d(e,t)))})).pipe(vd(),_w())}(e,t,r).pipe((0,or.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,wr.b)(a=>{t._loadedRoutes=a.routes,t._loadedInjector=a.injector})):function DS(n){return ji(yg(F_,3))}())):ht({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ht(r);if(i.numberOfChildren>1||!i.children[zt])return ji(new f.vHH(4e3,F_));i=i.children[zt]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const a=this.createSegmentGroup(e,t.root,r,i);return new wn(a,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return I(e,(i,a)=>{if("string"==typeof i&&i.startsWith(":")){const d=i.substring(1);r[a]=t[d]}else r[a]=i}),r}createSegmentGroup(e,t,r,i){const a=this.createSegments(e,t.segments,r,i);let l={};return I(t.children,(d,_)=>{l[_]=this.createSegmentGroup(e,d,r,i)}),new _t(a,l)}createSegments(e,t,r,i){return t.map(a=>a.path.startsWith(":")?this.findPosParam(e,a,i):this.findOrReturn(a,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new f.vHH(4001,F_);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class JI{}class Tg{constructor(e,t,r,i,a,l,d,_){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=a,this.paramsInheritanceStrategy=l,this.relativeLinkResolution=d,this.urlSerializer=_}recognize(){const e=wd(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,zt).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new dd([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},zt,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new Js(r,t),a=new mg(this.url,i);return this.inheritParamsAndData(a._root),a}))}inheritParamsAndData(e){const t=e.value,r=Xh(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,Jt.D)(Object.keys(r.children)).pipe(is(i=>{const a=r.children[i],l=md(t,i);return this.processSegmentGroup(e,l,a,i)}),Ts((i,a)=>i&&a?(i.push(...a),i):null),function td(n,e=!1){return(0,pr.e)((t,r)=>{let i=0;t.subscribe((0,Fn.x)(r,a=>{const l=n(a,i++);(l||e)&&r.next(a),!l&&r.complete()}))})}(i=>null!==i),mo(null),Jp(),(0,vt.U)(i=>{if(null===i)return null;const a=XI(i);return function AS(n){n.sort((e,t)=>e.value.outlet===zt?-1:t.value.outlet===zt?1:e.value.outlet.localeCompare(t.value.outlet))}(a),a}))}processSegment(e,t,r,i,a){return(0,Jt.D)(t).pipe(is(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,a)),rs(l=>!!l),Ds(l=>{if(yd(l))return ZI(r,i,a)?ht([]):ht(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,a){if(t.redirectTo||!O_(t,r,i,a))return ht(null);let l;if("**"===t.path){const d=i.length>0?ss(i).parameters:{},_=eC(r)+i.length;l=ht({snapshot:new dd(i,d,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nC(t),As(t),t.component??t._loadedComponent??null,t,ww(r),_,Ew(t),_),consumedSegments:[],remainingSegments:[]})}else l=KI(r,t,i,e).pipe((0,vt.U)(({matched:d,consumedSegments:_,remainingSegments:w,parameters:T})=>{if(!d)return null;const S=eC(r)+_.length;return{snapshot:new dd(_,T,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,nC(t),As(t),t.component??t._loadedComponent??null,t,ww(r),S,Ew(t),S),consumedSegments:_,remainingSegments:w}}));return l.pipe(Hn(d=>{if(null===d)return ht(null);const{snapshot:_,consumedSegments:w,remainingSegments:T}=d;e=t._injector??e;const S=t._loadedInjector??e,P=function nf(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:U,slicedSegments:q}=wd(r,w,T,P.filter(fe=>void 0===fe.redirectTo),this.relativeLinkResolution);if(0===q.length&&U.hasChildren())return this.processChildren(S,P,U).pipe((0,vt.U)(fe=>null===fe?null:[new Js(_,fe)]));if(0===P.length&&0===q.length)return ht([new Js(_,[])]);const de=As(t)===a;return this.processSegment(S,P,U,q,de?zt:a).pipe((0,vt.U)(fe=>null===fe?null:[new Js(_,fe)]))}))}}function Sg(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function XI(n){const e=[],t=new Set;for(const r of n){if(!Sg(r)){e.push(r);continue}const i=e.find(a=>r.value.routeConfig===a.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=XI(r.children);e.push(new Js(r.value,i))}return e.filter(r=>!t.has(r))}function ww(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function eC(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function nC(n){return n.data||{}}function Ew(n){return n.resolve||{}}function iC(n){return"string"==typeof n.title||null===n.title}function Dw(n){return Hn(e=>{const t=n(e);return t?(0,Jt.D)(t).pipe((0,vt.U)(()=>e)):ht(e)})}let sC=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(a=>a.outlet===zt);return r}getResolvedTitleForRoute(t){return t.data[yu]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:function(){return(0,f.f3M)(oC)},providedIn:"root"}),n})(),oC=(()=>{class n extends sC{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Gp))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class RS{}class rf extends class MS{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}{}const V_=new f.OlP("",{providedIn:"root",factory:()=>({})}),uC=new f.OlP("ROUTES");let lC=(()=>{class n{constructor(t,r){this.injector=t,this.compiler=r,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ht(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=b(t.loadComponent()).pipe((0,wr.b)(a=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=a}),nd(()=>{this.componentLoaders.delete(t)})),i=new Zp(r,()=>new hr.x).pipe(Nl());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ht({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const a=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(d=>{this.onLoadEndListener&&this.onLoadEndListener(r);let _,w,T=!1;Array.isArray(d)?w=d:(_=d.create(t).injector,w=id(_.get(uC,[],f.XFs.Self|f.XFs.Optional)));return{routes:w.map(gd),injector:_}}),nd(()=>{this.childrenLoaders.delete(r)})),l=new Zp(a,()=>new hr.x).pipe(Nl());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return b(t()).pipe((0,or.z)(r=>r instanceof f.YKP||Array.isArray(r)?ht(r):(0,Jt.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(f.zs3),f.LFG(f.Sil))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();class cC{}class iP{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,t){return e}}function sP(n){throw n}function dC(n,e,t){return e.parse("/")}const NS={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},hC={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function fC(){const n=(0,f.f3M)(Ol),e=(0,f.f3M)(pd),t=(0,f.f3M)(Fe),r=(0,f.f3M)(f.zs3),i=(0,f.f3M)(f.Sil),a=(0,f.f3M)(uC,{optional:!0})??[],l=(0,f.f3M)(V_,{optional:!0})??{},d=(0,f.f3M)(oC),_=(0,f.f3M)(sC,{optional:!0}),w=(0,f.f3M)(cC,{optional:!0}),T=(0,f.f3M)(RS,{optional:!0}),S=new gn(null,n,e,t,r,i,id(a));return w&&(S.urlHandlingStrategy=w),T&&(S.routeReuseStrategy=T),S.titleStrategy=_??d,function PS(n,e){n.errorHandler&&(e.errorHandler=n.errorHandler),n.malformedUriErrorHandler&&(e.malformedUriErrorHandler=n.malformedUriErrorHandler),n.onSameUrlNavigation&&(e.onSameUrlNavigation=n.onSameUrlNavigation),n.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=n.paramsInheritanceStrategy),n.relativeLinkResolution&&(e.relativeLinkResolution=n.relativeLinkResolution),n.urlUpdateStrategy&&(e.urlUpdateStrategy=n.urlUpdateStrategy),n.canceledNavigationResolution&&(e.canceledNavigationResolution=n.canceledNavigationResolution)}(l,S),S}let gn=(()=>{class n{constructor(t,r,i,a,l,d,_){this.rootComponentType=t,this.urlSerializer=r,this.rootContexts=i,this.location=a,this.config=_,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new hr.x,this.errorHandler=sP,this.malformedUriErrorHandler=dC,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>ht(void 0),this.urlHandlingStrategy=new iP,this.routeReuseStrategy=new rf,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=l.get(lC),this.configLoader.onLoadEndListener=P=>this.triggerEvent(new hg(P)),this.configLoader.onLoadStartListener=P=>this.triggerEvent(new dg(P)),this.ngModule=l.get(f.h0i),this.console=l.get(f.c2e);const S=l.get(f.R0b);this.isNgZoneEnabled=S instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(_),this.currentUrlTree=function O(){return new wn(new _t([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Qh(this.currentUrlTree,this.rootComponentType),this.transitions=new fr({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(t){const r=this.events;return t.pipe(ci(i=>0!==i.id),(0,vt.U)(i=>({...i,extractedUrl:this.urlHandlingStrategy.extract(i.rawUrl)})),Hn(i=>{let a=!1,l=!1;return ht(i).pipe((0,wr.b)(d=>{this.currentNavigation={id:d.id,initialUrl:d.rawUrl,extractedUrl:d.extractedUrl,trigger:d.source,extras:d.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Hn(d=>{const _=this.browserUrlTree.toString(),w=!this.navigated||d.extractedUrl.toString()!==_||_!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||w)&&this.urlHandlingStrategy.shouldProcessUrl(d.rawUrl))return Tw(d.source)&&(this.browserUrlTree=d.extractedUrl),ht(d).pipe(Hn(S=>{const P=this.transitions.getValue();return r.next(new qh(S.id,this.serializeUrl(S.extractedUrl),S.source,S.restoredState)),P!==this.transitions.getValue()?ns.E:Promise.resolve(S)}),function QI(n,e,t,r){return Hn(i=>function vw(n,e,t,r,i){return new TS(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vt.U)(a=>({...i,urlAfterRedirects:a}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,wr.b)(S=>{this.currentNavigation={...this.currentNavigation,finalUrl:S.urlAfterRedirects},i.urlAfterRedirects=S.urlAfterRedirects}),function rC(n,e,t,r,i,a){return(0,or.z)(l=>function SS(n,e,t,r,i,a,l="emptyOnly",d="legacy"){return new Tg(n,e,t,r,i,l,d,a).recognize().pipe(Hn(_=>null===_?function tP(n){return new Bi.y(e=>e.error(n))}(new JI):ht(_)))}(n,e,t,l.urlAfterRedirects,r.serialize(l.urlAfterRedirects),r,i,a).pipe((0,vt.U)(d=>({...l,targetSnapshot:d}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,wr.b)(S=>{if(i.targetSnapshot=S.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!S.extras.skipLocationChange){const U=this.urlHandlingStrategy.merge(S.urlAfterRedirects,S.rawUrl);this.setBrowserUrl(U,S)}this.browserUrlTree=S.urlAfterRedirects}const P=new Kh(S.id,this.serializeUrl(S.extractedUrl),this.serializeUrl(S.urlAfterRedirects),S.targetSnapshot);r.next(P)}));if(w&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:P,extractedUrl:U,source:q,restoredState:de,extras:fe}=d,Qe=new qh(P,this.serializeUrl(U),q,de);r.next(Qe);const tt=Qh(U,this.rootComponentType).snapshot;return ht(i={...d,targetSnapshot:tt,urlAfterRedirects:U,extras:{...fe,skipLocationChange:!1,replaceUrl:!1}})}return this.rawUrlTree=d.rawUrl,d.resolve(null),ns.E}),(0,wr.b)(d=>{const _=new lg(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot);this.triggerEvent(_)}),(0,vt.U)(d=>i={...d,guards:zl(d.targetSnapshot,d.currentSnapshot,this.rootContexts)}),function HI(n,e){return(0,or.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:a,canDeactivateChecks:l}}=t;return 0===l.length&&0===a.length?ht({...t,guardsResult:!0}):function GI(n,e,t,r){return(0,Jt.D)(n).pipe((0,or.z)(i=>function IS(n,e,t,r,i){const a=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return a&&0!==a.length?ht(a.map(d=>{const _=Hl(e)??i,w=Sa(d,_);return b(function vS(n){return n&&_d(n.canDeactivate)}(w)?w.canDeactivate(n,e,t,r):_.runInContext(()=>w(n,e,t,r))).pipe(rs())})).pipe(vd()):ht(!0)}(i.component,i.route,t,e,r)),rs(i=>!0!==i,!0))}(l,r,i,n).pipe((0,or.z)(d=>d&&function $I(n){return"boolean"==typeof n}(d)?function ES(n,e,t,r){return(0,Jt.D)(e).pipe(is(i=>Ws(function WI(n,e){return null!==n&&e&&e(new fg(n)),ht(!0)}(i.route.parent,r),function zI(n,e){return null!==n&&e&&e(new gg(n)),ht(!0)}(i.route,r),function eP(n,e,t){const r=e[e.length-1],a=e.slice(0,e.length-1).reverse().map(l=>function P_(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>mu(()=>ht(l.guards.map(_=>{const w=Hl(l.node)??t,T=Sa(_,w);return b(function yS(n){return n&&_d(n.canActivateChild)}(T)?T.canActivateChild(r,n):w.runInContext(()=>T(r,n))).pipe(rs())})).pipe(vd())));return ht(a).pipe(vd())}(n,i.path,t),function gw(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ht(!0);const i=r.map(a=>mu(()=>{const l=Hl(e)??t,d=Sa(a,l);return b(function _S(n){return n&&_d(n.canActivate)}(d)?d.canActivate(e,n):l.runInContext(()=>d(e,n))).pipe(rs())}));return ht(i).pipe(vd())}(n,i.route,t))),rs(i=>!0!==i,!0))}(r,a,n,e):ht(d)),(0,vt.U)(d=>({...t,guardsResult:d})))})}(this.ngModule.injector,d=>this.triggerEvent(d)),(0,wr.b)(d=>{if(i.guardsResult=d.guardsResult,wu(d.guardsResult))throw hw(0,d.guardsResult);const _=new cg(d.id,this.serializeUrl(d.extractedUrl),this.serializeUrl(d.urlAfterRedirects),d.targetSnapshot,!!d.guardsResult);this.triggerEvent(_)}),ci(d=>!!d.guardsResult||(this.restoreHistory(d),this.cancelNavigationTransition(d,"",3),!1)),Dw(d=>{if(d.guards.canActivateChecks.length)return ht(d).pipe((0,wr.b)(_=>{const w=new cd(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}),Hn(_=>{let w=!1;return ht(_).pipe(function Iw(n,e){return(0,or.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ht(t);let a=0;return(0,Jt.D)(i).pipe(is(l=>function Cw(n,e,t,r){const i=n.routeConfig,a=n._resolve;return void 0!==i?.title&&!iC(i)&&(a[yu]=i.title),function xS(n,e,t,r){const i=function bw(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ht({});const a={};return(0,Jt.D)(i).pipe((0,or.z)(l=>function Ag(n,e,t,r){const i=Hl(e)??r,a=Sa(n,i);return b(a.resolve?a.resolve(e,t):i.runInContext(()=>a(e,t)))}(n[l],e,t,r).pipe(rs(),(0,wr.b)(d=>{a[l]=d}))),Qp(1),function Wo(n){return(0,vt.U)(()=>n)}(a),Ds(l=>yd(l)?ns.E:ji(l)))}(a,n,e,r).pipe((0,vt.U)(l=>(n._resolvedData=l,n.data=Xh(n,t).resolve,i&&iC(i)&&(n.data[yu]=i.title),null)))}(l.route,r,n,e)),(0,wr.b)(()=>a++),Qp(1),(0,or.z)(l=>a===i.length?ht(t):ns.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,wr.b)({next:()=>w=!0,complete:()=>{w||(this.restoreHistory(_),this.cancelNavigationTransition(_,"",2))}}))}),(0,wr.b)(_=>{const w=new cw(_.id,this.serializeUrl(_.extractedUrl),this.serializeUrl(_.urlAfterRedirects),_.targetSnapshot);this.triggerEvent(w)}))}),Dw(d=>{const _=w=>{const T=[];w.routeConfig?.loadComponent&&!w.routeConfig._loadedComponent&&T.push(this.configLoader.loadComponent(w.routeConfig).pipe((0,wr.b)(S=>{w.component=S}),(0,vt.U)(()=>{})));for(const S of w.children)T.push(..._(S));return T};return po(_(d.targetSnapshot.root)).pipe(mo(),_u(1))}),Dw(()=>this.afterPreactivation()),(0,vt.U)(d=>{const _=function dw(n,e,t){const r=Er(n,e._root,t?t._root:void 0);return new A_(r,e)}(this.routeReuseStrategy,d.targetSnapshot,d.currentRouterState);return i={...d,targetRouterState:_}}),(0,wr.b)(d=>{this.currentUrlTree=d.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(d.urlAfterRedirects,d.rawUrl),this.routerState=d.targetRouterState,"deferred"===this.urlUpdateStrategy&&(d.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,d),this.browserUrlTree=d.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new vg(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,this.routeReuseStrategy,d=>this.triggerEvent(d)),(0,wr.b)({next(){a=!0},complete(){a=!0}}),nd(()=>{a||l||this.cancelNavigationTransition(i,"",1),this.currentNavigation?.id===i.id&&(this.currentNavigation=null)}),Ds(d=>{if(l=!0,pw(d)){fw(d)||(this.navigated=!0,this.restoreHistory(i,!0));const _=new Qs(i.id,this.serializeUrl(i.extractedUrl),d.message,d.cancellationCode);if(r.next(_),fw(d)){const w=this.urlHandlingStrategy.merge(d.url,this.rawUrlTree),T={skipLocationChange:i.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Tw(i.source)};this.scheduleNavigation(w,"imperative",null,T,{resolve:i.resolve,reject:i.reject,promise:i.promise})}else i.resolve(!1)}else{this.restoreHistory(i,!0);const _=new ug(i.id,this.serializeUrl(i.extractedUrl),d,i.targetSnapshot??void 0);r.next(_);try{i.resolve(this.errorHandler(d))}catch(w){i.reject(w)}}return ns.E}))}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}setTransition(t){this.transitions.next({...this.transitions.value,...t})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{const i={replaceUrl:!0},a=t.state?.navigationId?t.state:null;if(a){const d={...a};delete d.navigationId,delete d.\u0275routerPageId,0!==Object.keys(d).length&&(i.state=d)}const l=this.parseUrl(t.url);this.scheduleNavigation(l,r,a,i)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){this.config=t.map(gd),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:a,fragment:l,queryParamsHandling:d,preserveFragment:_}=r,w=i||this.routerState.root,T=_?this.currentUrlTree.fragment:l;let S=null;switch(d){case"merge":S={...this.currentUrlTree.queryParams,...a};break;case"preserve":S=this.currentUrlTree.queryParams;break;default:S=a||null}return null!==S&&(S=this.removeEmptyProps(S)),lw(w,this.currentUrlTree,t,S,T??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=wu(t)?t:this.parseUrl(t),a=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(a,"imperative",null,r)}navigate(t,r={skipLocationChange:!1}){return function kS(n){for(let e=0;e<n.length;e++){if(null==n[e])throw new f.vHH(4008,false)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...NS}:!1===r?{...hC}:r,wu(t))return he(this.currentUrlTree,t,i);const a=this.parseUrl(t);return he(this.currentUrlTree,a,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const a=t[i];return null!=a&&(r[i]=a),r},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.currentPageId=t.targetPageId,this.events.next(new Ys(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),t.resolve(!0)},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}scheduleNavigation(t,r,i,a,l){if(this.disposed)return Promise.resolve(!1);let d,_,w;l?(d=l.resolve,_=l.reject,w=l.promise):w=new Promise((P,U)=>{d=P,_=U});const T=++this.navigationId;let S;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(i=this.location.getState()),S=i&&i.\u0275routerPageId?i.\u0275routerPageId:a.replaceUrl||a.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):S=0,this.setTransition({id:T,targetPageId:S,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:a,resolve:d,reject:_,promise:w,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),w.catch(P=>Promise.reject(P))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t),a={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl?this.location.replaceState(i,"",a):this.location.go(i,"",a)}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-t.targetPageId;"popstate"!==t.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===i?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===i&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(i)}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(t,r,i){const a=new Qs(t.id,this.serializeUrl(t.extractedUrl),r,i);this.triggerEvent(a),t.resolve(!1)}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:function(){return fC()},providedIn:"root"}),n})();function Tw(n){return"imperative"!==n}let sf=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=a,this.el=l,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new hr.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){if(null!=this.tabIndexAttribute)return;const r=this.renderer,i=this.el.nativeElement;null!==t?r.setAttribute(i,"tabindex",t):r.removeAttribute(i,"tabindex")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gn),f.Y36(di),f.$8M("tabindex"),f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,r){1&t&&f.NdJ("click",function(){return r.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),Sw=(()=>{class n{constructor(t,r,i){this.router=t,this.route=r,this.locationStrategy=i,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new hr.x,this.subscription=t.events.subscribe(a=>{a instanceof Ys&&this.updateTargetUrlAndHref()})}set preserveFragment(t){this._preserveFragment=(0,f.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,f.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,f.D6c)(t)}get replaceUrl(){return this._replaceUrl}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:null}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,r,i,a,l){return!!(0!==t||r||i||a||l||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gn),f.Y36(di),f.Y36(Ee))},n.\u0275dir=f.lG2({type:n,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,r){1&t&&f.NdJ("click",function(a){return r.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),2&t&&f.uIk("target",r.target)("href",r.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[f.TTD]}),n})(),U_=(()=>{class n{constructor(t,r,i,a,l,d){this.router=t,this.element=r,this.renderer=i,this.cdr=a,this.link=l,this.linkWithHref=d,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new f.vpe,this.routerEventsSubscription=t.events.subscribe(_=>{_ instanceof Ys&&this.update()})}ngAfterContentInit(){ht(this.links.changes,this.linksWithHrefs.changes,ht(null)).pipe((0,Ia.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,Jt.D)(t).pipe((0,Ia.J)()).subscribe(r=>{this.isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this.isActive!==t&&(this.isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function OS(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.linkWithHref&&t(this.linkWithHref)||this.links.some(t)||this.linksWithHrefs.some(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gn),f.Y36(f.SBq),f.Y36(f.Qsj),f.Y36(f.sBO),f.Y36(sf,8),f.Y36(Sw,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&(f.Suo(i,sf,5),f.Suo(i,Sw,5)),2&t){let a;f.iGM(a=f.CRH())&&(r.links=a),f.iGM(a=f.CRH())&&(r.linksWithHrefs=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[f.TTD]}),n})();class Aw{}let FS=(()=>{class n{constructor(t,r,i,a,l){this.router=t,this.injector=i,this.preloadingStrategy=a,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(ci(t=>t instanceof Ys),is(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const a of r){a.providers&&!a._injector&&(a._injector=(0,f.MMx)(a.providers,t,`Route: ${a.path}`));const l=a._injector??t,d=a._loadedInjector??l;a.loadChildren&&!a._loadedRoutes&&void 0===a.canLoad||a.loadComponent&&!a._loadedComponent?i.push(this.preloadConfig(l,a)):(a.children||a._loadedRoutes)&&i.push(this.processRoutes(d,a.children??a._loadedRoutes))}return(0,Jt.D)(i).pipe((0,Ia.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ht(null);const a=i.pipe((0,or.z)(l=>null===l?ht(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,Jt.D)([a,l]).pipe((0,Ia.J)())}return a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(gn),f.LFG(f.Sil),f.LFG(f.lqb),f.LFG(Aw),f.LFG(lC))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Ut=new f.OlP("");let xw=(()=>{class n{constructor(t,r,i={}){this.router=t,this.viewportScroller=r,this.options=i,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},i.scrollPositionRestoration=i.scrollPositionRestoration||"disabled",i.anchorScrolling=i.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof qh?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ys&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Zh&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.router.triggerEvent(new Zh(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return n.\u0275fac=function(t){f.$Z()},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac}),n})();function af(n,e){return{\u0275kind:n,\u0275providers:e}}function B_(n){return[{provide:uC,multi:!0,useValue:n}]}function Rw(){const n=(0,f.f3M)(f.zs3);return e=>{const t=n.get(f.z2F);if(e!==t.components[0])return;const r=n.get(gn),i=n.get(gC);1===n.get(Mw)&&r.initialNavigation(),n.get(Wl,null,f.XFs.Optional)?.setUpPreloading(),n.get(Ut,null,f.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.unsubscribe())}}const gC=new f.OlP("",{factory:()=>new hr.x}),Mw=new f.OlP("",{providedIn:"root",factory:()=>1});const Wl=new f.OlP("");function VS(n){return af(0,[{provide:Wl,useExisting:FS},{provide:Aw,useExisting:n}])}const US=new f.OlP("ROUTER_FORROOT_GUARD"),dP=[Fe,{provide:Ol,useClass:sd},{provide:gn,useFactory:fC},pd,{provide:di,useFactory:function pC(n){return n.routerState.root},deps:[gn]},lC];function hP(){return new f.PXZ("Router",gn)}let vC=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[dP,[],B_(t),{provide:US,useFactory:lf,deps:[[gn,new f.FiY,new f.tp0]]},{provide:V_,useValue:r||{}},r?.useHash?{provide:Ee,useClass:St}:{provide:Ee,useClass:yt},{provide:Ut,useFactory:()=>{const n=(0,f.f3M)(gn),e=(0,f.f3M)(Us),t=(0,f.f3M)(V_);return t.scrollOffset&&e.setOffset(t.scrollOffset),new xw(n,e,t)}},r?.preloadingStrategy?VS(r.preloadingStrategy).\u0275providers:[],{provide:f.PXZ,multi:!0,useFactory:hP},r?.initialNavigation?jS(r):[],[{provide:Nw,useFactory:Rw},{provide:f.tb,multi:!0,useExisting:Nw}]]}}static forChild(t){return{ngModule:n,providers:[B_(t)]}}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(US,8))},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[A]}),n})();function lf(n){return"guarded"}function jS(n){return["disabled"===n.initialNavigation?af(3,[{provide:f.ip1,multi:!0,useFactory:()=>{const e=(0,f.f3M)(gn);return()=>{e.setUpLocationChangeListener()}}},{provide:Mw,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?af(2,[{provide:Mw,useValue:0},{provide:f.ip1,multi:!0,deps:[f.zs3],useFactory:e=>{const t=e.get(z,Promise.resolve());let r=!1;return()=>t.then(()=>new Promise(a=>{const l=e.get(gn),d=e.get(gC);(function i(a){e.get(gn).events.pipe(ci(d=>d instanceof Ys||d instanceof Qs||d instanceof ug),(0,vt.U)(d=>d instanceof Ys||d instanceof Qs&&(0===d.code||1===d.code)&&null),ci(d=>null!==d),_u(1)).subscribe(()=>{a()})})(()=>{a(!0),r=!0}),l.afterPreactivation=()=>(a(!0),r||d.closed?ht(void 0):d),l.initialNavigation()}))}}]).\u0275providers:[]]}const Nw=new f.OlP("");var $_=V(4986),In=V(4976);function Pw(){return(0,pr.e)((n,e)=>{let t,r=!1;n.subscribe((0,Fn.x)(e,i=>{const a=t;t=i,r&&e.next([a,i]),r=!0}))})}function EC(n,e=$o.y){return n=n??$S,(0,pr.e)((t,r)=>{let i,a=!0;t.subscribe((0,Fn.x)(r,l=>{const d=e(l);(a||!n(i,d))&&(a=!1,i=d,r.next(l))}))})}function $S(n,e){return n===e}var Ze,Qr=V(2011),kw=(V(2644),V(3942)),me=V(5861),$i=V(6881),Xs=V(4859),Aa=V(1877),k=V(2090),GS=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},xa={},H_=H_||{},Bt=GS||self;function Cd(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function us(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var Ow="closure_uid_"+(1e9*Math.random()>>>0),Fw=0;function Au(n,e,t){return n.call.apply(n.bind,arguments)}function Lw(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Ti(n,e,t){return(Ti=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Au:Lw).apply(null,arguments)}function cf(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function Si(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,a){for(var l=Array(arguments.length-2),d=2;d<arguments.length;d++)l[d-2]=arguments[d];return e.prototype[i].apply(r,l)}}function xu(){this.s=this.s,this.o=this.o}xu.prototype.s=!1,xu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function IC(n){Object.prototype.hasOwnProperty.call(n,Ow)&&n[Ow]||(n[Ow]=++Fw)}(this)},xu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Mg=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function df(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function G_(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(Cd(r)){const i=n.length||0,a=r.length||0;n.length=i+a;for(let l=0;l<a;l++)n[i+l]=r[l]}else n.push(r)}}function hi(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}hi.prototype.h=function(){this.defaultPrevented=!0};var Vw=function(){if(!Bt.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Bt.addEventListener("test",()=>{},e),Bt.removeEventListener("test",()=>{},e)}catch{}return n}();function z_(n){return/^[\s\xa0]*$/.test(n)}function W_(){var n=Bt.navigator;return n&&(n=n.userAgent)?n:""}function Ra(n){return-1!=W_().indexOf(n)}function Uw(n){return Uw[" "](n),n}Uw[" "]=function(){};var Pg,n,CC=Ra("Opera"),Ng=Ra("Trident")||Ra("MSIE"),bC=Ra("Edge"),DC=bC||Ng,Bw=Ra("Gecko")&&!(-1!=W_().toLowerCase().indexOf("webkit")&&!Ra("Edge"))&&!(Ra("Trident")||Ra("MSIE"))&&!Ra("Edge"),TC=-1!=W_().toLowerCase().indexOf("webkit")&&!Ra("Edge");function SC(){var n=Bt.document;return n?n.documentMode:void 0}e:{var AC="",xC=(n=W_(),Bw?/rv:([^\);]+)(\)|;)/.exec(n):bC?/Edge\/([\d\.]+)/.exec(n):Ng?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):TC?/WebKit\/(\S+)/.exec(n):CC?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(xC&&(AC=xC?xC[1]:""),Ng){var RC=SC();if(null!=RC&&RC>parseFloat(AC)){Pg=String(RC);break e}}Pg=AC}var mP=Bt.document&&Ng&&(SC()||parseInt(Pg,10))||void 0;function q_(n,e){if(hi.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Bw){e:{try{Uw(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:_P[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&q_.$.h.call(this)}}Si(q_,hi);var _P={2:"touch",3:"pen",4:"mouse"};q_.prototype.h=function(){q_.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var K_="closure_listenable_"+(1e6*Math.random()|0),yP=0;function ql(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++yP,this.fa=this.ia=!1}function hf(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function jw(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Z_(n){const e={};for(const t in n)e[t]=n[t];return e}const $w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Y_(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let a=0;a<$w.length;a++)t=$w[a],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function Q_(n){this.src=n,this.g={},this.h=0}function Ma(n,e){var t=e.type;if(t in n.g){var a,r=n.g[t],i=Mg(r,e);(a=0<=i)&&Array.prototype.splice.call(r,i,1),a&&(hf(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function J_(n,e,t,r){for(var i=0;i<n.length;++i){var a=n[i];if(!a.fa&&a.listener==e&&a.capture==!!t&&a.la==r)return i}return-1}Q_.prototype.add=function(n,e,t,r,i){var a=n.toString();(n=this.g[a])||(n=this.g[a]=[],this.h++);var l=J_(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new ql(e,this.src,a,!!r,i)).ia=t,n.push(e)),e};var Hw="closure_lm_"+(1e6*Math.random()|0),Gw={};function zw(n,e,t,r,i){if(r&&r.once)return kg(n,e,t,r,i);if(Array.isArray(e)){for(var a=0;a<e.length;a++)zw(n,e[a],t,r,i);return null}return t=ey(t),n&&n[K_]?n.O(e,t,us(r)?!!r.capture:!!r,i):PC(n,e,t,!1,r,i)}function PC(n,e,t,r,i,a){if(!e)throw Error("Invalid event type");var l=us(i)?!!i.capture:!!i,d=ff(n);if(d||(n[Hw]=d=new Q_(n)),(t=d.add(e,t,r,l,a)).proxy)return t;if(r=function qS(){const e=Ww;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)Vw||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Dd(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function kg(n,e,t,r,i){if(Array.isArray(e)){for(var a=0;a<e.length;a++)kg(n,e[a],t,r,i);return null}return t=ey(t),n&&n[K_]?n.P(e,t,us(r)?!!r.capture:!!r,i):PC(n,e,t,!0,r,i)}function bd(n,e,t,r,i){if(Array.isArray(e))for(var a=0;a<e.length;a++)bd(n,e[a],t,r,i);else r=us(r)?!!r.capture:!!r,t=ey(t),n&&n[K_]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=J_(a=n.g[e],t,r,i))&&(hf(a[t]),Array.prototype.splice.call(a,t,1),0==a.length&&(delete n.g[e],n.h--))):n&&(n=ff(n))&&(e=n.g[e.toString()],n=-1,e&&(n=J_(e,t,r,i)),(t=-1<n?e[n]:null)&&Og(t))}function Og(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[K_])Ma(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Dd(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=ff(e))?(Ma(t,n),0==t.h&&(t.src=null,e[Hw]=null)):hf(n)}}}function Dd(n){return n in Gw?Gw[n]:Gw[n]="on"+n}function Ww(n,e){if(n.fa)n=!0;else{e=new q_(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Og(n),n=t.call(r,e)}return n}function ff(n){return(n=n[Hw])instanceof Q_?n:null}var X_="__closure_events_fn_"+(1e9*Math.random()>>>0);function ey(n){return"function"==typeof n?n:(n[X_]||(n[X_]=function(e){return n.handleEvent(e)}),n[X_])}function Hr(){xu.call(this),this.i=new Q_(this),this.S=this,this.J=null}function Jr(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new hi(e,n);else if(e instanceof hi)e.target=e.target||n;else{var i=e;Y_(e=new hi(r,n),i)}if(i=!0,t)for(var a=t.length-1;0<=a;a--){var l=e.g=t[a];i=Fg(l,r,!0,e)&&i}if(i=Fg(l=e.g=n,r,!0,e)&&i,i=Fg(l,r,!1,e)&&i,t)for(a=0;a<t.length;a++)i=Fg(l=e.g=t[a],r,!1,e)&&i}function Fg(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,a=0;a<e.length;++a){var l=e[a];if(l&&!l.fa&&l.capture==t){var d=l.listener,_=l.la||l.src;l.ia&&Ma(n.i,l),i=!1!==d.call(_,r)&&i}}return i&&!r.defaultPrevented}Si(Hr,xu),Hr.prototype[K_]=!0,Hr.prototype.removeEventListener=function(n,e,t,r){bd(this,n,e,t,r)},Hr.prototype.N=function(){if(Hr.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)hf(t[r]);delete n.g[e],n.h--}}this.J=null},Hr.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},Hr.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var Lg=Bt.JSON.stringify;function vP(){var n=ty;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var qw=new class KS{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new YS,n=>n.reset());class YS{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function kC(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function OC(n){Bt.setTimeout(()=>{throw n},0)}let Vg,Ai=!1,ty=new class ZS{constructor(){this.h=this.g=null}add(e,t){const r=qw.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},FC=()=>{const n=Bt.Promise.resolve(void 0);Vg=()=>{n.then(wP)}};var wP=()=>{for(var n;n=vP();){try{n.h.call(n.g)}catch(t){OC(t)}var e=qw;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Ai=!1};function ny(n,e){Hr.call(this),this.h=n||1,this.g=e||Bt,this.j=Ti(this.qb,this),this.l=Date.now()}function Ug(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function ry(n,e,t){if("function"==typeof n)t&&(n=Ti(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Ti(n.handleEvent,n)}return 2147483647<Number(e)?-1:Bt.setTimeout(n,e||0)}function LC(n){n.g=ry(()=>{n.g=null,n.i&&(n.i=!1,LC(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}Si(ny,Hr),(Ze=ny.prototype).ga=!1,Ze.T=null,Ze.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Jr(this,"tick"),this.ga&&(Ug(this),this.start()))}},Ze.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},Ze.N=function(){ny.$.N.call(this),Ug(this),delete this.g};class QS extends xu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:LC(this)}N(){super.N(),this.g&&(Bt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bg(n){xu.call(this),this.h=n,this.g={}}Si(Bg,xu);var Kw=[];function VC(n,e,t,r){Array.isArray(t)||(t&&(Kw[0]=t.toString()),t=Kw);for(var i=0;i<t.length;i++){var a=zw(e,t[i],r||n.handleEvent,!1,n.h||n);if(!a)break;n.g[a.key]=a}}function Zw(n){jw(n.g,function(e,t){this.g.hasOwnProperty(t)&&Og(e)},n),n.g={}}function iy(){this.g=!0}function Td(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Na(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var a=i[0];if("noop"!=a&&"stop"!=a&&"close"!=a)for(var l=1;l<i.length;l++)i[l]=""}}}return Lg(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Bg.prototype.N=function(){Bg.$.N.call(this),Zw(this)},Bg.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},iy.prototype.Ea=function(){this.g=!1},iy.prototype.info=function(){};var Ru={},BC=null;function sy(){return BC=BC||new Hr}function eA(n){hi.call(this,Ru.Ta,n)}function pf(n){const e=sy();Jr(e,new eA(e))}function jC(n,e){hi.call(this,Ru.STAT_EVENT,n),this.stat=e}function ls(n){const e=sy();Jr(e,new jC(e,n))}function $C(n,e){hi.call(this,Ru.Ua,n),this.size=e}function Sd(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Bt.setTimeout(function(){n()},e)}Ru.Ta="serverreachability",Si(eA,hi),Ru.STAT_EVENT="statevent",Si(jC,hi),Ru.Ua="timingevent",Si($C,hi);var oy={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},HC={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function gf(){}function jg(){}gf.prototype.h=null;var ly,uy={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function $g(){hi.call(this,"d")}function GC(){hi.call(this,"c")}function Hg(){}function mf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Bg(this),this.P=Qw,this.V=new ny(n=DC?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Yw}function Yw(){this.i=null,this.g="",this.h=!1}Si($g,hi),Si(GC,hi),Si(Hg,gf),Hg.prototype.g=function(){return new XMLHttpRequest},Hg.prototype.i=function(){return{}},ly=new Hg;var Qw=45e3,Zo={},Ad={};function _f(n,e,t){n.L=1,n.v=hy(Nu(e)),n.s=t,n.S=!0,yf(n,null)}function yf(n,e){n.G=Date.now(),Gg(n),n.A=Nu(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),xi(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Yw,n.g=p0(n.l,t?e:null,!n.s),0<n.O&&(n.M=new QS(Ti(n.Pa,n,n.g),n.O)),VC(n.U,n.g,"readystatechange",n.nb),e=n.I?Z_(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),pf(),function JS(n,e,t,r,i,a){n.info(function(){if(n.g)if(a)for(var l="",d=a.split("&"),_=0;_<d.length;_++){var w=d[_].split("=");if(1<w.length){var T=w[0];w=w[1];var S=T.split("_");l=2<=S.length&&"type"==S[1]?l+(T+"=")+w+"&":l+(T+"=redacted&")}}else l=null;else l=a;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function zC(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function cy(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=WC(n,t),i==Ad){4==e&&(n.o=4,ls(14),r=!1),Td(n.j,n.m,null,"[Incomplete Response]");break}if(i==Zo){n.o=4,ls(15),Td(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Td(n.j,n.m,i,null),Jw(n,i)}zC(n)&&i!=Ad&&i!=Zo&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,ls(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),l0(e),e.M=!0,ls(11))):(Td(n.j,n.m,t,"[Invalid Chunked Response]"),vf(n),zg(n))}function WC(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Ad:(t=Number(e.substring(t,r)),isNaN(t)?Zo:(r+=1)+t>e.length?Ad:(e=e.slice(r,r+t),n.C=r+t,e))}function Gg(n){n.Y=Date.now()+n.P,qC(n,n.P)}function qC(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=Sd(Ti(n.lb,n),e)}function Kl(n){n.B&&(Bt.clearTimeout(n.B),n.B=null)}function zg(n){0==n.l.H||n.J||c0(n.l,n)}function vf(n){Kl(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Ug(n.V),Zw(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function Jw(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||Ql(t.i,n)))if(!n.K&&Ql(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;Rf(t),Af(t)}u0(t),ls(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=Sd(Ti(t.ib,t),6e3));if(1>=Md(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Xl(t,11)}else if((n.K||t.g==n)&&Rf(t),!z_(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let w=i[e];if(t.V=w[0],w=w[1],2==t.H)if("c"==w[0]){t.K=w[1],t.pa=w[2];const T=w[3];null!=T&&(t.ra=T,t.l.info("VER="+t.ra));const S=w[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const P=w[5];null!=P&&"number"==typeof P&&0<P&&(t.L=r=1.5*P,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const U=n.g;if(U){const q=U.g?U.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(q){var a=r.i;a.g||-1==q.indexOf("spdy")&&-1==q.indexOf("quic")&&-1==q.indexOf("h2")||(a.j=a.l,a.g=new Set,a.h&&(Jl(a,a.h),a.h=null))}if(r.F){const de=U.g?U.g.getResponseHeader("X-HTTP-Session-Id"):null;de&&(r.Da=de,Jn(r.I,r.F,de))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=f0(r,r.J?r.pa:null,r.Y),l.K){Nd(r.i,l);var d=l,_=r.L;_&&d.setTimeout(_),d.B&&(Kl(d),Gg(d)),r.g=l}else rb(r);0<t.j.length&&Iy(t)}else"stop"!=w[0]&&"close"!=w[0]||Xl(t,7);else 3==t.H&&("stop"==w[0]||"close"==w[0]?"stop"==w[0]?Xl(t,7):Ey(t):"noop"!=w[0]&&t.h&&t.h.Aa(w),t.A=0)}pf()}catch{}}function KC(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(Cd(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function tA(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(Cd(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function EP(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(Cd(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,a=0;a<i;a++)e.call(void 0,r[a],t&&t[a],n)}(Ze=mf.prototype).setTimeout=function(n){this.P=n},Ze.nb=function(n){n=n.target;const e=this.M;e&&3==Pa(n)?e.l():this.Pa(n)},Ze.Pa=function(n){try{if(n==this.g)e:{const T=Pa(this.g);var e=this.g.Ia();if(this.g.da(),!(3>T)&&(3!=T||DC||this.g&&(this.h.h||this.g.ja()||Jg(this.g)))){this.J||4!=T||7==e||pf(),Kl(this);var t=this.g.da();this.ca=t;t:if(zC(this)){var r=Jg(this.g);n="";var i=r.length,a=4==Pa(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){vf(this),zg(this);var l="";break t}this.h.i=new Bt.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:a&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function UC(n,e,t,r,i,a,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+a+" "+l})}(this.j,this.u,this.A,this.m,this.W,T,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var d,_=this.g;if((d=_.g?_.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!z_(d)){var w=d;break t}}w=null}if(!(t=w)){this.i=!1,this.o=3,ls(12),vf(this),zg(this);break e}Td(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Jw(this,t)}this.S?(cy(this,T,l),DC&&this.i&&3==T&&(VC(this.U,this.V,"tick",this.mb),this.V.start())):(Td(this.j,this.m,l,null),Jw(this,l)),4==T&&vf(this),this.i&&!this.J&&(4==T?c0(this.l,this):(this.i=!1,Gg(this)))}else(function vy(n){const e={};n=(n.g&&2<=Pa(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(z_(n[r]))continue;var t=kC(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const a=e[i]||[];e[i]=a,a.push(t)}!function NC(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,ls(12)):(this.o=0,ls(13)),vf(this),zg(this)}}}catch{}},Ze.mb=function(){if(this.g){var n=Pa(this.g),e=this.g.ja();this.C<e.length&&(Kl(this),cy(this,n,e),this.i&&4!=n&&Gg(this))}},Ze.cancel=function(){this.J=!0,vf(this)},Ze.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function XS(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(pf(),ls(17)),vf(this),this.o=2,zg(this)):qC(this,this.Y-n)};var ZC=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mu(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof Mu){this.h=n.h,wf(this,n.j),this.s=n.s,this.g=n.g,dy(this,n.m),this.l=n.l;var e=n.i,t=new xd;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),QC(this,t),this.o=n.o}else n&&(e=String(n).match(ZC))?(this.h=!1,wf(this,e[1]||"",!0),this.s=Wg(e[2]||""),this.g=Wg(e[3]||"",!0),dy(this,e[4]),this.l=Wg(e[5]||"",!0),QC(this,e[6]||"",!0),this.o=Wg(e[7]||"")):(this.h=!1,this.i=new xd(null,this.h))}function Nu(n){return new Mu(n)}function wf(n,e,t){n.j=t?Wg(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function dy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function QC(n,e,t){e instanceof xd?(n.i=e,function py(n,e){e&&!n.j&&(Yl(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(Yo(this,r),xi(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=qg(e,nA)),n.i=new xd(e,n.h))}function Jn(n,e,t){n.i.set(e,t)}function hy(n){return Jn(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Wg(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function qg(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,fy),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function fy(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}Mu.prototype.toString=function(){var n=[],e=this.j;e&&n.push(qg(e,Zl,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(qg(e,Zl,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(qg(t,"/"==t.charAt(0)?Kg:IP,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",qg(t,rA)),n.join("")};var Zl=/[#\/\?@]/g,IP=/[#\?:]/g,Kg=/[#\?]/g,nA=/[#\?@]/g,rA=/#/g;function xd(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function Yl(n){n.g||(n.g=new Map,n.h=0,n.i&&function YC(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var a=n[t].substring(0,r);i=n[t].substring(r+1)}else a=n[t];e(a,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Yo(n,e){Yl(n),e=wo(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function Ef(n,e){return Yl(n),e=wo(n,e),n.g.has(e)}function xi(n,e,t){Yo(n,e),0<t.length&&(n.i=null,n.g.set(wo(n,e),df(t)),n.h+=t.length)}function wo(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function gy(n){this.l=n||If,n=Bt.PerformanceNavigationTiming?0<(n=Bt.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Bt.g&&Bt.g.Ka&&Bt.g.Ka()&&Bt.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(Ze=xd.prototype).add=function(n,e){Yl(this),this.i=null,n=wo(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},Ze.forEach=function(n,e){Yl(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},Ze.ta=function(){Yl(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let a=0;a<i.length;a++)t.push(e[r])}return t},Ze.Z=function(n){Yl(this);let e=[];if("string"==typeof n)Ef(this,n)&&(e=e.concat(this.g.get(wo(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},Ze.set=function(n,e){return Yl(this),this.i=null,Ef(this,n=wo(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},Ze.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},Ze.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const a=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=a;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var If=10;function Rd(n){return!!n.h||!!n.g&&n.g.size>=n.j}function Md(n){return n.h?1:n.g?n.g.size:0}function Ql(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function Jl(n,e){n.g?n.g.add(e):n.h=e}function Nd(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function Pd(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return df(n.i)}function bf(){this.g=new class{stringify(n){return Bt.JSON.stringify(n,void 0)}parse(n){return Bt.JSON.parse(n,void 0)}}}function JC(n,e,t){const r=t||"";try{KC(n,function(i,a){let l=i;us(i)&&(l=Lg(i)),e.push(r+a+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Zg(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Df(n){this.l=n.fc||null,this.j=n.ob||!1}function Yg(n,e){Hr.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=my,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}gy.prototype.cancel=function(){if(this.i=Pd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}},Si(Df,gf),Df.prototype.g=function(){return new Yg(this.l,this.j)},Df.prototype.i=function(n){return function(){return n}}({}),Si(Yg,Hr);var my=0;function Xw(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Tf(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Sf(n)}function Sf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(Ze=Yg.prototype).open=function(n,e){if(this.readyState!=my)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Sf(this)},Ze.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Bt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},Ze.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Tf(this)),this.readyState=my},Ze.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Sf(this)),this.g&&(this.readyState=3,Sf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Bt.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Xw(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},Ze.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Tf(this):Sf(this),3==this.readyState&&Xw(this)}},Ze.Za=function(n){this.g&&(this.response=this.responseText=n,Tf(this))},Ze.Ya=function(n){this.g&&(this.response=n,Tf(this))},Ze.ka=function(){this.g&&Tf(this)},Ze.setRequestHeader=function(n,e){this.v.append(n,e)},Ze.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},Ze.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(Yg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var iA=Bt.JSON.parse;function Cr(n){Hr.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=e0,this.L=this.M=!1}Si(Cr,Hr);var e0="",sA=/^https?$/i,eb=["POST","PUT"];function _y(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,tb(n),kd(n)}function tb(n){n.F||(n.F=!0,Jr(n,"complete"),Jr(n,"error"))}function Qg(n){if(n.h&&typeof H_<"u"&&(!n.C[1]||4!=Pa(n)||2!=n.da()))if(n.v&&4==Pa(n))ry(n.La,0,n);else if(Jr(n,"readystatechange"),4==Pa(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(ZC)[1]||null;!i&&Bt.self&&Bt.self.location&&(i=Bt.self.location.protocol.slice(0,-1)),r=!sA.test(i?i.toLowerCase():"")}t=r}if(t)Jr(n,"complete"),Jr(n,"success");else{n.m=6;try{var a=2<Pa(n)?n.g.statusText:""}catch{a=""}n.j=a+" ["+n.da()+"]",tb(n)}}finally{kd(n)}}}function kd(n,e){if(n.g){yy(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Jr(n,"ready");try{t.onreadystatechange=r}catch{}}}function yy(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Bt.clearTimeout(n.A),n.A=null)}function Pa(n){return n.g?n.g.readyState:0}function Jg(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case e0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function n0(n){let e="";return jw(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function wy(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=n0(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Jn(n,e,t))}function Od(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function r0(n){this.Ga=0,this.j=[],this.l=new iy,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Od("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Od("baseRetryDelayMs",5e3,n),this.hb=Od("retryDelaySeedMs",1e4,n),this.eb=Od("forwardChannelMaxRetries",2,n),this.xa=Od("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new gy(n&&n.concurrentRequestLimit),this.Ja=new bf,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function Ey(n){if(s0(n),3==n.H){var e=n.W++,t=Nu(n.I);if(Jn(t,"SID",n.K),Jn(t,"RID",e),Jn(t,"TYPE","terminate"),xf(n,t),(e=new mf(n,n.l,e)).L=2,e.v=hy(Nu(t)),t=!1,Bt.navigator&&Bt.navigator.sendBeacon)try{t=Bt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Bt.Image&&((new Image).src=e.v,t=!0),t||(e.g=p0(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Gg(e)}h0(n)}function Af(n){n.g&&(l0(n),n.g.cancel(),n.g=null)}function s0(n){Af(n),n.u&&(Bt.clearTimeout(n.u),n.u=null),Rf(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Bt.clearTimeout(n.m),n.m=null)}function Iy(n){if(!Rd(n.i)&&!n.m){n.m=!0;var e=n.Na;Vg||FC(),Ai||(Vg(),Ai=!0),ty.add(e,n),n.C=0}}function o0(n,e){var t;t=e?e.m:n.W++;const r=Nu(n.I);Jn(r,"SID",n.K),Jn(r,"RID",t),Jn(r,"AID",n.V),xf(n,r),n.o&&n.s&&wy(r,n.o,n.s),t=new mf(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=a0(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),Jl(n.i,t),_f(t,r,e)}function xf(n,e){n.na&&jw(n.na,function(t,r){Jn(e,r,t)}),n.h&&KC({},function(t,r){Jn(e,r,t)})}function a0(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Ti(n.h.Va,n.h,n):null;e:{var i=n.j;let a=-1;for(;;){const l=["count="+t];-1==a?0<t?(a=i[0].g,l.push("ofs="+a)):a=0:l.push("ofs="+a);let d=!0;for(let _=0;_<t;_++){let w=i[_].g;const T=i[_].map;if(w-=a,0>w)a=Math.max(0,i[_].g-100),d=!1;else try{JC(T,l,"req"+w+"_")}catch{r&&r(T)}}if(d){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function rb(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Vg||FC(),Ai||(Vg(),Ai=!0),ty.add(e,n),n.A=0}}function u0(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=Sd(Ti(n.Ma,n),d0(n,n.A)),n.A++,0))}function l0(n){null!=n.B&&(Bt.clearTimeout(n.B),n.B=null)}function Cy(n){n.g=new mf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Nu(n.wa);Jn(e,"RID","rpc"),Jn(e,"SID",n.K),Jn(e,"AID",n.V),Jn(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Jn(e,"TO",n.qa),Jn(e,"TYPE","xmlhttp"),xf(n,e),n.o&&n.s&&wy(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=hy(Nu(e)),t.s=null,t.S=!0,yf(t,n)}function Rf(n){null!=n.v&&(Bt.clearTimeout(n.v),n.v=null)}function c0(n,e){var t=null;if(n.g==e){Rf(n),l0(n),n.g=null;var r=2}else{if(!Ql(n.i,e))return;t=e.F,Nd(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Jr(r=sy(),new $C(r,t)),Iy(n)}else rb(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function nb(n,e){return!(Md(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=Sd(Ti(n.Na,n,e),d0(n,n.C)),n.C++,0)))}(n,e)||2==r&&u0(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Xl(n,5);break;case 4:Xl(n,10);break;case 3:Xl(n,6);break;default:Xl(n,2)}}function d0(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Xl(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Ti(n.pb,n);t||(t=new Mu("//www.google.com/images/cleardot.gif"),Bt.location&&"http"==Bt.location.protocol||wf(t,"https"),hy(t)),function XC(n,e){const t=new iy;if(Bt.Image){const r=new Image;r.onload=cf(Zg,t,r,"TestLoadImage: loaded",!0,e),r.onerror=cf(Zg,t,r,"TestLoadImage: error",!1,e),r.onabort=cf(Zg,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=cf(Zg,t,r,"TestLoadImage: timeout",!1,e),Bt.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else ls(2);n.H=0,n.h&&n.h.za(e),h0(n),s0(n)}function h0(n){if(n.H=0,n.ma=[],n.h){const e=Pd(n.i);(0!=e.length||0!=n.j.length)&&(G_(n.ma,e),G_(n.ma,n.j),n.i.i.length=0,df(n.j),n.j.length=0),n.h.ya()}}function f0(n,e,t){var r=t instanceof Mu?Nu(t):new Mu(t);if(""!=r.g)e&&(r.g=e+"."+r.g),dy(r,r.m);else{var i=Bt.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var a=new Mu(null);r&&wf(a,r),e&&(a.g=e),i&&dy(a,i),t&&(a.l=t),r=a}return e=n.Da,(t=n.F)&&e&&Jn(r,t,e),Jn(r,"VER",n.ra),xf(n,r),r}function p0(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new Cr(t&&n.Ha&&!n.va?new Df({ob:!0}):n.va)).Oa(n.J),e}function g0(){}function Xg(){if(Ng&&!(10<=Number(mP)))throw Error("Environmental error: no available transport.")}function Io(n,e){Hr.call(this),this.g=new r0(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!z_(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!z_(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Fd(this)}function ib(n){$g.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function sb(){GC.call(this),this.status=1}function Fd(n){this.g=n}function An(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function by(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var a=n.g[3],l=(e=n.g[0])+(a^(t=n.g[1])&((i=n.g[2])^a))+r[0]+3614090360&4294967295;l=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=(t=(i=(a=(e=t+(l<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(a^t&(i^a))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=a+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^a&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(a^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^a&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^a&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=a+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(a^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(a^e&(i^a))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^a)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^a)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=a+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(a^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^a^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~a))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~a))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(a|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(a^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((a=(e=t+((l=e+(i^(t|~a))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=a+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=a+((l=i+(e^(a|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+a&4294967295}function xn(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var a=0|n[i];r&&a==e||(t[i]=a,r=!1)}this.g=t}(Ze=Cr.prototype).Oa=function(n){this.M=n},Ze.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():ly.g(),this.C=function ay(n){return n.h||(n.h=n.i())}(this.u?this.u:ly),this.g.onreadystatechange=Ti(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(a){return void _y(this,a)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const a of r.keys())t.set(a,r.get(a))}r=Array.from(t.keys()).find(a=>"content-type"==a.toLowerCase()),i=Bt.FormData&&n instanceof Bt.FormData,!(0<=Mg(eb,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[a,l]of t)this.g.setRequestHeader(a,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yy(this),0<this.B&&((this.L=function t0(n){return Ng&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ti(this.ua,this)):this.A=ry(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(a){_y(this,a)}},Ze.ua=function(){typeof H_<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Jr(this,"timeout"),this.abort(8))},Ze.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Jr(this,"complete"),Jr(this,"abort"),kd(this))},Ze.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),kd(this,!0)),Cr.$.N.call(this)},Ze.La=function(){this.s||(this.G||this.v||this.l?Qg(this):this.kb())},Ze.kb=function(){Qg(this)},Ze.isActive=function(){return!!this.g},Ze.da=function(){try{return 2<Pa(this)?this.g.status:-1}catch{return-1}},Ze.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},Ze.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),iA(e)}},Ze.Ia=function(){return this.m},Ze.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(Ze=r0.prototype).ra=8,Ze.H=1,Ze.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new mf(this,this.l,n);let a=this.s;if(this.U&&(a?(a=Z_(a),Y_(a,this.U)):a=this.U),null!==this.o||this.O||(i.I=a,a=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=a0(this,i,e),Jn(t=Nu(this.I),"RID",n),Jn(t,"CVER",22),this.F&&Jn(t,"X-HTTP-Session-Id",this.F),xf(this,t),a&&(this.O?e="headers="+encodeURIComponent(String(n0(a)))+"&"+e:this.o&&wy(t,this.o,a)),Jl(this.i,i),this.bb&&Jn(t,"TYPE","init"),this.P?(Jn(t,"$req",e),Jn(t,"SID","null"),i.aa=!0,_f(i,t,null)):_f(i,t,e),this.H=2}}else 3==this.H&&(n?o0(this,n):0==this.j.length||Rd(this.i)||o0(this))},Ze.Ma=function(){if(this.u=null,Cy(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=Sd(Ti(this.jb,this),n)}},Ze.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ls(10),Af(this),Cy(this))},Ze.ib=function(){null!=this.v&&(this.v=null,Af(this),u0(this),ls(19))},Ze.pb=function(n){n?(this.l.info("Successfully pinged google.com"),ls(2)):(this.l.info("Failed to ping google.com"),ls(1))},Ze.isActive=function(){return!!this.h&&this.h.isActive(this)},(Ze=g0.prototype).Ba=function(){},Ze.Aa=function(){},Ze.za=function(){},Ze.ya=function(){},Ze.isActive=function(){return!0},Ze.Va=function(){},Xg.prototype.g=function(n,e){return new Io(n,e)},Si(Io,Hr),Io.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;ls(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=f0(n,null,n.Y),Iy(n)},Io.prototype.close=function(){Ey(this.g)},Io.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=Lg(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Iy(e)},Io.prototype.N=function(){this.g.h=null,delete this.j,Ey(this.g),delete this.g,Io.$.N.call(this)},Si(ib,$g),Si(sb,GC),Si(Fd,g0),Fd.prototype.Ba=function(){Jr(this.g,"a")},Fd.prototype.Aa=function(n){Jr(this.g,new ib(n))},Fd.prototype.za=function(n){Jr(this.g,new sb)},Fd.prototype.ya=function(){Jr(this.g,"b")},Si(An,function oA(){this.blockSize=-1}),An.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},An.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,a=0;a<e;){if(0==i)for(;a<=t;)by(this,n,a),a+=this.blockSize;if("string"==typeof n){for(;a<e;)if(r[i++]=n.charCodeAt(a++),i==this.blockSize){by(this,r),i=0;break}}else for(;a<e;)if(r[i++]=n[a++],i==this.blockSize){by(this,r),i=0;break}}this.h=i,this.i+=e},An.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var aA={};function Dy(n){return-128<=n&&128>n?function zS(n,e){var t=aA;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new xn([0|e],0>e?-1:0)}):new xn([0|n],0>n?-1:0)}function ka(n){if(isNaN(n)||!isFinite(n))return Qo;if(0>n)return fi(ka(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=Ty;return new xn(e,0)}var Ty=4294967296,Qo=Dy(0),_0=Dy(1),ob=Dy(16777216);function Oa(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Co(n){return-1==n.h}function fi(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new xn(t,~n.h).add(_0)}function y0(n,e){return n.add(fi(e))}function em(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Ld(n,e){this.g=n,this.h=e}function eo(n,e){if(Oa(e))throw Error("division by zero");if(Oa(n))return new Ld(Qo,Qo);if(Co(n))return e=eo(fi(n),e),new Ld(fi(e.g),fi(e.h));if(Co(e))return e=eo(n,fi(e)),new Ld(fi(e.g),e.h);if(30<n.g.length){if(Co(n)||Co(e))throw Error("slowDivide_ only works with positive integers.");for(var t=_0,r=e;0>=r.X(n);)t=ab(t),r=ab(r);var i=Mf(t,1),a=Mf(r,1);for(r=Mf(r,2),t=Mf(t,2);!Oa(r);){var l=a.add(r);0>=l.X(n)&&(i=i.add(t),a=l),r=Mf(r,1),t=Mf(t,1)}return e=y0(n,i.R(e)),new Ld(i,e)}for(i=Qo;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(a=ka(t)).R(e);Co(l)||0<l.X(n);)l=(a=ka(t-=r)).R(e);Oa(a)&&(a=_0),i=i.add(a),n=y0(n,l)}return new Ld(i,n)}function ab(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new xn(t,n.h)}function Mf(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],a=0;a<r;a++)i[a]=0<e?n.D(a+t)>>>e|n.D(a+t+1)<<32-e:n.D(a+t);return new xn(i,n.h)}(Ze=xn.prototype).ea=function(){if(Co(this))return-fi(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:Ty+r)*e,e*=Ty}return n},Ze.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Oa(this))return"0";if(Co(this))return"-"+fi(this).toString(n);for(var e=ka(Math.pow(n,6)),t=this,r="";;){var i=eo(t,e).g,a=((0<(t=y0(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Oa(t=i))return a+r;for(;6>a.length;)a="0"+a;r=a+r}},Ze.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},Ze.X=function(n){return Co(n=y0(this,n))?-1:Oa(n)?0:1},Ze.abs=function(){return Co(this)?fi(this):this},Ze.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var a=r+(65535&this.D(i))+(65535&n.D(i)),l=(a>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(a&=65535)}return new xn(t,-2147483648&t[t.length-1]?-1:0)},Ze.R=function(n){if(Oa(this)||Oa(n))return Qo;if(Co(this))return Co(n)?fi(this).R(fi(n)):fi(fi(this).R(n));if(Co(n))return fi(this.R(fi(n)));if(0>this.X(ob)&&0>n.X(ob))return ka(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var a=this.D(r)>>>16,l=65535&this.D(r),d=n.D(i)>>>16,_=65535&n.D(i);t[2*r+2*i]+=l*_,em(t,2*r+2*i),t[2*r+2*i+1]+=a*_,em(t,2*r+2*i+1),t[2*r+2*i+1]+=l*d,em(t,2*r+2*i+1),t[2*r+2*i+2]+=a*d,em(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new xn(t,0)},Ze.gb=function(n){return eo(this,n).h},Ze.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new xn(t,this.h&n.h)},Ze.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new xn(t,this.h|n.h)},Ze.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new xn(t,this.h^n.h)},Xg.prototype.createWebChannel=Xg.prototype.g,Io.prototype.send=Io.prototype.u,Io.prototype.open=Io.prototype.m,Io.prototype.close=Io.prototype.close,oy.NO_ERROR=0,oy.TIMEOUT=8,oy.HTTP_ERROR=6,HC.COMPLETE="complete",jg.EventType=uy,uy.OPEN="a",uy.CLOSE="b",uy.ERROR="c",uy.MESSAGE="d",Hr.prototype.listen=Hr.prototype.O,Cr.prototype.listenOnce=Cr.prototype.P,Cr.prototype.getLastError=Cr.prototype.Sa,Cr.prototype.getLastErrorCode=Cr.prototype.Ia,Cr.prototype.getStatus=Cr.prototype.da,Cr.prototype.getResponseJson=Cr.prototype.Wa,Cr.prototype.getResponseText=Cr.prototype.ja,Cr.prototype.send=Cr.prototype.ha,Cr.prototype.setWithCredentials=Cr.prototype.Oa,An.prototype.digest=An.prototype.l,An.prototype.reset=An.prototype.reset,An.prototype.update=An.prototype.j,xn.prototype.add=xn.prototype.add,xn.prototype.multiply=xn.prototype.R,xn.prototype.modulo=xn.prototype.gb,xn.prototype.compare=xn.prototype.X,xn.prototype.toNumber=xn.prototype.ea,xn.prototype.toString=xn.prototype.toString,xn.prototype.getBits=xn.prototype.D,xn.fromNumber=ka,xn.fromString=function m0(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return fi(m0(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ka(Math.pow(e,8)),r=Qo,i=0;i<n.length;i+=8){var a=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+a),e);8>a?(a=ka(Math.pow(e,a)),r=r.R(a).add(ka(l))):r=(r=r.R(t)).add(ka(l))}return r};var Fa=xa.createWebChannelTransport=function(){return new Xg},Jo=xa.getStatEventTarget=function(){return sy()},to=xa.ErrorCode=oy,ub=xa.EventType=HC,lb=xa.Event=Ru,cb=xa.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},uA=xa.FetchXmlHttpFactory=Df,Sy=xa.WebChannel=jg,lA=xa.XhrIo=Cr,v0=xa.Md5=An,La=xa.Integer=xn;const db="@firebase/firestore";class Xr{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Xr.UNAUTHENTICATED=new Xr(null),Xr.GOOGLE_CREDENTIALS=new Xr("google-credentials-uid"),Xr.FIRST_PARTY=new Xr("first-party-uid"),Xr.MOCK_USER=new Xr("mock-user");let Nf="9.23.0";const Pu=new Aa.Yd("@firebase/firestore");function Ay(){return Pu.logLevel}function Ve(n,...e){if(Pu.logLevel<=Aa.in.DEBUG){const t=e.map(tm);Pu.debug(`Firestore (${Nf}): ${n}`,...t)}}function br(n,...e){if(Pu.logLevel<=Aa.in.ERROR){const t=e.map(tm);Pu.error(`Firestore (${Nf}): ${n}`,...t)}}function no(n,...e){if(Pu.logLevel<=Aa.in.WARN){const t=e.map(tm);Pu.warn(`Firestore (${Nf}): ${n}`,...t)}}function tm(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function nt(n="Unexpected state"){const e=`FIRESTORE (${Nf}) INTERNAL ASSERTION FAILED: `+n;throw br(e),new Error(e)}function wt(n,e){n||nt()}function Je(n,e){return n}const ce={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Re extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class w0{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class fb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Xr.UNAUTHENTICATED))}shutdown(){}}class cA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class dA{constructor(e){this.t=e,this.currentUser=Xr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const a=w=>this.i!==i?(i=this.i,t(w)):Promise.resolve();let l=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gr,e.enqueueRetryable(()=>a(this.currentUser))};const d=()=>{const w=l;e.enqueueRetryable((0,me.Z)(function*(){yield w.promise,yield a(r.currentUser)}))},_=w=>{Ve("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=w,this.auth.addAuthTokenListener(this.o),d()};this.t.onInit(w=>_(w)),setTimeout(()=>{if(!this.auth){const w=this.t.getImmediate({optional:!0});w?_(w):(Ve("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gr)}},0),d()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(Ve("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(wt("string"==typeof r.accessToken),new w0(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return wt(null===e||"string"==typeof e),new Xr(e)}}class hA{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Xr.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class fA{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new hA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Xr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class pb{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class pA{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=a=>{null!=a.error&&Ve("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${a.error.message}`);const l=a.token!==this.T;return this.T=a.token,Ve("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(a.token):Promise.resolve()};this.o=a=>{e.enqueueRetryable(()=>r(a))};const i=a=>{Ve("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=a,this.appCheck.addTokenListener(this.o)};this.I.onInit(a=>i(a)),setTimeout(()=>{if(!this.appCheck){const a=this.I.getImmediate({optional:!0});a?i(a):Ve("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(wt("string"==typeof t.token),this.T=t.token,new pb(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function gA(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class gb{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=gA(40);for(let a=0;a<i.length;++a)r.length<20&&i[a]<t&&(r+=e.charAt(i[a]%e.length))}return r}}function jt(n,e){return n<e?-1:n>e?1:0}function Pf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function mb(n){return n+"\0"}class ar{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Re(ce.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Re(ce.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return ar.fromMillis(Date.now())}static fromDate(e){return ar.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new ar(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?jt(this.nanoseconds,e.nanoseconds):jt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Dt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new ar(0,0))}static max(){return new Dt(new ar(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class nm{constructor(e,t,r){void 0===t?t=0:t>e.length&&nt(),void 0===r?r=e.length-t:r>e.length-t&&nt(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===nm.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof nm?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const a=e.get(i),l=t.get(i);if(a<l)return-1;if(a>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class an extends nm{construct(e,t,r){return new an(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new an(t)}static emptyPath(){return new an([])}}const mA=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Dr extends nm{construct(e,t,r){return new Dr(e,t,r)}static isValidIdentifier(e){return mA.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Dr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Dr(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const a=()=>{if(0===r.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const d=e[i];if("\\"===d){if(i+1===e.length)throw new Re(ce.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const _=e[i+1];if("\\"!==_&&"."!==_&&"`"!==_)throw new Re(ce.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=_,i+=2}else"`"===d?(l=!l,i++):"."!==d||l?(r+=d,i++):(a(),i++)}if(a(),l)throw new Re(ce.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Dr(t)}static emptyPath(){return new Dr([])}}class Ye{constructor(e){this.path=e}static fromPath(e){return new Ye(an.fromString(e))}static fromName(e){return new Ye(an.fromString(e).popFirst(5))}static empty(){return new Ye(an.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===an.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return an.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ye(new an(e.slice()))}}class rm{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function Ry(n){return n.fields.find(e=>2===e.kind)}function ec(n){return n.fields.filter(e=>2!==e.kind)}rm.UNKNOWN_ID=-1;class im{constructor(e,t){this.fieldPath=e,this.kind=t}}class kf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new kf(0,xs.min())}}function E0(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Dt.fromTimestamp(1e9===r?new ar(t+1,0):new ar(t,r));return new xs(i,Ye.empty(),e)}function I0(n){return new xs(n.readTime,n.key,-1)}class xs{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new xs(Dt.min(),Ye.empty(),-1)}static max(){return new xs(Dt.max(),Ye.empty(),-1)}}function ku(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=Ye.comparator(n.documentKey,e.documentKey),0!==t?t:jt(n.largestBatchId,e.largestBatchId))}const vb="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wb{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function ro(n){return Eb.apply(this,arguments)}function Eb(){return Eb=(0,me.Z)(function*(n){if(n.code!==ce.FAILED_PRECONDITION||n.message!==vb)throw n;Ve("LocalStore","Unexpectedly lost primary lease")}),Eb.apply(this,arguments)}class se{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&nt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new se((r,i)=>{this.nextCallback=a=>{this.wrapSuccess(e,a).next(r,i)},this.catchCallback=a=>{this.wrapFailure(t,a).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof se?t:se.resolve(t)}catch(t){return se.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):se.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):se.reject(t)}static resolve(e){return new se((t,r)=>{t(e)})}static reject(e){return new se((t,r)=>{r(e)})}static waitFor(e){return new se((t,r)=>{let i=0,a=0,l=!1;e.forEach(d=>{++i,d.next(()=>{++a,l&&a===i&&t()},_=>r(_))}),l=!0,a===i&&t()})}static or(e){let t=se.resolve(!1);for(const r of e)t=t.next(i=>i?se.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,a)=>{r.push(t.call(this,i,a))}),this.waitFor(r)}static mapArray(e,t){return new se((r,i)=>{const a=e.length,l=new Array(a);let d=0;for(let _=0;_<a;_++){const w=_;t(e[w]).next(T=>{l[w]=T,++d,d===a&&r(l)},T=>i(T))}})}static doWhile(e,t){return new se((r,i)=>{const a=()=>{!0===e()?t().next(()=>{a()},i):r()};a()})}}class C0{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Gr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new My(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=tc(r.target.error);this.v.reject(new My(e,i))}}static open(e,t,r,i){try{return new C0(t,e.transaction(i,r))}catch(a){throw new My(t,a)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Ve("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new _A(t)}}class bo{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===bo.S((0,k.z$)())&&br("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Ve("SimpleDb","Removing database:",e),Vd(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.hl)())return!1;if(bo.C())return!0;const e=(0,k.z$)(),t=bo.S(e),r=0<t&&t<10,i=bo.N(e),a=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||a)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,me.Z)(function*(){return t.db||(Ve("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const a=indexedDB.open(t.name,t.version);a.onsuccess=l=>{r(l.target.result)},a.onblocked=()=>{i(new My(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=l=>{const d=l.target.error;i("VersionError"===d.name?new Re(ce.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===d.name?new Re(ce.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+d):new My(e,d))},a.onupgradeneeded=l=>{Ve("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,a.transaction,l.oldVersion,t.version).next(()=>{Ve("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var a=this;return(0,me.Z)(function*(){const l="readonly"===t;let d=0;for(;;){++d;try{a.db=yield a.$(e);const _=C0.open(a.db,e,l?"readonly":"readwrite",r),w=i(_).next(T=>(_.P(),T)).catch(T=>(_.abort(T),se.reject(T))).toPromise();return w.catch(()=>{}),yield _.R,w}catch(_){const w=_,T="FirebaseError"!==w.name&&d<3;if(Ve("SimpleDb","Transaction failed with error:",w.message,"Retrying:",T),a.close(),!T)return Promise.reject(w)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Ib{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Vd(this.L.delete())}}class My extends Re{constructor(e,t){super(ce.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Tt(n){return"IndexedDbTransactionError"===n.name}class _A{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(Ve("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(Ve("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Vd(r)}add(e){return Ve("SimpleDb","ADD",this.store.name,e,e),Vd(this.store.add(e))}get(e){return Vd(this.store.get(e)).next(t=>(void 0===t&&(t=null),Ve("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Ve("SimpleDb","DELETE",this.store.name,e),Vd(this.store.delete(e))}count(){return Ve("SimpleDb","COUNT",this.store.name),Vd(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),a=[];return this.W(i,(l,d)=>{a.push(d)}).next(()=>a)}{const i=this.store.getAll(r.range);return new se((a,l)=>{i.onerror=d=>{l(d.target.error)},i.onsuccess=d=>{a(d.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new se((i,a)=>{r.onerror=l=>{a(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){Ve("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(a,l,d)=>d.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new se((r,i)=>{t.onerror=a=>{const l=tc(a.target.error);i(l)},t.onsuccess=a=>{const l=a.target.result;l?e(l.primaryKey,l.value).next(d=>{d?l.continue():r()}):r()}})}W(e,t){const r=[];return new se((i,a)=>{e.onerror=l=>{a(l.target.error)},e.onsuccess=l=>{const d=l.target.result;if(!d)return void i();const _=new Ib(d),w=t(d.primaryKey,d.value,_);if(w instanceof se){const T=w.catch(S=>(_.done(),se.reject(S)));r.push(T)}_.isDone?i():null===_.K?d.continue():d.continue(_.K)}}).next(()=>se.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Vd(n){return new se((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=tc(r.target.error);t(i)}})}let Cb=!1;function tc(n){const e=bo.S((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new Re("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return Cb||(Cb=!0,setTimeout(()=>{throw r},0)),r}}return n}class yA{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Ve("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,me.Z)(function*(){t.task=null;try{Ve("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Tt(r)?Ve("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield ro(r)}yield t.et(6e4)}))}}class Ny{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,me.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,a=!0;return se.doWhile(()=>!0===a&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return Ve("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(d=>{i-=d,r.add(l)});a=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(a=>{const l=a.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,a)).next(d=>(Ve("IndexBackiller",`Updating offset: ${d}`),this.localStore.indexManager.updateCollectionGroup(e,t,d))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,a)=>{const l=I0(a);ku(l,r)>0&&(r=l)}),new xs(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Hi=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Gn(n){return null==n}function Py(n){return 0===n&&1/n==-1/0}function b0(n){return"number"==typeof n&&Number.isInteger(n)&&!Py(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ri(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=D0(e)),e=vA(n.get(t),e);return D0(e)}function vA(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const a=n.charAt(i);switch(a){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=a}}return t}function D0(n){return n+"\x01\x01"}function Xo(n){const e=n.length;if(wt(e>=2),2===e)return wt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),an.emptyPath();const t=e-2,r=[];let i="";for(let a=0;a<e;){const l=n.indexOf("\x01",a);switch((l<0||l>t)&&nt(),n.charAt(l+1)){case"\x01":const d=n.substring(a,l);let _;0===i.length?_=d:(i+=d,_=i,i=""),r.push(_);break;case"\x10":i+=n.substring(a,l),i+="\0";break;case"\x11":i+=n.substring(a,l+1);break;default:nt()}a=l+2}return new an(r)}const T0=["userId","batchId"];function sm(n,e){return[n,Ri(e)]}function bb(n,e,t){return[n,Ri(e),t]}const wA={},EA=["prefixPath","collectionGroup","readTime","documentId"],om=["prefixPath","collectionGroup","documentId"],IA=["collectionGroup","readTime","prefixPath","documentId"],CA=["canonicalId","targetId"],bA=["targetId","path"],ky=["path","targetId"],Db=["collectionId","parent"],Tb=["indexId","uid"],Sb=["uid","sequenceNumber"],DA=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],am=["indexId","uid","orderedDocumentKey"],um=["userId","collectionPath","documentId"],TA=["userId","collectionPath","largestBatchId"],SA=["userId","collectionGroup","largestBatchId"],Ab=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],xb=[...Ab,"documentOverlays"],S0=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],A0=S0,AA=[...A0,"indexConfiguration","indexState","indexEntries"];class Oy extends wb{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function pi(n,e){const t=Je(n);return bo.M(t.ht,e)}function Rb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Ud(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function xA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class Xn{constructor(e,t){this.comparator=e,this.root=t||gi.EMPTY}insert(e,t){return new Xn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,gi.BLACK,null,null))}remove(e){return new Xn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,gi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new x0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new x0(this.root,e,this.comparator,!1)}getReverseIterator(){return new x0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new x0(this.root,e,this.comparator,!0)}}class x0{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let a=1;for(;!e.isEmpty();)if(a=t?r(e.key,t):1,t&&i&&(a*=-1),a<0)e=this.isReverse?e.left:e.right;else{if(0===a){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class gi{constructor(e,t,r,i,a){this.key=e,this.value=t,this.color=r??gi.RED,this.left=i??gi.EMPTY,this.right=a??gi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,a){return new gi(e??this.key,t??this.value,r??this.color,i??this.left,a??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const a=r(e,i.key);return i=a<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===a?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return gi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return gi.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,gi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,gi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nt();const e=this.left.check();if(e!==this.right.check())throw nt();return e+(this.isRed()?0:1)}}gi.EMPTY=null,gi.RED=!0,gi.BLACK=!1,gi.EMPTY=new class{constructor(){this.size=0}get key(){throw nt()}get value(){throw nt()}get color(){throw nt()}get left(){throw nt()}get right(){throw nt()}copy(n,e,t,r,i){return this}insert(n,e,t){return new gi(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Nn{constructor(e){this.comparator=e,this.data=new Xn(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Mb(this.data.getIterator())}getIteratorFrom(e){return new Mb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Nn)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(0!==this.comparator(i,a))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Nn(this.comparator);return t.data=e,t}}class Mb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function Of(n){return n.hasNext()?n.getNext():void 0}class cs{constructor(e){this.fields=e,e.sort(Dr.comparator)}static empty(){return new cs([])}unionWith(e){let t=new Nn(Dr.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new cs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Pf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Ff extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class ei{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Ff("Invalid base64 string: "+i):i}}(e);return new ei(t)}static fromUint8Array(e){const t=function(r){let i="";for(let a=0;a<r.length;++a)i+=String.fromCharCode(r[a]);return i}(e);return new ei(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return jt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ei.EMPTY_BYTE_STRING=new ei("");const MA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function nc(n){if(wt(!!n),"string"==typeof n){let e=0;const t=MA.exec(n);if(wt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Tr(n.seconds),nanos:Tr(n.nanos)}}function Tr(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function Va(n){return"string"==typeof n?ei.fromBase64String(n):ei.fromUint8Array(n)}function Fy(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function Ly(n){const e=n.mapValue.fields.__previous_value__;return Fy(e)?Ly(e):e}function Ou(n){const e=nc(n.mapValue.fields.__local_write_time__.timestampValue);return new ar(e.seconds,e.nanos)}class NA{constructor(e,t,r,i,a,l,d,_,w){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=a,this.forceLongPolling=l,this.autoDetectLongPolling=d,this.longPollingOptions=_,this.useFetchStreams=w}}class Fu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Fu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Fu&&e.projectId===this.projectId&&e.database===this.database}}const rc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},lm={nullValue:"NULL_VALUE"};function ic(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Fy(n)?4:kb(n)?9007199254740991:10:nt()}function ea(n,e){if(n===e)return!0;const t=ic(n);if(t!==ic(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ou(n).isEqual(Ou(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const a=nc(r.timestampValue),l=nc(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,Va(n.bytesValue).isEqual(Va(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return Tr(r.geoPointValue.latitude)===Tr(i.geoPointValue.latitude)&&Tr(r.geoPointValue.longitude)===Tr(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return Tr(r.integerValue)===Tr(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const a=Tr(r.doubleValue),l=Tr(i.doubleValue);return a===l?Py(a)===Py(l):isNaN(a)&&isNaN(l)}return!1}(n,e);case 9:return Pf(n.arrayValue.values||[],e.arrayValue.values||[],ea);case 10:return function(r,i){const a=r.mapValue.fields||{},l=i.mapValue.fields||{};if(Rb(a)!==Rb(l))return!1;for(const d in a)if(a.hasOwnProperty(d)&&(void 0===l[d]||!ea(a[d],l[d])))return!1;return!0}(n,e);default:return nt()}var i}function cm(n,e){return void 0!==(n.values||[]).find(t=>ea(t,e))}function Ua(n,e){if(n===e)return 0;const t=ic(n),r=ic(e);if(t!==r)return jt(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return jt(n.booleanValue,e.booleanValue);case 2:return function(i,a){const l=Tr(i.integerValue||i.doubleValue),d=Tr(a.integerValue||a.doubleValue);return l<d?-1:l>d?1:l===d?0:isNaN(l)?isNaN(d)?0:-1:1}(n,e);case 3:return Nb(n.timestampValue,e.timestampValue);case 4:return Nb(Ou(n),Ou(e));case 5:return jt(n.stringValue,e.stringValue);case 6:return function(i,a){const l=Va(i),d=Va(a);return l.compareTo(d)}(n.bytesValue,e.bytesValue);case 7:return function(i,a){const l=i.split("/"),d=a.split("/");for(let _=0;_<l.length&&_<d.length;_++){const w=jt(l[_],d[_]);if(0!==w)return w}return jt(l.length,d.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,a){const l=jt(Tr(i.latitude),Tr(a.latitude));return 0!==l?l:jt(Tr(i.longitude),Tr(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,a){const l=i.values||[],d=a.values||[];for(let _=0;_<l.length&&_<d.length;++_){const w=Ua(l[_],d[_]);if(w)return w}return jt(l.length,d.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,a){if(i===rc.mapValue&&a===rc.mapValue)return 0;if(i===rc.mapValue)return 1;if(a===rc.mapValue)return-1;const l=i.fields||{},d=Object.keys(l),_=a.fields||{},w=Object.keys(_);d.sort(),w.sort();for(let T=0;T<d.length&&T<w.length;++T){const S=jt(d[T],w[T]);if(0!==S)return S;const P=Ua(l[d[T]],_[w[T]]);if(0!==P)return P}return jt(d.length,w.length)}(n.mapValue,e.mapValue);default:throw nt()}}function Nb(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return jt(n,e);const t=nc(n),r=nc(e),i=jt(t.seconds,r.seconds);return 0!==i?i:jt(t.nanos,r.nanos)}function Bd(n){return Vy(n)}function Vy(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=nc(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?Va(n.bytesValue).toBase64():"referenceValue"in n?Ye.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",a=!0;for(const l of r.values||[])a?a=!1:i+=",",i+=Vy(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let a="{",l=!0;for(const d of i)l?l=!1:a+=",",a+=`${d}:${Vy(r.fields[d])}`;return a+"}"}(n.mapValue):nt();var e}function jd(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function R0(n){return!!n&&"integerValue"in n}function $d(n){return!!n&&"arrayValue"in n}function Pb(n){return!!n&&"nullValue"in n}function M0(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function By(n){return!!n&&"mapValue"in n}function dm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Ud(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=dm(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=dm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function kb(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function PA(n){return"nullValue"in n?lm:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?jd(Fu.empty(),Ye.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:nt()}function kA(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?jd(Fu.empty(),Ye.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?rc:nt()}function Ob(n,e){const t=Ua(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Fb(n,e){const t=Ua(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Mi{constructor(e){this.value=e}static empty(){return new Mi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!By(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=dm(t)}setAll(e){let t=Dr.emptyPath(),r={},i=[];e.forEach((l,d)=>{if(!t.isImmediateParentOf(d)){const _=this.getFieldsMap(t);this.applyChanges(_,r,i),r={},i=[],t=d.popLast()}l?r[d.lastSegment()]=dm(l):i.push(d.lastSegment())});const a=this.getFieldsMap(t);this.applyChanges(a,r,i)}delete(e){const t=this.field(e.popLast());By(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ea(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];By(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Ud(t,(i,a)=>e[i]=a);for(const i of r)delete e[i]}clone(){return new Mi(dm(this.value))}}function N0(n){const e=[];return Ud(n.fields,(t,r)=>{const i=new Dr([t]);if(By(r)){const a=N0(r.mapValue).fields;if(0===a.length)e.push(i);else for(const l of a)e.push(i.child(l))}else e.push(i)}),new cs(e)}class zn{constructor(e,t,r,i,a,l,d){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=a,this.data=l,this.documentState=d}static newInvalidDocument(e){return new zn(e,0,Dt.min(),Dt.min(),Dt.min(),Mi.empty(),0)}static newFoundDocument(e,t,r,i){return new zn(e,1,t,Dt.min(),r,i,0)}static newNoDocument(e,t){return new zn(e,2,t,Dt.min(),Dt.min(),Mi.empty(),0)}static newUnknownDocument(e,t){return new zn(e,3,t,Dt.min(),Dt.min(),Mi.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Mi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Mi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof zn&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new zn(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class sc{constructor(e,t){this.position=e,this.inclusive=t}}function Lb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const a=e[i],l=n.position[i];if(r=a.field.isKeyField()?Ye.comparator(Ye.fromName(l.referenceValue),t.key):Ua(l,t.data.field(a.field)),"desc"===a.dir&&(r*=-1),0!==r)break}return r}function P0(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ea(n.position[t],e.position[t]))return!1;return!0}class Lf{constructor(e,t="asc"){this.field=e,this.dir=t}}function OA(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Vb{}class Qt extends Vb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new jb(e,t,r):"array-contains"===t?new L0(e,r):"in"===t?new $b(e,r):"not-in"===t?new V0(e,r):"array-contains-any"===t?new LA(e,r):new Qt(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new FA(e,r):new bP(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ua(t,this.value)):null!==t&&ic(this.value)===ic(t)&&this.matchesComparison(Ua(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return nt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class En extends Vb{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new En(e,t)}matches(e){return Hd(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Hd(n){return"and"===n.op}function hm(n){return"or"===n.op}function k0(n){return Ub(n)&&Hd(n)}function Ub(n){for(const e of n.filters)if(e instanceof En)return!1;return!0}function fm(n){if(n instanceof Qt)return n.field.canonicalString()+n.op.toString()+Bd(n.value);if(k0(n))return n.filters.map(e=>fm(e)).join(",");{const e=n.filters.map(t=>fm(t)).join(",");return`${n.op}(${e})`}}function Bb(n,e){return n instanceof Qt?(t=n,(r=e)instanceof Qt&&t.op===r.op&&t.field.isEqual(r.field)&&ea(t.value,r.value)):n instanceof En?function(t,r){return r instanceof En&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,a,l)=>i&&Bb(a,r.filters[l]),!0)}(n,e):void nt();var t,r}function O0(n,e){const t=n.filters.concat(e);return En.create(t,n.op)}function Gd(n){return n instanceof Qt?`${(e=n).field.canonicalString()} ${e.op} ${Bd(e.value)}`:n instanceof En?function(e){return e.op.toString()+" {"+e.getFilters().map(Gd).join(" ,")+"}"}(n):"Filter";var e}class jb extends Qt{constructor(e,t,r){super(e,t,r),this.key=Ye.fromName(r.referenceValue)}matches(e){const t=Ye.comparator(e.key,this.key);return this.matchesComparison(t)}}class FA extends Qt{constructor(e,t){super(e,"in",t),this.keys=F0(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class bP extends Qt{constructor(e,t){super(e,"not-in",t),this.keys=F0(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function F0(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>Ye.fromName(r.referenceValue))}class L0 extends Qt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return $d(t)&&cm(t.arrayValue,this.value)}}class $b extends Qt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&cm(this.value.arrayValue,t)}}class V0 extends Qt{constructor(e,t){super(e,"not-in",t)}matches(e){if(cm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!cm(this.value.arrayValue,t)}}class LA extends Qt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!$d(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>cm(this.value.arrayValue,r))}}class Hb{constructor(e,t=null,r=[],i=[],a=null,l=null,d=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=a,this.startAt=l,this.endAt=d,this.dt=null}}function pm(n,e=null,t=[],r=[],i=null,a=null,l=null){return new Hb(n,e,t,r,i,a,l)}function oc(n){const e=Je(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>fm(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Gn(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bd(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bd(r)).join(",")),e.dt=t}return e.dt}function Vf(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!OA(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Bb(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!P0(n.startAt,e.startAt)&&P0(n.endAt,e.endAt)}function gm(n){return Ye.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function mm(n,e){return n.filters.filter(t=>t instanceof Qt&&t.field.isEqual(e))}function Gb(n,e,t){let r=lm,i=!0;for(const a of mm(n,e)){let l=lm,d=!0;switch(a.op){case"<":case"<=":l=PA(a.value);break;case"==":case"in":case">=":l=a.value;break;case">":l=a.value,d=!1;break;case"!=":case"not-in":l=lm}Ob({value:r,inclusive:i},{value:l,inclusive:d})<0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Ob({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function zb(n,e,t){let r=rc,i=!0;for(const a of mm(n,e)){let l=rc,d=!0;switch(a.op){case">=":case">":l=kA(a.value),d=!1;break;case"==":case"in":case"<=":l=a.value;break;case"<":l=a.value,d=!1;break;case"!=":case"not-in":l=rc}Fb({value:r,inclusive:i},{value:l,inclusive:d})>0&&(r=l,i=d)}if(null!==t)for(let a=0;a<n.orderBy.length;++a)if(n.orderBy[a].field.isEqual(e)){const l=t.position[a];Fb({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class Lu{constructor(e,t=null,r=[],i=[],a=null,l="F",d=null,_=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=a,this.limitType=l,this.startAt=d,this.endAt=_,this.wt=null,this._t=null}}function Wb(n,e,t,r,i,a,l,d){return new Lu(n,e,t,r,i,a,l,d)}function zd(n){return new Lu(n)}function VA(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function jy(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function $y(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function U0(n){return null!==n.collectionGroup}function Uf(n){const e=Je(n);if(null===e.wt){e.wt=[];const t=$y(e),r=jy(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new Lf(t)),e.wt.push(new Lf(Dr.keyField(),"asc"));else{let i=!1;for(const a of e.explicitOrderBy)e.wt.push(a),a.field.isKeyField()&&(i=!0);if(!i){const a=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new Lf(Dr.keyField(),a))}}}return e.wt}function Rs(n){const e=Je(n);if(!e._t)if("F"===e.limitType)e._t=pm(e.path,e.collectionGroup,Uf(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const a of Uf(e))t.push(new Lf(a.field,"desc"===a.dir?"asc":"desc"));const r=e.endAt?new sc(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new sc(e.startAt.position,e.startAt.inclusive):null;e._t=pm(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function B0(n,e){e.getFirstInequalityField(),$y(n);const t=n.filters.concat([e]);return new Lu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Hy(n,e,t){return new Lu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Bf(n,e){return Vf(Rs(n),Rs(e))&&n.limitType===e.limitType}function qb(n){return`${oc(Rs(n))}|lt:${n.limitType}`}function j0(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>Gd(r)).join(", ")}]`),Gn(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Bd(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Bd(r)).join(",")),`Target(${t})`}(Rs(n))}; limitType=${n.limitType})`}function _m(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):Ye.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Uf(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,a,l){const d=Lb(i,a,l);return i.inclusive?d<=0:d<0}(t.startAt,Uf(t),r)||t.endAt&&!function(i,a,l){const d=Lb(i,a,l);return i.inclusive?d>=0:d>0}(t.endAt,Uf(t),r)));var t,r}function Kb(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Zb(n){return(e,t)=>{let r=!1;for(const i of Uf(n)){const a=UA(i,e,t);if(0!==a)return a;r=r||i.field.isKeyField()}return 0}}function UA(n,e,t){const r=n.field.isKeyField()?Ye.comparator(e.key,t.key):function(i,a,l){const d=a.data.field(i),_=l.data.field(i);return null!==d&&null!==_?Ua(d,_):nt()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return nt()}}class Vu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,a]of r)if(this.equalsFn(i,e))return a}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let a=0;a<i.length;a++)if(this.equalsFn(i[a][0],e))return void(i[a]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Ud(this.inner,(t,r)=>{for(const[i,a]of r)e(i,a)})}isEmpty(){return xA(this.inner)}size(){return this.innerSize}}const BA=new Xn(Ye.comparator);function Ms(){return BA}const jf=new Xn(Ye.comparator);function $f(...n){let e=jf;for(const t of n)e=e.insert(t.key,t);return e}function $0(n){let e=jf;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function ta(){return Hf()}function H0(){return Hf()}function Hf(){return new Vu(n=>n.toString(),(n,e)=>n.isEqual(e))}const jA=new Xn(Ye.comparator),$A=new Nn(Ye.comparator);function Wt(...n){let e=$A;for(const t of n)e=e.add(t);return e}const HA=new Nn(jt);function G0(){return HA}function Yb(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Py(e)?"-0":e}}function Qb(n){return{integerValue:""+n}}function Jb(n,e){return b0(e)?Qb(e):Yb(n,e)}class ac{constructor(){this._=void 0}}function GA(n,e,t){return n instanceof Gf?function(r,i){const a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Fy(i)&&(i=Ly(i)),i&&(a.fields.__previous_value__=i),{mapValue:a}}(t,e):n instanceof Uu?zf(n,e):n instanceof Wd?Xb(n,e):function(r,i){const a=na(r,i),l=ym(a)+ym(r.gt);return R0(a)&&R0(r.gt)?Qb(l):Yb(r.serializer,l)}(n,e)}function z0(n,e,t){return n instanceof Uu?zf(n,e):n instanceof Wd?Xb(n,e):t}function na(n,e){return n instanceof Wf?R0(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Gf extends ac{}class Uu extends ac{constructor(e){super(),this.elements=e}}function zf(n,e){const t=vm(e);for(const r of n.elements)t.some(i=>ea(i,r))||t.push(r);return{arrayValue:{values:t}}}class Wd extends ac{constructor(e){super(),this.elements=e}}function Xb(n,e){let t=vm(e);for(const r of n.elements)t=t.filter(i=>!ea(i,r));return{arrayValue:{values:t}}}class Wf extends ac{constructor(e,t){super(),this.serializer=e,this.gt=t}}function ym(n){return Tr(n.integerValue||n.doubleValue)}function vm(n){return $d(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class wm{constructor(e,t){this.field=e,this.transform=t}}class eD{constructor(e,t){this.version=e,this.transformResults=t}}class er{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new er}static exists(e){return new er(void 0,e)}static updateTime(e){return new er(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function qf(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class Em{}function tD(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Kf(n.key,er.none()):new qd(n.key,n.data,er.none());{const t=n.data,r=Mi.empty();let i=new Nn(Dr.comparator);for(let a of e.fields)if(!i.has(a)){let l=t.field(a);null===l&&a.length>1&&(a=a.popLast(),l=t.field(a)),null===l?r.delete(a):r.set(a,l),i=i.add(a)}return new ra(n.key,r,new cs(i.toArray()),er.none())}}function WA(n,e,t){n instanceof qd?function(r,i,a){const l=r.value.clone(),d=nD(r.fieldTransforms,i,a.transformResults);l.setAll(d),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ra?function(r,i,a){if(!qf(r.precondition,i))return void i.convertToUnknownDocument(a.version);const l=nD(r.fieldTransforms,i,a.transformResults),d=i.data;d.setAll(Wy(r)),d.setAll(l),i.convertToFoundDocument(a.version,d).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Gy(n,e,t,r){return n instanceof qd?function(i,a,l,d){if(!qf(i.precondition,a))return l;const _=i.value.clone(),w=rD(i.fieldTransforms,d,a);return _.setAll(w),a.convertToFoundDocument(a.version,_).setHasLocalMutations(),null}(n,e,t,r):n instanceof ra?function(i,a,l,d){if(!qf(i.precondition,a))return l;const _=rD(i.fieldTransforms,d,a),w=a.data;return w.setAll(Wy(i)),w.setAll(_),a.convertToFoundDocument(a.version,w).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(T=>T.field))}(n,e,t,r):(l=t,qf(n.precondition,a=e)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l);var a,l}function W0(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),a=na(r.transform,i||null);null!=a&&(null===t&&(t=Mi.empty()),t.set(r.field,a))}return t||null}function zy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Pf(t,r,(i,a)=>function zA(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Uu&&r instanceof Uu||t instanceof Wd&&r instanceof Wd?Pf(t.elements,r.elements,ea):t instanceof Wf&&r instanceof Wf?ea(t.gt,r.gt):t instanceof Gf&&r instanceof Gf);var t,r}(i,a))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class qd extends Em{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ra extends Em{constructor(e,t,r,i,a=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=a,this.type=1}getFieldMask(){return this.fieldMask}}function Wy(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function nD(n,e,t){const r=new Map;wt(n.length===t.length);for(let i=0;i<t.length;i++){const a=n[i],l=a.transform,d=e.data.field(a.field);r.set(a.field,z0(l,d,t[i]))}return r}function rD(n,e,t){const r=new Map;for(const i of n){const a=i.transform,l=t.data.field(i.field);r.set(i.field,GA(a,l,e))}return r}class Kf extends Em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class q0 extends Em{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class qy{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const a=this.mutations[i];a.key.isEqual(e.key)&&WA(a,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gy(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Gy(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=H0();return this.mutations.forEach(i=>{const a=e.get(i.key),l=a.overlayedDocument;let d=this.applyToLocalView(l,a.mutatedFields);d=t.has(i.key)?null:d;const _=tD(l,d);null!==_&&r.set(i.key,_),l.isValidDocument()||l.convertToNoDocument(Dt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Wt())}isEqual(e){return this.batchId===e.batchId&&Pf(this.mutations,e.mutations,(t,r)=>zy(t,r))&&Pf(this.baseMutations,e.baseMutations,(t,r)=>zy(t,r))}}class Im{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){wt(e.mutations.length===r.length);let i=jA;const a=e.mutations;for(let l=0;l<a.length;l++)i=i.insert(a[l].key,r[l].version);return new Im(e,t,r,i)}}class Ky{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class iD{constructor(e,t){this.count=e,this.unchangedNames=t}}var Pr,un;function K0(n){switch(n){default:return nt();case ce.CANCELLED:case ce.UNKNOWN:case ce.DEADLINE_EXCEEDED:case ce.RESOURCE_EXHAUSTED:case ce.INTERNAL:case ce.UNAVAILABLE:case ce.UNAUTHENTICATED:return!1;case ce.INVALID_ARGUMENT:case ce.NOT_FOUND:case ce.ALREADY_EXISTS:case ce.PERMISSION_DENIED:case ce.FAILED_PRECONDITION:case ce.ABORTED:case ce.OUT_OF_RANGE:case ce.UNIMPLEMENTED:case ce.DATA_LOSS:return!0}}function Z0(n){if(void 0===n)return br("GRPC error has no .code"),ce.UNKNOWN;switch(n){case Pr.OK:return ce.OK;case Pr.CANCELLED:return ce.CANCELLED;case Pr.UNKNOWN:return ce.UNKNOWN;case Pr.DEADLINE_EXCEEDED:return ce.DEADLINE_EXCEEDED;case Pr.RESOURCE_EXHAUSTED:return ce.RESOURCE_EXHAUSTED;case Pr.INTERNAL:return ce.INTERNAL;case Pr.UNAVAILABLE:return ce.UNAVAILABLE;case Pr.UNAUTHENTICATED:return ce.UNAUTHENTICATED;case Pr.INVALID_ARGUMENT:return ce.INVALID_ARGUMENT;case Pr.NOT_FOUND:return ce.NOT_FOUND;case Pr.ALREADY_EXISTS:return ce.ALREADY_EXISTS;case Pr.PERMISSION_DENIED:return ce.PERMISSION_DENIED;case Pr.FAILED_PRECONDITION:return ce.FAILED_PRECONDITION;case Pr.ABORTED:return ce.ABORTED;case Pr.OUT_OF_RANGE:return ce.OUT_OF_RANGE;case Pr.UNIMPLEMENTED:return ce.UNIMPLEMENTED;case Pr.DATA_LOSS:return ce.DATA_LOSS;default:return nt()}}(un=Pr||(Pr={}))[un.OK=0]="OK",un[un.CANCELLED=1]="CANCELLED",un[un.UNKNOWN=2]="UNKNOWN",un[un.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",un[un.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",un[un.NOT_FOUND=5]="NOT_FOUND",un[un.ALREADY_EXISTS=6]="ALREADY_EXISTS",un[un.PERMISSION_DENIED=7]="PERMISSION_DENIED",un[un.UNAUTHENTICATED=16]="UNAUTHENTICATED",un[un.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",un[un.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",un[un.ABORTED=10]="ABORTED",un[un.OUT_OF_RANGE=11]="OUT_OF_RANGE",un[un.UNIMPLEMENTED=12]="UNIMPLEMENTED",un[un.INTERNAL=13]="INTERNAL",un[un.UNAVAILABLE=14]="UNAVAILABLE",un[un.DATA_LOSS=15]="DATA_LOSS";class Y0{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Cm}static getOrCreateInstance(){return null===Cm&&(Cm=new Y0),Cm}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let Cm=null;function sD(){return new TextEncoder}const ds=new La([4294967295,4294967295],0);function Kd(n){const e=sD().encode(n),t=new v0;return t.update(e),new Uint8Array(t.digest())}function oD(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),a=e.getUint32(12,!0);return[new La([t,r],0),new La([i,a],0)]}class Q0{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Zy(`Invalid padding: ${t}`);if(r<0)throw new Zy(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Zy(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Zy(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=La.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(La.fromNumber(r)));return 1===i.compare(ds)&&(i=new La([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Kd(e),[r,i]=oD(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,a=new Uint8Array(Math.ceil(e/8)),l=new Q0(a,i,t);return r.forEach(d=>l.insert(d)),l}insert(e){if(0===this.It)return;const t=Kd(e),[r,i]=oD(t);for(let a=0;a<this.hashCount;a++){const l=this.Et(r,i,a);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Zy extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Yy{constructor(e,t,r,i,a){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=a}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Zf.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Yy(Dt.min(),i,new Xn(jt),Ms(),Wt())}}class Zf{constructor(e,t,r,i,a){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=a}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Zf(r,t,Wt(),Wt(),Wt())}}class bm{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class Yf{constructor(e,t){this.targetId=e,this.Vt=t}}class aD{constructor(e,t,r=ei.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class Qy{constructor(){this.St=0,this.Dt=uD(),this.Ct=ei.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=Wt(),t=Wt(),r=Wt();return this.Dt.forEach((i,a)=>{switch(a){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:nt()}}),new Zf(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=uD()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class KA{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Ms(),this.zt=J0(),this.Wt=new Xn(jt)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:nt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,a=this.se(r);if(a){const l=a.target;if(gm(l))if(0===i){const d=new Ye(l.path);this.Yt(r,d,zn.newNoDocument(d,Dt.min()))}else wt(1===i);else{const d=this.ie(r);if(d!==i){const _=this.re(e,d);0!==_&&(this.ee(r),this.Wt=this.Wt.insert(r,2===_?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Y0.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(w,T,S){var P,U,q,de,fe,Qe;const tt={localCacheCount:T,existenceFilterCount:S.count},Xe=S.unchangedNames;return Xe&&(tt.bloomFilter={applied:0===w,hashCount:null!==(P=Xe?.hashCount)&&void 0!==P?P:0,bitmapLength:null!==(de=null===(q=null===(U=Xe?.bits)||void 0===U?void 0:U.bitmap)||void 0===q?void 0:q.length)&&void 0!==de?de:0,padding:null!==(Qe=null===(fe=Xe?.bits)||void 0===fe?void 0:fe.padding)&&void 0!==Qe?Qe:0}),tt}(_,d,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:a="",padding:l=0},hashCount:d=0}=r;let _,w;try{_=Va(a).toUint8Array()}catch(T){if(T instanceof Ff)return no("Decoding the base64 bloom filter in existence filter failed ("+T.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw T}try{w=new Q0(_,l,d)}catch(T){return no(T instanceof Zy?"BloomFilter error: ":"Applying bloom filter failed: ",T),1}return 0===w.It?1:i!==t-this.oe(e.targetId,w)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(a=>{const l=this.Gt.ue(),d=`projects/${l.projectId}/databases/${l.database}/documents/${a.path.canonicalString()}`;t.vt(d)||(this.Yt(e,a,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((a,l)=>{const d=this.se(l);if(d){if(a.current&&gm(d.target)){const _=new Ye(d.target.path);null!==this.jt.get(_)||this.ae(l,_)||this.Yt(l,_,zn.newNoDocument(_,e))}a.Mt&&(t.set(l,a.Ot()),a.Ft())}});let r=Wt();this.zt.forEach((a,l)=>{let d=!0;l.forEachWhile(_=>{const w=this.se(_);return!w||"TargetPurposeLimboResolution"===w.purpose||(d=!1,!1)}),d&&(r=r.add(a))}),this.jt.forEach((a,l)=>l.setReadTime(e));const i=new Yy(e,t,this.Wt,this.jt,r);return this.jt=Ms(),this.zt=J0(),this.Wt=new Xn(jt),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Qy,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Nn(jt),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Ve("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Qy),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function J0(){return new Xn(Ye.comparator)}function uD(){return new Xn(Ye.comparator)}const ZA={asc:"ASCENDING",desc:"DESCENDING"},YA={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},X0={and:"AND",or:"OR"};class lD{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Jy(n,e){return n.useProto3Json||Gn(e)?e:{value:e}}function Bu(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Xy(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function DP(n,e){return Bu(n,e.toTimestamp())}function Sr(n){return wt(!!n),Dt.fromTimestamp(function(e){const t=nc(e);return new ar(t.seconds,t.nanos)}(n))}function eE(n,e){return(t=n,new an(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function tE(n){const e=an.fromString(n);return wt(ix(e)),e}function Ba(n,e){return eE(n.databaseId,e.path)}function ja(n,e){const t=tE(e);if(t.get(1)!==n.databaseId.projectId)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new Re(ce.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ye(cD(t))}function ev(n,e){return eE(n.databaseId,e)}function tv(n){const e=tE(n);return 4===e.length?an.emptyPath():cD(e)}function nv(n){return new an(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function cD(n){return wt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function QA(n,e,t){return{name:Ba(n,e),fields:t.value.mapValue.fields}}function dD(n,e,t){const r=ja(n,e.name),i=Sr(e.updateTime),a=e.createTime?Sr(e.createTime):Dt.min(),l=new Mi({mapValue:{fields:e.fields}}),d=zn.newFoundDocument(r,i,a,l);return t&&d.setHasCommittedMutations(),t?d.setHasCommittedMutations():d}function Qf(n,e){let t;if(e instanceof qd)t={update:QA(n,e.key,e.value)};else if(e instanceof Kf)t={delete:Ba(n,e.key)};else if(e instanceof ra)t={update:QA(n,e.key,e.data),updateMask:rx(e.fieldMask)};else{if(!(e instanceof q0))return nt();t={verify:Ba(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,a){const l=a.transform;if(l instanceof Gf)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Uu)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Wd)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Wf)return{fieldPath:a.field.canonicalString(),increment:l.gt};throw nt()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:DP(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:nt()),t;var i}function rv(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?er.updateTime(Sr(i.updateTime)):void 0!==i.exists?er.exists(i.exists):er.none():er.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(a,l){let d=null;"setToServerValue"in l?(wt("REQUEST_TIME"===l.setToServerValue),d=new Gf):"appendMissingElements"in l?d=new Uu(l.appendMissingElements.values||[]):"removeAllFromArray"in l?d=new Wd(l.removeAllFromArray.values||[]):"increment"in l?d=new Wf(a,l.increment):nt();const _=Dr.fromServerFormat(l.fieldPath);return new wm(_,d)}(n,i)):[];var i;if(e.update){const i=ja(n,e.update.name),a=new Mi({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new cs((e.updateMask.fieldPaths||[]).map(w=>Dr.fromServerFormat(w)));return new ra(i,a,l,t,r)}return new qd(i,a,t,r)}if(e.delete){const i=ja(n,e.delete);return new Kf(i,t)}if(e.verify){const i=ja(n,e.verify);return new q0(i,t)}return nt()}function nE(n,e){return{documents:[ev(n,e.path)]}}function iv(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=ev(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=ev(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(_){if(0!==_.length)return gD(En.create(_,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const a=function(_){if(0!==_.length)return _.map(w=>{return{field:ju((T=w).field),direction:nx(T.dir)};var T})}(e.orderBy);a&&(t.structuredQuery.orderBy=a);const l=Jy(n,e.limit);var d,_;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(d=e.startAt).inclusive,values:d.position}),e.endAt&&(t.structuredQuery.endAt={before:!(_=e.endAt).inclusive,values:_.position}),t}function hD(n){let e=tv(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){wt(1===r);const T=t.from[0];T.allDescendants?i=T.collectionId:e=e.child(T.collectionId)}let a=[];t.where&&(a=function(T){const S=rE(T);return S instanceof En&&k0(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(T=>{return new Lf(Zd((S=T).field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let d=null;t.limit&&(d=function(T){let S;return S="object"==typeof T?T.value:T,Gn(S)?null:S}(t.limit));let _=null;var T;t.startAt&&(_=new sc((T=t.startAt).values||[],!!T.before));let w=null;return t.endAt&&(w=function(T){return new sc(T.values||[],!T.before)}(t.endAt)),Wb(e,i,l,a,d,"F",_,w)}function rE(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Zd(e.unaryFilter.field);return Qt.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Zd(e.unaryFilter.field);return Qt.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Zd(e.unaryFilter.field);return Qt.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=Zd(e.unaryFilter.field);return Qt.create(a,"!=",{nullValue:"NULL_VALUE"});default:return nt()}}(n):void 0!==n.fieldFilter?Qt.create(Zd((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nt()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return En.create(e.compositeFilter.filters.map(t=>rE(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return nt()}}(e.compositeFilter.op))}(n):nt();var e}function nx(n){return ZA[n]}function fD(n){return YA[n]}function pD(n){return X0[n]}function ju(n){return{fieldPath:n.canonicalString()}}function Zd(n){return Dr.fromServerFormat(n.fieldPath)}function gD(n){return n instanceof Qt?function(e){if("=="===e.op){if(M0(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NAN"}};if(Pb(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(M0(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NOT_NAN"}};if(Pb(e.value))return{unaryFilter:{field:ju(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:ju(e.field),op:fD(e.op),value:e.value}}}(n):n instanceof En?function(e){const t=e.getFilters().map(r=>gD(r));return 1===t.length?t[0]:{compositeFilter:{op:pD(e.op),filters:t}}}(n):nt()}function rx(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function ix(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class $a{constructor(e,t,r,i,a=Dt.min(),l=Dt.min(),d=ei.EMPTY_BYTE_STRING,_=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=a,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=d,this.expectedCount=_}withSequenceNumber(e){return new $a(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new $a(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class sx{constructor(e){this.fe=e}}function ox(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:iE(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ba(i=n.fe,(a=e).key),fields:a.data.value.mapValue.fields,updateTime:Bu(i,a.version.toTimestamp()),createTime:Bu(i,a.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:Jf(e.version)};else{if(!e.isUnknownDocument())return nt();r.unknownDocument={path:t.path.toArray(),version:Jf(e.version)}}var i,a;return r}function iE(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function Jf(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Xf(n){const e=new ar(n.seconds,n.nanoseconds);return Dt.fromTimestamp(e)}function ep(n,e){const t=(e.baseMutations||[]).map(a=>rv(n.fe,a));for(let a=0;a<e.mutations.length-1;++a){const l=e.mutations[a];a+1<e.mutations.length&&void 0!==e.mutations[a+1].transform&&(l.updateTransforms=e.mutations[a+1].transform.fieldTransforms,e.mutations.splice(a+1,1),++a)}const r=e.mutations.map(a=>rv(n.fe,a)),i=ar.fromMillis(e.localWriteTimeMs);return new qy(e.batchId,i,t,r)}function sv(n){const e=Xf(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Xf(n.lastLimboFreeSnapshotVersion):Dt.min();let r;var i;return void 0!==n.query.documents?(wt(1===(i=n.query).documents.length),r=Rs(zd(tv(i.documents[0])))):r=Rs(hD(n.query)),new $a(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,ei.fromBase64String(n.resumeToken))}function Dm(n,e){const t=Jf(e.snapshotVersion),r=Jf(e.lastLimboFreeSnapshotVersion);let i;i=gm(e.target)?nE(n.fe,e.target):iv(n.fe,e.target);const a=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:oc(e.target),readTime:t,resumeToken:a,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function mD(n){const e=hD({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Hy(e,e.limit,"L"):e}function ov(n,e){return new Ky(e.largestBatchId,rv(n.fe,e.overlayMutation))}function Tm(n,e){const t=e.path.lastSegment();return[n,Ri(e.path.popLast()),t]}function sE(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:Jf(r.readTime),documentKey:Ri(r.documentKey.path),largestBatchId:r.largestBatchId}}class _D{getBundleMetadata(e,t){return ax(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Xf(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return ax(e).put({bundleId:(r=t).id,createTime:Jf(Sr(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return av(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:mD(i.bundledQuery),readTime:Xf(i.readTime)};var i})}saveNamedQuery(e,t){return av(e).put({name:(r=t).name,readTime:Jf(Sr(r.readTime)),bundledQuery:r.bundledQuery});var r}}function ax(n){return pi(n,"bundles")}function av(n){return pi(n,"namedQueries")}class Sm{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sm(e,t.uid||"")}getOverlay(e,t){return Am(e).get(Tm(this.userId,t)).next(r=>r?ov(this.serializer,r):null)}getOverlays(e,t){const r=ta();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((a,l)=>{const d=new Ky(t,l);i.push(this.we(e,d))}),se.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ri(l.getCollectionPath())));const a=[];return i.forEach(l=>{const d=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);a.push(Am(e).J("collectionPathOverlayIndex",d))}),se.waitFor(a)}getOverlaysForCollection(e,t,r){const i=ta(),a=Ri(t),l=IDBKeyRange.bound([this.userId,a,r],[this.userId,a,Number.POSITIVE_INFINITY],!0);return Am(e).j("collectionPathOverlayIndex",l).next(d=>{for(const _ of d){const w=ov(this.serializer,_);i.set(w.getKey(),w)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const a=ta();let l;const d=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Am(e).X({index:"collectionGroupOverlayIndex",range:d},(_,w,T)=>{const S=ov(this.serializer,w);a.size()<i||S.largestBatchId===l?(a.set(S.getKey(),S),l=S.largestBatchId):T.done()}).next(()=>a)}we(e,t){return Am(e).put(function(r,i,a){const[l,d,_]=Tm(i,a.mutation.key);return{userId:i,collectionPath:d,documentId:_,collectionGroup:a.mutation.key.getCollectionGroup(),largestBatchId:a.largestBatchId,overlayMutation:Qf(r.fe,a.mutation)}}(this.serializer,this.userId,t))}}function Am(n){return pi(n,"documentOverlays")}class uc{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(Tr(e.integerValue));else if("doubleValue"in e){const r=Tr(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Py(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(Va(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?kb(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):nt()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),Ye.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function SP(n){if(0===n)return 8;let e=0;return n>>4==0&&(e+=4,n<<=4),n>>6==0&&(e+=2,n<<=2),n>>7==0&&(e+=1),e}function ux(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const a=SP(255&t[i]);if(r+=a,8!==a)break}return r}(n);return Math.ceil(e/8)}uc.Ve=new uc;class lx{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=ux(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=ux(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const a=new DataView(new ArrayBuffer(8));return a.setFloat64(0,i,!1),new Uint8Array(a.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class cx{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class uv{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class xm{constructor(){this.je=new lx,this.ze=new cx(this.je),this.We=new uv(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class tp{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new tp(this.indexId,this.documentKey,this.arrayValue,r)}}function Yd(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=dx(n.arrayValue,e.arrayValue),0!==t?t:(t=dx(n.directionalValue,e.directionalValue),0!==t?t:Ye.comparator(n.documentKey,e.documentKey)))}function dx(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hx{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){wt(e.collectionGroup===this.collectionId);const t=Ry(e);if(void 0!==t&&!this.en(t))return!1;const r=ec(e);let i=new Set,a=0,l=0;for(;a<r.length&&this.en(r[a]);++a)i=i.add(r[a].fieldPath.canonicalString());if(a===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const d=r[a];if(!this.nn(this.Ze,d)||!this.sn(this.Ye[l++],d))return!1}++a}for(;a<r.length;++a){const d=r[a];if(l>=this.Ye.length||!this.sn(this.Ye[l++],d))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yD(n){var e,t;if(wt(n instanceof Qt||n instanceof En),n instanceof Qt){if(n instanceof $b){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(a=>Qt.create(n.field,"==",a)))||[];return En.create(i,"or")}return n}const r=n.filters.map(i=>yD(i));return En.create(r,n.op)}function fx(n){if(0===n.getFilters().length)return[];const e=lv(yD(n));return wt(aE(e)),vD(e)||oE(e)?[e]:e.getFilters()}function vD(n){return n instanceof Qt}function oE(n){return n instanceof En&&k0(n)}function aE(n){return vD(n)||oE(n)||function(e){if(e instanceof En&&hm(e)){for(const t of e.getFilters())if(!vD(t)&&!oE(t))return!1;return!0}return!1}(n)}function lv(n){if(wt(n instanceof Qt||n instanceof En),n instanceof Qt)return n;if(1===n.filters.length)return lv(n.filters[0]);const e=n.filters.map(r=>lv(r));let t=En.create(e,n.op);return t=cv(t),aE(t)?t:(wt(t instanceof En),wt(Hd(t)),wt(t.filters.length>1),t.filters.reduce((r,i)=>wD(r,i)))}function wD(n,e){let t;return wt(n instanceof Qt||n instanceof En),wt(e instanceof Qt||e instanceof En),t=n instanceof Qt?e instanceof Qt?En.create([n,e],"and"):Do(n,e):e instanceof Qt?Do(e,n):function(r,i){if(wt(r.filters.length>0&&i.filters.length>0),Hd(r)&&Hd(i))return O0(r,i.getFilters());const a=hm(r)?r:i,l=hm(r)?i:r,d=a.filters.map(_=>wD(_,l));return En.create(d,"or")}(n,e),cv(t)}function Do(n,e){if(Hd(e))return O0(e,n.getFilters());{const t=e.filters.map(r=>wD(n,r));return En.create(t,"or")}}function cv(n){if(wt(n instanceof Qt||n instanceof En),n instanceof Qt)return n;const e=n.getFilters();if(1===e.length)return cv(e[0]);if(Ub(n))return n;const t=e.map(i=>cv(i)),r=[];return t.forEach(i=>{i instanceof Qt?r.push(i):i instanceof En&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:En.create(r,n.op)}class uE{constructor(){this.rn=new lE}addToCollectionParentIndex(e,t){return this.rn.add(t),se.resolve()}getCollectionParents(e,t){return se.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return se.resolve()}deleteFieldIndex(e,t){return se.resolve()}getDocumentsMatchingTarget(e,t){return se.resolve(null)}getIndexType(e,t){return se.resolve(0)}getFieldIndexes(e,t){return se.resolve([])}getNextCollectionGroupToUpdate(e){return se.resolve(null)}getMinOffset(e,t){return se.resolve(xs.min())}getMinOffsetFromCollectionGroup(e,t){return se.resolve(xs.min())}updateCollectionGroup(e,t,r){return se.resolve()}updateIndexEntries(e,t){return se.resolve()}}class lE{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Nn(an.comparator),a=!i.has(r);return this.index[t]=i.add(r),a}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Nn(an.comparator)).toArray()}}const hs=new Uint8Array(0);class px{constructor(e,t){this.user=e,this.databaseId=t,this.on=new lE,this.un=new Vu(r=>oc(r),(r,i)=>Vf(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const a={collectionId:r,parent:Ri(i)};return dv(e).put(a)}return se.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[mb(t),""],!1,!0);return dv(e).j(i).next(a=>{for(const l of a){if(l.collectionId!==t)break;r.push(Xo(l.parent))}return r})}addFieldIndex(e,t){const r=hv(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(d=>[d.fieldPath.canonicalString(),d.kind])};var l;delete i.indexId;const a=r.add(i);if(t.indexState){const l=Qd(e);return a.next(d=>{l.put(sE(d,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return a.next()}deleteFieldIndex(e,t){const r=hv(e),i=Qd(e),a=Rm(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>a.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Rm(e);let i=!0;const a=new Map;return se.forEach(this.cn(t),l=>this.an(e,l).next(d=>{i&&(i=!!d),a.set(l,d)})).next(()=>{if(i){let l=Wt();const d=[];return se.forEach(a,(_,w)=>{var T;Ve("IndexedDbIndexManager",`Using index ${T=_,`id=${T.indexId}|cg=${T.collectionGroup}|f=${T.fields.map(Xe=>`${Xe.fieldPath}:${Xe.kind}`).join(",")}`} to execute ${oc(t)}`);const S=function(Xe,mt){const $t=Ry(mt);if(void 0===$t)return null;for(const Zt of mm(Xe,$t.fieldPath))switch(Zt.op){case"array-contains-any":return Zt.value.arrayValue.values||[];case"array-contains":return[Zt.value]}return null}(w,_),P=function(Xe,mt){const $t=new Map;for(const Zt of ec(mt))for(const mi of mm(Xe,Zt.fieldPath))switch(mi.op){case"==":case"in":$t.set(Zt.fieldPath.canonicalString(),mi.value);break;case"not-in":case"!=":return $t.set(Zt.fieldPath.canonicalString(),mi.value),Array.from($t.values())}return null}(w,_),U=function(Xe,mt){const $t=[];let Zt=!0;for(const mi of ec(mt)){const aa=0===mi.kind?Gb(Xe,mi.fieldPath,Xe.startAt):zb(Xe,mi.fieldPath,Xe.startAt);$t.push(aa.value),Zt&&(Zt=aa.inclusive)}return new sc($t,Zt)}(w,_),q=function(Xe,mt){const $t=[];let Zt=!0;for(const mi of ec(mt)){const aa=0===mi.kind?zb(Xe,mi.fieldPath,Xe.endAt):Gb(Xe,mi.fieldPath,Xe.endAt);$t.push(aa.value),Zt&&(Zt=aa.inclusive)}return new sc($t,Zt)}(w,_),de=this.hn(_,w,U),fe=this.hn(_,w,q),Qe=this.ln(_,w,P),tt=this.fn(_.indexId,S,de,U.inclusive,fe,q.inclusive,Qe);return se.forEach(tt,Xe=>r.H(Xe,t.limit).next(mt=>{mt.forEach($t=>{const Zt=Ye.fromSegments($t.documentKey);l.has(Zt)||(l=l.add(Zt),d.push(Zt))})}))}).next(()=>d)}return se.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:fx(En.create(e.filters,"and")).map(r=>pm(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,a,l,d){const _=(null!=t?t.length:1)*Math.max(r.length,a.length),w=_/(null!=t?t.length:1),T=[];for(let S=0;S<_;++S){const P=t?this.dn(t[S/w]):hs,U=this.wn(e,P,r[S%w],i),q=this._n(e,P,a[S%w],l),de=d.map(fe=>this.wn(e,P,fe,!0));T.push(...this.createRange(U,q,de))}return T}wn(e,t,r,i){const a=new tp(e,Ye.empty(),t,r);return i?a:a.Je()}_n(e,t,r,i){const a=new tp(e,Ye.empty(),t,r);return i?a.Je():a}an(e,t){const r=new hx(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(a=>{let l=null;for(const d of a)r.tn(d)&&(!l||d.fields.length>l.fields.length)&&(l=d);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return se.forEach(i,a=>this.an(e,a).next(l=>{l?0!==r&&l.fields.length<function(d){let _=new Nn(Dr.comparator),w=!1;for(const T of d.filters)for(const S of T.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?w=!0:_=_.add(S.field));for(const T of d.orderBy)T.field.isKeyField()||(_=_.add(T.field));return _.size+(w?1:0)}(a)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new xm;for(const i of ec(e)){const a=t.data.field(i.fieldPath);if(null==a)return null;const l=r.He(i.kind);uc.Ve._e(a,l)}return r.Qe()}dn(e){const t=new xm;return uc.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new xm;return uc.Ve._e(jd(this.databaseId,t),r.He(function(i){const a=ec(i);return 0===a.length?0:a[a.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new xm);let a=0;for(const l of ec(e)){const d=r[a++];for(const _ of i)if(this.yn(t,l.fieldPath)&&$d(d))i=this.pn(i,l,d);else{const w=_.He(l.kind);uc.Ve._e(d,w)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],a=[];for(const l of r.arrayValue.values||[])for(const d of i){const _=new xm;_.seed(d.Qe()),uc.Ve._e(l,_.He(t.kind)),a.push(_)}return a}yn(e,t){return!!e.filters.find(r=>r instanceof Qt&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=hv(e),i=Qd(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(a=>{const l=[];return se.forEach(a,d=>i.get([d.indexId,this.uid]).next(_=>{l.push(function(w,T){const S=T?new kf(T.sequenceNumber,new xs(Xf(T.readTime),new Ye(Xo(T.documentKey)),T.largestBatchId)):kf.empty(),P=w.fields.map(([U,q])=>new im(Dr.fromServerFormat(U),q));return new rm(w.indexId,w.collectionGroup,P,S)}(d,_))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const a=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==a?a:jt(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=hv(e),a=Qd(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(d=>se.forEach(d,_=>a.put(sE(_.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return se.forEach(t,(i,a)=>{const l=r.get(i.collectionGroup);return(l?se.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(d=>(r.set(i.collectionGroup,d),se.forEach(d,_=>this.En(e,i,_).next(w=>{const T=this.An(a,_);return w.isEqual(T)?se.resolve():this.vn(e,a,_,w,T)}))))})}Rn(e,t,r,i){return Rm(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Rm(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Rm(e);let a=new Nn(Yd);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,d)=>{a=a.add(new tp(r.indexId,t,d.arrayValue,d.directionalValue))}).next(()=>a)}An(e,t){let r=new Nn(Yd);const i=this.mn(t,e);if(null==i)return r;const a=Ry(t);if(null!=a){const l=e.data.field(a.fieldPath);if($d(l))for(const d of l.arrayValue.values||[])r=r.add(new tp(t.indexId,e.key,this.dn(d),i))}else r=r.add(new tp(t.indexId,e.key,hs,i));return r}vn(e,t,r,i,a){Ve("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(d,_,w,T,S){const P=d.getIterator(),U=_.getIterator();let q=Of(P),de=Of(U);for(;q||de;){let fe=!1,Qe=!1;if(q&&de){const tt=w(q,de);tt<0?Qe=!0:tt>0&&(fe=!0)}else null!=q?Qe=!0:fe=!0;fe?(T(de),de=Of(U)):Qe?(S(q),q=Of(P)):(q=Of(P),de=Of(U))}}(i,a,Yd,d=>{l.push(this.Rn(e,t,r,d))},d=>{l.push(this.Pn(e,t,r,d))}),se.waitFor(l)}Tn(e){let t=1;return Qd(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,a)=>{a.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,d)=>Yd(l,d)).filter((l,d,_)=>!d||0!==Yd(l,_[d-1]));const i=[];i.push(e);for(const l of r){const d=Yd(l,e),_=Yd(l,t);if(0===d)i[0]=e.Je();else if(d>0&&_<0)i.push(l),i.push(l.Je());else if(_>0)break}i.push(t);const a=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];a.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,hs,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,hs,[]]))}return a}bn(e,t){return Yd(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(cE)}getMinOffset(e,t){return se.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||nt())).next(cE)}}function dv(n){return pi(n,"collectionParents")}function Rm(n){return pi(n,"indexEntries")}function hv(n){return pi(n,"indexConfiguration")}function Qd(n){return pi(n,"indexState")}function cE(n){wt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;ku(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new xs(e.readTime,e.documentKey,t)}const dE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Gi{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Gi(e,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function hE(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),a=[],l=IDBKeyRange.only(t.batchId);let d=0;const _=r.X({range:l},(T,S,P)=>(d++,P.delete()));a.push(_.next(()=>{wt(1===d)}));const w=[];for(const T of t.mutations){const S=bb(e,T.key.path,t.batchId);a.push(i.delete(S)),w.push(T.key)}return se.waitFor(a).next(()=>w)}function Mm(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw nt();e=n.noDocument}return JSON.stringify(e).length}Gi.DEFAULT_COLLECTION_PERCENTILE=10,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Gi.DEFAULT=new Gi(41943040,Gi.DEFAULT_COLLECTION_PERCENTILE,Gi.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Gi.DISABLED=new Gi(-1,0,0);class fv{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){wt(""!==e.uid);const a=e.isAuthenticated()?e.uid:"";return new fv(a,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return lc(e).X({index:"userMutationsIndex",range:r},(i,a,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const a=cc(e),l=lc(e);return l.add({}).next(d=>{wt("number"==typeof d);const _=new qy(d,t,r,i),w=function(P,U,q){const de=q.baseMutations.map(Qe=>Qf(P.fe,Qe)),fe=q.mutations.map(Qe=>Qf(P.fe,Qe));return{userId:U,batchId:q.batchId,localWriteTimeMs:q.localWriteTime.toMillis(),baseMutations:de,mutations:fe}}(this.serializer,this.userId,_),T=[];let S=new Nn((P,U)=>jt(P.canonicalString(),U.canonicalString()));for(const P of i){const U=bb(this.userId,P.key.path,d);S=S.add(P.key.path.popLast()),T.push(l.put(w)),T.push(a.put(U,wA))}return S.forEach(P=>{T.push(this.indexManager.addToCollectionParentIndex(e,P))}),e.addOnCommittedListener(()=>{this.Vn[d]=_.keys()}),se.waitFor(T).next(()=>_)})}lookupMutationBatch(e,t){return lc(e).get(t).next(r=>r?(wt(r.userId===this.userId),ep(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?se.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let a=null;return lc(e).X({index:"userMutationsIndex",range:i},(l,d,_)=>{d.userId===this.userId&&(wt(d.batchId>=r),a=ep(this.serializer,d)),_.done()}).next(()=>a)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return lc(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,a,l)=>{r=a.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return lc(e).j("userMutationsIndex",t).next(r=>r.map(i=>ep(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=sm(this.userId,t.path),i=IDBKeyRange.lowerBound(r),a=[];return cc(e).X({range:i},(l,d,_)=>{const[w,T,S]=l,P=Xo(T);if(w===this.userId&&t.path.isEqual(P))return lc(e).get(S).next(U=>{if(!U)throw nt();wt(U.userId===this.userId),a.push(ep(this.serializer,U))});_.done()}).next(()=>a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(jt);const i=[];return t.forEach(a=>{const l=sm(this.userId,a.path),d=IDBKeyRange.lowerBound(l),_=cc(e).X({range:d},(w,T,S)=>{const[P,U,q]=w,de=Xo(U);P===this.userId&&a.path.isEqual(de)?r=r.add(q):S.done()});i.push(_)}),se.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,a=sm(this.userId,r),l=IDBKeyRange.lowerBound(a);let d=new Nn(jt);return cc(e).X({range:l},(_,w,T)=>{const[S,P,U]=_,q=Xo(P);S===this.userId&&r.isPrefixOf(q)?q.length===i&&(d=d.add(U)):T.done()}).next(()=>this.Dn(e,d))}Dn(e,t){const r=[],i=[];return t.forEach(a=>{i.push(lc(e).get(a).next(l=>{if(null===l)throw nt();wt(l.userId===this.userId),r.push(ep(this.serializer,l))}))}),se.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return hE(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),se.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return se.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return cc(e).X({range:r},(a,l,d)=>{if(a[0]===this.userId){const _=Xo(a[1]);i.push(_)}else d.done()}).next(()=>{wt(0===i.length)})})}containsKey(e,t){return fE(e,this.userId,t)}xn(e){return $u(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function fE(n,e,t){const r=sm(e,t.path),i=r[1],a=IDBKeyRange.lowerBound(r);let l=!1;return cc(n).X({range:a,Y:!0},(d,_,w)=>{const[T,S,P]=d;T===e&&S===i&&(l=!0),w.done()}).next(()=>l)}function lc(n){return pi(n,"mutations")}function cc(n){return pi(n,"documentMutations")}function $u(n){return pi(n,"mutationQueues")}class dc{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new dc(0)}static Mn(){return new dc(-1)}}class pE{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new dc(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Dt.fromTimestamp(new ar(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Ns(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(wt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const a=[];return Ns(e).X((l,d)=>{const _=sv(d);_.sequenceNumber<=t&&null===r.get(_.targetId)&&(i++,a.push(this.removeTargetData(e,_)))}).next(()=>se.waitFor(a)).next(()=>i)}forEachTarget(e,t){return Ns(e).X((r,i)=>{const a=sv(i);t(a)})}$n(e){return ED(e).get("targetGlobalKey").next(t=>(wt(null!==t),t))}On(e,t){return ED(e).put("targetGlobalKey",t)}Fn(e,t){return Ns(e).put(Dm(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=oc(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let a=null;return Ns(e).X({range:i,index:"queryTargetsIndex"},(l,d,_)=>{const w=sv(d);Vf(t,w.target)&&(a=w,_.done())}).next(()=>a)}addMatchingKeys(e,t,r){const i=[],a=Jd(e);return t.forEach(l=>{const d=Ri(l.path);i.push(a.put({targetId:r,path:d})),i.push(this.referenceDelegate.addReference(e,r,l))}),se.waitFor(i)}removeMatchingKeys(e,t,r){const i=Jd(e);return se.forEach(t,a=>{const l=Ri(a.path);return se.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,a)])})}removeMatchingKeysForTargetId(e,t){const r=Jd(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Jd(e);let a=Wt();return i.X({range:r,Y:!0},(l,d,_)=>{const w=Xo(l[1]),T=new Ye(w);a=a.add(T)}).next(()=>a)}containsKey(e,t){const r=Ri(t.path),i=IDBKeyRange.bound([r],[mb(r)],!1,!0);let a=0;return Jd(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,d],_,w)=>{0!==l&&(a++,w.done())}).next(()=>a>0)}le(e,t){return Ns(e).get(t).next(r=>r?sv(r):null)}}function Ns(n){return pi(n,"targets")}function ED(n){return pi(n,"targetGlobal")}function Jd(n){return pi(n,"targetDocuments")}function ID([n,e],[t,r]){const i=jt(n,t);return 0===i?jt(e,r):i}class gx{constructor(e){this.Ln=e,this.buffer=new Nn(ID),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();ID(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class CD{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Ve("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,me.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Tt(r)?Ve("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield ro(r)}yield t.Qn(3e5)}))}}class mx{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return se.resolve(Hi.ct);const r=new gx(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector","Garbage collection skipped; disabled"),se.resolve(dE)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(Ve("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),dE):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,a,l,d,_,w;const T=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(Ve("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,d=Date.now(),this.removeTargets(e,r,t))).next(S=>(a=S,_=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(w=Date.now(),Ay()<=Aa.in.DEBUG&&Ve("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-T}ms\n\tDetermined least recently used ${i} in `+(d-l)+`ms\n\tRemoved ${a} targets in `+(_-d)+`ms\n\tRemoved ${S} documents in `+(w-_)+`ms\nTotal Duration: ${w-T}ms`),se.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:a,documentsRemoved:S})))}}class AP{constructor(e,t){this.db=e,this.garbageCollector=function gE(n,e){return new mx(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return Nm(e,r)}removeReference(e,t,r){return Nm(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return Nm(e,t)}Xn(e,t){return function(r,i){let a=!1;return $u(r).Z(l=>fE(r,l,i).next(d=>(d&&(a=!0),se.resolve(!d)))).next(()=>a)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let a=0;return this.Yn(e,(l,d)=>{if(d<=t){const _=this.Xn(e,l).next(w=>{if(!w)return a++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Dt.min()),Jd(e).delete([0,Ri(l.path)])))});i.push(_)}}).next(()=>se.waitFor(i)).next(()=>r.apply(e)).next(()=>a)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return Nm(e,t)}Yn(e,t){const r=Jd(e);let i,a=Hi.ct;return r.X({index:"documentTargetsIndex"},([l,d],{path:_,sequenceNumber:w})=>{0===l?(a!==Hi.ct&&t(new Ye(Xo(i)),a),a=w,i=_):a=Hi.ct}).next(()=>{a!==Hi.ct&&t(new Ye(Xo(i)),a)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Nm(n,e){return Jd(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ri(e.path),sequenceNumber:r}));var r}class bD{constructor(){this.changes=new Vu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?se.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class DD{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return hc(e).put(r)}removeEntry(e,t,r){return hc(e).delete(function(i,a){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],iE(a),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=zn.newInvalidDocument(t);return hc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(np(t))},(i,a)=>{r=this.ts(t,a)}).next(()=>r)}es(e,t){let r={size:0,document:zn.newInvalidDocument(t)};return hc(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(np(t))},(i,a)=>{r={document:this.ts(t,a),size:Mm(a)}}).next(()=>r)}getEntries(e,t){let r=Ms();return this.ns(e,t,(i,a)=>{const l=this.ts(i,a);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Ms(),i=new Xn(Ye.comparator);return this.ns(e,t,(a,l)=>{const d=this.ts(a,l);r=r.insert(a,d),i=i.insert(a,Mm(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return se.resolve();let i=new Nn(vE);t.forEach(_=>i=i.add(_));const a=IDBKeyRange.bound(np(i.first()),np(i.last())),l=i.getIterator();let d=l.getNext();return hc(e).X({index:"documentKeyIndex",range:a},(_,w,T)=>{const S=Ye.fromSegments([...w.prefixPath,w.collectionGroup,w.documentId]);for(;d&&vE(d,S)<0;)r(d,null),d=l.getNext();d&&d.isEqual(S)&&(r(d,w),d=l.hasNext()?l.getNext():null),d?T.G(np(d)):T.done()}).next(()=>{for(;d;)r(d,null),d=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const a=t.path,l=[a.popLast().toArray(),a.lastSegment(),iE(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],d=[a.popLast().toArray(),a.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return hc(e).j(IDBKeyRange.bound(l,d,!0)).next(_=>{let w=Ms();for(const T of _){const S=this.ts(Ye.fromSegments(T.prefixPath.concat(T.collectionGroup,T.documentId)),T);S.isFoundDocument()&&(_m(t,S)||i.has(S.key))&&(w=w.insert(S.key,S))}return w})}getAllFromCollectionGroup(e,t,r,i){let a=Ms();const l=yE(t,r),d=yE(t,xs.max());return hc(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,d,!0)},(_,w,T)=>{const S=this.ts(Ye.fromSegments(w.prefixPath.concat(w.collectionGroup,w.documentId)),w);a=a.insert(S.key,S),a.size===i&&T.done()}).next(()=>a)}newChangeBuffer(e){return new mE(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return _E(e).get("remoteDocumentGlobalKey").next(t=>(wt(!!t),t))}Zn(e,t){return _E(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function TP(n,e){let t;if(e.document)t=dD(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=Ye.fromSegments(e.noDocument.path),i=Xf(e.noDocument.readTime);t=zn.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return nt();{const r=Ye.fromSegments(e.unknownDocument.path),i=Xf(e.unknownDocument.version);t=zn.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new ar(r[0],r[1]);return Dt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Dt.min()))return r}return zn.newInvalidDocument(e)}}function _x(n){return new DD(n)}class mE extends bD{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Vu(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Nn((a,l)=>jt(a.canonicalString(),l.canonicalString()));return this.changes.forEach((a,l)=>{const d=this.us.get(a);if(t.push(this.os.removeEntry(e,a,d.readTime)),l.isValidDocument()){const _=ox(this.os.serializer,l);i=i.add(a.path.popLast()),r+=Mm(_)-d.size,t.push(this.os.addEntry(e,a,_))}else if(r-=d.size,this.trackRemovals){const _=ox(this.os.serializer,l.convertToNoDocument(Dt.min()));t.push(this.os.addEntry(e,a,_))}}),i.forEach(a=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,a))}),t.push(this.os.updateMetadata(e,r)),se.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((a,l)=>{this.us.set(a,{size:l,readTime:r.get(a).readTime})}),r))}}function _E(n){return pi(n,"remoteDocumentGlobal")}function hc(n){return pi(n,"remoteDocumentsV14")}function np(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function yE(n,e){const t=e.documentKey.path.toArray();return[n,iE(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function vE(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let a=0;a<t.length-2&&a<r.length-2;++a)if(i=jt(t[a],r[a]),i)return i;return i=jt(t.length,r.length),i||(i=jt(t[t.length-2],r[r.length-2]),i||jt(t[t.length-1],r[r.length-1]))}class pv{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Pm{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Gy(r.mutation,i,cs.empty(),ar.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Wt()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Wt()){const i=ta();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(a=>{let l=$f();return a.forEach((d,_)=>{l=l.insert(d,_.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=ta();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Wt()))}populateOverlays(e,t,r){const i=[];return r.forEach(a=>{t.has(a)||i.push(a)}),this.documentOverlayCache.getOverlays(e,i).next(a=>{a.forEach((l,d)=>{t.set(l,d)})})}computeViews(e,t,r,i){let a=Ms();const l=Hf(),d=Hf();return t.forEach((_,w)=>{const T=r.get(w.key);i.has(w.key)&&(void 0===T||T.mutation instanceof ra)?a=a.insert(w.key,w):void 0!==T?(l.set(w.key,T.mutation.getFieldMask()),Gy(T.mutation,w,T.mutation.getFieldMask(),ar.now())):l.set(w.key,cs.empty())}),this.recalculateAndSaveOverlays(e,a).next(_=>(_.forEach((w,T)=>l.set(w,T)),t.forEach((w,T)=>{var S;return d.set(w,new pv(T,null!==(S=l.get(w))&&void 0!==S?S:null))}),d))}recalculateAndSaveOverlays(e,t){const r=Hf();let i=new Xn((l,d)=>l-d),a=Wt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const d of l)d.keys().forEach(_=>{const w=t.get(_);if(null===w)return;let T=r.get(_)||cs.empty();T=d.applyToLocalView(w,T),r.set(_,T);const S=(i.get(d.batchId)||Wt()).add(_);i=i.insert(d.batchId,S)})}).next(()=>{const l=[],d=i.getReverseIterator();for(;d.hasNext();){const _=d.getNext(),w=_.key,T=_.value,S=H0();T.forEach(P=>{if(!a.has(P)){const U=tD(t.get(P),r.get(P));null!==U&&S.set(P,U),a=a.add(P)}}),l.push(this.documentOverlayCache.saveOverlays(e,w,S))}return se.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return Ye.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):U0(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(a=>{const l=i-a.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-a.size):se.resolve(ta());let d=-1,_=a;return l.next(w=>se.forEach(w,(T,S)=>(d<S.largestBatchId&&(d=S.largestBatchId),a.get(T)?se.resolve():this.remoteDocumentCache.getEntry(e,T).next(P=>{_=_.insert(T,P)}))).next(()=>this.populateOverlays(e,w,a)).next(()=>this.computeViews(e,_,w,Wt())).next(T=>({batchId:d,changes:$0(T)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ye(t)).next(r=>{let i=$f();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let a=$f();return this.indexManager.getCollectionParents(e,i).next(l=>se.forEach(l,d=>{const _=(w=t,T=d.child(i),new Lu(T,null,w.explicitOrderBy.slice(),w.filters.slice(),w.limit,w.limitType,w.startAt,w.endAt));var w,T;return this.getDocumentsMatchingCollectionQuery(e,_,r).next(w=>{w.forEach((T,S)=>{a=a.insert(T,S)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(a=>{i.forEach((d,_)=>{const w=_.getKey();null===a.get(w)&&(a=a.insert(w,zn.newInvalidDocument(w)))});let l=$f();return a.forEach((d,_)=>{const w=i.get(d);void 0!==w&&Gy(w.mutation,_,cs.empty(),ar.now()),_m(t,_)&&(l=l.insert(d,_))}),l})}}class TD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return se.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:Sr(r.createTime)}),se.resolve()}getNamedQuery(e,t){return se.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:mD(r.bundledQuery),readTime:Sr(r.readTime)}),se.resolve();var r}}class yx{constructor(){this.overlays=new Xn(Ye.comparator),this.ls=new Map}getOverlay(e,t){return se.resolve(this.overlays.get(t))}getOverlays(e,t){const r=ta();return se.forEach(t,i=>this.getOverlay(e,i).next(a=>{null!==a&&r.set(i,a)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,a)=>{this.we(e,t,a)}),se.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(a=>this.overlays=this.overlays.remove(a)),this.ls.delete(r)),se.resolve()}getOverlaysForCollection(e,t,r){const i=ta(),a=t.length+1,l=new Ye(t.child("")),d=this.overlays.getIteratorFrom(l);for(;d.hasNext();){const _=d.getNext().value,w=_.getKey();if(!t.isPrefixOf(w.path))break;w.path.length===a&&_.largestBatchId>r&&i.set(_.getKey(),_)}return se.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let a=new Xn((w,T)=>w-T);const l=this.overlays.getIterator();for(;l.hasNext();){const w=l.getNext().value;if(w.getKey().getCollectionGroup()===t&&w.largestBatchId>r){let T=a.get(w.largestBatchId);null===T&&(T=ta(),a=a.insert(w.largestBatchId,T)),T.set(w.getKey(),w)}}const d=ta(),_=a.getIterator();for(;_.hasNext()&&(_.getNext().value.forEach((w,T)=>d.set(w,T)),!(d.size()>=i)););return se.resolve(d)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new Ky(t,r));let a=this.ls.get(t);void 0===a&&(a=Wt(),this.ls.set(t,a)),this.ls.set(t,a.add(r.key))}}class gv{constructor(){this.fs=new Nn(ti.ds),this.ws=new Nn(ti._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ti(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ti(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new Ye(new an([])),r=new ti(t,e),i=new ti(t,e+1),a=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),a.push(l.key)}),a}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new Ye(new an([])),r=new ti(t,e),i=new ti(t,e+1);let a=Wt();return this.ws.forEachInRange([r,i],l=>{a=a.add(l.key)}),a}containsKey(e){const t=new ti(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ti{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return Ye.comparator(e.key,t.key)||jt(e.As,t.As)}static _s(e,t){return jt(e.As,t.As)||Ye.comparator(e.key,t.key)}}class vx{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Nn(ti.ds)}checkEmpty(e){return se.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const a=this.vs;this.vs++;const l=new qy(a,t,r,i);this.mutationQueue.push(l);for(const d of i)this.Rs=this.Rs.add(new ti(d.key,a)),this.indexManager.addToCollectionParentIndex(e,d.key.path.popLast());return se.resolve(l)}lookupMutationBatch(e,t){return se.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),a=i<0?0:i;return se.resolve(this.mutationQueue.length>a?this.mutationQueue[a]:null)}getHighestUnacknowledgedBatchId(){return se.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return se.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ti(t,0),i=new ti(t,Number.POSITIVE_INFINITY),a=[];return this.Rs.forEachInRange([r,i],l=>{const d=this.Ps(l.As);a.push(d)}),se.resolve(a)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Nn(jt);return t.forEach(i=>{const a=new ti(i,0),l=new ti(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([a,l],d=>{r=r.add(d.As)})}),se.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let a=r;Ye.isDocumentKey(a)||(a=a.child(""));const l=new ti(new Ye(a),0);let d=new Nn(jt);return this.Rs.forEachWhile(_=>{const w=_.key.path;return!!r.isPrefixOf(w)&&(w.length===i&&(d=d.add(_.As)),!0)},l),se.resolve(this.Vs(d))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){wt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return se.forEach(t.mutations,i=>{const a=new ti(i.key,t.batchId);return r=r.delete(a),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ti(t,0),i=this.Rs.firstAfterOrEqual(r);return se.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return se.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class wx{constructor(e){this.Ds=e,this.docs=new Xn(Ye.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),a=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-a,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return se.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=Ms();return t.forEach(i=>{const a=this.docs.get(i);r=r.insert(i,a?a.document.mutableCopy():zn.newInvalidDocument(i))}),se.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let a=Ms();const l=t.path,d=new Ye(l.child("")),_=this.docs.getIteratorFrom(d);for(;_.hasNext();){const{key:w,value:{document:T}}=_.getNext();if(!l.isPrefixOf(w.path))break;w.path.length>l.length+1||ku(I0(T),r)<=0||(i.has(T.key)||_m(t,T))&&(a=a.insert(T.key,T.mutableCopy()))}return se.resolve(a)}getAllFromCollectionGroup(e,t,r,i){nt()}Cs(e,t){return se.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new xP(this)}getSize(e){return se.resolve(this.size)}}class xP extends bD{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),se.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class RP{constructor(e){this.persistence=e,this.xs=new Vu(t=>oc(t),Vf),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new gv,this.targetCount=0,this.Ms=dc.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),se.resolve()}getLastRemoteSnapshotVersion(e){return se.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return se.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),se.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),se.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new dc(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,se.resolve()}updateTargetData(e,t){return this.Fn(t),se.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,se.resolve()}removeTargets(e,t,r){let i=0;const a=[];return this.xs.forEach((l,d)=>{d.sequenceNumber<=t&&null===r.get(d.targetId)&&(this.xs.delete(l),a.push(this.removeMatchingKeysForTargetId(e,d.targetId)),i++)}),se.waitFor(a).next(()=>i)}getTargetCount(e){return se.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return se.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),se.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,a=[];return i&&t.forEach(l=>{a.push(i.markPotentiallyOrphaned(e,l))}),se.waitFor(a)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),se.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return se.resolve(r)}containsKey(e,t){return se.resolve(this.ks.containsKey(t))}}class mv{constructor(e,t){this.$s={},this.overlays={},this.Os=new Hi(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new RP(this),this.indexManager=new uE,this.remoteDocumentCache=new wx(r=>this.referenceDelegate.Ls(r)),this.serializer=new sx(t),this.qs=new TD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new yx,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new vx(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("MemoryPersistence","Starting transaction:",e);const i=new Ex(this.Os.next());return this.referenceDelegate.Us(),r(i).next(a=>this.referenceDelegate.Ks(i).next(()=>a)).toPromise().then(a=>(i.raiseOnCommittedEvent(),a))}Gs(e,t){return se.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class Ex extends wb{constructor(e){super(),this.currentSequenceNumber=e}}class _v{constructor(e){this.persistence=e,this.Qs=new gv,this.js=null}static zs(e){return new _v(e)}get Ws(){if(this.js)return this.js;throw nt()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),se.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),se.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),se.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(a=>this.Ws.add(a.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return se.forEach(this.Ws,r=>{const i=Ye.fromPath(r);return this.Hs(e,i).next(a=>{a||t.removeEntry(i,Dt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return se.or([()=>se.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class MP{constructor(e){this.serializer=e}O(e,t,r,i){const a=new C0("createOrUpgrade",t);var d;r<1&&i>=1&&(e.createObjectStore("owner"),(d=e).createObjectStore("mutationQueues",{keyPath:"userId"}),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0}),d.createObjectStore("documentMutations"),Ix(e),function(d){d.createObjectStore("remoteDocuments")}(e));let l=se.resolve();return r<3&&i>=3&&(0!==r&&(function(d){d.deleteObjectStore("targetDocuments"),d.deleteObjectStore("targets"),d.deleteObjectStore("targetGlobal")}(e),Ix(e)),l=l.next(()=>function(d){const _=d.store("targetGlobal"),w={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Dt.min().toTimestamp(),targetCount:0};return _.put("targetGlobalKey",w)}(a))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(d,_){return _.store("mutations").j().next(w=>{d.deleteObjectStore("mutations"),d.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",T0,{unique:!0});const T=_.store("mutations"),S=w.map(P=>T.put(P));return se.waitFor(S)})}(e,a))),l=l.next(()=>{!function(d){d.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(a))),r<6&&i>=6&&(l=l.next(()=>(function(d){d.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(a)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(a))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,a))),r<9&&i>=9&&(l=l.next(()=>{!function(d){d.objectStoreNames.contains("remoteDocumentChanges")&&d.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(a))),r<11&&i>=11&&(l=l.next(()=>{(function(d){d.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(d){d.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(d){const _=d.createObjectStore("documentOverlays",{keyPath:um});_.createIndex("collectionPathOverlayIndex",TA,{unique:!1}),_.createIndex("collectionGroupOverlayIndex",SA,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(d){const _=d.createObjectStore("remoteDocumentsV14",{keyPath:EA});_.createIndex("documentKeyIndex",om),_.createIndex("collectionGroupIndex",IA)}(e)).next(()=>this.ni(e,a)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,a))),r<15&&i>=15&&(l=l.next(()=>function(d){d.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),d.createObjectStore("indexState",{keyPath:Tb}).createIndex("sequenceNumberIndex",Sb,{unique:!1}),d.createObjectStore("indexEntries",{keyPath:DA}).createIndex("documentKeyIndex",am,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Mm(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>se.forEach(i,a=>{const l=IDBKeyRange.bound([a.userId,-1],[a.userId,a.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(d=>se.forEach(d,_=>{wt(_.userId===a.userId);const w=ep(this.serializer,_);return hE(e,a.userId,w).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const a=[];return r.X((l,d)=>{const _=new an(l),w=[0,Ri(_)];a.push(t.get(w).next(T=>T?se.resolve():t.put({targetId:0,path:Ri(_),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>se.waitFor(a))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Db});const r=t.store("collectionParents"),i=new lE,a=l=>{if(i.add(l)){const d=l.lastSegment(),_=l.popLast();return r.put({collectionId:d,parent:Ri(_)})}};return t.store("remoteDocuments").X({Y:!0},(l,d)=>{const _=new an(l);return a(_.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,d,_],w)=>{const T=Xo(d);return a(T.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const a=sv(i),l=Dm(this.serializer,a);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((a,l)=>{const d=t.store("remoteDocumentsV14"),_=(w=l,w.document?new Ye(an.fromString(w.document.name).popFirst(5)):w.noDocument?Ye.fromSegments(w.noDocument.path):w.unknownDocument?Ye.fromSegments(w.unknownDocument.path):nt()).path.toArray();var w;const T={prefixPath:_.slice(0,_.length-2),collectionGroup:_[_.length-2],documentId:_[_.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(d.put(T))}).next(()=>se.waitFor(i))}si(e,t){const r=t.store("mutations"),i=_x(this.serializer),a=new mv(_v.zs,this.serializer.fe);return r.j().next(l=>{const d=new Map;return l.forEach(_=>{var w;let T=null!==(w=d.get(_.userId))&&void 0!==w?w:Wt();ep(this.serializer,_).keys().forEach(S=>T=T.add(S)),d.set(_.userId,T)}),se.forEach(d,(_,w)=>{const T=new Xr(w),S=Sm.de(this.serializer,T),P=a.getIndexManager(T),U=fv.de(T,this.serializer,P,a.referenceDelegate);return new Pm(i,U,S,P).recalculateAndSaveOverlaysForDocumentKeys(new Oy(t,Hi.ct),_).next()})})}}function Ix(n){n.createObjectStore("targetDocuments",{keyPath:bA}).createIndex("documentTargetsIndex",ky,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",CA,{unique:!0}),n.createObjectStore("targetGlobal")}const SD="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class AD{constructor(e,t,r,i,a,l,d,_,w,T,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=a,this.window=l,this.document=d,this.ri=w,this.oi=T,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=P=>Promise.resolve(),!AD.D())throw new Re(ce.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new AP(this,i),this.di=t+"main",this.serializer=new sx(_),this.wi=new bo(this.di,this.ui,new MP(this.serializer)),this.Bs=new pE(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_x(this.serializer),this.qs=new _D,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===T&&br("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,SD);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Hi(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,me.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,me.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,me.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>wv(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Tt(e))return Ve("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Ve("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return vv(e).get("owner").next(t=>se.resolve(this.Ri(t)))}Pi(e){return wv(e).delete(this.clientId)}bi(){var e=this;return(0,me.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=pi(r,"clientMetadata");return i.j().next(a=>{const l=e.Si(a,18e5),d=a.filter(_=>-1===l.indexOf(_));return se.forEach(d,_=>i.delete(_.clientId)).next(()=>d)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?se.resolve(!0):vv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Re(ce.FAILED_PRECONDITION,SD);return!1}}return!(!this.networkEnabled||!this.inForeground)||wv(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>{if(this.clientId!==i.clientId){const l=!this.inForeground&&i.inForeground,d=this.networkEnabled===i.networkEnabled;if(!this.networkEnabled&&i.networkEnabled||l&&d)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Ve("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,me.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new Oy(t,Hi.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>wv(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return fv.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new px(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sm.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){Ve("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",a=15===(l=this.ui)?AA:14===l?A0:13===l?S0:12===l?xb:11===l?Ab:void nt();var l;let d;return this.wi.runTransaction(e,i,a,_=>(d=new Oy(_,this.Os?this.Os.next():Hi.ct),"readwrite-primary"===t?this.Ti(d).next(w=>!!w||this.Ei(d)).next(w=>{if(!w)throw br(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Re(ce.FAILED_PRECONDITION,vb);return r(d)}).next(w=>this.vi(d).next(()=>w)):this.Oi(d).next(()=>r(d)))).then(_=>(d.raiseOnCommittedEvent(),_))}Oi(e){return vv(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Re(ce.FAILED_PRECONDITION,SD)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return vv(e).put("owner",t)}static D(){return bo.D()}Ai(e){const t=vv(e);return t.get("owner").next(r=>this.Ri(r)?(Ve("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):se.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(br(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,k.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Ve("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return br("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){br("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function vv(n){return pi(n,"owner")}function wv(n){return pi(n,"clientMetadata")}function rp(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class wE{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=Wt(),i=Wt();for(const a of t.docChanges)switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}return new wE(e,t.fromCache,r,i)}}class xD{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(a=>a||this.Gi(e,t,i,r)).next(a=>a||this.Qi(e,t))}Ki(e,t){if(VA(t))return se.resolve(null);let r=Rs(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Hy(t,null,"F"),r=Rs(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(a=>{const l=Wt(...a);return this.Ui.getDocuments(e,l).next(d=>this.indexManager.getMinOffset(e,r).next(_=>{const w=this.ji(t,d);return this.zi(t,w,l,_.readTime)?this.Ki(e,Hy(t,null,"F")):this.Wi(e,w,t,_)}))})))}Gi(e,t,r,i){return VA(t)||i.isEqual(Dt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(a=>{const l=this.ji(t,a);return this.zi(t,l,r,i)?this.Qi(e,t):(Ay()<=Aa.in.DEBUG&&Ve("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),j0(t)),this.Wi(e,l,t,E0(i,-1)))})}ji(e,t){let r=new Nn(Zb(e));return t.forEach((i,a)=>{_m(e,a)&&(r=r.add(a))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const a="F"===e.limitType?t.last():t.first();return!!a&&(a.hasPendingWrites||a.version.compareTo(i)>0)}Qi(e,t){return Ay()<=Aa.in.DEBUG&&Ve("QueryEngine","Using full collection scan to execute query:",j0(t)),this.Ui.getDocumentsMatchingQuery(e,t,xs.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(a=>(t.forEach(l=>{a=a.insert(l.key,l)}),a))}}class RD{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new Xn(jt),this.Yi=new Vu(a=>oc(a),Vf),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Pm(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function fc(n,e,t,r){return new RD(n,e,t,r)}function EE(n,e){return km.apply(this,arguments)}function km(){return km=(0,me.Z)(function*(n,e){const t=Je(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(a=>(i=a,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(a=>{const l=[],d=[];let _=Wt();for(const w of i){l.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}for(const w of a){d.push(w.batchId);for(const T of w.mutations)_=_.add(T.key)}return t.localDocuments.getDocuments(r,_).next(w=>({er:w,removedBatchIds:l,addedBatchIds:d}))})})}),km.apply(this,arguments)}function IE(n,e){const t=Je(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),a=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,d,_,w){const T=_.batch,S=T.keys();let P=se.resolve();return S.forEach(U=>{P=P.next(()=>w.getEntry(d,U)).next(q=>{const de=_.docVersions.get(U);wt(null!==de),q.version.compareTo(de)<0&&(T.applyToRemoteDocument(q,_),q.isValidDocument()&&(q.setReadTime(_.commitVersion),w.addEntry(q)))})}),P.next(()=>l.mutationQueue.removeMutationBatch(d,T))}(t,r,e,a).next(()=>a.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let d=Wt();for(let _=0;_<l.mutationResults.length;++_)l.mutationResults[_].transformResults.length>0&&(d=d.add(l.batch.mutations[_].key));return d}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function MD(n){const e=Je(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function CE(n,e){const t=Je(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",a=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const d=[];e.targetChanges.forEach((T,S)=>{const P=i.get(S);if(!P)return;d.push(t.Bs.removeMatchingKeys(a,T.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(a,T.addedDocuments,S)));let U=P.withSequenceNumber(a.currentSequenceNumber);var q,de,fe;null!==e.targetMismatches.get(S)?U=U.withResumeToken(ei.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):T.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(T.resumeToken,r)),i=i.insert(S,U),de=U,fe=T,(0===(q=P).resumeToken.approximateByteSize()||de.snapshotVersion.toMicroseconds()-q.snapshotVersion.toMicroseconds()>=3e8||fe.addedDocuments.size+fe.modifiedDocuments.size+fe.removedDocuments.size>0)&&d.push(t.Bs.updateTargetData(a,U))});let _=Ms(),w=Wt();if(e.documentUpdates.forEach(T=>{e.resolvedLimboDocuments.has(T)&&d.push(t.persistence.referenceDelegate.updateLimboDocument(a,T))}),d.push(Ev(a,l,e.documentUpdates).next(T=>{_=T.nr,w=T.sr})),!r.isEqual(Dt.min())){const T=t.Bs.getLastRemoteSnapshotVersion(a).next(S=>t.Bs.setTargetsMetadata(a,a.currentSequenceNumber,r));d.push(T)}return se.waitFor(d).next(()=>l.apply(a)).next(()=>t.localDocuments.getLocalViewOfDocuments(a,_,w)).next(()=>_)}).then(a=>(t.Ji=i,a))}function Ev(n,e,t){let r=Wt(),i=Wt();return t.forEach(a=>r=r.add(a)),e.getEntries(n,r).next(a=>{let l=Ms();return t.forEach((d,_)=>{const w=a.get(d);_.isFoundDocument()!==w.isFoundDocument()&&(i=i.add(d)),_.isNoDocument()&&_.version.isEqual(Dt.min())?(e.removeEntry(d,_.readTime),l=l.insert(d,_)):!w.isValidDocument()||_.version.compareTo(w.version)>0||0===_.version.compareTo(w.version)&&w.hasPendingWrites?(e.addEntry(_),l=l.insert(d,_)):Ve("LocalStore","Ignoring outdated watch update for ",d,". Current version:",w.version," Watch version:",_.version)}),{nr:l,sr:i}})}function Iv(n,e){const t=Je(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Om(n,e){const t=Je(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(a=>a?(i=a,se.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new $a(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function Fm(n,e,t){return ND.apply(this,arguments)}function ND(){return ND=(0,me.Z)(function*(n,e,t){const r=Je(n),i=r.Ji.get(e),a=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",a,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Tt(l))throw l;Ve("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),ND.apply(this,arguments)}function bE(n,e,t){const r=Je(n);let i=Dt.min(),a=Wt();return r.persistence.runTransaction("Execute query","readonly",l=>function(d,_,w){const T=Je(d),S=T.Yi.get(w);return void 0!==S?se.resolve(T.Ji.get(S)):T.Bs.getTargetData(_,w)}(r,l,Rs(e)).next(d=>{if(d)return i=d.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,d.targetId).next(_=>{a=_})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Dt.min(),t?a:Wt())).next(d=>(kD(r,Kb(e),d),{documents:d,ir:a})))}function DE(n,e){const t=Je(n),r=Je(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",a=>r.le(a,e).next(l=>l?l.target:null))}function PD(n,e){const t=Je(n),r=t.Xi.get(e)||Dt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,E0(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(kD(t,e,i),i))}function kD(n,e,t){let r=n.Xi.get(e)||Dt.min();t.forEach((i,a)=>{a.readTime.compareTo(r)>0&&(r=a.readTime)}),n.Xi.set(e,r)}function TE(){return TE=(0,me.Z)(function*(n,e,t,r){const i=Je(n);let a=Wt(),l=Ms();for(const w of t){const T=e.rr(w.metadata.name);w.document&&(a=a.add(T));const S=e.ur(w);S.setReadTime(e.cr(w.metadata.readTime)),l=l.insert(T,S)}const d=i.Zi.newChangeBuffer({trackRemovals:!0}),_=yield Om(i,(w=r,Rs(zd(an.fromString(`__bundle__/docs/${w}`)))));var w;return i.persistence.runTransaction("Apply bundle documents","readwrite",w=>Ev(w,d,l).next(T=>(d.apply(w),T)).next(T=>i.Bs.removeMatchingKeysForTargetId(w,_.targetId).next(()=>i.Bs.addMatchingKeys(w,a,_.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(w,T.nr,T.sr)).next(()=>T.nr)))}),TE.apply(this,arguments)}function OD(n,e){return Cv.apply(this,arguments)}function Cv(){return Cv=(0,me.Z)(function*(n,e,t=Wt()){const r=yield Om(n,Rs(mD(e.bundledQuery))),i=Je(n);return i.persistence.runTransaction("Save named query","readwrite",a=>{const l=Sr(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(a,e);const d=r.withResumeToken(ei.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(d.targetId,d),i.Bs.updateTargetData(a,d).next(()=>i.Bs.removeMatchingKeysForTargetId(a,r.targetId)).next(()=>i.Bs.addMatchingKeys(a,t,r.targetId)).next(()=>i.qs.saveNamedQuery(a,e))})}),Cv.apply(this,arguments)}function SE(n,e){return`firestore_clients_${n}_${e}`}function FD(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function AE(n,e){return`firestore_targets_${n}_${e}`}class Lm{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let a,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(a=new Re(i.error.code,i.error.message))),l?new Lm(e,t,i.state,a):(br("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Xd{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,a="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return a&&r.error&&(a="string"==typeof r.error.message&&"string"==typeof r.error.code,a&&(i=new Re(r.error.code,r.error.message))),a?new Xd(e,r.state,i):(br("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class xE{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,a=G0();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=b0(r.activeTargetIds[l]),a=a.add(r.activeTargetIds[l]);return i?new xE(e,a):(br("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class bv{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new bv(t.clientId,t.onlineState):(br("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Vm{constructor(){this.activeTargetIds=G0()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class RE{constructor(e,t,r,i,a){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Xn(jt),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=a,this.pr=SE(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new Vm),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(d){return`firestore_bundle_loaded_v2_${d}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,me.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const a=e.getItem(SE(e.persistenceKey,i));if(a){const l=xE.ar(i,a);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(AE(this.persistenceKey,e));if(r){const i=Xd.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(AE(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Ve("SharedClientState","READ",e,t),t}setItem(e,t){Ve("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Ve("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(Ve("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void br("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,me.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(a){let l=Hi.ct;if(null!=a)try{const d=JSON.parse(a);wt("number"==typeof d),l=d}catch(d){br("SharedClientState","Failed to read sequence number from WebStorage",d)}return l}(r.newValue);i!==Hi.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(a=>t.syncEngine.Qr(a)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new Lm(this.currentUser,e,t,r),a=FD(this.persistenceKey,this.currentUser,e);this.setItem(a,i.hr())}Cr(e){const t=FD(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=AE(this.persistenceKey,e),a=new Xd(e,t,r);this.setItem(i,a.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return xE.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return Lm.ar(new Xr(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return Xd.ar(i,t)}br(e){return bv.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,me.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Ve("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),a=this.Sr(r),l=[],d=[];return a.forEach(_=>{i.has(_)||l.push(_)}),i.forEach(_=>{a.has(_)||d.push(_)}),this.syncEngine.Wr(l,d).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=G0();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class LD{constructor(){this.Hr=new Vm,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new Vm,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class NP{Yr(e){}shutdown(){}}class bx{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Ve("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Ve("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let Dv=null;function ME(){return null===Dv?Dv=268435456+Math.round(2147483648*Math.random()):Dv++,"0x"+Dv.toString(16)}const Dx={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class PP{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const fs="WebChannelConnection";class kP extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,a){const l=ME(),d=this.To(e,t);Ve("RestConnection",`Sending RPC '${e}' ${l}:`,d,r);const _={};return this.Eo(_,i,a),this.Ao(e,d,_,r).then(w=>(Ve("RestConnection",`Received RPC '${e}' ${l}: `,w),w),w=>{throw no("RestConnection",`RPC '${e}' ${l} failed with error: `,w,"url: ",d,"request:",r),w})}vo(e,t,r,i,a,l){return this.Io(e,t,r,i,a)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Nf,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,a)=>e[a]=i),r&&r.headers.forEach((i,a)=>e[a]=i)}To(e,t){return`${this.mo}/v1/${t}:${Dx[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const a=ME();return new Promise((l,d)=>{const _=new lA;_.setWithCredentials(!0),_.listenOnce(ub.COMPLETE,()=>{try{switch(_.getLastErrorCode()){case to.NO_ERROR:const T=_.getResponseJson();Ve(fs,`XHR for RPC '${e}' ${a} received:`,JSON.stringify(T)),l(T);break;case to.TIMEOUT:Ve(fs,`RPC '${e}' ${a} timed out`),d(new Re(ce.DEADLINE_EXCEEDED,"Request time out"));break;case to.HTTP_ERROR:const S=_.getStatus();if(Ve(fs,`RPC '${e}' ${a} failed with status:`,S,"response text:",_.getResponseText()),S>0){let P=_.getResponseJson();Array.isArray(P)&&(P=P[0]);const U=P?.error;if(U&&U.status&&U.message){const q=function(de){const fe=de.toLowerCase().replace(/_/g,"-");return Object.values(ce).indexOf(fe)>=0?fe:ce.UNKNOWN}(U.status);d(new Re(q,U.message))}else d(new Re(ce.UNKNOWN,"Server responded with status "+_.getStatus()))}else d(new Re(ce.UNAVAILABLE,"Connection failed."));break;default:nt()}}finally{Ve(fs,`RPC '${e}' ${a} completed.`)}});const w=JSON.stringify(i);Ve(fs,`RPC '${e}' ${a} sending request:`,i),_.send(t,"POST",w,r,15)})}Ro(e,t,r){const i=ME(),a=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=Fa(),d=Jo(),_={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},w=this.longPollingOptions.timeoutSeconds;void 0!==w&&(_.longPollingTimeout=Math.round(1e3*w)),this.useFetchStreams&&(_.xmlHttpFactory=new uA({})),this.Eo(_.initMessageHeaders,t,r),_.encodeInitMessageHeaders=!0;const T=a.join("");Ve(fs,`Creating RPC '${e}' stream ${i}: ${T}`,_);const S=l.createWebChannel(T,_);let P=!1,U=!1;const q=new PP({ro:fe=>{U?Ve(fs,`Not sending because RPC '${e}' stream ${i} is closed:`,fe):(P||(Ve(fs,`Opening RPC '${e}' stream ${i} transport.`),S.open(),P=!0),Ve(fs,`RPC '${e}' stream ${i} sending:`,fe),S.send(fe))},oo:()=>S.close()}),de=(fe,Qe,tt)=>{fe.listen(Qe,Xe=>{try{tt(Xe)}catch(mt){setTimeout(()=>{throw mt},0)}})};return de(S,Sy.EventType.OPEN,()=>{U||Ve(fs,`RPC '${e}' stream ${i} transport opened.`)}),de(S,Sy.EventType.CLOSE,()=>{U||(U=!0,Ve(fs,`RPC '${e}' stream ${i} transport closed`),q.wo())}),de(S,Sy.EventType.ERROR,fe=>{U||(U=!0,no(fs,`RPC '${e}' stream ${i} transport errored:`,fe),q.wo(new Re(ce.UNAVAILABLE,"The operation could not be completed")))}),de(S,Sy.EventType.MESSAGE,fe=>{var Qe;if(!U){const tt=fe.data[0];wt(!!tt);const Xe=tt,mt=Xe.error||(null===(Qe=Xe[0])||void 0===Qe?void 0:Qe.error);if(mt){Ve(fs,`RPC '${e}' stream ${i} received error:`,mt);const $t=mt.status;let Zt=function(aa){const rw=Pr[aa];if(void 0!==rw)return Z0(rw)}($t),mi=mt.message;void 0===Zt&&(Zt=ce.INTERNAL,mi="Unknown error status: "+$t+" with message "+mt.message),U=!0,q.wo(new Re(Zt,mi)),S.close()}else Ve(fs,`RPC '${e}' stream ${i} received:`,tt),q._o(tt)}}),de(d,lb.STAT_EVENT,fe=>{fe.stat===cb.PROXY?Ve(fs,`RPC '${e}' stream ${i} detected buffering proxy`):fe.stat===cb.NOPROXY&&Ve(fs,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{q.fo()},0),q}}function Tx(){return typeof window<"u"?window:null}function NE(){return typeof document<"u"?document:null}function Um(n){return new lD(n,!0)}class VD{constructor(e,t,r=1e3,i=1.5,a=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=a,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&Ve("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class Sx{constructor(e,t,r,i,a,l,d,_){this.ii=e,this.$o=r,this.Oo=i,this.connection=a,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=d,this.listener=_,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new VD(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,me.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,me.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,me.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===ce.RESOURCE_EXHAUSTED?(br(t.toString()),br("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===ce.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new Re(ce.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,me.Z)(function*(){e.state=0,e.start()}))}tu(e){return Ve("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Ve("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class OP extends Sx{constructor(e,t,r,i,a,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function XA(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(_=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===_?1:"REMOVE"===_?2:"CURRENT"===_?3:"RESET"===_?4:nt(),i=e.targetChange.targetIds||[],a=function(_,w){return _.useProto3Json?(wt(void 0===w||"string"==typeof w),ei.fromBase64String(w||"")):(wt(void 0===w||w instanceof Uint8Array),ei.fromUint8Array(w||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,d=l&&function(_){const w=void 0===_.code?ce.UNKNOWN:Z0(_.code);return new Re(w,_.message||"")}(l);t=new aD(r,i,a,d||null)}else if("documentChange"in e){const r=e.documentChange,i=ja(n,r.document.name),a=Sr(r.document.updateTime),l=r.document.createTime?Sr(r.document.createTime):Dt.min(),d=new Mi({mapValue:{fields:r.document.fields}}),_=zn.newFoundDocument(i,a,l,d);t=new bm(r.targetIds||[],r.removedTargetIds||[],_.key,_)}else if("documentDelete"in e){const r=e.documentDelete,i=ja(n,r.document),a=r.readTime?Sr(r.readTime):Dt.min(),l=zn.newNoDocument(i,a);t=new bm([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=ja(n,r.document);t=new bm([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return nt();{const r=e.filter,{count:i=0,unchangedNames:a}=r,l=new iD(i,a);t=new Yf(r.targetId,l)}}var _;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Dt.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?Dt.min():a.readTime?Sr(a.readTime):Dt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=nv(this.serializer),t.addTarget=function(i,a){let l;const d=a.target;if(l=gm(d)?{documents:nE(i,d)}:{query:iv(i,d)},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Xy(i,a.resumeToken);const _=Jy(i,a.expectedCount);null!==_&&(l.expectedCount=_)}else if(a.snapshotVersion.compareTo(Dt.min())>0){l.readTime=Bu(i,a.snapshotVersion.toTimestamp());const _=Jy(i,a.expectedCount);null!==_&&(l.expectedCount=_)}return l}(this.serializer,e);const r=function tx(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nt()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=nv(this.serializer),t.removeTarget=e,this.Wo(t)}}class FP extends Sx{constructor(e,t,r,i,a,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=a,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(wt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function ex(n,e){return n&&n.length>0?(wt(void 0!==e),n.map(t=>function(r,i){let a=Sr(r.updateTime?r.updateTime:i);return a.isEqual(Dt.min())&&(a=Sr(i)),new eD(a,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=Sr(e.commitTime);return this.listener.cu(r,t)}return wt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=nv(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Qf(this.serializer,r))};this.Wo(t)}}class LP extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Io(e,t,r,i,a)).catch(i=>{throw"FirebaseError"===i.name?(i.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Re(ce.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.vo(e,t,r,a,l,i)).catch(a=>{throw"FirebaseError"===a.name?(a.code===ce.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Re(ce.UNKNOWN,a.toString())})}terminate(){this.lu=!0}}class o{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(br(t),this.mu=!1):Ve("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class u{constructor(e,t,r,i,a){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=a,this.Pu.Yr(d=>{r.enqueueAndForget((0,me.Z)(function*(){var _;Q(l)&&(Ve("RemoteStore","Restarting streams for network reachability change."),yield(_=(0,me.Z)(function*(w){const T=Je(w);T.vu.add(4),yield m(T),T.bu.set("Unknown"),T.vu.delete(4),yield c(T)}),function(w){return _.apply(this,arguments)})(l))}))}),this.bu=new o(r,i)}}function c(n){return h.apply(this,arguments)}function h(){return h=(0,me.Z)(function*(n){if(Q(n))for(const e of n.Ru)yield e(!0)}),h.apply(this,arguments)}function m(n){return v.apply(this,arguments)}function v(){return v=(0,me.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),v.apply(this,arguments)}function C(n,e){const t=Je(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),G(t)?L(t):Av(t).Ko()&&x(t,e))}function D(n,e){const t=Je(n),r=Av(t);t.Au.delete(e),r.Ko()&&N(t,e),0===t.Au.size&&(r.Ko()?r.jo():Q(t)&&t.bu.set("Unknown"))}function x(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Av(n).su(e)}function N(n,e){n.Vu.qt(e),Av(n).iu(e)}function L(n){n.Vu=new KA({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Av(n).start(),n.bu.gu()}function G(n){return Q(n)&&!Av(n).Uo()&&n.Au.size>0}function Q(n){return 0===Je(n).vu.size}function be(n){n.Vu=void 0}function Be(n){return Ke.apply(this,arguments)}function Ke(){return Ke=(0,me.Z)(function*(n){n.Au.forEach((e,t)=>{x(n,e)})}),Ke.apply(this,arguments)}function gt(n,e){return Rt.apply(this,arguments)}function Rt(){return Rt=(0,me.Z)(function*(n,e){be(n),G(n)?(n.bu.Iu(e),L(n)):n.bu.set("Unknown")}),Rt.apply(this,arguments)}function Pe(n,e,t){return Ft.apply(this,arguments)}function Ft(){return Ft=(0,me.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof aD&&2===e.state&&e.cause)try{yield(r=(0,me.Z)(function*(i,a){const l=a.cause;for(const d of a.targetIds)i.Au.has(d)&&(yield i.remoteSyncer.rejectListen(d,l),i.Au.delete(d),i.Vu.removeTarget(d))}),function(i,a){return r.apply(this,arguments)})(n,e)}catch(r){Ve("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield ln(n,r)}else if(e instanceof bm?n.Vu.Ht(e):e instanceof Yf?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Dt.min()))try{const r=yield MD(n.localStore);t.compareTo(r)>=0&&(yield function(i,a){const l=i.Vu.ce(a);return l.targetChanges.forEach((d,_)=>{if(d.resumeToken.approximateByteSize()>0){const w=i.Au.get(_);w&&i.Au.set(_,w.withResumeToken(d.resumeToken,a))}}),l.targetMismatches.forEach((d,_)=>{const w=i.Au.get(d);if(!w)return;i.Au.set(d,w.withResumeToken(ei.EMPTY_BYTE_STRING,w.snapshotVersion)),N(i,d);const T=new $a(w.target,d,_,w.sequenceNumber);x(i,T)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){Ve("RemoteStore","Failed to raise snapshot:",r),yield ln(n,r)}var r}),Ft.apply(this,arguments)}function ln(n,e,t){return Wn.apply(this,arguments)}function Wn(){return Wn=(0,me.Z)(function*(n,e,t){if(!Tt(e))throw e;n.vu.add(1),yield m(n),n.bu.set("Offline"),t||(t=()=>MD(n.localStore)),n.asyncQueue.enqueueRetryable((0,me.Z)(function*(){Ve("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield c(n)}))}),Wn.apply(this,arguments)}function pc(n,e){return e().catch(t=>ln(n,t,e))}function gc(n){return Bm.apply(this,arguments)}function Bm(){return Bm=(0,me.Z)(function*(n){const e=Je(n),t=ip(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;PE(e);)try{const i=yield Iv(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,kE(e,i)}catch(i){yield ln(e,i)}Tv(e)&&Sv(e)}),Bm.apply(this,arguments)}function PE(n){return Q(n)&&n.Eu.length<10}function kE(n,e){n.Eu.push(e);const t=ip(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Tv(n){return Q(n)&&!ip(n).Uo()&&n.Eu.length>0}function Sv(n){ip(n).start()}function OE(n){return jm.apply(this,arguments)}function jm(){return jm=(0,me.Z)(function*(n){ip(n).hu()}),jm.apply(this,arguments)}function FE(n){return Ax.apply(this,arguments)}function Ax(){return Ax=(0,me.Z)(function*(n){const e=ip(n);for(const t of n.Eu)e.uu(t.mutations)}),Ax.apply(this,arguments)}function VV(n,e,t){return xx.apply(this,arguments)}function xx(){return xx=(0,me.Z)(function*(n,e,t){const r=n.Eu.shift(),i=Im.from(r,e,t);yield pc(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield gc(n)}),xx.apply(this,arguments)}function UV(n,e){return Rx.apply(this,arguments)}function Rx(){return Rx=(0,me.Z)(function*(n,e){var t;e&&ip(n).ou&&(yield(t=(0,me.Z)(function*(r,i){if(K0(a=i.code)&&a!==ce.ABORTED){const l=r.Eu.shift();ip(r).Qo(),yield pc(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield gc(r)}var a}),function(r,i){return t.apply(this,arguments)})(n,e)),Tv(n)&&Sv(n)}),Rx.apply(this,arguments)}function UP(n,e){return Mx.apply(this,arguments)}function Mx(){return Mx=(0,me.Z)(function*(n,e){const t=Je(n);t.asyncQueue.verifyOperationInProgress(),Ve("RemoteStore","RemoteStore received new credentials");const r=Q(t);t.vu.add(3),yield m(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield c(t)}),Mx.apply(this,arguments)}function Nx(n,e){return Px.apply(this,arguments)}function Px(){return Px=(0,me.Z)(function*(n,e){const t=Je(n);e?(t.vu.delete(2),yield c(t)):e||(t.vu.add(2),yield m(t),t.bu.set("Unknown"))}),Px.apply(this,arguments)}function Av(n){return n.Su||(n.Su=function(e,t,r){const i=Je(e);return i.fu(),new OP(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Be.bind(null,n),ao:gt.bind(null,n),nu:Pe.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Su.Qo(),G(n)?L(n):n.bu.set("Unknown")):(yield n.Su.stop(),be(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function ip(n){return n.Du||(n.Du=function(e,t,r){const i=Je(e);return i.fu(),new FP(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:OE.bind(null,n),ao:UV.bind(null,n),au:FE.bind(null,n),cu:VV.bind(null,n)}),n.Ru.push(function(){var e=(0,me.Z)(function*(t){t?(n.Du.Qo(),yield gc(n)):(yield n.Du.stop(),n.Eu.length>0&&(Ve("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class kx{constructor(e,t,r,i,a){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=a,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,a){const l=Date.now()+r,d=new kx(e,t,l,i,a);return d.start(r),d}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Re(ce.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function xv(n,e){if(br("AsyncQueue",`${e}: ${n}`),Tt(n))return new Re(ce.UNAVAILABLE,`${e}: ${n}`);throw n}class Rv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||Ye.comparator(t.key,r.key):(t,r)=>Ye.comparator(t.key,r.key),this.keyedMap=$f(),this.sortedSet=new Xn(this.comparator)}static emptySet(e){return new Rv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Rv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,a=r.getNext().key;if(!i.isEqual(a))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Rv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class BP{constructor(){this.Cu=new Xn(Ye.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):nt():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class Mv{constructor(e,t,r,i,a,l,d,_,w){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=a,this.fromCache=l,this.syncStateChanged=d,this.excludesMetadataChanges=_,this.hasCachedResults=w}static fromInitialDocuments(e,t,r,i,a){const l=[];return t.forEach(d=>{l.push({type:0,doc:d})}),new Mv(e,t,Rv.emptySet(t),l,r,i,!0,!1,a)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Bf(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class BV{constructor(){this.Nu=void 0,this.listeners=[]}}class jV{constructor(){this.queries=new Vu(e=>qb(e),Bf),this.onlineState="Unknown",this.ku=new Set}}function Ox(n,e){return Fx.apply(this,arguments)}function Fx(){return Fx=(0,me.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1,a=t.queries.get(r);if(a||(i=!0,a=new BV),i)try{a.Nu=yield t.onListen(r)}catch(l){const d=xv(l,`Initialization of query '${j0(e.query)}' failed`);return void e.onError(d)}t.queries.set(r,a),a.listeners.push(e),e.Mu(t.onlineState),a.Nu&&e.$u(a.Nu)&&Ux(t)}),Fx.apply(this,arguments)}function Lx(n,e){return Vx.apply(this,arguments)}function Vx(){return Vx=(0,me.Z)(function*(n,e){const t=Je(n),r=e.query;let i=!1;const a=t.queries.get(r);if(a){const l=a.listeners.indexOf(e);l>=0&&(a.listeners.splice(l,1),i=0===a.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),Vx.apply(this,arguments)}function $V(n,e){const t=Je(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const d of l.listeners)d.$u(i)&&(r=!0);l.Nu=i}}r&&Ux(t)}function HV(n,e,t){const r=Je(n),i=r.queries.get(e);if(i)for(const a of i.listeners)a.onError(t);r.queries.delete(e)}function Ux(n){n.ku.forEach(e=>{e.next()})}class Bx{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new Mv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=Mv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class GV{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class jP{constructor(e){this.serializer=e}rr(e){return ja(this.serializer,e)}ur(e){return e.metadata.exists?dD(this.serializer,e.document,!1):zn.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return Sr(e)}}class zV{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=$P(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=an.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new jP(this.serializer);for(const i of e)if(i.metadata.queries){const a=r.rr(i.metadata.name);for(const l of i.metadata.queries){const d=(t.get(l)||Wt()).add(a);t.set(l,d)}}return t}complete(){var e=this;return(0,me.Z)(function*(){const t=yield function Cx(n,e,t,r){return TE.apply(this,arguments)}(e.localStore,new jP(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield OD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function $P(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class HP{constructor(e){this.key=e}}class GP{constructor(e){this.key=e}}class zP{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=Wt(),this.mutatedKeys=Wt(),this.tc=Zb(e),this.ec=new Rv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new BP,i=t?t.ec:this.ec;let a=t?t.mutatedKeys:this.mutatedKeys,l=i,d=!1;const _="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,w="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((T,S)=>{const P=i.get(T),U=_m(this.query,S)?S:null,q=!!P&&this.mutatedKeys.has(P.key),de=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let fe=!1;P&&U?P.data.isEqual(U.data)?q!==de&&(r.track({type:3,doc:U}),fe=!0):this.rc(P,U)||(r.track({type:2,doc:U}),fe=!0,(_&&this.tc(U,_)>0||w&&this.tc(U,w)<0)&&(d=!0)):!P&&U?(r.track({type:0,doc:U}),fe=!0):P&&!U&&(r.track({type:1,doc:P}),fe=!0,(_||w)&&(d=!0)),fe&&(U?(l=l.add(U),a=de?a.add(T):a.delete(T)):(l=l.delete(T),a=a.delete(T)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const T="F"===this.query.limitType?l.last():l.first();l=l.delete(T.key),a=a.delete(T.key),r.track({type:1,doc:T})}return{ec:l,ic:r,zi:d,mutatedKeys:a}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const a=e.ic.xu();a.sort((w,T)=>function(S,P){const U=q=>{switch(q){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nt()}};return U(S)-U(P)}(w.type,T.type)||this.tc(w.doc,T.doc)),this.oc(r);const l=t?this.uc():[],d=0===this.Zu.size&&this.current?1:0,_=d!==this.Xu;return this.Xu=d,0!==a.length||_?{snapshot:new Mv(this.query,e.ec,i,a,e.mutatedKeys,0===d,_,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new BP,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=Wt(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new GP(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new HP(r))}),t}hc(e){this.Yu=e.ir,this.Zu=Wt();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return Mv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class WV{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class qV{constructor(e){this.key=e,this.fc=!1}}class KV{constructor(e,t,r,i,a,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=a,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new Vu(d=>qb(d),Bf),this._c=new Map,this.mc=new Set,this.gc=new Xn(Ye.comparator),this.yc=new Map,this.Ic=new gv,this.Tc={},this.Ec=new Map,this.Ac=dc.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function ZV(n,e){return jx.apply(this,arguments)}function jx(){return jx=(0,me.Z)(function*(n,e){const t=cR(n);let r,i;const a=t.wc.get(e);if(a)r=a.targetId,t.sharedClientState.addLocalQueryTarget(r),i=a.view.lc();else{const l=yield Om(t.localStore,Rs(e)),d=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield $x(t,e,r,"current"===d,l.resumeToken),t.isPrimaryClient&&C(t.remoteStore,l)}return i}),jx.apply(this,arguments)}function $x(n,e,t,r,i){return Hx.apply(this,arguments)}function Hx(){return Hx=(0,me.Z)(function*(n,e,t,r,i){n.Rc=(S,P,U)=>{return(q=(0,me.Z)(function*(de,fe,Qe,tt){let Xe=fe.view.sc(Qe);Xe.zi&&(Xe=yield bE(de.localStore,fe.query,!1).then(({documents:Zt})=>fe.view.sc(Zt,Xe)));const mt=tt&&tt.targetChanges.get(fe.targetId),$t=fe.view.applyChanges(Xe,de.isPrimaryClient,mt);return Xx(de,fe.targetId,$t.cc),$t.snapshot}),function(de,fe,Qe,tt){return q.apply(this,arguments)})(n,S,P,U);var q};const a=yield bE(n.localStore,e,!0),l=new zP(e,a.ir),d=l.sc(a.documents),_=Zf.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),w=l.applyChanges(d,n.isPrimaryClient,_);Xx(n,t,w.cc);const T=new WV(e,t,l);return n.wc.set(e,T),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),w.snapshot}),Hx.apply(this,arguments)}function YV(n,e){return Gx.apply(this,arguments)}function Gx(){return Gx=(0,me.Z)(function*(n,e){const t=Je(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(a=>!Bf(a,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Fm(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),D(t.remoteStore,r.targetId),Nv(t,r.targetId)}).catch(ro))):(Nv(t,r.targetId),yield Fm(t.localStore,r.targetId,!0))}),Gx.apply(this,arguments)}function zx(){return zx=(0,me.Z)(function*(n,e,t){const r=dR(n);try{const i=yield function(a,l){const d=Je(a),_=ar.now(),w=l.reduce((P,U)=>P.add(U.key),Wt());let T,S;return d.persistence.runTransaction("Locally write mutations","readwrite",P=>{let U=Ms(),q=Wt();return d.Zi.getEntries(P,w).next(de=>{U=de,U.forEach((fe,Qe)=>{Qe.isValidDocument()||(q=q.add(fe))})}).next(()=>d.localDocuments.getOverlayedDocuments(P,U)).next(de=>{T=de;const fe=[];for(const Qe of l){const tt=W0(Qe,T.get(Qe.key).overlayedDocument);null!=tt&&fe.push(new ra(Qe.key,tt,N0(tt.value.mapValue),er.exists(!0)))}return d.mutationQueue.addMutationBatch(P,_,fe,l)}).next(de=>{S=de;const fe=de.applyToLocalDocumentSet(T,q);return d.documentOverlayCache.saveOverlays(P,de.batchId,fe)})}).then(()=>({batchId:S.batchId,changes:$0(T)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,l,d){let _=a.Tc[a.currentUser.toKey()];_||(_=new Xn(jt)),_=_.insert(l,d),a.Tc[a.currentUser.toKey()]=_}(r,i.batchId,t),yield eh(r,i.changes),yield gc(r.remoteStore)}catch(i){const a=xv(i,"Failed to persist write");t.reject(a)}}),zx.apply(this,arguments)}function WP(n,e){return Wx.apply(this,arguments)}function Wx(){return Wx=(0,me.Z)(function*(n,e){const t=Je(n);try{const r=yield CE(t.localStore,e);e.targetChanges.forEach((i,a)=>{const l=t.yc.get(a);l&&(wt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?wt(l.fc):i.removedDocuments.size>0&&(wt(l.fc),l.fc=!1))}),yield eh(t,r,e)}catch(r){yield ro(r)}}),Wx.apply(this,arguments)}function qP(n,e,t){const r=Je(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((a,l)=>{const d=l.view.Mu(e);d.snapshot&&i.push(d.snapshot)}),function(a,l){const d=Je(a);d.onlineState=l;let _=!1;d.queries.forEach((w,T)=>{for(const S of T.listeners)S.Mu(l)&&(_=!0)}),_&&Ux(d)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function JV(n,e,t){return qx.apply(this,arguments)}function qx(){return qx=(0,me.Z)(function*(n,e,t){const r=Je(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),a=i&&i.key;if(a){let l=new Xn(Ye.comparator);l=l.insert(a,zn.newNoDocument(a,Dt.min()));const d=Wt().add(a),_=new Yy(Dt.min(),new Map,new Xn(jt),l,d);yield WP(r,_),r.gc=r.gc.remove(a),r.yc.delete(e),eR(r)}else yield Fm(r.localStore,e,!1).then(()=>Nv(r,e,t)).catch(ro)}),qx.apply(this,arguments)}function XV(n,e){return Kx.apply(this,arguments)}function Kx(){return Kx=(0,me.Z)(function*(n,e){const t=Je(n),r=e.batch.batchId;try{const i=yield IE(t.localStore,e);Jx(t,r,null),Qx(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield eh(t,i)}catch(i){yield ro(i)}}),Kx.apply(this,arguments)}function e2(n,e,t){return Zx.apply(this,arguments)}function Zx(){return Zx=(0,me.Z)(function*(n,e,t){const r=Je(n);try{const i=yield function(a,l){const d=Je(a);return d.persistence.runTransaction("Reject batch","readwrite-primary",_=>{let w;return d.mutationQueue.lookupMutationBatch(_,l).next(T=>(wt(null!==T),w=T.keys(),d.mutationQueue.removeMutationBatch(_,T))).next(()=>d.mutationQueue.performConsistencyCheck(_)).next(()=>d.documentOverlayCache.removeOverlaysForBatchId(_,w,l)).next(()=>d.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(_,w)).next(()=>d.localDocuments.getDocuments(_,w))})}(r.localStore,e);Jx(r,e,t),Qx(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield eh(r,i)}catch(i){yield ro(i)}}),Zx.apply(this,arguments)}function Yx(){return Yx=(0,me.Z)(function*(n,e){const t=Je(n);Q(t.remoteStore)||Ve("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(a){const l=Je(a);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",d=>l.mutationQueue.getHighestUnacknowledgedBatchId(d))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=xv(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),Yx.apply(this,arguments)}function Qx(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Jx(n,e,t){const r=Je(n);let i=r.Tc[r.currentUser.toKey()];if(i){const a=i.get(e);a&&(t?a.reject(t):a.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Nv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||KP(n,r)})}function KP(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(D(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),eR(n))}function Xx(n,e,t){for(const r of t)r instanceof HP?(n.Ic.addReference(r.key,e),n2(n,r)):r instanceof GP?(Ve("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||KP(n,r.key)):nt()}function n2(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(Ve("SyncEngine","New document in limbo: "+t),n.mc.add(r),eR(n))}function eR(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new Ye(an.fromString(e)),r=n.Ac.next();n.yc.set(r,new qV(t)),n.gc=n.gc.insert(t,r),C(n.remoteStore,new $a(Rs(zd(t.path)),r,"TargetPurposeLimboResolution",Hi.ct))}}function eh(n,e,t){return tR.apply(this,arguments)}function tR(){return tR=(0,me.Z)(function*(n,e,t){const r=Je(n),i=[],a=[],l=[];var d;r.wc.isEmpty()||(r.wc.forEach((d,_)=>{l.push(r.Rc(_,e,t).then(w=>{if((w||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(_.targetId,w?.fromCache?"not-current":"current"),w){i.push(w);const T=wE.Li(_.targetId,w);a.push(T)}}))}),yield Promise.all(l),r.dc.nu(i),yield(d=(0,me.Z)(function*(_,w){const T=Je(_);try{yield T.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>se.forEach(w,P=>se.forEach(P.Fi,U=>T.persistence.referenceDelegate.addReference(S,P.targetId,U)).next(()=>se.forEach(P.Bi,U=>T.persistence.referenceDelegate.removeReference(S,P.targetId,U)))))}catch(S){if(!Tt(S))throw S;Ve("LocalStore","Failed to update sequence numbers: "+S)}for(const S of w){const P=S.targetId;if(!S.fromCache){const U=T.Ji.get(P),de=U.withLastLimboFreeSnapshotVersion(U.snapshotVersion);T.Ji=T.Ji.insert(P,de)}}}),function(_,w){return d.apply(this,arguments)})(r.localStore,a))}),tR.apply(this,arguments)}function r2(n,e){return nR.apply(this,arguments)}function nR(){return nR=(0,me.Z)(function*(n,e){const t=Je(n);if(!t.currentUser.isEqual(e)){Ve("SyncEngine","User change. New user:",e.toKey());const r=yield EE(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(d=>{d.reject(new Re(ce.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield eh(t,r.er)}var i}),nR.apply(this,arguments)}function i2(n,e){const t=Je(n),r=t.yc.get(e);if(r&&r.fc)return Wt().add(r.key);{let i=Wt();const a=t._c.get(e);if(!a)return i;for(const l of a){const d=t.wc.get(l);i=i.unionWith(d.view.nc)}return i}}function s2(n,e){return rR.apply(this,arguments)}function rR(){return rR=(0,me.Z)(function*(n,e){const t=Je(n),r=yield bE(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&Xx(t,e.targetId,i.cc),i}),rR.apply(this,arguments)}function o2(n,e){return iR.apply(this,arguments)}function iR(){return iR=(0,me.Z)(function*(n,e){const t=Je(n);return PD(t.localStore,e).then(r=>eh(t,r))}),iR.apply(this,arguments)}function a2(n,e,t,r){return sR.apply(this,arguments)}function sR(){return sR=(0,me.Z)(function*(n,e,t,r){const i=Je(n),a=yield function(l,d){const _=Je(l),w=Je(_.mutationQueue);return _.persistence.runTransaction("Lookup mutation documents","readonly",T=>w.Sn(T,d).next(S=>S?_.localDocuments.getDocuments(T,S):se.resolve(null)))}(i.localStore,e);var d;null!==a?("pending"===t?yield gc(i.remoteStore):"acknowledged"===t||"rejected"===t?(Jx(i,e,r||null),Qx(i,e),d=e,Je(Je(i.localStore).mutationQueue).Cn(d)):nt(),yield eh(i,a)):Ve("SyncEngine","Cannot apply mutation batch with id: "+e)}),sR.apply(this,arguments)}function oR(){return oR=(0,me.Z)(function*(n,e){const t=Je(n);if(cR(t),dR(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield ZP(t,r.toArray());t.vc=!0,yield Nx(t.remoteStore,!0);for(const a of i)C(t.remoteStore,a)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((a,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(Nv(t,l),Fm(t.localStore,l,!0))),D(t.remoteStore,l)}),yield i,yield ZP(t,r),function(a){const l=Je(a);l.yc.forEach((d,_)=>{D(l.remoteStore,_)}),l.Ic.Ts(),l.yc=new Map,l.gc=new Xn(Ye.comparator)}(t),t.vc=!1,yield Nx(t.remoteStore,!1)}}),oR.apply(this,arguments)}function ZP(n,e,t){return aR.apply(this,arguments)}function aR(){return aR=(0,me.Z)(function*(n,e,t){const r=Je(n),i=[],a=[];for(const l of e){let d;const _=r._c.get(l);if(_&&0!==_.length){d=yield Om(r.localStore,Rs(_[0]));for(const w of _){const T=r.wc.get(w),S=yield s2(r,T);S.snapshot&&a.push(S.snapshot)}}else{const w=yield DE(r.localStore,l);d=yield Om(r.localStore,w),yield $x(r,YP(w),l,!1,d.resumeToken)}i.push(d)}return r.dc.nu(a),i}),aR.apply(this,arguments)}function YP(n){return Wb(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function l2(n){const e=Je(n);return Je(Je(e.localStore).persistence).$i()}function c2(n,e,t,r){return uR.apply(this,arguments)}function uR(){return uR=(0,me.Z)(function*(n,e,t,r){const i=Je(n);if(i.vc)return void Ve("SyncEngine","Ignoring unexpected query state notification.");const a=i._c.get(e);if(a&&a.length>0)switch(t){case"current":case"not-current":{const l=yield PD(i.localStore,Kb(a[0])),d=Yy.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,ei.EMPTY_BYTE_STRING);yield eh(i,l,d);break}case"rejected":yield Fm(i.localStore,e,!0),Nv(i,e,r);break;default:nt()}}),uR.apply(this,arguments)}function d2(n,e,t){return lR.apply(this,arguments)}function lR(){return lR=(0,me.Z)(function*(n,e,t){const r=cR(n);if(r.vc){for(const i of e){if(r._c.has(i)){Ve("SyncEngine","Adding an already active target "+i);continue}const a=yield DE(r.localStore,i),l=yield Om(r.localStore,a);yield $x(r,YP(a),l.targetId,!1,l.resumeToken),C(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield Fm(r.localStore,i,!1).then(()=>{D(r.remoteStore,i),Nv(r,i)}).catch(ro))}}),lR.apply(this,arguments)}function cR(n){const e=Je(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=WP.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=i2.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=JV.bind(null,e),e.dc.nu=$V.bind(null,e.eventManager),e.dc.Pc=HV.bind(null,e.eventManager),e}function dR(n){const e=Je(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=XV.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=e2.bind(null,e),e}class LE{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,me.Z)(function*(){t.serializer=Um(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return fc(this.persistence,new xD,e.initialUser,this.serializer)}createPersistence(e){return new mv(_v.zs,this.serializer)}createSharedClientState(e){return new LD}terminate(){var e=this;return(0,me.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hR extends LE{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield dR(r.Vc.syncEngine),yield gc(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return fc(this.persistence,new xD,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new CD(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new Ny(t,this.persistence);return new yA(e.asyncQueue,r)}createPersistence(e){const t=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Gi.withCacheSize(this.cacheSizeBytes):Gi.DEFAULT;return new AD(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,Tx(),NE(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new LD}}class QP extends hR{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,me.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof RE&&(r.sharedClientState.syncEngine={jr:a2.bind(null,i),zr:c2.bind(null,i),Wr:d2.bind(null,i),$i:l2.bind(null,i),Qr:o2.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var a=(0,me.Z)(function*(l){yield function u2(n,e){return oR.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return a.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Tx();if(!RE.D(t))throw new Re(ce.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=rp(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new RE(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Pv{initialize(e,t){var r=this;return(0,me.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>qP(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=r2.bind(null,r.syncEngine),yield Nx(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new jV}createDatastore(e){const t=Um(e.databaseInfo.databaseId),r=new kP(e.databaseInfo);return new LP(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,a=d=>qP(this.syncEngine,d,0),l=bx.D()?new bx:new NP,new u(t,r,i,a,l);var t,r,i,a,l}createSyncEngine(e,t){return function(r,i,a,l,d,_,w){const T=new KV(r,i,a,l,d,_);return w&&(T.vc=!0),T}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,me.Z)(function*(t){const r=Je(t);Ve("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield m(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function JP(n,e=10240){let t=0;return{read:()=>(0,me.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,me.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class UD{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):br("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class p2{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Gr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,me.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,me.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,me.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const a=yield e.$c(i);return new GV(JSON.parse(a),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,me.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,me.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,me.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class g2{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,me.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Re(ce.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,me.Z)(function*(a,l){const d=Je(a),_=nv(d.serializer)+"/documents",w={documents:l.map(U=>Ba(d.serializer,U))},T=yield d.vo("BatchGetDocuments",_,w,l.length),S=new Map;T.forEach(U=>{const q=function JA(n,e){return"found"in e?function(t,r){wt(!!r.found);const i=ja(t,r.found.name),a=Sr(r.found.updateTime),l=r.found.createTime?Sr(r.found.createTime):Dt.min(),d=new Mi({mapValue:{fields:r.found.fields}});return zn.newFoundDocument(i,a,l,d)}(n,e):"missing"in e?function(t,r){wt(!!r.missing),wt(!!r.readTime);const i=ja(t,r.missing),a=Sr(r.readTime);return zn.newNoDocument(i,a)}(n,e):nt()}(d.serializer,U);S.set(q.key.toString(),q)});const P=[];return l.forEach(U=>{const q=S.get(U.toString());wt(!!q),P.push(q)}),P}),function(a,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Kf(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,me.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const a=Ye.fromPath(i);e.mutations.push(new q0(a,e.precondition(a)))}),yield(r=(0,me.Z)(function*(i,a){const l=Je(i),d=nv(l.serializer)+"/documents",_={writes:a.map(w=>Qf(l.serializer,w))};yield l.Io("Commit",d,_)}),function(i,a){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw nt();t=Dt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new Re(ce.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Dt.min())?er.exists(!1):er.updateTime(t):er.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Dt.min()))throw new Re(ce.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return er.updateTime(t)}return er.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class m2{constructor(e,t,r,i,a){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=a,this.Bc=r.maxAttempts,this.qo=new VD(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,me.Z)(function*(){const t=new g2(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(a=>{e.Uc(a)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Gn(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!K0(t)}return!1}}class _2{constructor(e,t,r,i){var a=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Xr.UNAUTHENTICATED,this.clientId=gb.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,me.Z)(function*(d){Ve("FirestoreClient","Received user=",d.uid),yield a.authCredentialListener(d),a.user=d});return function(d){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(Ve("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,me.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Re(ce.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=xv(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function BD(n,e){return fR.apply(this,arguments)}function fR(){return fR=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),Ve("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,me.Z)(function*(a){r.isEqual(a)||(yield EE(e.localStore,a),r=a)});return function(a){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),fR.apply(this,arguments)}function pR(n,e){return gR.apply(this,arguments)}function gR(){return gR=(0,me.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield mR(n);Ve("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>UP(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,a)=>UP(e.remoteStore,a)),n._onlineComponents=e}),gR.apply(this,arguments)}function XP(n){return"FirebaseError"===n.name?n.code===ce.FAILED_PRECONDITION||n.code===ce.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function mR(n){return _R.apply(this,arguments)}function _R(){return _R=(0,me.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){Ve("FirestoreClient","Using user provided OfflineComponentProvider");try{yield BD(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!XP(t))throw t;no("Error using user provided cache. Falling back to memory cache: "+t),yield BD(n,new LE)}}else Ve("FirestoreClient","Using default OfflineComponentProvider"),yield BD(n,new LE);return n._offlineComponents}),_R.apply(this,arguments)}function jD(n){return yR.apply(this,arguments)}function yR(){return yR=(0,me.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(Ve("FirestoreClient","Using user provided OnlineComponentProvider"),yield pR(n,n._uninitializedComponentsProvider._online)):(Ve("FirestoreClient","Using default OnlineComponentProvider"),yield pR(n,new Pv))),n._onlineComponents}),yR.apply(this,arguments)}function ek(n){return mR(n).then(e=>e.persistence)}function $D(n){return mR(n).then(e=>e.localStore)}function tk(n){return jD(n).then(e=>e.remoteStore)}function vR(n){return jD(n).then(e=>e.syncEngine)}function kv(n){return wR.apply(this,arguments)}function wR(){return wR=(0,me.Z)(function*(n){const e=yield jD(n),t=e.eventManager;return t.onListen=ZV.bind(null,e.syncEngine),t.onUnlisten=YV.bind(null,e.syncEngine),t}),wR.apply(this,arguments)}function rk(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,l,d,_){const w=new UD({next:S=>{a.enqueueAndForget(()=>Lx(i,T));const P=S.docs.has(l);!P&&S.fromCache?_.reject(new Re(ce.UNAVAILABLE,"Failed to get document because the client is offline.")):P&&S.fromCache&&d&&"server"===d.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new Bx(zd(l.path),w,{includeMetadataChanges:!0,Ku:!0});return Ox(i,T)}(yield kv(n),n.asyncQueue,e,t,r)})),r.promise}function ik(n,e,t={}){const r=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function(i,a,l,d,_){const w=new UD({next:S=>{a.enqueueAndForget(()=>Lx(i,T)),S.fromCache&&"server"===d.source?_.reject(new Re(ce.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):_.resolve(S)},error:S=>_.reject(S)}),T=new Bx(l,w,{includeMetadataChanges:!0,Ku:!0});return Ox(i,T)}(yield kv(n),n.asyncQueue,e,t,r)})),r.promise}function sk(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const ok=new Map;function ER(n,e,t){if(!t)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function ak(n,e,t,r){if(!0===e&&!0===r)throw new Re(ce.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function uk(n){if(!Ye.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function lk(n){if(Ye.isDocumentKey(n))throw new Re(ce.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function HD(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":nt()}function cn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new Re(ce.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=HD(n);throw new Re(ce.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function ck(n,e){if(e<=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class dk{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new Re(ce.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Re(ce.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}ak("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=sk(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Re(ce.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class VE{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new dk({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Re(ce.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new dk(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new fb;switch(t.type){case"firstParty":return new fA(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Re(ce.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=ok.get(e);t&&(Ve("ComponentProvider","Removing Datastore"),ok.delete(e),t.terminate())}(this),Promise.resolve()}}class gr{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new mc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new gr(this.firestore,e,this._key)}}class ps{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ps(this.firestore,e,this._query)}}class mc extends ps{constructor(e,t,r){super(e,t,zd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new gr(this.firestore,null,new Ye(e))}withConverter(e){return new mc(this.firestore,e,this._path)}}function fk(n,e,...t){if(n=(0,k.m9)(n),ER("collection","path",e),n instanceof VE){const r=an.fromString(e,...t);return lk(r),new mc(n,null,r)}{if(!(n instanceof gr||n instanceof mc))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return lk(r),new mc(n.firestore,null,r)}}function GD(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=gb.A()),ER("doc","path",e),n instanceof VE){const r=an.fromString(e,...t);return uk(r),new gr(n,null,new Ye(r))}{if(!(n instanceof gr||n instanceof mc))throw new Re(ce.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(an.fromString(e,...t));return uk(r),new gr(n.firestore,n instanceof mc?n.converter:null,new Ye(r))}}function pk(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof gr||n instanceof mc)&&(e instanceof gr||e instanceof mc)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function IR(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof ps&&e instanceof ps&&n.firestore===e.firestore&&Bf(n._query,e._query)&&n.converter===e.converter}class S2{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new VD(this,"async_queue_retry"),this.Xc=()=>{const t=NE();t&&Ve("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=NE();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=NE();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Gr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,me.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Tt(t))throw t;Ve("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,br("INTERNAL UNHANDLED ERROR: ",function(a){let l=a.message||"";return a.stack&&(l=a.stack.includes(a.message)?a.stack:a.message+"\n"+a.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=kx.createAndSchedule(this,e,t,r,a=>this.na(a));return this.zc.push(i),i}Zc(){this.Wc&&nt()}verifyOperationInProgress(){}sa(){var e=this;return(0,me.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function CR(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class A2{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class mr extends VE{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new S2,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||gk(this),this._firestoreClient.terminate()}}function ni(n){return n._firestoreClient||gk(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function gk(n){var e,t,r;const i=n._freezeSettings(),a=(d=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new NA(n._databaseId,d,n._persistenceKey,(w=i).host,w.ssl,w.experimentalForceLongPolling,w.experimentalAutoDetectLongPolling,sk(w.experimentalLongPollingOptions),w.useFetchStreams));var d,w;n._firestoreClient=new _2(n._authCredentials,n._appCheckCredentials,n._queue,a),(null===(t=i.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(r=i.cache)||void 0===r?void 0:r._onlineComponentProvider)&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function mk(n,e,t){const r=new Gr;return n.asyncQueue.enqueue((0,me.Z)(function*(){try{yield BD(n,t),yield pR(n,e),r.resolve()}catch(i){const a=i;if(!XP(a))throw a;no("Error enabling indexeddb cache. Falling back to memory cache: "+a),r.reject(a)}})).then(()=>r.promise)}function _k(n){if(n._initialized||n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class _c{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _c(ei.fromBase64String(e))}catch(t){throw new Re(ce.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _c(ei.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class th{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Re(ce.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Dr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class $m{constructor(e){this._methodName=e}}class zD{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Re(ce.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Re(ce.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return jt(this._lat,e._lat)||jt(this._long,e._long)}}const U2=/^__.*__$/;class B2{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ra(e,this.data,this.fieldMask,t,this.fieldTransforms):new qd(e,this.data,t,this.fieldTransforms)}}class yk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ra(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function vk(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nt()}}class WD{constructor(e,t,r,i,a,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===a&&this.ua(),this.fieldTransforms=a||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new WD(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return ZD(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(vk(this.ca)&&U2.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class j2{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||Um(e)}ya(e,t,r,i=!1){return new WD({ca:e,methodName:t,ga:r,path:Dr.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Hm(n){const e=n._freezeSettings(),t=Um(n._databaseId);return new j2(n._databaseId,!!e.ignoreUndefinedProperties,t)}function qD(n,e,t,r,i,a={}){const l=n.ya(a.merge||a.mergeFields?2:0,e,t,i);SR("Data must be an object, but it was:",l,r);const d=Ik(r,l);let _,w;if(a.merge)_=new cs(l.fieldMask),w=l.fieldTransforms;else if(a.mergeFields){const T=[];for(const S of a.mergeFields){const P=jE(e,S,t);if(!l.contains(P))throw new Re(ce.INVALID_ARGUMENT,`Field '${P}' is specified in your field mask but missing from your input data.`);bk(T,P)||T.push(P)}_=new cs(T),w=l.fieldTransforms.filter(S=>_.covers(S.field))}else _=null,w=l.fieldTransforms;return new B2(new Mi(d),_,w)}class BE extends $m{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof BE}}function wk(n,e,t){return new WD({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bR extends $m{_toFieldTransform(e){return new wm(e.path,new Gf)}isEqual(e){return e instanceof bR}}class $2 extends $m{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=wk(this,e,!0),r=this.pa.map(a=>Gm(a,t)),i=new Uu(r);return new wm(e.path,i)}isEqual(e){return this===e}}class H2 extends $m{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=wk(this,e,!0),r=this.pa.map(a=>Gm(a,t)),i=new Wd(r);return new wm(e.path,i)}isEqual(e){return this===e}}class G2 extends $m{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Wf(e.serializer,Jb(e.serializer,this.Ia));return new wm(e.path,t)}isEqual(e){return this===e}}function DR(n,e,t,r){const i=n.ya(1,e,t);SR("Data must be an object, but it was:",i,r);const a=[],l=Mi.empty();Ud(r,(_,w)=>{const T=KD(e,_,t);w=(0,k.m9)(w);const S=i.da(T);if(w instanceof BE)a.push(T);else{const P=Gm(w,S);null!=P&&(a.push(T),l.set(T,P))}});const d=new cs(a);return new yk(l,d,i.fieldTransforms)}function TR(n,e,t,r,i,a){const l=n.ya(1,e,t),d=[jE(e,r,t)],_=[i];if(a.length%2!=0)throw new Re(ce.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let P=0;P<a.length;P+=2)d.push(jE(e,a[P])),_.push(a[P+1]);const w=[],T=Mi.empty();for(let P=d.length-1;P>=0;--P)if(!bk(w,d[P])){const U=d[P];let q=_[P];q=(0,k.m9)(q);const de=l.da(U);if(q instanceof BE)w.push(U);else{const fe=Gm(q,de);null!=fe&&(w.push(U),T.set(U,fe))}}const S=new cs(w);return new yk(T,S,l.fieldTransforms)}function Ek(n,e,t,r=!1){return Gm(t,n.ya(r?4:3,e))}function Gm(n,e){if(Ck(n=(0,k.m9)(n)))return SR("Unsupported field value:",e,n),Ik(n,e);if(n instanceof $m)return function(t,r){if(!vk(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let a=0;for(const l of t){let d=Gm(l,r.wa(a));null==d&&(d={nullValue:"NULL_VALUE"}),i.push(d),a++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Jb(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=ar.fromDate(t);return{timestampValue:Bu(r.serializer,i)}}if(t instanceof ar){const i=new ar(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Bu(r.serializer,i)}}if(t instanceof zD)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof _c)return{bytesValue:Xy(r.serializer,t._byteString)};if(t instanceof gr){const i=r.databaseId,a=t.firestore._databaseId;if(!a.isEqual(i))throw r._a(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:eE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${HD(t)}`)}(n,e)}function Ik(n,e){const t={};return xA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ud(n,(r,i)=>{const a=Gm(i,e.ha(r));null!=a&&(t[r]=a)}),{mapValue:{fields:t}}}function Ck(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof ar||n instanceof zD||n instanceof _c||n instanceof gr||n instanceof $m)}function SR(n,e,t){if(!Ck(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=HD(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function jE(n,e,t){if((e=(0,k.m9)(e))instanceof th)return e._internalPath;if("string"==typeof e)return KD(n,e);throw ZD("Field path arguments must be of type string or ",n,!1,void 0,t)}const z2=new RegExp("[~\\*/\\[\\]]");function KD(n,e,t){if(e.search(z2)>=0)throw ZD(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new th(...e.split("."))._internalPath}catch{throw ZD(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function ZD(n,e,t,r,i){const a=r&&!r.isEmpty(),l=void 0!==i;let d=`Function ${e}() called with invalid data`;t&&(d+=" (via `toFirestore()`)"),d+=". ";let _="";return(a||l)&&(_+=" (found",a&&(_+=` in field ${r}`),l&&(_+=` in document ${i}`),_+=")"),new Re(ce.INVALID_ARGUMENT,d+n+_)}function bk(n,e){return n.some(t=>t.isEqual(e))}class $E{constructor(e,t,r,i,a){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=a}get id(){return this._key.path.lastSegment()}get ref(){return new gr(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new W2(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(YD("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class W2 extends $E{data(){return super.data()}}function YD(n,e){return"string"==typeof e?KD(n,e):e instanceof th?e._internalPath:e._delegate._internalPath}function Dk(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new Re(ce.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AR{}class HE extends AR{}function sp(n,e,...t){let r=[];e instanceof AR&&r.push(e),r=r.concat(t),function(i){const a=i.filter(d=>d instanceof Ov).length,l=i.filter(d=>d instanceof GE).length;if(a>1||a>0&&l>0)throw new Re(ce.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class GE extends HE{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new GE(e,t,r)}_apply(e){const t=this._parse(e);return xk(e._query,t),new ps(e.firestore,e.converter,B0(e._query,t))}_parse(e){const t=Hm(e.firestore);return function(i,a,l,d,_,w,T){let S;if(_.isKeyField()){if("array-contains"===w||"array-contains-any"===w)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if("in"===w||"not-in"===w){Ak(T,w);const P=[];for(const U of T)P.push(Sk(d,i,U));S={arrayValue:{values:P}}}else S=Sk(d,i,T)}else"in"!==w&&"not-in"!==w&&"array-contains-any"!==w||Ak(T,w),S=Ek(l,"where",T,"in"===w||"not-in"===w);return Qt.create(_,w,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Ov extends AR{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Ov(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:En.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let a=r;const l=i.getFlattenedFilters();for(const d of l)xk(a,d),a=B0(a,d)}(e._query,t),new ps(e.firestore,e.converter,B0(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class xR extends HE{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xR(e,t)}_apply(e){const t=function(r,i,a){if(null!==r.startAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new Lf(i,a);return function(d,_){if(null===jy(d)){const w=$y(d);null!==w&&Rk(0,w,_.field)}}(r,l),l}(e._query,this._field,this._direction);return new ps(e.firestore,e.converter,function(r,i){const a=r.explicitOrderBy.concat([i]);return new Lu(r.path,r.collectionGroup,a,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class QD extends HE{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new QD(e,t,r)}_apply(e){return new ps(e.firestore,e.converter,Hy(e._query,this._limit,this._limitType))}}class JD extends HE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new JD(e,t,r)}_apply(e){const t=Tk(e,this.type,this._docOrFields,this._inclusive);return new ps(e.firestore,e.converter,(i=t,new Lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class XD extends HE{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new XD(e,t,r)}_apply(e){const t=Tk(e,this.type,this._docOrFields,this._inclusive);return new ps(e.firestore,e.converter,(i=t,new Lu((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function Tk(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof $E)return function(i,a,l,d,_){if(!d)throw new Re(ce.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const w=[];for(const T of Uf(i))if(T.field.isKeyField())w.push(jd(a,d.key));else{const S=d.data.field(T.field);if(Fy(S))throw new Re(ce.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+T.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const P=T.field.canonicalString();throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${P}' (used as the orderBy) does not exist.`)}w.push(S)}return new sc(w,_)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Hm(n.firestore);return function(a,l,d,_,w,T){const S=a.explicitOrderBy;if(w.length>S.length)throw new Re(ce.INVALID_ARGUMENT,`Too many arguments provided to ${_}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const P=[];for(let U=0;U<w.length;U++){const q=w[U];if(S[U].field.isKeyField()){if("string"!=typeof q)throw new Re(ce.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${_}(), but got a ${typeof q}`);if(!U0(a)&&-1!==q.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${_}() must be a plain document ID, but '${q}' contains a slash.`);const de=a.path.child(an.fromString(q));if(!Ye.isDocumentKey(de))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${_}() must result in a valid document path, but '${de}' is not because it contains an odd number of segments.`);const fe=new Ye(de);P.push(jd(l,fe))}else{const de=Ek(d,_,q);P.push(de)}}return new sc(P,T)}(n._query,n.firestore._databaseId,i,e,t,r)}}function Sk(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new Re(ce.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!U0(e)&&-1!==t.indexOf("/"))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(an.fromString(t));if(!Ye.isDocumentKey(r))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jd(n,new Ye(r))}if(t instanceof gr)return jd(n,t._key);throw new Re(ce.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${HD(t)}.`)}function Ak(n,e){if(!Array.isArray(n)||0===n.length)throw new Re(ce.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xk(n,e){if(e.isInequality()){const r=$y(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const a=jy(n);null!==a&&Rk(0,i,a)}const t=function(r,i){for(const a of r)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Re(ce.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function Rk(n,e,t){if(!t.isEqual(e))throw new Re(ce.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class RR{convertValue(e,t="none"){switch(ic(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Tr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Va(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw nt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Ud(e,(i,a)=>{r[i]=this.convertValue(a,t)}),r}convertGeoPoint(e){return new zD(Tr(e.latitude),Tr(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=Ly(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ou(e));default:return null}}convertTimestamp(e){const t=nc(e);return new ar(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=an.fromString(e);wt(ix(r));const i=new Fu(r.get(1),r.get(3)),a=new Ye(r.popFirst(5));return i.isEqual(t)||br(`Document ${a} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),a}}function eT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class tU extends RR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,t)}}class zm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class nh extends $E{constructor(e,t,r,i,a,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=a}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new zE(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(YD("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class zE extends nh{data(e={}){return super.data(e)}}class op{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new zm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new zE(this._firestore,this._userDataWriter,r.key,r,new zm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Re(ce.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let a=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new zE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new zm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:a++}))}{let a=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const d=new zE(r._firestore,r._userDataWriter,l.doc.key,l.doc,new zm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let _=-1,w=-1;return 0!==l.type&&(_=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),1!==l.type&&(a=a.add(l.doc),w=a.indexOf(l.doc.key)),{type:rU(l.type),doc:d,oldIndex:_,newIndex:w}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function rU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nt()}}function Nk(n,e){return n instanceof nh&&e instanceof nh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof op&&e instanceof op&&n._firestore===e._firestore&&IR(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class ap extends RR{constructor(e){super(),this.firestore=e}convertBytes(e){return new _c(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new gr(this.firestore,null,t)}}function Pk(n,e,t){n=cn(n,gr);const r=cn(n.firestore,mr),i=eT(n.converter,e,t);return Fv(r,[qD(Hm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,er.none())])}function kk(n,e,t,...r){n=cn(n,gr);const i=cn(n.firestore,mr),a=Hm(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof th?TR(a,"updateDoc",n._key,e,t,r):DR(a,"updateDoc",n._key,e),Fv(i,[l.toMutation(n._key,er.exists(!0))])}function Ok(n,...e){var t,r,i;n=(0,k.m9)(n);let a={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||CR(e[l])||(a=e[l],l++);const d={includeMetadataChanges:a.includeMetadataChanges};if(CR(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let _,w,T;if(n instanceof gr)w=cn(n.firestore,mr),T=zd(n._key.path),_={next:S=>{e[l]&&e[l](MR(w,n,S))},error:e[l+1],complete:e[l+2]};else{const S=cn(n,ps);w=cn(S.firestore,mr),T=S._query;const P=new ap(w);_={next:U=>{e[l]&&e[l](new op(w,P,S,U))},error:e[l+1],complete:e[l+2]},Dk(n._query)}return function(S,P,U,q){const de=new UD(q),fe=new Bx(P,de,U);return S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Ox(yield kv(S),fe)})),()=>{de.Dc(),S.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return Lx(yield kv(S),fe)}))}}(ni(w),T,d,_)}function Fv(n,e){return function(t,r){const i=new Gr;return t.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function QV(n,e,t){return zx.apply(this,arguments)}(yield vR(t),r,i)})),i.promise}(ni(n),e)}function MR(n,e,t){const r=t.docs.get(e._key),i=new ap(n);return new nh(n,i,e._key,r,new zm(t.hasPendingWrites,t.fromCache),e.converter)}const EU={maxAttempts:5};class Fk{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Hm(e)}set(e,t,r){this._verifyNotCommitted();const i=up(e,this._firestore),a=eT(i.converter,t,r),l=qD(this._dataReader,"WriteBatch.set",i._key,a,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,er.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const a=up(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof th?TR(this._dataReader,"WriteBatch.update",a._key,t,r,i):DR(this._dataReader,"WriteBatch.update",a._key,t),this._mutations.push(l.toMutation(a._key,er.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=up(e,this._firestore);return this._mutations=this._mutations.concat(new Kf(t._key,er.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Re(ce.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function up(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new Re(ce.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class IU extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Hm(e)}get(e){const t=up(e,this._firestore),r=new tU(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return nt();const a=i[0];if(a.isFoundDocument())return new $E(this._firestore,r,a.key,a,t.converter);if(a.isNoDocument())return new $E(this._firestore,r,t._key,null,t.converter);throw nt()})}set(e,t,r){const i=up(e,this._firestore),a=eT(i.converter,t,r),l=qD(this._dataReader,"Transaction.set",i._key,a,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const a=up(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof th?TR(this._dataReader,"Transaction.update",a._key,t,r,i):DR(this._dataReader,"Transaction.update",a._key,t),this._transaction.update(a._key,l),this}delete(e){const t=up(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=up(e,this._firestore),r=new ap(this._firestore);return super.get(e).then(i=>new nh(this._firestore,r,t._key,i._document,new zm(!1,!1),t.converter))}}function NR(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Re("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function Vk(){if(typeof Uint8Array>"u")throw new Re("unimplemented","Uint8Arrays are not available in this environment.")}function Uk(){if(!function RA(){return typeof atob<"u"}())throw new Re("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Nf=$i.SDK_VERSION,(0,$i._registerComponent)(new Xs.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const a=t.getProvider("app").getImmediate(),l=new mr(new dA(t.getProvider("auth-internal")),new pA(t.getProvider("app-check-internal")),function(d,_){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new Re(ce.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Fu(d.options.projectId,_)}(a,r),a);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,$i.registerVersion)(db,"3.13.0",n),(0,$i.registerVersion)(db,"3.13.0","esm2017")}();class WE{constructor(e){this._delegate=e}static fromBase64String(e){return Uk(),new WE(_c.fromBase64String(e))}static fromUint8Array(e){return Vk(),new WE(_c.fromUint8Array(e))}toBase64(){return Uk(),this._delegate.toBase64()}toUint8Array(){return Vk(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function PR(n){return function MU(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class NU{enableIndexedDbPersistence(e,t){return function R2(n,e){_k(n=cn(n,mr));const t=ni(n);if(t._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");no("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Pv;return mk(t,i,new hR(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function M2(n){_k(n=cn(n,mr));const e=ni(n);if(e._uninitializedComponentsProvider)throw new Re(ce.FAILED_PRECONDITION,"SDK cache is already specified.");no("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Pv;return mk(e,r,new QP(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function N2(n){if(n._initialized&&!n._terminated)throw new Re(ce.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gr;return n._queue.enqueueAndForgetEvenWhileRestricted((0,me.Z)(function*(){try{yield(t=(0,me.Z)(function*(r){if(!bo.D())return Promise.resolve();const i=r+"main";yield bo.delete(i)}),function(r){return t.apply(this,arguments)})(rp(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Bk{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Fu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&no("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function hk(n,e,t,r={}){var i;const a=(n=cn(n,VE))._getSettings(),l=`${e}:${t}`;if("firestore.googleapis.com"!==a.host&&a.host!==l&&no("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},a),{host:l,ssl:!1})),r.mockUserToken){let d,_;if("string"==typeof r.mockUserToken)d=r.mockUserToken,_=Xr.MOCK_USER;else{d=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const w=r.mockUserToken.sub||r.mockUserToken.user_id;if(!w)throw new Re(ce.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");_=new Xr(w)}n._authCredentials=new cA(new w0(d,_))}}(this._delegate,e,t,r)}enableNetwork(){return function k2(n){return function y2(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ek(n),t=yield tk(n);return e.setNetworkEnabled(!0),function(r){const i=Je(r);return i.vu.delete(0),c(i)}(t)}))}(ni(n=cn(n,mr)))}(this._delegate)}disableNetwork(){return function O2(n){return function v2(n){return n.asyncQueue.enqueue((0,me.Z)(function*(){const e=yield ek(n),t=yield tk(n);return e.setNetworkEnabled(!1),(r=(0,me.Z)(function*(i){const a=Je(i);a.vu.add(0),yield m(a),a.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(ni(n=cn(n,mr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,ak("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function P2(n){return function(e){const t=new Gr;return e.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return function t2(n,e){return Yx.apply(this,arguments)}(yield vR(e),t)})),t.promise}(ni(n=cn(n,mr)))}(this._delegate)}onSnapshotsInSync(e){return function hU(n,e){return function I2(n,e){const t=new UD(e);return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield kv(n),i=t,Je(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return r=yield kv(n),i=t,void Je(r).ku.delete(i);var r,i}))}}(ni(n=cn(n,mr)),CR(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Re("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new Lv(this,fk(this._delegate,e))}catch(t){throw io(t,"collection()","Firestore.collection()")}}doc(e){try{return new Ha(this,GD(this._delegate,e))}catch(t){throw io(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new so(this,function T2(n,e){if(n=cn(n,VE),ER("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Re(ce.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ps(n,null,(t=e,new Lu(an.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw io(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function CU(n,e,t){n=cn(n,mr);const r=Object.assign(Object.assign({},EU),t);return function(i){if(i.maxAttempts<1)throw new Re(ce.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,a,l){const d=new Gr;return i.asyncQueue.enqueueAndForget((0,me.Z)(function*(){const _=yield function nk(n){return jD(n).then(e=>e.datastore)}(i);new m2(i.asyncQueue,_,l,a,d).run()})),d.promise}(ni(n),i=>e(new IU(n,i)),r)}(this._delegate,t=>e(new jk(this,t)))}batch(){return ni(this._delegate),new $k(new Fk(this._delegate,e=>Fv(this._delegate,e)))}loadBundle(e){return function F2(n,e){const t=ni(n=cn(n,mr)),r=new A2;return function C2(n,e,t,r){const i=function(a,l){let d;return d="string"==typeof a?sD().encode(a):a,_=function(_,w){if(_ instanceof Uint8Array)return JP(_,w);if(_ instanceof ArrayBuffer)return JP(new Uint8Array(_),w);if(_ instanceof ReadableStream)return _.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(d),new p2(_,l);var _}(t,Um(e));n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){!function h2(n,e,t){const r=Je(n);var i;(i=(0,me.Z)(function*(a,l,d){try{const _=yield l.getMetadata();if(yield function(P,U){const q=Je(P),de=Sr(U.createTime);return q.persistence.runTransaction("hasNewerBundle","readonly",fe=>q.qs.getBundleMetadata(fe,U.id)).then(fe=>!!fe&&fe.createTime.compareTo(de)>=0)}(a.localStore,_))return yield l.close(),d._completeWith({taskState:"Success",documentsLoaded:(P=_).totalDocuments,bytesLoaded:P.totalBytes,totalDocuments:P.totalDocuments,totalBytes:P.totalBytes}),Promise.resolve(new Set);d._updateProgress($P(_));const w=new zV(_,a.localStore,l.serializer);let T=yield l.bc();for(;T;){const P=yield w.zu(T);P&&d._updateProgress(P),T=yield l.bc()}const S=yield w.complete();return yield eh(a,S.Ju,void 0),yield function(P,U){const q=Je(P);return q.persistence.runTransaction("Save bundle","readwrite",de=>q.qs.saveBundleMetadata(de,U))}(a.localStore,_),d._completeWith(S.progress),Promise.resolve(S.Hu)}catch(_){return no("SyncEngine",`Loading bundle failed with ${_}`),d._failWith(_),Promise.resolve(new Set)}var P}),function(a,l,d){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield vR(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function L2(n,e){return function b2(n,e){return n.asyncQueue.enqueue((0,me.Z)(function*(){return function(t,r){const i=Je(t);return i.persistence.runTransaction("Get named query","readonly",a=>i.qs.getNamedQuery(a,r))}(yield $D(n),e)}))}(ni(n=cn(n,mr)),e).then(t=>t?new ps(n,null,t.query):null)}(this._delegate,e).then(t=>t?new so(this,t):null)}}class tT extends RR{constructor(e){super(),this.firestore=e}convertBytes(e){return new WE(new _c(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Ha.forKey(t,this.firestore,null)}}class jk{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new tT(e)}get(e){const t=qm(e);return this._delegate.get(t).then(r=>new qE(this._firestore,new nh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=qm(e);return r?(NR("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=qm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=qm(e);return this._delegate.delete(t),this}}class $k{constructor(e){this._delegate=e}set(e,t,r){const i=qm(e);return r?(NR("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const a=qm(e);return 2===arguments.length?this._delegate.update(a,t):this._delegate.update(a,t,r,...i),this}delete(e){const t=qm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Wm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new zE(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new KE(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Wm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let a=i.get(t);return a||(a=new Wm(e,new tT(e),t),i.set(t,a)),a}}Wm.INSTANCES=new WeakMap;class Ha{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new Re("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Ha(t,new gr(t._delegate,r,new Ye(e)))}static forKey(e,t,r){return new Ha(t,new gr(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new Lv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new Lv(this.firestore,fk(this._delegate,e))}catch(t){throw io(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof gr&&pk(this._delegate,e)}set(e,t){t=NR("DocumentReference.set",t);try{return t?Pk(this._delegate,e,t):Pk(this._delegate,e)}catch(r){throw io(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?kk(this._delegate,e):kk(this._delegate,e,t,...r)}catch(i){throw io(i,"updateDoc()","DocumentReference.update()")}}delete(){return function cU(n){return Fv(cn(n.firestore,mr),[new Kf(n._key,er.none())])}(this._delegate)}onSnapshot(...e){const t=Hk(e),r=Gk(e,i=>new qE(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return Ok(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function sU(n){n=cn(n,gr);const e=cn(n.firestore,mr),t=ni(e),r=new ap(e);return function w2(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,l){try{const d=yield function(_,w){const T=Je(_);return T.persistence.runTransaction("read document","readonly",S=>T.localDocuments.getDocument(S,w))}(i,a);d.isFoundDocument()?l.resolve(d):d.isNoDocument()?l.resolve(null):l.reject(new Re(ce.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(d){const _=xv(d,`Failed to get document '${a} from cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield $D(n),e,t);var r})),t.promise}(t,n._key).then(i=>new nh(e,r,n._key,i,new zm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function oU(n){n=cn(n,gr);const e=cn(n.firestore,mr);return rk(ni(e),n._key,{source:"server"}).then(t=>MR(e,n,t))}(this._delegate):function iU(n){n=cn(n,gr);const e=cn(n.firestore,mr);return rk(ni(e),n._key).then(t=>MR(e,n,t))}(this._delegate),t.then(r=>new qE(this.firestore,new nh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new Ha(this.firestore,this._delegate.withConverter(e?Wm.getInstance(this.firestore,e):null))}}function io(n,e,t){return n.message=n.message.replace(e,t),n}function Hk(n){for(const e of n)if("object"==typeof e&&!PR(e))return e;return{}}function Gk(n,e){var t,r;let i;return i=PR(n[0])?n[0]:PR(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:a=>{i.next&&i.next(e(a))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class qE{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Ha(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Nk(this._delegate,e._delegate)}}class KE extends qE{data(e){const t=this._delegate.data(e);return function hb(n,e){n||nt()}(void 0!==t),t}}class so{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new tT(e)}where(e,t,r){try{return new so(this.firestore,sp(this._delegate,function q2(n,e,t){const r=e,i=YD("where",n);return GE._create(i,r,t)}(e,t,r)))}catch(i){throw io(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new so(this.firestore,sp(this._delegate,function K2(n,e="asc"){const t=e,r=YD("orderBy",n);return xR._create(r,t)}(e,t)))}catch(r){throw io(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new so(this.firestore,sp(this._delegate,function Z2(n){return ck("limit",n),QD._create("limit",n,"F")}(e)))}catch(t){throw io(t,"limit()","Query.limit()")}}limitToLast(e){try{return new so(this.firestore,sp(this._delegate,function Y2(n){return ck("limitToLast",n),QD._create("limitToLast",n,"L")}(e)))}catch(t){throw io(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new so(this.firestore,sp(this._delegate,function Q2(...n){return JD._create("startAt",n,!0)}(...e)))}catch(t){throw io(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new so(this.firestore,sp(this._delegate,function J2(...n){return JD._create("startAfter",n,!1)}(...e)))}catch(t){throw io(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new so(this.firestore,sp(this._delegate,function X2(...n){return XD._create("endBefore",n,!1)}(...e)))}catch(t){throw io(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new so(this.firestore,sp(this._delegate,function eU(...n){return XD._create("endAt",n,!0)}(...e)))}catch(t){throw io(t,"endAt()","Query.endAt()")}}isEqual(e){return IR(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function uU(n){n=cn(n,ps);const e=cn(n.firestore,mr),t=ni(e),r=new ap(e);return function E2(n,e){const t=new Gr;return n.asyncQueue.enqueueAndForget((0,me.Z)(function*(){return(r=(0,me.Z)(function*(i,a,l){try{const d=yield bE(i,a,!0),_=new zP(a,d.ir),w=_.sc(d.documents),T=_.applyChanges(w,!1);l.resolve(T.snapshot)}catch(d){const _=xv(d,`Failed to execute query '${a} against cache`);l.reject(_)}}),function(i,a,l){return r.apply(this,arguments)})(yield $D(n),e,t);var r})),t.promise}(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate):"server"===e?.source?function lU(n){n=cn(n,ps);const e=cn(n.firestore,mr),t=ni(e),r=new ap(e);return ik(t,n._query,{source:"server"}).then(i=>new op(e,r,n,i))}(this._delegate):function aU(n){n=cn(n,ps);const e=cn(n.firestore,mr),t=ni(e),r=new ap(e);return Dk(n._query),ik(t,n._query).then(i=>new op(e,r,n,i))}(this._delegate),t.then(r=>new kR(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=Hk(e),r=Gk(e,i=>new kR(this.firestore,new op(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return Ok(this._delegate,t,r)}withConverter(e){return new so(this.firestore,this._delegate.withConverter(e?Wm.getInstance(this.firestore,e):null))}}class kU{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new KE(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class kR{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new so(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new KE(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new kU(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new KE(this._firestore,r))})}isEqual(e){return Nk(this._delegate,e._delegate)}}class Lv extends so{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Ha(this.firestore,e):null}doc(e){try{return new Ha(this.firestore,void 0===e?GD(this._delegate):GD(this._delegate,e))}catch(t){throw io(t,"doc()","CollectionReference.doc()")}}add(e){return function dU(n,e){const t=cn(n.firestore,mr),r=GD(n),i=eT(n.converter,e);return Fv(t,[qD(Hm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,er.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new Ha(this.firestore,t))}isEqual(e){return pk(this._delegate,e._delegate)}withConverter(e){return new Lv(this.firestore,this._delegate.withConverter(e?Wm.getInstance(this.firestore,e):null))}}function qm(n){return cn(n,gr)}class OR{constructor(...e){this._delegate=new th(...e)}static documentId(){return new OR(Dr.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof th&&this._delegate._internalPath.isEqual(e._internalPath)}}class Km{constructor(e){this._delegate=e}static serverTimestamp(){const e=function DU(){return new bR("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Km(e)}static delete(){const e=function bU(){return new BE("deleteField")}();return e._methodName="FieldValue.delete",new Km(e)}static arrayUnion(...e){const t=function TU(...n){return new $2("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Km(t)}static arrayRemove(...e){const t=function SU(...n){return new H2("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Km(t)}static increment(e){const t=function AU(n){return new G2("increment",n)}(e);return t._methodName="FieldValue.increment",new Km(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const OU={Firestore:Bk,GeoPoint:zD,Timestamp:ar,Blob:WE,Transaction:jk,WriteBatch:$k,DocumentReference:Ha,DocumentSnapshot:qE,Query:so,QueryDocumentSnapshot:KE,QuerySnapshot:kR,CollectionReference:Lv,FieldPath:OR,FieldValue:Km,setLogLevel:function PU(n){!function xy(n){Pu.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};!function LU(n){(function FU(n,e){n.INTERNAL.registerComponent(new Xs.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},OU)))})(n,(e,t)=>new Bk(e,t,new NU)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(kw.Z);var FR=V(6451),nT=V(5363),VU=V(6063);class UU extends hr.x{constructor(e=1/0,t=1/0,r=VU.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:a,_windowTime:l}=this;t||(r.push(e),!i&&r.push(a.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,a=i.slice();for(let l=0;l<a.length&&!e.closed;l+=r?1:2)e.next(a[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,a=(i?1:2)*e;if(e<1/0&&a<r.length&&r.splice(0,r.length-a),!i){const l=t.now();let d=0;for(let _=1;_<r.length&&r[_]<=l;_+=2)d=_;d&&r.splice(0,d+1)}}}var zk=V(3099);function Wk(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,zk.B)({connector:()=>new UU(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}function qk(n,e){return(0,ed.m)(e)?Hn(()=>n,e):Hn(()=>n)}var LR=V(9468);V(259);const UR=new Map,Zk={activated:!1,tokenObservers:[]},GU={initialized:!1,enabled:!1};function zr(n){return UR.get(n)||Object.assign({},Zk)}function iT(){return GU}class YU{constructor(e,t,r,i,a){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=a,this.pending=null,this.nextErrorWaitInterval=i,i>a)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,me.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function QU(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const gs=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function jR(n){if(!zr(n).activated)throw gs.create("use-before-activation",{appName:n.name})}function aT(n,e){return HR.apply(this,arguments)}function HR(){return HR=(0,me.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const a={method:"POST",body:JSON.stringify(e),headers:r};let l,d;try{l=yield fetch(n,a)}catch(S){throw gs.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw gs.create("fetch-status-error",{httpStatus:l.status});try{d=yield l.json()}catch(S){throw gs.create("fetch-parse-error",{originalErrorMessage:S?.message})}const _=d.ttl.match(/^([\d.]+)(s)$/);if(!_||!_[2]||isNaN(Number(_[1])))throw gs.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${d.ttl}`});const w=1e3*Number(_[1]),T=Date.now();return{token:d.token,expireTimeMillis:T+w,issuedAtTimeMillis:T}}),HR.apply(this,arguments)}function Qk(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${t}/apps/${r}:exchangeDebugToken?key=${i}`,body:{debug_token:e}}}const ZE="firebase-app-check-store";let uT=null;function Xk(){return uT||(uT=new Promise((n,e)=>{try{const t=indexedDB.open("firebase-app-check-database",1);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(gs.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(ZE,{keyPath:"compositeKey"})}}catch(t){e(gs.create("storage-open",{originalErrorMessage:t?.message}))}}),uT)}function GR(){return GR=(0,me.Z)(function*(n,e){const r=(yield Xk()).transaction(ZE,"readwrite"),a=r.objectStore(ZE).put({compositeKey:n,value:e});return new Promise((l,d)=>{a.onsuccess=_=>{l()},r.onerror=_=>{var w;d(gs.create("storage-set",{originalErrorMessage:null===(w=_.target.error)||void 0===w?void 0:w.message}))}})}),GR.apply(this,arguments)}const YE=new Aa.Yd("@firebase/app-check");function qR(n,e){return(0,k.hl)()?function iB(n,e){return function eO(n,e){return GR.apply(this,arguments)}(function nO(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{YE.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ZR(){return iT().enabled}function YR(){return QR.apply(this,arguments)}function QR(){return QR=(0,me.Z)(function*(){const n=iT();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")}),QR.apply(this,arguments)}const cB={error:"UNKNOWN_ERROR"};function dB(n){return k.US.encodeString(JSON.stringify(n),!1)}function lT(n){return JR.apply(this,arguments)}function JR(){return JR=(0,me.Z)(function*(n,e=!1){const t=n.app;jR(t);const r=zr(t);let a,i=r.token;if(i&&!Vv(i)&&(r.token=void 0,i=void 0),!i){const _=yield r.cachedTokenPromise;_&&(Vv(_)?i=_:yield qR(t,void 0))}if(!e&&i&&Vv(i))return{token:i.token};let d,l=!1;if(ZR()){r.exchangeTokenPromise||(r.exchangeTokenPromise=aT(Qk(t,yield YR()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const _=yield r.exchangeTokenPromise;return yield qR(t,_),r.token=_,{token:_.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield zr(t).exchangeTokenPromise}catch(_){"appCheck/throttled"===_.code?YE.warn(_.message):YE.error(_),a=_}return i?a?d=Vv(i)?{token:i.token,internalError:a}:oO(a):(d={token:i.token},r.token=i,yield qR(t,i)):d=oO(a),l&&sO(t,d),d}),JR.apply(this,arguments)}function XR(){return XR=(0,me.Z)(function*(n){const e=n.app;jR(e);const{provider:t}=zr(e);if(ZR()){const r=yield YR(),{token:i}=yield aT(Qk(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}}),XR.apply(this,arguments)}function tM(n,e){const t=zr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function iO(n){const{app:e}=n,t=zr(e);let r=t.tokenRefresher;r||(r=function hB(n){const{app:e}=n;return new YU((0,me.Z)(function*(){let r;if(r=zr(e).token?yield lT(n,!0):yield lT(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=zr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},3e4,96e4)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function sO(n,e){const t=zr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}function Vv(n){return n.expireTimeMillis-Date.now()>0}function oO(n){return{token:dB(cB),error:n}}class fB{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=zr(this.app);for(const t of e)tM(this.app,t.next);return Promise.resolve()}}const pO="app-check-internal";!function SB(){(0,$i._registerComponent)(new Xs.wA("app-check",n=>function pB(n,e){return new fB(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(pO).initialize()})),(0,$i._registerComponent)(new Xs.wA(pO,n=>function gB(n){return{getToken:e=>lT(n,e),getLimitedUseToken:()=>function rO(n){return XR.apply(this,arguments)}(n),addTokenListener:e=>function eM(n,e,t,r){const{app:i}=n,a=zr(i);if(a.tokenObservers=[...a.tokenObservers,{next:t,error:r,type:e}],a.token&&Vv(a.token)){const d=a.token;Promise.resolve().then(()=>{t({token:d.token}),iO(n)}).catch(()=>{})}a.cachedTokenPromise.then(()=>iO(n))}(n,"INTERNAL",e),removeTokenListener:e=>tM(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,$i.registerVersion)("@firebase/app-check","0.8.0")}();class QE{constructor(){return(0,In.vb)("app-check")}}typeof window<"u"&&window;var mO=V(9260);const oM=new f.OlP("angularfire2.auth.use-emulator"),aM=new f.OlP("angularfire2.auth.settings"),uM=new f.OlP("angularfire2.auth.tenant-id"),lM=new f.OlP("angularfire2.auth.langugage-code"),cM=new f.OlP("angularfire2.auth.use-device-language"),dM=new f.OlP("angularfire.auth.persistence"),hM=(n,e,t,r,i,a,l,d)=>(0,Qr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const _=e.runOutsideAngular(()=>n.auth());if(t&&_.useEmulator(...t),r&&(_.tenantId=r),_.languageCode=i,a&&_.useDeviceLanguage(),l)for(const[w,T]of Object.entries(l))_.settings[w]=T;return d&&_.setPersistence(d),_},[t,r,i,a,l,d]);let Uv=(()=>{class n{constructor(t,r,i,a,l,d,_,w,T,S,P,U){const q=new hr.x,de=ht(void 0).pipe((0,nT.Q)(l.outsideAngular),Hn(()=>a.runOutsideAngular(()=>Promise.resolve().then(V.bind(V,2644)))),(0,vt.U)(()=>(0,Qr.on)(t,a,r)),(0,vt.U)(fe=>hM(fe,a,d,w,T,S,_,P)),Wk({bufferSize:1,refCount:!1}));if(tl(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ht(null);else{de.pipe(rs()).subscribe();const Qe=de.pipe(Hn(mt=>mt.getRedirectResult().then($t=>$t,()=>null)),In.iC,Wk({bufferSize:1,refCount:!1})),tt=de.pipe(Hn(mt=>new Bi.y($t=>({unsubscribe:a.runOutsideAngular(()=>mt.onAuthStateChanged(Zt=>$t.next(Zt),Zt=>$t.error(Zt),()=>$t.complete()))})))),Xe=de.pipe(Hn(mt=>new Bi.y($t=>({unsubscribe:a.runOutsideAngular(()=>mt.onIdTokenChanged(Zt=>$t.next(Zt),Zt=>$t.error(Zt),()=>$t.complete()))}))));this.authState=Qe.pipe(qk(tt),(0,LR.R)(l.outsideAngular),(0,nT.Q)(l.insideAngular)),this.user=Qe.pipe(qk(Xe),(0,LR.R)(l.outsideAngular),(0,nT.Q)(l.insideAngular)),this.idToken=this.user.pipe(Hn(mt=>mt?(0,Jt.D)(mt.getIdToken()):ht(null))),this.idTokenResult=this.user.pipe(Hn(mt=>mt?(0,Jt.D)(mt.getIdTokenResult()):ht(null))),this.credential=(0,FR.T)(Qe,q,this.authState.pipe(ci(mt=>!mt))).pipe((0,vt.U)(mt=>mt?.user?mt:null),(0,LR.R)(l.outsideAngular),(0,nT.Q)(l.insideAngular))}return(0,Qr.pX)(this,de,a,{spy:{apply:(fe,Qe,tt)=>{(fe.startsWith("signIn")||fe.startsWith("createUser"))&&tt.then(Xe=>q.next(Xe))}}})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qr.Dh),f.LFG(Qr.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(In.HU),f.LFG(oM,8),f.LFG(aM,8),f.LFG(uM,8),f.LFG(lM,8),f.LFG(cM,8),f.LFG(dM,8),f.LFG(QE,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function _O(n,e){return function PB(n,e=$_.z){return new Bi.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function fM(n,e){return _O(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function dT(n,e){return fM(n,e).pipe(zo(void 0),Pw(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),a=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,d)=>{const _=i.find(T=>T.doc.ref.isEqual(l.ref)),w=t?.payload.docs.find(T=>T.ref.isEqual(l.ref));_&&JSON.stringify(_.doc.metadata)===JSON.stringify(l.metadata)||!_&&w&&JSON.stringify(w.metadata)===JSON.stringify(l.metadata)||a.push({type:"modified",payload:{oldIndex:d,newIndex:d,type:"modified",doc:l}})}),a}))}function yO(n,e,t){return dT(n,t).pipe(Ts((r,i)=>function OB(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function FB(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return pM(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return pM(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return pM(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(a=>a.payload),e),[]),EC(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function pM(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function vO(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}class wO{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=dT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(zo(void 0),Pw(),ci(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),In.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vO(e);return yO(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return fM(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),In.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(In.iC)}add(e){return this.ref.add(e)}doc(e){return new EO(this.ref.doc(e),this.afs)}}class EO{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:a}=IO(r,t);return new wO(i,a,this.afs)}snapshotChanges(){return function kB(n,e){return _O(n,e).pipe(zo(void 0),Pw(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Jt.D)(this.ref.get(e)).pipe(In.iC)}}class LB{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?dT(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),ci(t=>t.length>0),In.iC):dT(this.query,this.afs.schedulers.outsideAngular).pipe(In.iC)}auditTrail(e){return this.stateChanges(e).pipe(Ts((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=vO(e);return yO(this.query,t,this.afs.schedulers.outsideAngular).pipe(In.iC)}valueChanges(e={}){return fM(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),In.iC)}get(e){return(0,Jt.D)(this.query.get(e)).pipe(In.iC)}}const VB=new f.OlP("angularfire2.enableFirestorePersistence"),UB=new f.OlP("angularfire2.firestore.persistenceSettings"),BB=new f.OlP("angularfire2.firestore.settings"),jB=new f.OlP("angularfire2.firestore.use-emulator");function IO(n,e=(t=>t)){return{query:e(n),ref:n}}let CO=(()=>{class n{constructor(t,r,i,a,l,d,_,w,T,S,P,U,q,de,fe,Qe,tt){this.schedulers=_;const Xe=(0,Qr.on)(t,d,r),mt=T;S&&hM(Xe,d,P,q,de,fe,U,Qe),[this.firestore,this.persistenceEnabled$]=(0,Qr.cc)(`${Xe.name}.firestore`,"AngularFirestore",Xe.name,()=>{const $t=d.runOutsideAngular(()=>Xe.firestore());if(a&&$t.settings(a),mt&&$t.useEmulator(...mt),i&&!tl(l)){const Zt=()=>{try{return(0,Jt.D)($t.enablePersistence(w||void 0).then(()=>!0,()=>!1))}catch(mi){return typeof console<"u"&&console.warn(mi),ht(!1)}};return[$t,d.runOutsideAngular(Zt)]}return[$t,ht(!1)]},[a,mt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:a,query:l}=IO(i,r),d=this.schedulers.ngZone.run(()=>a);return new wO(d,l,this)}collectionGroup(t,r){const i=r||(l=>l),a=this.firestore.collectionGroup(t);return new LB(i(a),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new EO(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qr.Dh),f.LFG(Qr.xv,8),f.LFG(VB,8),f.LFG(BB,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(In.HU),f.LFG(UB,8),f.LFG(jB,8),f.LFG(Uv,8),f.LFG(oM,8),f.LFG(aM,8),f.LFG(uM,8),f.LFG(lM,8),f.LFG(cM,8),f.LFG(dM,8),f.LFG(QE,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Zm=(()=>{class n{constructor(t,r,i,a){this.afs=t,this.afAuth=r,this.router=i,this.ngZone=a,this.afAuth.authState.subscribe(l=>{l?(this.userData=l,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{console.log("result",i),this.afAuth.authState.subscribe(a=>{a&&(localStorage.setItem("loggedIn","true"),this.router.navigate(["/creation-form"]))})}).catch(i=>{window.alert(i.message)})}signUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SendVerificationMail()}).catch(i=>{window.alert(i.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){return JSON.parse(localStorage.getItem("loggedIn"))}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("loggedIn"),this.router.navigate(["/"])})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(CO),f.LFG(Uv),f.LFG(gn),f.LFG(f.R0b))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $B(n,e){if(1&n&&(f.TgZ(0,"div",4)(1,"div",5)(2,"div",6),f._UZ(3,"img",7),f.TgZ(4,"div",8)(5,"h1"),f._uU(6,"Name: "),f.TgZ(7,"strong"),f._uU(8),f.qZA()(),f.TgZ(9,"p"),f._uU(10,"User ID: "),f.TgZ(11,"strong"),f._uU(12),f.qZA()(),f.TgZ(13,"p"),f._uU(14,"Email: "),f.TgZ(15,"strong"),f._uU(16),f.qZA()(),f.TgZ(17,"p"),f._uU(18,"Email Verified: "),f.TgZ(19,"strong"),f._uU(20),f.qZA()()()()()()),2&n){const t=e.ngIf;f.xp6(3),f.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",f.LSH),f.s9C("alt",t.displayName),f.xp6(5),f.Oqu(t.displayName?t.displayName:"User"),f.xp6(4),f.Oqu(t.uid),f.xp6(4),f.Oqu(t.email),f.xp6(4),f.Oqu(t.emailVerified)}}let HB=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-user-dashboard"]],decls:5,vars:1,consts:[[1,"inner-adjust","m-5"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"h1",2),f._uU(3,"User Profile"),f.qZA()(),f.YNc(4,$B,21,6,"div",3),f.qZA()),2&t&&(f.xp6(4),f.Q6J("ngIf",r.authService.userData))},dependencies:[Kn]}),n})(),bO=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq))},n.\u0275dir=f.lG2({type:n}),n})(),Ym=(()=>{class n extends bO{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,features:[f.qOj]}),n})();const yc=new f.OlP("NgValueAccessor"),WB={provide:yc,useExisting:(0,f.Gpc)(()=>Bv),multi:!0},KB=new f.OlP("CompositionEventMode");let Bv=(()=>{class n extends bO{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function qB(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(KB,8))},n.\u0275dir=f.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&f.NdJ("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},features:[f._Bn([WB]),f.qOj]}),n})();function lp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}function TO(n){return null!=n&&"number"==typeof n.length}const Ps=new f.OlP("NgValidators"),cp=new f.OlP("NgAsyncValidators"),YB=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Qm{static min(e){return function SO(n){return e=>{if(lp(e.value)||lp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(e)}static max(e){return function AO(n){return e=>{if(lp(e.value)||lp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t>n?{max:{max:n,actual:e.value}}:null}}(e)}static required(e){return xO(e)}static requiredTrue(e){return function RO(n){return!0===n.value?null:{required:!0}}(e)}static email(e){return function MO(n){return lp(n.value)||YB.test(n.value)?null:{email:!0}}(e)}static minLength(e){return function NO(n){return e=>lp(e.value)||!TO(e.value)?null:e.value.length<n?{minlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static maxLength(e){return function PO(n){return e=>TO(e.value)&&e.value.length>n?{maxlength:{requiredLength:n,actualLength:e.value.length}}:null}(e)}static pattern(e){return function kO(n){if(!n)return hT;let e,t;return"string"==typeof n?(t="","^"!==n.charAt(0)&&(t+="^"),t+=n,"$"!==n.charAt(n.length-1)&&(t+="$"),e=new RegExp(t)):(t=n.toString(),e=n),r=>{if(lp(r.value))return null;const i=r.value;return e.test(i)?null:{pattern:{requiredPattern:t,actualValue:i}}}}(e)}static nullValidator(e){return null}static compose(e){return BO(e)}static composeAsync(e){return jO(e)}}function xO(n){return lp(n.value)?{required:!0}:null}function hT(n){return null}function OO(n){return null!=n}function FO(n){return(0,f.QGY)(n)?(0,Jt.D)(n):n}function LO(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function VO(n,e){return e.map(t=>t(n))}function UO(n){return n.map(e=>function QB(n){return!n.validate}(e)?e:t=>e.validate(t))}function BO(n){if(!n)return null;const e=n.filter(OO);return 0==e.length?null:function(t){return LO(VO(t,e))}}function gM(n){return null!=n?BO(UO(n)):null}function jO(n){if(!n)return null;const e=n.filter(OO);return 0==e.length?null:function(t){return function GB(...n){const e=(0,Ui.jO)(n),{args:t,keys:r}=xl(n),i=new Bi.y(a=>{const{length:l}=t;if(!l)return void a.complete();const d=new Array(l);let _=l,w=l;for(let T=0;T<l;T++){let S=!1;(0,go.Xf)(t[T]).subscribe((0,Fn.x)(a,P=>{S||(S=!0,w--),d[T]=P},()=>_--,void 0,()=>{(!_||!S)&&(w||a.next(r?Ml(r,d):d),a.complete())}))}});return e?i.pipe(Rl(e)):i}(VO(t,e).map(FO)).pipe((0,vt.U)(LO))}}function mM(n){return null!=n?jO(UO(n)):null}function $O(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function HO(n){return n._rawValidators}function GO(n){return n._rawAsyncValidators}function _M(n){return n?Array.isArray(n)?n:[n]:[]}function fT(n,e){return Array.isArray(n)?n.includes(e):n===e}function zO(n,e){const t=_M(e);return _M(n).forEach(i=>{fT(t,i)||t.push(i)}),t}function WO(n,e){return _M(e).filter(t=>!fT(n,t))}class qO{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gM(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=mM(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class oo extends qO{get formDirective(){return null}get path(){return null}}class dp extends qO{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class KO{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let pT=(()=>{class n extends KO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(dp,2))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[f.qOj]}),n})(),gT=(()=>{class n extends KO{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(oo,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&f.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[f.qOj]}),n})();const JE="VALID",_T="INVALID",jv="PENDING",XE="DISABLED";function EM(n){return(yT(n)?n.validators:n)||null}function YO(n){return Array.isArray(n)?gM(n):n||null}function IM(n,e){return(yT(e)?e.asyncValidators:n)||null}function QO(n){return Array.isArray(n)?mM(n):n||null}function yT(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}function JO(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new f.vHH(1e3,"");if(!r[t])throw new f.vHH(1001,"")}function XO(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new f.vHH(1002,"")})}class vT{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=YO(this._rawValidators),this._composedAsyncValidatorFn=QO(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===JE}get invalid(){return this.status===_T}get pending(){return this.status==jv}get disabled(){return this.status===XE}get enabled(){return this.status!==XE}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=YO(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=QO(e)}addValidators(e){this.setValidators(zO(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(zO(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(WO(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(WO(e,this._rawAsyncValidators))}hasValidator(e){return fT(this._rawValidators,e)}hasAsyncValidator(e){return fT(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=jv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=XE,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=JE,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===JE||this.status===jv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?XE:JE}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=jv,this._hasOwnPendingAsyncValidator=!0;const t=FO(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?XE:this.errors?_T:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(jv)?jv:this._anyControlsHaveStatus(_T)?_T:JE}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){yT(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}class eI extends vT{constructor(e,t,r){super(EM(t),IM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){XO(this,0,e),Object.keys(e).forEach(r=>{JO(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,a)=>{r=t(r,i,a)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}class e1 extends eI{}function wT(n,e){return[...e.path,n]}function tI(n,e){CM(n,e),e.valueAccessor.writeValue(n.value),n.disabled&&e.valueAccessor.setDisabledState?.(!0),function sj(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&t1(n,e)})}(n,e),function aj(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function oj(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&t1(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ij(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function ET(n,e,t=!0){const r=()=>{};e.valueAccessor&&(e.valueAccessor.registerOnChange(r),e.valueAccessor.registerOnTouched(r)),CT(n,e),n&&(e._invokeOnDestroyCallbacks(),n._registerOnCollectionChange(()=>{}))}function IT(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function CM(n,e){const t=HO(n);null!==e.validator?n.setValidators($O(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=GO(n);null!==e.asyncValidator?n.setAsyncValidators($O(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();IT(e._rawValidators,i),IT(e._rawAsyncValidators,i)}function CT(n,e){let t=!1;if(null!==n){if(null!==e.validator){const i=HO(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.validator);a.length!==i.length&&(t=!0,n.setValidators(a))}}if(null!==e.asyncValidator){const i=GO(n);if(Array.isArray(i)&&i.length>0){const a=i.filter(l=>l!==e.asyncValidator);a.length!==i.length&&(t=!0,n.setAsyncValidators(a))}}}const r=()=>{};return IT(e._rawValidators,r),IT(e._rawAsyncValidators,r),t}function t1(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function n1(n,e){CM(n,e)}function bM(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}function i1(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}function DM(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(a=>{a.constructor===Bv?t=a:function cj(n){return Object.getPrototypeOf(n.constructor)===Ym}(a)?r=a:i=a}),i||r||t||null}const hj={provide:oo,useExisting:(0,f.Gpc)(()=>rI)},nI=(()=>Promise.resolve())();let rI=(()=>{class n extends oo{constructor(t,r){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new f.vpe,this.form=new eI({},gM(t),mM(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){nI.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),tI(t.control,t),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){nI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){nI.then(()=>{const r=this._findContainer(t.path),i=new eI({});n1(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){nI.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){nI.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,i1(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ps,10),f.Y36(cp,10))},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([hj]),f.qOj]}),n})();function s1(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function o1(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const iI=class extends vT{constructor(e=null,t,r){super(EM(t),IM(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),yT(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=o1(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){s1(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){s1(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){o1(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},gj={provide:dp,useExisting:(0,f.Gpc)(()=>bT)},l1=(()=>Promise.resolve())();let bT=(()=>{class n extends dp{constructor(t,r,i,a,l){super(),this._changeDetectorRef=l,this.control=new iI,this._registered=!1,this.update=new f.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DM(0,a)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),bM(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tI(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){l1.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,f.D6c)(r);l1.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?wT(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(oo,9),f.Y36(Ps,10),f.Y36(cp,10),f.Y36(yc,10),f.Y36(f.sBO,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[f._Bn([gj]),f.qOj,f.TTD]}),n})(),DT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})(),d1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})();const TM=new f.OlP("NgModelWithFormControlWarning"),Ej={provide:oo,useExisting:(0,f.Gpc)(()=>TT)};let TT=(()=>{class n extends oo{constructor(t,r){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(t),this._setAsyncValidators(r)}ngOnChanges(t){this._checkFormPresent(),t.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(CT(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(t){const r=this.form.get(t.path);return tI(r,t),r.updateValueAndValidity({emitEvent:!1}),this.directives.push(t),r}getControl(t){return this.form.get(t.path)}removeControl(t){ET(t.control||null,t,!1),function dj(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}(this.directives,t)}addFormGroup(t){this._setUpFormContainer(t)}removeFormGroup(t){this._cleanUpFormContainer(t)}getFormGroup(t){return this.form.get(t.path)}addFormArray(t){this._setUpFormContainer(t)}removeFormArray(t){this._cleanUpFormContainer(t)}getFormArray(t){return this.form.get(t.path)}updateModel(t,r){this.form.get(t.path).setValue(r)}onSubmit(t){return this.submitted=!0,i1(this.form,this.directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_updateDomValue(){this.directives.forEach(t=>{const r=t.control,i=this.form.get(t.path);r!==i&&(ET(r||null,t),(n=>n instanceof iI)(i)&&(tI(i,t),t.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(t){const r=this.form.get(t.path);n1(r,t),r.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(t){if(this.form){const r=this.form.get(t.path);r&&function uj(n,e){return CT(n,e)}(r,t)&&r.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){CM(this.form,this),this._oldForm&&CT(this._oldForm,this)}_checkFormPresent(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Ps,10),f.Y36(cp,10))},n.\u0275dir=f.lG2({type:n,selectors:[["","formGroup",""]],hostBindings:function(t,r){1&t&&f.NdJ("submit",function(a){return r.onSubmit(a)})("reset",function(){return r.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([Ej]),f.qOj,f.TTD]}),n})();const bj={provide:dp,useExisting:(0,f.Gpc)(()=>xM)};let xM=(()=>{class n extends dp{constructor(t,r,i,a,l){super(),this._ngModelWarningConfig=l,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=DM(0,a)}set isDisabled(t){}ngOnChanges(t){this._added||this._setUpControl(),bM(t,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}get path(){return wT(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return n._ngModelWarningSentOnce=!1,n.\u0275fac=function(t){return new(t||n)(f.Y36(oo,13),f.Y36(Ps,10),f.Y36(cp,10),f.Y36(yc,10),f.Y36(TM,8))},n.\u0275dir=f.lG2({type:n,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([bj]),f.qOj,f.TTD]}),n})(),Jm=(()=>{class n{constructor(){this._validator=hT}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):hT,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=f.lG2({type:n,features:[f.TTD]}),n})();const Pj={provide:Ps,useExisting:(0,f.Gpc)(()=>sI),multi:!0};let sI=(()=>{class n extends Jm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=f.D6c,this.createValidator=t=>xO}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=f.n5z(n)))(r||n)}}(),n.\u0275dir=f.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&f.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[f._Bn([Pj]),f.qOj]}),n})(),S1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[d1]}),n})(),Uj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[S1]}),n})(),NM=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:TM,useValue:t.warnOnNgModelWithFormControl}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[S1]}),n})();class A1 extends vT{constructor(e,t,r){super(EM(t),IM(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(e){return this.controls[this._adjustIndex(e)]}push(e,t={}){this.controls.push(e),this._registerControl(e),this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}insert(e,t,r={}){this.controls.splice(e,0,t),this._registerControl(t),this.updateValueAndValidity({emitEvent:r.emitEvent})}removeAt(e,t={}){let r=this._adjustIndex(e);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),this.updateValueAndValidity({emitEvent:t.emitEvent})}setControl(e,t,r={}){let i=this._adjustIndex(e);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),t&&(this.controls.splice(i,0,t),this._registerControl(t)),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(e,t={}){XO(this,0,e),e.forEach((r,i)=>{JO(this,!1,i),this.at(i).setValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(e.forEach((r,i)=>{this.at(i)&&this.at(i).patchValue(r,{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e=[],t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this.controls.map(e=>e.getRawValue())}clear(e={}){this.controls.length<1||(this._forEachChild(t=>t._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:e.emitEvent}))}_adjustIndex(e){return e<0?e+this.length:e}_syncPendingControls(){let e=this.controls.reduce((t,r)=>!!r._syncPendingControls()||t,!1);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){this.controls.forEach((t,r)=>{e(t,r)})}_updateValue(){this.value=this.controls.filter(e=>e.enabled||this.disabled).map(e=>e.value)}_anyControls(e){return this.controls.some(t=>t.enabled&&e(t))}_setUpControls(){this._forEachChild(e=>this._registerControl(e))}_allControlsDisabled(){for(const e of this.controls)if(e.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(e){e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)}_find(e){return this.at(e)??null}}function x1(n){return!!n&&(void 0!==n.asyncValidators||void 0!==n.validators||void 0!==n.updateOn)}let Bj=(()=>{class n{constructor(){this.useNonNullable=!1}get nonNullable(){const t=new n;return t.useNonNullable=!0,t}group(t,r=null){const i=this._reduceControls(t);let a={};return x1(r)?a=r:null!==r&&(a.validators=r.validator,a.asyncValidators=r.asyncValidator),new eI(i,a)}record(t,r=null){const i=this._reduceControls(t);return new e1(i,r)}control(t,r,i){let a={};return this.useNonNullable?(x1(r)?a=r:(a.validators=r,a.asyncValidators=i),new iI(t,{...a,nonNullable:!0})):new iI(t,r,i)}array(t,r,i){const a=t.map(l=>this._createControl(l));return new A1(a,r,i)}_reduceControls(t){const r={};return Object.keys(t).forEach(i=>{r[i]=this._createControl(t[i])}),r}_createControl(t){return t instanceof iI||t instanceof vT?t:Array.isArray(t)?this.control(t[0],t.length>1?t[1]:null,t.length>2?t[2]:null):this.control(t)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:NM}),n})();function jj(n,e){if(1&n&&(f.TgZ(0,"div",11),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Oqu(t.error)}}const $j=function(){return["/forgot-password"]},Hj=function(){return["/sign-up"]};let Gj=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.authService=i,this.email="",this.password="",this.error=""}ngOnInit(){}login(){var t=this;return(0,me.Z)(function*(){try{const i=yield t.authService.signIn(t.email,t.password);console.log("Firebase user:",i)}catch(r){t.error=r.message}})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Uv),f.Y36(gn),f.Y36(Zm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-in"]],decls:19,vars:7,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","pwd"],["type","password","id","pwd","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-2"],["type","button","routerLinkActive","router-link-active",1,"btn","btn-danger",3,"routerLink"],["type","button","routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h2"),f._uU(2,"Login"),f.qZA(),f.YNc(3,jj,2,1,"div",1),f.TgZ(4,"form",2),f.NdJ("ngSubmit",function(){return r.login()}),f.TgZ(5,"div",3)(6,"label",4),f._uU(7,"Email address:"),f.qZA(),f.TgZ(8,"input",5),f.NdJ("ngModelChange",function(a){return r.email=a}),f.qZA()(),f.TgZ(9,"div",3)(10,"label",6),f._uU(11,"Password:"),f.qZA(),f.TgZ(12,"input",7),f.NdJ("ngModelChange",function(a){return r.password=a}),f.qZA()(),f.TgZ(13,"button",8),f._uU(14,"Login"),f.qZA()(),f.TgZ(15,"button",9),f._uU(16,"Forgot Password"),f.qZA(),f.TgZ(17,"button",10),f._uU(18,"Create an Account"),f.qZA()()),2&t&&(f.xp6(3),f.Q6J("ngIf",r.error),f.xp6(5),f.Q6J("ngModel",r.email),f.xp6(4),f.Q6J("ngModel",r.password),f.xp6(3),f.Q6J("routerLink",f.DdM(5,$j)),f.xp6(2),f.Q6J("routerLink",f.DdM(6,Hj)))},dependencies:[Kn,sf,U_,DT,Bv,pT,gT,sI,bT,rI]}),n})();function zj(n,e){if(1&n&&(f.TgZ(0,"div",9),f._uU(1),f.qZA()),2&n){const t=f.oxw();f.xp6(1),f.Oqu(t.error)}}let Wj=(()=>{class n{constructor(t,r,i){this.afAuth=t,this.router=r,this.authService=i,this.email="",this.password="",this.error=""}ngOnInit(){}signup(){var t=this;return(0,me.Z)(function*(){try{yield t.authService.signUp(t.email,t.password),t.router.navigate(["/"])}catch(r){t.error=r.message}})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Uv),f.Y36(gn),f.Y36(Zm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-sign-up"]],decls:15,vars:3,consts:[[1,"container"],["class","alert alert-danger",4,"ngIf"],[3,"ngSubmit"],[1,"form-group"],["for","email"],["type","email","id","email","name","email","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","pwd"],["type","password","id","pwd","name","password","required","",1,"form-control",3,"ngModel","ngModelChange"],["type","submit",1,"btn","btn-primary","my-2"],[1,"alert","alert-danger"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"h2"),f._uU(2,"Sign Up"),f.qZA(),f.YNc(3,zj,2,1,"div",1),f.TgZ(4,"form",2),f.NdJ("ngSubmit",function(){return r.signup()}),f.TgZ(5,"div",3)(6,"label",4),f._uU(7,"Email address:"),f.qZA(),f.TgZ(8,"input",5),f.NdJ("ngModelChange",function(a){return r.email=a}),f.qZA()(),f.TgZ(9,"div",3)(10,"label",6),f._uU(11,"Password:"),f.qZA(),f.TgZ(12,"input",7),f.NdJ("ngModelChange",function(a){return r.password=a}),f.qZA()(),f.TgZ(13,"button",8),f._uU(14,"Sign Up"),f.qZA()()()),2&t&&(f.xp6(3),f.Q6J("ngIf",r.error),f.xp6(5),f.Q6J("ngModel",r.email),f.xp6(4),f.Q6J("ngModel",r.password))},dependencies:[Kn,DT,Bv,pT,gT,sI,bT,rI]}),n})();const qj=function(){return["/"]};let Kj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-forgot-password"]],decls:16,vars:2,consts:[[1,"container"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"form-control"],["passwordResetEmail",""],[1,"formGroup","text-center","my-2"],["type","submit","value","Reset Password",1,"btn","btn-primary",3,"click"],[1,"redirectToLogin","text-center"],["type","button","routerLinkActive","router-link-active",1,"btn","btn-danger",3,"routerLink"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"h3"),f._uU(2,"Reset Password"),f.qZA(),f.TgZ(3,"p",1),f._uU(4,"Please enter your email address to request a password reset."),f.qZA(),f.TgZ(5,"div",2),f._UZ(6,"input",3,4),f.qZA(),f.TgZ(8,"div",5)(9,"button",6),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(7);return f.KtG(r.authService.ForgotPassword(l.value))}),f._uU(10,"Reset Password"),f.qZA()(),f.TgZ(11,"div",7)(12,"span"),f._uU(13,"Go back to ? "),f.TgZ(14,"button",8),f._uU(15,"Sign in"),f.qZA()()()()}2&t&&(f.xp6(14),f.Q6J("routerLink",f.DdM(1,qj)))},dependencies:[sf,U_]}),n})(),R1=(()=>{class n{constructor(t,r){this.authService=t,this.router=r}canActivate(t,r){return 1==this.authService.isLoggedIn||(this.router.navigate(["/"]),!1)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Zm),f.LFG(gn))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function Zj(n,e){if(1&n&&(f.TgZ(0,"div",4)(1,"p",9),f._uU(2,"We have sent a confirmation email to "),f.TgZ(3,"strong"),f._uU(4),f.qZA(),f._uU(5,"."),f.qZA(),f.TgZ(6,"p",9),f._uU(7,"Please check your email and click on the link to verfiy your email address."),f.qZA()()),2&n){const t=e.ngIf;f.xp6(4),f.Oqu(t.email)}}const Yj=function(){return["/"]};let Qj=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-verify-email"]],decls:13,vars:3,consts:[[1,"container","text-center","m-5"],[1,"displayTableCell"],[1,"authBlock"],["class","formGroup",4,"ngIf"],[1,"formGroup"],["type","button",1,"btn","btnPrimary",3,"click"],[1,"fas","fa-redo-alt"],[1,"redirectToLogin"],["type","button","routerLinkActive","router-link-active",1,"btn","btn-primary",3,"routerLink"],[1,"text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),f._uU(4,"Thank You for Registering"),f.qZA(),f.YNc(5,Zj,8,1,"div",3),f.TgZ(6,"div",4)(7,"button",5),f.NdJ("click",function(){return r.authService.SendVerificationMail()}),f._UZ(8,"i",6),f._uU(9," Resend Verification Email "),f.qZA()()(),f.TgZ(10,"div",7)(11,"button",8),f._uU(12,"Sign in"),f.qZA()()()()),2&t&&(f.xp6(5),f.Q6J("ngIf",r.authService.userData),f.xp6(6),f.Q6J("routerLink",f.DdM(2,Yj)))},dependencies:[Kn,sf,U_]}),n})();const M1="firebasestorage.googleapis.com",N1="storageBucket";class kr extends k.ZR{constructor(e,t,r=0){super(PM(e),`Firebase Storage: ${t} (${PM(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,kr.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return PM(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var ur=(()=>(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"}(ur||(ur={})),ur))();function PM(n){return"storage/"+n}function kM(){return new kr(ur.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function P1(){return new kr(ur.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function k1(){return new kr(ur.CANCELED,"User canceled the upload/download.")}function O1(){return new kr(ur.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function $v(n){return new kr(ur.INVALID_ARGUMENT,n)}function F1(){return new kr(ur.APP_DELETED,"The Firebase app was deleted.")}function L1(n){return new kr(ur.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function oI(n,e){return new kr(ur.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function aI(n){throw new kr(ur.INTERNAL_ERROR,"Internal error: "+n)}class ks{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ks.makeFromUrl(e,t)}catch{return new ks(e,"")}if(""===r.path)return r;throw function u$(n){return new kr(ur.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",d=new RegExp("^gs://"+i+"(/(.*))?$","i");function w(mt){mt.path_=decodeURIComponent(mt.path)}const S=t.replace(/[.]/g,"\\."),Xe=[{regex:d,indices:{bucket:1,path:3},postModify:function a(mt){"/"===mt.path.charAt(mt.path.length-1)&&(mt.path_=mt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${S}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:w},{regex:new RegExp(`^https?://${t===M1?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:w}];for(let mt=0;mt<Xe.length;mt++){const $t=Xe[mt],Zt=$t.regex.exec(e);if(Zt){let aa=Zt[$t.indices.path];aa||(aa=""),r=new ks(Zt[$t.indices.bucket],aa),$t.postModify(r);break}}if(null==r)throw function a$(n){return new kr(ur.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class f${constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function ST(n){return"string"==typeof n||n instanceof String}function V1(n){return OM()&&n instanceof Blob}function OM(){return typeof Blob<"u"&&!(0,k.UG)()}function FM(n,e,t,r){if(r<e)throw $v(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw $v(`Invalid value for '${n}'. Expected ${t} or less.`)}function rh(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function U1(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var hp=(()=>(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"}(hp||(hp={})),hp))();function B1(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),a=-1!==e.indexOf(n);return t||i||a}class v${constructor(e,t,r,i,a,l,d,_,w,T,S,P=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=a,this.additionalRetryCodes_=l,this.callback_=d,this.errorCallback_=_,this.timeout_=w,this.progressCallback_=T,this.connectionFactory_=S,this.retry=P,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((U,q)=>{this.resolve_=U,this.reject_=q,this.start_()})}start_(){const t=(r,i)=>{const a=this.resolve_,l=this.reject_,d=i.connection;if(i.wasSuccessCode)try{const _=this.callback_(d,d.getResponse());!function m$(n){return void 0!==n}(_)?a():a(_)}catch(_){l(_)}else if(null!==d){const _=kM();_.serverResponse=d.getErrorText(),l(this.errorCallback_?this.errorCallback_(d,_):_)}else l(i.canceled?this.appDelete_?F1():k1():P1())};this.canceled_?t(0,new AT(!1,null,!0)):this.backoffId_=function p$(n,e,t){let r=1,i=null,a=null,l=!1,d=0;function _(){return 2===d}let w=!1;function T(...fe){w||(w=!0,e.apply(null,fe))}function S(fe){i=setTimeout(()=>{i=null,n(U,_())},fe)}function P(){a&&clearTimeout(a)}function U(fe,...Qe){if(w)return void P();if(fe)return P(),void T.call(null,fe,...Qe);if(_()||l)return P(),void T.call(null,fe,...Qe);let Xe;r<64&&(r*=2),1===d?(d=2,Xe=0):Xe=1e3*(r+Math.random()),S(Xe)}let q=!1;function de(fe){q||(q=!0,P(),!w&&(null!==i?(fe||(d=2),clearTimeout(i),S(0)):fe||(d=1)))}return S(0),a=setTimeout(()=>{l=!0,de(!0)},t),de}((r,i)=>{if(i)return void r(!1,new AT(!1,null,!0));const a=this.connectionFactory_();this.pendingConnection_=a;const l=d=>{null!==this.progressCallback_&&this.progressCallback_(d.loaded,d.lengthComputable?d.total:-1)};null!==this.progressCallback_&&a.addUploadProgressListener(l),a.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&a.removeUploadProgressListener(l),this.pendingConnection_=null;const d=a.getErrorCode()===hp.NO_ERROR,_=a.getStatus();if(!d||B1(_,this.additionalRetryCodes_)&&this.retry){const T=a.getErrorCode()===hp.ABORT;return void r(!1,new AT(!1,null,T))}const w=-1!==this.successCodes_.indexOf(_);r(!0,new AT(w,a))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function g$(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class AT{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function T$(...n){const e=function D$(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(OM())return new Blob(n);throw new kr(ur.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ia={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class LM{constructor(e,t){this.data=e,this.contentType=t||null}}function VM(n,e){switch(n){case ia.RAW:return new LM(j1(e));case ia.BASE64:case ia.BASE64URL:return new LM($1(n,e));case ia.DATA_URL:return new LM(function R$(n){const e=new H1(n);return e.base64?$1(ia.BASE64,e.rest):function x$(n){let e;try{e=decodeURIComponent(n)}catch{throw oI(ia.DATA_URL,"Malformed data URL.")}return j1(e)}(e.rest)}(e),function M$(n){return new H1(n).contentType}(e))}throw kM()}function j1(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function $1(n,e){switch(n){case ia.BASE64:{const i=-1!==e.indexOf("-"),a=-1!==e.indexOf("_");if(i||a)throw oI(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case ia.BASE64URL:{const i=-1!==e.indexOf("+"),a=-1!==e.indexOf("/");if(i||a)throw oI(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function A$(n){if(typeof atob>"u")throw function h$(n){return new kr(ur.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:oI(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class H1{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw oI(ia.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function N$(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class vc{constructor(e,t){let r=0,i="";V1(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(V1(this.data_)){const i=function S$(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new vc(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new vc(r,!0)}}static getBlob(...e){if(OM()){const t=e.map(r=>r instanceof vc?r.data_:r);return new vc(T$.apply(null,t))}{const t=e.map(l=>ST(l)?VM(ia.RAW,l).data:l.data_);let r=0;t.forEach(l=>{r+=l.byteLength});const i=new Uint8Array(r);let a=0;return t.forEach(l=>{for(let d=0;d<l.length;d++)i[a++]=l[d]}),new vc(i,!0)}}uploadData(){return this.data_}}function UM(n){let e;try{e=JSON.parse(n)}catch{return null}return function y$(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function G1(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function O$(n,e){return e}class ao{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||O$}}let xT=null;function uI(){if(xT)return xT;const n=[];n.push(new ao("bucket")),n.push(new ao("generation")),n.push(new ao("metageneration")),n.push(new ao("name","fullPath",!0));const t=new ao("name");t.xform=function e(a,l){return function F$(n){return!ST(n)||n.length<2?n:G1(n)}(l)},n.push(t);const i=new ao("size");return i.xform=function r(a,l){return void 0!==l?Number(l):l},n.push(i),n.push(new ao("timeCreated")),n.push(new ao("updated")),n.push(new ao("md5Hash",null,!0)),n.push(new ao("cacheControl",null,!0)),n.push(new ao("contentDisposition",null,!0)),n.push(new ao("contentEncoding",null,!0)),n.push(new ao("contentLanguage",null,!0)),n.push(new ao("contentType",null,!0)),n.push(new ao("metadata","customMetadata",!0)),xT=n,xT}function z1(n,e,t){const r=UM(e);return null===r?null:function V$(n,e,t){const r={type:"file"},i=t.length;for(let a=0;a<i;a++){const l=t[a];r[l.local]=l.xform(r,e[l.server])}return function L$(n,e){Object.defineProperty(n,"ref",{get:function t(){const a=new ks(n.bucket,n.fullPath);return e._makeStorageReference(a)}})}(r,n),r}(n,r,t)}function BM(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const a=e[i];a.writable&&(t[a.server]=n[a.local])}return JSON.stringify(t)}const W1="prefixes";class wc{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function Ec(n){if(!n)throw kM()}function RT(n,e){return function t(r,i){const a=z1(n,i,e);return Ec(null!==a),a}}function Hv(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function s$(){return new kr(ur.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function i$(){return new kr(ur.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function r$(n){return new kr(ur.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function o$(n){return new kr(ur.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function lI(n){const e=Hv(n);return function t(r,i){let a=e(r,i);return 404===r.getStatus()&&(a=function n$(n){return new kr(ur.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),a.serverResponse=i.serverResponse,a}}function K1(n,e,t){const i=rh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new wc(i,"GET",RT(n,t),l);return d.errorHandler=lI(e),d}function G$(n,e,t,r,i){const a={};a.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(a.delimiter=t),r&&(a.pageToken=r),i&&(a.maxResults=i);const d=rh(e.bucketOnlyServerUrl(),n.host,n._protocol),w=n.maxOperationRetryTime,T=new wc(d,"GET",function $$(n,e){return function t(r,i){const a=function j$(n,e,t){const r=UM(t);return null===r?null:function B$(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[W1])for(const i of t[W1]){const a=i.replace(/\/$/,""),l=n._makeStorageReference(new ks(e,a));r.prefixes.push(l)}if(t.items)for(const i of t.items){const a=n._makeStorageReference(new ks(e,i.name));r.items.push(a)}return r}(n,e,r)}(n,e,i);return Ec(null!==a),a}}(n,e.bucket),w);return T.urlParams=a,T.errorHandler=Hv(e),T}function Y1(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function K$(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class MT{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function jM(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{Ec(!1)}return Ec(!!t&&-1!==(e||["active"]).indexOf(t)),t}const J$={STATE_CHANGED:"state_changed"},uo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function $M(n){switch(n){case"running":case"pausing":case"canceling":return uo.RUNNING;case"paused":return uo.PAUSED;case"success":return uo.SUCCESS;case"canceled":return uo.CANCELED;default:return uo.ERROR}}class X${constructor(e,t,r){if(function _$(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const a=e;this.next=a.next,this.error=a.error,this.complete=a.complete}}}function Gv(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}class tH extends class eH{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=hp.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=hp.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=hp.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw aI("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const a in i)i.hasOwnProperty(a)&&this.xhr_.setRequestHeader(a,i[a].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw aI("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw aI("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw aI("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw aI("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}{initXhr(){this.xhr_.responseType="text"}}function Hu(){return new tH}class eF{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=uI(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(ur.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const a=this.isExponentialBackoffExpired();if(B1(i.status,[])){if(!a)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=P1()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(ur.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,a)=>{this._resolve=i,this._reject=a,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function Z$(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l=Y1(e,r,i),d={name:l.fullPath},_=rh(a,n.host,n._protocol),T={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":l.contentType,"Content-Type":"application/json; charset=utf-8"},S=BM(l,t),q=new wc(_,"POST",function U(de){let fe;jM(de);try{fe=de.getResponseHeader("X-Goog-Upload-URL")}catch{Ec(!1)}return Ec(ST(fe)),fe},n.maxUploadRetryTime);return q.urlParams=d,q.headers=T,q.body=S,q.errorHandler=Hv(e),q}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._uploadUrl=a,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function Y$(n,e,t,r){const _=new wc(t,"POST",function a(w){const T=jM(w,["active","final"]);let S=null;try{S=w.getResponseHeader("X-Goog-Upload-Size-Received")}catch{Ec(!1)}S||Ec(!1);const P=Number(S);return Ec(!isNaN(P)),new MT(P,r.size(),"final"===T)},n.maxUploadRetryTime);return _.headers={"X-Goog-Upload-Command":"query"},_.errorHandler=Hv(e),_}(this._ref.storage,this._ref._location,e,this._blob),a=this._ref.storage._makeRequest(i,Hu,t,r);this._request=a,a.getPromise().then(l=>{this._request=void 0,this._updateProgress(l.current),this._needToFetchStatus=!1,l.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new MT(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,a)=>{let l;try{l=function Q$(n,e,t,r,i,a,l,d){const _=new MT(0,0);if(l?(_.current=l.current,_.total=l.total):(_.current=0,_.total=r.size()),r.size()!==_.total)throw function c$(){return new kr(ur.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const w=_.total-_.current;let T=w;i>0&&(T=Math.min(T,i));const S=_.current;let U="";U=0===T?"finalize":w===T?"upload, finalize":"upload";const q={"X-Goog-Upload-Command":U,"X-Goog-Upload-Offset":`${_.current}`},de=r.slice(S,S+T);if(null===de)throw O1();const Xe=new wc(t,"POST",function fe(mt,$t){const Zt=jM(mt,["active","final"]),mi=_.current+T,aa=r.size();let rw;return rw="final"===Zt?RT(e,a)(mt,$t):null,new MT(mi,aa,"final"===Zt,rw)},e.maxUploadRetryTime);return Xe.headers=q,Xe.body=de.uploadData(),Xe.progressCallback=d||null,Xe.errorHandler=Hv(n),Xe}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(_){return this._error=_,void this._transition("error")}const d=this._ref.storage._makeRequest(l,Hu,i,a,!1);this._request=d,d.getPromise().then(_=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(_.current),_.finalized?(this._metadata=_.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=K1(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,Hu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function Q1(n,e,t,r,i){const a=e.bucketOnlyServerUrl(),l={"X-Goog-Upload-Protocol":"multipart"},_=function d(){let Xe="";for(let mt=0;mt<2;mt++)Xe+=Math.random().toString().slice(2);return Xe}();l["Content-Type"]="multipart/related; boundary="+_;const w=Y1(e,r,i),T=BM(w,t),U=vc.getBlob("--"+_+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+T+"\r\n--"+_+"\r\nContent-Type: "+w.contentType+"\r\n\r\n",r,"\r\n--"+_+"--");if(null===U)throw O1();const q={name:w.fullPath},de=rh(a,n.host,n._protocol),Qe=n.maxUploadRetryTime,tt=new wc(de,"POST",RT(n,t),Qe);return tt.urlParams=q,tt.headers=l,tt.body=U.uploadData(),tt.errorHandler=Hv(e),tt}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,Hu,e,t);this._request=i,i.getPromise().then(a=>{this._request=void 0,this._metadata=a,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=k1(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=$M(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const a=new X$(t||void 0,r||void 0,i||void 0);return this._addObserver(a),()=>{this._removeObserver(a)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch($M(this._state)){case uo.SUCCESS:Gv(this._resolve.bind(null,this.snapshot))();break;case uo.CANCELED:case uo.ERROR:Gv(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch($M(this._state)){case uo.RUNNING:case uo.PAUSED:e.next&&Gv(e.next.bind(e,this.snapshot))();break;case uo.SUCCESS:e.complete&&Gv(e.complete.bind(e))();break;default:e.error&&Gv(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Xm{constructor(e,t){this._service=e,this._location=t instanceof ks?t:ks.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Xm(e,t)}get root(){const e=new ks(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return G1(this._location.path)}get storage(){return this._service}get parent(){const e=function P$(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new ks(this._location.bucket,e);return new Xm(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw L1(e)}}function nF(n,e,t){return HM.apply(this,arguments)}function HM(){return HM=(0,me.Z)(function*(n,e,t){const i=yield rF(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield nF(n,e,i.nextPageToken))}),HM.apply(this,arguments)}function rF(n,e){null!=e&&"number"==typeof e.maxResults&&FM("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=G$(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,Hu)}function fH(n){n._throwIfRoot("getDownloadURL");const e=function z$(n,e,t){const i=rh(e.fullServerUrl(),n.host,n._protocol),l=n.maxOperationRetryTime,d=new wc(i,"GET",function H$(n,e){return function t(r,i){const a=z1(n,i,e);return Ec(null!==a),function U$(n,e,t,r){const i=UM(e);if(null===i||!ST(i.downloadTokens))return null;const a=i.downloadTokens;if(0===a.length)return null;const l=encodeURIComponent;return a.split(",").map(w=>{const S=n.fullPath;return rh("/b/"+l(n.bucket)+"/o/"+l(S),t,r)+U1({alt:"media",token:w})})[0]}(a,i,n.host,n._protocol)}}(n,t),l);return d.errorHandler=lI(e),d}(n.storage,n._location,uI());return n.storage.makeRequestWithTokens(e,Hu).then(t=>{if(null===t)throw function d$(){return new kr(ur.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function iF(n,e){const t=function k$(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new ks(n._location.bucket,t);return new Xm(n.storage,r)}function sF(n,e){if(n instanceof GM){const t=n;if(null==t._bucket)throw function l$(){return new kr(ur.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+N1+"' property when initializing the app?")}();const r=new Xm(t,t._bucket);return null!=e?sF(r,e):r}return void 0!==e?iF(n,e):n}function _H(n,e){if(e&&function gH(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof GM)return function mH(n,e){return new Xm(n,e)}(n,e);throw $v("To use ref(service, url), the first argument must be a Storage instance.")}return sF(n,e)}function oF(n,e){const t=e?.[N1];return null==t?null:ks.makeFromBucketSpec(t,n)}class GM{constructor(e,t,r,i,a){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=a,this._bucket=null,this._host=M1,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?ks.makeFromBucketSpec(i,this._host):oF(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?ks.makeFromBucketSpec(this._url,e):oF(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){FM("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){FM("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,me.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,me.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Xm(this,e)}_makeRequest(e,t,r,i,a=!0){if(this._deleted)return new f$(F1());{const l=function b$(n,e,t,r,i,a,l=!0){const d=U1(n.urlParams),_=n.url+d,w=Object.assign({},n.headers);return function I$(n,e){e&&(n["X-Firebase-GMPID"]=e)}(w,e),function w$(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(w,t),function E$(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(w,a),function C$(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(w,r),new v$(_,n.method,w,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,l)}(e,this._appId,r,i,t,this._firebaseVersion,a);return this._requests.add(l),l.getPromise().then(()=>this._requests.delete(l),()=>this._requests.delete(l)),l}}makeRequestWithTokens(e,t){var r=this;return(0,me.Z)(function*(){const[i,a]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,a).getPromise()})()}}const aF="@firebase/storage";function cF(n,e){return _H(n=(0,k.m9)(n),e)}function SH(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new GM(t,r,i,e,$i.SDK_VERSION)}!function AH(){(0,$i._registerComponent)(new Xs.wA("storage",SH,"PUBLIC").setMultipleInstances(!0)),(0,$i.registerVersion)(aF,"0.11.2",""),(0,$i.registerVersion)(aF,"0.11.2","esm2017")}();class NT{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class hF{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new NT(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new NT(r,this,this._ref))},t)}on(e,t,r,i){let a;return t&&(a="function"==typeof t?l=>t(new NT(l,this,this._ref)):{next:t.next?l=>t.next(new NT(l,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,a,r||void 0,i||void 0)}}class fF{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ih(e,this._service))}get items(){return this._delegate.items.map(e=>new ih(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ih{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function TH(n,e){return iF(n,e)}(this._delegate,e);return new ih(t,this.storage)}get root(){return new ih(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ih(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new hF(function vH(n,e,t){return function uH(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new eF(n,new vc(e),t)}(n=(0,k.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=ia.RAW,r){this._throwIfRoot("putString");const i=VM(t,e),a=Object.assign({},r);return null==a.contentType&&null!=i.contentType&&(a.contentType=i.contentType),new hF(new eF(this._delegate,new vc(i.data,!0),a),this)}listAll(){return function CH(n){return function cH(n){const e={prefixes:[],items:[]};return nF(n,e).then(()=>e)}(n=(0,k.m9)(n))}(this._delegate).then(e=>new fF(e,this.storage))}list(e){return function IH(n,e){return rF(n=(0,k.m9)(n),e)}(this._delegate,e||void 0).then(t=>new fF(t,this.storage))}getMetadata(){return function wH(n){return function dH(n){n._throwIfRoot("getMetadata");const e=K1(n.storage,n._location,uI());return n.storage.makeRequestWithTokens(e,Hu)}(n=(0,k.m9)(n))}(this._delegate)}updateMetadata(e){return function EH(n,e){return function hH(n,e){n._throwIfRoot("updateMetadata");const t=function W$(n,e,t,r){const a=rh(e.fullServerUrl(),n.host,n._protocol),d=BM(t,r),w=n.maxOperationRetryTime,T=new wc(a,"PATCH",RT(n,r),w);return T.headers={"Content-Type":"application/json; charset=utf-8"},T.body=d,T.errorHandler=lI(e),T}(n.storage,n._location,e,uI());return n.storage.makeRequestWithTokens(t,Hu)}(n=(0,k.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function bH(n){return fH(n=(0,k.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function DH(n){return function pH(n){n._throwIfRoot("deleteObject");const e=function q$(n,e){const r=rh(e.fullServerUrl(),n.host,n._protocol),d=new wc(r,"DELETE",function l(_,w){},n.maxOperationRetryTime);return d.successCodes=[200,204],d.errorHandler=lI(e),d}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,Hu)}(n=(0,k.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw L1(e)}}class pF{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(gF(e))throw $v("ref() expected a child path but got a URL, use refFromURL instead.");return new ih(cF(this._delegate,e),this)}refFromURL(e){if(!gF(e))throw $v("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ks.makeFromUrl(e,this._delegate.host)}catch{throw $v("refFromUrl() expected a valid full URL but got an invalid one.")}return new ih(cF(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function dF(n,e,t,r={}){!function yH(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,k.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function gF(n){return/^[A-Za-z]+:\/\//.test(n)}function NH(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new pF(t,r)}function mF(n){const e=function kH(n){return new Bi.y(e=>{const t=l=>e.next(l);t(n.snapshot);const a=n.on("state_changed",t);return n.then(l=>{t(l),e.complete()},l=>{t(n.snapshot),(l=>{e.error(l)})(l)}),function(){a()}}).pipe(function Jj(n,e=$_.z){return(0,pr.e)((t,r)=>{let i=null,a=null,l=null;const d=()=>{if(i){i.unsubscribe(),i=null;const w=a;a=null,r.next(w)}};function _(){const w=l+n,T=e.now();if(T<w)return i=this.schedule(void 0,w-T),void r.add(i);d()}t.subscribe((0,Fn.x)(r,w=>{a=w,l=e.now(),i||(i=e.schedule(_,n),r.add(i))},()=>{d(),r.complete()},void 0,()=>{a=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,vt.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function PT(n){return{getDownloadURL:()=>ht(void 0).pipe(In.fc,Hn(()=>n.getDownloadURL()),In.iC),getMetadata:()=>ht(void 0).pipe(In.fc,Hn(()=>n.getMetadata()),In.iC),delete:()=>(0,Jt.D)(n.delete()),child:e=>PT(n.child(e)),updateMetadata:e=>(0,Jt.D)(n.updateMetadata(e)),put:(e,t)=>mF(n.put(e,t)),putString:(e,t,r)=>mF(n.putString(e,t,r)),list:e=>(0,Jt.D)(n.list(e)),listAll:()=>(0,Jt.D)(n.listAll())}}!function PH(n){const e={TaskState:uo,TaskEvent:J$,StringFormat:ia,Storage:pF,Reference:ih};n.INTERNAL.registerComponent(new Xs.wA("storage-compat",NH,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(kw.Z);const OH=new f.OlP("angularfire2.storageBucket"),FH=new f.OlP("angularfire2.storage.maxUploadRetryTime"),LH=new f.OlP("angularfire2.storage.maxOperationRetryTime"),VH=new f.OlP("angularfire2.storage.use-emulator");let _F=(()=>{class n{constructor(t,r,i,a,l,d,_,w,T,S){const P=(0,Qr.on)(t,l,r);this.storage=(0,Qr.cc)(`${P.name}.storage.${i}`,"AngularFireStorage",P.name,()=>{const U=l.runOutsideAngular(()=>P.storage(i||void 0)),q=T;return q&&U.useEmulator(...q),_&&U.setMaxUploadRetryTime(_),w&&U.setMaxOperationRetryTime(w),U},[_,w])}ref(t){return PT(this.storage.ref(t))}refFromURL(t){return PT(this.storage.refFromURL(t))}upload(t,r,i){return PT(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qr.Dh),f.LFG(Qr.xv,8),f.LFG(OH,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(In.HU),f.LFG(FH,8),f.LFG(LH,8),f.LFG(VH,8),f.LFG(QE,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),UH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({}),n})(),BH=(()=>{class n{constructor(){mO.Z.registerVersion("angularfire",In.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[_F],imports:[UH]}),n})(),jH=(()=>{class n{constructor(t,r){this.afs=t,this.storage=r,this.usersCollection=this.afs.collection("users")}addUser(t){return this.afs.collection("users").add(t)}getAllUsers(){return this.usersCollection.snapshotChanges().pipe((0,vt.U)(t=>t.map(r=>{const i=r.payload.doc.data();return{id:r.payload.doc.id,...i}})))}getUserById(t){return this.usersCollection.doc(t).valueChanges()}deleteUser(t){return this.usersCollection.doc(t).delete()}uploadImage(t){const r=`images/${t.name}`,i=this.storage.ref(r);return this.storage.upload(r,t).then(()=>i.getDownloadURL().toPromise()).catch(a=>{throw console.error("Error uploading image:",a),a})}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(CO),f.LFG(_F))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $H(n,e){if(1&n&&f._UZ(0,"img",23),2&n){const t=f.oxw();f.Q6J("src",t.imageUrl,f.LSH)}}function HH(n,e){1&n&&(f.TgZ(0,"div",24),f._uU(1,"Click to upload image"),f.qZA())}function GH(n,e){1&n&&(f.TgZ(0,"div",25),f._uU(1," First Name is required "),f.qZA())}function zH(n,e){1&n&&(f.TgZ(0,"div",25),f._uU(1," Last Name is required "),f.qZA())}function WH(n,e){1&n&&(f.TgZ(0,"div",25),f._uU(1," Email is required and must be a valid email address "),f.qZA())}function qH(n,e){1&n&&(f.TgZ(0,"div",25),f._uU(1," Phone Number is required "),f.qZA())}function KH(n,e){1&n&&(f.TgZ(0,"div",25),f._uU(1," Address is required "),f.qZA())}function ZH(n,e){1&n&&(f.TgZ(0,"div",25),f._uU(1," Message is required "),f.qZA())}const YH=[{path:"",component:Gj,pathMatch:"full"},{path:"dashboard",component:HB,canActivate:[R1]},{path:"creation-form",component:(()=>{class n{constructor(t,r){this.fb=t,this.sharedService=r,this.imageUrl=null,this.creationForm=this.fb.group({image:[""],firstName:["",Qm.required],lastName:["",Qm.required],email:["",[Qm.required,Qm.email]],phoneNumber:["",Qm.required],address:["",Qm.required],message:["",Qm.required]})}ngOnInit(){}onSubmit(){this.creationForm.valid?this.sharedService.addUser(this.creationForm.value).then(t=>{console.log("user-data",t),this.creationForm.reset()}):console.log("Form is invalid")}onImageSelected(t){var r=this;return(0,me.Z)(function*(){const i=t.target.files[0];if(i)try{r.imageUrl=yield r.sharedService.uploadImage(i),r.creationForm.get("image").setValue(r.imageUrl),console.log("Image uploaded successfully. URL:",r.imageUrl)}catch(a){console.error("Error uploading image:",a)}})()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Bj),f.Y36(jH))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-creation-form"]],decls:41,vars:9,consts:[[1,"container","mt-5"],[1,"mb-4"],[3,"formGroup","ngSubmit"],[1,"image-upload-container",3,"click"],["type","file","accept","image/*",2,"display","none",3,"change"],["fileInput",""],["alt","Selected Image","class","image-preview",3,"src",4,"ngIf"],["class","image-placeholder",4,"ngIf"],[1,"form-group"],["for","firstName"],["type","text","id","firstName","formControlName","firstName",1,"form-control"],["class","text-danger",4,"ngIf"],["for","lastName"],["type","text","id","lastName","formControlName","lastName",1,"form-control"],["for","email"],["type","email","id","email","formControlName","email",1,"form-control"],["for","phoneNumber"],["type","text","id","phoneNumber","formControlName","phoneNumber",1,"form-control"],["for","address"],["id","address","rows","3","formControlName","address",1,"form-control"],["for","message"],["id","message","rows","3","formControlName","message",1,"form-control"],["type","submit",1,"btn","btn-primary","mt-4"],["alt","Selected Image",1,"image-preview",3,"src"],[1,"image-placeholder"],[1,"text-danger"]],template:function(t,r){if(1&t){const i=f.EpF();f.TgZ(0,"div",0)(1,"h1",1),f._uU(2,"Creation Form"),f.qZA(),f.TgZ(3,"form",2),f.NdJ("ngSubmit",function(){return r.onSubmit()}),f.TgZ(4,"div",3),f.NdJ("click",function(){f.CHM(i);const l=f.MAs(6);return f.KtG(l.click())}),f.TgZ(5,"input",4,5),f.NdJ("change",function(l){return r.onImageSelected(l)}),f.qZA(),f.YNc(7,$H,1,1,"img",6),f.YNc(8,HH,2,0,"div",7),f.qZA(),f.TgZ(9,"div",8)(10,"label",9),f._uU(11,"First Name"),f.qZA(),f._UZ(12,"input",10),f.YNc(13,GH,2,0,"div",11),f.qZA(),f.TgZ(14,"div",8)(15,"label",12),f._uU(16,"Last Name"),f.qZA(),f._UZ(17,"input",13),f.YNc(18,zH,2,0,"div",11),f.qZA(),f.TgZ(19,"div",8)(20,"label",14),f._uU(21,"Email"),f.qZA(),f._UZ(22,"input",15),f.YNc(23,WH,2,0,"div",11),f.qZA(),f.TgZ(24,"div",8)(25,"label",16),f._uU(26,"Phone Number"),f.qZA(),f._UZ(27,"input",17),f.YNc(28,qH,2,0,"div",11),f.qZA(),f.TgZ(29,"div",8)(30,"label",18),f._uU(31,"Address"),f.qZA(),f._UZ(32,"textarea",19),f.YNc(33,KH,2,0,"div",11),f.qZA(),f.TgZ(34,"div",8)(35,"label",20),f._uU(36,"Message"),f.qZA(),f._UZ(37,"textarea",21),f.YNc(38,ZH,2,0,"div",11),f.qZA(),f.TgZ(39,"button",22),f._uU(40,"Submit"),f.qZA()()()}if(2&t){let i,a,l,d,_,w;f.xp6(3),f.Q6J("formGroup",r.creationForm),f.xp6(4),f.Q6J("ngIf",r.imageUrl),f.xp6(1),f.Q6J("ngIf",!r.imageUrl),f.xp6(5),f.Q6J("ngIf",(null==(i=r.creationForm.get("firstName"))?null:i.touched)&&(null==(i=r.creationForm.get("firstName"))?null:i.invalid)),f.xp6(5),f.Q6J("ngIf",(null==(a=r.creationForm.get("lastName"))?null:a.touched)&&(null==(a=r.creationForm.get("lastName"))?null:a.invalid)),f.xp6(5),f.Q6J("ngIf",(null==(l=r.creationForm.get("email"))?null:l.touched)&&(null==(l=r.creationForm.get("email"))?null:l.invalid)),f.xp6(5),f.Q6J("ngIf",(null==(d=r.creationForm.get("phoneNumber"))?null:d.touched)&&(null==(d=r.creationForm.get("phoneNumber"))?null:d.invalid)),f.xp6(5),f.Q6J("ngIf",(null==(_=r.creationForm.get("address"))?null:_.touched)&&(null==(_=r.creationForm.get("address"))?null:_.invalid)),f.xp6(5),f.Q6J("ngIf",(null==(w=r.creationForm.get("message"))?null:w.touched)&&(null==(w=r.creationForm.get("message"))?null:w.invalid))}},dependencies:[Kn,DT,Bv,pT,gT,TT,xM],styles:[".image-upload-container[_ngcontent-%COMP%]{position:relative;width:200px;height:200px;border:2px dashed #ccc;border-radius:5px;overflow:hidden;display:flex;align-items:center;justify-content:center;cursor:pointer}.image-preview[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.image-placeholder[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);color:#999}"]}),n})(),canActivate:[R1]},{path:"sign-up",component:Wj},{path:"forgot-password",component:Kj},{path:"verify-email-address",component:Qj}];let QH=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({imports:[vC.forRoot(YH),vC]}),n})(),JH=(()=>{class n{constructor(t){this.authService=t}ngOnInit(){}signOut(){this.authService.SignOut()}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(Zm))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-header"]],decls:14,vars:0,consts:[[1,"navbar","navbar-expand-lg","bg-body-tertiary","mb-4"],[1,"container-fluid"],["href","#",1,"navbar-brand"],["type","button","data-bs-toggle","collapse","data-bs-target","#navbarNav","aria-controls","navbarNav","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler"],[1,"navbar-toggler-icon"],["id","navbarNav",1,"collapse","navbar-collapse","justify-content-end"],[1,"navbar-nav"],[1,"nav-item"],["aria-current","page","href","#",1,"nav-link","active"],[1,"nav-link","active",3,"click"]],template:function(t,r){1&t&&(f.TgZ(0,"nav",0)(1,"div",1)(2,"a",2),f._uU(3,"Abacus"),f.qZA(),f.TgZ(4,"button",3),f._UZ(5,"span",4),f.qZA(),f.TgZ(6,"div",5)(7,"ul",6)(8,"li",7)(9,"a",8),f._uU(10,"Home"),f.qZA()(),f.TgZ(11,"li",7)(12,"a",9),f.NdJ("click",function(){return r.signOut()}),f._uU(13,"Sign Out"),f.qZA()()()()()())},styles:["li[_ngcontent-%COMP%]{cursor:pointer}"]}),n})(),XH=(()=>{class n{constructor(){}ngOnInit(){}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-footer"]],decls:39,vars:0,consts:[[1,"footer","bg-light","text-dark","p-4"],[1,"container"],[1,"row"],[1,"col-md-4"],[1,"list-unstyled"],["href","#"],[1,"fab","fa-facebook"],[1,"fab","fa-twitter"],[1,"fab","fa-instagram"],[1,"col-md-12","text-center"]],template:function(t,r){1&t&&(f.TgZ(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h5"),f._uU(5,"About Us"),f.qZA(),f.TgZ(6,"p"),f._uU(7,"Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nullam suscipit felis vel augue semper, sed fermentum lectus faucibus."),f.qZA()(),f.TgZ(8,"div",3)(9,"h5"),f._uU(10,"Contact Us"),f.qZA(),f.TgZ(11,"address"),f._uU(12," 123 Main Street"),f._UZ(13,"br"),f._uU(14," City, State, ZIP"),f._UZ(15,"br"),f._uU(16," Phone: (123) 456-7890"),f._UZ(17,"br"),f.qZA()(),f.TgZ(18,"div",3)(19,"h5"),f._uU(20,"Follow Us"),f.qZA(),f.TgZ(21,"ul",4)(22,"li")(23,"a",5),f._UZ(24,"i",6),f._uU(25," Facebook"),f.qZA()(),f.TgZ(26,"li")(27,"a",5),f._UZ(28,"i",7),f._uU(29," Twitter"),f.qZA()(),f.TgZ(30,"li")(31,"a",5),f._UZ(32,"i",8),f._uU(33," Instagram"),f.qZA()()()()(),f._UZ(34,"hr"),f.TgZ(35,"div",2)(36,"div",9)(37,"p"),f._uU(38,"\xa9 2024 Your Company. All Rights Reserved."),f.qZA()()()()())}}),n})();function eG(n,e){1&n&&(f.ynx(0),f._UZ(1,"app-header"),f.BQk())}function tG(n,e){1&n&&(f.ynx(0),f._UZ(1,"app-footer"),f.BQk())}let nG=(()=>{class n{constructor(t){this.router=t,this.title="clinic-manangement-sys",this.showHeaderAndFooter=!0,this.router.events.subscribe(r=>{r instanceof Ys&&(this.showHeaderAndFooter=!["/","/sign-up"].includes(r.url))})}}return n.\u0275fac=function(t){return new(t||n)(f.Y36(gn))},n.\u0275cmp=f.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:2,consts:[[4,"ngIf"]],template:function(t,r){1&t&&(f.YNc(0,eG,2,0,"ng-container",0),f._UZ(1,"router-outlet"),f.YNc(2,tG,2,0,"ng-container",0)),2&t&&(f.Q6J("ngIf",r.showHeaderAndFooter),f.xp6(2),f.Q6J("ngIf",r.showHeaderAndFooter))},dependencies:[Kn,p,JH,XH]}),n})();const yF_firebaseConfig={apiKey:"AIzaSyBODnFqRFLG0dpOSYKIZ0RUulDb3GYrPg4",authDomain:"angular-firebase-f8eb1.firebaseapp.com",projectId:"angular-firebase-f8eb1",storageBucket:"angular-firebase-f8eb1.appspot.com",messagingSenderId:"71816398417",appId:"1:71816398417:web:330a9f6d61a762fa129a70",measurementId:"G-K2464JBSWQ"};var rG=V(5032);const vF="@firebase/database";let zM="";function EF(n){zM=n}class oG{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class aG{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const IF=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new oG(e)}}catch{}return new aG},e_=IF("localStorage"),WM=IF("sessionStorage"),zv=new Aa.Yd("@firebase/database"),CF=function(){let n=1;return function(){return n++}}(),bF=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},cI=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=cI.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let t_=null,DF=!0;const TF=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(zv.logLevel=Aa.in.VERBOSE,t_=zv.log.bind(zv),e&&WM.set("logging_enabled",!0)):"function"==typeof n?t_=n:(t_=null,WM.remove("logging_enabled"))},zi=function(...n){if(!0===DF&&(DF=!1,null===t_&&!0===WM.get("logging_enabled")&&TF(!0)),t_){const e=cI.apply(null,n);t_(e)}},dI=function(n){return function(...e){zi(n,...e)}},qM=function(...n){const e="FIREBASE INTERNAL ERROR: "+cI(...n);zv.error(e)},Ic=function(...n){const e=`FIREBASE FATAL ERROR: ${cI(...n)}`;throw zv.error(e),new Error(e)},Os=function(...n){const e="FIREBASE WARNING: "+cI(...n);zv.warn(e)},kT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},fp="[MIN_NAME]",sh="[MAX_NAME]",n_=function(n,e){if(n===e)return 0;if(n===fp||e===sh)return-1;if(e===fp||n===sh)return 1;{const t=xF(n),r=xF(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},cG=function(n,e){return n===e?0:n<e?-1:1},hI=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},KM=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=KM(n[e[r]]);return t+="}",t},SF=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Wi(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const AF=function(n){(0,k.hu)(!kT(n),"Invalid JSON number");const r=1023;let i,a,l,d,_;0===n?(a=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(d=Math.min(Math.floor(Math.log(n)/Math.LN2),r),a=d+r,l=Math.round(n*Math.pow(2,52-d)-Math.pow(2,52))):(a=0,l=Math.round(n/Math.pow(2,-1074))));const w=[];for(_=52;_;_-=1)w.push(l%2?1:0),l=Math.floor(l/2);for(_=11;_;_-=1)w.push(a%2?1:0),a=Math.floor(a/2);w.push(i?1:0),w.reverse();const T=w.join("");let S="";for(_=0;_<64;_+=8){let P=parseInt(T.substr(_,8),2).toString(16);1===P.length&&(P="0"+P),S+=P}return S.toLowerCase()},pG=new RegExp("^-?(0*)\\d{1,10}$"),xF=function(n){if(pG.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Wv=function(n){try{n()}catch(e){setTimeout(()=>{throw Os("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},fI=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class yG{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Os(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class vG{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(zi("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Os(e)}}let pI=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const kF=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,LF="websocket",VF="long_polling";class YM{constructor(e,t,r,i,a=!1,l="",d=!1,_=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=a,this.persistenceKey=l,this.includeNamespaceInQueryParams=d,this.isUsingEmulator=_,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=e_.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&e_.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function UF(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===LF)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==VF)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function wG(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Wi(t,(a,l)=>{i.push(a+"="+l)}),r+i.join("&")}class EG{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const QM={},JM={};function XM(n){const e=n.toString();return QM[e]||(QM[e]=new EG),QM[e]}class CG{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Wv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class pp{constructor(e,t,r,i,a,l,d){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=a,this.transportSessionId=l,this.lastSessionId=d,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=dI(e),this.stats_=XM(t),this.urlFn=_=>(this.appCheckToken&&(_.ac=this.appCheckToken),UF(t,VF,_))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new CG(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new eN((...a)=>{const[l,d,_,w,T]=a;if(this.incrementIncomingBytes_(a),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=d,this.password=_;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);d?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(d,()=>{this.onClosed_()})):this.onClosed_()}},(...a)=>{const[l,d]=a;this.incrementIncomingBytes_(a),this.myPacketOrderer.handleResponse(l,d)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&kF.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){pp.forceAllow_=!0}static forceDisallow(){pp.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!pp.forceAllow_&&(pp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=SF(r,1840);for(let a=0;a<i.length;a++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[a]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class eN{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=CF(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=eN.createIFrame_();let a="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(a='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+a+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(d){zi("frame writing exception"),d.stack&&zi(d.stack),zi(d)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||zi("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{zi("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let FT=null;typeof MozWebSocket<"u"?FT=MozWebSocket:typeof WebSocket<"u"&&(FT=WebSocket);let qv=(()=>{class n{constructor(t,r,i,a,l,d,_){this.connId=t,this.applicationId=i,this.appCheckToken=a,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=dI(this.connId),this.stats_=XM(r),this.connURL=n.connectionURL_(r,d,_,a,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,a,l){const d={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&kF.test(location.hostname)&&(d.r="f"),r&&(d.s=r),i&&(d.ls=i),a&&(d.ac=a),l&&(d.p=l),UF(t,LF,d)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,e_.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${zM}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,d=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;d&&(i.proxy={origin:d})}this.mySock=new FT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const a=i.message||i.data;return a&&this.log_(a),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const a=i.message||i.data;a&&this.log_(a),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==FT&&!n.forceDisallow_}static previouslyFailed(){return e_.isInMemoryStorage||!0===e_.get("previous_websocket_failure")}markConnectionHealthy(){e_.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=SF(r,16384);i.length>1&&this.sendString_(String(i.length));for(let a=0;a<i.length;a++)this.sendString_(i[a])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),WF=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[pp,qv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=qv&&qv.isAvailable();let i=r&&!qv.previouslyFailed();if(t.webSocketOnly&&(r||Os("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[qv];else{const a=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&a.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class XF{constructor(e,t,r,i,a,l,d,_,w,T){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=a,this.onMessage_=l,this.onReady_=d,this.onDisconnect_=_,this.onKill_=w,this.lastSessionId=T,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=dI("c:"+this.id+":"),this.transportManager_=new WF(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=fI(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=hI("t",e),r=hI("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=hI("t",e),r=hI("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=hI("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?qM("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):qM("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Os("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),fI(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fI(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(e_.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class eL{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class tL{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let a=0;a<i.length;a++)if(i[a].callback===t&&(!r||r===i[a].context))return void i.splice(a,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class LT extends tL{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new LT}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Pn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Cn(){return new Pn("")}function Xt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function gp(n){return n.pieces_.length-n.pieceNum_}function tr(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Pn(n.pieces_,e)}function nN(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function gI(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function iL(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Pn(e,0)}function Ar(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Pn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Pn(t,0)}function en(n){return n.pieceNum_>=n.pieces_.length}function lo(n,e){const t=Xt(n),r=Xt(e);if(null===t)return e;if(t===r)return lo(tr(n),tr(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function zG(n,e){const t=gI(n,0),r=gI(e,0);for(let i=0;i<t.length&&i<r.length;i++){const a=n_(t[i],r[i]);if(0!==a)return a}return t.length===r.length?0:t.length<r.length?-1:1}function rN(n,e){if(gp(n)!==gp(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Ga(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(gp(n)>gp(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class WG{constructor(e,t){this.errorPrefix_=t,this.parts_=gI(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);sL(this)}}function sL(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+r_(n))}function r_(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class iN extends tL{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new iN}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const mI=1e3;let UT,i_=(()=>{class n extends eL{constructor(t,r,i,a,l,d,_,w){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=a,this.onServerInfoUpdate_=l,this.authTokenProvider_=d,this.appCheckTokenProvider_=_,this.authOverride_=w,this.id=n.nextPersistentConnectionId_++,this.log_=dI("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=mI,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,w&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");iN.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&LT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const a=++this.requestNumber_,l={r:a,a:t,b:r};this.log_((0,k.Wl)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[a]=i)}get(t){this.initConnection_();const r=new k.BH,i={p:t._path.toString(),q:t._queryObject};return this.outstandingGets_.push({action:"g",request:i,onComplete:d=>{const _=d.d;"ok"===d.s?r.resolve(_):r.reject(_)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,a){this.initConnection_();const l=t._queryIdentifier,d=t._path.toString();this.log_("Listen called for "+d+" "+l),this.listens.has(d)||this.listens.set(d,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(d).has(l),"listen() called twice for same path/queryId.");const _={onComplete:a,hashFn:r,query:t,tag:i};this.listens.get(d).set(l,_),this.connected_&&this.sendListen_(_)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),a=r._queryIdentifier;this.log_("Listen on "+i+" for "+a);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,_=>{const w=_.d,T=_.s;n.warnOnListenWarnings_(w,r),(this.listens.get(i)&&this.listens.get(i).get(a))===t&&(this.log_("listen response",_),"ok"!==T&&this.removeListen_(i,a),t.onComplete&&t.onComplete(T,w))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const a='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();Os(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${a} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,a=>{const l=a.s,d=a.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),a=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+a),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,a)&&this.connected_&&this.sendUnlisten_(i,a,t._queryObject,r)}sendUnlisten_(t,r,i,a){this.log_("Unlisten on "+t+" for "+r);const l={p:t};a&&(l.q=i,l.t=a),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,a){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,d=>{a&&setTimeout(()=>{a(d.s,d.d)},Math.floor(0))})}put(t,r,i,a){this.putInternal("p",t,r,i,a)}merge(t,r,i,a){this.putInternal("m",t,r,i,a)}putInternal(t,r,i,a,l){this.initConnection_();const d={p:r,d:i};void 0!==l&&(d.h=l),this.outstandingPuts_.push({action:t,request:d,onComplete:a}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,a=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),a&&a(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):qM("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=mI,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=mI,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=mI),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,me.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),a=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,d=t.lastSessionId;let _=!1,w=null;const T=function(){w?w.close():(_=!0,a())};t.realtime_={close:T,sendRequest:function(U){(0,k.hu)(w,"sendRequest call when we're not connected not allowed."),w.sendRequest(U)}};const P=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[U,q]=yield Promise.all([t.authTokenProvider_.getToken(P),t.appCheckTokenProvider_.getToken(P)]);_?zi("getToken() completed but was canceled"):(zi("getToken() completed. Creating connection."),t.authToken_=U&&U.accessToken,t.appCheckToken_=q&&q.token,w=new XF(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,a,de=>{Os(de+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},d))}catch(U){t.log_("Failed to get token: "+U),_||(t.repoInfo_.nodeAdmin&&Os(U),T())}}})()}interrupt(t){zi("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){zi("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=mI,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>KM(l)).join("$"):"default";const a=this.removeListen_(t,i);a&&a.onComplete&&a.onComplete("permission_denied")}removeListen_(t,r){const i=new Pn(t).toString();let a;if(this.listens.has(i)){const l=this.listens.get(i);a=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else a=void 0;return a}onAuthRevoked_(t,r){zi("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){zi("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+zM.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=LT.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class nn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new nn(e,t)}}class VT{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new nn(fp,e),i=new nn(fp,t);return 0!==this.compare(r,i)}minPost(){return nn.MIN}}class uL extends VT{static get __EMPTY_NODE(){return UT}static set __EMPTY_NODE(e){UT=e}compare(e,t){return n_(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return nn.MIN}maxPost(){return new nn(sh,UT)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new nn(e,UT)}toString(){return".key"}}const Cc=new uL;class BT{constructor(e,t,r,i,a=null){this.isReverse_=i,this.resultGenerator_=a,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let oN,Gu=(()=>{class n{constructor(t,r,i,a,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=a??To.EMPTY_NODE,this.right=l??To.EMPTY_NODE}copy(t,r,i,a,l){return new n(t??this.key,r??this.value,i??this.color,a??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let a=this;const l=i(t,a.key);return a=l<0?a.copy(null,null,null,a.left.insert(t,r,i),null):0===l?a.copy(null,r,null,null,null):a.copy(null,null,null,null,a.right.insert(t,r,i)),a.fixUp_()}removeMin_(){if(this.left.isEmpty())return To.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,a;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return To.EMPTY_NODE;a=i.right.min_(),i=i.copy(a.key,a.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class To{constructor(e,t=To.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new To(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Gu.BLACK,null,null))}remove(e){return new To(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Gu.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new BT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new BT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new BT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new BT(this.root_,null,this.comparator_,!0,e)}}function e4(n,e){return n_(n.name,e.name)}function sN(n,e){return n_(n,e)}To.EMPTY_NODE=new class XG{copy(e,t,r,i,a){return this}insert(e,t,r){return new Gu(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const lL=function(n){return"number"==typeof n?"number:"+AF(n):"string:"+n},cL=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===oN||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===oN||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let dL,hL,fL,Kv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),cL(this.priorityNode_)}static set __childrenNodeConstructor(t){dL=t}static get __childrenNodeConstructor(){return dL}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return en(t)?this:".priority"===Xt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Xt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===gp(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(tr(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+lL(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?AF(this.value_):this.value_,this.lazyHash_=bF(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,a=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(a>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),a===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-a}withIndex(){return this}isIndexed(){return!0}equals(t){if(t===this)return!0;if(t.isLeafNode()){const r=t;return this.value_===r.value_&&this.priorityNode_.equals(r.priorityNode_)}return!1}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const lr=new class i4 extends VT{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),a=r.compareTo(i);return 0===a?n_(e.name,t.name):a}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return nn.MIN}maxPost(){return new nn(sh,new Kv("[PRIORITY-POST]",fL))}makePost(e,t){const r=hL(e);return new nn(t,new Kv("[PRIORITY-POST]",r))}toString(){return".priority"}},s4=Math.log(2);class o4{constructor(e){this.count=parseInt(Math.log(e+1)/s4,10),this.current_=this.count-1;const i=(a=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const jT=function(n,e,t,r){n.sort(e);const i=function(_,w){const T=w-_;let S,P;if(0===T)return null;if(1===T)return S=n[_],P=t?t(S):S,new Gu(P,S.node,Gu.BLACK,null,null);{const U=parseInt(T/2,10)+_,q=i(_,U),de=i(U+1,w);return S=n[U],P=t?t(S):S,new Gu(P,S.node,Gu.BLACK,q,de)}},d=function(_){let w=null,T=null,S=n.length;const P=function(q,de){const fe=S-q,Qe=S;S-=q;const tt=i(fe+1,Qe),Xe=n[fe],mt=t?t(Xe):Xe;U(new Gu(mt,Xe.node,de,null,tt))},U=function(q){w?(w.left=q,w=q):(T=q,w=q)};for(let q=0;q<_.count;++q){const de=_.nextBitIsOne(),fe=Math.pow(2,_.count-(q+1));de?P(fe,Gu.BLACK):(P(fe,Gu.BLACK),P(fe,Gu.RED))}return T}(new o4(n.length));return new To(r||e,d)};let aN;const Zv={};class oh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Zv&&lr,"ChildrenNode.ts has not been loaded"),aN=aN||new oh({".priority":Zv},{".priority":lr}),aN}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof To?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==Cc,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const a=t.getIterator(nn.Wrap);let d,l=a.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=a.getNext();d=i?jT(r,e.getCompare()):Zv;const _=e.toString(),w=Object.assign({},this.indexSet_);w[_]=e;const T=Object.assign({},this.indexes_);return T[_]=d,new oh(T,w)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,a)=>{const l=(0,k.DV)(this.indexSet_,a);if((0,k.hu)(l,"Missing index implementation for "+a),i===Zv){if(l.isDefinedOn(e.node)){const d=[],_=t.getIterator(nn.Wrap);let w=_.getNext();for(;w;)w.name!==e.name&&d.push(w),w=_.getNext();return d.push(e),jT(d,l.getCompare())}return Zv}{const d=t.get(e.name);let _=i;return d&&(_=_.remove(new nn(e.name,d))),_.insert(e,e.node)}});return new oh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===Zv)return i;{const a=t.get(e.name);return a?i.remove(new nn(e.name,a)):i}});return new oh(r,this.indexSet_)}}let _I,qt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&cL(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return _I||(_I=new n(new To(sN),null,oh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||_I}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?_I:r}}getChild(t){const r=Xt(t);return null===r?this:this.getImmediateChild(r).getChild(tr(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new nn(t,r);let a,l;r.isEmpty()?(a=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(a=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const d=a.isEmpty()?_I:this.priorityNode_;return new n(a,d,l)}}updateChild(t,r){const i=Xt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Xt(t)||1===gp(t),".priority must be the last token in a path");const a=this.getImmediateChild(i).updateChild(tr(t),r);return this.updateImmediateChild(i,a)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,a=0,l=!0;if(this.forEachChild(lr,(d,_)=>{r[d]=_.val(t),i++,l&&n.INTEGER_REGEXP_.test(d)?a=Math.max(a,Number(d)):l=!1}),!t&&l&&a<2*i){const d=[];for(const _ in r)d[_]=r[_];return d}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+lL(this.getPriority().val())+":"),this.forEachChild(lr,(r,i)=>{const a=i.hash();""!==a&&(t+=":"+r+":"+a)}),this.lazyHash_=""===t?"":bF(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const a=this.resolveIndex_(i);if(a){const l=a.getPredecessorKey(new nn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new nn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new nn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(a=>r(a.name,a.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,a=>a);{const a=this.children_.getIteratorFrom(t.name,nn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)<0;)a.getNext(),l=a.peek();return a}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,a=>a);{const a=this.children_.getReverseIteratorFrom(t.name,nn.Wrap);let l=a.peek();for(;null!=l&&r.compare(l,t)>0;)a.getNext(),l=a.peek();return a}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===yI?-1:0}withIndex(t){if(t===Cc||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Cc||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(lr),a=r.getIterator(lr);let l=i.getNext(),d=a.getNext();for(;l&&d;){if(l.name!==d.name||!l.node.equals(d.node))return!1;l=i.getNext(),d=a.getNext()}return null===l&&null===d}return!1}return!1}}resolveIndex_(t){return t===Cc?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const yI=new class a4 extends qt{constructor(){super(new To(sN),qt.EMPTY_NODE,oh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return qt.EMPTY_NODE}isEmpty(){return!1}};function Or(n,e=null){if(null===n)return qt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Kv(n,Or(e));if(n instanceof Array){let t=qt.EMPTY_NODE;return Wi(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const a=Or(i);(a.isLeafNode()||!a.isEmpty())&&(t=t.updateImmediateChild(r,a))}}),t.updatePriority(Or(e))}{const t=[];let r=!1;if(Wi(n,(l,d)=>{if("."!==l.substring(0,1)){const _=Or(d);_.isEmpty()||(r=r||!_.getPriority().isEmpty(),t.push(new nn(l,_)))}}),0===t.length)return qt.EMPTY_NODE;const a=jT(t,e4,l=>l.name,sN);if(r){const l=jT(t,lr.getCompare());return new qt(a,Or(e),new oh({".priority":l},{".priority":lr}))}return new qt(a,Or(e),oh.Default)}}Object.defineProperties(nn,{MIN:{value:new nn(fp,qt.EMPTY_NODE)},MAX:{value:new nn(sh,yI)}}),uL.__EMPTY_NODE=qt.EMPTY_NODE,Kv.__childrenNodeConstructor=qt,function t4(n){oN=n}(yI),function r4(n){fL=n}(yI),function n4(n){hL=n}(Or);class uN extends VT{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!en(e)&&".priority"!==Xt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),a=r.compareTo(i);return 0===a?n_(e.name,t.name):a}makePost(e,t){const r=Or(e),i=qt.EMPTY_NODE.updateChild(this.indexPath_,r);return new nn(t,i)}maxPost(){const e=qt.EMPTY_NODE.updateChild(this.indexPath_,yI);return new nn(sh,e)}toString(){return gI(this.indexPath_,0).join("/")}}const lN=new class l4 extends VT{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?n_(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return nn.MIN}maxPost(){return nn.MAX}makePost(e,t){const r=Or(e);return new nn(t,r)}toString(){return".value"}};function pL(n){return{type:"value",snapshotNode:n}}function Yv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function vI(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function wI(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class cN{constructor(e){this.index_=e}updateChild(e,t,r,i,a,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const d=e.getImmediateChild(t);return d.getChild(i).equals(r.getChild(i))&&d.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(vI(t,d)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):d.isEmpty()?l.trackChildChange(Yv(t,r)):l.trackChildChange(wI(t,r,d))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(lr,(i,a)=>{t.hasChild(i)||r.trackChildChange(vI(i,a))}),t.isLeafNode()||t.forEachChild(lr,(i,a)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(a)||r.trackChildChange(wI(i,a,l))}else r.trackChildChange(Yv(i,a))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?qt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class EI{constructor(e){this.indexedFilter_=new cN(e.getIndex()),this.index_=e.getIndex(),this.startPost_=EI.getStartPost_(e),this.endPost_=EI.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,a,l){return this.matches(new nn(t,r))||(r=qt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,a,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=qt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(qt.EMPTY_NODE);const a=this;return t.forEachChild(lr,(l,d)=>{a.matches(new nn(l,d))||(i=i.updateImmediateChild(l,qt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class d4{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new EI(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,a,l){return this.rangedFilter_.matches(new nn(t,r))||(r=qt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,a,l):this.fullLimitUpdateChild_(e,t,r,a,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=qt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let a;i=qt.EMPTY_NODE.withIndex(this.index_),a=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;a.hasNext()&&l<this.limit_;){const d=a.getNext();if(this.withinDirectionalStart(d)){if(!this.withinDirectionalEnd(d))break;i=i.updateImmediateChild(d.name,d.node),l++}}}else{let a;i=t.withIndex(this.index_),i=i.updatePriority(qt.EMPTY_NODE),a=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;a.hasNext();){const d=a.getNext();l<this.limit_&&this.withinDirectionalStart(d)&&this.withinDirectionalEnd(d)?l++:i=i.updateImmediateChild(d.name,qt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,a){let l;if(this.reverse_){const S=this.index_.getCompare();l=(P,U)=>S(U,P)}else l=this.index_.getCompare();const d=e;(0,k.hu)(d.numChildren()===this.limit_,"");const _=new nn(t,r),w=this.reverse_?d.getFirstChild(this.index_):d.getLastChild(this.index_),T=this.rangedFilter_.matches(_);if(d.hasChild(t)){const S=d.getImmediateChild(t);let P=i.getChildAfterChild(this.index_,w,this.reverse_);for(;null!=P&&(P.name===t||d.hasChild(P.name));)P=i.getChildAfterChild(this.index_,P,this.reverse_);const U=null==P?1:l(P,_);if(T&&!r.isEmpty()&&U>=0)return a?.trackChildChange(wI(t,r,S)),d.updateImmediateChild(t,r);{a?.trackChildChange(vI(t,S));const de=d.updateImmediateChild(t,qt.EMPTY_NODE);return null!=P&&this.rangedFilter_.matches(P)?(a?.trackChildChange(Yv(P.name,P.node)),de.updateImmediateChild(P.name,P.node)):de}}return r.isEmpty()?e:T&&l(w,_)>=0?(null!=a&&(a.trackChildChange(vI(w.name,w.node)),a.trackChildChange(Yv(t,r))),d.updateImmediateChild(t,r).updateImmediateChild(w.name,qt.EMPTY_NODE)):e}}class $T{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=lr}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:fp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:sh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===lr}copy(){const e=new $T;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function dN(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function hN(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function HT(n,e){const t=n.copy();return t.index_=e,t}function gL(n){const e={};if(n.isDefault())return e;let t;if(n.index_===lr?t="$priority":n.index_===lN?t="$value":n.index_===Cc?t="$key":((0,k.hu)(n.index_ instanceof uN,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function mL(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==lr&&(e.i=n.index_.toString()),e}class GT extends eL{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=dI("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const a=e._path.toString();this.log_("Listen called for "+a+" "+e._queryIdentifier);const l=GT.getListenId_(e,r),d={};this.listens_[l]=d;const _=gL(e._queryParams);this.restRequest_(a+".json",_,(w,T)=>{let S=T;if(404===w&&(S=null,w=null),null===w&&this.onDataUpdate_(a,S,!1,r),(0,k.DV)(this.listens_,l)===d){let P;P=w?401===w?"permission_denied":"rest_error:"+w:"ok",i(P,null)}})}unlisten(e,t){const r=GT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=gL(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(a,l)=>{let d=l;404===a&&(d=null,a=null),null===a?(this.onDataUpdate_(r,d,!1,null),i.resolve(d)):i.reject(new Error(d))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,a])=>{i&&i.accessToken&&(t.auth=i.accessToken),a&&a.token&&(t.ac=a.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const d=new XMLHttpRequest;d.onreadystatechange=()=>{if(r&&4===d.readyState){this.log_("REST Response for "+l+" received. status:",d.status,"response:",d.responseText);let _=null;if(d.status>=200&&d.status<300){try{_=(0,k.cI)(d.responseText)}catch{Os("Failed to parse JSON response for "+l+": "+d.responseText)}r(null,_)}else 401!==d.status&&404!==d.status&&Os("Got unsuccessful REST response for "+l+" Status: "+d.status),r(d.status);r=null}},d.open("GET",l,!0),d.send()})}}class _4{constructor(){this.rootNode_=qt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function zT(){return{value:null,children:new Map}}function Qv(n,e,t){if(en(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Xt(e);n.children.has(r)||n.children.set(r,zT()),Qv(n.children.get(r),e=tr(e),t)}}function fN(n,e){if(en(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(lr,(r,i)=>{Qv(n,new Pn(r),i)}),fN(n,e)}}if(n.children.size>0){const t=Xt(e);return e=tr(e),n.children.has(t)&&fN(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function pN(n,e,t){null!==n.value?t(e,n.value):function y4(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{pN(i,new Pn(e.toString()+"/"+r),t)})}class v4{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Wi(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class I4{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new v4(e);const r=1e4+2e4*Math.random();fI(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Wi(e,(i,a)=>{a>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=a,r=!0)}),r&&this.server_.reportStats(t),fI(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var za=(()=>(function(n){n[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"}(za||(za={})),za))();function _N(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class WT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=za.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(en(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Pn(e));return new WT(Cn(),t,this.revert)}}return(0,k.hu)(Xt(this.path)===e,"operationForChild called for unrelated child."),new WT(tr(this.path),this.affectedTree,this.revert)}}class II{constructor(e,t){this.source=e,this.path=t,this.type=za.LISTEN_COMPLETE}operationForChild(e){return en(this.path)?new II(this.source,Cn()):new II(this.source,tr(this.path))}}class s_{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=za.OVERWRITE}operationForChild(e){return en(this.path)?new s_(this.source,Cn(),this.snap.getImmediateChild(e)):new s_(this.source,tr(this.path),this.snap)}}class Jv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=za.MERGE}operationForChild(e){if(en(this.path)){const t=this.children.subtree(new Pn(e));return t.isEmpty()?null:t.value?new s_(this.source,Cn(),t.value):new Jv(this.source,Cn(),t)}return(0,k.hu)(Xt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Jv(this.source,tr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class mp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(en(e))return this.isFullyInitialized()&&!this.filtered_;const t=Xt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class C4{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function CI(n,e,t,r,i,a){const l=r.filter(d=>d.type===t);l.sort((d,_)=>function T4(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new nn(e.childName,e.snapshotNode),i=new nn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,d,_)),l.forEach(d=>{const _=function D4(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,d,a);i.forEach(w=>{w.respondsTo(d.type)&&e.push(w.createEvent(_,n.query_))})})}function qT(n,e){return{eventCache:n,serverCache:e}}function bI(n,e,t,r){return qT(new mp(e,t,r),n.serverCache)}function yL(n,e,t,r){return qT(n.eventCache,new mp(e,t,r))}function KT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function o_(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let yN;class cr{constructor(e,t=(()=>(yN||(yN=new To(cG)),yN))()){this.value=e,this.children=t}static fromObject(e){let t=new cr(null);return Wi(e,(r,i)=>{t=t.set(new Pn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Cn(),value:this.value};if(en(e))return null;{const r=Xt(e),i=this.children.get(r);if(null!==i){const a=i.findRootMostMatchingPathAndValue(tr(e),t);return null!=a?{path:Ar(new Pn(r),a.path),value:a.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(en(e))return this;{const t=Xt(e),r=this.children.get(t);return null!==r?r.subtree(tr(e)):new cr(null)}}set(e,t){if(en(e))return new cr(t,this.children);{const r=Xt(e),a=(this.children.get(r)||new cr(null)).set(tr(e),t),l=this.children.insert(r,a);return new cr(this.value,l)}}remove(e){if(en(e))return this.children.isEmpty()?new cr(null):new cr(null,this.children);{const t=Xt(e),r=this.children.get(t);if(r){const i=r.remove(tr(e));let a;return a=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&a.isEmpty()?new cr(null):new cr(this.value,a)}return this}}get(e){if(en(e))return this.value;{const t=Xt(e),r=this.children.get(t);return r?r.get(tr(e)):null}}setTree(e,t){if(en(e))return t;{const r=Xt(e),a=(this.children.get(r)||new cr(null)).setTree(tr(e),t);let l;return l=a.isEmpty()?this.children.remove(r):this.children.insert(r,a),new cr(this.value,l)}}fold(e){return this.fold_(Cn(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,a)=>{r[i]=a.fold_(Ar(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Cn(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(en(e))return null;{const a=Xt(e),l=this.children.get(a);return l?l.findOnPath_(tr(e),Ar(t,a),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Cn(),t)}foreachOnPath_(e,t,r){if(en(e))return this;{this.value&&r(t,this.value);const i=Xt(e),a=this.children.get(i);return a?a.foreachOnPath_(tr(e),Ar(t,i),r):new cr(null)}}foreach(e){this.foreach_(Cn(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(Ar(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class zu{constructor(e){this.writeTree_=e}static empty(){return new zu(new cr(null))}}function DI(n,e,t){if(en(e))return new zu(new cr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let a=r.value;const l=lo(i,e);return a=a.updateChild(l,t),new zu(n.writeTree_.set(i,a))}{const i=new cr(t),a=n.writeTree_.setTree(e,i);return new zu(a)}}}function vN(n,e,t){let r=n;return Wi(t,(i,a)=>{r=DI(r,Ar(e,i),a)}),r}function vL(n,e){if(en(e))return zu.empty();{const t=n.writeTree_.setTree(e,new cr(null));return new zu(t)}}function wN(n,e){return null!=a_(n,e)}function a_(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(lo(t.path,e)):null}function wL(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(lr,(r,i)=>{e.push(new nn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new nn(r,i.value))}),e}function _p(n,e){if(en(e))return n;{const t=a_(n,e);return new zu(null!=t?new cr(t):n.writeTree_.subtree(e))}}function EN(n){return n.writeTree_.isEmpty()}function Xv(n,e){return EL(Cn(),n.writeTree_,e)}function EL(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,a)=>{".priority"===i?((0,k.hu)(null!==a.value,"Priority writes must always be leaf nodes"),r=a.value):t=EL(Ar(n,i),a,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(Ar(n,".priority"),r)),t}}function ZT(n,e){return TL(e,n)}function N4(n,e){if(n.snap)return Ga(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Ga(Ar(n.path,t),e))return!0;return!1}function k4(n){return n.visible}function IL(n,e,t){let r=zu.empty();for(let i=0;i<n.length;++i){const a=n[i];if(e(a)){const l=a.path;let d;if(a.snap)Ga(t,l)?(d=lo(t,l),r=DI(r,d,a.snap)):Ga(l,t)&&(d=lo(l,t),r=DI(r,Cn(),a.snap.getChild(d)));else{if(!a.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(Ga(t,l))d=lo(t,l),r=vN(r,d,a.children);else if(Ga(l,t))if(d=lo(l,t),en(d))r=vN(r,Cn(),a.children);else{const _=(0,k.DV)(a.children,Xt(d));if(_){const w=_.getChild(tr(d));r=DI(r,Cn(),w)}}}}}return r}function CL(n,e,t,r,i){if(r||i){const a=_p(n.visibleWrites,e);return!i&&EN(a)?t:i||null!=t||wN(a,Cn())?Xv(IL(n.allWrites,function(w){return(w.visible||i)&&(!r||!~r.indexOf(w.writeId))&&(Ga(w.path,e)||Ga(e,w.path))},e),t||qt.EMPTY_NODE):null}{const a=a_(n.visibleWrites,e);if(null!=a)return a;{const l=_p(n.visibleWrites,e);return EN(l)?t:null!=t||wN(l,Cn())?Xv(l,t||qt.EMPTY_NODE):null}}}function YT(n,e,t,r){return CL(n.writeTree,n.treePath,e,t,r)}function IN(n,e){return function O4(n,e,t){let r=qt.EMPTY_NODE;const i=a_(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(lr,(a,l)=>{r=r.updateImmediateChild(a,l)}),r;if(t){const a=_p(n.visibleWrites,e);return t.forEachChild(lr,(l,d)=>{const _=Xv(_p(a,new Pn(l)),d);r=r.updateImmediateChild(l,_)}),wL(a).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return wL(_p(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function bL(n,e,t,r){return function F4(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const a=Ar(e,t);if(wN(n.visibleWrites,a))return null;{const l=_p(n.visibleWrites,a);return EN(l)?i.getChild(t):Xv(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function QT(n,e){return function V4(n,e){return a_(n.visibleWrites,e)}(n.writeTree,Ar(n.treePath,e))}function CN(n,e,t){return function L4(n,e,t,r){const i=Ar(e,t),a=a_(n.visibleWrites,i);return null!=a?a:r.isCompleteForChild(t)?Xv(_p(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function DL(n,e){return TL(Ar(n.treePath,e),n.writeTree)}function TL(n,e){return{treePath:n,writeTree:e}}class $4{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const a=i.type;if("child_added"===t&&"child_removed"===a)this.changeMap.set(r,wI(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===a)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===a)this.changeMap.set(r,vI(r,i.oldSnap));else if("child_changed"===t&&"child_added"===a)this.changeMap.set(r,Yv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==a)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,wI(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const SL=new class H4{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class bN{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new mp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return CN(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:o_(this.viewCache_),a=function j4(n,e,t,r,i,a){return function U4(n,e,t,r,i,a,l){let d;const _=_p(n.visibleWrites,e),w=a_(_,Cn());if(null!=w)d=w;else{if(null==t)return[];d=Xv(_,t)}if(d=d.withIndex(l),d.isEmpty()||d.isLeafNode())return[];{const T=[],S=l.getCompare(),P=a?d.getReverseIteratorFrom(r,l):d.getIteratorFrom(r,l);let U=P.getNext();for(;U&&T.length<i;)0!==S(U,r)&&T.push(U),U=P.getNext();return T}}(n.writeTree,n.treePath,e,t,r,i,a)}(this.writes_,i,t,1,r,e);return 0===a.length?null:a[0]}}function AL(n,e,t,r,i,a){const l=e.eventCache;if(null!=QT(r,t))return e;{let d,_;if(en(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const w=o_(e),S=IN(r,w instanceof qt?w:qt.EMPTY_NODE);d=n.filter.updateFullNode(e.eventCache.getNode(),S,a)}else{const w=YT(r,o_(e));d=n.filter.updateFullNode(e.eventCache.getNode(),w,a)}else{const w=Xt(t);if(".priority"===w){(0,k.hu)(1===gp(t),"Can't have a priority with additional path components");const T=l.getNode();_=e.serverCache.getNode();const S=bL(r,t,T,_);d=null!=S?n.filter.updatePriority(T,S):l.getNode()}else{const T=tr(t);let S;if(l.isCompleteForChild(w)){_=e.serverCache.getNode();const P=bL(r,t,l.getNode(),_);S=null!=P?l.getNode().getImmediateChild(w).updateChild(T,P):l.getNode().getImmediateChild(w)}else S=CN(r,w,e.serverCache);d=null!=S?n.filter.updateChild(l.getNode(),w,S,T,i,a):l.getNode()}}return bI(e,d,l.isFullyInitialized()||en(t),n.filter.filtersNodes())}}function JT(n,e,t,r,i,a,l,d){const _=e.serverCache;let w;const T=l?n.filter:n.filter.getIndexedFilter();if(en(t))w=T.updateFullNode(_.getNode(),r,null);else if(T.filtersNodes()&&!_.isFiltered()){const U=_.getNode().updateChild(t,r);w=T.updateFullNode(_.getNode(),U,null)}else{const U=Xt(t);if(!_.isCompleteForPath(t)&&gp(t)>1)return e;const q=tr(t),fe=_.getNode().getImmediateChild(U).updateChild(q,r);w=".priority"===U?T.updatePriority(_.getNode(),fe):T.updateChild(_.getNode(),U,fe,q,SL,null)}const S=yL(e,w,_.isFullyInitialized()||en(t),T.filtersNodes());return AL(n,S,t,i,new bN(i,S,a),d)}function DN(n,e,t,r,i,a,l){const d=e.eventCache;let _,w;const T=new bN(i,e,a);if(en(t))w=n.filter.updateFullNode(e.eventCache.getNode(),r,l),_=bI(e,w,!0,n.filter.filtersNodes());else{const S=Xt(t);if(".priority"===S)w=n.filter.updatePriority(e.eventCache.getNode(),r),_=bI(e,w,d.isFullyInitialized(),d.isFiltered());else{const P=tr(t),U=d.getNode().getImmediateChild(S);let q;if(en(P))q=r;else{const de=T.getCompleteChild(S);q=null!=de?".priority"===nN(P)&&de.getChild(iL(P)).isEmpty()?de:de.updateChild(P,r):qt.EMPTY_NODE}_=U.equals(q)?e:bI(e,n.filter.updateChild(d.getNode(),S,q,P,T,l),d.isFullyInitialized(),n.filter.filtersNodes())}}return _}function xL(n,e){return n.eventCache.isCompleteForChild(e)}function RL(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function TN(n,e,t,r,i,a,l,d){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let w,_=e;w=en(t)?r:new cr(null).setTree(t,r);const T=e.serverCache.getNode();return w.children.inorderTraversal((S,P)=>{if(T.hasChild(S)){const q=RL(0,e.serverCache.getNode().getImmediateChild(S),P);_=JT(n,_,new Pn(S),q,i,a,l,d)}}),w.children.inorderTraversal((S,P)=>{const U=!e.serverCache.isCompleteForChild(S)&&null===P.value;if(!T.hasChild(S)&&!U){const de=RL(0,e.serverCache.getNode().getImmediateChild(S),P);_=JT(n,_,new Pn(S),de,i,a,l,d)}}),_}class J4{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new cN(r.getIndex()),a=function h4(n){return n.loadsAllData()?new cN(n.getIndex()):n.hasLimit()?new d4(n):new EI(n)}(r);this.processor_=function G4(n){return{filter:n}}(a);const l=t.serverCache,d=t.eventCache,_=i.updateFullNode(qt.EMPTY_NODE,l.getNode(),null),w=a.updateFullNode(qt.EMPTY_NODE,d.getNode(),null),T=new mp(_,l.isFullyInitialized(),i.filtersNodes()),S=new mp(w,d.isFullyInitialized(),a.filtersNodes());this.viewCache_=qT(S,T),this.eventGenerator_=new C4(this.query_)}get query(){return this.query_}}function t3(n,e){const t=o_(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!en(e)&&!t.getImmediateChild(Xt(e)).isEmpty())?t.getChild(e):null}function ML(n){return 0===n.eventRegistrations_.length}function NL(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(a=>{const l=a.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let a=0;a<n.eventRegistrations_.length;++a){const l=n.eventRegistrations_[a];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(a+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function PL(n,e,t,r){e.type===za.MERGE&&null!==e.source.queryId&&((0,k.hu)(o_(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(KT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,a=function W4(n,e,t,r,i){const a=new $4;let l,d;if(t.type===za.OVERWRITE){const w=t;w.source.fromUser?l=DN(n,e,w.path,w.snap,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),d=w.source.tagged||e.serverCache.isFiltered()&&!en(w.path),l=JT(n,e,w.path,w.snap,r,i,d,a))}else if(t.type===za.MERGE){const w=t;w.source.fromUser?l=function K4(n,e,t,r,i,a,l){let d=e;return r.foreach((_,w)=>{const T=Ar(t,_);xL(e,Xt(T))&&(d=DN(n,d,T,w,i,a,l))}),r.foreach((_,w)=>{const T=Ar(t,_);xL(e,Xt(T))||(d=DN(n,d,T,w,i,a,l))}),d}(n,e,w.path,w.children,r,i,a):((0,k.hu)(w.source.fromServer,"Unknown source."),d=w.source.tagged||e.serverCache.isFiltered(),l=TN(n,e,w.path,w.children,r,i,d,a))}else if(t.type===za.ACK_USER_WRITE){const w=t;l=w.revert?function Q4(n,e,t,r,i,a){let l;if(null!=QT(r,t))return e;{const d=new bN(r,e,i),_=e.eventCache.getNode();let w;if(en(t)||".priority"===Xt(t)){let T;if(e.serverCache.isFullyInitialized())T=YT(r,o_(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof qt,"serverChildren would be complete if leaf node"),T=IN(r,S)}w=n.filter.updateFullNode(_,T,a)}else{const T=Xt(t);let S=CN(r,T,e.serverCache);null==S&&e.serverCache.isCompleteForChild(T)&&(S=_.getImmediateChild(T)),w=null!=S?n.filter.updateChild(_,T,S,tr(t),d,a):e.eventCache.getNode().hasChild(T)?n.filter.updateChild(_,T,qt.EMPTY_NODE,tr(t),d,a):_,w.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=YT(r,o_(e)),l.isLeafNode()&&(w=n.filter.updateFullNode(w,l,a)))}return l=e.serverCache.isFullyInitialized()||null!=QT(r,Cn()),bI(e,w,l,n.filter.filtersNodes())}}(n,e,w.path,r,i,a):function Z4(n,e,t,r,i,a,l){if(null!=QT(i,t))return e;const d=e.serverCache.isFiltered(),_=e.serverCache;if(null!=r.value){if(en(t)&&_.isFullyInitialized()||_.isCompleteForPath(t))return JT(n,e,t,_.getNode().getChild(t),i,a,d,l);if(en(t)){let w=new cr(null);return _.getNode().forEachChild(Cc,(T,S)=>{w=w.set(new Pn(T),S)}),TN(n,e,t,w,i,a,d,l)}return e}{let w=new cr(null);return r.foreach((T,S)=>{const P=Ar(t,T);_.isCompleteForPath(P)&&(w=w.set(T,_.getNode().getChild(P)))}),TN(n,e,t,w,i,a,d,l)}}(n,e,w.path,w.affectedTree,r,i,a)}else{if(t.type!==za.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function Y4(n,e,t,r,i){const a=e.serverCache;return AL(n,yL(e,a.getNode(),a.isFullyInitialized()||en(t),a.isFiltered()),t,r,SL,i)}(n,e,t.path,r,a)}const _=a.getChanges();return function q4(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),a=KT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(a)||!r.getNode().getPriority().equals(a.getPriority()))&&t.push(pL(KT(e)))}}(e,l,_),{viewCache:l,changes:_}}(n.processor_,i,e,t,r);return function z4(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,a.viewCache),(0,k.hu)(a.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=a.viewCache,kL(n,a.changes,a.viewCache.eventCache.getNode(),null)}function kL(n,e,t,r){return function b4(n,e,t,r){const i=[],a=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&a.push(function c4(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),CI(n,i,"child_removed",e,r,t),CI(n,i,"child_added",e,r,t),CI(n,i,"child_moved",a,r,t),CI(n,i,"child_changed",e,r,t),CI(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let XT,tS;class OL{constructor(){this.views=new Map}}function SN(n,e,t,r){const i=e.source.queryId;if(null!==i){const a=n.views.get(i);return(0,k.hu)(null!=a,"SyncTree gave us an op for an invalid query."),PL(a,e,t,r)}{let a=[];for(const l of n.views.values())a=a.concat(PL(l,e,t,r));return a}}function FL(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let d=YT(t,i?r:null),_=!1;d?_=!0:r instanceof qt?(d=IN(t,r),_=!1):(d=qt.EMPTY_NODE,_=!1);const w=qT(new mp(d,_,!1),new mp(r,i,!1));return new J4(e,w)}return l}function LL(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function yp(n,e){let t=null;for(const r of n.views.values())t=t||t3(r,e);return t}function VL(n,e){return e._queryParams.loadsAllData()?eS(n):n.views.get(e._queryIdentifier)}function UL(n,e){return null!=VL(n,e)}function vp(n){return null!=eS(n)}function eS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let d3=1;class BL{constructor(e){this.listenProvider_=e,this.syncPointTree_=new cr(null),this.pendingWriteTree_=function B4(){return{visibleWrites:zu.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function AN(n,e,t,r,i){return function A4(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=DI(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?ew(n,new s_({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function wp(n,e,t=!1){const r=function R4(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function M4(n,e){const t=n.allWrites.findIndex(d=>d.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,a=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const d=n.allWrites[l];d.visible&&(l>=t&&N4(d,r.path)?i=!1:Ga(r.path,d.path)&&(a=!0)),l--}return!!i&&(a?(function P4(n){n.visibleWrites=IL(n.allWrites,k4,Cn()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=vL(n.visibleWrites,r.path):Wi(r.children,_=>{n.visibleWrites=vL(n.visibleWrites,Ar(r.path,_))}),!0))}(n.pendingWriteTree_,e)){let a=new cr(null);return null!=r.snap?a=a.set(Cn(),!0):Wi(r.children,l=>{a=a.set(new Pn(l),!0)}),ew(n,new WT(r.path,a,t))}return[]}function TI(n,e,t){return ew(n,new s_({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function nS(n,e,t,r,i=!1){const a=e._path,l=n.syncPointTree_.get(a);let d=[];if(l&&("default"===e._queryIdentifier||UL(l,e))){const _=function u3(n,e,t,r){const i=e._queryIdentifier,a=[];let l=[];const d=vp(n);if("default"===i)for(const[_,w]of n.views.entries())l=l.concat(NL(w,t,r)),ML(w)&&(n.views.delete(_),w.query._queryParams.loadsAllData()||a.push(w.query));else{const _=n.views.get(i);_&&(l=l.concat(NL(_,t,r)),ML(_)&&(n.views.delete(i),_.query._queryParams.loadsAllData()||a.push(_.query)))}return d&&!vp(n)&&a.push(new(function s3(){return(0,k.hu)(XT,"Reference.ts has not been loaded"),XT}())(e._repo,e._path)),{removed:a,events:l}}(l,e,t,r);(function o3(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(a));const w=_.removed;if(d=_.events,!i){const T=-1!==w.findIndex(P=>P._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(a,(P,U)=>vp(U));if(T&&!S){const P=n.syncPointTree_.subtree(a);if(!P.isEmpty()){const U=function y3(n){return n.fold((e,t,r)=>{if(t&&vp(t))return[eS(t)];{let i=[];return t&&(i=LL(t)),Wi(r,(a,l)=>{i=i.concat(l)}),i}})}(P);for(let q=0;q<U.length;++q){const de=U[q],fe=de.query,Qe=GL(n,de);n.listenProvider_.startListening(AI(fe),SI(n,fe),Qe.hashFn,Qe.onComplete)}}}!S&&w.length>0&&!r&&(T?n.listenProvider_.stopListening(AI(e),null):w.forEach(P=>{const U=n.queryToTagMap.get(iS(P));n.listenProvider_.stopListening(AI(P),U)}))}!function v3(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=iS(r),a=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(a)}}}(n,w)}return d}function jL(n,e,t,r){const i=RN(n,r);if(null!=i){const a=MN(i),l=a.path,d=a.queryId,_=lo(l,e);return NN(n,l,new s_(_N(d),_,t))}return[]}function xN(n,e,t,r=!1){const i=e._path;let a=null,l=!1;n.syncPointTree_.foreachOnPath(i,(P,U)=>{const q=lo(P,i);a=a||yp(U,q),l=l||vp(U)});let _,d=n.syncPointTree_.get(i);d?(l=l||vp(d),a=a||yp(d,Cn())):(d=new OL,n.syncPointTree_=n.syncPointTree_.set(i,d)),null!=a?_=!0:(_=!1,a=qt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((U,q)=>{const de=yp(q,Cn());de&&(a=a.updateImmediateChild(U,de))}));const w=UL(d,e);if(!w&&!e._queryParams.loadsAllData()){const P=iS(e);(0,k.hu)(!n.queryToTagMap.has(P),"View does not exist, but we have a tag");const U=function w3(){return d3++}();n.queryToTagMap.set(P,U),n.tagToQueryMap.set(U,P)}let S=function a3(n,e,t,r,i,a){const l=FL(n,e,r,i,a);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function n3(n,e){n.eventRegistrations_.push(e)}(l,t),function r3(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(lr,(a,l)=>{r.push(Yv(a,l))}),t.isFullyInitialized()&&r.push(pL(t.getNode())),kL(n,r,t.getNode(),e)}(l,t)}(d,e,t,ZT(n.pendingWriteTree_,i),a,_);if(!w&&!l&&!r){const P=VL(d,e);S=S.concat(function E3(n,e,t){const r=e._path,i=SI(n,e),a=GL(n,t),l=n.listenProvider_.startListening(AI(e),i,a.hashFn,a.onComplete),d=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!vp(d.value),"If we're adding a query, it shouldn't be shadowed");else{const _=d.fold((w,T,S)=>{if(!en(w)&&T&&vp(T))return[eS(T).query];{let P=[];return T&&(P=P.concat(LL(T).map(U=>U.query))),Wi(S,(U,q)=>{P=P.concat(q)}),P}});for(let w=0;w<_.length;++w){const T=_[w];n.listenProvider_.stopListening(AI(T),SI(n,T))}}return l}(n,e,P))}return S}function rS(n,e,t){const i=n.pendingWriteTree_,a=n.syncPointTree_.findOnPath(e,(l,d)=>{const w=yp(d,lo(l,e));if(w)return w});return CL(i,e,a,t,!0)}function ew(n,e){return $L(e,n.syncPointTree_,null,ZT(n.pendingWriteTree_,Cn()))}function $L(n,e,t,r){if(en(n.path))return HL(n,e,t,r);{const i=e.get(Cn());null==t&&null!=i&&(t=yp(i,Cn()));let a=[];const l=Xt(n.path),d=n.operationForChild(l),_=e.children.get(l);if(_&&d){const w=t?t.getImmediateChild(l):null,T=DL(r,l);a=a.concat($L(d,_,w,T))}return i&&(a=a.concat(SN(i,n,r,t))),a}}function HL(n,e,t,r){const i=e.get(Cn());null==t&&null!=i&&(t=yp(i,Cn()));let a=[];return e.children.inorderTraversal((l,d)=>{const _=t?t.getImmediateChild(l):null,w=DL(r,l),T=n.operationForChild(l);T&&(a=a.concat(HL(T,d,_,w)))}),i&&(a=a.concat(SN(i,n,r,t))),a}function GL(n,e){const t=e.query,r=SI(n,t);return{hashFn:()=>(function X4(n){return n.viewCache_.serverCache.getNode()}(e)||qt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function g3(n,e,t){const r=RN(n,t);if(r){const i=MN(r),a=i.path,l=i.queryId,d=lo(a,e);return NN(n,a,new II(_N(l),d))}return[]}(n,t._path,r):function p3(n,e){return ew(n,new II({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const a=function fG(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return nS(n,t,null,a)}}}}function SI(n,e){const t=iS(e);return n.queryToTagMap.get(t)}function iS(n){return n._path.toString()+"$"+n._queryIdentifier}function RN(n,e){return n.tagToQueryMap.get(e)}function MN(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Pn(n.substr(0,e))}}function NN(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),SN(r,t,ZT(n.pendingWriteTree_,e),null)}function AI(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function c3(){return(0,k.hu)(tS,"Reference.ts has not been loaded"),tS}())(n._repo,n._path):n}class PN{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new PN(t)}node(){return this.node_}}class kN{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=Ar(this.path_,e);return new kN(this.syncTree_,t)}node(){return rS(this.syncTree_,this.path_)}}const zL=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?C3(n[".sv"],e,t):"object"==typeof n[".sv"]?b3(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},C3=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},b3=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},WL=function(n,e,t,r){return FN(e,new kN(t,n),r)},ON=function(n,e,t){return FN(n,new PN(e),t)};function FN(n,e,t){const r=n.getPriority().val(),i=zL(r,e.getImmediateChild(".priority"),t);let a;if(n.isLeafNode()){const l=n,d=zL(l.getValue(),e,t);return d!==l.getValue()||i!==l.getPriority().val()?new Kv(d,Or(i)):n}{const l=n;return a=l,i!==l.getPriority().val()&&(a=a.updatePriority(new Kv(i))),l.forEachChild(lr,(d,_)=>{const w=FN(_,e.getImmediateChild(d),t);w!==_&&(a=a.updateImmediateChild(d,w))}),a}}class LN{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function sS(n,e){let t=e instanceof Pn?e:new Pn(e),r=n,i=Xt(t);for(;null!==i;){const a=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new LN(i,r,a),t=tr(t),i=Xt(t)}return r}function u_(n){return n.node.value}function VN(n,e){n.node.value=e,UN(n)}function qL(n){return n.node.childCount>0}function oS(n,e){Wi(n.node.children,(t,r)=>{e(new LN(t,n,r))})}function KL(n,e,t,r){t&&!r&&e(n),oS(n,i=>{KL(i,e,!0,r)}),t&&r&&e(n)}function xI(n){return new Pn(null===n.parent?n.name:xI(n.parent)+"/"+n.name)}function UN(n){null!==n.parent&&function S3(n,e,t){const r=function D3(n){return void 0===u_(n)&&!qL(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,UN(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,UN(n))}(n.parent,n.name,n)}const A3=/[\[\].#$\/\u0000-\u001F\u007F]/,x3=/[\[\].#$\u0000-\u001F\u007F]/,BN=10485760,aS=function(n){return"string"==typeof n&&0!==n.length&&!A3.test(n)},ZL=function(n){return"string"==typeof n&&0!==n.length&&!x3.test(n)},RI=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!kT(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},bc=function(n,e,t,r){r&&void 0===e||MI((0,k.gK)(n,"value"),e,t)},MI=function(n,e,t){const r=t instanceof Pn?new WG(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+r_(r));if("function"==typeof e)throw new Error(n+"contains a function "+r_(r)+" with contents = "+e.toString());if(kT(e))throw new Error(n+"contains "+e.toString()+" "+r_(r));if("string"==typeof e&&e.length>BN/3&&(0,k.ug)(e)>BN)throw new Error(n+"contains a string greater than "+BN+" utf8 bytes "+r_(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,a=!1;if(Wi(e,(l,d)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(a=!0,!aS(l)))throw new Error(n+" contains an invalid key ("+l+") "+r_(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function qG(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),sL(n)})(r,l),MI(n,d,r),function KG(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&a)throw new Error(n+' contains ".value" child '+r_(r)+" in addition to actual children.")}},YL=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const a=[];Wi(e,(l,d)=>{const _=new Pn(l);if(MI(i,d,Ar(t,_)),".priority"===nN(_)&&!RI(d))throw new Error(i+"contains an invalid value for '"+_.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");a.push(_)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const a=gI(r);for(let l=0;l<a.length;l++)if((".priority"!==a[l]||l!==a.length-1)&&!aS(a[l]))throw new Error(n+"contains an invalid key ("+a[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(zG);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Ga(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,a)},jN=function(n,e,t){if(!t||void 0!==e){if(kT(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!RI(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},NI=function(n,e,t,r){if(!(r&&void 0===t||aS(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},PI=function(n,e,t,r){if(!(r&&void 0===t||ZL(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},Wa=function(n,e){if(".info"===Xt(e))throw new Error(n+" failed = Can't modify data under /.info/")},QL=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!aS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),ZL(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class P3{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function uS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],a=i.getPath();null!==t&&!rN(a,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:a}),t.events.push(i)}t&&n.eventLists_.push(t)}function JL(n,e,t){uS(n,t),XL(n,r=>rN(r,e))}function sa(n,e,t){uS(n,t),XL(n,r=>Ga(r,e)||Ga(e,r))}function XL(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(k3(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function k3(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();t_&&zi("event: "+t.toString()),Wv(r)}}}const eV="repo_interrupt";class F3{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new P3,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=zT(),this.transactionQueueTree_=new LN,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function tV(n){const t=n.infoData_.getNode(new Pn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function kI(n){return function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n}({timestamp:tV(n)})}function nV(n,e,t,r,i){n.dataUpdateCount++;const a=new Pn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const _=(0,k.UI)(t,w=>Or(w));l=function m3(n,e,t,r){const i=RN(n,r);if(i){const a=MN(i),l=a.path,d=a.queryId,_=lo(l,e),w=cr.fromObject(t);return NN(n,l,new Jv(_N(d),_,w))}return[]}(n.serverSyncTree_,a,_,i)}else{const _=Or(t);l=jL(n.serverSyncTree_,a,_,i)}else if(r){const _=(0,k.UI)(t,w=>Or(w));l=function f3(n,e,t){const r=cr.fromObject(t);return ew(n,new Jv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,a,_)}else{const _=Or(t);l=TI(n.serverSyncTree_,a,_)}let d=a;l.length>0&&(d=nw(n,a)),sa(n.eventQueue_,d,l)}function rV(n,e){$N(n,"connected",e),!1===e&&function j3(n){tw(n,"onDisconnectEvents");const e=kI(n),t=zT();pN(n.onDisconnect_,Cn(),(i,a)=>{const l=WL(i,a,n.serverSyncTree_,e);Qv(t,i,l)});let r=[];pN(t,Cn(),(i,a)=>{r=r.concat(TI(n.serverSyncTree_,i,a));const l=WN(n,i);nw(n,l)}),n.onDisconnect_=zT(),sa(n.eventQueue_,Cn(),r)}(n)}function $N(n,e,t){const r=new Pn("/.info/"+e),i=Or(t);n.infoData_.updateSnapshot(r,i);const a=TI(n.infoSyncTree_,r,i);sa(n.eventQueue_,r,a)}function lS(n){return n.nextWriteId_++}function HN(n,e,t,r,i){tw(n,"set",{path:e.toString(),value:t,priority:r});const a=kI(n),l=Or(t,r),d=rS(n.serverSyncTree_,e),_=ON(l,d,a),w=lS(n),T=AN(n.serverSyncTree_,e,_,w,!0);uS(n.eventQueue_,T),n.server_.put(e.toString(),l.val(!0),(P,U)=>{const q="ok"===P;q||Os("set at "+e+" failed: "+P);const de=wp(n.serverSyncTree_,w,!q);sa(n.eventQueue_,e,de),Ep(0,i,P,U)});const S=WN(n,e);nw(n,S),sa(n.eventQueue_,S,[])}function $3(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&fN(n.onDisconnect_,e),Ep(0,t,r,i)})}function iV(n,e,t,r){const i=Or(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(a,l)=>{"ok"===a&&Qv(n.onDisconnect_,e,i),Ep(0,r,a,l)})}function GN(n,e,t){let r;r=".info"===Xt(e._path)?nS(n.infoSyncTree_,e,t):nS(n.serverSyncTree_,e,t),JL(n.eventQueue_,e._path,r)}function sV(n){n.persistentConnection_&&n.persistentConnection_.interrupt(eV)}function tw(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),zi(t,...e)}function Ep(n,e,t,r){e&&Wv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let a=i;r&&(a+=": "+r);const l=new Error(a);l.code=i,e(l)}})}function zN(n,e,t){return rS(n.serverSyncTree_,e,t)||qt.EMPTY_NODE}function cS(n,e=n.transactionQueueTree_){if(e||dS(n,e),u_(e)){const t=aV(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function K3(n,e,t){const r=t.map(w=>w.currentWriteId),i=zN(n,e,r);let a=i;const l=i.hash();for(let w=0;w<t.length;w++){const T=t[w];(0,k.hu)(0===T.status,"tryToSendTransactionQueue_: items in queue should all be run."),T.status=1,T.retryCount++;const S=lo(e,T.path);a=a.updateChild(S,T.currentOutputSnapshotRaw)}const d=a.val(!0),_=e;n.server_.put(_.toString(),d,w=>{tw(n,"transaction put response",{path:_.toString(),status:w});let T=[];if("ok"===w){const S=[];for(let P=0;P<t.length;P++)t[P].status=2,T=T.concat(wp(n.serverSyncTree_,t[P].currentWriteId)),t[P].onComplete&&S.push(()=>t[P].onComplete(null,!0,t[P].currentOutputSnapshotResolved)),t[P].unwatcher();dS(n,sS(n.transactionQueueTree_,e)),cS(n,n.transactionQueueTree_),sa(n.eventQueue_,e,T);for(let P=0;P<S.length;P++)Wv(S[P])}else{if("datastale"===w)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{Os("transaction at "+_.toString()+" failed: "+w);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=w}nw(n,e)}},l)}(n,xI(e),t)}else qL(e)&&oS(e,t=>{cS(n,t)})}function nw(n,e){const t=oV(n,e),r=xI(t);return function Z3(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(d=>0===d.status).map(d=>d.currentWriteId);for(let d=0;d<e.length;d++){const _=e[d],w=lo(t,_.path);let S,T=!1;if((0,k.hu)(null!==w,"rerunTransactionsUnderNode_: relativePath should not be null."),4===_.status)T=!0,S=_.abortReason,i=i.concat(wp(n.serverSyncTree_,_.currentWriteId,!0));else if(0===_.status)if(_.retryCount>=25)T=!0,S="maxretry",i=i.concat(wp(n.serverSyncTree_,_.currentWriteId,!0));else{const P=zN(n,_.path,l);_.currentInputSnapshot=P;const U=e[d].update(P.val());if(void 0!==U){MI("transaction failed: Data returned ",U,_.path);let q=Or(U);"object"==typeof U&&null!=U&&(0,k.r3)(U,".priority")||(q=q.updatePriority(P.getPriority()));const fe=_.currentWriteId,Qe=kI(n),tt=ON(q,P,Qe);_.currentOutputSnapshotRaw=q,_.currentOutputSnapshotResolved=tt,_.currentWriteId=lS(n),l.splice(l.indexOf(fe),1),i=i.concat(AN(n.serverSyncTree_,_.path,tt,_.currentWriteId,_.applyLocally)),i=i.concat(wp(n.serverSyncTree_,fe,!0))}else T=!0,S="nodata",i=i.concat(wp(n.serverSyncTree_,_.currentWriteId,!0))}sa(n.eventQueue_,t,i),i=[],T&&(e[d].status=2,setTimeout(e[d].unwatcher,Math.floor(0)),e[d].onComplete&&r.push("nodata"===S?()=>e[d].onComplete(null,!1,e[d].currentInputSnapshot):()=>e[d].onComplete(new Error(S),!1,null)))}dS(n,n.transactionQueueTree_);for(let d=0;d<r.length;d++)Wv(r[d]);cS(n,n.transactionQueueTree_)}(n,aV(n,t),r),r}function oV(n,e){let t,r=n.transactionQueueTree_;for(t=Xt(e);null!==t&&void 0===u_(r);)r=sS(r,t),t=Xt(e=tr(e));return r}function aV(n,e){const t=[];return uV(n,e,t),t.sort((r,i)=>r.order-i.order),t}function uV(n,e,t){const r=u_(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);oS(e,i=>{uV(n,i,t)})}function dS(n,e){const t=u_(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,VN(e,t.length>0?t:void 0)}oS(e,r=>{dS(n,r)})}function WN(n,e){const t=xI(oV(n,e)),r=sS(n.transactionQueueTree_,e);return function T3(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{qN(n,i)}),qN(n,r),KL(r,i=>{qN(n,i)}),t}function qN(n,e){const t=u_(e);if(t){const r=[];let i=[],a=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(a===l-1,"All SENT items should be at beginning of queue."),a=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(wp(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===a?VN(e,void 0):t.length=a+1,sa(n.eventQueue_,xI(e),i);for(let l=0;l<r.length;l++)Wv(r[l])}}const KN=function(n,e){const t=J3(n),r=t.namespace;return"firebase.com"===t.domain&&Ic(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Ic("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Os("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new YM(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Pn(t.pathString)}},J3=function(n){let e="",t="",r="",i="",a="",l=!0,d="https",_=443;if("string"==typeof n){let w=n.indexOf("//");w>=0&&(d=n.substring(0,w-1),n=n.substring(w+2));let T=n.indexOf("/");-1===T&&(T=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(T,S)),T<S&&(i=function Y3(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(T,S)));const P=function Q3(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Os(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));w=e.indexOf(":"),w>=0?(l="https"===d||"wss"===d,_=parseInt(e.substring(w+1),10)):w=e.length;const U=e.slice(0,w);if("localhost"===U.toLowerCase())t="localhost";else if(U.split(".").length<=2)t=U;else{const q=e.indexOf(".");r=e.substring(0,q).toLowerCase(),t=e.substring(q+1),a=r}"ns"in P&&(a=P.ns)}return{host:e,port:_,domain:t,subdomain:r,secure:l,scheme:d,pathString:i,namespace:a}},lV="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",X3=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const a=new Array(8);for(i=7;i>=0;i--)a[i]=lV.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=a.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=lV.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class cV{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class dV{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class ZN{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class hV{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return $3(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Wa("OnDisconnect.remove",this._path);const e=new k.BH;return iV(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Wa("OnDisconnect.set",this._path),bc("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return iV(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Wa("OnDisconnect.setWithPriority",this._path),bc("OnDisconnect.setWithPriority",e,this._path,!1),jN("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function H3(n,e,t,r,i){const a=Or(t,r);n.server_.onDisconnectPut(e.toString(),a.val(!0),(l,d)=>{"ok"===l&&Qv(n.onDisconnect_,e,a),Ep(0,i,l,d)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Wa("OnDisconnect.update",this._path),YL("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function G3(n,e,t,r){if((0,k.xb)(t))return zi("onDisconnect().update() called with empty data.  Don't do anything."),void Ep(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,a)=>{"ok"===i&&Wi(t,(l,d)=>{const _=Or(d);Qv(n.onDisconnect_,Ar(e,l),_)}),Ep(0,r,i,a)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class So{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return en(this._path)?null:nN(this._path)}get ref(){return new qa(this._repo,this._path)}get _queryIdentifier(){const e=mL(this._queryParams),t=KM(e);return"{}"===t?"default":t}get _queryObject(){return mL(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof So))return!1;const t=this._repo===e._repo,r=rN(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function GG(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function hS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function Ip(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Cc){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==fp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==sh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===lr){if(null!=e&&!RI(e)||null!=t&&!RI(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof uN||n.getIndex()===lN,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function fS(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class qa extends So{constructor(e,t){super(e,t,new $T,!1)}get parent(){const e=iL(this._path);return null===e?null:new qa(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class l_{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Pn(e),r=c_(this.ref,e);return new l_(this._node.getChild(t),r,lr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new l_(i,c_(this.ref,r),lr)))}hasChild(e){const t=new Pn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function fV(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?c_(n._root,e):n._root}function pV(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=KN(e,n._repo.repoInfo_.nodeAdmin);QL("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Ic("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),fV(n,t.path.toString())}function c_(n,e){return null===Xt((n=(0,k.m9)(n))._path)?(t=e,t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),PI("child","path",t,!1)):PI("child","path",e,!1),new qa(n._repo,Ar(n._path,e));var t}function YN(n,e){n=(0,k.m9)(n),Wa("set",n._path),bc("set",e,n._path,!1);const t=new k.BH;return HN(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function i6(n,e){YL("update",e,n._path,!1);const t=new k.BH;return function B3(n,e,t,r){tw(n,"update",{path:e.toString(),value:t});let i=!0;const a=kI(n),l={};if(Wi(t,(d,_)=>{i=!1,l[d]=WL(Ar(e,d),Or(_),n.serverSyncTree_,a)}),i)zi("update() called with empty data.  Don't do anything."),Ep(0,r,"ok",void 0);else{const d=lS(n),_=function h3(n,e,t,r){!function x4(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=vN(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=cr.fromObject(t);return ew(n,new Jv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,d);uS(n.eventQueue_,_),n.server_.merge(e.toString(),t,(w,T)=>{const S="ok"===w;S||Os("update at "+e+" failed: "+w);const P=wp(n.serverSyncTree_,d,!S),U=P.length>0?nw(n,e):e;sa(n.eventQueue_,U,P),Ep(0,r,w,T)}),Wi(t,w=>{const T=WN(n,Ar(e,w));nw(n,T)}),sa(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function s6(n){n=(0,k.m9)(n);const e=new ZN(()=>{}),t=new OI(e);return function U3(n,e,t){const r=function _3(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(w,T)=>{const S=lo(w,t);r=r||yp(T,S)});let i=n.syncPointTree_.get(t);i?r=r||yp(i,Cn()):(i=new OL,n.syncPointTree_=n.syncPointTree_.set(t,i));const a=null!=r,l=a?new mp(r,!0,!1):null;return function e3(n){return KT(n.viewCache_)}(FL(i,e,ZT(n.pendingWriteTree_,e._path),a?l.getNode():qt.EMPTY_NODE,a))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const a=Or(i).withIndex(e._queryParams.getIndex());let l;if(xN(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=TI(n.serverSyncTree_,e._path,a);else{const d=SI(n.serverSyncTree_,e);l=jL(n.serverSyncTree_,e._path,a,d)}return sa(n.eventQueue_,e._path,l),nS(n.serverSyncTree_,e,t,null,!0),a},i=>(tw(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new l_(r,new qa(n._repo,n._path),n._queryParams.getIndex()))}class OI{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new cV("value",this,new l_(e.snapshotNode,new qa(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dV(this,e,t):null}matches(e){return e instanceof OI&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class pS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new dV(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=c_(new qa(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new cV(e.type,this,new l_(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof pS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function FI(n,e,t,r,i){let a;if("object"==typeof r&&(a=void 0,i=r),"function"==typeof r&&(a=r),i&&i.onlyOnce){const _=t,w=(T,S)=>{GN(n._repo,n,d),_(T,S)};w.userCallback=t.userCallback,w.context=t.context,t=w}const l=new ZN(t,a||void 0),d="value"===e?new OI(l):new pS(e,l);return function z3(n,e,t){let r;r=".info"===Xt(e._path)?xN(n.infoSyncTree_,e,t):xN(n.serverSyncTree_,e,t),JL(n.eventQueue_,e._path,r)}(n._repo,n,d),()=>GN(n._repo,n,d)}function QN(n,e,t,r){return FI(n,"value",e,t,r)}function gV(n,e,t,r){return FI(n,"child_added",e,t,r)}function mV(n,e,t,r){return FI(n,"child_changed",e,t,r)}function _V(n,e,t,r){return FI(n,"child_moved",e,t,r)}function yV(n,e,t,r){return FI(n,"child_removed",e,t,r)}function vV(n,e,t){let r=null;const i=t?new ZN(t):null;"value"===e?r=new OI(i):e&&(r=new pS(e,i)),GN(n._repo,n,r)}class Wu{}class wV extends Wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bc("endAt",this._value,e._path,!0);const t=hN(e._queryParams,this._value,this._key);if(fS(t),Ip(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class a6 extends Wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bc("endBefore",this._value,e._path,!1);const t=function m4(n,e,t){let r;return r=hN(n,e,n.index_===Cc||t?t:fp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(fS(t),Ip(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class EV extends Wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bc("startAt",this._value,e._path,!0);const t=dN(e._queryParams,this._value,this._key);if(fS(t),Ip(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class c6 extends Wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){bc("startAfter",this._value,e._path,!1);const t=function g4(n,e,t){let r;return r=dN(n,e,n.index_===Cc||t?t:sh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(fS(t),Ip(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new So(e._repo,e._path,t,e._orderByCalled)}}class h6 extends Wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(e._repo,e._path,function f4(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class p6 extends Wu{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new So(e._repo,e._path,function p4(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class m6 extends Wu{constructor(e){super(),this._path=e}_apply(e){hS(e,"orderByChild");const t=new Pn(this._path);if(en(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new uN(t),i=HT(e._queryParams,r);return Ip(i),new So(e._repo,e._path,i,!0)}}class y6 extends Wu{_apply(e){hS(e,"orderByKey");const t=HT(e._queryParams,Cc);return Ip(t),new So(e._repo,e._path,t,!0)}}class w6 extends Wu{_apply(e){hS(e,"orderByPriority");const t=HT(e._queryParams,lr);return Ip(t),new So(e._repo,e._path,t,!0)}}class I6 extends Wu{_apply(e){hS(e,"orderByValue");const t=HT(e._queryParams,lN);return Ip(t),new So(e._repo,e._path,t,!0)}}class b6 extends Wu{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(bc("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new wV(this._value,this._key)._apply(new EV(this._value,this._key)._apply(e))}}function qu(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function i3(n){(0,k.hu)(!XT,"__referenceConstructor has already been defined"),XT=n})(qa),function l3(n){(0,k.hu)(!tS,"__referenceConstructor has already been defined"),tS=n}(qa);const JN={};function CV(n,e,t,r,i){let a=r||n.options.databaseURL;void 0===a&&(n.options.projectId||Ic("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),zi("Using default host for project ",n.options.projectId),a=`${n.options.projectId}-default-rtdb.firebaseio.com`);let _,w,l=KN(a,i),d=l.repoInfo;typeof process<"u"&&process.env&&(w=process.env.FIREBASE_DATABASE_EMULATOR_HOST),w?(_=!0,a=`http://${w}?ns=${d.namespace}`,l=KN(a,i),d=l.repoInfo):_=!l.repoInfo.secure;const T=i&&_?new pI(pI.OWNER):new vG(n.name,n.options,e);QL("Invalid Firebase Database URL",l),en(l.path)||Ic("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function x6(n,e,t,r){let i=JN[e.name];i||(i={},JN[e.name]=i);let a=i[n.toURLString()];return a&&Ic("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),a=new F3(n,false,t,r),i[n.toURLString()]=a,a}(d,n,T,new yG(n.name,t));return new M6(S,n)}class M6{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function L3(n,e,t){if(n.stats_=XM(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new GT(n.repoInfo_,(r,i,a,l)=>{nV(n,r,i,a,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>rV(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new i_(n.repoInfo_,e,(r,i,a,l)=>{nV(n,r,i,a,l)},r=>{rV(n,r)},r=>{!function V3(n,e){Wi(e,(t,r)=>{$N(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function IG(n,e){const t=n.toString();return JM[t]||(JM[t]=e()),JM[t]}(n.repoInfo_,()=>new I4(n.stats_,n.server_)),n.infoData_=new _4,n.infoSyncTree_=new BL({startListening:(r,i,a,l)=>{let d=[];const _=n.infoData_.getNode(r._path);return _.isEmpty()||(d=TI(n.infoSyncTree_,r._path,_),setTimeout(()=>{l("ok")},0)),d},stopListening:()=>{}}),$N(n,"connected",!1),n.serverSyncTree_=new BL({startListening:(r,i,a,l)=>(n.server_.listen(r,a,i,(d,_)=>{const w=l(d,_);sa(n.eventQueue_,r._path,w)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new qa(this._repo,Cn())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function A6(n,e){const t=JN[e];(!t||t[n.key]!==n)&&Ic(`Database ${e}(${n.repoInfo_}) has already been deleted.`),sV(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Ic("Cannot call "+e+" on a deleted database.")}}function bV(){WF.IS_TRANSPORT_INITIALIZED&&Os("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function N6(){bV(),pp.forceDisallow()}function P6(){bV(),qv.forceDisallow(),pp.forceAllow()}function F6(n,e){TF(n,e)}const V6={".sv":"timestamp"};class j6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}i_.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},i_.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function L6(n){EF($i.SDK_VERSION),(0,$i._registerComponent)(new Xs.wA("database",(e,{instanceIdentifier:t})=>CV(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,$i.registerVersion)(vF,"0.14.4",n),(0,$i.registerVersion)(vF,"0.14.4","esm2017")}();const z6=new Aa.Yd("@firebase/database-compat"),TV=function(n){z6.warn("FIREBASE WARNING: "+n)};class K6{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),a=>r(a)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,TV("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class Z6{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Cp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),PI("DataSnapshot.child","path",e,!1),new Cp(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),PI("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Cp(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new oa(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class ms{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var a;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=ms.getCancelAndContextArgs_("Query.on",r,i),d=(w,T)=>{t.call(l.context,new Cp(this.database,w),T)};d.userCallback=t,d.context=l.context;const _=null===(a=l.cancel)||void 0===a?void 0:a.bind(l.context);switch(e){case"value":return QN(this._delegate,d,_),t;case"child_added":return gV(this._delegate,d,_),t;case"child_removed":return yV(this._delegate,d,_),t;case"child_changed":return mV(this._delegate,d,_),t;case"child_moved":return _V(this._delegate,d,_),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,vV(this._delegate,e,i)}else vV(this._delegate,e)}get(){return s6(this._delegate).then(e=>new Cp(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const a=ms.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,d=(w,T)=>{const S=new Cp(this.database,w);t&&t.call(a.context,S,T),l.resolve(S)};d.userCallback=t,d.context=a.context;const _=w=>{a.cancel&&a.cancel.call(a.context,w),l.reject(w)};switch(e){case"value":QN(this._delegate,d,_,{onlyOnce:!0});break;case"child_added":gV(this._delegate,d,_,{onlyOnce:!0});break;case"child_removed":yV(this._delegate,d,_,{onlyOnce:!0});break;case"child_changed":mV(this._delegate,d,_,{onlyOnce:!0});break;case"child_moved":_V(this._delegate,d,_,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new ms(this.database,qu(this._delegate,function f6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new h6(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new ms(this.database,qu(this._delegate,function g6(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new p6(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new ms(this.database,qu(this._delegate,function _6(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return PI("orderByChild","path",n,!1),new m6(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new ms(this.database,qu(this._delegate,function v6(){return new y6}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new ms(this.database,qu(this._delegate,function E6(){return new w6}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new ms(this.database,qu(this._delegate,function C6(){return new I6}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new ms(this.database,qu(this._delegate,function l6(n=null,e){return NI("startAt","key",e,!0),new EV(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new ms(this.database,qu(this._delegate,function d6(n,e){return NI("startAfter","key",e,!0),new c6(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new ms(this.database,qu(this._delegate,function o6(n,e){return NI("endAt","key",e,!0),new wV(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new ms(this.database,qu(this._delegate,function u6(n,e){return NI("endBefore","key",e,!0),new a6(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new ms(this.database,qu(this._delegate,function D6(n,e){return NI("equalTo","key",e,!0),new b6(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof ms))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new oa(this.database,new qa(this._delegate._repo,this._delegate._path))}}class oa extends ms{constructor(e,t){super(e,new So(t._repo,t._path,new $T,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new oa(this.database,c_(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new oa(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new oa(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=YN(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let a=0;a<e.length;++a)i[""+a]=e[a];e=i,TV("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Wa("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=i6(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function r6(n,e,t){if(Wa("setWithPriority",n._path),bc("setWithPriority",e,n._path,!1),jN("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return HN(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),a=>r(a)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function t6(n){return Wa("remove",n._path),YN(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function $6(n,e,t){var r;if(n=(0,k.m9)(n),Wa("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,a=new k.BH,d=QN(n,()=>{});return function q3(n,e,t,r,i,a){tw(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:CF(),applyLocally:a,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},d=zN(n,e,void 0);l.currentInputSnapshot=d;const _=l.update(d.val());if(void 0===_)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{MI("transaction failed: Data returned ",_,l.path),l.status=0;const w=sS(n.transactionQueueTree_,e),T=u_(w)||[];let S;T.push(l),VN(w,T),"object"==typeof _&&null!==_&&(0,k.r3)(_,".priority")?(S=(0,k.DV)(_,".priority"),(0,k.hu)(RI(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(rS(n.serverSyncTree_,e)||qt.EMPTY_NODE).getPriority().val();const P=kI(n),U=Or(_,S),q=ON(U,d,P);l.currentOutputSnapshotRaw=U,l.currentOutputSnapshotResolved=q,l.currentWriteId=lS(n);const de=AN(n.serverSyncTree_,e,q,l.currentWriteId,l.applyLocally);sa(n.eventQueue_,e,de),cS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(_,w,T)=>{let S=null;_?a.reject(_):(S=new l_(T,new qa(n._repo,n._path),lr),a.resolve(new j6(w,S)))},d,i),a.promise}(this._delegate,e,{applyLocally:r}).then(a=>new Z6(a.committed,new Cp(this.database,a.snapshot)));return t&&i.then(a=>t(null,a.committed,a.snapshot),a=>t(a,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function n6(n,e){n=(0,k.m9)(n),Wa("setPriority",n._path),jN("setPriority",e,!1);const t=new k.BH;return HN(n._repo,Ar(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function e6(n,e){n=(0,k.m9)(n),Wa("push",n._path),bc("push",e,n._path,!0);const t=tV(n._repo),r=X3(t),i=c_(n,r),a=c_(n,r);let l;return l=null!=e?YN(a,e).then(()=>a):Promise.resolve(a),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new oa(this.database,l));t&&i.then(()=>t(null),l=>t(l));const a=new oa(this.database,r);return a.then=i.then.bind(i),a.catch=i.catch.bind(i,void 0),a}onDisconnect(){return Wa("Reference.onDisconnect",this._delegate._path),new K6(new hV(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class LI{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:N6,forceLongPolling:P6}}useEmulator(e,t,r={}){!function DV(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Ic("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let a;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Ic('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),a=new pI(pI.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);a=new pI(l)}!function S6(n,e,t,r){n.repoInfo_=new YM(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,a)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof oa){const t=pV(this._delegate,e.toString());return new oa(this,t)}{const t=fV(this._delegate,e);return new oa(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=pV(this._delegate,e);return new oa(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function k6(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),sV(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function O6(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function W3(n){n.persistentConnection_&&n.persistentConnection_.resume(eV)}(n._repo)}(this._delegate)}}LI.ServerValue={TIMESTAMP:function U6(){return V6}(),increment:n=>function B6(n){return{".sv":{increment:n}}}(n)};var Q6=Object.freeze({__proto__:null,initStandalone:function Y6({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:a=!1}){EF(t);const l=new Xs.zt("auth-internal",new Xs.H0("database-standalone"));return l.setComponent(new Xs.wA("auth-internal",()=>r,"PRIVATE")),{instance:new LI(CV(n,l,void 0,e,a),n),namespace:i}}});const J6=LI.ServerValue;function SV(n){return null==n}function AV(n){return"function"==typeof n.set}function xV(n,e){return AV(e)?e:n.ref(e)}function RV(n,e){if(function ez(n){return"string"==typeof n}(n))return e.stringCase();if(AV(n))return e.firebaseCase();if(function tz(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function VI(n,e,t="on",r=$_.z){return new Bi.y(i=>{let a=null;return a=n[t](e,(l,d)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:d})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=a&&n.off(e,a)}}:{unsubscribe(){}}}).pipe((0,vt.U)(i=>{const{snapshot:a,prevKey:l}=i;let d=null;return a.exists()&&(d=a.key),{type:e,payload:a,prevKey:l,key:d}}),(0,zk.B)())}function MV(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function iz(n,e){const{payload:t,prevKey:r,key:i}=e,a=MV(n,i),l=function rz(n,e){if(SV(e))return 0;{const t=MV(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let d=null;e.payload.forEach(_=>{const w={payload:_,type:"value",prevKey:d,key:_.key};return d=_.key,n=[...n,w],!1})}return n;case"child_added":if(a>-1){const d=n[a-1];(d&&d.key||null)!==r&&(n=n.filter(_=>_.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(d=>d.payload.key!==t.key);case"child_changed":return n.map(d=>d.payload.key===i?e:d);case"child_moved":if(a>-1){const d=n.splice(a,1)[0];return(n=n.slice()).splice(l,0,d),n}return n;default:return n}}function NV(n){return(SV(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function PV(n,e,t){return function nz(n,e,t){return VI(n,"value","once",t).pipe(Hn(r=>{const i=[ht(r)];return e.forEach(a=>i.push(VI(n,a,"on",t))),(0,FR.T)(...i).pipe(Ts(iz,[]))}),EC())}(n,e=NV(e),t)}function kV(n,e,t){const r=(e=NV(e)).map(i=>VI(n,i,"on",t));return(0,FR.T)(...r)}function OV(n,e){return function(r,i){return RV(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function uz(n){return function(t){return t?RV(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function FV(n,e){return function(){return VI(n,"value","on",e)}}!function X6(n){n.INTERNAL.registerComponent(new Xs.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new LI(i,r)},"PUBLIC").setServiceProps({Reference:oa,Query:ms,Database:LI,DataSnapshot:Cp,enableLogging:F6,INTERNAL:Q6,ServerValue:J6}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(kw.Z);const dz=new f.OlP("angularfire2.realtimeDatabaseURL"),hz=new f.OlP("angularfire2.database.use-emulator");let fz=(()=>{class n{constructor(t,r,i,a,l,d,_,w,T,S,P,U,q,de,fe){this.schedulers=d;const Qe=_,tt=(0,Qr.on)(t,l,r);w&&hM(tt,l,T,P,U,q,S,de),this.database=(0,Qr.cc)(`${tt.name}.database.${i}`,"AngularFireDatabase",tt.name,()=>{const Xe=l.runOutsideAngular(()=>tt.database(i||void 0));return Qe&&Xe.useEmulator(...Qe),Xe},[Qe])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>xV(this.database,t));let a=i;return r&&(a=r(i)),function lz(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:OV(r,"update"),set:OV(r,"set"),push:i=>r.push(i),remove:uz(r),snapshotChanges:i=>PV(n,i,t).pipe(In.iC),stateChanges:i=>kV(n,i,t).pipe(In.iC),auditTrail:i=>function sz(n,e,t){return function az(n,e,t){return function oz(n,e){return VI(n,"value","on",e).pipe((0,vt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function iG(...n){const e=(0,Ui.jO)(n);return(0,pr.e)((t,r)=>{const i=n.length,a=new Array(i);let l=n.map(()=>!1),d=!1;for(let _=0;_<i;_++)(0,go.Xf)(n[_]).subscribe((0,Fn.x)(r,w=>{a[_]=w,!d&&!l[_]&&(l[_]=!0,(d=l.every($o.y))&&(l=null))},rG.Z));t.subscribe((0,Fn.x)(r,_=>{if(d){const w=[_,...a];r.next(e?e(...w):w)}}))})}(e),(0,vt.U)(([i,a])=>{const l=i.lastKeyToLoad,d=a.map(_=>_.key);return{actions:a,lastKeyToLoad:l,loadedKeys:d}}),function sG(n){return(0,pr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,Fn.x)(t,a=>(r||(r=!n(a,i++)))&&t.next(a)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,vt.U)(i=>i.actions))}(n,kV(n,e).pipe(Ts((i,a)=>[...i,a],[])),t)}(n,i,t).pipe(In.iC),valueChanges:(i,a)=>PV(n,i,t).pipe((0,vt.U)(d=>d.map(_=>a&&a.idField?Object.assign(Object.assign({},_.payload.val()),{[a.idField]:_.key}):_.payload.val())),In.iC)}}(a,this)}object(t){return function cz(n,e){return{query:n,snapshotChanges:()=>FV(n,e.schedulers.outsideAngular)().pipe(In.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>FV(n,e.schedulers.outsideAngular)().pipe(In.iC,(0,vt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>xV(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(f.LFG(Qr.Dh),f.LFG(Qr.xv,8),f.LFG(dz,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(In.HU),f.LFG(hz,8),f.LFG(Uv,8),f.LFG(oM,8),f.LFG(aM,8),f.LFG(uM,8),f.LFG(lM,8),f.LFG(cM,8),f.LFG(dM,8),f.LFG(QE,8))},n.\u0275prov=f.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),pz=(()=>{class n{constructor(){mO.Z.registerVersion("angularfire",In.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n}),n.\u0275inj=f.cJS({providers:[fz]}),n})(),gz=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=f.oAB({type:n,bootstrap:[nG]}),n.\u0275inj=f.cJS({imports:[Zc,QH,Uj,NM,Qr.hO.initializeApp(yF_firebaseConfig),pz,BH,NM]}),n})();(0,f.G48)(),vl().bootstrapModule(gz).catch(n=>console.error(n))},9751:(Et,Me,V)=>{V.d(Me,{y:()=>Ie});var f=V(930),ee=V(727),F=V(8822),ue=V(9635),ae=V(2416),ge=V(576),pe=V(2806);let Ie=(()=>{class Z{constructor(Ne){Ne&&(this._subscribe=Ne)}lift(Ne){const Te=new Z;return Te.source=this,Te.operator=Ne,Te}subscribe(Ne,Te,rt){const Ee=function H(Z){return Z&&Z instanceof f.Lv||function z(Z){return Z&&(0,ge.m)(Z.next)&&(0,ge.m)(Z.error)&&(0,ge.m)(Z.complete)}(Z)&&(0,ee.Nn)(Z)}(Ne)?Ne:new f.Hp(Ne,Te,rt);return(0,pe.x)(()=>{const{operator:we,source:yt}=this;Ee.add(we?we.call(Ee,yt):yt?this._subscribe(Ee):this._trySubscribe(Ee))}),Ee}_trySubscribe(Ne){try{return this._subscribe(Ne)}catch(Te){Ne.error(Te)}}forEach(Ne,Te){return new(Te=_e(Te))((rt,Ee)=>{const we=new f.Hp({next:yt=>{try{Ne(yt)}catch(St){Ee(St),we.unsubscribe()}},error:Ee,complete:rt});this.subscribe(we)})}_subscribe(Ne){var Te;return null===(Te=this.source)||void 0===Te?void 0:Te.subscribe(Ne)}[F.L](){return this}pipe(...Ne){return(0,ue.U)(Ne)(this)}toPromise(Ne){return new(Ne=_e(Ne))((Te,rt)=>{let Ee;this.subscribe(we=>Ee=we,we=>rt(we),()=>Te(Ee))})}}return Z.create=He=>new Z(He),Z})();function _e(Z){var He;return null!==(He=Z??ae.v.Promise)&&void 0!==He?He:Promise}},7579:(Et,Me,V)=>{V.d(Me,{x:()=>pe});var f=V(9751),ee=V(727);const ue=(0,V(3888).d)(_e=>function(){_e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=V(8737),ge=V(2806);let pe=(()=>{class _e extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Z=new Ie(this,this);return Z.operator=H,Z}_throwIfClosed(){if(this.closed)throw new ue}next(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Z of this.currentObservers)Z.next(H)}})}error(H){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Z}=this;for(;Z.length;)Z.shift().error(H)}})}complete(){(0,ge.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Z,isStopped:He,observers:Ne}=this;return Z||He?ee.Lc:(this.currentObservers=null,Ne.push(H),new ee.w0(()=>{this.currentObservers=null,(0,ae.P)(Ne,H)}))}_checkFinalizedStatuses(H){const{hasError:Z,thrownError:He,isStopped:Ne}=this;Z?H.error(He):Ne&&H.complete()}asObservable(){const H=new f.y;return H.source=this,H}}return _e.create=(z,H)=>new Ie(z,H),_e})();class Ie extends pe{constructor(z,H){super(),this.destination=z,this.source=H}next(z){var H,Z;null===(Z=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Z||Z.call(H,z)}error(z){var H,Z;null===(Z=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Z||Z.call(H,z)}complete(){var z,H;null===(H=null===(z=this.destination)||void 0===z?void 0:z.complete)||void 0===H||H.call(z)}_subscribe(z){var H,Z;return null!==(Z=null===(H=this.source)||void 0===H?void 0:H.subscribe(z))&&void 0!==Z?Z:ee.Lc}}},930:(Et,Me,V)=>{V.d(Me,{Hp:()=>rt,Lv:()=>Z});var f=V(576),ee=V(727),F=V(2416),ue=V(7849),ae=V(5032);const ge=_e("C",void 0,void 0);function _e(Fe,Ce,ve){return{kind:Fe,value:Ce,error:ve}}var z=V(3410),H=V(2806);class Z extends ee.w0{constructor(Ce){super(),this.isStopped=!1,Ce?(this.destination=Ce,(0,ee.Nn)(Ce)&&Ce.add(this)):this.destination=St}static create(Ce,ve,ze){return new rt(Ce,ve,ze)}next(Ce){this.isStopped?yt(function Ie(Fe){return _e("N",Fe,void 0)}(Ce),this):this._next(Ce)}error(Ce){this.isStopped?yt(function pe(Fe){return _e("E",void 0,Fe)}(Ce),this):(this.isStopped=!0,this._error(Ce))}complete(){this.isStopped?yt(ge,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Ce){this.destination.next(Ce)}_error(Ce){try{this.destination.error(Ce)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const He=Function.prototype.bind;function Ne(Fe,Ce){return He.call(Fe,Ce)}class Te{constructor(Ce){this.partialObserver=Ce}next(Ce){const{partialObserver:ve}=this;if(ve.next)try{ve.next(Ce)}catch(ze){Ee(ze)}}error(Ce){const{partialObserver:ve}=this;if(ve.error)try{ve.error(Ce)}catch(ze){Ee(ze)}else Ee(Ce)}complete(){const{partialObserver:Ce}=this;if(Ce.complete)try{Ce.complete()}catch(ve){Ee(ve)}}}class rt extends Z{constructor(Ce,ve,ze){let je;if(super(),(0,f.m)(Ce)||!Ce)je={next:Ce??void 0,error:ve??void 0,complete:ze??void 0};else{let it;this&&F.v.useDeprecatedNextContext?(it=Object.create(Ce),it.unsubscribe=()=>this.unsubscribe(),je={next:Ce.next&&Ne(Ce.next,it),error:Ce.error&&Ne(Ce.error,it),complete:Ce.complete&&Ne(Ce.complete,it)}):je=Ce}this.destination=new Te(je)}}function Ee(Fe){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Fe):(0,ue.h)(Fe)}function yt(Fe,Ce){const{onStoppedNotification:ve}=F.v;ve&&z.z.setTimeout(()=>ve(Fe,Ce))}const St={closed:!0,next:ae.Z,error:function we(Fe){throw Fe},complete:ae.Z}},727:(Et,Me,V)=>{V.d(Me,{Lc:()=>ge,w0:()=>ae,Nn:()=>pe});var f=V(576);const F=(0,V(3888).d)(_e=>function(H){_e(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Z,He)=>`${He+1}) ${Z.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var ue=V(8737);class ae{constructor(z){this.initialTeardown=z,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let z;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Ne of H)Ne.remove(this);else H.remove(this);const{initialTeardown:Z}=this;if((0,f.m)(Z))try{Z()}catch(Ne){z=Ne instanceof F?Ne.errors:[Ne]}const{_finalizers:He}=this;if(He){this._finalizers=null;for(const Ne of He)try{Ie(Ne)}catch(Te){z=z??[],Te instanceof F?z=[...z,...Te.errors]:z.push(Te)}}if(z)throw new F(z)}}add(z){var H;if(z&&z!==this)if(this.closed)Ie(z);else{if(z instanceof ae){if(z.closed||z._hasParent(this))return;z._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(z)}}_hasParent(z){const{_parentage:H}=this;return H===z||Array.isArray(H)&&H.includes(z)}_addParent(z){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(z),H):H?[H,z]:z}_removeParent(z){const{_parentage:H}=this;H===z?this._parentage=null:Array.isArray(H)&&(0,ue.P)(H,z)}remove(z){const{_finalizers:H}=this;H&&(0,ue.P)(H,z),z instanceof ae&&z._removeParent(this)}}ae.EMPTY=(()=>{const _e=new ae;return _e.closed=!0,_e})();const ge=ae.EMPTY;function pe(_e){return _e instanceof ae||_e&&"closed"in _e&&(0,f.m)(_e.remove)&&(0,f.m)(_e.add)&&(0,f.m)(_e.unsubscribe)}function Ie(_e){(0,f.m)(_e)?_e():_e.unsubscribe()}},2416:(Et,Me,V)=>{V.d(Me,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Et,Me,V)=>{V.d(Me,{E:()=>ee});const ee=new(V(9751).y)(ae=>ae.complete())},8996:(Et,Me,V)=>{V.d(Me,{D:()=>Ce});var f=V(8421),ee=V(5363),F=V(9468),ge=V(9751),Ie=V(2202),_e=V(576),z=V(9672);function Z(ve,ze){if(!ve)throw new Error("Iterable cannot be null");return new ge.y(je=>{(0,z.f)(je,ze,()=>{const it=ve[Symbol.asyncIterator]();(0,z.f)(je,ze,()=>{it.next().then(re=>{re.done?je.complete():je.next(re.value)})},0,!0)})})}var He=V(3670),Ne=V(8239),Te=V(1144),rt=V(6495),Ee=V(2206),we=V(4532),yt=V(3260);function Ce(ve,ze){return ze?function Fe(ve,ze){if(null!=ve){if((0,He.c)(ve))return function ue(ve,ze){return(0,f.Xf)(ve).pipe((0,F.R)(ze),(0,ee.Q)(ze))}(ve,ze);if((0,Te.z)(ve))return function pe(ve,ze){return new ge.y(je=>{let it=0;return ze.schedule(function(){it===ve.length?je.complete():(je.next(ve[it++]),je.closed||this.schedule())})})}(ve,ze);if((0,Ne.t)(ve))return function ae(ve,ze){return(0,f.Xf)(ve).pipe((0,F.R)(ze),(0,ee.Q)(ze))}(ve,ze);if((0,Ee.D)(ve))return Z(ve,ze);if((0,rt.T)(ve))return function H(ve,ze){return new ge.y(je=>{let it;return(0,z.f)(je,ze,()=>{it=ve[Ie.h](),(0,z.f)(je,ze,()=>{let re,Pt;try{({value:re,done:Pt}=it.next())}catch(ut){return void je.error(ut)}Pt?je.complete():je.next(re)},0,!0)}),()=>(0,_e.m)(it?.return)&&it.return()})}(ve,ze);if((0,yt.L)(ve))return function St(ve,ze){return Z((0,yt.Q)(ve),ze)}(ve,ze)}throw(0,we.z)(ve)}(ve,ze):(0,f.Xf)(ve)}},8421:(Et,Me,V)=>{V.d(Me,{Xf:()=>He});var f=V(7582),ee=V(1144),F=V(8239),ue=V(9751),ae=V(3670),ge=V(2206),pe=V(4532),Ie=V(6495),_e=V(3260),z=V(576),H=V(7849),Z=V(8822);function He(Fe){if(Fe instanceof ue.y)return Fe;if(null!=Fe){if((0,ae.c)(Fe))return function Ne(Fe){return new ue.y(Ce=>{const ve=Fe[Z.L]();if((0,z.m)(ve.subscribe))return ve.subscribe(Ce);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Fe);if((0,ee.z)(Fe))return function Te(Fe){return new ue.y(Ce=>{for(let ve=0;ve<Fe.length&&!Ce.closed;ve++)Ce.next(Fe[ve]);Ce.complete()})}(Fe);if((0,F.t)(Fe))return function rt(Fe){return new ue.y(Ce=>{Fe.then(ve=>{Ce.closed||(Ce.next(ve),Ce.complete())},ve=>Ce.error(ve)).then(null,H.h)})}(Fe);if((0,ge.D)(Fe))return we(Fe);if((0,Ie.T)(Fe))return function Ee(Fe){return new ue.y(Ce=>{for(const ve of Fe)if(Ce.next(ve),Ce.closed)return;Ce.complete()})}(Fe);if((0,_e.L)(Fe))return function yt(Fe){return we((0,_e.Q)(Fe))}(Fe)}throw(0,pe.z)(Fe)}function we(Fe){return new ue.y(Ce=>{(function St(Fe,Ce){var ve,ze,je,it;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ve=(0,f.KL)(Fe);!(ze=yield ve.next()).done;)if(Ce.next(ze.value),Ce.closed)return}catch(re){je={error:re}}finally{try{ze&&!ze.done&&(it=ve.return)&&(yield it.call(ve))}finally{if(je)throw je.error}}Ce.complete()})})(Fe,Ce).catch(ve=>Ce.error(ve))})}},6451:(Et,Me,V)=>{V.d(Me,{T:()=>ge});var f=V(8189),ee=V(8421),F=V(515),ue=V(7669),ae=V(8996);function ge(...pe){const Ie=(0,ue.yG)(pe),_e=(0,ue._6)(pe,1/0),z=pe;return z.length?1===z.length?(0,ee.Xf)(z[0]):(0,f.J)(_e)((0,ae.D)(z,Ie)):F.E}},5403:(Et,Me,V)=>{V.d(Me,{x:()=>ee});var f=V(930);function ee(ue,ae,ge,pe,Ie){return new F(ue,ae,ge,pe,Ie)}class F extends f.Lv{constructor(ae,ge,pe,Ie,_e,z){super(ae),this.onFinalize=_e,this.shouldUnsubscribe=z,this._next=ge?function(H){try{ge(H)}catch(Z){ae.error(Z)}}:super._next,this._error=Ie?function(H){try{Ie(H)}catch(Z){ae.error(Z)}finally{this.unsubscribe()}}:super._error,this._complete=pe?function(){try{pe()}catch(H){ae.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:ge}=this;super.unsubscribe(),!ge&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(Et,Me,V)=>{V.d(Me,{U:()=>F});var f=V(4482),ee=V(5403);function F(ue,ae){return(0,f.e)((ge,pe)=>{let Ie=0;ge.subscribe((0,ee.x)(pe,_e=>{pe.next(ue.call(ae,_e,Ie++))}))})}},8189:(Et,Me,V)=>{V.d(Me,{J:()=>F});var f=V(5577),ee=V(4671);function F(ue=1/0){return(0,f.z)(ee.y,ue)}},5577:(Et,Me,V)=>{V.d(Me,{z:()=>Ie});var f=V(4004),ee=V(8421),F=V(4482),ue=V(9672),ae=V(5403),pe=V(576);function Ie(_e,z,H=1/0){return(0,pe.m)(z)?Ie((Z,He)=>(0,f.U)((Ne,Te)=>z(Z,Ne,He,Te))((0,ee.Xf)(_e(Z,He))),H):("number"==typeof z&&(H=z),(0,F.e)((Z,He)=>function ge(_e,z,H,Z,He,Ne,Te,rt){const Ee=[];let we=0,yt=0,St=!1;const Fe=()=>{St&&!Ee.length&&!we&&z.complete()},Ce=ze=>we<Z?ve(ze):Ee.push(ze),ve=ze=>{Ne&&z.next(ze),we++;let je=!1;(0,ee.Xf)(H(ze,yt++)).subscribe((0,ae.x)(z,it=>{He?.(it),Ne?Ce(it):z.next(it)},()=>{je=!0},void 0,()=>{if(je)try{for(we--;Ee.length&&we<Z;){const it=Ee.shift();Te?(0,ue.f)(z,Te,()=>ve(it)):ve(it)}Fe()}catch(it){z.error(it)}}))};return _e.subscribe((0,ae.x)(z,Ce,()=>{St=!0,Fe()})),()=>{rt?.()}}(Z,He,_e,H)))}},5363:(Et,Me,V)=>{V.d(Me,{Q:()=>ue});var f=V(9672),ee=V(4482),F=V(5403);function ue(ae,ge=0){return(0,ee.e)((pe,Ie)=>{pe.subscribe((0,F.x)(Ie,_e=>(0,f.f)(Ie,ae,()=>Ie.next(_e),ge),()=>(0,f.f)(Ie,ae,()=>Ie.complete(),ge),_e=>(0,f.f)(Ie,ae,()=>Ie.error(_e),ge)))})}},3099:(Et,Me,V)=>{V.d(Me,{B:()=>ae});var f=V(8421),ee=V(7579),F=V(930),ue=V(4482);function ae(pe={}){const{connector:Ie=(()=>new ee.x),resetOnError:_e=!0,resetOnComplete:z=!0,resetOnRefCountZero:H=!0}=pe;return Z=>{let He,Ne,Te,rt=0,Ee=!1,we=!1;const yt=()=>{Ne?.unsubscribe(),Ne=void 0},St=()=>{yt(),He=Te=void 0,Ee=we=!1},Fe=()=>{const Ce=He;St(),Ce?.unsubscribe()};return(0,ue.e)((Ce,ve)=>{rt++,!we&&!Ee&&yt();const ze=Te=Te??Ie();ve.add(()=>{rt--,0===rt&&!we&&!Ee&&(Ne=ge(Fe,H))}),ze.subscribe(ve),!He&&rt>0&&(He=new F.Hp({next:je=>ze.next(je),error:je=>{we=!0,yt(),Ne=ge(St,_e,je),ze.error(je)},complete:()=>{Ee=!0,yt(),Ne=ge(St,z),ze.complete()}}),(0,f.Xf)(Ce).subscribe(He))})(Z)}}function ge(pe,Ie,..._e){if(!0===Ie)return void pe();if(!1===Ie)return;const z=new F.Hp({next:()=>{z.unsubscribe(),pe()}});return Ie(..._e).subscribe(z)}},9468:(Et,Me,V)=>{V.d(Me,{R:()=>ee});var f=V(4482);function ee(F,ue=0){return(0,f.e)((ae,ge)=>{ge.add(F.schedule(()=>ae.subscribe(ge),ue))})}},8505:(Et,Me,V)=>{V.d(Me,{b:()=>ae});var f=V(576),ee=V(4482),F=V(5403),ue=V(4671);function ae(ge,pe,Ie){const _e=(0,f.m)(ge)||pe||Ie?{next:ge,error:pe,complete:Ie}:ge;return _e?(0,ee.e)((z,H)=>{var Z;null===(Z=_e.subscribe)||void 0===Z||Z.call(_e);let He=!0;z.subscribe((0,F.x)(H,Ne=>{var Te;null===(Te=_e.next)||void 0===Te||Te.call(_e,Ne),H.next(Ne)},()=>{var Ne;He=!1,null===(Ne=_e.complete)||void 0===Ne||Ne.call(_e),H.complete()},Ne=>{var Te;He=!1,null===(Te=_e.error)||void 0===Te||Te.call(_e,Ne),H.error(Ne)},()=>{var Ne,Te;He&&(null===(Ne=_e.unsubscribe)||void 0===Ne||Ne.call(_e)),null===(Te=_e.finalize)||void 0===Te||Te.call(_e)}))}):ue.y}},4408:(Et,Me,V)=>{V.d(Me,{o:()=>ae});var f=V(727);class ee extends f.w0{constructor(pe,Ie){super()}schedule(pe,Ie=0){return this}}const F={setInterval(ge,pe,...Ie){const{delegate:_e}=F;return _e?.setInterval?_e.setInterval(ge,pe,...Ie):setInterval(ge,pe,...Ie)},clearInterval(ge){const{delegate:pe}=F;return(pe?.clearInterval||clearInterval)(ge)},delegate:void 0};var ue=V(8737);class ae extends ee{constructor(pe,Ie){super(pe,Ie),this.scheduler=pe,this.work=Ie,this.pending=!1}schedule(pe,Ie=0){var _e;if(this.closed)return this;this.state=pe;const z=this.id,H=this.scheduler;return null!=z&&(this.id=this.recycleAsyncId(H,z,Ie)),this.pending=!0,this.delay=Ie,this.id=null!==(_e=this.id)&&void 0!==_e?_e:this.requestAsyncId(H,this.id,Ie),this}requestAsyncId(pe,Ie,_e=0){return F.setInterval(pe.flush.bind(pe,this),_e)}recycleAsyncId(pe,Ie,_e=0){if(null!=_e&&this.delay===_e&&!1===this.pending)return Ie;null!=Ie&&F.clearInterval(Ie)}execute(pe,Ie){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const _e=this._execute(pe,Ie);if(_e)return _e;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(pe,Ie){let z,_e=!1;try{this.work(pe)}catch(H){_e=!0,z=H||new Error("Scheduled action threw falsy error")}if(_e)return this.unsubscribe(),z}unsubscribe(){if(!this.closed){const{id:pe,scheduler:Ie}=this,{actions:_e}=Ie;this.work=this.state=this.scheduler=null,this.pending=!1,(0,ue.P)(_e,this),null!=pe&&(this.id=this.recycleAsyncId(Ie,pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(Et,Me,V)=>{V.d(Me,{v:()=>F});var f=V(6063);class ee{constructor(ae,ge=ee.now){this.schedulerActionCtor=ae,this.now=ge}schedule(ae,ge=0,pe){return new this.schedulerActionCtor(this,ae).schedule(pe,ge)}}ee.now=f.l.now;class F extends ee{constructor(ae,ge=ee.now){super(ae,ge),this.actions=[],this._active=!1}flush(ae){const{actions:ge}=this;if(this._active)return void ge.push(ae);let pe;this._active=!0;do{if(pe=ae.execute(ae.state,ae.delay))break}while(ae=ge.shift());if(this._active=!1,pe){for(;ae=ge.shift();)ae.unsubscribe();throw pe}}}},4986:(Et,Me,V)=>{V.d(Me,{z:()=>F});var f=V(4408);const F=new(V(7565).v)(f.o)},6063:(Et,Me,V)=>{V.d(Me,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(Et,Me,V)=>{V.d(Me,{z:()=>f});const f={setTimeout(ee,F,...ue){const{delegate:ae}=f;return ae?.setTimeout?ae.setTimeout(ee,F,...ue):setTimeout(ee,F,...ue)},clearTimeout(ee){const{delegate:F}=f;return(F?.clearTimeout||clearTimeout)(ee)},delegate:void 0}},2202:(Et,Me,V)=>{V.d(Me,{h:()=>ee});const ee=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Et,Me,V)=>{V.d(Me,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},7669:(Et,Me,V)=>{V.d(Me,{_6:()=>ge,jO:()=>ue,yG:()=>ae});var f=V(576);function F(pe){return pe[pe.length-1]}function ue(pe){return(0,f.m)(F(pe))?pe.pop():void 0}function ae(pe){return function ee(pe){return pe&&(0,f.m)(pe.schedule)}(F(pe))?pe.pop():void 0}function ge(pe,Ie){return"number"==typeof F(pe)?pe.pop():Ie}},8737:(Et,Me,V)=>{function f(ee,F){if(ee){const ue=ee.indexOf(F);0<=ue&&ee.splice(ue,1)}}V.d(Me,{P:()=>f})},3888:(Et,Me,V)=>{function f(ee){const ue=ee(ae=>{Error.call(ae),ae.stack=(new Error).stack});return ue.prototype=Object.create(Error.prototype),ue.prototype.constructor=ue,ue}V.d(Me,{d:()=>f})},2806:(Et,Me,V)=>{V.d(Me,{O:()=>ue,x:()=>F});var f=V(2416);let ee=null;function F(ae){if(f.v.useDeprecatedSynchronousErrorHandling){const ge=!ee;if(ge&&(ee={errorThrown:!1,error:null}),ae(),ge){const{errorThrown:pe,error:Ie}=ee;if(ee=null,pe)throw Ie}}else ae()}function ue(ae){f.v.useDeprecatedSynchronousErrorHandling&&ee&&(ee.errorThrown=!0,ee.error=ae)}},9672:(Et,Me,V)=>{function f(ee,F,ue,ae=0,ge=!1){const pe=F.schedule(function(){ue(),ge?ee.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(ee.add(pe),!ge)return pe}V.d(Me,{f:()=>f})},4671:(Et,Me,V)=>{function f(ee){return ee}V.d(Me,{y:()=>f})},1144:(Et,Me,V)=>{V.d(Me,{z:()=>f});const f=ee=>ee&&"number"==typeof ee.length&&"function"!=typeof ee},2206:(Et,Me,V)=>{V.d(Me,{D:()=>ee});var f=V(576);function ee(F){return Symbol.asyncIterator&&(0,f.m)(F?.[Symbol.asyncIterator])}},576:(Et,Me,V)=>{function f(ee){return"function"==typeof ee}V.d(Me,{m:()=>f})},3670:(Et,Me,V)=>{V.d(Me,{c:()=>F});var f=V(8822),ee=V(576);function F(ue){return(0,ee.m)(ue[f.L])}},6495:(Et,Me,V)=>{V.d(Me,{T:()=>F});var f=V(2202),ee=V(576);function F(ue){return(0,ee.m)(ue?.[f.h])}},8239:(Et,Me,V)=>{V.d(Me,{t:()=>ee});var f=V(576);function ee(F){return(0,f.m)(F?.then)}},3260:(Et,Me,V)=>{V.d(Me,{L:()=>ue,Q:()=>F});var f=V(7582),ee=V(576);function F(ae){return(0,f.FC)(this,arguments,function*(){const pe=ae.getReader();try{for(;;){const{value:Ie,done:_e}=yield(0,f.qq)(pe.read());if(_e)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(Ie)}}finally{pe.releaseLock()}})}function ue(ae){return(0,ee.m)(ae?.getReader)}},4482:(Et,Me,V)=>{V.d(Me,{A:()=>ee,e:()=>F});var f=V(576);function ee(ue){return(0,f.m)(ue?.lift)}function F(ue){return ae=>{if(ee(ae))return ae.lift(function(ge){try{return ue(ge,this)}catch(pe){this.error(pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Et,Me,V)=>{function f(){}V.d(Me,{Z:()=>f})},9635:(Et,Me,V)=>{V.d(Me,{U:()=>F,z:()=>ee});var f=V(4671);function ee(...ue){return F(ue)}function F(ue){return 0===ue.length?f.y:1===ue.length?ue[0]:function(ge){return ue.reduce((pe,Ie)=>Ie(pe),ge)}}},7849:(Et,Me,V)=>{V.d(Me,{h:()=>F});var f=V(2416),ee=V(3410);function F(ue){ee.z.setTimeout(()=>{const{onUnhandledError:ae}=f.v;if(!ae)throw ue;ae(ue)})}},4532:(Et,Me,V)=>{function f(ee){return new TypeError(`You provided ${null!==ee&&"object"==typeof ee?"an invalid object":`'${ee}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}V.d(Me,{z:()=>f})},4650:(Et,Me,V)=>{V.d(Me,{$8M:()=>yl,$Z:()=>H_,AFp:()=>sE,AaK:()=>Ie,BQk:()=>vy,CHM:()=>ol,CRH:()=>Pr,CZH:()=>Tm,CqO:()=>Ey,D6c:()=>Dx,DdM:()=>Bf,EJc:()=>xm,EpF:()=>wy,F4k:()=>r0,FYo:()=>ww,FiY:()=>po,G48:()=>wx,GfV:()=>Ew,Gpc:()=>H,JOm:()=>ss,KtG:()=>kc,LFG:()=>Qn,LSH:()=>_d,Lbi:()=>Am,Lck:()=>FA,MAs:()=>eb,MMx:()=>V0,NdJ:()=>Af,OlP:()=>pn,Oqu:()=>tm,PXZ:()=>gx,Q6J:()=>t0,QGY:()=>Od,QP$:()=>Mt,Qsj:()=>eC,R0b:()=>hs,RDi:()=>A_,Rgc:()=>zf,SBq:()=>Sg,Sil:()=>yD,Suo:()=>iD,TTD:()=>Oi,TgZ:()=>Qg,X6Q:()=>vx,XFs:()=>ct,Xpm:()=>Un,Xts:()=>tf,Y36:()=>Ze,YKP:()=>jb,YNc:()=>e0,Yjl:()=>K,Yz7:()=>ye,Z0I:()=>It,ZZ4:()=>Xd,_Bn:()=>O0,_UZ:()=>yy,_Vd:()=>Tg,_c5:()=>Dv,_uU:()=>no,aQg:()=>Vm,c2e:()=>lx,cJS:()=>kt,cg1:()=>se,dDg:()=>fv,dqk:()=>mn,eFA:()=>Nm,ekj:()=>Ld,eoX:()=>fE,f3M:()=>vt,g9A:()=>Sm,h0i:()=>Gd,hGG:()=>ME,iGM:()=>Ky,ifc:()=>bt,ip1:()=>ov,jDz:()=>Hb,kL8:()=>bo,lG2:()=>B,lqb:()=>Ed,lri:()=>hE,n5z:()=>Mn,oAB:()=>yi,oxw:()=>a0,q4F:()=>rC,qLn:()=>Ag,qOj:()=>Mu,qZA:()=>kd,rWj:()=>Mm,s9C:()=>Cy,sBO:()=>Ex,sIi:()=>Kg,s_b:()=>vm,soG:()=>uv,tb:()=>uc,tp0:()=>Go,uIk:()=>gy,vHH:()=>Te,vpe:()=>na,wAp:()=>Tt,xp6:()=>xw,ynx:()=>Jg,z2F:()=>pv,zSh:()=>Ig,zs3:()=>Wl});var f=V(7579),ee=V(727),F=V(9751),ue=V(6451),ae=V(3099);function ge(s){for(let o in s)if(s[o]===ge)return o;throw Error("Could not find renamed property on target object.")}function pe(s,o){for(const u in o)o.hasOwnProperty(u)&&!s.hasOwnProperty(u)&&(s[u]=o[u])}function Ie(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(Ie).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const u=o.indexOf("\n");return-1===u?o:o.substring(0,u)}function _e(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const z=ge({__forward_ref__:ge});function H(s){return s.__forward_ref__=H,s.toString=function(){return Ie(this())},s}function Z(s){return He(s)?s():s}function He(s){return"function"==typeof s&&s.hasOwnProperty(z)&&s.__forward_ref__===H}class Te extends Error{constructor(o,u){super(function rt(s,o){return`NG0${Math.abs(s)}${o?": "+o.trim():""}`}(o,u)),this.code=o}}function Ee(s){return"string"==typeof s?s:null==s?"":String(s)}function Ce(s,o){throw new Te(-201,!1)}function ie(s,o){null==s&&function te(s,o,u,c){throw new Error(`ASSERTION ERROR: ${s}`+(null==c?"":` [Expected=> ${u} ${c} ${o} <=Actual]`))}(o,s,null,"!=")}function ye(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function kt(s){return{providers:s.providers||[],imports:s.imports||[]}}function dn(s){return Yt(s,nr)||Yt(s,ri)}function It(s){return null!==dn(s)}function Yt(s,o){return s.hasOwnProperty(o)?s[o]:null}function Vn(s){return s&&(s.hasOwnProperty(rr)||s.hasOwnProperty(Ni))?s[rr]:null}const nr=ge({\u0275prov:ge}),rr=ge({\u0275inj:ge}),ri=ge({ngInjectableDef:ge}),Ni=ge({ngInjectorDef:ge});var ct=(()=>((ct=ct||{})[ct.Default=0]="Default",ct[ct.Host=1]="Host",ct[ct.Self=2]="Self",ct[ct.SkipSelf=4]="SkipSelf",ct[ct.Optional=8]="Optional",ct))();let ii;function si(s){const o=ii;return ii=s,o}function ua(s,o,u){const c=dn(s);return c&&"root"==c.providedIn?void 0===c.value?c.value=c.factory():c.value:u&ct.Optional?null:void 0!==o?o:void Ce(Ie(s))}function _r(s){return{toString:s}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),bt=(()=>{return(s=bt||(bt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",bt;var s})();const mn=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),ir={},xt=[],xr=ge({\u0275cmp:ge}),hn=ge({\u0275dir:ge}),Ao=ge({\u0275pipe:ge}),tn=ge({\u0275mod:ge}),yr=ge({\u0275fac:ge}),Fr=ge({__NG_ELEMENT_ID__:ge});let Ki=0;function Un(s){return _r(()=>{const u=!0===s.standalone,c={},h={type:s.type,providersResolver:null,decls:s.decls,vars:s.vars,factory:null,template:s.template||null,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:c,inputs:null,outputs:null,exportAs:s.exportAs||null,onPush:s.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,standalone:u,dependencies:u&&s.dependencies||null,getStandaloneInjector:null,selectors:s.selectors||xt,viewQuery:s.viewQuery||null,features:s.features||null,data:s.data||{},encapsulation:s.encapsulation||bt.Emulated,id:"c"+Ki++,styles:s.styles||xt,_:null,setInput:null,schemas:s.schemas||null,tView:null},m=s.dependencies,v=s.features;return h.inputs=j(s.inputs,c),h.outputs=j(s.outputs),v&&v.forEach(C=>C(h)),h.directiveDefs=m?()=>("function"==typeof m?m():m).map(vs).filter(qn):null,h.pipeDefs=m?()=>("function"==typeof m?m():m).map(We).filter(qn):null,h})}function vs(s){return le(s)||X(s)}function qn(s){return null!==s}function yi(s){return _r(()=>({type:s.type,bootstrap:s.bootstrap||xt,declarations:s.declarations||xt,imports:s.imports||xt,exports:s.exports||xt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function j(s,o){if(null==s)return ir;const u={};for(const c in s)if(s.hasOwnProperty(c)){let h=s[c],m=h;Array.isArray(h)&&(m=h[1],h=h[0]),u[h]=c,o&&(o[h]=m)}return u}const B=Un;function K(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function le(s){return s[xr]||null}function X(s){return s[hn]||null}function We(s){return s[Ao]||null}function Mt(s){const o=le(s)||X(s)||We(s);return null!==o&&o.standalone}function Lt(s,o){const u=s[tn]||null;if(!u&&!0===o)throw new Error(`Type ${Ie(s)} does not have '\u0275mod' property.`);return u}function vr(s){return Array.isArray(s)&&"object"==typeof s[1]}function ui(s){return Array.isArray(s)&&!0===s[1]}function ca(s){return 0!=(8&s.flags)}function Yu(s){return 2==(2&s.flags)}function Ls(s){return 1==(1&s.flags)}function Yi(s){return null!==s.template}function da(s){return 0!=(256&s[2])}function Vs(s,o){return s.hasOwnProperty(yr)?s[yr]:null}class Ap{constructor(o,u,c){this.previousValue=o,this.currentValue=u,this.firstChange=c}isFirstChange(){return this.firstChange}}function Oi(){return _h}function _h(s){return s.type.prototype.ngOnChanges&&(s.setInput=Rc),Za}function Za(){const s=xp(this),o=s?.current;if(o){const u=s.previous;if(u===ir)s.previous=o;else for(let c in o)u[c]=o[c];s.current=null,this.ngOnChanges(o)}}function Rc(s,o,u,c){const h=xp(s)||function Mc(s,o){return s[Xu]=o}(s,{previous:ir,current:null}),m=h.current||(h.current={}),v=h.previous,C=this.declaredInputs[u],D=v[C];m[C]=new Ap(D&&D.currentValue,o,v===ir),s[c]=o}Oi.ngInherit=!0;const Xu="__ngSimpleChanges__";function xp(s){return s[Xu]||null}function Zn(s){for(;Array.isArray(s);)s=s[0];return s}function Fi(s,o){return Zn(o[s])}function li(s,o){return Zn(o[s.index])}function il(s,o){return s.data[o]}function Yn(s,o){const u=o[s];return vr(u)?u:u[0]}function Ro(s){return 64==(64&s[2])}function wi(s,o){return null==o?null:s[o]}function fo(s){s[18]=0}function Br(s,o){s[5]+=o;let u=s,c=s[3];for(;null!==c&&(1===o&&1===u[5]||-1===o&&0===u[5]);)c[5]+=o,u=c,c=c[3]}const Nt={lFrame:Uc(null),bindingsEnabled:!0};function Ih(){return Nt.bindingsEnabled}function Ae(){return Nt.lFrame.lView}function Gt(){return Nt.lFrame.tView}function ol(s){return Nt.lFrame.contextLView=s,s[8]}function kc(s){return Nt.lFrame.contextLView=null,s}function Bn(){let s=al();for(;null!==s&&64===s.type;)s=s.parent;return s}function al(){return Nt.lFrame.currentTNode}function Ei(s,o){const u=Nt.lFrame;u.currentTNode=s,u.isParent=o}function fa(){return Nt.lFrame.isParent}function Oc(){Nt.lFrame.isParent=!1}function Bs(){return Nt.lFrame.bindingIndex++}function p_(s,o){const u=Nt.lFrame;u.bindingIndex=u.bindingRootIndex=s,Lc(o)}function Lc(s){Nt.lFrame.currentDirectiveIndex=s}function ul(){return Nt.lFrame.currentQueryIndex}function Kr(s){Nt.lFrame.currentQueryIndex=s}function Vc(s){const o=s[1];return 2===o.type?o.declTNode:1===o.type?s[6]:null}function Ja(s,o,u){if(u&ct.SkipSelf){let h=o,m=s;for(;!(h=h.parent,null!==h||u&ct.Host||(h=Vc(m),null===h||(m=m[15],10&h.type))););if(null===h)return!1;o=h,s=m}const c=Nt.lFrame=Po();return c.currentTNode=o,c.lView=s,!0}function Xa(s){const o=Po(),u=s[1];Nt.lFrame=o,o.currentTNode=u.firstChild,o.lView=s,o.tView=u,o.contextLView=s,o.bindingIndex=u.bindingStartIndex,o.inI18n=!1}function Po(){const s=Nt.lFrame,o=null===s?null:s.child;return null===o?Uc(s):o}function Uc(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function eu(){const s=Nt.lFrame;return Nt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const bh=eu;function ga(){const s=eu();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function on(){return Nt.lFrame.selectedIndex}function js(s){Nt.lFrame.selectedIndex=s}function Rn(){const s=Nt.lFrame;return il(s.tView,s.selectedIndex)}function ko(s,o){for(let u=o.directiveStart,c=o.directiveEnd;u<c;u++){const m=s.data[u].type.prototype,{ngAfterContentInit:v,ngAfterContentChecked:C,ngAfterViewInit:D,ngAfterViewChecked:x,ngOnDestroy:N}=m;v&&(s.contentHooks||(s.contentHooks=[])).push(-u,v),C&&((s.contentHooks||(s.contentHooks=[])).push(u,C),(s.contentCheckHooks||(s.contentCheckHooks=[])).push(u,C)),D&&(s.viewHooks||(s.viewHooks=[])).push(-u,D),x&&((s.viewHooks||(s.viewHooks=[])).push(u,x),(s.viewCheckHooks||(s.viewCheckHooks=[])).push(u,x)),null!=N&&(s.destroyHooks||(s.destroyHooks=[])).push(u,N)}}function tu(s,o,u){nu(s,o,3,u)}function ma(s,o,u,c){(3&s[2])===u&&nu(s,o,u,c)}function Ah(s,o){let u=s[2];(3&u)===o&&(u&=2047,u+=1,s[2]=u)}function nu(s,o,u,c){const m=c??-1,v=o.length-1;let C=0;for(let D=void 0!==c?65535&s[18]:0;D<v;D++)if("number"==typeof o[D+1]){if(C=o[D],null!=c&&C>=c)break}else o[D]<0&&(s[18]+=65536),(C<m||-1==m)&&(Pp(s,u,o,D),s[18]=(4294901760&s[18])+D+2),D++}function Pp(s,o,u,c){const h=u[c]<0,m=u[c+1],C=s[h?-u[c]:u[c]];if(h){if(s[2]>>11<s[18]>>16&&(3&s[2])===o){s[2]+=2048;try{m.call(C)}finally{}}}else try{m.call(C)}finally{}}class ru{constructor(o,u,c){this.factory=o,this.resolving=!1,this.canSeeViewProviders=u,this.injectImpl=c}}function fl(s,o,u){let c=0;for(;c<u.length;){const h=u[c];if("number"==typeof h){if(0!==h)break;c++;const m=u[c++],v=u[c++],C=u[c++];s.setAttribute(o,v,C,m)}else{const m=h,v=u[++c];Fp(m)?s.setProperty(o,m,v):s.setAttribute(o,m,v),c++}}return c}function pl(s){return 3===s||4===s||6===s}function Fp(s){return 64===s.charCodeAt(0)}function _a(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let u=-1;for(let c=0;c<o.length;c++){const h=o[c];"number"==typeof h?u=h:0===u||Rh(s,u,h,null,-1===u||2===u?o[++c]:null)}}return s}function Rh(s,o,u,c,h){let m=0,v=s.length;if(-1===o)v=-1;else for(;m<s.length;){const C=s[m++];if("number"==typeof C){if(C===o){v=-1;break}if(C>o){v=m-1;break}}}for(;m<s.length;){const C=s[m];if("number"==typeof C)break;if(C===u){if(null===c)return void(null!==h&&(s[m+1]=h));if(c===s[m+1])return void(s[m+2]=h)}m++,null!==c&&m++,null!==h&&m++}-1!==v&&(s.splice(v,0,o),m=v+1),s.splice(m++,0,u),null!==c&&s.splice(m++,0,c),null!==h&&s.splice(m++,0,h)}function Gc(s){return-1!==s}function iu(s){return 32767&s}function Es(s,o){let u=function Lp(s){return s>>16}(s),c=o;for(;u>0;)c=c[15],u--;return c}let su=!0;function Hs(s){const o=su;return su=s,o}let ou=0;const Li={};function ya(s,o){const u=Fo(s,o);if(-1!==u)return u;const c=o[1];c.firstCreatePass&&(s.injectorIndex=o.length,Wc(c.data,s),Wc(o,null),Wc(c.blueprint,null));const h=Lo(s,o),m=s.injectorIndex;if(Gc(h)){const v=iu(h),C=Es(h,o),D=C[1].data;for(let x=0;x<8;x++)o[m+x]=C[v+x]|D[v+x]}return o[m+8]=h,m}function Wc(s,o){s.push(0,0,0,0,0,0,0,0,o)}function Fo(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Lo(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let u=0,c=null,h=o;for(;null!==h;){if(c=Bp(h),null===c)return-1;if(u++,h=h[15],-1!==c.injectorIndex)return c.injectorIndex|u<<16}return-1}function au(s,o,u){!function zc(s,o,u){let c;"string"==typeof u?c=u.charCodeAt(0)||0:u.hasOwnProperty(Fr)&&(c=u[Fr]),null==c&&(c=u[Fr]=ou++);const h=255&c;o.data[s+(h>>5)]|=1<<h}(s,o,u)}function ml(s,o,u){if(u&ct.Optional||void 0!==s)return s;Ce()}function Vp(s,o,u,c){if(u&ct.Optional&&void 0===c&&(c=null),0==(u&(ct.Self|ct.Host))){const h=s[9],m=si(void 0);try{return h?h.get(o,c,u&ct.Optional):ua(o,c,u&ct.Optional)}finally{si(m)}}return ml(c,0,u)}function uu(s,o,u,c=ct.Default,h){if(null!==s){if(1024&o[2]){const v=function cu(s,o,u,c,h){let m=s,v=o;for(;null!==m&&null!==v&&1024&v[2]&&!(256&v[2]);){const C=va(m,v,u,c|ct.Self,Li);if(C!==Li)return C;let D=m.parent;if(!D){const x=v[21];if(x){const N=x.get(u,Li,c);if(N!==Li)return N}D=Bp(v),v=v[15]}m=D}return h}(s,o,u,c,Li);if(v!==Li)return v}const m=va(s,o,u,c,Li);if(m!==Li)return m}return Vp(o,u,c,h)}function va(s,o,u,c,h){const m=function Uo(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Fr)?s[Fr]:void 0;return"number"==typeof o?o>=0?255&o:__:o}(u);if("function"==typeof m){if(!Ja(o,s,c))return c&ct.Host?ml(h,0,c):Vp(o,u,c,h);try{const v=m(c);if(null!=v||c&ct.Optional)return v;Ce()}finally{bh()}}else if("number"==typeof m){let v=null,C=Fo(s,o),D=-1,x=c&ct.Host?o[16][6]:null;for((-1===C||c&ct.SkipSelf)&&(D=-1===C?Lo(s,o):o[C+8],-1!==D&&_l(c,!1)?(v=o[1],C=iu(D),o=Es(D,o)):C=-1);-1!==C;){const N=o[1];if(Up(m,C,N.data)){const L=m_(C,o,u,v,c,x);if(L!==Li)return L}D=o[C+8],-1!==D&&_l(c,o[1].data[C+8]===x)&&Up(m,C,o)?(v=N,C=iu(D),o=Es(D,o)):C=-1}}return h}function m_(s,o,u,c,h,m){const v=o[1],C=v.data[s+8],N=Cs(C,v,u,null==c?Yu(C)&&su:c!=v&&0!=(3&C.type),h&ct.Host&&m===C);return null!==N?lu(o,v,N,C):Li}function Cs(s,o,u,c,h){const m=s.providerIndexes,v=o.data,C=1048575&m,D=s.directiveStart,N=m>>20,G=h?C+N:s.directiveEnd;for(let Q=c?C:C+N;Q<G;Q++){const be=v[Q];if(Q<D&&u===be||Q>=D&&be.type===u)return Q}if(h){const Q=v[D];if(Q&&Yi(Q)&&Q.type===u)return D}return null}function lu(s,o,u,c){let h=s[u];const m=o.data;if(function dl(s){return s instanceof ru}(h)){const v=h;v.resolving&&function yt(s,o){const u=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Te(-200,`Circular dependency in DI detected for ${s}${u}`)}(function we(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():Ee(s)}(m[u]));const C=Hs(v.canSeeViewProviders);v.resolving=!0;const D=v.injectImpl?si(v.injectImpl):null;Ja(s,c,ct.Default);try{h=s[u]=v.factory(void 0,m,s,c),o.firstCreatePass&&u>=c.directiveStart&&function jc(s,o,u){const{ngOnChanges:c,ngOnInit:h,ngDoCheck:m}=o.type.prototype;if(c){const v=_h(o);(u.preOrderHooks||(u.preOrderHooks=[])).push(s,v),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,v)}h&&(u.preOrderHooks||(u.preOrderHooks=[])).push(0-s,h),m&&((u.preOrderHooks||(u.preOrderHooks=[])).push(s,m),(u.preOrderCheckHooks||(u.preOrderCheckHooks=[])).push(s,m))}(u,m[u],o)}finally{null!==D&&si(D),Hs(C),v.resolving=!1,bh()}}return h}function Up(s,o,u){return!!(u[o+(s>>5)]&1<<s)}function _l(s,o){return!(s&ct.Self||s&ct.Host&&o)}class bs{constructor(o,u){this._tNode=o,this._lView=u}get(o,u,c){return uu(this._tNode,this._lView,o,c,u)}}function __(){return new bs(Bn(),Ae())}function Mn(s){return _r(()=>{const o=s.prototype.constructor,u=o[yr]||qc(o),c=Object.prototype;let h=Object.getPrototypeOf(s.prototype).constructor;for(;h&&h!==c;){const m=h[yr]||qc(h);if(m&&m!==u)return m;h=Object.getPrototypeOf(h)}return m=>new m})}function qc(s){return He(s)?()=>{const o=qc(Z(s));return o&&o()}:Vs(s)}function Bp(s){const o=s[1],u=o.type;return 2===u?o.declTNode:1===u?s[6]:null}function yl(s){return function Vo(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const u=s.attrs;if(u){const c=u.length;let h=0;for(;h<c;){const m=u[h];if(pl(m))break;if(0===m)h+=2;else if("number"==typeof m)for(h++;h<c&&"string"==typeof u[h];)h++;else{if(m===o)return u[h+1];h+=2}}}return null}(Bn(),s)}const $n="__parameters__";function zs(s,o,u){return _r(()=>{const c=function wa(s){return function(...u){if(s){const c=s(...u);for(const h in c)this[h]=c[h]}}}(o);function h(...m){if(this instanceof h)return c.apply(this,m),this;const v=new h(...m);return C.annotation=v,C;function C(D,x,N){const L=D.hasOwnProperty($n)?D[$n]:Object.defineProperty(D,$n,{value:[]})[$n];for(;L.length<=N;)L.push(null);return(L[N]=L[N]||[]).push(v),D}}return u&&(h.prototype=Object.create(u.prototype)),h.prototype.ngMetadataName=s,h.annotationCls=h,h})}class pn{constructor(o,u){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof u?this.__NG_ELEMENT_ID__=u:void 0!==u&&(this.\u0275prov=ye({token:this,providedIn:u.providedIn||"root",factory:u.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function sr(s,o){void 0===o&&(o=s);for(let u=0;u<s.length;u++){let c=s[u];Array.isArray(c)?(o===s&&(o=s.slice(0,u)),sr(c,o)):o!==s&&o.push(c)}return o}function ts(s,o){s.forEach(u=>Array.isArray(u)?ts(u,o):o(u))}function Yc(s,o,u){o>=s.length?s.push(u):s.splice(o,0,u)}function Qc(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function bi(s,o,u){let c=fu(s,o);return c>=0?s[1|c]=u:(c=~c,function y_(s,o,u,c){let h=s.length;if(h==o)s.push(u,c);else if(1===h)s.push(c,s[0]),s[0]=u;else{for(h--,s.push(s[h-1],s[h]);h>o;)s[h]=s[h-2],h--;s[o]=u,s[o+1]=c}}(s,c,o,u)),c}function Cl(s,o){const u=fu(s,o);if(u>=0)return s[1|u]}function fu(s,o){return function qp(s,o,u){let c=0,h=s.length>>u;for(;h!==c;){const m=c+(h-c>>1),v=s[m<<u];if(o===v)return m<<u;v>o?h=m:c=m+1}return~(h<<u)}(s,o,1)}const hr={},fr="__NG_DI_FLAG__",Zr="ngTempTokenPath",Bi=/\n/gm,gu="__source";let jo;function Yr(s){const o=jo;return jo=s,o}function xl(s,o=ct.Default){if(void 0===jo)throw new Te(-203,!1);return null===jo?ua(s,void 0,o):jo.get(s,o&ct.Optional?null:void 0,o)}function Qn(s,o=ct.Default){return(function qi(){return ii}()||xl)(Z(s),o)}function vt(s,o=ct.Default){return"number"!=typeof o&&(o=0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)),Qn(s,o)}function Fh(s){const o=[];for(let u=0;u<s.length;u++){const c=Z(s[u]);if(Array.isArray(c)){if(0===c.length)throw new Te(900,!1);let h,m=ct.Default;for(let v=0;v<c.length;v++){const C=c[v],D=Rl(C);"number"==typeof D?-1===D?h=C.token:m|=D:h=C}o.push(Qn(h,m))}else o.push(Qn(c))}return o}function Ho(s,o){return s[fr]=o,s.prototype[fr]=o,s}function Rl(s){return s[fr]}const po=Ho(zs("Optional"),8),Go=Ho(zs("SkipSelf"),4);var ss=(()=>((ss=ss||{})[ss.Important=1]="Important",ss[ss.DashCase=2]="DashCase",ss))();const O=new Map;let W=0;const wn="__ngContext__";function _t(s,o){vr(o)?(s[wn]=o[20],function he(s){O.set(s[20],s)}(o)):s[wn]=o}function Fl(s,o){return undefined(s,o)}function od(s){const o=s[3];return ui(o)?o[3]:o}function Ll(s){return Ta(s[13])}function C_(s){return Ta(s[4])}function Ta(s){for(;null!==s&&!ui(s);)s=s[4];return s}function Vl(s,o,u,c,h){if(null!=c){let m,v=!1;ui(c)?m=c:vr(c)&&(v=!0,c=c[0]);const C=Zn(c);0===s&&null!==u?null==h?ld(o,u,C):qo(o,u,C,h||null,!0):1===s&&null!==u?qo(o,u,C,h||null,!0):2===s?function lg(s,o,u){const c=zh(s,o);c&&function sg(s,o,u,c){s.removeChild(o,u,c)}(s,c,o,u)}(o,C,v):3===s&&o.destroyNode(C),null!=m&&function hg(s,o,u,c,h){const m=u[7];m!==Zn(u)&&Vl(o,s,c,m,h);for(let C=10;C<u.length;C++){const D=u[C];cd(D[1],D,s,o,c,m)}}(o,s,m,u,h)}}function ng(s,o,u){return s.createElement(o,u)}function Bl(s,o){const u=s[9],c=u.indexOf(o),h=o[3];512&o[2]&&(o[2]&=-513,Br(h,-1)),u.splice(c,1)}function Eu(s,o){if(s.length<=10)return;const u=10+o,c=s[u];if(c){const h=c[17];null!==h&&h!==s&&Bl(h,c),o>0&&(s[u-1][4]=c[4]);const m=Qc(s,10+o);!function wu(s,o){cd(s,o,o[11],2,null,null),o[0]=null,o[6]=null}(c[1],c);const v=m[19];null!==v&&v.detachView(m[1]),c[3]=null,c[4]=null,c[2]&=-65}return c}function Iu(s,o){if(!(128&o[2])){const u=o[11];u.destroyNode&&cd(s,o,u,3,null,null),function uw(s){let o=s[13];if(!o)return Hh(s[1],s);for(;o;){let u=null;if(vr(o))u=o[13];else{const c=o[10];c&&(u=c)}if(!u){for(;o&&!o[4]&&o!==s;)vr(o)&&Hh(o[1],o),o=o[3];null===o&&(o=s),vr(o)&&Hh(o[1],o),u=o&&o[4]}o=u}}(o)}}function Hh(s,o){if(!(128&o[2])){o[2]&=-65,o[2]|=128,function Gh(s,o){let u;if(null!=s&&null!=(u=s.destroyHooks))for(let c=0;c<u.length;c+=2){const h=o[u[c]];if(!(h instanceof ru)){const m=u[c+1];if(Array.isArray(m))for(let v=0;v<m.length;v+=2){const C=h[m[v]],D=m[v+1];try{D.call(C)}finally{}}else try{m.call(h)}finally{}}}}(s,o),function ig(s,o){const u=s.cleanup,c=o[7];let h=-1;if(null!==u)for(let m=0;m<u.length-1;m+=2)if("string"==typeof u[m]){const v=u[m+1],C="function"==typeof v?v(o):Zn(o[v]),D=c[h=u[m+2]],x=u[m+3];"boolean"==typeof x?C.removeEventListener(u[m],D,x):x>=0?c[h=x]():c[h=-x].unsubscribe(),m+=2}else{const v=c[h=u[m+1]];u[m].call(v)}if(null!==c){for(let m=h+1;m<c.length;m++)(0,c[m])();o[7]=null}}(s,o),1===o[1].type&&o[11].destroy();const u=o[17];if(null!==u&&ui(o[3])){u!==o[3]&&Bl(u,o);const c=o[19];null!==c&&c.detachView(s)}!function $e(s){O.delete(s[20])}(o)}}function Cu(s,o,u){return function b_(s,o,u){let c=o;for(;null!==c&&40&c.type;)c=(o=c).parent;if(null===c)return u[0];if(2&c.flags){const h=s.data[c.directiveStart].encapsulation;if(h===bt.None||h===bt.Emulated)return null}return li(c,u)}(s,o.parent,u)}function qo(s,o,u,c,h){s.insertBefore(o,u,c,h)}function ld(s,o,u){s.appendChild(o,u)}function D_(s,o,u,c,h){null!==c?qo(s,o,u,c,h):ld(s,o,u)}function zh(s,o){return s.parentNode(o)}let vo,ag=function Wh(s,o,u){return 40&s.type?li(s,u):null};function Ys(s,o,u,c){const h=Cu(s,c,o),m=o[11],C=function T_(s,o,u){return ag(s,o,u)}(c.parent||o[6],c,o);if(null!=h)if(Array.isArray(u))for(let D=0;D<u.length;D++)D_(m,h,u[D],C,!1);else D_(m,h,u,C,!1)}function Qs(s,o){if(null!==o){const u=o.type;if(3&u)return li(o,s);if(4&u)return Kh(-1,s[o.index]);if(8&u){const c=o.child;if(null!==c)return Qs(s,c);{const h=s[o.index];return ui(h)?Kh(-1,h):Zn(h)}}if(32&u)return Fl(o,s)()||Zn(s[o.index]);{const c=ug(s,o);return null!==c?Array.isArray(c)?c[0]:Qs(od(s[16]),c):Qs(s,o.next)}}return null}function ug(s,o){return null!==o?s[16][6].projection[o.projection]:null}function Kh(s,o){const u=10+s+1;if(u<o.length){const c=o[u],h=c[1].firstChild;if(null!==h)return Qs(c,h)}return o[7]}function cg(s,o,u,c,h,m,v){for(;null!=u;){const C=c[u.index],D=u.type;if(v&&0===o&&(C&&_t(Zn(C),c),u.flags|=4),64!=(64&u.flags))if(8&D)cg(s,o,u.child,c,h,m,!1),Vl(o,s,h,C,m);else if(32&D){const x=Fl(u,c);let N;for(;N=x();)Vl(o,s,h,N,m);Vl(o,s,h,C,m)}else 16&D?dg(s,o,c,u,h,m):Vl(o,s,h,C,m);u=v?u.projectionNext:u.next}}function cd(s,o,u,c,h,m){cg(u,c,s.firstChild,o,h,m,!1)}function dg(s,o,u,c,h,m){const v=u[16],D=v[6].projection[c.projection];if(Array.isArray(D))for(let x=0;x<D.length;x++)Vl(o,s,h,D[x],m);else cg(s,o,D,v[3],h,m,!0)}function pg(s,o,u){s.setAttribute(o,"style",u)}function gg(s,o,u){""===u?s.removeAttribute(o,"class"):s.setAttribute(o,"class",u)}function A_(s){vo=s}class mg{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Er(s){return s instanceof mg?s.changingThisBreaksApplicationSecurity:s}const g=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;var Ir=(()=>((Ir=Ir||{})[Ir.NONE=0]="NONE",Ir[Ir.HTML=1]="HTML",Ir[Ir.STYLE=2]="STYLE",Ir[Ir.SCRIPT=3]="SCRIPT",Ir[Ir.URL=4]="URL",Ir[Ir.RESOURCE_URL=5]="RESOURCE_URL",Ir))();function _d(s){const o=function yd(){const s=Ae();return s&&s[12]}();return o?o.sanitize(Ir.URL,s)||"":function Ko(s,o){const u=function R_(s){return s instanceof mg&&s.getTypeName()||null}(s);if(null!=u&&u!==o){if("ResourceURL"===u&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${u} (see https://g.co/ng/security#xss)`)}return u===o}(s,"URL")?Er(s):function E(s){return(s=String(s)).match(g)?s:"unsafe:"+s}(Ee(s))}const tf=new pn("ENVIRONMENT_INITIALIZER"),vd=new pn("INJECTOR",-1),HI=new pn("INJECTOR_DEF_TYPES");class GI{get(o,u=hr){if(u===hr){const c=new Error(`NullInjectorError: No provider for ${Ie(o)}!`);throw c.name="NullInjectorError",c}return u}}function ES(...s){return{\u0275providers:zI(0,s)}}function zI(s,...o){const u=[],c=new Set;let h;return ts(o,m=>{const v=m;gw(v,u,[],c)&&(h||(h=[]),h.push(v))}),void 0!==h&&WI(h,u),u}function WI(s,o){for(let u=0;u<s.length;u++){const{providers:h}=s[u];ts(h,m=>{o.push(m)})}}function gw(s,o,u,c){if(!(s=Z(s)))return!1;let h=null,m=Vn(s);const v=!m&&le(s);if(m||v){if(v&&!v.standalone)return!1;h=s}else{const D=s.ngModule;if(m=Vn(D),!m)return!1;h=D}const C=c.has(h);if(v){if(C)return!1;if(c.add(h),v.dependencies){const D="function"==typeof v.dependencies?v.dependencies():v.dependencies;for(const x of D)gw(x,o,u,c)}}else{if(!m)return!1;{if(null!=m.imports&&!C){let x;c.add(h);try{ts(m.imports,N=>{gw(N,o,u,c)&&(x||(x=[]),x.push(N))})}finally{}void 0!==x&&WI(x,o)}if(!C){const x=Vs(h)||(()=>new h);o.push({provide:h,useFactory:x,deps:xt},{provide:HI,useValue:h,multi:!0},{provide:tf,useValue:()=>Qn(h),multi:!0})}const D=m.providers;null==D||C||ts(D,N=>{o.push(N)})}}return h!==s&&void 0!==s.providers}const IS=ge({provide:String,useValue:ge});function mw(s){return null!==s&&"object"==typeof s&&IS in s}function Tu(s){return"function"==typeof s}const Ig=new pn("Set Injector scope."),wd={},CS={};let yw;function k_(){return void 0===yw&&(yw=new GI),yw}class Ed{}class Cg extends Ed{constructor(o,u,c,h){super(),this.parent=u,this.source=c,this.scopes=h,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,vw(o,v=>this.processProvider(v)),this.records.set(vd,Id(void 0,this)),h.has("environment")&&this.records.set(Ed,Id(void 0,this));const m=this.records.get(Ig);null!=m&&"string"==typeof m.value&&this.scopes.add(m.value),this.injectorDefTypes=new Set(this.get(HI.multi,xt,ct.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const o of this._ngOnDestroyHooks)o.ngOnDestroy();for(const o of this._onDestroyHooks)o()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(o){this._onDestroyHooks.push(o)}runInContext(o){this.assertNotDestroyed();const u=Yr(this),c=si(void 0);try{return o()}finally{Yr(u),si(c)}}get(o,u=hr,c=ct.Default){this.assertNotDestroyed();const h=Yr(this),m=si(void 0);try{if(!(c&ct.SkipSelf)){let C=this.records.get(o);if(void 0===C){const D=function bS(s){return"function"==typeof s||"object"==typeof s&&s instanceof pn}(o)&&dn(o);C=D&&this.injectableDefInScope(D)?Id(O_(o),wd):null,this.records.set(o,C)}if(null!=C)return this.hydrate(o,C)}return(c&ct.Self?k_():this.parent).get(o,u=c&ct.Optional&&u===hr?null:u)}catch(v){if("NullInjectorError"===v.name){if((v[Zr]=v[Zr]||[]).unshift(Ie(o)),h)throw v;return function Ml(s,o,u,c){const h=s[Zr];throw o[gu]&&h.unshift(o[gu]),s.message=function Fn(s,o,u,c=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let h=Ie(o);if(Array.isArray(o))h=o.map(Ie).join(" -> ");else if("object"==typeof o){let m=[];for(let v in o)if(o.hasOwnProperty(v)){let C=o[v];m.push(v+":"+("string"==typeof C?JSON.stringify(C):Ie(C)))}h=`{${m.join(", ")}}`}return`${u}${c?"("+c+")":""}[${h}]: ${s.replace(Bi,"\n  ")}`}("\n"+s.message,h,u,c),s.ngTokenPath=h,s[Zr]=null,s}(v,o,"R3InjectorError",this.source)}throw v}finally{si(m),Yr(h)}}resolveInjectorInitializers(){const o=Yr(this),u=si(void 0);try{const c=this.get(tf.multi,xt,ct.Self);for(const h of c)h()}finally{Yr(o),si(u)}}toString(){const o=[],u=this.records;for(const c of u.keys())o.push(Ie(c));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Te(205,!1)}processProvider(o){let u=Tu(o=Z(o))?o:Z(o&&o.provide);const c=function F_(s){return mw(s)?Id(void 0,s.useValue):Id(bg(s),wd)}(o);if(Tu(o)||!0!==o.multi)this.records.get(u);else{let h=this.records.get(u);h||(h=Id(void 0,wd,!0),h.factory=()=>Fh(h.multi),this.records.set(u,h)),u=o,h.multi.push(o)}this.records.set(u,c)}hydrate(o,u){return u.value===wd&&(u.value=CS,u.value=u.factory()),"object"==typeof u.value&&u.value&&function YI(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(u.value)&&this._ngOnDestroyHooks.add(u.value),u.value}injectableDefInScope(o){if(!o.providedIn)return!1;const u=Z(o.providedIn);return"string"==typeof u?"any"===u||this.scopes.has(u):this.injectorDefTypes.has(u)}}function O_(s){const o=dn(s),u=null!==o?o.factory:Vs(s);if(null!==u)return u;if(s instanceof pn)throw new Te(204,!1);if(s instanceof Function)return function ZI(s){const o=s.length;if(o>0)throw function Ea(s,o){const u=[];for(let c=0;c<s;c++)u.push(o);return u}(o,"?"),new Te(204,!1);const u=function kn(s){const o=s&&(s[nr]||s[ri]);if(o){const u=function bn(s){if(s.hasOwnProperty("name"))return s.name;const o=(""+s).match(/^function\s*([^\s(]+)/);return null===o?"":o[1]}(s);return console.warn(`DEPRECATED: DI is instantiating a token "${u}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${u}" class.`),o}return null}(s);return null!==u?()=>u.factory(s):()=>new s}(s);throw new Te(204,!1)}function bg(s,o,u){let c;if(Tu(s)){const h=Z(s);return Vs(h)||O_(h)}if(mw(s))c=()=>Z(s.useValue);else if(function qI(s){return!(!s||!s.useFactory)}(s))c=()=>s.useFactory(...Fh(s.deps||[]));else if(function _w(s){return!(!s||!s.useExisting)}(s))c=()=>Qn(Z(s.useExisting));else{const h=Z(s&&(s.useClass||s.provide));if(!function Dg(s){return!!s.deps}(s))return Vs(h)||O_(h);c=()=>new h(...Fh(s.deps))}return c}function Id(s,o,u=!1){return{factory:s,value:o,multi:u?[]:void 0}}function DS(s){return!!s.\u0275providers}function vw(s,o){for(const u of s)Array.isArray(u)?vw(u,o):DS(u)?vw(u.\u0275providers,o):o(u)}class QI{}class SS{resolveComponentFactory(o){throw function L_(s){const o=Error(`No component factory found for ${Ie(s)}. Did you add it to @NgModule.entryComponents?`);return o.ngComponent=s,o}(o)}}let Tg=(()=>{class s{}return s.NULL=new SS,s})();function AS(){return nf(Bn(),Ae())}function nf(s,o){return new Sg(li(s,o))}let Sg=(()=>{class s{constructor(u){this.nativeElement=u}}return s.__NG_ELEMENT_ID__=AS,s})();function XI(s){return s instanceof Sg?s.nativeElement:s}class ww{}let eC=(()=>{class s{}return s.__NG_ELEMENT_ID__=()=>function tC(){const s=Ae(),u=Yn(Bn().index,s);return(vr(u)?u:s)[11]}(),s})(),nC=(()=>{class s{}return s.\u0275prov=ye({token:s,providedIn:"root",factory:()=>null}),s})();class Ew{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const rC=new Ew("14.3.0"),Iw={};function bw(s){return s.ngOriginalError}class Ag{constructor(){this._console=console}handleError(o){const u=this._findOriginalError(o);this._console.error("ERROR",o),u&&this._console.error("ORIGINAL ERROR",u)}_findOriginalError(o){let u=o&&bw(o);for(;u&&bw(u);)u=bw(u);return u||null}}function Su(s){return s instanceof Function?s():s}function xg(s,o,u){let c=s.length;for(;;){const h=s.indexOf(o,u);if(-1===h)return h;if(0===h||s.charCodeAt(h-1)<=32){const m=o.length;if(h+m===c||s.charCodeAt(h+m)<=32)return h}u=h+1}}const dC="ng-template";function NS(s,o,u){let c=0;for(;c<s.length;){let h=s[c++];if(u&&"class"===h){if(h=s[c],-1!==xg(h.toLowerCase(),o,0))return!0}else if(1===h){for(;c<s.length&&"string"==typeof(h=s[c++]);)if(h.toLowerCase()===o)return!0;return!1}}return!1}function hC(s){return 4===s.type&&s.value!==dC}function PS(s,o,u){return o===(4!==s.type||u?s.value:dC)}function fC(s,o,u){let c=4;const h=s.attrs||[],m=function Sw(s){for(let o=0;o<s.length;o++)if(pl(s[o]))return o;return s.length}(h);let v=!1;for(let C=0;C<o.length;C++){const D=o[C];if("number"!=typeof D){if(!v)if(4&c){if(c=2|1&c,""!==D&&!PS(s,D,u)||""===D&&1===o.length){if(gn(c))return!1;v=!0}}else{const x=8&c?D:o[++C];if(8&c&&null!==s.attrs){if(!NS(s.attrs,x,u)){if(gn(c))return!1;v=!0}continue}const L=kS(8&c?"class":D,h,hC(s),u);if(-1===L){if(gn(c))return!1;v=!0;continue}if(""!==x){let G;G=L>m?"":h[L+1].toLowerCase();const Q=8&c?G:null;if(Q&&-1!==xg(Q,x,0)||2&c&&x!==G){if(gn(c))return!1;v=!0}}}}else{if(!v&&!gn(c)&&!gn(D))return!1;if(v&&gn(D))continue;v=!1,c=D|1&c}}return gn(c)||v}function gn(s){return 0==(1&s)}function kS(s,o,u,c){if(null===o)return-1;let h=0;if(c||!u){let m=!1;for(;h<o.length;){const v=o[h];if(v===s)return h;if(3===v||6===v)m=!0;else{if(1===v||2===v){let C=o[++h];for(;"string"==typeof C;)C=o[++h];continue}if(4===v)break;if(0===v){h+=4;continue}}h+=m?1:2}return-1}return function U_(s,o){let u=s.indexOf(4);if(u>-1)for(u++;u<s.length;){const c=s[u];if("number"==typeof c)return-1;if(c===o)return u;u++}return-1}(o,s)}function Tw(s,o,u=!1){for(let c=0;c<o.length;c++)if(fC(s,o[c],u))return!0;return!1}function Aw(s,o){return s?":not("+o.trim()+")":o}function oP(s){let o=s[0],u=1,c=2,h="",m=!1;for(;u<s.length;){let v=s[u];if("string"==typeof v)if(2&c){const C=s[++u];h+="["+v+(C.length>0?'="'+C+'"':"")+"]"}else 8&c?h+="."+v:4&c&&(h+=" "+v);else""!==h&&!gn(v)&&(o+=Aw(m,h),h=""),c=v,m=m||!gn(c);u++}return""!==h&&(o+=Aw(m,h)),o}const Ut={};function xw(s){Rg(Gt(),Ae(),on()+s,!1)}function Rg(s,o,u,c){if(!c)if(3==(3&o[2])){const m=s.preOrderCheckHooks;null!==m&&tu(o,m,u)}else{const m=s.preOrderHooks;null!==m&&ma(o,m,0,u)}js(u)}function mC(s,o=null,u=null,c){const h=_C(s,o,u,c);return h.resolveInjectorInitializers(),h}function _C(s,o=null,u=null,c,h=new Set){const m=[u||xt,ES(s)];return c=c||("object"==typeof s?void 0:Ie(s)),new Cg(m,o||k_(),c||null,h)}let Wl=(()=>{class s{static create(u,c){if(Array.isArray(u))return mC({name:""},c,u,"");{const h=u.name??"";return mC({name:h},u.parent,u.providers,h)}}}return s.THROW_IF_NOT_FOUND=hr,s.NULL=new GI,s.\u0275prov=ye({token:s,providedIn:"any",factory:()=>Qn(vd)}),s.__NG_ELEMENT_ID__=-1,s})();function Ze(s,o=ct.Default){const u=Ae();return null===u?Qn(s,o):uu(Bn(),u,Z(s),o)}function H_(){throw new Error("invalid")}function Cd(s,o){return s<<17|o<<2}function us(s){return s>>17&32767}function Fw(s){return 2|s}function Au(s){return(131068&s)>>2}function Lw(s,o){return-131069&s|o<<2}function cf(s){return 1|s}function zw(s,o){const u=s.contentQueries;if(null!==u)for(let c=0;c<u.length;c+=2){const h=u[c],m=u[c+1];if(-1!==m){const v=s.data[m];Kr(h),v.contentQueries(2,o[m],m)}}}function kg(s,o,u,c,h,m,v,C,D,x,N){const L=o.blueprint.slice();return L[0]=h,L[2]=76|c,(null!==N||s&&1024&s[2])&&(L[2]|=1024),fo(L),L[3]=L[15]=s,L[8]=u,L[10]=v||s&&s[10],L[11]=C||s&&s[11],L[12]=D||s&&s[12]||null,L[9]=x||s&&s[9]||null,L[6]=m,L[20]=function Y(){return W++}(),L[21]=N,L[16]=2==o.type?s[16]:L,L}function bd(s,o,u,c,h){let m=s.data[o];if(null===m)m=function Og(s,o,u,c,h){const m=al(),v=fa(),D=s.data[o]=function YS(s,o,u,c,h,m){return{type:u,index:c,insertBeforeIndex:null,injectorIndex:o?o.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:h,attrs:m,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,v?m:m&&m.parent,u,o,c,h);return null===s.firstChild&&(s.firstChild=D),null!==m&&(v?null==m.child&&null!==D.parent&&(m.child=D):null===m.next&&(m.next=D)),D}(s,o,u,c,h),function Ch(){return Nt.lFrame.inI18n}()&&(m.flags|=64);else if(64&m.type){m.type=u,m.value=c,m.attrs=h;const v=function Mo(){const s=Nt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();m.injectorIndex=null===v?-1:v.injectorIndex}return Ei(m,!0),m}function Dd(s,o,u,c){if(0===u)return-1;const h=o.length;for(let m=0;m<u;m++)o.push(c),s.blueprint.push(c),s.data.push(null);return h}function Ww(s,o,u){Xa(o);try{const c=s.viewQuery;null!==c&&$g(1,c,u);const h=s.template;null!==h&&X_(s,o,h,1,u),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&zw(s,o),s.staticViewQueries&&$g(2,s.viewQuery,u);const m=s.components;null!==m&&function qS(s,o){for(let u=0;u<o.length;u++)oy(s,o[u])}(o,m)}catch(c){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),c}finally{o[2]&=-5,ga()}}function ff(s,o,u,c){const h=o[2];if(128!=(128&h)){Xa(o);try{fo(o),function Xi(s){return Nt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==u&&X_(s,o,u,2,c);const v=3==(3&h);if(v){const x=s.preOrderCheckHooks;null!==x&&tu(o,x,null)}else{const x=s.preOrderHooks;null!==x&&ma(o,x,0,null),Ah(o,0)}if(function ls(s){for(let o=Ll(s);null!==o;o=C_(o)){if(!o[2])continue;const u=o[9];for(let c=0;c<u.length;c++){const h=u[c],m=h[3];0==(512&h[2])&&Br(m,1),h[2]|=512}}}(o),function jC(s){for(let o=Ll(s);null!==o;o=C_(o))for(let u=10;u<o.length;u++){const c=o[u],h=c[1];Ro(c)&&ff(h,c,h.template,c[8])}}(o),null!==s.contentQueries&&zw(s,o),v){const x=s.contentCheckHooks;null!==x&&tu(o,x)}else{const x=s.contentHooks;null!==x&&ma(o,x,1),Ah(o,1)}!function Gw(s,o){const u=s.hostBindingOpCodes;if(null!==u)try{for(let c=0;c<u.length;c++){const h=u[c];if(h<0)js(~h);else{const m=h,v=u[++c],C=u[++c];p_(v,m),C(2,o[m])}}}finally{js(-1)}}(s,o);const C=s.components;null!==C&&function PC(s,o){for(let u=0;u<o.length;u++)$C(s,o[u])}(o,C);const D=s.viewQuery;if(null!==D&&$g(2,D,c),v){const x=s.viewCheckHooks;null!==x&&tu(o,x)}else{const x=s.viewHooks;null!==x&&ma(o,x,2),Ah(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[2]&=-41,512&o[2]&&(o[2]&=-513,Br(o[3],-1))}finally{ga()}}}function X_(s,o,u,c,h){const m=on(),v=2&c;try{js(-1),v&&o.length>22&&Rg(s,o,22,!1),u(c,h)}finally{js(m)}}function ey(s,o,u){if(ca(o)){const h=o.directiveEnd;for(let m=o.directiveStart;m<h;m++){const v=s.data[m];v.contentQueries&&v.contentQueries(1,u[m],m)}}}function Hr(s,o,u){!Ih()||(function QS(s,o,u,c){const h=u.directiveStart,m=u.directiveEnd;s.firstCreatePass||ya(u,o),_t(c,o);const v=u.initialInputs;for(let C=h;C<m;C++){const D=s.data[C],x=Yi(D);x&&XS(o,u,D);const N=lu(o,s,C,u);_t(N,o),null!==v&&BC(0,C-h,N,D,0,v),x&&(Yn(u.index,o)[8]=N)}}(s,o,u,li(u,o)),128==(128&u.flags)&&function Bg(s,o,u){const c=u.directiveStart,h=u.directiveEnd,m=u.index,v=function pa(){return Nt.lFrame.currentDirectiveIndex}();try{js(m);for(let C=c;C<h;C++){const D=s.data[C],x=o[C];Lc(C),(null!==D.hostBindings||0!==D.hostVars||null!==D.hostAttrs)&&Kw(D,x)}}finally{js(-1),Lc(v)}}(s,o,u))}function Jr(s,o,u=li){const c=o.localNames;if(null!==c){let h=o.index+1;for(let m=0;m<c.length;m+=2){const v=c[m+1],C=-1===v?u(o,s):s[v];s[h++]=C}}}function Fg(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Lg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts):o}function Lg(s,o,u,c,h,m,v,C,D,x){const N=22+c,L=N+h,G=function KS(s,o){const u=[];for(let c=0;c<o;c++)u.push(c<s?null:Ut);return u}(N,L),Q="function"==typeof x?x():x;return G[1]={type:s,blueprint:G,template:u,queries:null,viewQuery:C,declTNode:o,data:G.slice().fill(null,N),bindingStartIndex:N,expandoStartIndex:L,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof m?m():m,pipeRegistry:"function"==typeof v?v():v,firstChild:null,schemas:D,consts:Q,incompleteFirstPass:!1}}function qw(s,o,u,c){const h=ly(o);null===u?h.push(c):(h.push(u),s.firstCreatePass&&Hg(s).push(c,h.length-1))}function kC(s,o,u){for(let c in s)if(s.hasOwnProperty(c)){const h=s[c];(u=null===u?{}:u).hasOwnProperty(c)?u[c].push(o,h):u[c]=[o,h]}return u}function OC(s,o){const c=o.directiveEnd,h=s.data,m=o.attrs,v=[];let C=null,D=null;for(let x=o.directiveStart;x<c;x++){const N=h[x],L=N.inputs,G=null===m||hC(o)?null:sy(L,m);v.push(G),C=kC(L,x,C),D=kC(N.outputs,x,D)}null!==C&&(C.hasOwnProperty("class")&&(o.flags|=16),C.hasOwnProperty("style")&&(o.flags|=32)),o.initialInputs=v,o.inputs=C,o.outputs=D}function Ai(s,o,u,c,h,m,v,C){const D=li(o,u);let N,x=o.inputs;!C&&null!=x&&(N=x[c])?(Qw(s,u,N,c,h),Yu(o)&&ty(u,o.index)):3&o.type&&(c=function Vg(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(c),h=null!=v?v(h,o.value||"",c):h,m.setProperty(D,c,h))}function ty(s,o){const u=Yn(o,s);16&u[2]||(u[2]|=32)}function Ug(s,o,u,c){let h=!1;if(Ih()){const m=function VC(s,o,u){const c=s.directiveRegistry;let h=null;if(c)for(let m=0;m<c.length;m++){const v=c[m];Tw(u,v.selectors,!1)&&(h||(h=[]),au(ya(u,o),s,v.type),Yi(v)?(Zw(s,u),h.unshift(v)):h.push(v))}return h}(s,o,u),v=null===c?null:{"":-1};if(null!==m){h=!0,UC(u,s.data.length,m.length);for(let N=0;N<m.length;N++){const L=m[N];L.providersResolver&&L.providersResolver(L)}let C=!1,D=!1,x=Dd(s,o,m.length,null);for(let N=0;N<m.length;N++){const L=m[N];u.mergedAttrs=_a(u.mergedAttrs,L.hostAttrs),Td(s,u,o,x,L),JS(x,L,v),null!==L.contentQueries&&(u.flags|=8),(null!==L.hostBindings||null!==L.hostAttrs||0!==L.hostVars)&&(u.flags|=128);const G=L.type.prototype;!C&&(G.ngOnChanges||G.ngOnInit||G.ngDoCheck)&&((s.preOrderHooks||(s.preOrderHooks=[])).push(u.index),C=!0),!D&&(G.ngOnChanges||G.ngDoCheck)&&((s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(u.index),D=!0),x++}OC(s,u)}v&&function iy(s,o,u){if(o){const c=s.localNames=[];for(let h=0;h<o.length;h+=2){const m=u[o[h+1]];if(null==m)throw new Te(-301,!1);c.push(o[h],m)}}}(u,c,v)}return u.mergedAttrs=_a(u.mergedAttrs,u.attrs),h}function ry(s,o,u,c,h,m){const v=m.hostBindings;if(v){let C=s.hostBindingOpCodes;null===C&&(C=s.hostBindingOpCodes=[]);const D=~o.index;(function LC(s){let o=s.length;for(;o>0;){const u=s[--o];if("number"==typeof u&&u<0)return u}return 0})(C)!=D&&C.push(D),C.push(c,h,v)}}function Kw(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function Zw(s,o){o.flags|=2,(s.components||(s.components=[])).push(o.index)}function JS(s,o,u){if(u){if(o.exportAs)for(let c=0;c<o.exportAs.length;c++)u[o.exportAs[c]]=s;Yi(o)&&(u[""]=s)}}function UC(s,o,u){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+u,s.providerIndexes=o}function Td(s,o,u,c,h){s.data[c]=h;const m=h.factory||(h.factory=Vs(h.type)),v=new ru(m,Yi(h),Ze);s.blueprint[c]=v,u[c]=v,ry(s,o,0,c,Dd(s,u,h.hostVars,Ut),h)}function XS(s,o,u){const c=li(o,s),h=Fg(u),m=s[10],v=gf(s,kg(s,h,null,u.onPush?32:16,c,o,m,m.createRenderer(c,u),null,null,null));s[o.index]=v}function Na(s,o,u,c,h,m){const v=li(s,o);!function Ru(s,o,u,c,h,m,v){if(null==m)s.removeAttribute(o,h,u);else{const C=null==v?Ee(m):v(m,c||"",h);s.setAttribute(o,h,C,u)}}(o[11],v,m,s.value,u,c,h)}function BC(s,o,u,c,h,m){const v=m[o];if(null!==v){const C=c.setInput;for(let D=0;D<v.length;){const x=v[D++],N=v[D++],L=v[D++];null!==C?c.setInput(u,L,x,N):u[N]=L}}}function sy(s,o){let u=null,c=0;for(;c<o.length;){const h=o[c];if(0!==h)if(5!==h){if("number"==typeof h)break;s.hasOwnProperty(h)&&(null===u&&(u=[]),u.push(h,s[h],o[c+1])),c+=2}else c+=2;else c+=4}return u}function pf(s,o,u,c){return new Array(s,!0,!1,o,null,0,c,u,null,null)}function $C(s,o){const u=Yn(o,s);if(Ro(u)){const c=u[1];48&u[2]?ff(c,u,c.template,u[8]):u[5]>0&&Sd(u)}}function Sd(s){for(let c=Ll(s);null!==c;c=C_(c))for(let h=10;h<c.length;h++){const m=c[h];if(Ro(m))if(512&m[2]){const v=m[1];ff(v,m,v.template,m[8])}else m[5]>0&&Sd(m)}const u=s[1].components;if(null!==u)for(let c=0;c<u.length;c++){const h=Yn(u[c],s);Ro(h)&&h[5]>0&&Sd(h)}}function oy(s,o){const u=Yn(o,s),c=u[1];(function HC(s,o){for(let u=o.length;u<s.blueprint.length;u++)o.push(s.blueprint[u])})(c,u),Ww(c,u,u[8])}function gf(s,o){return s[13]?s[14][4]=o:s[13]=o,s[14]=o,o}function ay(s){for(;s;){s[2]|=32;const o=od(s);if(da(s)&&!o)return s;s=o}return null}function jg(s,o,u,c=!0){const h=o[10];h.begin&&h.begin();try{ff(s,o,s.template,u)}catch(v){throw c&&Yw(o,v),v}finally{h.end&&h.end()}}function $g(s,o,u){Kr(0),o(s,u)}function ly(s){return s[7]||(s[7]=[])}function Hg(s){return s.cleanup||(s.cleanup=[])}function Yw(s,o){const u=s[9],c=u?u.get(Ag,null):null;c&&c.handleError(o)}function Qw(s,o,u,c,h){for(let m=0;m<u.length;){const v=u[m++],C=u[m++],D=o[v],x=s.data[v];null!==x.setInput?x.setInput(D,h,c,C):D[C]=h}}function Ad(s,o,u){let c=u?s.styles:null,h=u?s.classes:null,m=0;if(null!==o)for(let v=0;v<o.length;v++){const C=o[v];"number"==typeof C?m=C:1==m?h=_e(h,C):2==m&&(c=_e(c,C+": "+o[++v]+";"))}u?s.styles=c:s.stylesWithoutHost=c,u?s.classes=h:s.classesWithoutHost=h}function _f(s,o,u,c,h=!1){for(;null!==u;){const m=o[u.index];if(null!==m&&c.push(Zn(m)),ui(m))for(let C=10;C<m.length;C++){const D=m[C],x=D[1].firstChild;null!==x&&_f(D[1],D,x,c)}const v=u.type;if(8&v)_f(s,o,u.child,c);else if(32&v){const C=Fl(u,o);let D;for(;D=C();)c.push(D)}else if(16&v){const C=ug(o,u);if(Array.isArray(C))c.push(...C);else{const D=od(o[16]);_f(D[1],D,C,c,!0)}}u=h?u.projectionNext:u.next}return c}class yf{constructor(o,u){this._lView=o,this._cdRefInjectingView=u,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const o=this._lView,u=o[1];return _f(u,o,u.firstChild,[])}get context(){return this._lView[8]}set context(o){this._lView[8]=o}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[3];if(ui(o)){const u=o[8],c=u?u.indexOf(this):-1;c>-1&&(Eu(o,c),Qc(u,c))}this._attachedToViewContainer=!1}Iu(this._lView[1],this._lView)}onDestroy(o){qw(this._lView[1],this._lView,null,o)}markForCheck(){ay(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){jg(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Te(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function jI(s,o){cd(s,o,o[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Te(902,!1);this._appRef=o}}class zC extends yf{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;jg(o[1],o,o[8],!1)}checkNoChanges(){}get context(){return null}}class cy extends Tg{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const u=le(o);return new Kl(u,this.ngModule)}}function WC(s){const o=[];for(let u in s)s.hasOwnProperty(u)&&o.push({propName:s[u],templateName:u});return o}class qC{constructor(o,u){this.injector=o,this.parentInjector=u}get(o,u,c){const h=this.injector.get(o,Iw,c);return h!==Iw||u===Iw?h:this.parentInjector.get(o,u,c)}}class Kl extends QI{constructor(o,u){super(),this.componentDef=o,this.ngModule=u,this.componentType=o.type,this.selector=function aP(s){return s.map(oP).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!u}get inputs(){return WC(this.componentDef.inputs)}get outputs(){return WC(this.componentDef.outputs)}create(o,u,c,h){let m=(h=h||this.ngModule)instanceof Ed?h:h?.injector;m&&null!==this.componentDef.getStandaloneInjector&&(m=this.componentDef.getStandaloneInjector(m)||m);const v=m?new qC(o,m):o,C=v.get(ww,null);if(null===C)throw new Te(407,!1);const D=v.get(nC,null),x=C.createRenderer(null,this.componentDef),N=this.componentDef.selectors[0][0]||"div",L=c?function ZS(s,o,u){return s.selectRootElement(o,u===bt.ShadowDom)}(x,c,this.componentDef.encapsulation):ng(x,N,function Gg(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(N)),G=this.componentDef.onPush?288:272,Q=Lg(0,null,null,1,0,null,null,null,null,null),be=kg(null,Q,null,G,null,null,C,x,D,v,null);let Be,Ke;Xa(be);try{const gt=function tA(s,o,u,c,h,m){const v=u[1];u[22]=s;const D=bd(v,22,2,"#host",null),x=D.mergedAttrs=o.hostAttrs;null!==x&&(Ad(D,x,!0),null!==s&&(fl(h,s,x),null!==D.classes&&gg(h,s,D.classes),null!==D.styles&&pg(h,s,D.styles)));const N=c.createRenderer(s,o),L=kg(u,Fg(o),null,o.onPush?32:16,u[22],D,c,N,m||null,null,null);return v.firstCreatePass&&(au(ya(D,u),v,o.type),Zw(v,D),UC(D,u.length,1)),gf(u,L),u[22]=L}(L,this.componentDef,be,C,x);if(L)if(c)fl(x,L,["ng-version",rC.full]);else{const{attrs:Rt,classes:Pe}=function FS(s){const o=[],u=[];let c=1,h=2;for(;c<s.length;){let m=s[c];if("string"==typeof m)2===h?""!==m&&o.push(m,s[++c]):8===h&&u.push(m);else{if(!gn(h))break;h=m}c++}return{attrs:o,classes:u}}(this.componentDef.selectors[0]);Rt&&fl(x,L,Rt),Pe&&Pe.length>0&&gg(x,L,Pe.join(" "))}if(Ke=il(Q,22),void 0!==u){const Rt=Ke.projection=[];for(let Pe=0;Pe<this.ngContentSelectors.length;Pe++){const Ft=u[Pe];Rt.push(null!=Ft?Array.from(Ft):null)}}Be=function KC(s,o,u,c){const h=u[1],m=function ny(s,o,u){const c=Bn();s.firstCreatePass&&(u.providersResolver&&u.providersResolver(u),Td(s,c,o,Dd(s,o,1,null),u),OC(s,c));const h=lu(o,s,c.directiveStart,c);_t(h,o);const m=li(c,o);return m&&_t(m,o),h}(h,u,o);if(s[8]=u[8]=m,null!==c)for(const C of c)C(m,o);if(o.contentQueries){const C=Bn();o.contentQueries(1,m,C.directiveStart)}const v=Bn();return!h.firstCreatePass||null===o.hostBindings&&null===o.hostAttrs||(js(v.index),ry(u[1],v,0,v.directiveStart,v.directiveEnd,o),Kw(o,m)),m}(gt,this.componentDef,be,[ZC]),Ww(Q,be,null)}finally{ga()}return new Jw(this.componentType,Be,nf(Ke,be),be,Ke)}}class Jw extends class TS{}{constructor(o,u,c,h,m){super(),this.location=c,this._rootLView=h,this._tNode=m,this.instance=u,this.hostView=this.changeDetectorRef=new zC(h),this.componentType=o}setInput(o,u){const c=this._tNode.inputs;let h;if(null!==c&&(h=c[o])){const m=this._rootLView;Qw(m[1],m,h,o,u),ty(m,this._tNode.index)}}get injector(){return new bs(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function ZC(){const s=Bn();ko(Ae()[1],s)}function Mu(s){let o=function YC(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),u=!0;const c=[s];for(;o;){let h;if(Yi(s))h=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Te(903,!1);h=o.\u0275dir}if(h){if(u){c.push(h);const v=s;v.inputs=wf(s.inputs),v.declaredInputs=wf(s.declaredInputs),v.outputs=wf(s.outputs);const C=h.hostBindings;C&&Jn(s,C);const D=h.viewQuery,x=h.contentQueries;if(D&&dy(s,D),x&&QC(s,x),pe(s.inputs,h.inputs),pe(s.declaredInputs,h.declaredInputs),pe(s.outputs,h.outputs),Yi(h)&&h.data.animation){const N=s.data;N.animation=(N.animation||[]).concat(h.data.animation)}}const m=h.features;if(m)for(let v=0;v<m.length;v++){const C=m[v];C&&C.ngInherit&&C(s),C===Mu&&(u=!1)}}o=Object.getPrototypeOf(o)}!function Nu(s){let o=0,u=null;for(let c=s.length-1;c>=0;c--){const h=s[c];h.hostVars=o+=h.hostVars,h.hostAttrs=_a(h.hostAttrs,u=_a(u,h.hostAttrs))}}(c)}function wf(s){return s===ir?{}:s===xt?[]:s}function dy(s,o){const u=s.viewQuery;s.viewQuery=u?(c,h)=>{o(c,h),u(c,h)}:o}function QC(s,o){const u=s.contentQueries;s.contentQueries=u?(c,h,m)=>{o(c,h,m),u(c,h,m)}:o}function Jn(s,o){const u=s.hostBindings;s.hostBindings=u?(c,h)=>{o(c,h),u(c,h)}:o}let fy=null;function Zl(){if(!fy){const s=mn.Symbol;if(s&&s.iterator)fy=s.iterator;else{const o=Object.getOwnPropertyNames(Map.prototype);for(let u=0;u<o.length;++u){const c=o[u];"entries"!==c&&"size"!==c&&Map.prototype[c]===Map.prototype.entries&&(fy=c)}}}return fy}function Kg(s){return!!xd(s)&&(Array.isArray(s)||!(s instanceof Map)&&Zl()in s)}function xd(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function xi(s,o,u){return!Object.is(s[o],u)&&(s[o]=u,!0)}function gy(s,o,u,c){const h=Ae();return xi(h,Bs(),o)&&(Gt(),Na(Rn(),h,s,o,u,c)),gy}function Rd(s,o,u,c){return xi(s,Bs(),u)?o+Ee(u)+c:Ut}function e0(s,o,u,c,h,m,v,C){const D=Ae(),x=Gt(),N=s+22,L=x.firstCreatePass?function Cr(s,o,u,c,h,m,v,C,D){const x=o.consts,N=bd(o,s,4,v||null,wi(x,C));Ug(o,u,N,wi(x,D)),ko(o,N);const L=N.tViews=Lg(2,N,c,h,m,o.directiveRegistry,o.pipeRegistry,null,o.schemas,x);return null!==o.queries&&(o.queries.template(o,N),L.queries=o.queries.embeddedTView(N)),N}(N,x,D,o,u,c,h,m,v):x.data[N];Ei(L,!1);const G=D[11].createComment("");Ys(x,D,G,L),_t(G,D),gf(D,D[N]=pf(G,D,G,L)),Ls(L)&&Hr(x,D,L),null!=v&&Jr(D,L,C)}function eb(s){return function ha(s,o){return s[o]}(function jn(){return Nt.lFrame.contextLView}(),22+s)}function t0(s,o,u){const c=Ae();return xi(c,Bs(),o)&&Ai(Gt(),Rn(),c,s,o,c[11],u,!1),t0}function _y(s,o,u,c,h){const v=h?"class":"style";Qw(s,u,o.inputs[v],v,c)}function Qg(s,o,u,c){const h=Ae(),m=Gt(),v=22+s,C=h[11],D=h[v]=ng(C,o,function cl(){return Nt.lFrame.currentNamespace}()),x=m.firstCreatePass?function tb(s,o,u,c,h,m,v){const C=o.consts,x=bd(o,s,2,h,wi(C,m));return Ug(o,u,x,wi(C,v)),null!==x.attrs&&Ad(x,x.attrs,!1),null!==x.mergedAttrs&&Ad(x,x.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,x),x}(v,m,h,0,o,u,c):m.data[v];Ei(x,!0);const N=x.mergedAttrs;null!==N&&fl(C,D,N);const L=x.classes;null!==L&&gg(C,D,L);const G=x.styles;return null!==G&&pg(C,D,G),64!=(64&x.flags)&&Ys(m,h,D,x),0===function Ya(){return Nt.lFrame.elementDepthCount}()&&_t(D,h),function wh(){Nt.lFrame.elementDepthCount++}(),Ls(x)&&(Hr(m,h,x),ey(m,x,h)),null!==c&&Jr(h,x),Qg}function kd(){let s=Bn();fa()?Oc():(s=s.parent,Ei(s,!1));const o=s;!function Eh(){Nt.lFrame.elementDepthCount--}();const u=Gt();return u.firstCreatePass&&(ko(u,s),ca(s)&&u.queries.elementEnd(s)),null!=o.classesWithoutHost&&function xh(s){return 0!=(16&s.flags)}(o)&&_y(u,o,Ae(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function Op(s){return 0!=(32&s.flags)}(o)&&_y(u,o,Ae(),o.stylesWithoutHost,!1),kd}function yy(s,o,u,c){return Qg(s,o,u,c),kd(),yy}function Jg(s,o,u){const c=Ae(),h=Gt(),m=s+22,v=h.firstCreatePass?function Pa(s,o,u,c,h){const m=o.consts,v=wi(m,c),C=bd(o,s,8,"ng-container",v);return null!==v&&Ad(C,v,!0),Ug(o,u,C,wi(m,h)),null!==o.queries&&o.queries.elementStart(o,C),C}(m,h,c,o,u):h.data[m];Ei(v,!0);const C=c[m]=c[11].createComment("");return Ys(h,c,C,v),_t(C,c),Ls(v)&&(Hr(h,c,v),ey(h,v,c)),null!=u&&Jr(c,v),Jg}function vy(){let s=Bn();const o=Gt();return fa()?Oc():(s=s.parent,Ei(s,!1)),o.firstCreatePass&&(ko(o,s),ca(s)&&o.queries.elementEnd(s)),vy}function wy(){return Ae()}function Od(s){return!!s&&"function"==typeof s.then}function r0(s){return!!s&&"function"==typeof s.subscribe}const Ey=r0;function Af(s,o,u,c){const h=Ae(),m=Gt(),v=Bn();return function nb(s,o,u,c,h,m,v,C){const D=Ls(c),N=s.firstCreatePass&&Hg(s),L=o[8],G=ly(o);let Q=!0;if(3&c.type||C){const Ke=li(c,o),gt=C?C(Ke):Ke,Rt=G.length,Pe=C?ln=>C(Zn(ln[c.index])):c.index;let Ft=null;if(!C&&D&&(Ft=function Iy(s,o,u,c){const h=s.cleanup;if(null!=h)for(let m=0;m<h.length-1;m+=2){const v=h[m];if(v===u&&h[m+1]===c){const C=o[7],D=h[m+2];return C.length>D?C[D]:null}"string"==typeof v&&(m+=2)}return null}(s,o,h,c.index)),null!==Ft)(Ft.__ngLastListenerFn__||Ft).__ngNextListenerFn__=m,Ft.__ngLastListenerFn__=m,Q=!1;else{m=xf(c,o,L,m,!1);const ln=u.listen(gt,h,m);G.push(m,ln),N&&N.push(h,Pe,Rt,Rt+1)}}else m=xf(c,o,L,m,!1);const be=c.outputs;let Be;if(Q&&null!==be&&(Be=be[h])){const Ke=Be.length;if(Ke)for(let gt=0;gt<Ke;gt+=2){const Wn=o[Be[gt]][Be[gt+1]].subscribe(m),pc=G.length;G.push(m,Wn),N&&N.push(h,c.index,pc,-(pc+1))}}}(m,h,h[11],v,s,o,0,c),Af}function o0(s,o,u,c){try{return!1!==u(c)}catch(h){return Yw(s,h),!1}}function xf(s,o,u,c,h){return function m(v){if(v===Function)return c;ay(2&s.flags?Yn(s.index,o):o);let D=o0(o,0,c,v),x=m.__ngNextListenerFn__;for(;x;)D=o0(o,0,x,v)&&D,x=x.__ngNextListenerFn__;return h&&!1===D&&(v.preventDefault(),v.returnValue=!1),D}}function a0(s=1){return function ll(s){return(Nt.lFrame.contextLView=function g_(s,o){for(;s>0;)o=o[15],s--;return o}(s,Nt.lFrame.contextLView))[8]}(s)}function Cy(s,o,u){return Rf(s,"",o,"",u),Cy}function Rf(s,o,u,c,h){const m=Ae(),v=Rd(m,o,u,c);return v!==Ut&&Ai(Gt(),Rn(),m,s,v,m[11],h,!1),Rf}function Fd(s,o,u,c,h){const m=s[u+1],v=null===o;let C=c?us(m):Au(m),D=!1;for(;0!==C&&(!1===D||v);){const N=s[C+1];oA(s[C],o)&&(D=!0,s[C+1]=c?cf(N):Fw(N)),C=c?us(N):Au(N)}D&&(s[u+1]=c?Fw(m):cf(m))}function oA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&fu(s,o)>=0}function Ld(s,o){return function Jo(s,o,u,c){const h=Ae(),m=Gt(),v=function Ci(s){const o=Nt.lFrame,u=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,u}(2);m.firstUpdatePass&&function lb(s,o,u,c){const h=s.data;if(null===h[u+1]){const m=h[on()],v=function ub(s,o){return o>=s.expandoStartIndex}(s,u);(function br(s,o){return 0!=(s.flags&(o?16:32))})(m,c)&&null===o&&!v&&(o=!1),o=function cb(s,o,u,c){const h=function Qa(s){const o=Nt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let m=c?o.residualClasses:o.residualStyles;if(null===h)0===(c?o.classBindings:o.styleBindings)&&(u=La(u=v0(null,s,o,u,c),o.attrs,c),m=null);else{const v=o.directiveStylingLast;if(-1===v||s[v]!==h)if(u=v0(h,s,o,u,c),null===m){let D=function uA(s,o,u){const c=u?o.classBindings:o.styleBindings;if(0!==Au(c))return s[us(c)]}(s,o,c);void 0!==D&&Array.isArray(D)&&(D=v0(null,s,o,D[1],c),D=La(D,o.attrs,c),function Sy(s,o,u,c){s[us(u?o.classBindings:o.styleBindings)]=c}(s,o,c,D))}else m=function lA(s,o,u){let c;const h=o.directiveEnd;for(let m=1+o.directiveStylingLast;m<h;m++)c=La(c,s[m].hostAttrs,u);return La(c,o.attrs,u)}(s,o,c)}return void 0!==m&&(c?o.residualClasses=m:o.residualStyles=m),u}(h,m,o,c),function ib(s,o,u,c,h,m){let v=m?o.classBindings:o.styleBindings,C=us(v),D=Au(v);s[c]=u;let N,x=!1;if(Array.isArray(u)){const L=u;N=L[1],(null===N||fu(L,N)>0)&&(x=!0)}else N=u;if(h)if(0!==D){const G=us(s[C+1]);s[c+1]=Cd(G,C),0!==G&&(s[G+1]=Lw(s[G+1],c)),s[C+1]=function Ow(s,o){return 131071&s|o<<17}(s[C+1],c)}else s[c+1]=Cd(C,0),0!==C&&(s[C+1]=Lw(s[C+1],c)),C=c;else s[c+1]=Cd(D,0),0===C?C=c:s[D+1]=Lw(s[D+1],c),D=c;x&&(s[c+1]=Fw(s[c+1])),Fd(s,N,c,!0),Fd(s,N,c,!1),function sb(s,o,u,c,h){const m=h?s.residualClasses:s.residualStyles;null!=m&&"string"==typeof o&&fu(m,o)>=0&&(u[c+1]=cf(u[c+1]))}(o,N,s,c,m),v=Cd(C,D),m?o.classBindings=v:o.styleBindings=v}(h,m,o,u,v,c)}}(m,s,v,c),o!==Ut&&xi(h,v,o)&&function Pu(s,o,u,c,h,m,v,C){if(!(3&o.type))return;const D=s.data,x=D[C+1];xy(function Ti(s){return 1==(1&s)}(x)?Ay(D,o,u,h,Au(x),v):void 0)||(xy(m)||function IC(s){return 2==(2&s)}(x)&&(m=Ay(D,null,u,h,C,v)),function fg(s,o,u,c,h){if(o)h?s.addClass(u,c):s.removeClass(u,c);else{let m=-1===c.indexOf("-")?void 0:ss.DashCase;null==h?s.removeStyle(u,c,m):("string"==typeof h&&h.endsWith("!important")&&(h=h.slice(0,-10),m|=ss.Important),s.setStyle(u,c,h,m))}}(c,v,Fi(on(),u),h,m))}(m,m.data[on()],h,h[11],s,h[v+1]=function Ve(s,o){return null==s||("string"==typeof o?s+=o:"object"==typeof s&&(s=Ie(Er(s)))),s}(o,u),c,v)}(s,o,null,!0),Ld}function v0(s,o,u,c,h){let m=null;const v=u.directiveEnd;let C=u.directiveStylingLast;for(-1===C?C=u.directiveStart:C++;C<v&&(m=o[C],c=La(c,m.hostAttrs,h),m!==s);)C++;return null!==s&&(u.directiveStylingLast=C),c}function La(s,o,u){const c=u?1:2;let h=-1;if(null!==o)for(let m=0;m<o.length;m++){const v=o[m];"number"==typeof v?h=v:h===c&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),bi(s,v,!!u||o[++m]))}return void 0===s?null:s}function Ay(s,o,u,c,h,m){const v=null===o;let C;for(;h>0;){const D=s[h],x=Array.isArray(D),N=x?D[1]:D,L=null===N;let G=u[h+1];G===Ut&&(G=L?xt:void 0);let Q=L?Cl(G,c):N===c?G:void 0;if(x&&!xy(Q)&&(Q=Cl(D,c)),xy(Q)&&(C=Q,v))return C;const be=s[h+1];h=v?us(be):Au(be)}if(null!==o){let D=m?o.residualClasses:o.residualStyles;null!=D&&(C=Cl(D,c))}return C}function xy(s){return void 0!==s}function no(s,o=""){const u=Ae(),c=Gt(),h=s+22,m=c.firstCreatePass?bd(c,h,1,o,null):c.data[h],v=u[h]=function ad(s,o){return s.createText(o)}(u[11],o);Ys(c,u,v,m),Ei(m,!1)}function tm(s){return nt("",s,""),tm}function nt(s,o,u){const c=Ae(),h=Rd(c,s,o,u);return h!==Ut&&function Zo(s,o,u){const c=Fi(o,s);!function $h(s,o,u){s.setValue(o,u)}(s[11],c,u)}(c,on(),h),nt}const ku=void 0;var wb=["en",[["a","p"],["AM","PM"],ku],[["AM","PM"],ku,ku],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],ku,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],ku,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",ku,"{1} 'at' {0}",ku],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function vb(s){const u=Math.floor(Math.abs(s)),c=s.toString().replace(/^[^.]*\.?/,"").length;return 1===u&&0===c?1:5}];let ro={};function se(s){const o=function _A(s){return s.toLowerCase().replace(/_/g,"-")}(s);let u=Ib(o);if(u)return u;const c=o.split("-")[0];if(u=Ib(c),u)return u;if("en"===c)return wb;throw new Te(701,!1)}function bo(s){return se(s)[Tt.PluralCase]}function Ib(s){return s in ro||(ro[s]=mn.ng&&mn.ng.common&&mn.ng.common.locales&&mn.ng.common.locales[s]),ro[s]}var Tt=(()=>((Tt=Tt||{})[Tt.LocaleId=0]="LocaleId",Tt[Tt.DayPeriodsFormat=1]="DayPeriodsFormat",Tt[Tt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Tt[Tt.DaysFormat=3]="DaysFormat",Tt[Tt.DaysStandalone=4]="DaysStandalone",Tt[Tt.MonthsFormat=5]="MonthsFormat",Tt[Tt.MonthsStandalone=6]="MonthsStandalone",Tt[Tt.Eras=7]="Eras",Tt[Tt.FirstDayOfWeek=8]="FirstDayOfWeek",Tt[Tt.WeekendRange=9]="WeekendRange",Tt[Tt.DateFormat=10]="DateFormat",Tt[Tt.TimeFormat=11]="TimeFormat",Tt[Tt.DateTimeFormat=12]="DateTimeFormat",Tt[Tt.NumberSymbols=13]="NumberSymbols",Tt[Tt.NumberFormats=14]="NumberFormats",Tt[Tt.CurrencyCode=15]="CurrencyCode",Tt[Tt.CurrencySymbol=16]="CurrencySymbol",Tt[Tt.CurrencyName=17]="CurrencyName",Tt[Tt.Currencies=18]="Currencies",Tt[Tt.Directionality=19]="Directionality",Tt[Tt.PluralCase=20]="PluralCase",Tt[Tt.ExtraData=21]="ExtraData",Tt))();const tc="en-US";let b0=tc;function Qt(s,o,u,c,h){if(s=Z(s),Array.isArray(s))for(let m=0;m<s.length;m++)Qt(s[m],o,u,c,h);else{const m=Gt(),v=Ae();let C=Tu(s)?s:Z(s.provide),D=bg(s);const x=Bn(),N=1048575&x.providerIndexes,L=x.directiveStart,G=x.providerIndexes>>20;if(Tu(s)||!s.multi){const Q=new ru(D,h,Ze),be=hm(C,o,h?N:N+G,L);-1===be?(au(ya(x,v),m,C),En(m,s,o.length),o.push(C),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),u.push(Q),v.push(Q)):(u[be]=Q,v[be]=Q)}else{const Q=hm(C,o,N+G,L),be=hm(C,o,N,N+G),Be=Q>=0&&u[Q],Ke=be>=0&&u[be];if(h&&!Ke||!h&&!Be){au(ya(x,v),m,C);const gt=function Bb(s,o,u,c,h){const m=new ru(s,u,Ze);return m.multi=[],m.index=o,m.componentProviders=0,Hd(m,h,c&&!u),m}(h?Ub:k0,u.length,h,c,D);!h&&Ke&&(u[be].providerFactory=gt),En(m,s,o.length,0),o.push(C),x.directiveStart++,x.directiveEnd++,h&&(x.providerIndexes+=1048576),u.push(gt),v.push(gt)}else En(m,s,Q>-1?Q:be,Hd(u[h?be:Q],D,!h&&c));!h&&c&&Ke&&u[be].componentProviders++}}}function En(s,o,u,c){const h=Tu(o),m=function KI(s){return!!s.useClass}(o);if(h||m){const D=(m?Z(o.useClass):o).prototype.ngOnDestroy;if(D){const x=s.destroyHooks||(s.destroyHooks=[]);if(!h&&o.multi){const N=x.indexOf(u);-1===N?x.push(u,[c,D]):x[N+1].push(c,D)}else x.push(u,D)}}}function Hd(s,o,u){return u&&s.componentProviders++,s.multi.push(o)-1}function hm(s,o,u,c){for(let h=u;h<c;h++)if(o[h]===s)return h;return-1}function k0(s,o,u,c){return fm(this.multi,[])}function Ub(s,o,u,c){const h=this.multi;let m;if(this.providerFactory){const v=this.providerFactory.componentProviders,C=lu(u,u[1],this.providerFactory.index,c);m=C.slice(0,v),fm(h,m);for(let D=v;D<C.length;D++)m.push(C[D])}else m=[],fm(h,m);return m}function fm(s,o){for(let u=0;u<s.length;u++)o.push((0,s[u])());return o}function O0(s,o=[]){return u=>{u.providersResolver=(c,h)=>function Vb(s,o,u){const c=Gt();if(c.firstCreatePass){const h=Yi(s);Qt(u,c.data,c.blueprint,h,!0),Qt(o,c.data,c.blueprint,h,!1)}}(c,h?h(s):s,o)}}class Gd{}class jb{}function FA(s,o){return new F0(s,o??null)}class F0 extends Gd{constructor(o,u){super(),this._parent=u,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new cy(this);const c=Lt(o);this._bootstrapComponents=Su(c.bootstrap),this._r3Injector=_C(o,u,[{provide:Gd,useValue:this},{provide:Tg,useValue:this.componentFactoryResolver}],Ie(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(u=>u()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class L0 extends jb{constructor(o){super(),this.moduleType=o}create(o){return new F0(this.moduleType,o)}}class $b extends Gd{constructor(o,u,c){super(),this.componentFactoryResolver=new cy(this),this.instance=null;const h=new Cg([...o,{provide:Gd,useValue:this},{provide:Tg,useValue:this.componentFactoryResolver}],u||k_(),c,new Set(["environment"]));this.injector=h,h.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function V0(s,o,u=null){return new $b(s,o,u).injector}let LA=(()=>{class s{constructor(u){this._injector=u,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(u){if(!u.standalone)return null;if(!this.cachedInjectors.has(u.id)){const c=zI(0,u.type),h=c.length>0?V0([c],this._injector,`Standalone[${u.type.name}]`):null;this.cachedInjectors.set(u.id,h)}return this.cachedInjectors.get(u.id)}ngOnDestroy(){try{for(const u of this.cachedInjectors.values())null!==u&&u.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=ye({token:s,providedIn:"environment",factory:()=>new s(Qn(Ed))}),s})();function Hb(s){s.getStandaloneInjector=o=>o.get(LA).getOrCreateStandaloneInjector(s)}function Bf(s,o,u){const c=function qr(){const s=Nt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,h=Ae();return h[c]===Ut?function Yo(s,o,u){return s[o]=u}(h,c,u?o.call(u):o()):function Ef(s,o){return s[o]}(h,c)}function z0(s){return o=>{setTimeout(s,void 0,o)}}const na=class GA extends f.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,u,c){let h=o,m=u||(()=>null),v=c;if(o&&"object"==typeof o){const D=o;h=D.next?.bind(D),m=D.error?.bind(D),v=D.complete?.bind(D)}this.__isAsync&&(m=z0(m),h&&(h=z0(h)),v&&(v=z0(v)));const C=super.subscribe({next:h,error:m,complete:v});return o instanceof ee.w0&&o.add(C),C}};function Gf(){return this._results[Zl()]()}class Uu{constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const u=Zl(),c=Uu.prototype;c[u]||(c[u]=Gf)}get changes(){return this._changes||(this._changes=new na)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,u){return this._results.reduce(o,u)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,u){const c=this;c.dirty=!1;const h=sr(o);(this._changesDetected=!function zp(s,o,u){if(s.length!==o.length)return!1;for(let c=0;c<s.length;c++){let h=s[c],m=o[c];if(u&&(h=u(h),m=u(m)),m!==h)return!1}return!0}(c._results,h,u))&&(c._results=h,c.length=h.length,c.last=h[this.length-1],c.first=h[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let zf=(()=>{class s{}return s.__NG_ELEMENT_ID__=Wf,s})();const Wd=zf,Xb=class extends Wd{constructor(o,u,c){super(),this._declarationLView=o,this._declarationTContainer=u,this.elementRef=c}createEmbeddedView(o,u){const c=this._declarationTContainer.tViews,h=kg(this._declarationLView,c,o,16,null,c.declTNode,null,null,null,null,u||null);h[17]=this._declarationLView[this._declarationTContainer.index];const v=this._declarationLView[19];return null!==v&&(h[19]=v.createEmbeddedView(c)),Ww(c,h,o),new yf(h)}};function Wf(){return ym(Bn(),Ae())}function ym(s,o){return 4&s.type?new Xb(o,s,nf(s,o)):null}let vm=(()=>{class s{}return s.__NG_ELEMENT_ID__=wm,s})();function wm(){return Em(Bn(),Ae())}const zA=vm,eD=class extends zA{constructor(o,u,c){super(),this._lContainer=o,this._hostTNode=u,this._hostLView=c}get element(){return nf(this._hostTNode,this._hostLView)}get injector(){return new bs(this._hostTNode,this._hostLView)}get parentInjector(){const o=Lo(this._hostTNode,this._hostLView);if(Gc(o)){const u=Es(o,this._hostLView),c=iu(o);return new bs(u[1].data[c+8],u)}return new bs(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const u=er(this._lContainer);return null!==u&&u[o]||null}get length(){return this._lContainer.length-10}createEmbeddedView(o,u,c){let h,m;"number"==typeof c?h=c:null!=c&&(h=c.index,m=c.injector);const v=o.createEmbeddedView(u||{},m);return this.insert(v,h),v}createComponent(o,u,c,h,m){const v=o&&!function Vi(s){return"function"==typeof s}(o);let C;if(v)C=u;else{const L=u||{};C=L.index,c=L.injector,h=L.projectableNodes,m=L.environmentInjector||L.ngModuleRef}const D=v?o:new Kl(le(o)),x=c||this.parentInjector;if(!m&&null==D.ngModule){const G=(v?x:this.parentInjector).get(Ed,null);G&&(m=G)}const N=D.create(x,h,void 0,m);return this.insert(N.hostView,C),N}insert(o,u){const c=o._lView,h=c[1];if(function Pc(s){return ui(s[3])}(c)){const N=this.indexOf(o);if(-1!==N)this.detach(N);else{const L=c[3],G=new eD(L,L[6],L[3]);G.detach(G.indexOf(o))}}const m=this._adjustIndex(u),v=this._lContainer;!function rg(s,o,u,c){const h=10+c,m=u.length;c>0&&(u[h-1][4]=o),c<m-10?(o[4]=u[h],Yc(u,10+c,o)):(u.push(o),o[4]=null),o[3]=u;const v=o[17];null!==v&&u!==v&&function lw(s,o){const u=s[9];o[16]!==o[3][3][16]&&(s[2]=!0),null===u?s[9]=[o]:u.push(o)}(v,o);const C=o[19];null!==C&&C.insertView(s),o[2]|=64}(h,c,v,m);const C=Kh(m,v),D=c[11],x=zh(D,v[7]);return null!==x&&function ud(s,o,u,c,h,m){c[0]=h,c[6]=o,cd(s,c,u,1,h,m)}(h,v[6],D,c,x,C),o.attachToViewContainerRef(),Yc(qf(v),m,o),o}move(o,u){return this.insert(o,u)}indexOf(o){const u=er(this._lContainer);return null!==u?u.indexOf(o):-1}remove(o){const u=this._adjustIndex(o,-1),c=Eu(this._lContainer,u);c&&(Qc(qf(this._lContainer),u),Iu(c[1],c))}detach(o){const u=this._adjustIndex(o,-1),c=Eu(this._lContainer,u);return c&&null!=Qc(qf(this._lContainer),u)?new yf(c):null}_adjustIndex(o,u=0){return o??this.length+u}};function er(s){return s[8]}function qf(s){return s[8]||(s[8]=[])}function Em(s,o){let u;const c=o[s.index];if(ui(c))u=c;else{let h;if(8&s.type)h=Zn(c);else{const m=o[11];h=m.createComment("");const v=li(s,o);qo(m,zh(m,v),h,function og(s,o){return s.nextSibling(o)}(m,v),!1)}o[s.index]=u=pf(c,o,h,s),gf(o,u)}return new eD(u,s,o)}class W0{constructor(o){this.queryList=o,this.matches=null}clone(){return new W0(this.queryList)}setDirty(){this.queryList.setDirty()}}class zy{constructor(o=[]){this.queries=o}createEmbeddedView(o){const u=o.queries;if(null!==u){const c=null!==o.contentQueries?o.contentQueries[0]:u.length,h=[];for(let m=0;m<c;m++){const v=u.getByIndex(m);h.push(this.queries[v.indexInDeclarationView].clone())}return new zy(h)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let u=0;u<this.queries.length;u++)null!==Cm(o,u).matches&&this.queries[u].setDirty()}}class qd{constructor(o,u,c=null){this.predicate=o,this.flags=u,this.read=c}}class ra{constructor(o=[]){this.queries=o}elementStart(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].elementStart(o,u)}elementEnd(o){for(let u=0;u<this.queries.length;u++)this.queries[u].elementEnd(o)}embeddedTView(o){let u=null;for(let c=0;c<this.length;c++){const h=null!==u?u.length:0,m=this.getByIndex(c).embeddedTView(o,h);m&&(m.indexInDeclarationView=c,null!==u?u.push(m):u=[m])}return null!==u?new ra(u):null}template(o,u){for(let c=0;c<this.queries.length;c++)this.queries[c].template(o,u)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class Wy{constructor(o,u=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=u}elementStart(o,u){this.isApplyingToNode(u)&&this.matchTNode(o,u)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,u){this.elementStart(o,u)}embeddedTView(o,u){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,u),new Wy(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const u=this._declarationNodeIndex;let c=o.parent;for(;null!==c&&8&c.type&&c.index!==u;)c=c.parent;return u===(null!==c?c.index:-1)}return this._appliesToNextNode}matchTNode(o,u){const c=this.metadata.predicate;if(Array.isArray(c))for(let h=0;h<c.length;h++){const m=c[h];this.matchTNodeWithReadOption(o,u,nD(u,m)),this.matchTNodeWithReadOption(o,u,Cs(u,o,m,!1,!1))}else c===zf?4&u.type&&this.matchTNodeWithReadOption(o,u,-1):this.matchTNodeWithReadOption(o,u,Cs(u,o,c,!1,!1))}matchTNodeWithReadOption(o,u,c){if(null!==c){const h=this.metadata.read;if(null!==h)if(h===Sg||h===vm||h===zf&&4&u.type)this.addMatch(u.index,-2);else{const m=Cs(u,o,h,!1,!1);null!==m&&this.addMatch(u.index,m)}else this.addMatch(u.index,c)}}addMatch(o,u){null===this.matches?this.matches=[o,u]:this.matches.push(o,u)}}function nD(s,o){const u=s.localNames;if(null!==u)for(let c=0;c<u.length;c+=2)if(u[c]===o)return u[c+1];return null}function Kf(s,o,u,c){return-1===u?function rD(s,o){return 11&s.type?nf(s,o):4&s.type?ym(s,o):null}(o,s):-2===u?function q0(s,o,u){return u===Sg?nf(o,s):u===zf?ym(o,s):u===vm?Em(o,s):void 0}(s,o,c):lu(s,s[1],u,o)}function qy(s,o,u,c){const h=o[19].queries[c];if(null===h.matches){const m=s.data,v=u.matches,C=[];for(let D=0;D<v.length;D+=2){const x=v[D];C.push(x<0?null:Kf(o,m[x],v[D+1],u.metadata.read))}h.matches=C}return h.matches}function Im(s,o,u,c){const h=s.queries.getByIndex(u),m=h.matches;if(null!==m){const v=qy(s,o,h,u);for(let C=0;C<m.length;C+=2){const D=m[C];if(D>0)c.push(v[C/2]);else{const x=m[C+1],N=o[-D];for(let L=10;L<N.length;L++){const G=N[L];G[17]===G[3]&&Im(G[1],G,x,c)}if(null!==N[9]){const L=N[9];for(let G=0;G<L.length;G++){const Q=L[G];Im(Q[1],Q,x,c)}}}}}return c}function Ky(s){const o=Ae(),u=Gt(),c=ul();Kr(c+1);const h=Cm(u,c);if(s.dirty&&function f_(s){return 4==(4&s[2])}(o)===(2==(2&h.metadata.flags))){if(null===h.matches)s.reset([]);else{const m=h.crossesNgTemplate?Im(u,o,c,[]):qy(u,o,h,c);s.reset(m,XI),s.notifyOnChanges()}return!0}return!1}function iD(s,o,u,c){const h=Gt();if(h.firstCreatePass){const m=Bn();(function Z0(s,o,u){null===s.queries&&(s.queries=new ra),s.queries.track(new Wy(o,u))})(h,new qd(o,u,c),m.index),function Y0(s,o){const u=s.contentQueries||(s.contentQueries=[]);o!==(u.length?u[u.length-1]:-1)&&u.push(s.queries.length-1,o)}(h,s),2==(2&u)&&(h.staticContentQueries=!0)}!function K0(s,o,u){const c=new Uu(4==(4&u));qw(s,o,c,c.destroy),null===o[19]&&(o[19]=new zy),o[19].queries.push(new W0(c))}(h,Ae(),u)}function Pr(){return function un(s,o){return s[19].queries[o].queryList}(Ae(),ul())}function Cm(s,o){return s.queries.getByIndex(o)}function Dm(...s){}const ov=new pn("Application Initializer");let Tm=(()=>{class s{constructor(u){this.appInits=u,this.resolve=Dm,this.reject=Dm,this.initialized=!1,this.done=!1,this.donePromise=new Promise((c,h)=>{this.resolve=c,this.reject=h})}runInitializers(){if(this.initialized)return;const u=[],c=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let h=0;h<this.appInits.length;h++){const m=this.appInits[h]();if(Od(m))u.push(m);else if(Ey(m)){const v=new Promise((C,D)=>{m.subscribe({complete:C,error:D})});u.push(v)}}Promise.all(u).then(()=>{c()}).catch(h=>{this.reject(h)}),0===u.length&&c(),this.initialized=!0}}return s.\u0275fac=function(u){return new(u||s)(Qn(ov,8))},s.\u0275prov=ye({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const sE=new pn("AppId",{providedIn:"root",factory:function _D(){return`${av()}${av()}${av()}`}});function av(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Sm=new pn("Platform Initializer"),Am=new pn("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),uc=new pn("appBootstrapListener");let lx=(()=>{class s{log(u){console.log(u)}warn(u){console.warn(u)}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ye({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const uv=new pn("LocaleId",{providedIn:"root",factory:()=>vt(uv,ct.Optional|ct.SkipSelf)||function cx(){return typeof $localize<"u"&&$localize.locale||tc}()}),xm=new pn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hx{constructor(o,u){this.ngModuleFactory=o,this.componentFactories=u}}let yD=(()=>{class s{compileModuleSync(u){return new L0(u)}compileModuleAsync(u){return Promise.resolve(this.compileModuleSync(u))}compileModuleAndAllComponentsSync(u){const c=this.compileModuleSync(u),m=Su(Lt(u).declarations).reduce((v,C)=>{const D=le(C);return D&&v.push(new Kl(D)),v},[]);return new hx(c,m)}compileModuleAndAllComponentsAsync(u){return Promise.resolve(this.compileModuleAndAllComponentsSync(u))}clearCache(){}clearCacheFor(u){}getModuleId(u){}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ye({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();const cv=(()=>Promise.resolve(0))();function uE(s){typeof Zone>"u"?cv.then(()=>{s&&s.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",s)}class hs{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:u=!1,shouldCoalesceRunChangeDetection:c=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new na(!1),this.onMicrotaskEmpty=new na(!1),this.onStable=new na(!1),this.onError=new na(!1),typeof Zone>"u")throw new Te(908,!1);Zone.assertZonePatched();const h=this;if(h._nesting=0,h._outer=h._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const m=Zone.AsyncStackTaggingZoneSpec;h._inner=h._inner.fork(new m("Angular"))}Zone.TaskTrackingZoneSpec&&(h._inner=h._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(h._inner=h._inner.fork(Zone.longStackTraceZoneSpec)),h.shouldCoalesceEventChangeDetection=!c&&u,h.shouldCoalesceRunChangeDetection=c,h.lastRequestAnimationFrameId=-1,h.nativeRequestAnimationFrame=function lE(){let s=mn.requestAnimationFrame,o=mn.cancelAnimationFrame;if(typeof Zone<"u"&&s&&o){const u=s[Zone.__symbol__("OriginalDelegate")];u&&(s=u);const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c)}return{nativeRequestAnimationFrame:s,nativeCancelAnimationFrame:o}}().nativeRequestAnimationFrame,function hv(s){const o=()=>{!function Rm(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(mn,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,Qd(s),s.isCheckStableRunning=!0,dv(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),Qd(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(u,c,h,m,v,C)=>{try{return cE(s),u.invokeTask(h,m,v,C)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===m.type||s.shouldCoalesceRunChangeDetection)&&o(),dE(s)}},onInvoke:(u,c,h,m,v,C,D)=>{try{return cE(s),u.invoke(h,m,v,C,D)}finally{s.shouldCoalesceRunChangeDetection&&o(),dE(s)}},onHasTask:(u,c,h,m)=>{u.hasTask(h,m),c===h&&("microTask"==m.change?(s._hasPendingMicrotasks=m.microTask,Qd(s),dv(s)):"macroTask"==m.change&&(s.hasPendingMacrotasks=m.macroTask))},onHandleError:(u,c,h,m)=>(u.handleError(h,m),s.runOutsideAngular(()=>s.onError.emit(m)),!1)})}(h)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!hs.isInAngularZone())throw new Te(909,!1)}static assertNotInAngularZone(){if(hs.isInAngularZone())throw new Te(909,!1)}run(o,u,c){return this._inner.run(o,u,c)}runTask(o,u,c,h){const m=this._inner,v=m.scheduleEventTask("NgZoneEvent: "+h,o,px,Dm,Dm);try{return m.runTask(v,u,c)}finally{m.cancelTask(v)}}runGuarded(o,u,c){return this._inner.runGuarded(o,u,c)}runOutsideAngular(o){return this._outer.run(o)}}const px={};function dv(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function Qd(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function cE(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function dE(s){s._nesting--,dv(s)}class Gi{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new na,this.onMicrotaskEmpty=new na,this.onStable=new na,this.onError=new na}run(o,u,c){return o.apply(u,c)}runGuarded(o,u,c){return o.apply(u,c)}runOutsideAngular(o){return o()}runTask(o,u,c,h){return o.apply(u,c)}}const hE=new pn(""),Mm=new pn("");let cc,fv=(()=>{class s{constructor(u,c,h){this._ngZone=u,this.registry=c,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,cc||(function lc(s){cc=s}(h),h.addToWindow(c)),this._watchAngularEvents(),u.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{hs.assertNotInAngularZone(),uE(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())uE(()=>{for(;0!==this._callbacks.length;){let u=this._callbacks.pop();clearTimeout(u.timeoutId),u.doneCb(this._didWork)}this._didWork=!1});else{let u=this.getPendingTasks();this._callbacks=this._callbacks.filter(c=>!c.updateCb||!c.updateCb(u)||(clearTimeout(c.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(u=>({source:u.source,creationLocation:u.creationLocation,data:u.data})):[]}addCallback(u,c,h){let m=-1;c&&c>0&&(m=setTimeout(()=>{this._callbacks=this._callbacks.filter(v=>v.timeoutId!==m),u(this._didWork,this.getPendingTasks())},c)),this._callbacks.push({doneCb:u,timeoutId:m,updateCb:h})}whenStable(u,c,h){if(h&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(u,c,h),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(u){this.registry.registerApplication(u,this)}unregisterApplication(u){this.registry.unregisterApplication(u)}findProviders(u,c,h){return[]}}return s.\u0275fac=function(u){return new(u||s)(Qn(hs),Qn(fE),Qn(Mm))},s.\u0275prov=ye({token:s,factory:s.\u0275fac}),s})(),fE=(()=>{class s{constructor(){this._applications=new Map}registerApplication(u,c){this._applications.set(u,c)}unregisterApplication(u){this._applications.delete(u)}unregisterAllApplications(){this._applications.clear()}getTestability(u){return this._applications.get(u)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(u,c=!0){return cc?.findTestabilityInTree(this,u,c)??null}}return s.\u0275fac=function(u){return new(u||s)},s.\u0275prov=ye({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),$u=null;const dc=new pn("AllowMultipleToken"),pE=new pn("PlatformDestroyListeners");class gx{constructor(o,u){this.name=o,this.token=u}}function Nm(s,o,u=[]){const c=`Platform: ${o}`,h=new pn(c);return(m=[])=>{let v=mE();if(!v||v.injector.get(dc,!1)){const C=[...u,...m,{provide:h,useValue:!0}];s?s(C):function CD(s){if($u&&!$u.get(dc,!1))throw new Te(400,!1);$u=s;const o=s.get(_E);(function gE(s){const o=s.get(Sm,null);o&&o.forEach(u=>u())})(s)}(function DD(s=[],o){return Wl.create({name:o,providers:[{provide:Ig,useValue:"platform"},{provide:pE,useValue:new Set([()=>$u=null])},...s]})}(C,c))}return function bD(s){const o=mE();if(!o)throw new Te(401,!1);return o}()}}function mE(){return $u?.get(_E)??null}let _E=(()=>{class s{constructor(u){this._injector=u,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(u,c){const h=function np(s,o){let u;return u="noop"===s?new Gi:("zone.js"===s?void 0:s)||new hs(o),u}(c?.ngZone,function hc(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!s||!s.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!s||!s.ngZoneRunCoalescing)||!1}}(c)),m=[{provide:hs,useValue:h}];return h.run(()=>{const v=Wl.create({providers:m,parent:this.injector,name:u.moduleType.name}),C=u.create(v),D=C.injector.get(Ag,null);if(!D)throw new Te(402,!1);return h.runOutsideAngular(()=>{const x=h.onError.subscribe({next:N=>{D.handleError(N)}});C.onDestroy(()=>{Pm(this._modules,C),x.unsubscribe()})}),function yE(s,o,u){try{const c=u();return Od(c)?c.catch(h=>{throw o.runOutsideAngular(()=>s.handleError(h)),h}):c}catch(c){throw o.runOutsideAngular(()=>s.handleError(c)),c}}(D,h,()=>{const x=C.injector.get(Tm);return x.runInitializers(),x.donePromise.then(()=>(function Ri(s){ie(s,"Expected localeId to be defined"),"string"==typeof s&&(b0=s.toLowerCase().replace(/_/g,"-"))}(C.injector.get(uv,tc)||tc),this._moduleDoBootstrap(C),C))})})}bootstrapModule(u,c=[]){const h=vE({},c);return function ED(s,o,u){const c=new L0(u);return Promise.resolve(c)}(0,0,u).then(m=>this.bootstrapModuleFactory(m,h))}_moduleDoBootstrap(u){const c=u.injector.get(pv);if(u._bootstrapComponents.length>0)u._bootstrapComponents.forEach(h=>c.bootstrap(h));else{if(!u.instance.ngDoBootstrap)throw new Te(403,!1);u.instance.ngDoBootstrap(c)}this._modules.push(u)}onDestroy(u){this._destroyListeners.push(u)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Te(404,!1);this._modules.slice().forEach(c=>c.destroy()),this._destroyListeners.forEach(c=>c());const u=this._injector.get(pE,null);u&&(u.forEach(c=>c()),u.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(u){return new(u||s)(Qn(Wl))},s.\u0275prov=ye({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function vE(s,o){return Array.isArray(o)?o.reduce(vE,s):{...s,...o}}let pv=(()=>{class s{constructor(u,c,h){this._zone=u,this._injector=c,this._exceptionHandler=h,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const m=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),v=new F.y(C=>{let D;this._zone.runOutsideAngular(()=>{D=this._zone.onStable.subscribe(()=>{hs.assertNotInAngularZone(),uE(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const x=this._zone.onUnstable.subscribe(()=>{hs.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{D.unsubscribe(),x.unsubscribe()}});this.isStable=(0,ue.T)(m,v.pipe((0,ae.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(u,c){const h=u instanceof QI;if(!this._injector.get(Tm).done)throw!h&&Mt(u),new Te(405,false);let v;v=h?u:this._injector.get(Tg).resolveComponentFactory(u),this.componentTypes.push(v.componentType);const C=function ID(s){return s.isBoundToModule}(v)?void 0:this._injector.get(Gd),x=v.create(Wl.NULL,[],c||v.selector,C),N=x.location.nativeElement,L=x.injector.get(hE,null);return L?.registerApplication(N),x.onDestroy(()=>{this.detachView(x.hostView),Pm(this.components,x),L?.unregisterApplication(N)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new Te(101,!1);try{this._runningTick=!0;for(let u of this._views)u.detectChanges()}catch(u){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(u))}finally{this._runningTick=!1}}attachView(u){const c=u;this._views.push(c),c.attachToAppRef(this)}detachView(u){const c=u;Pm(this._views,c),c.detachFromAppRef()}_loadComponent(u){this.attachView(u.hostView),this.tick(),this.components.push(u),this._injector.get(uc,[]).concat(this._bootstrapListeners).forEach(h=>h(u))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(u=>u()),this._views.slice().forEach(u=>u.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(u){return this._destroyListeners.push(u),()=>Pm(this._destroyListeners,u)}destroy(){if(this._destroyed)throw new Te(406,!1);const u=this._injector;u.destroy&&!u.destroyed&&u.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(u){return new(u||s)(Qn(hs),Qn(Ed),Qn(Ag))},s.\u0275prov=ye({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Pm(s,o){const u=s.indexOf(o);u>-1&&s.splice(u,1)}let gv=!0,ti=!1;function vx(){return ti=!0,gv}function wx(){if(ti)throw new Error("Cannot enable prod mode after platform setup.");gv=!1}let Ex=(()=>{class s{}return s.__NG_ELEMENT_ID__=_v,s})();function _v(s){return function yv(s,o,u){if(Yu(s)&&!u){const c=Yn(s.index,o);return new yf(c,c)}return 47&s.type?new yf(o[16],o):null}(Bn(),Ae(),16==(16&s))}class DE{constructor(){}supports(o){return Kg(o)}create(o){return new kD(o)}}const PD=(s,o)=>o;class kD{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||PD}forEachItem(o){let u;for(u=this._itHead;null!==u;u=u._next)o(u)}forEachOperation(o){let u=this._itHead,c=this._removalsHead,h=0,m=null;for(;u||c;){const v=!c||u&&u.currentIndex<Cv(c,h,m)?u:c,C=Cv(v,h,m),D=v.currentIndex;if(v===c)h--,c=c._nextRemoved;else if(u=u._next,null==v.previousIndex)h++;else{m||(m=[]);const x=C-h,N=D-h;if(x!=N){for(let G=0;G<x;G++){const Q=G<m.length?m[G]:m[G]=0,be=Q+G;N<=be&&be<x&&(m[G]=Q+1)}m[v.previousIndex]=N-x}}C!==D&&o(v,C,D)}}forEachPreviousItem(o){let u;for(u=this._previousItHead;null!==u;u=u._nextPrevious)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachMovedItem(o){let u;for(u=this._movesHead;null!==u;u=u._nextMoved)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}forEachIdentityChange(o){let u;for(u=this._identityChangesHead;null!==u;u=u._nextIdentityChange)o(u)}diff(o){if(null==o&&(o=[]),!Kg(o))throw new Te(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let h,m,v,u=this._itHead,c=!1;if(Array.isArray(o)){this.length=o.length;for(let C=0;C<this.length;C++)m=o[C],v=this._trackByFn(C,m),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,m,v,C)),Object.is(u.item,m)||this._addIdentityChange(u,m)):(u=this._mismatch(u,m,v,C),c=!0),u=u._next}else h=0,function rA(s,o){if(Array.isArray(s))for(let u=0;u<s.length;u++)o(s[u]);else{const u=s[Zl()]();let c;for(;!(c=u.next()).done;)o(c.value)}}(o,C=>{v=this._trackByFn(h,C),null!==u&&Object.is(u.trackById,v)?(c&&(u=this._verifyReinsertion(u,C,v,h)),Object.is(u.item,C)||this._addIdentityChange(u,C)):(u=this._mismatch(u,C,v,h),c=!0),u=u._next,h++}),this.length=h;return this._truncate(u),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,u,c,h){let m;return null===o?m=this._itTail:(m=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._reinsertAfter(o,m,h)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(c,h))?(Object.is(o.item,u)||this._addIdentityChange(o,u),this._moveAfter(o,m,h)):o=this._addAfter(new Cx(u,c),m,h),o}_verifyReinsertion(o,u,c,h){let m=null===this._unlinkedRecords?null:this._unlinkedRecords.get(c,null);return null!==m?o=this._reinsertAfter(m,o._prev,h):o.currentIndex!=h&&(o.currentIndex=h,this._addToMoves(o,h)),o}_truncate(o){for(;null!==o;){const u=o._next;this._addToRemovals(this._unlink(o)),o=u}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,u,c){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const h=o._prevRemoved,m=o._nextRemoved;return null===h?this._removalsHead=m:h._nextRemoved=m,null===m?this._removalsTail=h:m._prevRemoved=h,this._insertAfter(o,u,c),this._addToMoves(o,c),o}_moveAfter(o,u,c){return this._unlink(o),this._insertAfter(o,u,c),this._addToMoves(o,c),o}_addAfter(o,u,c){return this._insertAfter(o,u,c),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,u,c){const h=null===u?this._itHead:u._next;return o._next=h,o._prev=u,null===h?this._itTail=o:h._prev=o,null===u?this._itHead=o:u._next=o,null===this._linkedRecords&&(this._linkedRecords=new OD),this._linkedRecords.put(o),o.currentIndex=c,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const u=o._prev,c=o._next;return null===u?this._itHead=c:u._next=c,null===c?this._itTail=u:c._prev=u,o}_addToMoves(o,u){return o.previousIndex===u||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new OD),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,u){return o.item=u,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class Cx{constructor(o,u){this.item=o,this.trackById=u,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class TE{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,u){let c;for(c=this._head;null!==c;c=c._nextDup)if((null===u||u<=c.currentIndex)&&Object.is(c.trackById,o))return c;return null}remove(o){const u=o._prevDup,c=o._nextDup;return null===u?this._head=c:u._nextDup=c,null===c?this._tail=u:c._prevDup=u,null===this._head}}class OD{constructor(){this.map=new Map}put(o){const u=o.trackById;let c=this.map.get(u);c||(c=new TE,this.map.set(u,c)),c.add(o)}get(o,u){const h=this.map.get(o);return h?h.get(o,u):null}remove(o){const u=o.trackById;return this.map.get(u).remove(o)&&this.map.delete(u),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Cv(s,o,u){const c=s.previousIndex;if(null===c)return c;let h=0;return u&&c<u.length&&(h=u[c]),c+o+h}class SE{constructor(){}supports(o){return o instanceof Map||xd(o)}create(){return new FD}}class FD{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let u;for(u=this._mapHead;null!==u;u=u._next)o(u)}forEachPreviousItem(o){let u;for(u=this._previousMapHead;null!==u;u=u._nextPrevious)o(u)}forEachChangedItem(o){let u;for(u=this._changesHead;null!==u;u=u._nextChanged)o(u)}forEachAddedItem(o){let u;for(u=this._additionsHead;null!==u;u=u._nextAdded)o(u)}forEachRemovedItem(o){let u;for(u=this._removalsHead;null!==u;u=u._nextRemoved)o(u)}diff(o){if(o){if(!(o instanceof Map||xd(o)))throw new Te(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let u=this._mapHead;if(this._appendAfter=null,this._forEach(o,(c,h)=>{if(u&&u.key===h)this._maybeAddToChanges(u,c),this._appendAfter=u,u=u._next;else{const m=this._getOrCreateRecordForKey(h,c);u=this._insertBeforeOrAppend(u,m)}}),u){u._prev&&(u._prev._next=null),this._removalsHead=u;for(let c=u;null!==c;c=c._nextRemoved)c===this._mapHead&&(this._mapHead=null),this._records.delete(c.key),c._nextRemoved=c._next,c.previousValue=c.currentValue,c.currentValue=null,c._prev=null,c._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,u){if(o){const c=o._prev;return u._next=o,u._prev=c,o._prev=u,c&&(c._next=u),o===this._mapHead&&(this._mapHead=u),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=u,u._prev=this._appendAfter):this._mapHead=u,this._appendAfter=u,null}_getOrCreateRecordForKey(o,u){if(this._records.has(o)){const h=this._records.get(o);this._maybeAddToChanges(h,u);const m=h._prev,v=h._next;return m&&(m._next=v),v&&(v._prev=m),h._next=null,h._prev=null,h}const c=new AE(o);return this._records.set(o,c),c.currentValue=u,this._addToAdditions(c),c}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,u){Object.is(u,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=u,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,u){o instanceof Map?o.forEach(u):Object.keys(o).forEach(c=>u(o[c],c))}}class AE{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Lm(){return new Xd([new DE])}let Xd=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(null!=c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||Lm()),deps:[[s,new Go,new po]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(null!=c)return c;throw new Te(901,!1)}}return s.\u0275prov=ye({token:s,providedIn:"root",factory:Lm}),s})();function bv(){return new Vm([new SE])}let Vm=(()=>{class s{constructor(u){this.factories=u}static create(u,c){if(c){const h=c.factories.slice();u=u.concat(h)}return new s(u)}static extend(u){return{provide:s,useFactory:c=>s.create(u,c||bv()),deps:[[s,new Go,new po]]}}find(u){const c=this.factories.find(h=>h.supports(u));if(c)return c;throw new Te(901,!1)}}return s.\u0275prov=ye({token:s,providedIn:"root",factory:bv}),s})();const Dv=Nm(null,"core",[]);let ME=(()=>{class s{constructor(u){}}return s.\u0275fac=function(u){return new(u||s)(Qn(pv))},s.\u0275mod=yi({type:s}),s.\u0275inj=kt({}),s})();function Dx(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}},3942:(Et,Me,V)=>{V.d(Me,{Z:()=>Te});var f=V(2090),ee=V(4859),F=V(6881),ue=V(1877);class ae{constructor(Ee,we){this._delegate=Ee,this.firebase=we,(0,F._addComponent)(Ee,new ee.wA("app-compat",()=>this,"PUBLIC")),this.container=Ee.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Ee){this._delegate.automaticDataCollectionEnabled=Ee}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(Ee=>{this._delegate.checkDestroyed(),Ee()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(Ee,we=F._DEFAULT_ENTRY_NAME){var yt;this._delegate.checkDestroyed();const St=this._delegate.container.getProvider(Ee);return!St.isInitialized()&&"EXPLICIT"===(null===(yt=St.getComponent())||void 0===yt?void 0:yt.instantiationMode)&&St.initialize(),St.getImmediate({identifier:we})}_removeServiceInstance(Ee,we=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(Ee).clearInstance(we)}_addComponent(Ee){(0,F._addComponent)(this._delegate,Ee)}_addOrOverwriteComponent(Ee){(0,F._addOrOverwriteComponent)(this._delegate,Ee)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const pe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),z=function _e(){const rt=function Ie(rt){const Ee={},we={__esModule:!0,initializeApp:function Fe(je,it={}){const re=F.initializeApp(je,it);if((0,f.r3)(Ee,re.name))return Ee[re.name];const Pt=new rt(re,we);return Ee[re.name]=Pt,Pt},app:St,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function ve(je){const it=je.name,re=it.replace("-compat","");if(F._registerComponent(je)&&"PUBLIC"===je.type){const Pt=(ut=St())=>{if("function"!=typeof ut[re])throw pe.create("invalid-app-argument",{appName:it});return ut[re]()};void 0!==je.serviceProps&&(0,f.ZB)(Pt,je.serviceProps),we[re]=Pt,rt.prototype[re]=function(...ut){return this._getService.bind(this,it).apply(this,je.multipleInstances?ut:[])}}return"PUBLIC"===je.type?we[re]:null},removeApp:function yt(je){delete Ee[je]},useAsService:function ze(je,it){return"serverAuth"===it?null:it},modularAPIs:F}};function St(je){if(!(0,f.r3)(Ee,je=je||F._DEFAULT_ENTRY_NAME))throw pe.create("no-app",{appName:je});return Ee[je]}return we.default=we,Object.defineProperty(we,"apps",{get:function Ce(){return Object.keys(Ee).map(je=>Ee[je])}}),St.App=rt,we}(ae);return rt.INTERNAL=Object.assign(Object.assign({},rt.INTERNAL),{createFirebaseNamespace:_e,extendNamespace:function Ee(we){(0,f.ZB)(rt,we)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),rt}(),H=new ue.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const rt=self.firebase.SDK_VERSION;rt&&rt.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const Te=z;!function Ne(rt){(0,F.registerVersion)("@firebase/app-compat","0.2.13",rt)}()},6881:(Et,Me,V)=>{V.r(Me),V.d(Me,{FirebaseError:()=>ue.ZR,SDK_VERSION:()=>Ao,_DEFAULT_ENTRY_NAME:()=>Pi,_addComponent:()=>st,_addOrOverwriteComponent:()=>bt,_apps:()=>Dn,_clearComponents:()=>ir,_components:()=>rn,_getProvider:()=>ys,_registerComponent:()=>mn,_removeServiceInstance:()=>oi,deleteApp:()=>Ki,getApp:()=>yr,getApps:()=>Fr,initializeApp:()=>tn,onLog:()=>vs,registerVersion:()=>Lr,setLogLevel:()=>qn});var f=V(5861),ee=V(4859),F=V(1877),ue=V(2090);let ge,pe;const z=new WeakMap,H=new WeakMap,Z=new WeakMap,He=new WeakMap,Ne=new WeakMap;let Ee={get(oe,ne,Oe){if(oe instanceof IDBTransaction){if("done"===ne)return H.get(oe);if("objectStoreNames"===ne)return oe.objectStoreNames||Z.get(oe);if("store"===ne)return Oe.objectStoreNames[1]?void 0:Oe.objectStore(Oe.objectStoreNames[0])}return Fe(oe[ne])},set:(oe,ne,Oe)=>(oe[ne]=Oe,!0),has:(oe,ne)=>oe instanceof IDBTransaction&&("done"===ne||"store"===ne)||ne in oe};function St(oe){return"function"==typeof oe?function yt(oe){return oe!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return pe||(pe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(oe)?function(...ne){return oe.apply(Ce(this),ne),Fe(z.get(this))}:function(...ne){return Fe(oe.apply(Ce(this),ne))}:function(ne,...Oe){const Le=oe.call(Ce(this),ne,...Oe);return Z.set(Le,ne.sort?ne.sort():[ne]),Fe(Le)}}(oe):(oe instanceof IDBTransaction&&function rt(oe){if(H.has(oe))return;const ne=new Promise((Oe,Le)=>{const At=()=>{oe.removeEventListener("complete",Vt),oe.removeEventListener("error",sn),oe.removeEventListener("abort",sn)},Vt=()=>{Oe(),At()},sn=()=>{Le(oe.error||new DOMException("AbortError","AbortError")),At()};oe.addEventListener("complete",Vt),oe.addEventListener("error",sn),oe.addEventListener("abort",sn)});H.set(oe,ne)}(oe),((oe,ne)=>ne.some(Oe=>oe instanceof Oe))(oe,function Ie(){return ge||(ge=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(oe,Ee):oe)}function Fe(oe){if(oe instanceof IDBRequest)return function Te(oe){const ne=new Promise((Oe,Le)=>{const At=()=>{oe.removeEventListener("success",Vt),oe.removeEventListener("error",sn)},Vt=()=>{Oe(Fe(oe.result)),At()},sn=()=>{Le(oe.error),At()};oe.addEventListener("success",Vt),oe.addEventListener("error",sn)});return ne.then(Oe=>{Oe instanceof IDBCursor&&z.set(Oe,oe)}).catch(()=>{}),Ne.set(ne,oe),ne}(oe);if(He.has(oe))return He.get(oe);const ne=St(oe);return ne!==oe&&(He.set(oe,ne),Ne.set(ne,oe)),ne}const Ce=oe=>Ne.get(oe),je=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],re=new Map;function Pt(oe,ne){if(!(oe instanceof IDBDatabase)||ne in oe||"string"!=typeof ne)return;if(re.get(ne))return re.get(ne);const Oe=ne.replace(/FromIndex$/,""),Le=ne!==Oe,At=it.includes(Oe);if(!(Oe in(Le?IDBIndex:IDBObjectStore).prototype)||!At&&!je.includes(Oe))return;const Vt=function(){var sn=(0,f.Z)(function*(On,...Kt){const Ur=this.transaction(On,At?"readwrite":"readonly");let ki=Ur.store;return Le&&(ki=ki.index(Kt.shift())),(yield Promise.all([ki[Oe](...Kt),At&&Ur.done]))[0]});return function(Kt){return sn.apply(this,arguments)}}();return re.set(ne,Vt),Vt}!function we(oe){Ee=oe(Ee)}(oe=>({...oe,get:(ne,Oe,Le)=>Pt(ne,Oe)||oe.get(ne,Oe,Le),has:(ne,Oe)=>!!Pt(ne,Oe)||oe.has(ne,Oe)}));class ut{constructor(ne){this.container=ne}getPlatformInfoString(){return this.container.getProviders().map(Oe=>{if(function Ht(oe){return"VERSION"===oe.getComponent()?.type}(Oe)){const Le=Oe.getImmediate();return`${Le.library}/${Le.version}`}return null}).filter(Oe=>Oe).join(" ")}}const at="@firebase/app",_i=new F.Yd("@firebase/app"),Pi="[DEFAULT]",_r={[at]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Dn=new Map,rn=new Map;function st(oe,ne){try{oe.container.addComponent(ne)}catch(Oe){_i.debug(`Component ${ne.name} failed to register with FirebaseApp ${oe.name}`,Oe)}}function bt(oe,ne){oe.container.addOrOverwriteComponent(ne)}function mn(oe){const ne=oe.name;if(rn.has(ne))return _i.debug(`There were multiple attempts to register component ${ne}.`),!1;rn.set(ne,oe);for(const Oe of Dn.values())st(Oe,oe);return!0}function ys(oe,ne){const Oe=oe.container.getProvider("heartbeat").getImmediate({optional:!0});return Oe&&Oe.triggerHeartbeat(),oe.container.getProvider(ne)}function oi(oe,ne,Oe=Pi){ys(oe,ne).clearInstance(Oe)}function ir(){rn.clear()}const xr=new ue.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class hn{constructor(ne,Oe,Le){this._isDeleted=!1,this._options=Object.assign({},ne),this._config=Object.assign({},Oe),this._name=Oe.name,this._automaticDataCollectionEnabled=Oe.automaticDataCollectionEnabled,this._container=Le,this.container.addComponent(new ee.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(ne){this.checkDestroyed(),this._automaticDataCollectionEnabled=ne}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(ne){this._isDeleted=ne}checkDestroyed(){if(this.isDeleted)throw xr.create("app-deleted",{appName:this._name})}}const Ao="9.23.0";function tn(oe,ne={}){let Oe=oe;"object"!=typeof ne&&(ne={name:ne});const Le=Object.assign({name:Pi,automaticDataCollectionEnabled:!1},ne),At=Le.name;if("string"!=typeof At||!At)throw xr.create("bad-app-name",{appName:String(At)});if(Oe||(Oe=(0,ue.aH)()),!Oe)throw xr.create("no-options");const Vt=Dn.get(At);if(Vt){if((0,ue.vZ)(Oe,Vt.options)&&(0,ue.vZ)(Le,Vt.config))return Vt;throw xr.create("duplicate-app",{appName:At})}const sn=new ee.H0(At);for(const Kt of rn.values())sn.addComponent(Kt);const On=new hn(Oe,Le,sn);return Dn.set(At,On),On}function yr(oe=Pi){const ne=Dn.get(oe);if(!ne&&oe===Pi&&(0,ue.aH)())return tn();if(!ne)throw xr.create("no-app",{appName:oe});return ne}function Fr(){return Array.from(Dn.values())}function Ki(oe){return Un.apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(oe){const ne=oe.name;Dn.has(ne)&&(Dn.delete(ne),yield Promise.all(oe.container.getProviders().map(Oe=>Oe.delete())),oe.isDeleted=!0)})).apply(this,arguments)}function Lr(oe,ne,Oe){var Le;let At=null!==(Le=_r[oe])&&void 0!==Le?Le:oe;Oe&&(At+=`-${Oe}`);const Vt=At.match(/\s|\//),sn=ne.match(/\s|\//);if(Vt||sn){const On=[`Unable to register library "${At}" with version "${ne}":`];return Vt&&On.push(`library name "${At}" contains illegal characters (whitespace or "/")`),Vt&&sn&&On.push("and"),sn&&On.push(`version name "${ne}" contains illegal characters (whitespace or "/")`),void _i.warn(On.join(" "))}mn(new ee.wA(`${At}-version`,()=>({library:At,version:ne}),"VERSION"))}function vs(oe,ne){if(null!==oe&&"function"!=typeof oe)throw xr.create("invalid-log-argument");(0,F.Am)(oe,ne)}function qn(oe){(0,F.Ub)(oe)}const j="firebase-heartbeat-store";let B=null;function K(){return B||(B=function ve(oe,ne,{blocked:Oe,upgrade:Le,blocking:At,terminated:Vt}={}){const sn=indexedDB.open(oe,ne),On=Fe(sn);return Le&&sn.addEventListener("upgradeneeded",Kt=>{Le(Fe(sn.result),Kt.oldVersion,Kt.newVersion,Fe(sn.transaction),Kt)}),Oe&&sn.addEventListener("blocked",Kt=>Oe(Kt.oldVersion,Kt.newVersion,Kt)),On.then(Kt=>{Vt&&Kt.addEventListener("close",()=>Vt()),At&&Kt.addEventListener("versionchange",Ur=>At(Ur.oldVersion,Ur.newVersion,Ur))}).catch(()=>{}),On}("firebase-heartbeat-database",1,{upgrade:(oe,ne)=>{0===ne&&oe.createObjectStore(j)}}).catch(oe=>{throw xr.create("idb-open",{originalErrorMessage:oe.message})})),B}function X(){return(X=(0,f.Z)(function*(oe){try{return yield(yield K()).transaction(j).objectStore(j).get(Lt(oe))}catch(ne){if(ne instanceof ue.ZR)_i.warn(ne.message);else{const Oe=xr.create("idb-get",{originalErrorMessage:ne?.message});_i.warn(Oe.message)}}})).apply(this,arguments)}function We(oe,ne){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,f.Z)(function*(oe,ne){try{const Le=(yield K()).transaction(j,"readwrite");yield Le.objectStore(j).put(ne,Lt(oe)),yield Le.done}catch(Oe){if(Oe instanceof ue.ZR)_i.warn(Oe.message);else{const Le=xr.create("idb-set",{originalErrorMessage:Oe?.message});_i.warn(Le.message)}}})).apply(this,arguments)}function Lt(oe){return`${oe.name}!${oe.options.appId}`}class dt{constructor(ne){this.container=ne,this._heartbeatsCache=null;const Oe=this.container.getProvider("app").getImmediate();this._storage=new Vr(Oe),this._heartbeatsCachePromise=this._storage.read().then(Le=>(this._heartbeatsCache=Le,Le))}triggerHeartbeat(){var ne=this;return(0,f.Z)(function*(){const Le=ne.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),At=Ct();if(null===ne._heartbeatsCache&&(ne._heartbeatsCache=yield ne._heartbeatsCachePromise),ne._heartbeatsCache.lastSentHeartbeatDate!==At&&!ne._heartbeatsCache.heartbeats.some(Vt=>Vt.date===At))return ne._heartbeatsCache.heartbeats.push({date:At,agent:Le}),ne._heartbeatsCache.heartbeats=ne._heartbeatsCache.heartbeats.filter(Vt=>{const sn=new Date(Vt.date).valueOf();return Date.now()-sn<=2592e6}),ne._storage.overwrite(ne._heartbeatsCache)})()}getHeartbeatsHeader(){var ne=this;return(0,f.Z)(function*(){if(null===ne._heartbeatsCache&&(yield ne._heartbeatsCachePromise),null===ne._heartbeatsCache||0===ne._heartbeatsCache.heartbeats.length)return"";const Oe=Ct(),{heartbeatsToSend:Le,unsentEntries:At}=function _n(oe,ne=1024){const Oe=[];let Le=oe.slice();for(const At of oe){const Vt=Oe.find(sn=>sn.agent===At.agent);if(Vt){if(Vt.dates.push(At.date),yn(Oe)>ne){Vt.dates.pop();break}}else if(Oe.push({agent:At.agent,dates:[At.date]}),yn(Oe)>ne){Oe.pop();break}Le=Le.slice(1)}return{heartbeatsToSend:Oe,unsentEntries:Le}}(ne._heartbeatsCache.heartbeats),Vt=(0,ue.L)(JSON.stringify({version:2,heartbeats:Le}));return ne._heartbeatsCache.lastSentHeartbeatDate=Oe,At.length>0?(ne._heartbeatsCache.heartbeats=At,yield ne._storage.overwrite(ne._heartbeatsCache)):(ne._heartbeatsCache.heartbeats=[],ne._storage.overwrite(ne._heartbeatsCache)),Vt})()}}function Ct(){return(new Date).toISOString().substring(0,10)}class Vr{constructor(ne){this.app=ne,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,ue.hl)()&&(0,ue.eu)().then(()=>!0).catch(()=>!1)})()}read(){var ne=this;return(0,f.Z)(function*(){return(yield ne._canUseIndexedDBPromise)&&(yield function le(oe){return X.apply(this,arguments)}(ne.app))||{heartbeats:[]}})()}overwrite(ne){var Oe=this;return(0,f.Z)(function*(){var Le;if(yield Oe._canUseIndexedDBPromise){const Vt=yield Oe.read();return We(Oe.app,{lastSentHeartbeatDate:null!==(Le=ne.lastSentHeartbeatDate)&&void 0!==Le?Le:Vt.lastSentHeartbeatDate,heartbeats:ne.heartbeats})}})()}add(ne){var Oe=this;return(0,f.Z)(function*(){var Le;if(yield Oe._canUseIndexedDBPromise){const Vt=yield Oe.read();return We(Oe.app,{lastSentHeartbeatDate:null!==(Le=ne.lastSentHeartbeatDate)&&void 0!==Le?Le:Vt.lastSentHeartbeatDate,heartbeats:[...Vt.heartbeats,...ne.heartbeats]})}})()}}function yn(oe){return(0,ue.L)(JSON.stringify({version:2,heartbeats:oe})).length}!function Zi(oe){mn(new ee.wA("platform-logger",ne=>new ut(ne),"PRIVATE")),mn(new ee.wA("heartbeat",ne=>new dt(ne),"PRIVATE")),Lr(at,"0.9.13",oe),Lr(at,"0.9.13","esm2017"),Lr("fire-js","")}("")},4859:(Et,Me,V)=>{V.d(Me,{H0:()=>Ie,wA:()=>F,zt:()=>ae});var f=V(5861),ee=V(2090);class F{constructor(z,H,Z){this.name=z,this.instanceFactory=H,this.type=Z,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(z){return this.instantiationMode=z,this}setMultipleInstances(z){return this.multipleInstances=z,this}setServiceProps(z){return this.serviceProps=z,this}setInstanceCreatedCallback(z){return this.onInstanceCreated=z,this}}const ue="[DEFAULT]";class ae{constructor(z,H){this.name=z,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(z){const H=this.normalizeInstanceIdentifier(z);if(!this.instancesDeferred.has(H)){const Z=new ee.BH;if(this.instancesDeferred.set(H,Z),this.isInitialized(H)||this.shouldAutoInitialize())try{const He=this.getOrInitializeService({instanceIdentifier:H});He&&Z.resolve(He)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(z){var H;const Z=this.normalizeInstanceIdentifier(z?.identifier),He=null!==(H=z?.optional)&&void 0!==H&&H;if(!this.isInitialized(Z)&&!this.shouldAutoInitialize()){if(He)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Z})}catch(Ne){if(He)return null;throw Ne}}getComponent(){return this.component}setComponent(z){if(z.name!==this.name)throw Error(`Mismatching Component ${z.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=z,this.shouldAutoInitialize()){if(function pe(_e){return"EAGER"===_e.instantiationMode}(z))try{this.getOrInitializeService({instanceIdentifier:ue})}catch{}for(const[H,Z]of this.instancesDeferred.entries()){const He=this.normalizeInstanceIdentifier(H);try{const Ne=this.getOrInitializeService({instanceIdentifier:He});Z.resolve(Ne)}catch{}}}}clearInstance(z=ue){this.instancesDeferred.delete(z),this.instancesOptions.delete(z),this.instances.delete(z)}delete(){var z=this;return(0,f.Z)(function*(){const H=Array.from(z.instances.values());yield Promise.all([...H.filter(Z=>"INTERNAL"in Z).map(Z=>Z.INTERNAL.delete()),...H.filter(Z=>"_delete"in Z).map(Z=>Z._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(z=ue){return this.instances.has(z)}getOptions(z=ue){return this.instancesOptions.get(z)||{}}initialize(z={}){const{options:H={}}=z,Z=this.normalizeInstanceIdentifier(z.instanceIdentifier);if(this.isInitialized(Z))throw Error(`${this.name}(${Z}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const He=this.getOrInitializeService({instanceIdentifier:Z,options:H});for(const[Ne,Te]of this.instancesDeferred.entries())Z===this.normalizeInstanceIdentifier(Ne)&&Te.resolve(He);return He}onInit(z,H){var Z;const He=this.normalizeInstanceIdentifier(H),Ne=null!==(Z=this.onInitCallbacks.get(He))&&void 0!==Z?Z:new Set;Ne.add(z),this.onInitCallbacks.set(He,Ne);const Te=this.instances.get(He);return Te&&z(Te,He),()=>{Ne.delete(z)}}invokeOnInitCallbacks(z,H){const Z=this.onInitCallbacks.get(H);if(Z)for(const He of Z)try{He(z,H)}catch{}}getOrInitializeService({instanceIdentifier:z,options:H={}}){let Z=this.instances.get(z);if(!Z&&this.component&&(Z=this.component.instanceFactory(this.container,{instanceIdentifier:(_e=z,_e===ue?void 0:_e),options:H}),this.instances.set(z,Z),this.instancesOptions.set(z,H),this.invokeOnInitCallbacks(Z,z),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,z,Z)}catch{}var _e;return Z||null}normalizeInstanceIdentifier(z=ue){return this.component?this.component.multipleInstances?z:ue:z}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ie{constructor(z){this.name=z,this.providers=new Map}addComponent(z){const H=this.getProvider(z.name);if(H.isComponentSet())throw new Error(`Component ${z.name} has already been registered with ${this.name}`);H.setComponent(z)}addOrOverwriteComponent(z){this.getProvider(z.name).isComponentSet()&&this.providers.delete(z.name),this.addComponent(z)}getProvider(z){if(this.providers.has(z))return this.providers.get(z);const H=new ae(z,this);return this.providers.set(z,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Et,Me,V)=>{V.d(Me,{Am:()=>_e,Ub:()=>Ie,Yd:()=>pe,in:()=>ee});const f=[];var ee=(()=>{return(z=ee||(ee={}))[z.DEBUG=0]="DEBUG",z[z.VERBOSE=1]="VERBOSE",z[z.INFO=2]="INFO",z[z.WARN=3]="WARN",z[z.ERROR=4]="ERROR",z[z.SILENT=5]="SILENT",ee;var z})();const F={debug:ee.DEBUG,verbose:ee.VERBOSE,info:ee.INFO,warn:ee.WARN,error:ee.ERROR,silent:ee.SILENT},ue=ee.INFO,ae={[ee.DEBUG]:"log",[ee.VERBOSE]:"log",[ee.INFO]:"info",[ee.WARN]:"warn",[ee.ERROR]:"error"},ge=(z,H,...Z)=>{if(H<z.logLevel)return;const He=(new Date).toISOString(),Ne=ae[H];if(!Ne)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Ne](`[${He}]  ${z.name}:`,...Z)};class pe{constructor(H){this.name=H,this._logLevel=ue,this._logHandler=ge,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in ee))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,ee.DEBUG,...H),this._logHandler(this,ee.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,ee.VERBOSE,...H),this._logHandler(this,ee.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,ee.INFO,...H),this._logHandler(this,ee.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,ee.WARN,...H),this._logHandler(this,ee.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,ee.ERROR,...H),this._logHandler(this,ee.ERROR,...H)}}function Ie(z){f.forEach(H=>{H.setLogLevel(z)})}function _e(z,H){for(const Z of f){let He=null;H&&H.level&&(He=F[H.level]),Z.userLogHandler=null===z?null:(Ne,Te,...rt)=>{const Ee=rt.map(we=>{if(null==we)return null;if("string"==typeof we)return we;if("number"==typeof we||"boolean"==typeof we)return we.toString();if(we instanceof Error)return we.message;try{return JSON.stringify(we)}catch{return null}}).filter(we=>we).join(" ");Te>=(He??Ne.logLevel)&&z({level:ee[Te].toLowerCase(),message:Ee,args:rt,type:Ne.name})}}}},259:(Et,Me,V)=>{V.d(Me,{C6:()=>f.getApps,Mq:()=>f.getApp});var f=V(6881);(0,f.registerVersion)("firebase","9.23.0","app")},9260:(Et,Me,V)=>{V.d(Me,{Z:()=>f.Z});var f=V(3942);f.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(Et,Me,V)=>{V.r(Me);var f=V(5861),ee=V(3942),F=V(2090),ue=V(6881),ae=V(7582),ge=V(1877),pe=V(4859);const Te=function He(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},rt=function Ne(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ee=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),yt=new ge.Yd("@firebase/auth");function Fe(y,...p){yt.logLevel<=ge.in.ERROR&&yt.error(`Auth (${ue.SDK_VERSION}): ${y}`,...p)}function Ce(y,...p){throw it(y,...p)}function ve(y,...p){return it(y,...p)}function ze(y,p,g){const E=Object.assign(Object.assign({},rt()),{[p]:g});return new F.LL("auth","Firebase",E).create(p,{appName:y.name})}function je(y,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&Ce(y,"argument-error"),ze(y,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function it(y,...p){if("string"!=typeof y){const g=p[0],E=[...p.slice(1)];return E[0]&&(E[0].appName=y.name),y._errorFactory.create(g,...E)}return Ee.create(y,...p)}function re(y,p,...g){if(!y)throw it(p,...g)}function Pt(y){const p="INTERNAL ASSERTION FAILED: "+y;throw Fe(p),new Error(p)}function ut(y,p){y||Pt(p)}function Ht(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.href)||""}function at(){return"http:"===Fs()||"https:"===Fs()}function Fs(){var y;return typeof self<"u"&&(null===(y=self.location)||void 0===y?void 0:y.protocol)||null}class _s{constructor(p,g){this.shortDelay=p,this.longDelay=g,ut(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function _i(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(at()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function ie(y,p){ut(y.emulator,"Emulator should always be set here");const{url:g}=y.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class te{static initialize(p,g,E){this.fetchImpl=p,g&&(this.headersImpl=g),E&&(this.responseImpl=E)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Pt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Pt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Pt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Se={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},De=new _s(3e4,6e4);function xe(y,p){return y.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:y.tenantId}):p}function ye(y,p,g,E){return lt.apply(this,arguments)}function lt(){return(lt=(0,f.Z)(function*(y,p,g,E,A={}){return kt(y,A,(0,f.Z)(function*(){let M={},$={};E&&("GET"===p?$=E:M={body:JSON.stringify(E)});const J=(0,F.xO)(Object.assign({key:y.config.apiKey},$)).slice(1),ke=yield y._getAdditionalHeaders();return ke["Content-Type"]="application/json",y.languageCode&&(ke["X-Firebase-Locale"]=y.languageCode),te.fetch()(kn(y,y.config.apiHost,g,J),Object.assign({method:p,headers:ke,referrerPolicy:"no-referrer"},M))}))})).apply(this,arguments)}function kt(y,p,g){return dn.apply(this,arguments)}function dn(){return(dn=(0,f.Z)(function*(y,p,g){y._canInitEmulator=!1;const E=Object.assign(Object.assign({},Se),p);try{const A=new bn(y),M=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const $=yield M.json();if("needConfirmation"in $)throw Vn(y,"account-exists-with-different-credential",$);if(M.ok&&!("errorMessage"in $))return $;{const J=M.ok?$.errorMessage:$.error.message,[ke,Ge]=J.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ke)throw Vn(y,"credential-already-in-use",$);if("EMAIL_EXISTS"===ke)throw Vn(y,"email-already-in-use",$);if("USER_DISABLED"===ke)throw Vn(y,"user-disabled",$);const et=E[ke]||ke.toLowerCase().replace(/[_\s]+/g,"-");if(Ge)throw ze(y,et,Ge);Ce(y,et)}}catch(A){if(A instanceof F.ZR)throw A;Ce(y,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function It(y,p,g,E){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,f.Z)(function*(y,p,g,E,A={}){const M=yield ye(y,p,g,E,A);return"mfaPendingCredential"in M&&Ce(y,"multi-factor-auth-required",{_serverResponse:M}),M})).apply(this,arguments)}function kn(y,p,g,E){const A=`${p}${g}?${E}`;return y.config.emulator?ie(y.config,A):`${y.config.apiScheme}://${A}`}class bn{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,E)=>{this.timer=setTimeout(()=>E(ve(this.auth,"network-request-failed")),De.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Vn(y,p,g){const E={appName:y.name};g.email&&(E.email=g.email),g.phoneNumber&&(E.phoneNumber=g.phoneNumber);const A=ve(y,p,E);return A.customData._tokenResponse=g,A}function rr(){return(rr=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function ri(y,p){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ct(y,p){return ii.apply(this,arguments)}function ii(){return(ii=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function qi(y){if(y)try{const p=new Date(Number(y));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Pi(){return(Pi=(0,f.Z)(function*(y,p=!1){const g=(0,F.m9)(y),E=yield g.getIdToken(p),A=Dn(E);re(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const M="object"==typeof A.firebase?A.firebase:void 0,$=M?.sign_in_provider;return{claims:A,token:E,authTime:qi(_r(A.auth_time)),issuedAtTime:qi(_r(A.iat)),expirationTime:qi(_r(A.exp)),signInProvider:$||null,signInSecondFactor:M?.sign_in_second_factor||null}})).apply(this,arguments)}function _r(y){return 1e3*Number(y)}function Dn(y){const[p,g,E]=y.split(".");if(void 0===p||void 0===g||void 0===E)return Fe("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(g);return A?JSON.parse(A):(Fe("Failed to decode base64 JWT payload"),null)}catch(A){return Fe("Caught error parsing JWT payload as JSON",A?.toString()),null}}function st(y,p){return bt.apply(this,arguments)}function bt(){return(bt=(0,f.Z)(function*(y,p,g=!1){if(g)return p;try{return yield p}catch(E){throw E instanceof F.ZR&&mn(E)&&y.auth.currentUser===y&&(yield y.auth.signOut()),E}})).apply(this,arguments)}function mn({code:y}){return"auth/user-disabled"===y||"auth/user-token-expired"===y}class ys{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const E=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),E}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const E=this.getInterval(p);this.timerId=setTimeout((0,f.Z)(function*(){yield g.iteration()}),E)}iteration(){var p=this;return(0,f.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class oi{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=qi(this.lastLoginAt),this.creationTime=qi(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function ir(y){return xt.apply(this,arguments)}function xt(){return(xt=(0,f.Z)(function*(y){var p;const g=y.auth,E=yield y.getIdToken(),A=yield st(y,ct(g,{idToken:E}));re(A?.users.length,g,"internal-error");const M=A.users[0];y._notifyReloadListener(M);const $=null!==(p=M.providerUserInfo)&&void 0!==p&&p.length?tn(M.providerUserInfo):[],J=Ao(y.providerData,$),et=!!y.isAnonymous&&!(y.email&&M.passwordHash||J?.length),ot={uid:M.localId,displayName:M.displayName||null,photoURL:M.photoUrl||null,email:M.email||null,emailVerified:M.emailVerified||!1,phoneNumber:M.phoneNumber||null,tenantId:M.tenantId||null,providerData:J,metadata:new oi(M.createdAt,M.lastLoginAt),isAnonymous:et};Object.assign(y,ot)})).apply(this,arguments)}function hn(){return(hn=(0,f.Z)(function*(y){const p=(0,F.m9)(y);yield ir(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Ao(y,p){return[...y.filter(E=>!p.some(A=>A.providerId===E.providerId)),...p]}function tn(y){return y.map(p=>{var{providerId:g}=p,E=(0,ae._T)(p,["providerId"]);return{providerId:g,uid:E.rawId||"",displayName:E.displayName||null,email:E.email||null,phoneNumber:E.phoneNumber||null,photoURL:E.photoUrl||null}})}function Fr(){return(Fr=(0,f.Z)(function*(y,p){const g=yield kt(y,{},(0,f.Z)(function*(){const E=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:M}=y.config,$=kn(y,A,"/v1/token",`key=${M}`),J=yield y._getAdditionalHeaders();return J["Content-Type"]="application/x-www-form-urlencoded",te.fetch()($,{method:"POST",headers:J,body:E})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Ki{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){re(p.idToken,"internal-error"),re(typeof p.idToken<"u","internal-error"),re(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function rn(y){const p=Dn(y);return re(p,"internal-error"),re(typeof p.exp<"u","internal-error"),re(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var E=this;return(0,f.Z)(function*(){return re(!E.accessToken||E.refreshToken,p,"user-token-expired"),g||!E.accessToken||E.isExpired?E.refreshToken?(yield E.refresh(p,E.refreshToken),E.accessToken):null:E.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var E=this;return(0,f.Z)(function*(){const{accessToken:A,refreshToken:M,expiresIn:$}=yield function yr(y,p){return Fr.apply(this,arguments)}(p,g);E.updateTokensAndExpiration(A,M,Number($))})()}updateTokensAndExpiration(p,g,E){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*E}static fromJSON(p,g){const{refreshToken:E,accessToken:A,expirationTime:M}=g,$=new Ki;return E&&(re("string"==typeof E,"internal-error",{appName:p}),$.refreshToken=E),A&&(re("string"==typeof A,"internal-error",{appName:p}),$.accessToken=A),M&&(re("number"==typeof M,"internal-error",{appName:p}),$.expirationTime=M),$}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new Ki,this.toJSON())}_performRefresh(){return Pt("not implemented")}}function Un(y,p){re("string"==typeof y||typeof y>"u","internal-error",{appName:p})}class Lr{constructor(p){var{uid:g,auth:E,stsTokenManager:A}=p,M=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new ys(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=E,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=M.displayName||null,this.email=M.email||null,this.emailVerified=M.emailVerified||!1,this.phoneNumber=M.phoneNumber||null,this.photoURL=M.photoURL||null,this.isAnonymous=M.isAnonymous||!1,this.tenantId=M.tenantId||null,this.providerData=M.providerData?[...M.providerData]:[],this.metadata=new oi(M.createdAt||void 0,M.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,f.Z)(function*(){const E=yield st(g,g.stsTokenManager.getToken(g.auth,p));return re(E,g.auth,"internal-error"),g.accessToken!==E&&(g.accessToken=E,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),E})()}getIdTokenResult(p){return function ua(y){return Pi.apply(this,arguments)}(this,p)}reload(){return function xr(y){return hn.apply(this,arguments)}(this)}_assign(p){this!==p&&(re(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new Lr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){re(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var E=this;return(0,f.Z)(function*(){let A=!1;p.idToken&&p.idToken!==E.stsTokenManager.accessToken&&(E.stsTokenManager.updateFromServerResponse(p),A=!0),g&&(yield ir(E)),yield E.auth._persistUserIfCurrent(E),A&&E.auth._notifyListenersIfCurrent(E)})()}delete(){var p=this;return(0,f.Z)(function*(){const g=yield p.getIdToken();return yield st(p,function nr(y,p){return rr.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var E,A,M,$,J,ke,Ge,et;const ot=null!==(E=g.displayName)&&void 0!==E?E:void 0,Ln=null!==(A=g.email)&&void 0!==A?A:void 0,as=null!==(M=g.phoneNumber)&&void 0!==M?M:void 0,gd=null!==($=g.photoURL)&&void 0!==$?$:void 0,As=null!==(J=g.tenantId)&&void 0!==J?J:void 0,md=null!==(ke=g._redirectEventId)&&void 0!==ke?ke:void 0,Hl=null!==(Ge=g.createdAt)&&void 0!==Ge?Ge:void 0,N_=null!==(et=g.lastLoginAt)&&void 0!==et?et:void 0,{uid:vg,emailVerified:wg,isAnonymous:Gl,providerData:zl,stsTokenManager:P_}=g;re(vg&&P_,p,"internal-error");const Sa=Ki.fromJSON(this.name,P_);re("string"==typeof vg,p,"internal-error"),Un(ot,p.name),Un(Ln,p.name),re("boolean"==typeof wg,p,"internal-error"),re("boolean"==typeof Gl,p,"internal-error"),Un(as,p.name),Un(gd,p.name),Un(As,p.name),Un(md,p.name),Un(Hl,p.name),Un(N_,p.name);const Du=new Lr({uid:vg,auth:p,email:Ln,emailVerified:wg,displayName:ot,isAnonymous:Gl,photoURL:gd,phoneNumber:as,tenantId:As,stsTokenManager:Sa,createdAt:Hl,lastLoginAt:N_});return zl&&Array.isArray(zl)&&(Du.providerData=zl.map(Ir=>Object.assign({},Ir))),md&&(Du._redirectEventId=md),Du}static _fromIdTokenResponse(p,g,E=!1){return(0,f.Z)(function*(){const A=new Ki;A.updateFromServerResponse(g);const M=new Lr({uid:g.localId,auth:p,stsTokenManager:A,isAnonymous:E});return yield ir(M),M})()}}const vs=new Map;function qn(y){ut(y instanceof Function,"Expected a class definition");let p=vs.get(y);return p?(ut(p instanceof y,"Instance stored in cache mismatched with class"),p):(p=new y,vs.set(y,p),p)}const ai=(()=>{class y{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(g,E){var A=this;return(0,f.Z)(function*(){A.storage[g]=E})()}_get(g){var E=this;return(0,f.Z)(function*(){const A=E.storage[g];return void 0===A?null:A})()}_remove(g){var E=this;return(0,f.Z)(function*(){delete E.storage[g]})()}_addListener(g,E){}_removeListener(g,E){}}return y.type="NONE",y})();function j(y,p,g){return`firebase:${y}:${p}:${g}`}class B{constructor(p,g,E){this.persistence=p,this.auth=g,this.userKey=E;const{config:A,name:M}=this.auth;this.fullUserKey=j(this.userKey,A.apiKey,M),this.fullPersistenceKey=j("persistence",A.apiKey,M),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,f.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?Lr._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,f.Z)(function*(){if(g.persistence===p)return;const E=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,E?g.setCurrentUser(E):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,E="authUser"){return(0,f.Z)(function*(){if(!g.length)return new B(qn(ai),p,E);const A=(yield Promise.all(g.map(function(){var Ge=(0,f.Z)(function*(et){if(yield et._isAvailable())return et});return function(et){return Ge.apply(this,arguments)}}()))).filter(Ge=>Ge);let M=A[0]||qn(ai);const $=j(E,p.config.apiKey,p.name);let J=null;for(const Ge of g)try{const et=yield Ge._get($);if(et){const ot=Lr._fromJSON(p,et);Ge!==M&&(J=ot),M=Ge;break}}catch{}const ke=A.filter(Ge=>Ge._shouldAllowMigration);return M._shouldAllowMigration&&ke.length?(M=ke[0],J&&(yield M._set($,J.toJSON())),yield Promise.all(g.map(function(){var Ge=(0,f.Z)(function*(et){if(et!==M)try{yield et._remove($)}catch{}});return function(et){return Ge.apply(this,arguments)}}())),new B(M,p,E)):new B(M,p,E)})()}}function K(y){const p=y.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Mt(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(le(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(fn(p))return"Blackberry";if(Ue(p))return"Webos";if(X(p))return"Safari";if((p.includes("chrome/")||We(p))&&!p.includes("edge/"))return"Chrome";if(Lt(p))return"Android";{const E=y.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===E?.length)return E[1]}return"Other"}function le(y=(0,F.z$)()){return/firefox\//i.test(y)}function X(y=(0,F.z$)()){const p=y.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function We(y=(0,F.z$)()){return/crios\//i.test(y)}function Mt(y=(0,F.z$)()){return/iemobile/i.test(y)}function Lt(y=(0,F.z$)()){return/android/i.test(y)}function fn(y=(0,F.z$)()){return/blackberry/i.test(y)}function Ue(y=(0,F.z$)()){return/webos/i.test(y)}function dt(y=(0,F.z$)()){return/iphone|ipad|ipod/i.test(y)||/macintosh/i.test(y)&&/mobile/i.test(y)}function yn(y=(0,F.z$)()){return dt(y)||Lt(y)||Ue(y)||fn(y)||/windows phone/i.test(y)||Mt(y)}function oe(y,p=[]){let g;switch(y){case"Browser":g=K((0,F.z$)());break;case"Worker":g=`${K((0,F.z$)())}-${y}`;break;default:g=y}const E=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${ue.SDK_VERSION}/${E}`}function Oe(){return(Oe=(0,f.Z)(function*(y){return(yield ye(y,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Le(y,p){return At.apply(this,arguments)}function At(){return(At=(0,f.Z)(function*(y,p){return ye(y,"GET","/v2/recaptchaConfig",xe(y,p))})).apply(this,arguments)}function Vt(y){return void 0!==y&&void 0!==y.getResponse}function sn(y){return void 0!==y&&void 0!==y.enterprise}class On{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function Ur(y){return new Promise((p,g)=>{const E=document.createElement("script");E.setAttribute("src",y),E.onload=p,E.onerror=A=>{const M=ve("internal-error");M.customData=A,g(M)},E.type="text/javascript",E.charset="UTF-8",function Kt(){var y,p;return null!==(p=null===(y=document.getElementsByTagName("head"))||void 0===y?void 0:y[0])&&void 0!==p?p:document}().appendChild(E)})}function ki(y){return`__${y}${Math.floor(1e6*Math.random())}`}class vn{constructor(p){this.type="recaptcha-enterprise",this.auth=Tn(p)}verify(p="verify",g=!1){var E=this;return(0,f.Z)(function*(){function M(){return M=(0,f.Z)(function*(J){if(!g){if(null==J.tenantId&&null!=J._agentRecaptchaConfig)return J._agentRecaptchaConfig.siteKey;if(null!=J.tenantId&&void 0!==J._tenantRecaptchaConfigs[J.tenantId])return J._tenantRecaptchaConfigs[J.tenantId].siteKey}return new Promise(function(){var ke=(0,f.Z)(function*(Ge,et){Le(J,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(ot=>{if(void 0!==ot.recaptchaKey){const Ln=new On(ot);return null==J.tenantId?J._agentRecaptchaConfig=Ln:J._tenantRecaptchaConfigs[J.tenantId]=Ln,Ge(Ln.siteKey)}et(new Error("recaptcha Enterprise site key undefined"))}).catch(ot=>{et(ot)})});return function(Ge,et){return ke.apply(this,arguments)}}())}),M.apply(this,arguments)}function $(J,ke,Ge){const et=window.grecaptcha;sn(et)?et.enterprise.ready(()=>{et.enterprise.execute(J,{action:p}).then(ot=>{ke(ot)}).catch(()=>{ke("NO_RECAPTCHA")})}):Ge(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((J,ke)=>{(function A(J){return M.apply(this,arguments)})(E.auth).then(Ge=>{if(!g&&sn(window.grecaptcha))$(Ge,J,ke);else{if(typeof window>"u")return void ke(new Error("RecaptchaVerifier is only supported in browser"));Ur("https://www.google.com/recaptcha/enterprise.js?render="+Ge).then(()=>{$(Ge,J,ke)}).catch(et=>{ke(et)})}}).catch(Ge=>{ke(Ge)})})})()}}function ws(y,p,g){return Zu.apply(this,arguments)}function Zu(){return(Zu=(0,f.Z)(function*(y,p,g,E=!1){const A=new vn(y);let M;try{M=yield A.verify(g)}catch{M=yield A.verify(g,!0)}const $=Object.assign({},p);return Object.assign($,E?{captchaResp:M}:{captchaResponse:M}),Object.assign($,{clientType:"CLIENT_TYPE_WEB"}),Object.assign($,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),$})).apply(this,arguments)}class xo{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const E=M=>new Promise(($,J)=>{try{$(p(M))}catch(ke){J(ke)}});E.onAbort=g,this.queue.push(E);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,f.Z)(function*(){if(g.auth.currentUser===p)return;const E=[];try{for(const A of g.queue)yield A(p),A.onAbort&&E.push(A.onAbort)}catch(A){E.reverse();for(const M of E)try{M()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Dc{constructor(p,g,E,A){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=E,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new ho(this),this.idTokenSubscription=new ho(this),this.beforeStateQueue=new xo(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ee,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,g){var E=this;return g&&(this._popupRedirectResolver=qn(g)),this._initializationPromise=this.queue((0,f.Z)(function*(){var A,M;if(!E._deleted&&(E.persistenceManager=yield B.create(E,p),!E._deleted)){if(null!==(A=E._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield E._popupRedirectResolver._initialize(E)}catch{}yield E.initializeCurrentUser(g),E.lastNotifiedUid=(null===(M=E.currentUser)||void 0===M?void 0:M.uid)||null,!E._deleted&&(E._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,f.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,f.Z)(function*(){var E;const A=yield g.assertedPersistence.getCurrentUser();let M=A,$=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const J=null===(E=g.redirectUser)||void 0===E?void 0:E._redirectEventId,ke=M?._redirectEventId,Ge=yield g.tryRedirectSignIn(p);(!J||J===ke)&&Ge?.user&&(M=Ge.user,$=!0)}if(!M)return g.directlySetCurrentUser(null);if(!M._redirectEventId){if($)try{yield g.beforeStateQueue.runMiddleware(M)}catch(J){M=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(J))}return M?g.reloadAndSetCurrentUserOrClear(M):g.directlySetCurrentUser(null)}return re(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===M._redirectEventId?g.directlySetCurrentUser(M):g.reloadAndSetCurrentUserOrClear(M)})()}tryRedirectSignIn(p){var g=this;return(0,f.Z)(function*(){let E=null;try{E=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return E})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,f.Z)(function*(){try{yield ir(p)}catch(E){if("auth/network-request-failed"!==E?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function co(){if(typeof navigator>"u")return null;const y=navigator;return y.languages&&y.languages[0]||y.language||null}()}_delete(){var p=this;return(0,f.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,f.Z)(function*(){const E=p?(0,F.m9)(p):null;return E&&re(E.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(E&&E._clone(g))})()}_updateCurrentUser(p,g=!1){var E=this;return(0,f.Z)(function*(){if(!E._deleted)return p&&re(E.tenantId===p.tenantId,E,"tenant-id-mismatch"),g||(yield E.beforeStateQueue.runMiddleware(p)),E.queue((0,f.Z)(function*(){yield E.directlySetCurrentUser(p),E.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,f.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,f.Z)(function*(){yield g.assertedPersistence.setPersistence(qn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,f.Z)(function*(){const g=yield Le(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),E=new On(g);null==p.tenantId?p._agentRecaptchaConfig=E:p._tenantRecaptchaConfigs[p.tenantId]=E,E.emailPasswordEnabled&&new vn(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,g,E){return this.registerStateListener(this.authStateSubscription,p,g,E)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,E){return this.registerStateListener(this.idTokenSubscription,p,g,E)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var E=this;return(0,f.Z)(function*(){const A=yield E.getOrInitRedirectPersistenceManager(g);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,f.Z)(function*(){if(!g.redirectPersistenceManager){const E=p&&qn(p)||g._popupRedirectResolver;re(E,g,"argument-error"),g.redirectPersistenceManager=yield B.create(g,[qn(E._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,f.Z)(function*(){var E,A;return g._isInitialized&&(yield g.queue((0,f.Z)(function*(){}))),(null===(E=g._currentUser)||void 0===E?void 0:E._redirectEventId)===p?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,f.Z)(function*(){if(p===g.currentUser)return g.queue((0,f.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const E=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==E&&(this.lastNotifiedUid=E,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,E,A){if(this._deleted)return()=>{};const M="function"==typeof g?g:g.next.bind(g),$=this._isInitialized?Promise.resolve():this._initializationPromise;return re($,this,"internal-error"),$.then(()=>M(this.currentUser)),"function"==typeof g?p.addObserver(g,E,A):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,f.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return re(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=oe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,f.Z)(function*(){var g;const E={"X-Client-Version":p.clientVersion};p.app.options.appId&&(E["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();A&&(E["X-Firebase-Client"]=A);const M=yield p._getAppCheckToken();return M&&(E["X-Firebase-AppCheck"]=M),E})()}_getAppCheckToken(){var p=this;return(0,f.Z)(function*(){var g;const E=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return E?.error&&function St(y,...p){yt.logLevel<=ge.in.WARN&&yt.warn(`Auth (${ue.SDK_VERSION}): ${y}`,...p)}(`Error while retrieving App Check token: ${E.error}`),E?.token})()}}function Tn(y){return(0,F.m9)(y)}class ho{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return re(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function vr(y){const p=y.indexOf(":");return p<0?"":y.substr(0,p+1)}function ca(y){if(!y)return null;const p=Number(y);return isNaN(p)?null:p}class Ls{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return Pt("not implemented")}_getIdTokenResponse(p){return Pt("not implemented")}_linkToIdToken(p,g){return Pt("not implemented")}_getReauthenticationResolver(p){return Pt("not implemented")}}function Yi(y,p){return da.apply(this,arguments)}function da(){return(da=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:resetPassword",xe(y,p))})).apply(this,arguments)}function uh(y,p){return Tc.apply(this,arguments)}function Tc(){return(Tc=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function lh(y,p){return bp.apply(this,arguments)}function bp(){return(bp=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:update",xe(y,p))})).apply(this,arguments)}function Sn(y,p){return ch.apply(this,arguments)}function ch(){return(ch=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signInWithPassword",xe(y,p))})).apply(this,arguments)}function Sc(y,p){return dh.apply(this,arguments)}function dh(){return(dh=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:sendOobCode",xe(y,p))})).apply(this,arguments)}function Dp(y,p){return hh.apply(this,arguments)}function hh(){return(hh=(0,f.Z)(function*(y,p){return Sc(y,p)})).apply(this,arguments)}function Qu(y,p){return Tp.apply(this,arguments)}function Tp(){return(Tp=(0,f.Z)(function*(y,p){return Sc(y,p)})).apply(this,arguments)}function fh(y,p){return Ju.apply(this,arguments)}function Ju(){return(Ju=(0,f.Z)(function*(y,p){return Sc(y,p)})).apply(this,arguments)}function d_(y,p){return ph.apply(this,arguments)}function ph(){return(ph=(0,f.Z)(function*(y,p){return Sc(y,p)})).apply(this,arguments)}function Ac(){return(Ac=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signInWithEmailLink",xe(y,p))})).apply(this,arguments)}function Sp(){return(Sp=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signInWithEmailLink",xe(y,p))})).apply(this,arguments)}class xc extends Ls{constructor(p,g,E,A=null){super("password",E),this._email=p,this._password=g,this._tenantId=A}static _fromEmailAndPassword(p,g){return new xc(p,g,"password")}static _fromEmailAndCode(p,g,E=null){return new xc(p,g,"emailLink",E)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,f.Z)(function*(){var E;switch(g.signInMethod){case"password":const A={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=p._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const M=yield ws(p,A,"signInWithPassword");return Sn(p,M)}return Sn(p,A).catch(function(){var M=(0,f.Z)(function*($){if("auth/missing-recaptcha-token"===$.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const J=yield ws(p,A,"signInWithPassword");return Sn(p,J)}return Promise.reject($)});return function($){return M.apply(this,arguments)}}());case"emailLink":return function gh(y,p){return Ac.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:Ce(p,"internal-error")}})()}_linkToIdToken(p,g){var E=this;return(0,f.Z)(function*(){switch(E.signInMethod){case"password":return uh(p,{idToken:g,returnSecureToken:!0,email:E._email,password:E._password});case"emailLink":return function mh(y,p){return Sp.apply(this,arguments)}(p,{idToken:g,email:E._email,oobCode:E._password});default:Ce(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function Qi(y,p){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signInWithIdp",xe(y,p))})).apply(this,arguments)}class Oi extends Ls{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Oi(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):Ce("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A}=g,M=(0,ae._T)(g,["providerId","signInMethod"]);if(!E||!A)return null;const $=new Oi(E,A);return $.idToken=M.idToken||void 0,$.accessToken=M.accessToken||void 0,$.secret=M.secret,$.nonce=M.nonce,$.pendingToken=M.pendingToken||null,$}_getIdTokenResponse(p){return Qi(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Qi(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Qi(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,F.xO)(g)}return p}}function _h(y,p){return Za.apply(this,arguments)}function Za(){return(Za=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:sendVerificationCode",xe(y,p))})).apply(this,arguments)}function Xu(){return(Xu=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signInWithPhoneNumber",xe(y,p))})).apply(this,arguments)}function Mc(){return(Mc=(0,f.Z)(function*(y,p){const g=yield It(y,"POST","/v1/accounts:signInWithPhoneNumber",xe(y,p));if(g.temporaryProof)throw Vn(y,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const el={USER_NOT_FOUND:"user-not-found"};function Rr(){return(Rr=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signInWithPhoneNumber",xe(y,Object.assign(Object.assign({},p),{operation:"REAUTH"})),el)})).apply(this,arguments)}class Wr extends Ls{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Wr({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Wr({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Rc(y,p){return Xu.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function xp(y,p){return Mc.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Rp(y,p){return Rr.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:E,verificationCode:A}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:E,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:M}=p;return E||g||A||M?new Wr({verificationId:g,verificationCode:E,phoneNumber:A,temporaryProof:M}):null}}class nl{constructor(p){var g,E,A,M,$,J;const ke=(0,F.zd)((0,F.pd)(p)),Ge=null!==(g=ke.apiKey)&&void 0!==g?g:null,et=null!==(E=ke.oobCode)&&void 0!==E?E:null,ot=function h_(y){switch(y){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=ke.mode)&&void 0!==A?A:null);re(Ge&&et&&ot,"argument-error"),this.apiKey=Ge,this.operation=ot,this.code=et,this.continueUrl=null!==(M=ke.continueUrl)&&void 0!==M?M:null,this.languageCode=null!==($=ke.languageCode)&&void 0!==$?$:null,this.tenantId=null!==(J=ke.tenantId)&&void 0!==J?J:null}static parseLink(p){const g=function tl(y){const p=(0,F.zd)((0,F.pd)(y)).link,g=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,E=(0,F.zd)((0,F.pd)(y)).deep_link_id;return(E?(0,F.zd)((0,F.pd)(E)).link:null)||E||g||p||y}(p);try{return new nl(g)}catch{return null}}}let Zn=(()=>{class y{constructor(){this.providerId=y.PROVIDER_ID}static credential(g,E){return xc._fromEmailAndPassword(g,E)}static credentialWithLink(g,E){const A=nl.parseLink(E);return re(A,"argument-error"),xc._fromEmailAndCode(g,A.code,A.tenantId)}}return y.PROVIDER_ID="password",y.EMAIL_PASSWORD_SIGN_IN_METHOD="password",y.EMAIL_LINK_SIGN_IN_METHOD="emailLink",y})();class Us{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class rl extends Us{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Fi extends rl{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return re("providerId"in g&&"signInMethod"in g,"argument-error"),Oi._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return re(p.idToken||p.accessToken,"argument-error"),Oi._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Fi.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Fi.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:E,oauthTokenSecret:A,pendingToken:M,nonce:$,providerId:J}=p;if(!E&&!A&&!g&&!M||!J)return null;try{return new Fi(J)._credential({idToken:g,accessToken:E,nonce:$,pendingToken:M})}catch{return null}}}let li=(()=>{class y extends rl{constructor(){super("facebook.com")}static credential(g){return Oi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.FACEBOOK_SIGN_IN_METHOD="facebook.com",y.PROVIDER_ID="facebook.com",y})(),Nc=(()=>{class y extends rl{constructor(){super("google.com"),this.addScope("profile")}static credential(g,E){return Oi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:E,oauthAccessToken:A}=g;if(!E&&!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.GOOGLE_SIGN_IN_METHOD="google.com",y.PROVIDER_ID="google.com",y})(),il=(()=>{class y extends rl{constructor(){super("github.com")}static credential(g){return Oi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return y.credential(g.oauthAccessToken)}catch{return null}}}return y.GITHUB_SIGN_IN_METHOD="github.com",y.PROVIDER_ID="github.com",y})();class Yn extends Ls{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return Qi(p,this.buildRequest())}_linkToIdToken(p,g){const E=this.buildRequest();return E.idToken=g,Qi(p,E)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,Qi(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:E,signInMethod:A,pendingToken:M}=g;return E&&A&&M&&E===A?new Yn(E,M):null}static _create(p,g){return new Yn(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Ro extends Us{constructor(p){re(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Ro.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Ro.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Yn.fromJSON(p);return re(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:E}=p;if(!g||!E)return null;try{return Yn._create(E,g)}catch{return null}}}let Pc=(()=>{class y extends rl{constructor(){super("twitter.com")}static credential(g,E){return Oi._fromParams({providerId:y.PROVIDER_ID,signInMethod:y.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:E})}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:E,oauthTokenSecret:A}=g;if(!E||!A)return null;try{return y.credential(E,A)}catch{return null}}}return y.TWITTER_SIGN_IN_METHOD="twitter.com",y.PROVIDER_ID="twitter.com",y})();function wi(y,p){return fo.apply(this,arguments)}function fo(){return(fo=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signUp",xe(y,p))})).apply(this,arguments)}class Br{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,E,A=!1){return(0,f.Z)(function*(){const M=yield Lr._fromIdTokenResponse(p,E,A),$=Nt(E);return new Br({user:M,providerId:$,_tokenResponse:E,operationType:g})})()}static _forOperation(p,g,E){return(0,f.Z)(function*(){yield p._updateTokensIfNecessary(E,!0);const A=Nt(E);return new Br({user:p,providerId:A,_tokenResponse:E,operationType:g})})()}}function Nt(y){return y.providerId?y.providerId:"phoneNumber"in y?"phone":null}function vh(){return(vh=(0,f.Z)(function*(y){var p;const g=Tn(y);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new Br({user:g.currentUser,providerId:null,operationType:"signIn"});const E=yield wi(g,{returnSecureToken:!0}),A=yield Br._fromIdTokenResponse(g,"signIn",E,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Ya extends F.ZR{constructor(p,g,E,A){var M;super(g.code,g.message),this.operationType=E,this.user=A,Object.setPrototypeOf(this,Ya.prototype),this.customData={appName:p.name,tenantId:null!==(M=p.tenantId)&&void 0!==M?M:void 0,_serverResponse:g.customData._serverResponse,operationType:E}}static _fromErrorAndOperation(p,g,E,A){return new Ya(p,g,E,A)}}function wh(y,p,g,E){return("reauthenticate"===p?g._getReauthenticationResolver(y):g._getIdTokenResponse(y)).catch(M=>{throw"auth/multi-factor-auth-required"===M.code?Ya._fromErrorAndOperation(y,M,p,E):M})}function Eh(y){return new Set(y.map(({providerId:p})=>p).filter(p=>!!p))}function Ji(){return(Ji=(0,f.Z)(function*(y,p){const g=(0,F.m9)(y);yield Gt(!0,g,p);const{providerUserInfo:E}=yield ri(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),A=Eh(E||[]);return g.providerData=g.providerData.filter(M=>A.has(M.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g})).apply(this,arguments)}function sl(y,p){return Ae.apply(this,arguments)}function Ae(){return(Ae=(0,f.Z)(function*(y,p,g=!1){const E=yield st(y,p._linkToIdToken(y.auth,yield y.getIdToken()),g);return Br._forOperation(y,"link",E)})).apply(this,arguments)}function Gt(y,p,g){return ol.apply(this,arguments)}function ol(){return(ol=(0,f.Z)(function*(y,p,g){yield ir(p);const A=!1===y?"provider-already-linked":"no-such-provider";re(Eh(p.providerData).has(g)===y,p.auth,A)})).apply(this,arguments)}function kc(y,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*(y,p,g=!1){const{auth:E}=y,A="reauthenticate";try{const M=yield st(y,wh(E,A,p,y),g);re(M.idToken,E,"internal-error");const $=Dn(M.idToken);re($,E,"internal-error");const{sub:J}=$;return re(y.uid===J,E,"user-mismatch"),Br._forOperation(y,A,M)}catch(M){throw"auth/user-not-found"===M?.code&&Ce(E,"user-mismatch"),M}})).apply(this,arguments)}function al(y,p){return Mo.apply(this,arguments)}function Mo(){return(Mo=(0,f.Z)(function*(y,p,g=!1){const E="signIn",A=yield wh(y,E,p),M=yield Br._fromIdTokenResponse(y,E,A);return g||(yield y._updateCurrentUser(M.user)),M})).apply(this,arguments)}function Ei(y,p){return fa.apply(this,arguments)}function fa(){return(fa=(0,f.Z)(function*(y,p){return al(Tn(y),p)})).apply(this,arguments)}function Oc(y,p){return Fc.apply(this,arguments)}function Fc(){return(Fc=(0,f.Z)(function*(y,p){const g=(0,F.m9)(y);return yield Gt(!1,g,p.providerId),sl(g,p)})).apply(this,arguments)}function jn(y,p){return Mp.apply(this,arguments)}function Mp(){return(Mp=(0,f.Z)(function*(y,p){return kc((0,F.m9)(y),p)})).apply(this,arguments)}function Np(y,p){return qr.apply(this,arguments)}function qr(){return(qr=(0,f.Z)(function*(y,p){return It(y,"POST","/v1/accounts:signInWithCustomToken",xe(y,p))})).apply(this,arguments)}function Xi(){return(Xi=(0,f.Z)(function*(y,p){const g=Tn(y),E=yield Np(g,{token:p,returnSecureToken:!0}),A=yield Br._fromIdTokenResponse(g,"signIn",E);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class Bs{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Ci._fromServerResponse(p,g):"totpInfo"in g?Ch._fromServerResponse(p,g):Ce(p,"internal-error")}}class Ci extends Bs{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Ci(g)}}class Ch extends Bs{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new Ch(g)}}function No(y,p,g){var E;re((null===(E=g.url)||void 0===E?void 0:E.length)>0,y,"invalid-continue-uri"),re(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,y,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(re(g.iOS.bundleId.length>0,y,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(re(g.android.packageName.length>0,y,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function pa(){return pa=(0,f.Z)(function*(y,p,g){var E;const A=Tn(y),M={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const $=yield ws(A,M,"getOobCode",!0);g&&No(A,$,g),yield Qu(A,$)}else g&&No(A,M,g),yield Qu(A,M).catch(function(){var $=(0,f.Z)(function*(J){if("auth/missing-recaptcha-token"!==J.code)return Promise.reject(J);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ke=yield ws(A,M,"getOobCode",!0);g&&No(A,ke,g),yield Qu(A,ke)}});return function(J){return $.apply(this,arguments)}}())}),pa.apply(this,arguments)}function Qa(){return(Qa=(0,f.Z)(function*(y,p,g){yield Yi((0,F.m9)(y),{oobCode:p,newPassword:g})})).apply(this,arguments)}function Kr(){return(Kr=(0,f.Z)(function*(y,p){yield lh((0,F.m9)(y),{oobCode:p})})).apply(this,arguments)}function Vc(y,p){return Ja.apply(this,arguments)}function Ja(){return(Ja=(0,f.Z)(function*(y,p){const g=(0,F.m9)(y),E=yield Yi(g,{oobCode:p}),A=E.requestType;switch(re(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":re(E.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":re(E.mfaInfo,g,"internal-error");default:re(E.email,g,"internal-error")}let M=null;return E.mfaInfo&&(M=Bs._fromServerResponse(Tn(g),E.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.newEmail:E.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===E.requestType?E.email:E.newEmail)||null,multiFactorInfo:M},operation:A}})).apply(this,arguments)}function Po(){return(Po=(0,f.Z)(function*(y,p){const{data:g}=yield Vc((0,F.m9)(y),p);return g.email})).apply(this,arguments)}function eu(){return eu=(0,f.Z)(function*(y,p,g){var E;const A=Tn(y),M={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let $;if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const Ge=yield ws(A,M,"signUpPassword");$=wi(A,Ge)}else $=wi(A,M).catch(function(){var Ge=(0,f.Z)(function*(et){if("auth/missing-recaptcha-token"===et.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const ot=yield ws(A,M,"signUpPassword");return wi(A,ot)}return Promise.reject(et)});return function(et){return Ge.apply(this,arguments)}}());const J=yield $.catch(Ge=>Promise.reject(Ge)),ke=yield Br._fromIdTokenResponse(A,"signIn",J);return yield A._updateCurrentUser(ke.user),ke}),eu.apply(this,arguments)}function ll(){return ll=(0,f.Z)(function*(y,p,g){var E;const A=Tn(y),M={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function $(J,ke){re(ke.handleCodeInApp,A,"argument-error"),ke&&No(A,J,ke)}if(null!==(E=A._getRecaptchaConfig())&&void 0!==E&&E.emailPasswordEnabled){const J=yield ws(A,M,"getOobCode",!0);$(J,g),yield fh(A,J)}else $(M,g),yield fh(A,M).catch(function(){var J=(0,f.Z)(function*(ke){if("auth/missing-recaptcha-token"!==ke.code)return Promise.reject(ke);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ge=yield ws(A,M,"getOobCode",!0);$(Ge,g),yield fh(A,Ge)}});return function(ke){return J.apply(this,arguments)}}())}),ll.apply(this,arguments)}function js(){return(js=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y),A=Zn.credentialWithLink(p,g||Ht());return re(A._tenantId===(E.tenantId||null),E,"tenant-id-mismatch"),Ei(E,A)})).apply(this,arguments)}function Rn(y,p){return Dh.apply(this,arguments)}function Dh(){return(Dh=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:createAuthUri",xe(y,p))})).apply(this,arguments)}function Bc(){return(Bc=(0,f.Z)(function*(y,p){const E={identifier:p,continueUri:at()?Ht():"http://localhost"},{signinMethods:A}=yield Rn((0,F.m9)(y),E);return A||[]})).apply(this,arguments)}function cl(){return(cl=(0,f.Z)(function*(y,p){const g=(0,F.m9)(y),A={requestType:"VERIFY_EMAIL",idToken:yield y.getIdToken()};p&&No(g.auth,A,p);const{email:M}=yield Dp(g.auth,A);M!==y.email&&(yield y.reload())})).apply(this,arguments)}function ko(){return(ko=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y),M={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield y.getIdToken(),newEmail:p};g&&No(E.auth,M,g);const{email:$}=yield d_(E.auth,M);$!==y.email&&(yield y.reload())})).apply(this,arguments)}function tu(y,p){return ma.apply(this,arguments)}function ma(){return(ma=(0,f.Z)(function*(y,p){return ye(y,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function nu(){return(nu=(0,f.Z)(function*(y,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const E=(0,F.m9)(y),M={idToken:yield E.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},$=yield st(E,tu(E.auth,M));E.displayName=$.displayName||null,E.photoURL=$.photoUrl||null;const J=E.providerData.find(({providerId:ke})=>"password"===ke);J&&(J.displayName=E.displayName,J.photoURL=E.photoURL),yield E._updateTokensIfNecessary($)})).apply(this,arguments)}function ru(y,p,g){return dl.apply(this,arguments)}function dl(){return(dl=(0,f.Z)(function*(y,p,g){const{auth:E}=y,M={idToken:yield y.getIdToken(),returnSecureToken:!0};p&&(M.email=p),g&&(M.password=g);const $=yield st(y,uh(E,M));yield y._updateTokensIfNecessary($,!0)})).apply(this,arguments)}class es{constructor(p,g,E={}){this.isNewUser=p,this.providerId=g,this.profile=E}}class $c extends es{constructor(p,g,E,A){super(p,g,E),this.username=A}}class xh extends es{constructor(p,g){super(p,"facebook.com",g)}}class Op extends $c{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class Hc extends es{constructor(p,g){super(p,"google.com",g)}}class hl extends $c{constructor(p,g,E){super(p,"twitter.com",g,E)}}function fl(y){const{user:p,_tokenResponse:g}=y;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function kp(y){var p,g;if(!y)return null;const{providerId:E}=y,A=y.rawUserInfo?JSON.parse(y.rawUserInfo):{},M=y.isNewUser||"identitytoolkit#SignupNewUserResponse"===y.kind;if(!E&&y?.idToken){const $=null===(g=null===(p=Dn(y.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if($)return new es(M,"anonymous"!==$&&"custom"!==$?$:null)}if(!E)return null;switch(E){case"facebook.com":return new xh(M,A);case"github.com":return new Op(M,A);case"google.com":return new Hc(M,A);case"twitter.com":return new hl(M,A,y.screenName||null);case"custom":case"anonymous":return new es(M,null);default:return new es(M,E,A)}}(g)}class Oo{constructor(p,g,E){this.type=p,this.credential=g,this.auth=E}static _fromIdtoken(p,g){return new Oo("enroll",p,g)}static _fromMfaPendingCredential(p){return new Oo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,E;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Oo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(E=p.multiFactorSession)&&void 0!==E&&E.idToken)return Oo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Is{constructor(p,g,E){this.session=p,this.hints=g,this.signInResolver=E}static _fromError(p,g){const E=Tn(p),A=g.customData._serverResponse,M=(A.mfaInfo||[]).map(J=>Bs._fromServerResponse(E,J));re(A.mfaPendingCredential,E,"internal-error");const $=Oo._fromMfaPendingCredential(A.mfaPendingCredential);return new Is($,M,function(){var J=(0,f.Z)(function*(ke){const Ge=yield ke._process(E,$);delete A.mfaInfo,delete A.mfaPendingCredential;const et=Object.assign(Object.assign({},A),{idToken:Ge.idToken,refreshToken:Ge.refreshToken});switch(g.operationType){case"signIn":const ot=yield Br._fromIdTokenResponse(E,g.operationType,et);return yield E._updateCurrentUser(ot.user),ot;case"reauthenticate":return re(g.user,E,"internal-error"),Br._forOperation(g.user,g.operationType,et);default:Ce(E,"internal-error")}});return function(ke){return J.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,f.Z)(function*(){return g.signInResolver(p)})()}}function ou(y,p){return ye(y,"POST","/v2/accounts/mfaEnrollment:start",xe(y,p))}class Fo{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(E=>Bs._fromServerResponse(p.auth,E)))})}static _fromUser(p){return new Fo(p)}getSession(){var p=this;return(0,f.Z)(function*(){return Oo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var E=this;return(0,f.Z)(function*(){const A=p,M=yield E.getSession(),$=yield st(E.user,A._process(E.user.auth,M,g));return yield E.user._updateTokensIfNecessary($),E.user.reload()})()}unenroll(p){var g=this;return(0,f.Z)(function*(){const E="string"==typeof p?p:p.uid,A=yield g.user.getIdToken();try{const M=yield st(g.user,function Wc(y,p){return ye(y,"POST","/v2/accounts/mfaEnrollment:withdraw",xe(y,p))}(g.user.auth,{idToken:A,mfaEnrollmentId:E}));g.enrolledFactors=g.enrolledFactors.filter(({uid:$})=>$!==E),yield g.user._updateTokensIfNecessary(M),yield g.user.reload()}catch(M){throw M}})()}}const Lo=new WeakMap,Vo="__sak";class ml{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(Vo,"1"),this.storage.removeItem(Vo),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const Cs=(()=>{class y extends ml{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,E)=>this.onStorageEvent(g,E),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Vp(){const y=(0,F.z$)();return X(y)||dt(y)}()&&function Zi(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=yn(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const E of Object.keys(this.listeners)){const A=this.storage.getItem(E),M=this.localCache[E];A!==M&&g(E,M,A)}}onStorageEvent(g,E=!1){if(!g.key)return void this.forAllChangedKeys((J,ke,Ge)=>{this.notifyListeners(J,Ge)});const A=g.key;if(E?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const J=this.storage.getItem(A);if(g.newValue!==J)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!E)return}const M=()=>{const J=this.storage.getItem(A);!E&&this.localCache[A]===J||this.notifyListeners(A,J)},$=this.storage.getItem(A);!function Vr(){return(0,F.w1)()&&10===document.documentMode}()||$===g.newValue||g.newValue===g.oldValue?M():setTimeout(M,10)}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const M of Array.from(A))M(E&&JSON.parse(E))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,E,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:E,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,E){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,E){var A=()=>super._set,M=this;return(0,f.Z)(function*(){yield A().call(M,g,E),M.localCache[g]=JSON.stringify(E)})()}_get(g){var E=()=>super._get,A=this;return(0,f.Z)(function*(){const M=yield E().call(A,g);return A.localCache[g]=JSON.stringify(M),M})()}_remove(g){var E=()=>super._remove,A=this;return(0,f.Z)(function*(){yield E().call(A,g),delete A.localCache[g]})()}}return y.type="LOCAL",y})(),Uo=(()=>{class y extends ml{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,E){}_removeListener(g,E){}}return y.type="SESSION",y})();let _l=(()=>{class y{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const E=this.receivers.find(M=>M.isListeningto(g));if(E)return E;const A=new y(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var E=this;return(0,f.Z)(function*(){const A=g,{eventId:M,eventType:$,data:J}=A.data,ke=E.handlersMap[$];if(!ke?.size)return;A.ports[0].postMessage({status:"ack",eventId:M,eventType:$});const Ge=Array.from(ke).map(function(){var ot=(0,f.Z)(function*(Ln){return Ln(A.origin,J)});return function(Ln){return ot.apply(this,arguments)}}()),et=yield function Up(y){return Promise.all(y.map(function(){var p=(0,f.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(E){return{fulfilled:!1,reason:E}}});return function(g){return p.apply(this,arguments)}}()))}(Ge);A.ports[0].postMessage({status:"done",eventId:M,eventType:$,response:et})})()}_subscribe(g,E){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(E)}_unsubscribe(g,E){this.handlersMap[g]&&E&&this.handlersMap[g].delete(E),(!E||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return y.receivers=[],y})();function bs(y="",p=10){let g="";for(let E=0;E<p;E++)g+=Math.floor(10*Math.random());return y+g}class __{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,E=50){var A=this;return(0,f.Z)(function*(){const M=typeof MessageChannel<"u"?new MessageChannel:null;if(!M)throw new Error("connection_unavailable");let $,J;return new Promise((ke,Ge)=>{const et=bs("",20);M.port1.start();const ot=setTimeout(()=>{Ge(new Error("unsupported_event"))},E);J={messageChannel:M,onMessage(Ln){const as=Ln;if(as.data.eventId===et)switch(as.data.status){case"ack":clearTimeout(ot),$=setTimeout(()=>{Ge(new Error("timeout"))},3e3);break;case"done":clearTimeout($),ke(as.data.response);break;default:clearTimeout(ot),clearTimeout($),Ge(new Error("invalid_response"))}}},A.handlers.add(J),M.port1.addEventListener("message",J.onMessage),A.target.postMessage({eventType:p,eventId:et,data:g},[M.port2])}).finally(()=>{J&&A.removeMessageHandler(J)})})()}}function Mn(){return window}function cu(){return typeof Mn().WorkerGlobalScope<"u"&&"function"==typeof Mn().importScripts}function yl(){return(yl=(0,f.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Bo="firebaseLocalStorageDb",wa="firebaseLocalStorage",zs="fbase_key";class vl{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function du(y,p){return y.transaction([wa],p?"readwrite":"readonly").objectStore(wa)}function Kc(){const y=indexedDB.open(Bo,1);return new Promise((p,g)=>{y.addEventListener("error",()=>{g(y.error)}),y.addEventListener("upgradeneeded",()=>{const E=y.result;try{E.createObjectStore(wa,{keyPath:zs})}catch(A){g(A)}}),y.addEventListener("success",(0,f.Z)(function*(){const E=y.result;E.objectStoreNames.contains(wa)?p(E):(E.close(),yield function pn(){const y=indexedDB.deleteDatabase(Bo);return new vl(y).toPromise()}(),p(yield Kc()))}))})}function Zc(y,p,g){return jp.apply(this,arguments)}function jp(){return(jp=(0,f.Z)(function*(y,p,g){const E=du(y,!0).put({[zs]:p,value:g});return new vl(E).toPromise()})).apply(this,arguments)}function $p(){return($p=(0,f.Z)(function*(y,p){const g=du(y,!1).get(p),E=yield new vl(g).toPromise();return void 0===E?null:E.value})).apply(this,arguments)}function Hp(y,p){const g=du(y,!0).delete(p);return new vl(g).toPromise()}const wl=(()=>{class y{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,f.Z)(function*(){return g.db||(g.db=yield Kc()),g.db})()}_withRetries(g){var E=this;return(0,f.Z)(function*(){let A=0;for(;;)try{const M=yield E._openDb();return yield g(M)}catch(M){if(A++>3)throw M;E.db&&(E.db.close(),E.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,f.Z)(function*(){return cu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,f.Z)(function*(){g.receiver=_l._getInstance(function $n(){return cu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var E=(0,f.Z)(function*(A,M){return{keyProcessed:(yield g._poll()).includes(M.key)}});return function(A,M){return E.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var E=(0,f.Z)(function*(A,M){return["keyChanged"]});return function(A,M){return E.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,f.Z)(function*(){var E,A;if(g.activeServiceWorker=yield function Bp(){return yl.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new __(g.activeServiceWorker);const M=yield g.sender._send("ping",{},800);!M||(null===(E=M[0])||void 0===E?void 0:E.fulfilled)&&(null===(A=M[0])||void 0===A?void 0:A.value.includes("keyChanged"))&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var E=this;return(0,f.Z)(function*(){if(E.sender&&E.activeServiceWorker&&function Gs(){var y;return(null===(y=navigator?.serviceWorker)||void 0===y?void 0:y.controller)||null}()===E.activeServiceWorker)try{yield E.sender._send("keyChanged",{key:g},E.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Kc();return yield Zc(g,Vo,"1"),yield Hp(g,Vo),!0}catch{}return!1})()}_withPendingWrite(g){var E=this;return(0,f.Z)(function*(){E.pendingWrites++;try{yield g()}finally{E.pendingWrites--}})()}_set(g,E){var A=this;return(0,f.Z)(function*(){return A._withPendingWrite((0,f.Z)(function*(){return yield A._withRetries(M=>Zc(M,g,E)),A.localCache[g]=E,A.notifyServiceWorker(g)}))})()}_get(g){var E=this;return(0,f.Z)(function*(){const A=yield E._withRetries(M=>function Mh(y,p){return $p.apply(this,arguments)}(M,g));return E.localCache[g]=A,A})()}_remove(g){var E=this;return(0,f.Z)(function*(){return E._withPendingWrite((0,f.Z)(function*(){return yield E._withRetries(A=>Hp(A,g)),delete E.localCache[g],E.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,f.Z)(function*(){const E=yield g._withRetries($=>{const J=du($,!1).getAll();return new vl(J).toPromise()});if(!E)return[];if(0!==g.pendingWrites)return[];const A=[],M=new Set;for(const{fbase_key:$,value:J}of E)M.add($),JSON.stringify(g.localCache[$])!==JSON.stringify(J)&&(g.notifyListeners($,J),A.push($));for(const $ of Object.keys(g.localCache))g.localCache[$]&&!M.has($)&&(g.notifyListeners($,null),A.push($));return A})()}notifyListeners(g,E){this.localCache[g]=E;const A=this.listeners[g];if(A)for(const M of Array.from(A))M(E)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,E){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(E)}_removeListener(g,E){this.listeners[g]&&(this.listeners[g].delete(E),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return y.type="LOCAL",y})();function dr(y,p){return ye(y,"POST","/v2/accounts/mfaSignIn:start",xe(y,p))}const sr=1e12;class ts{constructor(p){this.auth=p,this.counter=sr,this._widgets=new Map}render(p,g){const E=this.counter;return this._widgets.set(E,new Yc(p,this.auth.name,g||{})),this.counter++,E}reset(p){var g;const E=p||sr;null===(g=this._widgets.get(E))||void 0===g||g.delete(),this._widgets.delete(E)}getResponse(p){var g;return(null===(g=this._widgets.get(p||sr))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,f.Z)(function*(){var E;return null===(E=g._widgets.get(p||sr))||void 0===E||E.execute(),""})()}}class Yc{constructor(p,g,E){this.params=E,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;re(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Qc(y){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let E=0;E<y;E++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Ea=ki("rcb"),Ph=new _s(3e4,6e4);class y_{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Mn().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return re(function Wp(y){return y.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(y)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&Vt(Mn().grecaptcha)?Promise.resolve(Mn().grecaptcha):new Promise((E,A)=>{const M=Mn().setTimeout(()=>{A(ve(p,"network-request-failed"))},Ph.get());Mn()[Ea]=()=>{Mn().clearTimeout(M),delete Mn()[Ea];const J=Mn().grecaptcha;if(!J||!Vt(J))return void A(ve(p,"internal-error"));const ke=J.render;J.render=(Ge,et)=>{const ot=ke(Ge,et);return this.counter++,ot},this.hostLanguage=g,E(J)},Ur(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Ea,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(M),A(ve(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=Mn().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class sw{load(p){return(0,f.Z)(function*(){return new ts(p)})()}clearedOneInstance(){}}const Il="recaptcha",bi={theme:"light",type:"image"};class Cl{constructor(p,g=Object.assign({},bi),E){this.parameters=g,this.type=Il,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Tn(E),this.isInvisible="invisible"===this.parameters.size,re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;re(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new sw:new y_,this.validateStartingState()}verify(){var p=this;return(0,f.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),E=p.getAssertedRecaptcha();return E.getResponse(g)||new Promise(M=>{const $=J=>{!J||(p.tokenChangeListeners.delete($),M(J))};p.tokenChangeListeners.add($),p.isInvisible&&E.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){re(!this.parameters.sitekey,this.auth,"argument-error"),re(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),re(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(E=>E(g)),"function"==typeof p)p(g);else if("string"==typeof p){const E=Mn()[p];"function"==typeof E&&E(g)}}}assertNotDestroyed(){re(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,f.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const E=document.createElement("div");g.appendChild(E),g=E}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,f.Z)(function*(){re(at()&&!cu(),p.auth,"internal-error"),yield function fu(){let y=null;return new Promise(p=>{"complete"!==document.readyState?(y=()=>p(),window.addEventListener("load",y)):p()}).catch(p=>{throw y&&window.removeEventListener("load",y),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function ne(y){return Oe.apply(this,arguments)}(p.auth);re(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return re(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Jc{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Wr._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function bl(){return(bl=(0,f.Z)(function*(y,p,g){const E=Tn(y),A=yield Sl(E,p,(0,F.m9)(g));return new Jc(A,M=>Ei(E,M))})).apply(this,arguments)}function Dl(){return(Dl=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y);yield Gt(!1,E,"phone");const A=yield Sl(E.auth,p,(0,F.m9)(g));return new Jc(A,M=>Oc(E,M))})).apply(this,arguments)}function Tl(){return(Tl=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y),A=yield Sl(E.auth,p,(0,F.m9)(g));return new Jc(A,M=>jn(E,M))})).apply(this,arguments)}function Sl(y,p,g){return Jt.apply(this,arguments)}function Jt(){return(Jt=(0,f.Z)(function*(y,p,g){var E;const A=yield g.verify();try{let M;if(re("string"==typeof A,y,"argument-error"),re(g.type===Il,y,"argument-error"),M="string"==typeof p?{phoneNumber:p}:p,"session"in M){const $=M.session;if("phoneNumber"in M)return re("enroll"===$.type,y,"internal-error"),(yield ou(y,{idToken:$.credential,phoneEnrollmentInfo:{phoneNumber:M.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{re("signin"===$.type,y,"internal-error");const J=(null===(E=M.multiFactorHint)||void 0===E?void 0:E.uid)||M.multiFactorUid;return re(J,y,"missing-multi-factor-info"),(yield dr(y,{mfaPendingCredential:$.credential,mfaEnrollmentId:J,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:$}=yield _h(y,{phoneNumber:M.phoneNumber,recaptchaToken:A});return $}}finally{g._reset()}})).apply(this,arguments)}function ht(){return(ht=(0,f.Z)(function*(y,p){yield sl((0,F.m9)(y),p)})).apply(this,arguments)}let hr=(()=>{class y{constructor(g){this.providerId=y.PROVIDER_ID,this.auth=Tn(g)}verifyPhoneNumber(g,E){return Sl(this.auth,g,(0,F.m9)(E))}static credential(g,E){return Wr._fromVerification(g,E)}static credentialFromResult(g){return y.credentialFromTaggedObject(g)}static credentialFromError(g){return y.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:E,temporaryProof:A}=g;return E&&A?Wr._fromTokenResponse(E,A):null}}return y.PROVIDER_ID="phone",y.PHONE_SIGN_IN_METHOD="phone",y})();function fr(y,p){return p?qn(p):(re(y._popupRedirectResolver,y,"argument-error"),y._popupRedirectResolver)}class Zr extends Ls{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return Qi(p,this._buildIdpRequest())}_linkToIdToken(p,g){return Qi(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return Qi(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function pu(y){return al(y.auth,new Zr(y),y.bypassAuthState)}function Bi(y){const{auth:p,user:g}=y;return re(g,p,"internal-error"),kc(g,new Zr(y),y.bypassAuthState)}function Al(y){return gu.apply(this,arguments)}function gu(){return(gu=(0,f.Z)(function*(y){const{auth:p,user:g}=y;return re(g,p,"internal-error"),sl(g,new Zr(y),y.bypassAuthState)})).apply(this,arguments)}class jo{constructor(p,g,E,A,M=!1){this.auth=p,this.resolver=E,this.user=A,this.bypassAuthState=M,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,f.Z)(function*(E,A){p.pendingPromise={resolve:E,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(M){p.reject(M)}});return function(E,A){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,f.Z)(function*(){const{urlResponse:E,sessionId:A,postBody:M,tenantId:$,error:J,type:ke}=p;if(J)return void g.reject(J);const Ge={auth:g.auth,requestUri:E,sessionId:A,tenantId:$||void 0,postBody:M||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ke)(Ge))}catch(et){g.reject(et)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return pu;case"linkViaPopup":case"linkViaRedirect":return Al;case"reauthViaPopup":case"reauthViaRedirect":return Bi;default:Ce(this.auth,"internal-error")}}resolve(p){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){ut(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yr=new _s(2e3,1e4);function Qn(){return(Qn=(0,f.Z)(function*(y,p,g){const E=Tn(y);je(y,p,Us);const A=fr(E,g);return new Rl(E,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function vt(){return(vt=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y);je(E.auth,p,Us);const A=fr(E.auth,g);return new Rl(E.auth,"reauthViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}function Ho(){return(Ho=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y);je(E.auth,p,Us);const A=fr(E.auth,g);return new Rl(E.auth,"linkViaPopup",p,A,E).executeNotNull()})).apply(this,arguments)}let Rl=(()=>{class y extends jo{constructor(g,E,A,M,$){super(g,E,M,$),this.provider=A,this.authWindow=null,this.pollId=null,y.currentPopupAction&&y.currentPopupAction.cancel(),y.currentPopupAction=this}executeNotNull(){var g=this;return(0,f.Z)(function*(){const E=yield g.execute();return re(E,g.auth,"internal-error"),E})()}onExecution(){var g=this;return(0,f.Z)(function*(){ut(1===g.filter.length,"Popup operations only handle one event");const E=bs();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],E),g.authWindow.associatedEvent=E,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(ve(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ve(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,y.currentPopupAction=null}pollUserCancellation(){const g=()=>{var E,A;this.pollId=null!==(A=null===(E=this.authWindow)||void 0===E?void 0:E.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ve(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Yr.get())};g()}}return y.currentPopupAction=null,y})();const Fn=new Map;class Lh extends jo{constructor(p,g,E=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,E),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,f.Z)(function*(){let E=Fn.get(g.auth._key());if(!E){try{const M=(yield function po(y,p){return Xc.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;E=()=>Promise.resolve(M)}catch(A){E=()=>Promise.reject(A)}Fn.set(g.auth._key(),E)}return g.bypassAuthState||Fn.set(g.auth._key(),()=>Promise.resolve(null)),E()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,E=this;return(0,f.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(E,p);if("unknown"!==p.type){if(p.eventId){const A=yield E.auth._redirectUserForId(p.eventId);if(A)return E.user=A,g().call(E,p);E.resolve(null)}}else E.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function Xc(){return(Xc=(0,f.Z)(function*(y,p){const g=mu(p),E=go(y);if(!(yield E._isAvailable()))return!1;const A="true"===(yield E._get(g));return yield E._remove(g),A})).apply(this,arguments)}function Go(y,p){return Ia.apply(this,arguments)}function Ia(){return(Ia=(0,f.Z)(function*(y,p){return go(y)._set(mu(p),"true")})).apply(this,arguments)}function Ws(y,p){Fn.set(y._key(),p)}function go(y){return qn(y._redirectPersistence)}function mu(y){return j("pendingRedirect",y.config.apiKey,y.name)}function ji(){return(ji=(0,f.Z)(function*(y,p,g){const E=Tn(y);je(y,p,Us),yield E._initializationPromise;const A=fr(E,g);return yield Go(A,E),A._openRedirect(E,p,"signInViaRedirect")})).apply(this,arguments)}function pr(){return(pr=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y);je(E.auth,p,Us),yield E.auth._initializationPromise;const A=fr(E.auth,g);yield Go(A,E.auth);const M=yield mo(E);return A._openRedirect(E.auth,p,"reauthViaRedirect",M)})).apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(y,p,g){const E=(0,F.m9)(y);je(E.auth,p,Us),yield E.auth._initializationPromise;const A=fr(E.auth,g);yield Gt(!1,E,p.providerId),yield Go(A,E.auth);const M=yield mo(E);return A._openRedirect(E.auth,p,"linkViaRedirect",M)})).apply(this,arguments)}function zo(){return(zo=(0,f.Z)(function*(y,p){return yield Tn(y)._initializationPromise,ci(y,p,!1)})).apply(this,arguments)}function ci(y,p){return or.apply(this,arguments)}function or(){return(or=(0,f.Z)(function*(y,p,g=!1){const E=Tn(y),A=fr(E,p),$=yield new Lh(E,A,g).execute();return $&&!g&&(delete $.user._redirectEventId,yield E._persistUserIfCurrent($.user),yield E._setRedirectUser(null,p)),$})).apply(this,arguments)}function mo(y){return Ca.apply(this,arguments)}function Ca(){return(Ca=(0,f.Z)(function*(y){const p=bs(`${y.uid}:::`);return y._redirectEventId=p,yield y.auth._setRedirectUser(y),yield y.auth._persistUserIfCurrent(y),p})).apply(this,arguments)}class rs{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(E=>{this.isEventForConsumer(p,E)&&(g=!0,this.sendToConsumer(p,E),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Ds(y){switch(y.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return wr(y);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var E;if(p.error&&!wr(p)){const A=(null===(E=p.error.code)||void 0===E?void 0:E.split("auth/")[1])||"internal-error";g.onError(ve(this.auth,A))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const E=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&E}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(is(p))}saveEventToCache(p){this.cachedEventUids.add(is(p)),this.lastProcessedEventTime=Date.now()}}function is(y){return[y.type,y.eventId,y.sessionId,y.tenantId].filter(p=>p).join("-")}function wr({type:y,error:p}){return"unknown"===y&&"auth/no-auth-event"===p?.code}function Yp(y){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,f.Z)(function*(y,p={}){return ye(y,"GET","/v1/projects",p)})).apply(this,arguments)}const Qp=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Jp=/^https?/;function Wo(){return(Wo=(0,f.Z)(function*(y){if(y.config.emulator)return;const{authorizedDomains:p}=yield Yp(y);for(const g of p)try{if(nd(g))return}catch{}Ce(y,"unauthorized-domain")})).apply(this,arguments)}function nd(y){const p=Ht(),{protocol:g,hostname:E}=new URL(p);if(y.startsWith("chrome-extension://")){const $=new URL(y);return""===$.hostname&&""===E?"chrome-extension:"===g&&y.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&$.hostname===E}if(!Jp.test(g))return!1;if(Qp.test(y))return E===y;const A=y.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(E)}const zt=new _s(3e4,6e4);function yu(){const y=Mn().___jsl;if(y?.H)for(const p of Object.keys(y.H))if(y.H[p].r=y.H[p].r||[],y.H[p].L=y.H[p].L||[],y.H[p].r=[...y.H[p].L],y.CP)for(let g=0;g<y.CP.length;g++)y.CP[g]=null}let qs=null;function _o(y){return qs=qs||function ba(y){return new Promise((p,g)=>{var E,A,M;function $(){yu(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{yu(),g(ve(y,"network-request-failed"))},timeout:zt.get()})}if(null!==(A=null===(E=Mn().gapi)||void 0===E?void 0:E.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(M=Mn().gapi)||void 0===M||!M.load){const J=ki("iframefcb");return Mn()[J]=()=>{gapi.load?$():g(ve(y,"network-request-failed"))},Ur(`https://apis.google.com/js/api.js?onload=${J}`).catch(ke=>g(ke))}$()}}).catch(p=>{throw qs=null,p})}(y),qs}const rd=new _s(5e3,15e3),id={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},ss=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function ow(y){const p=y.config;re(p.authDomain,y,"auth-domain-config-required");const g=p.emulator?ie(p,"emulator/auth/iframe"):`https://${y.config.authDomain}/__/auth/iframe`,E={apiKey:p.apiKey,appName:y.name,v:ue.SDK_VERSION},A=ss.get(y.config.apiHost);A&&(E.eid=A);const M=y._getFrameworks();return M.length&&(E.fw=M.join(",")),`${g}?${(0,F.xO)(E).slice(1)}`}function b(){return b=(0,f.Z)(function*(y){const p=yield _o(y),g=Mn().gapi;return re(g,y,"internal-error"),p.open({where:document.body,url:ow(y),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:id,dontclear:!0},E=>new Promise(function(){var A=(0,f.Z)(function*(M,$){yield E.restyle({setHideOnLeave:!1});const J=ve(y,"network-request-failed"),ke=Mn().setTimeout(()=>{$(J)},rd.get());function Ge(){Mn().clearTimeout(ke),M(E)}E.ping(Ge).then(Ge,()=>{$(J)})});return function(M,$){return A.apply(this,arguments)}}()))}),b.apply(this,arguments)}const R={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qe{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const $r=encodeURIComponent("fac");function wn(y,p,g,E,A,M){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(y,p,g,E,A,M){re(y.config.authDomain,y,"auth-domain-config-required"),re(y.config.apiKey,y,"invalid-api-key");const $={apiKey:y.config.apiKey,appName:y.name,authType:g,redirectUrl:E,v:ue.SDK_VERSION,eventId:A};if(p instanceof Us){p.setDefaultLanguage(y.languageCode),$.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||($.customParameters=JSON.stringify(p.getCustomParameters()));for(const[et,ot]of Object.entries(M||{}))$[et]=ot}if(p instanceof rl){const et=p.getScopes().filter(ot=>""!==ot);et.length>0&&($.scopes=et.join(","))}y.tenantId&&($.tid=y.tenantId);const J=$;for(const et of Object.keys(J))void 0===J[et]&&delete J[et];const ke=yield y._getAppCheckToken(),Ge=ke?`#${$r}=${encodeURIComponent(ke)}`:"";return`${os(y)}?${(0,F.xO)(J).slice(1)}${Ge}`})).apply(this,arguments)}function os({config:y}){return y.emulator?ie(y,"emulator/auth/handler"):`https://${y.authDomain}/__/auth/handler`}const yo="webStorageSupport";class sd extends class Ol{constructor(p){this.factorId=p}_process(p,g,E){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,E);case"signin":return this._finalizeSignIn(p,g.credential);default:return Pt("unexpected MultiFactorSessionType")}}}{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new sd(p)}_finalizeEnroll(p,g,E){return function Li(y,p){return ye(y,"POST","/v2/accounts/mfaEnrollment:finalize",xe(y,p))}(p,{idToken:g,displayName:E,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function El(y,p){return ye(y,"POST","/v2/accounts/mfaSignIn:finalize",xe(y,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let w_=(()=>{class y{constructor(){}static assertion(g){return sd._fromCredential(g)}}return y.FACTOR_ID="phone",y})();var Bh="@firebase/auth";class jh{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,f.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(E=>{p(E?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);!g||(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){re(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ta(){return window}function ad(){return(ad=(0,f.Z)(function*(y,p,g){var E;const{BuildInfo:A}=Ta();ut(p.sessionId,"AuthEvent did not contain a session ID");const M=yield uw(p.sessionId),$={};return dt()?$.ibi=A.packageName:Lt()?$.apn=A.packageName:Ce(y,"operation-not-supported-in-this-environment"),A.displayName&&($.appDisplayName=A.displayName),$.sessionId=M,wn(y,g,p.type,void 0,null!==(E=p.eventId)&&void 0!==E?E:void 0,$)})).apply(this,arguments)}function Ul(){return(Ul=(0,f.Z)(function*(y){const{BuildInfo:p}=Ta(),g={};dt()?g.iosBundleId=p.packageName:Lt()?g.androidPackageName=p.packageName:Ce(y,"operation-not-supported-in-this-environment"),yield Yp(y,g)})).apply(this,arguments)}function ud(){return(ud=(0,f.Z)(function*(y,p,g){const{cordova:E}=Ta();let A=()=>{};try{yield new Promise((M,$)=>{let J=null;function ke(){var ot;M();const Ln=null===(ot=E.plugins.browsertab)||void 0===ot?void 0:ot.close;"function"==typeof Ln&&Ln(),"function"==typeof g?.close&&g.close()}function Ge(){J||(J=window.setTimeout(()=>{$(ve(y,"redirect-cancelled-by-user"))},2e3))}function et(){"visible"===document?.visibilityState&&Ge()}p.addPassiveListener(ke),document.addEventListener("resume",Ge,!1),Lt()&&document.addEventListener("visibilitychange",et,!1),A=()=>{p.removePassiveListener(ke),document.removeEventListener("resume",Ge,!1),document.removeEventListener("visibilitychange",et,!1),J&&window.clearTimeout(J)}})}finally{A()}})).apply(this,arguments)}function uw(y){return rg.apply(this,arguments)}function rg(){return(rg=(0,f.Z)(function*(y){const p=lw(y),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function lw(y){if(ut(/[0-9a-zA-Z]+/.test(y),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(y);const p=new ArrayBuffer(y.length),g=new Uint8Array(p);for(let E=0;E<y.length;E++)g[E]=y.charCodeAt(E);return g}(0,F.Pz)("authIdTokenMaxAge"),function E_(y){(0,ue._registerComponent)(new pe.wA("auth",(p,{options:g})=>{const E=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),M=p.getProvider("app-check-internal"),{apiKey:$,authDomain:J}=E.options;re($&&!$.includes(":"),"invalid-api-key",{appName:E.name});const ke={apiKey:$,authDomain:J,clientPlatform:y,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oe(y)},Ge=new Dc(E,A,M,ke);return function Kn(y,p){const g=p?.persistence||[],E=(Array.isArray(g)?g:[g]).map(qn);p?.errorMap&&y._updateErrorMap(p.errorMap),y._initializeWithPersistence(E,p?.popupRedirectResolver)}(Ge,g),Ge},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,E)=>{p.getProvider("auth-internal").initialize()})),(0,ue._registerComponent)(new pe.wA("auth-internal",p=>{const g=Tn(p.getProvider("auth").getImmediate());return new jh(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,ue.registerVersion)(Bh,"0.23.2",function tg(y){switch(y){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(y)),(0,ue.registerVersion)(Bh,"0.23.2","esm2017")}("Browser");class Eu extends rs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,f.Z)(function*(){yield p.initPromise})()}}function ig(y){return Gh.apply(this,arguments)}function Gh(){return(Gh=(0,f.Z)(function*(y){const p=yield qo()._get(ld(y));return p&&(yield qo()._remove(ld(y))),p})).apply(this,arguments)}function b_(){const y=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<20;g++){const E=Math.floor(Math.random()*p.length);y.push(p.charAt(E))}return y.join("")}function qo(){return qn(Cs)}function ld(y){return j("authEvent",y.config.apiKey,y.name)}function bu(y){if(!y?.includes("?"))return{};const[p,...g]=y.split("?");return(0,F.zd)(g.join("?"))}function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ve("no-auth-event")}}function Qs(){var y;return(null===(y=self?.location)||void 0===y?void 0:y.protocol)||null}function Kh(y=(0,F.z$)()){return!("file:"!==Qs()&&"ionic:"!==Qs()&&"capacitor:"!==Qs()||!y.toLowerCase().match(/iphone|ipad|ipod|android/))}function dg(){try{const y=self.localStorage,p=bs();if(y)return y.setItem(p,"1"),y.removeItem(p),!function cw(y=(0,F.z$)()){return function cg(){return(0,F.w1)()&&11===document?.documentMode}()||function cd(y=(0,F.z$)()){return/Edge\/\d+/.test(y)}(y)}()||(0,F.hl)()}catch{return hg()&&(0,F.hl)()}return!1}function hg(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function fg(){return(function ug(){return"http:"===Qs()||"https:"===Qs()}()||(0,F.ru)()||Kh())&&!function lg(){return(0,F.b$)()||(0,F.UG)()}()&&dg()&&!hg()}function pg(){return Kh()&&typeof document<"u"}function jl(){return(jl=(0,f.Z)(function*(){return!!pg()&&new Promise(y=>{const p=setTimeout(()=>{y(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(p),y(!0)})})})).apply(this,arguments)}const Nr={LOCAL:"local",NONE:"none",SESSION:"session"},$l=re,Yh="persistence";function Js(y){return vo.apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(y){yield y._initializationPromise;const p=Qh(),g=j(Yh,y.config.apiKey,y.name);p&&p.setItem(g,y._getPersistence())})).apply(this,arguments)}function Qh(){var y;try{return(null===(y=function Zh(){return typeof window<"u"?window:null}())||void 0===y?void 0:y.sessionStorage)||null}catch{return null}}const Jh=re;class di{constructor(){this.browserResolver=qn(class Mr{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Uo,this._completeRedirectFn=ci,this._overrideRedirectResult=Ws}_openPopup(p,g,E,A){var M=this;return(0,f.Z)(function*(){var $;ut(null===($=M.eventManagers[p._key()])||void 0===$?void 0:$.manager,"_initialize() not called before _openPopup()");const J=yield wn(p,g,E,Ht(),A);return function $e(y,p,g,E=500,A=600){const M=Math.max((window.screen.availHeight-A)/2,0).toString(),$=Math.max((window.screen.availWidth-E)/2,0).toString();let J="";const ke=Object.assign(Object.assign({},R),{width:E.toString(),height:A.toString(),top:M,left:$}),Ge=(0,F.z$)().toLowerCase();g&&(J=We(Ge)?"_blank":g),le(Ge)&&(p=p||"http://localhost",ke.scrollbars="yes");const et=Object.entries(ke).reduce((Ln,[as,gd])=>`${Ln}${as}=${gd},`,"");if(function _n(y=(0,F.z$)()){var p;return dt(y)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(Ge)&&"_self"!==J)return function ft(y,p){const g=document.createElement("a");g.href=y,g.target=p;const E=document.createEvent("MouseEvent");E.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(E)}(p||"",J),new qe(null);const ot=window.open(p||"",J,et);re(ot,y,"popup-blocked");try{ot.focus()}catch{}return new qe(ot)}(p,J,bs())})()}_openRedirect(p,g,E,A){var M=this;return(0,f.Z)(function*(){return yield M._originValidation(p),function qc(y){Mn().location.href=y}(yield wn(p,g,E,Ht(),A)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:A,promise:M}=this.eventManagers[g];return A?Promise.resolve(A):(ut(M,"If manager is not set, promise should be"),M)}const E=this.initAndGetManager(p);return this.eventManagers[g]={promise:E},E.catch(()=>{delete this.eventManagers[g]}),E}initAndGetManager(p){var g=this;return(0,f.Z)(function*(){const E=yield function I(y){return b.apply(this,arguments)}(p),A=new rs(p);return E.register("authEvent",M=>(re(M?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(M.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:A},g.iframes[p._key()]=E,A})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(yo,{type:yo},A=>{var M;const $=null===(M=A?.[0])||void 0===M?void 0:M[yo];void 0!==$&&g(!!$),Ce(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function td(y){return Wo.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return yn()||X()||dt()}}),this.cordovaResolver=qn(class og{constructor(){this._redirectPersistence=Uo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=ci,this._overrideRedirectResult=Ws}_initialize(p){var g=this;return(0,f.Z)(function*(){const E=p._key();let A=g.eventManagers.get(E);return A||(A=new Eu(p),g.eventManagers.set(E,A),g.attachCallbackListeners(p,A)),A})()}_openPopup(p){Ce(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,E,A){var M=this;return(0,f.Z)(function*(){!function jI(y){var p,g,E,A,M,$,J,ke,Ge,et;const ot=Ta();re("function"==typeof(null===(p=ot?.universalLinks)||void 0===p?void 0:p.subscribe),y,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),re(typeof(null===(g=ot?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),re("function"==typeof(null===(M=null===(A=null===(E=ot?.cordova)||void 0===E?void 0:E.plugins)||void 0===A?void 0:A.browsertab)||void 0===M?void 0:M.openUrl),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(ke=null===(J=null===($=ot?.cordova)||void 0===$?void 0:$.plugins)||void 0===J?void 0:J.browsertab)||void 0===ke?void 0:ke.isAvailable),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),re("function"==typeof(null===(et=null===(Ge=ot?.cordova)||void 0===Ge?void 0:Ge.InAppBrowser)||void 0===et?void 0:et.open),y,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const $=yield M._initialize(p);yield $.initialized(),$.resetRedirect(),function Kp(){Fn.clear()}(),yield M._originValidation(p);const J=function Iu(y,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:b_(),postBody:null,tenantId:y.tenantId,error:ve(y,"no-auth-event")}}(p,E,A);yield function Hh(y,p){return qo()._set(ld(y),p)}(p,J);const ke=yield function Vl(y,p,g){return ad.apply(this,arguments)}(p,J,g),Ge=yield function ng(y){const{cordova:p}=Ta();return new Promise(g=>{p.plugins.browsertab.isAvailable(E=>{let A=null;E?p.plugins.browsertab.openUrl(y):A=p.InAppBrowser.open(y,function Ct(y=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(y)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(y)}()?"_blank":"_system","location=yes"),g(A)})})}(ke);return function wu(y,p,g){return ud.apply(this,arguments)}(p,$,Ge)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function $h(y){return Ul.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:E,handleOpenURL:A,BuildInfo:M}=Ta(),$=setTimeout((0,f.Z)(function*(){yield ig(p),g.onEvent(Wh())}),500),J=function(){var et=(0,f.Z)(function*(ot){clearTimeout($);const Ln=yield ig(p);let as=null;Ln&&ot?.url&&(as=function Cu(y,p){var g,E;const A=function sg(y){const p=bu(y),g=p.link?decodeURIComponent(p.link):void 0,E=bu(g).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return bu(A).link||A||E||g||y}(p);if(A.includes("/__/auth/callback")){const M=bu(A),$=M.firebaseError?function D_(y){try{return JSON.parse(y)}catch{return null}}(decodeURIComponent(M.firebaseError)):null,J=null===(E=null===(g=$?.code)||void 0===g?void 0:g.split("auth/"))||void 0===E?void 0:E[1],ke=J?ve(J):null;return ke?{type:y.type,eventId:y.eventId,tenantId:y.tenantId,error:ke,urlResponse:null,sessionId:null,postBody:null}:{type:y.type,eventId:y.eventId,tenantId:y.tenantId,sessionId:y.sessionId,urlResponse:A,postBody:null}}return null}(Ln,ot.url)),g.onEvent(as||Wh())});return function(Ln){return et.apply(this,arguments)}}();typeof E<"u"&&"function"==typeof E.subscribe&&E.subscribe(null,J);const ke=A,Ge=`${M.packageName.toLowerCase()}://`;Ta().handleOpenURL=function(){var et=(0,f.Z)(function*(ot){if(ot.toLowerCase().startsWith(Ge)&&J({url:ot}),"function"==typeof ke)try{ke(ot)}catch(Ln){console.error(Ln)}});return function(ot){return et.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Uo,this._completeRedirectFn=ci,this._overrideRedirectResult=Ws}_initialize(p){var g=this;return(0,f.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,E,A){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openPopup(p,g,E,A)})()}_openRedirect(p,g,E,A){var M=this;return(0,f.Z)(function*(){return yield M.selectUnderlyingResolver(),M.assertedUnderlyingResolver._openRedirect(p,g,E,A)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return pg()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jh(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,f.Z)(function*(){if(p.underlyingResolver)return;const g=yield function gg(){return jl.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function Xh(y){return y.unwrap()}function dd(y){return ef(y)}function ef(y){const{_tokenResponse:p}=y instanceof F.ZR?y.customData:y;if(!p)return null;if(!(y instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return hr.credentialFromResult(y);const g=p.providerId;if(!g||"password"===g)return null;let E;switch(g){case"google.com":E=Nc;break;case"facebook.com":E=li;break;case"github.com":E=il;break;case"twitter.com":E=Pc;break;default:const{oauthIdToken:A,oauthAccessToken:M,oauthTokenSecret:$,pendingToken:J,nonce:ke}=p;return M||$||A||J?J?g.startsWith("saml.")?Yn._create(g,J):Oi._fromParams({providerId:g,signInMethod:g,pendingToken:J,idToken:A,accessToken:M}):new Fi(g).credential({idToken:A,accessToken:M,rawNonce:ke}):null}return y instanceof F.ZR?E.credentialFromError(y):E.credentialFromResult(y)}function Di(y,p){return p.catch(g=>{throw g instanceof F.ZR&&function mg(y,p){var g;const E=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new dw(y,function gl(y,p){var g;const E=(0,F.m9)(y),A=p;return re(p.customData.operationType,E,"argument-error"),re(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,E,"argument-error"),Is._fromError(E,A)}(y,p));else if(E){const A=ef(p),M=p;A&&(M.credential=A,M.tenantId=E.tenantId||void 0,M.email=E.email||void 0,M.phoneNumber=E.phoneNumber||void 0)}}(y,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:dd(g),additionalUserInfo:fl(g),user:Er.getOrCreate(A)}})}function hd(y,p){return fd.apply(this,arguments)}function fd(){return(fd=(0,f.Z)(function*(y,p){const g=yield p;return{verificationId:g.verificationId,confirm:E=>Di(y,g.confirm(E))}})).apply(this,arguments)}class dw{constructor(p,g){this.resolver=g,this.auth=function x_(y){return y.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return Di(Xh(this.auth),this.resolver.resolveSignIn(p))}}class Er{constructor(p){this._delegate=p,this.multiFactor=function au(y){const p=(0,F.m9)(y);return Lo.has(p)||Lo.set(p,Fo._fromUser(p)),Lo.get(p)}(p)}static getOrCreate(p){return Er.USER_MAP.has(p)||Er.USER_MAP.set(p,new Er(p)),Er.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,f.Z)(function*(){return Di(g.auth,Oc(g._delegate,p))})()}linkWithPhoneNumber(p,g){var E=this;return(0,f.Z)(function*(){return hd(E.auth,function v_(y,p,g){return Dl.apply(this,arguments)}(E._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,f.Z)(function*(){return Di(g.auth,function Fh(y,p,g){return Ho.apply(this,arguments)}(g._delegate,p,di))})()}linkWithRedirect(p){var g=this;return(0,f.Z)(function*(){return yield Js(Tn(g.auth)),function Nl(y,p,g){return function Zp(y,p,g){return Hn.apply(this,arguments)}(y,p,g)}(g._delegate,p,di)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,f.Z)(function*(){return Di(g.auth,jn(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return hd(this.auth,function Oh(y,p,g){return Tl.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return Di(this.auth,function $o(y,p,g){return vt.apply(this,arguments)}(this._delegate,p,di))}reauthenticateWithRedirect(p){var g=this;return(0,f.Z)(function*(){return yield Js(Tn(g.auth)),function ns(y,p,g){return function Uh(y,p,g){return pr.apply(this,arguments)}(y,p,g)}(g._delegate,p,di)})()}sendEmailVerification(p){return function Sh(y,p){return cl.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,f.Z)(function*(){return yield function Ih(y,p){return Ji.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function Pp(y,p){return ru((0,F.m9)(y),p,null)}(this._delegate,p)}updatePassword(p){return function $s(y,p){return ru((0,F.m9)(y),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function Ui(y,p){return ht.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Ah(y,p){return nu.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function jc(y,p,g){return ko.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Er.USER_MAP=new WeakMap;const Ko=re;let R_=(()=>{class y{constructor(g,E){if(this.app=g,E.isInitialized())return this._delegate=E.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;Ko(A,"invalid-api-key",{appName:g.name}),Ko(A,"invalid-api-key",{appName:g.name});const M=typeof window<"u"?di:void 0;this._delegate=E.initialize({options:{persistence:hw(A,g.name),popupRedirectResolver:M}}),this._delegate._updateErrorMap(Te),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Er.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,E){!function ah(y,p,g){const E=Tn(y);re(E._canInitEmulator,E,"emulator-config-failed"),re(/^https?:\/\//.test(p),E,"invalid-emulator-scheme");const A=!!g?.disableWarnings,M=vr(p),{host:$,port:J}=function ui(y){const p=vr(y),g=/(\/\/)?([^?#/]+)/.exec(y.substr(p.length));if(!g)return{host:"",port:null};const E=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(E);if(A){const M=A[1];return{host:M,port:ca(E.substr(M.length+1))}}{const[M,$]=E.split(":");return{host:M,port:ca($)}}}(p);E.config.emulator={url:`${M}//${$}${null===J?"":`:${J}`}/`},E.settings.appVerificationDisabledForTesting=!0,E.emulatorConfig=Object.freeze({host:$,port:J,protocol:M.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Yu(){function y(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",y):y())}()}(this._delegate,g,E)}applyActionCode(g){return function ul(y,p){return Kr.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Vc(this._delegate,g)}confirmPasswordReset(g,E){return function Lc(y,p,g){return Qa.apply(this,arguments)}(this._delegate,g,E)}createUserWithEmailAndPassword(g,E){var A=this;return(0,f.Z)(function*(){return Di(A._delegate,function Uc(y,p,g){return eu.apply(this,arguments)}(A._delegate,g,E))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Th(y,p){return Bc.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function g_(y,p){return"EMAIL_SIGNIN"===nl.parseLink(p)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,f.Z)(function*(){Ko(fg(),g._delegate,"operation-not-supported-in-this-environment");const E=yield function _u(y,p){return zo.apply(this,arguments)}(g._delegate,di);return E?Di(g._delegate,Promise.resolve(E)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function ag(y,p){Tn(y)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,E,A){const{next:M,error:$,complete:J}=_g(g,E,A);return this._delegate.onAuthStateChanged(M,$,J)}onIdTokenChanged(g,E,A){const{next:M,error:$,complete:J}=_g(g,E,A);return this._delegate.onIdTokenChanged(M,$,J)}sendSignInLinkToEmail(g,E){return function ga(y,p,g){return ll.apply(this,arguments)}(this._delegate,g,E)}sendPasswordResetEmail(g,E){return function p_(y,p,g){return pa.apply(this,arguments)}(this._delegate,g,E||void 0)}setPersistence(g){var E=this;return(0,f.Z)(function*(){let A;switch(function S_(y,p){$l(Object.values(Nr).includes(p),y,"invalid-persistence-type"),(0,F.b$)()?$l(p!==Nr.SESSION,y,"unsupported-persistence-type"):(0,F.UG)()?$l(p===Nr.NONE,y,"unsupported-persistence-type"):hg()?$l(p===Nr.NONE||p===Nr.LOCAL&&(0,F.hl)(),y,"unsupported-persistence-type"):$l(p===Nr.NONE||dg(),y,"unsupported-persistence-type")}(E._delegate,g),g){case Nr.SESSION:A=Uo;break;case Nr.LOCAL:A=(yield qn(wl)._isAvailable())?wl:Cs;break;case Nr.NONE:A=ai;break;default:return Ce("argument-error",{appName:E._delegate.name})}return E._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return Di(this._delegate,function yh(y){return vh.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return Di(this._delegate,Ei(this._delegate,g))}signInWithCustomToken(g){return Di(this._delegate,function Ii(y,p){return Xi.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,E){return Di(this._delegate,function bh(y,p,g){return Ei((0,F.m9)(y),Zn.credential(p,g))}(this._delegate,g,E))}signInWithEmailLink(g,E){return Di(this._delegate,function on(y,p,g){return js.apply(this,arguments)}(this._delegate,g,E))}signInWithPhoneNumber(g,E){return hd(this._delegate,function qp(y,p,g){return bl.apply(this,arguments)}(this._delegate,g,E))}signInWithPopup(g){var E=this;return(0,f.Z)(function*(){return Ko(fg(),E._delegate,"operation-not-supported-in-this-environment"),Di(E._delegate,function xl(y,p,g){return Qn.apply(this,arguments)}(E._delegate,g,di))})()}signInWithRedirect(g){var E=this;return(0,f.Z)(function*(){return Ko(fg(),E._delegate,"operation-not-supported-in-this-environment"),yield Js(E._delegate),function Vh(y,p,g){return function ed(y,p,g){return ji.apply(this,arguments)}(y,p,g)}(E._delegate,g,di)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Xa(y,p){return Po.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return y.Persistence=Nr,y})();function _g(y,p,g){let E=y;"function"!=typeof y&&({next:E,error:p,complete:g}=y);const A=E;return{next:$=>A($&&Er.getOrCreate($)),error:p,complete:g}}function hw(y,p){const g=function A_(y,p){const g=Qh();if(!g)return[];const E=j(Yh,y,p);switch(g.getItem(E)){case Nr.NONE:return[ai];case Nr.LOCAL:return[wl,Uo];case Nr.SESSION:return[Uo];default:return[]}}(y,p);if(typeof self<"u"&&!g.includes(wl)&&g.push(wl),typeof window<"u")for(const E of[Cs,Uo])g.includes(E)||g.push(E);return g.includes(ai)||g.push(ai),g}class yg{constructor(){this.providerId="phone",this._delegate=new hr(Xh(ee.Z.auth()))}static credential(p,g){return hr.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}yg.PHONE_SIGN_IN_METHOD=hr.PHONE_SIGN_IN_METHOD,yg.PROVIDER_ID=hr.PROVIDER_ID;const fw=re;class pw{constructor(p,g,E=ee.Z.app()){var A;fw(null===(A=E.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:E.name}),this._delegate=new Cl(p,g,E.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function pd(y){y.INTERNAL.registerComponent(new pe.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),E=p.getProvider("auth");return new R_(g,E)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Zn,FacebookAuthProvider:li,GithubAuthProvider:il,GoogleAuthProvider:Nc,OAuthProvider:Fi,SAMLAuthProvider:Ro,PhoneAuthProvider:yg,PhoneMultiFactorGenerator:w_,RecaptchaVerifier:pw,TwitterAuthProvider:Pc,Auth:R_,AuthCredential:Ls,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),y.registerVersion("@firebase/auth-compat","0.4.2")}(ee.Z)},5861:(Et,Me,V)=>{function f(F,ue,ae,ge,pe,Ie,_e){try{var z=F[Ie](_e),H=z.value}catch(Z){return void ae(Z)}z.done?ue(H):Promise.resolve(H).then(ge,pe)}function ee(F){return function(){var ue=this,ae=arguments;return new Promise(function(ge,pe){var Ie=F.apply(ue,ae);function _e(H){f(Ie,ge,pe,_e,z,"next",H)}function z(H){f(Ie,ge,pe,_e,z,"throw",H)}_e(void 0)})}}V.d(Me,{Z:()=>ee})},7582:(Et,Me,V)=>{function ue(ie,te){var Se={};for(var De in ie)Object.prototype.hasOwnProperty.call(ie,De)&&te.indexOf(De)<0&&(Se[De]=ie[De]);if(null!=ie&&"function"==typeof Object.getOwnPropertySymbols){var xe=0;for(De=Object.getOwnPropertySymbols(ie);xe<De.length;xe++)te.indexOf(De[xe])<0&&Object.prototype.propertyIsEnumerable.call(ie,De[xe])&&(Se[De[xe]]=ie[De[xe]])}return Se}function Z(ie,te,Se,De){return new(Se||(Se=Promise))(function(ye,lt){function kt(Yt){try{It(De.next(Yt))}catch(kn){lt(kn)}}function dn(Yt){try{It(De.throw(Yt))}catch(kn){lt(kn)}}function It(Yt){Yt.done?ye(Yt.value):function xe(ye){return ye instanceof Se?ye:new Se(function(lt){lt(ye)})}(Yt.value).then(kt,dn)}It((De=De.apply(ie,te||[])).next())})}function Fe(ie){return this instanceof Fe?(this.v=ie,this):new Fe(ie)}function Ce(ie,te,Se){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,De=Se.apply(ie,te||[]),ye=[];return xe={},lt("next"),lt("throw"),lt("return"),xe[Symbol.asyncIterator]=function(){return this},xe;function lt(bn){De[bn]&&(xe[bn]=function(Vn){return new Promise(function(nr,rr){ye.push([bn,Vn,nr,rr])>1||kt(bn,Vn)})})}function kt(bn,Vn){try{!function dn(bn){bn.value instanceof Fe?Promise.resolve(bn.value.v).then(It,Yt):kn(ye[0][2],bn)}(De[bn](Vn))}catch(nr){kn(ye[0][3],nr)}}function It(bn){kt("next",bn)}function Yt(bn){kt("throw",bn)}function kn(bn,Vn){bn(Vn),ye.shift(),ye.length&&kt(ye[0][0],ye[0][1])}}function ze(ie){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Se,te=ie[Symbol.asyncIterator];return te?te.call(ie):(ie=function rt(ie){var te="function"==typeof Symbol&&Symbol.iterator,Se=te&&ie[te],De=0;if(Se)return Se.call(ie);if(ie&&"number"==typeof ie.length)return{next:function(){return ie&&De>=ie.length&&(ie=void 0),{value:ie&&ie[De++],done:!ie}}};throw new TypeError(te?"Object is not iterable.":"Symbol.iterator is not defined.")}(ie),Se={},De("next"),De("throw"),De("return"),Se[Symbol.asyncIterator]=function(){return this},Se);function De(ye){Se[ye]=ie[ye]&&function(lt){return new Promise(function(kt,dn){!function xe(ye,lt,kt,dn){Promise.resolve(dn).then(function(It){ye({value:It,done:kt})},lt)}(kt,dn,(lt=ie[ye](lt)).done,lt.value)})}}}V.d(Me,{FC:()=>Ce,KL:()=>ze,_T:()=>ue,mG:()=>Z,qq:()=>Fe}),"function"==typeof SuppressedError&&SuppressedError}},Et=>{Et(Et.s=9303)}]);