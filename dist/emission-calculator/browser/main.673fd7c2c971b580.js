"use strict";(self.webpackChunkemission_calculator=self.webpackChunkemission_calculator||[]).push([[179],{6159:(rn,ot,z)=>{z.d(ot,{a:()=>Re});var w=z(4650),Y=z(3434),X=z(7001);let Re=(()=>{class Ce{constructor(Ve,Ge){this.authService=Ve,this.router=Ge}canActivate(Ve,Ge){return 1==this.authService.isLoggedIn||(this.router.navigate(["/auth"]),!1)}}return Ce.\u0275fac=function(Ve){return new(Ve||Ce)(w.LFG(Y.e),w.LFG(X.F0))},Ce.\u0275prov=w.Yz7({token:Ce,factory:Ce.\u0275fac,providedIn:"root"}),Ce})()},3434:(rn,ot,z)=>{z.d(ot,{e:()=>gE});var w=z(4650),Y=z(4986),X=z(9751),Re=z(8996),Ce=z(9646),Ne=z(4976),Ve=z(8675),Ge=z(4482),Ye=z(5403);function ye(){return(0,Ge.e)((r,e)=>{let t,a=!1;r.subscribe((0,Ye.x)(e,c=>{const f=t;t=c,a&&e.next([f,c]),a=!0}))})}var We,pe=z(4004),Se=z(5026),Rt=z(1884),vt=z(9300),ct=z(2011),$t=z(6895),dt=(z(2644),z(3942)),Ue=z(5861),an=z(6881),it=z(4859),De=z(1877),Fe=z(2090),At=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Et={},Oe=Oe||{},Mt=At||self;function Dt(r){var e=typeof r;return"array"==(e="object"!=e?e:r?Array.isArray(r)?"array":e:"null")||"object"==e&&"number"==typeof r.length}function Kt(r){var e=typeof r;return"object"==e&&null!=r||"function"==e}var Dr="closure_uid_"+(1e9*Math.random()>>>0),si=0;function kn(r,e,t){return r.call.apply(r.bind,arguments)}function se(r,e,t){if(!r)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(c,a),r.apply(e,c)}}return function(){return r.apply(e,arguments)}}function Ae(r,e,t){return(Ae=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?kn:se).apply(null,arguments)}function Me(r,e){var t=Array.prototype.slice.call(arguments,1);return function(){var a=t.slice();return a.push.apply(a,arguments),r.apply(this,a)}}function Ke(r,e){function t(){}t.prototype=e.prototype,r.$=e.prototype,r.prototype=new t,r.prototype.constructor=r,r.ac=function(a,c,f){for(var v=Array(arguments.length-2),M=2;M<arguments.length;M++)v[M-2]=arguments[M];return e.prototype[c].apply(a,v)}}function tt(){this.s=this.s,this.o=this.o}tt.prototype.s=!1,tt.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function Ht(r){Object.prototype.hasOwnProperty.call(r,Dr)&&r[Dr]||(r[Dr]=++si)}(this)},tt.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const et=Array.prototype.indexOf?function(r,e){return Array.prototype.indexOf.call(r,e,void 0)}:function(r,e){if("string"==typeof r)return"string"!=typeof e||1!=e.length?-1:r.indexOf(e,0);for(let t=0;t<r.length;t++)if(t in r&&r[t]===e)return t;return-1};function zt(r){const e=r.length;if(0<e){const t=Array(e);for(let a=0;a<e;a++)t[a]=r[a];return t}return[]}function dn(r,e){for(let t=1;t<arguments.length;t++){const a=arguments[t];if(Dt(a)){const c=r.length||0,f=a.length||0;r.length=c+f;for(let v=0;v<f;v++)r[c+v]=a[v]}else r.push(a)}}function En(r,e){this.type=r,this.g=this.target=e,this.defaultPrevented=!1}En.prototype.h=function(){this.defaultPrevented=!0};var un=function(){if(!Mt.addEventListener||!Object.defineProperty)return!1;var r=!1,e=Object.defineProperty({},"passive",{get:function(){r=!0}});try{Mt.addEventListener("test",()=>{},e),Mt.removeEventListener("test",()=>{},e)}catch{}return r}();function Mn(r){return/^[\s\xa0]*$/.test(r)}function fr(){var r=Mt.navigator;return r&&(r=r.userAgent)?r:""}function Hn(r){return-1!=fr().indexOf(r)}function Xn(r){return Xn[" "](r),r}Xn[" "]=function(){};var us,r,cr=Hn("Opera"),kr=Hn("Trident")||Hn("MSIE"),Fn=Hn("Edge"),Ut=Fn||kr,wr=Hn("Gecko")&&!(-1!=fr().toLowerCase().indexOf("webkit")&&!Hn("Edge"))&&!(Hn("Trident")||Hn("MSIE"))&&!Hn("Edge"),An=-1!=fr().toLowerCase().indexOf("webkit")&&!Hn("Edge");function er(){var r=Mt.document;return r?r.documentMode:void 0}e:{var xi="",wi=(r=fr(),wr?/rv:([^\);]+)(\)|;)/.exec(r):Fn?/Edge\/([\d\.]+)/.exec(r):kr?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(r):An?/WebKit\/(\S+)/.exec(r):cr?/(?:Version)[ \/]?(\S+)/.exec(r):void 0);if(wi&&(xi=wi?wi[1]:""),kr){var Qe=er();if(null!=Qe&&Qe>parseFloat(xi)){us=String(Qe);break e}}us=xi}var ht=Mt.document&&kr&&(er()||parseInt(us,10))||void 0;function mt(r,e){if(En.call(this,r?r.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,r){var t=this.type=r.type,a=r.changedTouches&&r.changedTouches.length?r.changedTouches[0]:null;if(this.target=r.target||r.srcElement,this.g=e,e=r.relatedTarget){if(wr){e:{try{Xn(e.nodeName);var c=!0;break e}catch{}c=!1}c||(e=null)}}else"mouseover"==t?e=r.fromElement:"mouseout"==t&&(e=r.toElement);this.relatedTarget=e,a?(this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0),this.button=r.button,this.key=r.key||"",this.ctrlKey=r.ctrlKey,this.altKey=r.altKey,this.shiftKey=r.shiftKey,this.metaKey=r.metaKey,this.pointerId=r.pointerId||0,this.pointerType="string"==typeof r.pointerType?r.pointerType:cn[r.pointerType]||"",this.state=r.state,this.i=r,r.defaultPrevented&&mt.$.h.call(this)}}Ke(mt,En);var cn={2:"touch",3:"pen",4:"mouse"};mt.prototype.h=function(){mt.$.h.call(this);var r=this.i;r.preventDefault?r.preventDefault():r.returnValue=!1};var Rn="closure_listenable_"+(1e6*Math.random()|0),wn=0;function jt(r,e,t,a,c){this.listener=r,this.proxy=null,this.src=e,this.type=t,this.capture=!!a,this.la=c,this.key=++wn,this.fa=this.ia=!1}function lr(r){r.fa=!0,r.listener=null,r.proxy=null,r.src=null,r.la=null}function Qn(r,e,t){for(const a in r)e.call(t,r[a],a,r)}function Vn(r){const e={};for(const t in r)e[t]=r[t];return e}const Un="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Xt(r,e){let t,a;for(let c=1;c<arguments.length;c++){for(t in a=arguments[c],a)r[t]=a[t];for(let f=0;f<Un.length;f++)t=Un[f],Object.prototype.hasOwnProperty.call(a,t)&&(r[t]=a[t])}}function $r(r){this.src=r,this.g={},this.h=0}function br(r,e){var t=e.type;if(t in r.g){var f,a=r.g[t],c=et(a,e);(f=0<=c)&&Array.prototype.splice.call(a,c,1),f&&(lr(e),0==r.g[t].length&&(delete r.g[t],r.h--))}}function qn(r,e,t,a){for(var c=0;c<r.length;++c){var f=r[c];if(!f.fa&&f.listener==e&&f.capture==!!t&&f.la==a)return c}return-1}$r.prototype.add=function(r,e,t,a,c){var f=r.toString();(r=this.g[f])||(r=this.g[f]=[],this.h++);var v=qn(r,e,a,c);return-1<v?(e=r[v],t||(e.ia=!1)):((e=new jt(e,this.src,f,!!a,c)).ia=t,r.push(e)),e};var li="closure_lm_"+(1e6*Math.random()|0),jr={};function Jr(r,e,t,a,c){if(a&&a.once)return fe(r,e,t,a,c);if(Array.isArray(e)){for(var f=0;f<e.length;f++)Jr(r,e[f],t,a,c);return null}return t=mr(t),r&&r[Rn]?r.O(e,t,Kt(a)?!!a.capture:!!a,c):ti(r,e,t,!1,a,c)}function ti(r,e,t,a,c,f){if(!e)throw Error("Invalid event type");var v=Kt(c)?!!c.capture:!!c,M=vn(r);if(M||(r[li]=M=new $r(r)),(t=M.add(e,t,a,v,f)).proxy)return t;if(a=function _e(){const e=Gt;return function r(t){return e.call(r.src,r.listener,t)}}(),t.proxy=a,a.src=r,a.listener=t,r.addEventListener)un||(c=v),void 0===c&&(c=!1),r.addEventListener(e.toString(),a,c);else if(r.attachEvent)r.attachEvent($e(e.toString()),a);else{if(!r.addListener||!r.removeListener)throw Error("addEventListener and attachEvent are unavailable.");r.addListener(a)}return t}function fe(r,e,t,a,c){if(Array.isArray(e)){for(var f=0;f<e.length;f++)fe(r,e[f],t,a,c);return null}return t=mr(t),r&&r[Rn]?r.P(e,t,Kt(a)?!!a.capture:!!a,c):ti(r,e,t,!0,a,c)}function ke(r,e,t,a,c){if(Array.isArray(e))for(var f=0;f<e.length;f++)ke(r,e[f],t,a,c);else a=Kt(a)?!!a.capture:!!a,t=mr(t),r&&r[Rn]?(r=r.i,(e=String(e).toString())in r.g&&-1<(t=qn(f=r.g[e],t,a,c))&&(lr(f[t]),Array.prototype.splice.call(f,t,1),0==f.length&&(delete r.g[e],r.h--))):r&&(r=vn(r))&&(e=r.g[e.toString()],r=-1,e&&(r=qn(e,t,a,c)),(t=-1<r?e[r]:null)&&rt(t))}function rt(r){if("number"!=typeof r&&r&&!r.fa){var e=r.src;if(e&&e[Rn])br(e.i,r);else{var t=r.type,a=r.proxy;e.removeEventListener?e.removeEventListener(t,a,r.capture):e.detachEvent?e.detachEvent($e(t),a):e.addListener&&e.removeListener&&e.removeListener(a),(t=vn(e))?(br(t,r),0==t.h&&(t.src=null,e[li]=null)):lr(r)}}}function $e(r){return r in jr?jr[r]:jr[r]="on"+r}function Gt(r,e){if(r.fa)r=!0;else{e=new mt(e,this);var t=r.listener,a=r.la||r.src;r.ia&&rt(r),r=t.call(a,e)}return r}function vn(r){return(r=r[li])instanceof $r?r:null}var Ln="__closure_events_fn_"+(1e9*Math.random()>>>0);function mr(r){return"function"==typeof r?r:(r[Ln]||(r[Ln]=function(e){return r.handleEvent(e)}),r[Ln])}function de(){tt.call(this),this.i=new $r(this),this.S=this,this.J=null}function ue(r,e){var t,a=r.J;if(a)for(t=[];a;a=a.J)t.push(a);if(r=r.S,a=e.type||e,"string"==typeof e)e=new En(e,r);else if(e instanceof En)e.target=e.target||r;else{var c=e;Xt(e=new En(a,r),c)}if(c=!0,t)for(var f=t.length-1;0<=f;f--){var v=e.g=t[f];c=oe(v,a,!0,e)&&c}if(c=oe(v=e.g=r,a,!0,e)&&c,c=oe(v,a,!1,e)&&c,t)for(f=0;f<t.length;f++)c=oe(v=e.g=t[f],a,!1,e)&&c}function oe(r,e,t,a){if(!(e=r.i.g[String(e)]))return!0;e=e.concat();for(var c=!0,f=0;f<e.length;++f){var v=e[f];if(v&&!v.fa&&v.capture==t){var M=v.listener,j=v.la||v.src;v.ia&&br(r.i,v),c=!1!==M.call(j,a)&&c}}return c&&!a.defaultPrevented}Ke(de,tt),de.prototype[Rn]=!0,de.prototype.removeEventListener=function(r,e,t,a){ke(this,r,e,t,a)},de.prototype.N=function(){if(de.$.N.call(this),this.i){var e,r=this.i;for(e in r.g){for(var t=r.g[e],a=0;a<t.length;a++)lr(t[a]);delete r.g[e],r.h--}}this.J=null},de.prototype.O=function(r,e,t,a){return this.i.add(String(r),e,!1,t,a)},de.prototype.P=function(r,e,t,a){return this.i.add(String(r),e,!0,t,a)};var Be=Mt.JSON.stringify;function sn(){var r=yr;let e=null;return r.g&&(e=r.g,r.g=r.g.next,r.g||(r.h=null),e.next=null),e}var He=new class Ct{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new je,r=>r.reset());class je{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function St(r){var e=1;r=r.split(":");const t=[];for(;0<e&&r.length;)t.push(r.shift()),e--;return r.length&&t.push(r.join(":")),t}function Pt(r){Mt.setTimeout(()=>{throw r},0)}let In,bn=!1,yr=new class xn{constructor(){this.h=this.g=null}add(e,t){const a=He.get();a.set(e,t),this.h?this.h.next=a:this.g=a,this.h=a}},oi=()=>{const r=Mt.Promise.resolve(void 0);In=()=>{r.then(ur)}};var ur=()=>{for(var r;r=sn();){try{r.h.call(r.g)}catch(t){Pt(t)}var e=He;e.j(r),100>e.h&&(e.h++,r.next=e.g,e.g=r)}bn=!1};function Ii(r,e){de.call(this),this.h=r||1,this.g=e||Mt,this.j=Ae(this.qb,this),this.l=Date.now()}function ji(r){r.ga=!1,r.T&&(r.g.clearTimeout(r.T),r.T=null)}function ki(r,e,t){if("function"==typeof r)t&&(r=Ae(r,t));else{if(!r||"function"!=typeof r.handleEvent)throw Error("Invalid listener argument");r=Ae(r.handleEvent,r)}return 2147483647<Number(e)?-1:Mt.setTimeout(r,e||0)}function eo(r){r.g=ki(()=>{r.g=null,r.i&&(r.i=!1,eo(r))},r.j);const e=r.h;r.h=null,r.m.apply(null,e)}Ke(Ii,de),(We=Ii.prototype).ga=!1,We.T=null,We.qb=function(){if(this.ga){var r=Date.now()-this.l;0<r&&r<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-r):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ue(this,"tick"),this.ga&&(ji(this),this.start()))}},We.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},We.N=function(){Ii.$.N.call(this),ji(this),delete this.g};class po extends tt{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:eo(this)}N(){super.N(),this.g&&(Mt.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function xr(r){tt.call(this),this.h=r,this.g={}}Ke(xr,tt);var _s=[];function go(r,e,t,a){Array.isArray(t)||(t&&(_s[0]=t.toString()),t=_s);for(var c=0;c<t.length;c++){var f=Jr(e,t[c],a||r.handleEvent,!1,r.h||r);if(!f)break;r.g[f.key]=f}}function vs(r){Qn(r.g,function(e,t){this.g.hasOwnProperty(t)&&rt(e)},r),r.g={}}function Ao(){this.g=!0}function Fi(r,e,t,a){r.info(function(){return"XMLHTTP TEXT ("+e+"): "+function Fs(r,e){if(!r.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(r=0;r<t.length;r++)if(Array.isArray(t[r])){var a=t[r];if(!(2>a.length)){var c=a[1];if(Array.isArray(c)&&!(1>c.length)){var f=c[0];if("noop"!=f&&"stop"!=f&&"close"!=f)for(var v=1;v<c.length;v++)c[v]=""}}}return Be(t)}catch{return e}}(r,t)+(a?" "+a:"")})}xr.prototype.N=function(){xr.$.N.call(this),vs(this)},xr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Ao.prototype.Ea=function(){this.g=!1},Ao.prototype.info=function(){};var Xr={},ui=null;function Qi(){return ui=ui||new de}function xs(r){En.call(this,Xr.Ta,r)}function Es(r){const e=Qi();ue(e,new xs(e))}function Ai(r,e){En.call(this,Xr.STAT_EVENT,r),this.stat=e}function ci(r){const e=Qi();ue(e,new Ai(e,r))}function Ro(r,e){En.call(this,Xr.Ua,r),this.size=e}function Ls(r,e){if("function"!=typeof r)throw Error("Fn must not be null and must be a function");return Mt.setTimeout(function(){r()},e)}Xr.Ta="serverreachability",Ke(xs,En),Xr.STAT_EVENT="statevent",Ke(Ai,En),Xr.Ua="timingevent",Ke(Ro,En);var Mo={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},ru={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Yr(){}function Sa(){}Yr.prototype.h=null;var Je,xo={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Le(){En.call(this,"d")}function xe(){En.call(this,"c")}function wt(){}function Ft(r,e,t,a){this.l=r,this.j=e,this.m=t,this.W=a||1,this.U=new xr(this),this.P=Ir,this.V=new Ii(r=Ut?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new On}function On(){this.i=null,this.g="",this.h=!1}Ke(Le,En),Ke(xe,En),Ke(wt,Yr),wt.prototype.g=function(){return new XMLHttpRequest},wt.prototype.i=function(){return{}},Je=new wt;var Ir=45e3,Tr={},Sr={};function nr(r,e,t){r.L=1,r.v=mi(Kr(e)),r.s=t,r.S=!0,dr(r,null)}function dr(r,e){r.G=Date.now(),ds(r),r.A=Kr(r.v);var t=r.A,a=r.W;Array.isArray(a)||(a=[String(a)]),$i(t.i,"t",a),r.C=0,t=r.l.J,r.h=new On,r.g=va(r.l,t?e:null,!r.s),0<r.O&&(r.M=new po(Ae(r.Pa,r,r.g),r.O)),go(r.U,r.g,"readystatechange",r.nb),e=r.I?Vn(r.I):{},r.s?(r.u||(r.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",r.g.ha(r.A,r.u,r.s,e)):(r.u="GET",r.g.ha(r.A,r.u,null,e)),Es(),function Gr(r,e,t,a,c,f){r.info(function(){if(r.g)if(f)for(var v="",M=f.split("&"),j=0;j<M.length;j++){var q=M[j].split("=");if(1<q.length){var ie=q[0];q=q[1];var we=ie.split("_");v=2<=we.length&&"type"==we[1]?v+(ie+"=")+q+"&":v+(ie+"=redacted&")}}else v=null;else v=f;return"XMLHTTP REQ ("+a+") [attempt "+c+"]: "+e+"\n"+t+"\n"+v})}(r.j,r.u,r.A,r.m,r.W,r.s)}function Cn(r){return!!r.g&&"GET"==r.u&&2!=r.L&&r.l.Ha}function cs(r,e,t){let c,a=!0;for(;!r.J&&r.C<t.length;){if(c=pr(r,t),c==Sr){4==e&&(r.o=4,ci(14),a=!1),Fi(r.j,r.m,null,"[Incomplete Response]");break}if(c==Tr){r.o=4,ci(15),Fi(r.j,r.m,t,"[Invalid Chunk]"),a=!1;break}Fi(r.j,r.m,c,null),Gn(r,c)}Cn(r)&&c!=Sr&&c!=Tr&&(r.h.g="",r.C=0),4!=e||0!=t.length||r.h.h||(r.o=1,ci(16),a=!1),r.i=r.i&&a,a?0<t.length&&!r.ba&&(r.ba=!0,(e=r.l).g==r&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Qa(e),e.M=!0,ci(11))):(Fi(r.j,r.m,t,"[Invalid Chunked Response]"),Pr(r),mo(r))}function pr(r,e){var t=r.C,a=e.indexOf("\n",t);return-1==a?Sr:(t=Number(e.substring(t,a)),isNaN(t)?Tr:(a+=1)+t>e.length?Sr:(e=e.slice(a,a+t),r.C=a+t,e))}function ds(r){r.Y=Date.now()+r.P,Wa(r,r.P)}function Wa(r,e){if(null!=r.B)throw Error("WatchDog timer not null");r.B=Ls(Ae(r.lb,r),e)}function ai(r){r.B&&(Mt.clearTimeout(r.B),r.B=null)}function mo(r){0==r.l.H||r.J||ya(r.l,r)}function Pr(r){ai(r);var e=r.M;e&&"function"==typeof e.sa&&e.sa(),r.M=null,ji(r.V),vs(r.U),r.g&&(e=r.g,r.g=null,e.abort(),e.sa())}function Gn(r,e){try{var t=r.l;if(0!=t.H&&(t.g==r||ua(t.i,r)))if(!r.K&&ua(t.i,r)&&3==t.H){try{var a=t.Ja.g.parse(e)}catch{a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<r.G))break e;qo(t),qa(t)}di(t),ci(18)}}else t.Fa=c[1],0<t.Fa-t.V&&37500>c[2]&&t.G&&0==t.A&&!t.v&&(t.v=Ls(Ae(t.ib,t),6e3));if(1>=ws(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else qs(t,11)}else if((r.K||t.g==r)&&qo(t),!Mn(e))for(c=t.Ja.g.parse(e),e=0;e<c.length;e++){let q=c[e];if(t.V=q[0],q=q[1],2==t.H)if("c"==q[0]){t.K=q[1],t.pa=q[2];const ie=q[3];null!=ie&&(t.ra=ie,t.l.info("VER="+t.ra));const we=q[4];null!=we&&(t.Ga=we,t.l.info("SVER="+t.Ga));const nt=q[5];null!=nt&&"number"==typeof nt&&0<nt&&(t.L=a=1.5*nt,t.l.info("backChannelRequestTimeoutMs_="+a)),a=t;const It=r.g;if(It){const Wt=It.g?It.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Wt){var f=a.i;f.g||-1==Wt.indexOf("spdy")&&-1==Wt.indexOf("quic")&&-1==Wt.indexOf("h2")||(f.j=f.l,f.g=new Set,f.h&&(Xi(f,f.h),f.h=null))}if(a.F){const pn=It.g?It.g.getResponseHeader("X-HTTP-Session-Id"):null;pn&&(a.Da=pn,ni(a.I,a.F,pn))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-r.G,t.l.info("Handshake RTT: "+t.S+"ms"));var v=r;if((a=t).wa=Yo(a,a.J?a.pa:null,a.Y),v.K){Po(a.i,v);var M=v,j=a.L;j&&M.setTimeout(j),M.B&&(ai(M),ds(M)),a.g=v}else ko(a);0<t.j.length&&ga(t)}else"stop"!=q[0]&&"close"!=q[0]||qs(t,7);else 3==t.H&&("stop"==q[0]||"close"==q[0]?"stop"==q[0]?qs(t,7):pa(t):"noop"!=q[0]&&t.h&&t.h.Aa(q),t.A=0)}Es()}catch{}}function No(r,e){if(r.forEach&&"function"==typeof r.forEach)r.forEach(e,void 0);else if(Dt(r)||"string"==typeof r)Array.prototype.forEach.call(r,e,void 0);else for(var t=function xl(r){if(r.ta&&"function"==typeof r.ta)return r.ta();if(!r.Z||"function"!=typeof r.Z){if(typeof Map<"u"&&r instanceof Map)return Array.from(r.keys());if(!(typeof Set<"u"&&r instanceof Set)){if(Dt(r)||"string"==typeof r){var e=[];r=r.length;for(var t=0;t<r;t++)e.push(t);return e}e=[],t=0;for(const a in r)e[t++]=a;return e}}}(r),a=function Li(r){if(r.Z&&"function"==typeof r.Z)return r.Z();if(typeof Map<"u"&&r instanceof Map||typeof Set<"u"&&r instanceof Set)return Array.from(r.values());if("string"==typeof r)return r.split("");if(Dt(r)){for(var e=[],t=r.length,a=0;a<t;a++)e.push(r[a]);return e}for(a in e=[],t=0,r)e[t++]=r[a];return e}(r),c=a.length,f=0;f<c;f++)e.call(void 0,a[f],t&&t[f],r)}(We=Ft.prototype).setTimeout=function(r){this.P=r},We.nb=function(r){r=r.target;const e=this.M;e&&3==Zi(r)?e.l():this.Pa(r)},We.Pa=function(r){try{if(r==this.g)e:{const ie=Zi(this.g);var e=this.g.Ia();if(this.g.da(),!(3>ie)&&(3!=ie||Ut||this.g&&(this.h.h||this.g.ja()||Eo(this.g)))){this.J||4!=ie||7==e||Es(),ai(this);var t=this.g.da();this.ca=t;t:if(Cn(this)){var a=Eo(this.g);r="";var c=a.length,f=4==Zi(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Pr(this),mo(this);var v="";break t}this.h.i=new Mt.TextDecoder}for(e=0;e<c;e++)this.h.h=!0,r+=this.h.i.decode(a[e],{stream:f&&e==c-1});a.splice(0,c),this.h.g+=r,this.C=0,v=this.h.g}else v=this.g.ja();if(this.i=200==t,function to(r,e,t,a,c,f,v){r.info(function(){return"XMLHTTP RESP ("+a+") [ attempt "+c+"]: "+e+"\n"+t+"\n"+f+" "+v})}(this.j,this.u,this.A,this.m,this.W,ie,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var M,j=this.g;if((M=j.g?j.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Mn(M)){var q=M;break t}}q=null}if(!(t=q)){this.i=!1,this.o=3,ci(12),Pr(this),mo(this);break e}Fi(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Gn(this,t)}this.S?(cs(this,ie,v),Ut&&this.i&&3==ie&&(go(this.U,this.V,"tick",this.mb),this.V.start())):(Fi(this.j,this.m,v,null),Gn(this,v)),4==ie&&Pr(this),this.i&&!this.J&&(4==ie?ya(this.l,this):(this.i=!1,ds(this)))}else(function su(r){const e={};r=(r.g&&2<=Zi(r)&&r.g.getAllResponseHeaders()||"").split("\r\n");for(let a=0;a<r.length;a++){if(Mn(r[a]))continue;var t=St(r[a]);const c=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const f=e[c]||[];e[c]=f,f.push(t)}!function Oi(r,e){for(const t in r)e.call(void 0,r[t],t,r)}(e,function(a){return a.join(", ")})})(this.g),400==t&&0<v.indexOf("Unknown SID")?(this.o=3,ci(12)):(this.o=0,ci(13)),Pr(this),mo(this)}}}catch{}},We.mb=function(){if(this.g){var r=Zi(this.g),e=this.g.ja();this.C<e.length&&(ai(this),cs(this,r,e),this.i&&4!=r&&ds(this))}},We.cancel=function(){this.J=!0,Pr(this)},We.lb=function(){this.B=null;const r=Date.now();0<=r-this.Y?(function gi(r,e){r.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Es(),ci(17)),Pr(this),this.o=2,mo(this)):Wa(this,this.Y-r)};var qi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ci(r){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,r instanceof Ci){this.h=r.h,Ka(this,r.j),this.s=r.s,this.g=r.g,zs(this,r.m),this.l=r.l;var e=r.i,t=new vo;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),yo(this,t),this.o=r.o}else r&&(e=String(r).match(qi))?(this.h=!1,Ka(this,e[1]||"",!0),this.s=Ji(e[2]||""),this.g=Ji(e[3]||"",!0),zs(this,e[4]),this.l=Ji(e[5]||"",!0),yo(this,e[6]||"",!0),this.o=Ji(e[7]||"")):(this.h=!1,this.i=new vo(null,this.h))}function Kr(r){return new Ci(r)}function Ka(r,e,t){r.j=t?Ji(e,!0):e,r.j&&(r.j=r.j.replace(/:$/,""))}function zs(r,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);r.m=e}else r.m=null}function yo(r,e,t){e instanceof vo?(r.i=e,function fn(r,e){e&&!r.j&&(hs(r),r.i=null,r.g.forEach(function(t,a){var c=a.toLowerCase();a!=c&&(Ks(this,a),$i(this,c,t))},r)),r.j=e}(r.i,r.h)):(t||(e=_o(e,Jn)),r.i=new vo(e,r.h))}function ni(r,e,t){r.i.set(e,t)}function mi(r){return ni(r,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),r}function Ji(r,e){return r?e?decodeURI(r.replace(/%25/g,"%2525")):decodeURIComponent(r):""}function _o(r,e,t){return"string"==typeof r?(r=encodeURI(r).replace(e,Vs),t&&(r=r.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),r):null}function Vs(r){return"%"+((r=r.charCodeAt(0))>>4&15).toString(16)+(15&r).toString(16)}Ci.prototype.toString=function(){var r=[],e=this.j;e&&r.push(_o(e,Vi,!0),":");var t=this.g;return(t||"file"==e)&&(r.push("//"),(e=this.s)&&r.push(_o(e,Vi,!0),"@"),r.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&r.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&r.push("/"),r.push(_o(t,"/"==t.charAt(0)?Ws:Us,!0))),(t=this.i.toString())&&r.push("?",t),(t=this.o)&&r.push("#",_o(t,yi)),r.join("")};var Vi=/[#\/\?@]/g,Us=/[#\?:]/g,Ws=/[#\?]/g,Jn=/[#\?@]/g,yi=/#/g;function vo(r,e){this.h=this.g=null,this.i=r||null,this.j=!!e}function hs(r){r.g||(r.g=new Map,r.h=0,r.i&&function hl(r,e){if(r){r=r.split("&");for(var t=0;t<r.length;t++){var a=r[t].indexOf("="),c=null;if(0<=a){var f=r[t].substring(0,a);c=r[t].substring(a+1)}else f=r[t];e(f,c?decodeURIComponent(c.replace(/\+/g," ")):"")}}}(r.i,function(e,t){r.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function Ks(r,e){hs(r),e=Ui(r,e),r.g.has(e)&&(r.i=null,r.h-=r.g.get(e).length,r.g.delete(e))}function Hi(r,e){return hs(r),e=Ui(r,e),r.g.has(e)}function $i(r,e,t){Ks(r,e),0<t.length&&(r.i=null,r.g.set(Ui(r,e),zt(t)),r.h+=t.length)}function Ui(r,e){return e=String(e),r.j&&(e=e.toLowerCase()),e}function Aa(r){this.l=r||la,r=Mt.PerformanceNavigationTiming?0<(r=Mt.performance.getEntriesByType("navigation")).length&&("hq"==r[0].nextHopProtocol||"h2"==r[0].nextHopProtocol):!!(Mt.g&&Mt.g.Ka&&Mt.g.Ka()&&Mt.g.Ka().ec),this.j=r?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(We=vo.prototype).add=function(r,e){hs(this),this.i=null,r=Ui(this,r);var t=this.g.get(r);return t||this.g.set(r,t=[]),t.push(e),this.h+=1,this},We.forEach=function(r,e){hs(this),this.g.forEach(function(t,a){t.forEach(function(c){r.call(e,c,a,this)},this)},this)},We.ta=function(){hs(this);const r=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let a=0;a<e.length;a++){const c=r[a];for(let f=0;f<c.length;f++)t.push(e[a])}return t},We.Z=function(r){hs(this);let e=[];if("string"==typeof r)Hi(this,r)&&(e=e.concat(this.g.get(Ui(this,r))));else{r=Array.from(this.g.values());for(let t=0;t<r.length;t++)e=e.concat(r[t])}return e},We.set=function(r,e){return hs(this),this.i=null,Hi(this,r=Ui(this,r))&&(this.h-=this.g.get(r).length),this.g.set(r,[e]),this.h+=1,this},We.get=function(r,e){return r&&0<(r=this.Z(r)).length?String(r[0]):e},We.toString=function(){if(this.i)return this.i;if(!this.g)return"";const r=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var a=e[t];const f=encodeURIComponent(String(a)),v=this.Z(a);for(a=0;a<v.length;a++){var c=f;""!==v[a]&&(c+="="+encodeURIComponent(String(v[a]))),r.push(c)}}return this.i=r.join("&")};var la=10;function Ra(r){return!!r.h||!!r.g&&r.g.size>=r.j}function ws(r){return r.h?1:r.g?r.g.size:0}function ua(r,e){return r.h?r.h==e:!!r.g&&r.g.has(e)}function Xi(r,e){r.g?r.g.add(e):r.h=e}function Po(r,e){r.h&&r.h==e?r.h=null:r.g&&r.g.has(e)&&r.g.delete(e)}function xt(r){if(null!=r.h)return r.i.concat(r.h.F);if(null!=r.g&&0!==r.g.size){let e=r.i;for(const t of r.g.values())e=e.concat(t.F);return e}return zt(r.i)}function ca(){this.g=new class{stringify(r){return Mt.JSON.stringify(r,void 0)}parse(r){return Mt.JSON.parse(r,void 0)}}}function fl(r,e,t){const a=t||"";try{No(r,function(c,f){let v=c;Kt(c)&&(v=Be(c)),e.push(a+f+"="+encodeURIComponent(v))})}catch(c){throw e.push(a+"type="+encodeURIComponent("_badmap")),c}}function Ar(r,e,t,a,c){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,c(a)}catch{}}function Ns(r){this.l=r.fc||null,this.j=r.ob||!1}function es(r,e){de.call(this),this.F=r,this.u=e,this.m=void 0,this.readyState=no,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Aa.prototype.cancel=function(){if(this.i=xt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const r of this.g.values())r.cancel();this.g.clear()}},Ke(Ns,Yr),Ns.prototype.g=function(){return new es(this.l,this.j)},Ns.prototype.i=function(r){return function(){return r}}({}),Ke(es,de);var no=0;function Oo(r){r.j.read().then(r.Xa.bind(r)).catch(r.ka.bind(r))}function Is(r){r.readyState=4,r.l=null,r.j=null,r.A=null,Fr(r)}function Fr(r){r.onreadystatechange&&r.onreadystatechange.call(r)}(We=es.prototype).open=function(r,e){if(this.readyState!=no)throw this.abort(),Error("Error reopening a connection");this.C=r,this.B=e,this.readyState=1,Fr(this)},We.send=function(r){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};r&&(e.body=r),(this.F||Mt).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},We.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Is(this)),this.readyState=no},We.$a=function(r){if(this.g&&(this.l=r,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=r.headers,this.readyState=2,Fr(this)),this.g&&(this.readyState=3,Fr(this),this.g)))if("arraybuffer"===this.responseType)r.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Mt.ReadableStream<"u"&&"body"in r){if(this.j=r.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Oo(this)}else r.text().then(this.Za.bind(this),this.ka.bind(this))},We.Xa=function(r){if(this.g){if(this.u&&r.value)this.response.push(r.value);else if(!this.u){var e=r.value?r.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!r.done}))&&(this.response=this.responseText+=e)}r.done?Is(this):Fr(this),3==this.readyState&&Oo(this)}},We.Za=function(r){this.g&&(this.response=this.responseText=r,Is(this))},We.Ya=function(r){this.g&&(this.response=r,Is(this))},We.ka=function(){this.g&&Is(this)},We.setRequestHeader=function(r,e){this.v.append(r,e)},We.getResponseHeader=function(r){return this.h&&this.h.get(r.toLowerCase())||""},We.getAllResponseHeaders=function(){if(!this.h)return"";const r=[],e=this.h.entries();for(var t=e.next();!t.done;)r.push((t=t.value)[0]+": "+t[1]),t=e.next();return r.join("\r\n")},Object.defineProperty(es.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(r){this.m=r?"include":"same-origin"}});var H=Mt.JSON.parse;function V(r){de.call(this),this.headers=new Map,this.u=r||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=L,this.L=this.M=!1}Ke(V,de);var L="",ne=/^https?$/i,lt=["POST","PUT"];function _r(r,e){r.h=!1,r.g&&(r.l=!0,r.g.abort(),r.l=!1),r.j=e,r.m=5,Cs(r),Ps(r)}function Cs(r){r.F||(r.F=!0,ue(r,"complete"),ue(r,"error"))}function Gi(r){if(r.h&&typeof Oe<"u"&&(!r.C[1]||4!=Zi(r)||2!=r.da()))if(r.v&&4==Zi(r))ki(r.La,0,r);else if(ue(r,"readystatechange"),4==Zi(r)){r.h=!1;try{const v=r.da();e:switch(v){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var a;if(a=0===v){var c=String(r.I).match(qi)[1]||null;!c&&Mt.self&&Mt.self.location&&(c=Mt.self.location.protocol.slice(0,-1)),a=!ne.test(c?c.toLowerCase():"")}t=a}if(t)ue(r,"complete"),ue(r,"success");else{r.m=6;try{var f=2<Zi(r)?r.g.statusText:""}catch{f=""}r.j=f+" ["+r.da()+"]",Cs(r)}}finally{Ps(r)}}}function Ps(r,e){if(r.g){Ds(r);const t=r.g,a=r.C[0]?()=>{}:null;r.g=null,r.C=null,e||ue(r,"ready");try{t.onreadystatechange=a}catch{}}}function Ds(r){r.g&&r.L&&(r.g.ontimeout=null),r.A&&(Mt.clearTimeout(r.A),r.A=null)}function Zi(r){return r.g?r.g.readyState:0}function Eo(r){try{if(!r.g)return null;if("response"in r.g)return r.g.response;switch(r.K){case L:case"text":return r.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in r.g)return r.g.mozResponseArrayBuffer}return null}catch{return null}}function fs(r){let e="";return Qn(r,function(t,a){e+=a,e+=":",e+=t,e+="\r\n"}),e}function da(r,e,t){e:{for(a in t){var a=!1;break e}a=!0}a||(t=fs(t),"string"==typeof r?null!=t&&encodeURIComponent(String(t)):ni(r,e,t))}function ha(r,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[r]||e}function fa(r){this.Ga=0,this.j=[],this.l=new Ao,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=ha("failFast",!1,r),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=ha("baseRetryDelayMs",5e3,r),this.hb=ha("retryDelaySeedMs",1e4,r),this.eb=ha("forwardChannelMaxRetries",2,r),this.xa=ha("forwardChannelRequestTimeoutMs",2e4,r),this.va=r&&r.xmlHttpFactory||void 0,this.Ha=r&&r.dc||!1,this.L=void 0,this.J=r&&r.supportsCrossDomainXhr||!1,this.K="",this.i=new Aa(r&&r.concurrentRequestLimit),this.Ja=new ca,this.P=r&&r.fastHandshake||!1,this.O=r&&r.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=r&&r.bc||!1,r&&r.Ea&&this.l.Ea(),r&&r.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&r&&r.detectBufferingProxy||!1,this.qa=void 0,r&&r.longPollingTimeout&&0<r.longPollingTimeout&&(this.qa=r.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function pa(r){if(pl(r),3==r.H){var e=r.W++,t=Kr(r.I);if(ni(t,"SID",r.K),ni(t,"RID",e),ni(t,"TYPE","terminate"),Ya(r,t),(e=new Ft(r,r.l,e)).L=2,e.v=mi(Kr(t)),t=!1,Mt.navigator&&Mt.navigator.sendBeacon)try{t=Mt.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Mt.Image&&((new Image).src=e.v,t=!0),t||(e.g=va(e.l,null),e.g.ha(e.v)),e.G=Date.now(),ds(e)}_a(r)}function qa(r){r.g&&(Qa(r),r.g.cancel(),r.g=null)}function pl(r){qa(r),r.u&&(Mt.clearTimeout(r.u),r.u=null),qo(r),r.i.cancel(),r.m&&("number"==typeof r.m&&Mt.clearTimeout(r.m),r.m=null)}function ga(r){if(!Ra(r.i)&&!r.m){r.m=!0;var e=r.Na;In||oi(),bn||(In(),bn=!0),yr.add(e,r),r.C=0}}function ma(r,e){var t;t=e?e.m:r.W++;const a=Kr(r.I);ni(a,"SID",r.K),ni(a,"RID",t),ni(a,"AID",r.V),Ya(r,a),r.o&&r.s&&da(a,r.o,r.s),t=new Ft(r,r.l,t,r.C+1),null===r.o&&(t.I=r.s),e&&(r.j=e.F.concat(r.j)),e=Hr(r,t,1e3),t.setTimeout(Math.round(.5*r.xa)+Math.round(.5*r.xa*Math.random())),Xi(r.i,t),nr(t,a,e)}function Ya(r,e){r.na&&Qn(r.na,function(t,a){ni(e,a,t)}),r.h&&No({},function(t,a){ni(e,a,t)})}function Hr(r,e,t){t=Math.min(r.j.length,t);var a=r.h?Ae(r.h.Va,r.h,r):null;e:{var c=r.j;let f=-1;for(;;){const v=["count="+t];-1==f?0<t?(f=c[0].g,v.push("ofs="+f)):f=0:v.push("ofs="+f);let M=!0;for(let j=0;j<t;j++){let q=c[j].g;const ie=c[j].map;if(q-=f,0>q)f=Math.max(0,c[j].g-100),M=!1;else try{fl(ie,v,"req"+q+"_")}catch{a&&a(ie)}}if(M){a=v.join("&");break e}}}return r=r.j.splice(0,t),e.F=r,a}function ko(r){if(!r.g&&!r.u){r.ba=1;var e=r.Ma;In||oi(),bn||(In(),bn=!0),yr.add(e,r),r.A=0}}function di(r){return!(r.g||r.u||3<=r.A||(r.ba++,r.u=Ls(Ae(r.Ma,r),Zo(r,r.A)),r.A++,0))}function Qa(r){null!=r.B&&(Mt.clearTimeout(r.B),r.B=null)}function gl(r){r.g=new Ft(r,r.l,"rpc",r.ba),null===r.o&&(r.g.I=r.s),r.g.O=0;var e=Kr(r.wa);ni(e,"RID","rpc"),ni(e,"SID",r.K),ni(e,"AID",r.V),ni(e,"CI",r.G?"0":"1"),!r.G&&r.qa&&ni(e,"TO",r.qa),ni(e,"TYPE","xmlhttp"),Ya(r,e),r.o&&r.s&&da(e,r.o,r.s),r.L&&r.g.setTimeout(r.L);var t=r.g;r=r.pa,t.L=1,t.v=mi(Kr(e)),t.s=null,t.S=!0,dr(t,r)}function qo(r){null!=r.v&&(Mt.clearTimeout(r.v),r.v=null)}function ya(r,e){var t=null;if(r.g==e){qo(r),Qa(r),r.g=null;var a=2}else{if(!ua(r.i,e))return;t=e.F,Po(r.i,e),a=1}if(0!=r.H)if(e.i)if(1==a){t=e.s?e.s.length:0,e=Date.now()-e.G;var c=r.C;ue(a=Qi(),new Ro(a,t)),ga(r)}else ko(r);else if(3==(c=e.o)||0==c&&0<e.ca||!(1==a&&function Za(r,e){return!(ws(r.i)>=r.i.j-(r.m?1:0)||(r.m?(r.j=e.F.concat(r.j),0):1==r.H||2==r.H||r.C>=(r.cb?0:r.eb)||(r.m=Ls(Ae(r.Na,r,e),Zo(r,r.C)),r.C++,0)))}(r,e)||2==a&&di(r)))switch(t&&0<t.length&&(e=r.i,e.i=e.i.concat(t)),c){case 1:qs(r,5);break;case 4:qs(r,10);break;case 3:qs(r,6);break;default:qs(r,2)}}function Zo(r,e){let t=r.ab+Math.floor(Math.random()*r.hb);return r.isActive()||(t*=2),t*e}function qs(r,e){if(r.l.info("Error code "+e),2==e){var t=null;r.h&&(t=null);var a=Ae(r.pb,r);t||(t=new Ci("//www.google.com/images/cleardot.gif"),Mt.location&&"http"==Mt.location.protocol||Ka(t,"https"),mi(t)),function Di(r,e){const t=new Ao;if(Mt.Image){const a=new Image;a.onload=Me(Ar,t,a,"TestLoadImage: loaded",!0,e),a.onerror=Me(Ar,t,a,"TestLoadImage: error",!1,e),a.onabort=Me(Ar,t,a,"TestLoadImage: abort",!1,e),a.ontimeout=Me(Ar,t,a,"TestLoadImage: timeout",!1,e),Mt.setTimeout(function(){a.ontimeout&&a.ontimeout()},1e4),a.src=r}else e(!1)}(t.toString(),a)}else ci(2);r.H=0,r.h&&r.h.za(e),_a(r),pl(r)}function _a(r){if(r.H=0,r.ma=[],r.h){const e=xt(r.i);(0!=e.length||0!=r.j.length)&&(dn(r.ma,e),dn(r.ma,r.j),r.i.i.length=0,zt(r.j),r.j.length=0),r.h.ya()}}function Yo(r,e,t){var a=t instanceof Ci?Kr(t):new Ci(t);if(""!=a.g)e&&(a.g=e+"."+a.g),zs(a,a.m);else{var c=Mt.location;a=c.protocol,e=e?e+"."+c.hostname:c.hostname,c=+c.port;var f=new Ci(null);a&&Ka(f,a),e&&(f.g=e),c&&zs(f,c),t&&(f.l=t),a=f}return e=r.Da,(t=r.F)&&e&&ni(a,t,e),ni(a,"VER",r.ra),Ya(r,a),a}function va(r,e,t){if(e&&!r.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new V(t&&r.Ha&&!r.va?new Ns({ob:!0}):r.va)).Oa(r.J),e}function Du(){}function Ma(){if(kr&&!(10<=Number(ht)))throw Error("Environmental error: no available transport.")}function ro(r,e){de.call(this),this.g=new fa(e),this.l=r,this.h=e&&e.messageUrlParams||null,r=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(r?r["X-Client-Protocol"]="webchannel":r={"X-Client-Protocol":"webchannel"}),this.g.s=r,r=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(r?r["X-WebChannel-Content-Type"]=e.messageContentType:r={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(r?r["X-WebChannel-Client-Profile"]=e.Ca:r={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=r,(r=e&&e.cc)&&!Mn(r)&&(this.g.o=r),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Mn(e)&&(this.g.F=e,null!==(r=this.h)&&e in r&&e in(r=this.h)&&delete r[e]),this.j=new Zs(this)}function zi(r){Le.call(this),r.__headers__&&(this.headers=r.__headers__,this.statusCode=r.__status__,delete r.__headers__,delete r.__status__);var e=r.__sm__;if(e){e:{for(const t in e){r=t;break e}r=void 0}(this.i=r)&&(r=this.i,e=null!==e&&r in e?e[r]:void 0),this.data=e}else this.data=r}function xa(){xe.call(this),this.status=1}function Zs(r){this.g=r}function Ri(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Ea(r,e,t){t||(t=0);var a=Array(16);if("string"==typeof e)for(var c=0;16>c;++c)a[c]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(c=0;16>c;++c)a[c]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var f=r.g[3],v=(e=r.g[0])+(f^(t=r.g[1])&((c=r.g[2])^f))+a[0]+3614090360&4294967295;v=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=(t=(c=(f=(e=t+(v<<7&4294967295|v>>>25))+((v=f+(c^e&(t^c))+a[1]+3905402710&4294967295)<<12&4294967295|v>>>20))+((v=c+(t^f&(e^t))+a[2]+606105819&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^c&(f^e))+a[3]+3250441966&4294967295)<<22&4294967295|v>>>10))+((v=e+(f^t&(c^f))+a[4]+4118548399&4294967295)<<7&4294967295|v>>>25))+((v=f+(c^e&(t^c))+a[5]+1200080426&4294967295)<<12&4294967295|v>>>20))+((v=c+(t^f&(e^t))+a[6]+2821735955&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^c&(f^e))+a[7]+4249261313&4294967295)<<22&4294967295|v>>>10))+((v=e+(f^t&(c^f))+a[8]+1770035416&4294967295)<<7&4294967295|v>>>25))+((v=f+(c^e&(t^c))+a[9]+2336552879&4294967295)<<12&4294967295|v>>>20))+((v=c+(t^f&(e^t))+a[10]+4294925233&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^c&(f^e))+a[11]+2304563134&4294967295)<<22&4294967295|v>>>10))+((v=e+(f^t&(c^f))+a[12]+1804603682&4294967295)<<7&4294967295|v>>>25))+((v=f+(c^e&(t^c))+a[13]+4254626195&4294967295)<<12&4294967295|v>>>20))+((v=c+(t^f&(e^t))+a[14]+2792965006&4294967295)<<17&4294967295|v>>>15))+((v=t+(e^c&(f^e))+a[15]+1236535329&4294967295)<<22&4294967295|v>>>10))+((v=e+(c^f&(t^c))+a[1]+4129170786&4294967295)<<5&4294967295|v>>>27))+((v=f+(t^c&(e^t))+a[6]+3225465664&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^t&(f^e))+a[11]+643717713&4294967295)<<14&4294967295|v>>>18))+((v=t+(f^e&(c^f))+a[0]+3921069994&4294967295)<<20&4294967295|v>>>12))+((v=e+(c^f&(t^c))+a[5]+3593408605&4294967295)<<5&4294967295|v>>>27))+((v=f+(t^c&(e^t))+a[10]+38016083&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^t&(f^e))+a[15]+3634488961&4294967295)<<14&4294967295|v>>>18))+((v=t+(f^e&(c^f))+a[4]+3889429448&4294967295)<<20&4294967295|v>>>12))+((v=e+(c^f&(t^c))+a[9]+568446438&4294967295)<<5&4294967295|v>>>27))+((v=f+(t^c&(e^t))+a[14]+3275163606&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^t&(f^e))+a[3]+4107603335&4294967295)<<14&4294967295|v>>>18))+((v=t+(f^e&(c^f))+a[8]+1163531501&4294967295)<<20&4294967295|v>>>12))+((v=e+(c^f&(t^c))+a[13]+2850285829&4294967295)<<5&4294967295|v>>>27))+((v=f+(t^c&(e^t))+a[2]+4243563512&4294967295)<<9&4294967295|v>>>23))+((v=c+(e^t&(f^e))+a[7]+1735328473&4294967295)<<14&4294967295|v>>>18))+((v=t+(f^e&(c^f))+a[12]+2368359562&4294967295)<<20&4294967295|v>>>12))+((v=e+(t^c^f)+a[5]+4294588738&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^t^c)+a[8]+2272392833&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^t)+a[11]+1839030562&4294967295)<<16&4294967295|v>>>16))+((v=t+(c^f^e)+a[14]+4259657740&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^c^f)+a[1]+2763975236&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^t^c)+a[4]+1272893353&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^t)+a[7]+4139469664&4294967295)<<16&4294967295|v>>>16))+((v=t+(c^f^e)+a[10]+3200236656&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^c^f)+a[13]+681279174&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^t^c)+a[0]+3936430074&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^t)+a[3]+3572445317&4294967295)<<16&4294967295|v>>>16))+((v=t+(c^f^e)+a[6]+76029189&4294967295)<<23&4294967295|v>>>9))+((v=e+(t^c^f)+a[9]+3654602809&4294967295)<<4&4294967295|v>>>28))+((v=f+(e^t^c)+a[12]+3873151461&4294967295)<<11&4294967295|v>>>21))+((v=c+(f^e^t)+a[15]+530742520&4294967295)<<16&4294967295|v>>>16))+((v=t+(c^f^e)+a[2]+3299628645&4294967295)<<23&4294967295|v>>>9))+((v=e+(c^(t|~f))+a[0]+4096336452&4294967295)<<6&4294967295|v>>>26))+((v=f+(t^(e|~c))+a[7]+1126891415&4294967295)<<10&4294967295|v>>>22))+((v=c+(e^(f|~t))+a[14]+2878612391&4294967295)<<15&4294967295|v>>>17))+((v=t+(f^(c|~e))+a[5]+4237533241&4294967295)<<21&4294967295|v>>>11))+((v=e+(c^(t|~f))+a[12]+1700485571&4294967295)<<6&4294967295|v>>>26))+((v=f+(t^(e|~c))+a[3]+2399980690&4294967295)<<10&4294967295|v>>>22))+((v=c+(e^(f|~t))+a[10]+4293915773&4294967295)<<15&4294967295|v>>>17))+((v=t+(f^(c|~e))+a[1]+2240044497&4294967295)<<21&4294967295|v>>>11))+((v=e+(c^(t|~f))+a[8]+1873313359&4294967295)<<6&4294967295|v>>>26))+((v=f+(t^(e|~c))+a[15]+4264355552&4294967295)<<10&4294967295|v>>>22))+((v=c+(e^(f|~t))+a[6]+2734768916&4294967295)<<15&4294967295|v>>>17))+((v=t+(f^(c|~e))+a[13]+1309151649&4294967295)<<21&4294967295|v>>>11))+((f=(e=t+((v=e+(c^(t|~f))+a[4]+4149444226&4294967295)<<6&4294967295|v>>>26))+((v=f+(t^(e|~c))+a[11]+3174756917&4294967295)<<10&4294967295|v>>>22))^((c=f+((v=c+(e^(f|~t))+a[2]+718787259&4294967295)<<15&4294967295|v>>>17))|~e))+a[9]+3951481745&4294967295,r.g[0]=r.g[0]+e&4294967295,r.g[1]=r.g[1]+(c+(v<<21&4294967295|v>>>11))&4294967295,r.g[2]=r.g[2]+c&4294967295,r.g[3]=r.g[3]+f&4294967295}function Or(r,e){this.h=e;for(var t=[],a=!0,c=r.length-1;0<=c;c--){var f=0|r[c];a&&f==e||(t[c]=f,a=!1)}this.g=t}(We=V.prototype).Oa=function(r){this.M=r},We.ha=function(r,e,t,a){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+r);e=e?e.toUpperCase():"GET",this.I=r,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Je.g(),this.C=function za(r){return r.h||(r.h=r.i())}(this.u?this.u:Je),this.g.onreadystatechange=Ae(this.La,this);try{this.G=!0,this.g.open(e,String(r),!0),this.G=!1}catch(f){return void _r(this,f)}if(r=t||"",t=new Map(this.headers),a)if(Object.getPrototypeOf(a)===Object.prototype)for(var c in a)t.set(c,a[c]);else{if("function"!=typeof a.keys||"function"!=typeof a.get)throw Error("Unknown input type for opt_headers: "+String(a));for(const f of a.keys())t.set(f,a.get(f))}a=Array.from(t.keys()).find(f=>"content-type"==f.toLowerCase()),c=Mt.FormData&&r instanceof Mt.FormData,!(0<=et(lt,e))||a||c||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[f,v]of t)this.g.setRequestHeader(f,v);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Ds(this),0<this.B&&((this.L=function Lt(r){return kr&&"number"==typeof r.timeout&&void 0!==r.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Ae(this.ua,this)):this.A=ki(this.ua,this.B,this)),this.v=!0,this.g.send(r),this.v=!1}catch(f){_r(this,f)}},We.ua=function(){typeof Oe<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ue(this,"timeout"),this.abort(8))},We.abort=function(r){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=r||7,ue(this,"complete"),ue(this,"abort"),Ps(this))},We.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ps(this,!0)),V.$.N.call(this)},We.La=function(){this.s||(this.G||this.v||this.l?Gi(this):this.kb())},We.kb=function(){Gi(this)},We.isActive=function(){return!!this.g},We.da=function(){try{return 2<Zi(this)?this.g.status:-1}catch{return-1}},We.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},We.Wa=function(r){if(this.g){var e=this.g.responseText;return r&&0==e.indexOf(r)&&(e=e.substring(r.length)),H(e)}},We.Ia=function(){return this.m},We.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(We=fa.prototype).ra=8,We.H=1,We.Na=function(r){if(this.m)if(this.m=null,1==this.H){if(!r){this.W=Math.floor(1e5*Math.random()),r=this.W++;const c=new Ft(this,this.l,r);let f=this.s;if(this.U&&(f?(f=Vn(f),Xt(f,this.U)):f=this.U),null!==this.o||this.O||(c.I=f,f=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var a=this.j[t];if(void 0===(a="__data__"in a.map&&"string"==typeof(a=a.map.__data__)?a.length:void 0))break;if(4096<(e+=a)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=Hr(this,c,e),ni(t=Kr(this.I),"RID",r),ni(t,"CVER",22),this.F&&ni(t,"X-HTTP-Session-Id",this.F),Ya(this,t),f&&(this.O?e="headers="+encodeURIComponent(String(fs(f)))+"&"+e:this.o&&da(t,this.o,f)),Xi(this.i,c),this.bb&&ni(t,"TYPE","init"),this.P?(ni(t,"$req",e),ni(t,"SID","null"),c.aa=!0,nr(c,t,null)):nr(c,t,e),this.H=2}}else 3==this.H&&(r?ma(this,r):0==this.j.length||Ra(this.i)||ma(this))},We.Ma=function(){if(this.u=null,gl(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var r=2*this.S;this.l.info("BP detection timer enabled: "+r),this.B=Ls(Ae(this.jb,this),r)}},We.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,ci(10),qa(this),gl(this))},We.ib=function(){null!=this.v&&(this.v=null,qa(this),di(this),ci(19))},We.pb=function(r){r?(this.l.info("Successfully pinged google.com"),ci(2)):(this.l.info("Failed to ping google.com"),ci(1))},We.isActive=function(){return!!this.h&&this.h.isActive(this)},(We=Du.prototype).Ba=function(){},We.Aa=function(){},We.za=function(){},We.ya=function(){},We.isActive=function(){return!0},We.Va=function(){},Ma.prototype.g=function(r,e){return new ro(r,e)},Ke(ro,de),ro.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var r=this.g,e=this.l,t=this.h||void 0;ci(0),r.Y=e,r.na=t||{},r.G=r.aa,r.I=Yo(r,null,r.Y),ga(r)},ro.prototype.close=function(){pa(this.g)},ro.prototype.u=function(r){var e=this.g;if("string"==typeof r){var t={};t.__data__=r,r=t}else this.v&&((t={}).__data__=Be(r),r=t);e.j.push(new class{constructor(r,e){this.g=r,this.map=e}}(e.fb++,r)),3==e.H&&ga(e)},ro.prototype.N=function(){this.g.h=null,delete this.j,pa(this.g),delete this.g,ro.$.N.call(this)},Ke(zi,Le),Ke(xa,xe),Ke(Zs,Du),Zs.prototype.Ba=function(){ue(this.g,"a")},Zs.prototype.Aa=function(r){ue(this.g,new zi(r))},Zs.prototype.za=function(r){ue(this.g,new xa)},Zs.prototype.ya=function(){ue(this.g,"b")},Ke(Ri,function bu(){this.blockSize=-1}),Ri.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},Ri.prototype.j=function(r,e){void 0===e&&(e=r.length);for(var t=e-this.blockSize,a=this.m,c=this.h,f=0;f<e;){if(0==c)for(;f<=t;)Ea(this,r,f),f+=this.blockSize;if("string"==typeof r){for(;f<e;)if(a[c++]=r.charCodeAt(f++),c==this.blockSize){Ea(this,a),c=0;break}}else for(;f<e;)if(a[c++]=r[f++],c==this.blockSize){Ea(this,a),c=0;break}}this.h=c,this.i+=e},Ri.prototype.l=function(){var r=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);r[0]=128;for(var e=1;e<r.length-8;++e)r[e]=0;var t=8*this.i;for(e=r.length-8;e<r.length;++e)r[e]=255&t,t/=256;for(this.j(r),r=Array(16),e=t=0;4>e;++e)for(var a=0;32>a;a+=8)r[t++]=this.g[e]>>>a&255;return r};var N={};function K(r){return-128<=r&&128>r?function Jt(r,e){var t=N;return Object.prototype.hasOwnProperty.call(t,r)?t[r]:t[r]=e(r)}(r,function(e){return new Or([0|e],0>e?-1:0)}):new Or([0|r],0>r?-1:0)}function U(r){if(isNaN(r)||!isFinite(r))return ft;if(0>r)return Zn(U(-r));for(var e=[],t=1,a=0;r>=t;a++)e[a]=r/t|0,t*=Ie;return new Or(e,0)}var Ie=4294967296,ft=K(0),bt=K(1),mn=K(16777216);function tr(r){if(0!=r.h)return!1;for(var e=0;e<r.g.length;e++)if(0!=r.g[e])return!1;return!0}function Yn(r){return-1==r.h}function Zn(r){for(var e=r.g.length,t=[],a=0;a<e;a++)t[a]=~r.g[a];return new Or(t,~r.h).add(bt)}function zn(r,e){return r.add(Zn(e))}function bi(r,e){for(;(65535&r[e])!=r[e];)r[e+1]+=r[e]>>>16,r[e]&=65535,e++}function Nr(r,e){this.g=r,this.h=e}function Wn(r,e){if(tr(e))throw Error("division by zero");if(tr(r))return new Nr(ft,ft);if(Yn(r))return e=Wn(Zn(r),e),new Nr(Zn(e.g),Zn(e.h));if(Yn(e))return e=Wn(r,Zn(e)),new Nr(Zn(e.g),e.h);if(30<r.g.length){if(Yn(r)||Yn(e))throw Error("slowDivide_ only works with positive integers.");for(var t=bt,a=e;0>=a.X(r);)t=Ni(t),a=Ni(a);var c=Bi(t,1),f=Bi(a,1);for(a=Bi(a,2),t=Bi(t,2);!tr(a);){var v=f.add(a);0>=v.X(r)&&(c=c.add(t),f=v),a=Bi(a,1),t=Bi(t,1)}return e=zn(r,c.R(e)),new Nr(c,e)}for(c=ft;0<=r.X(e);){for(t=Math.max(1,Math.floor(r.ea()/e.ea())),a=48>=(a=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,a-48),v=(f=U(t)).R(e);Yn(v)||0<v.X(r);)v=(f=U(t-=a)).R(e);tr(f)&&(f=bt),c=c.add(f),r=zn(r,v)}return new Nr(c,r)}function Ni(r){for(var e=r.g.length+1,t=[],a=0;a<e;a++)t[a]=r.D(a)<<1|r.D(a-1)>>>31;return new Or(t,r.h)}function Bi(r,e){var t=e>>5;e%=32;for(var a=r.g.length-t,c=[],f=0;f<a;f++)c[f]=0<e?r.D(f+t)>>>e|r.D(f+t+1)<<32-e:r.D(f+t);return new Or(c,r.h)}(We=Or.prototype).ea=function(){if(Yn(this))return-Zn(this).ea();for(var r=0,e=1,t=0;t<this.g.length;t++){var a=this.D(t);r+=(0<=a?a:Ie+a)*e,e*=Ie}return r},We.toString=function(r){if(2>(r=r||10)||36<r)throw Error("radix out of range: "+r);if(tr(this))return"0";if(Yn(this))return"-"+Zn(this).toString(r);for(var e=U(Math.pow(r,6)),t=this,a="";;){var c=Wn(t,e).g,f=((0<(t=zn(t,c.R(e))).g.length?t.g[0]:t.h)>>>0).toString(r);if(tr(t=c))return f+a;for(;6>f.length;)f="0"+f;a=f+a}},We.D=function(r){return 0>r?0:r<this.g.length?this.g[r]:this.h},We.X=function(r){return Yn(r=zn(this,r))?-1:tr(r)?0:1},We.abs=function(){return Yn(this)?Zn(this):this},We.add=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0,c=0;c<=e;c++){var f=a+(65535&this.D(c))+(65535&r.D(c)),v=(f>>>16)+(this.D(c)>>>16)+(r.D(c)>>>16);a=v>>>16,t[c]=(v&=65535)<<16|(f&=65535)}return new Or(t,-2147483648&t[t.length-1]?-1:0)},We.R=function(r){if(tr(this)||tr(r))return ft;if(Yn(this))return Yn(r)?Zn(this).R(Zn(r)):Zn(Zn(this).R(r));if(Yn(r))return Zn(this.R(Zn(r)));if(0>this.X(mn)&&0>r.X(mn))return U(this.ea()*r.ea());for(var e=this.g.length+r.g.length,t=[],a=0;a<2*e;a++)t[a]=0;for(a=0;a<this.g.length;a++)for(var c=0;c<r.g.length;c++){var f=this.D(a)>>>16,v=65535&this.D(a),M=r.D(c)>>>16,j=65535&r.D(c);t[2*a+2*c]+=v*j,bi(t,2*a+2*c),t[2*a+2*c+1]+=f*j,bi(t,2*a+2*c+1),t[2*a+2*c+1]+=v*M,bi(t,2*a+2*c+1),t[2*a+2*c+2]+=f*M,bi(t,2*a+2*c+2)}for(a=0;a<e;a++)t[a]=t[2*a+1]<<16|t[2*a];for(a=e;a<2*e;a++)t[a]=0;return new Or(t,0)},We.gb=function(r){return Wn(this,r).h},We.and=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)&r.D(a);return new Or(t,this.h&r.h)},We.or=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)|r.D(a);return new Or(t,this.h|r.h)},We.xor=function(r){for(var e=Math.max(this.g.length,r.g.length),t=[],a=0;a<e;a++)t[a]=this.D(a)^r.D(a);return new Or(t,this.h^r.h)},Ma.prototype.createWebChannel=Ma.prototype.g,ro.prototype.send=ro.prototype.u,ro.prototype.open=ro.prototype.m,ro.prototype.close=ro.prototype.close,Mo.NO_ERROR=0,Mo.TIMEOUT=8,Mo.HTTP_ERROR=6,ru.COMPLETE="complete",Sa.EventType=xo,xo.OPEN="a",xo.CLOSE="b",xo.ERROR="c",xo.MESSAGE="d",de.prototype.listen=de.prototype.O,V.prototype.listenOnce=V.prototype.P,V.prototype.getLastError=V.prototype.Sa,V.prototype.getLastErrorCode=V.prototype.Ia,V.prototype.getStatus=V.prototype.da,V.prototype.getResponseJson=V.prototype.Wa,V.prototype.getResponseText=V.prototype.ja,V.prototype.send=V.prototype.ha,V.prototype.setWithCredentials=V.prototype.Oa,Ri.prototype.digest=Ri.prototype.l,Ri.prototype.reset=Ri.prototype.reset,Ri.prototype.update=Ri.prototype.j,Or.prototype.add=Or.prototype.add,Or.prototype.multiply=Or.prototype.R,Or.prototype.modulo=Or.prototype.gb,Or.prototype.compare=Or.prototype.X,Or.prototype.toNumber=Or.prototype.ea,Or.prototype.toString=Or.prototype.toString,Or.prototype.getBits=Or.prototype.D,Or.fromNumber=U,Or.fromString=function te(r,e){if(0==r.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==r.charAt(0))return Zn(te(r.substring(1),e));if(0<=r.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=U(Math.pow(e,8)),a=ft,c=0;c<r.length;c+=8){var f=Math.min(8,r.length-c),v=parseInt(r.substring(c,c+f),e);8>f?(f=U(Math.pow(e,f)),a=a.R(f).add(U(v))):a=(a=a.R(t)).add(U(v))}return a};var io=Et.createWebChannelTransport=function(){return new Ma},ts=Et.getStatEventTarget=function(){return Qi()},Qo=Et.ErrorCode=Mo,wo=Et.EventType=ru,Nl=Et.Event=Xr,so=Et.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},Ja=Et.FetchXmlHttpFactory=Ns,Fo=Et.WebChannel=Sa,ml=Et.XhrIo=V,Pl=Et.Md5=Ri,Xa=Et.Integer=Or;const ou="@firebase/firestore";class ns{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ns.UNAUTHENTICATED=new ns(null),ns.GOOGLE_CREDENTIALS=new ns("google-credentials-uid"),ns.FIRST_PARTY=new ns("first-party-uid"),ns.MOCK_USER=new ns("mock-user");let Tu="9.23.0";const bs=new De.Yd("@firebase/firestore");function au(){return bs.logLevel}function Vt(r,...e){if(bs.logLevel<=De.in.DEBUG){const t=e.map(Pc);bs.debug(`Firestore (${Tu}): ${r}`,...t)}}function Pi(r,...e){if(bs.logLevel<=De.in.ERROR){const t=e.map(Pc);bs.error(`Firestore (${Tu}): ${r}`,...t)}}function ps(r,...e){if(bs.logLevel<=De.in.WARN){const t=e.map(Pc);bs.warn(`Firestore (${Tu}): ${r}`,...t)}}function Pc(r){if("string"==typeof r)return r;try{return JSON.stringify(r)}catch{return r}}function Ot(r="Unexpected state"){const e=`FIRESTORE (${Tu}) INTERNAL ASSERTION FAILED: `+r;throw Pi(e),new Error(e)}function Sn(r,e){r||Ot()}function nn(r,e){return r}const at={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Tt extends Fe.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class vr{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class Jo{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class oo{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(ns.UNAUTHENTICATED))}shutdown(){}}class kl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class el{constructor(e){this.t=e,this.currentUser=ns.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var a=this;let c=this.i;const f=q=>this.i!==c?(c=this.i,t(q)):Promise.resolve();let v=new vr;this.o=()=>{this.i++,this.currentUser=this.u(),v.resolve(),v=new vr,e.enqueueRetryable(()=>f(this.currentUser))};const M=()=>{const q=v;e.enqueueRetryable((0,Ue.Z)(function*(){yield q.promise,yield f(a.currentUser)}))},j=q=>{Vt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=q,this.auth.addAuthTokenListener(this.o),M()};this.t.onInit(q=>j(q)),setTimeout(()=>{if(!this.auth){const q=this.t.getImmediate({optional:!0});q?j(q):(Vt("FirebaseAuthCredentialsProvider","Auth not yet detected"),v.resolve(),v=new vr)}},0),M()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(a=>this.i!==e?(Vt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):a?(Sn("string"==typeof a.accessToken),new Jo(a.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Sn(null===e||"string"==typeof e),new ns(e)}}class Fl{constructor(e,t,a){this.h=e,this.l=t,this.m=a,this.type="FirstParty",this.user=ns.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class Su{constructor(e,t,a){this.h=e,this.l=t,this.m=a}getToken(){return Promise.resolve(new Fl(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(ns.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ri{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class ld{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const a=f=>{null!=f.error&&Vt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${f.error.message}`);const v=f.token!==this.T;return this.T=f.token,Vt("FirebaseAppCheckTokenProvider",`Received ${v?"new":"existing"} token.`),v?t(f.token):Promise.resolve()};this.o=f=>{e.enqueueRetryable(()=>a(f))};const c=f=>{Vt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=f,this.appCheck.addTokenListener(this.o)};this.I.onInit(f=>c(f)),setTimeout(()=>{if(!this.appCheck){const f=this.I.getImmediate({optional:!0});f?c(f):Vt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Sn("string"==typeof t.token),this.T=t.token,new ri(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function Ll(r){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(r);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let a=0;a<r;a++)t[a]=Math.floor(256*Math.random());return t}class Ru{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let a="";for(;a.length<20;){const c=Ll(40);for(let f=0;f<c.length;++f)a.length<20&&c[f]<t&&(a+=e.charAt(c[f]%e.length))}return a}}function ir(r,e){return r<e?-1:r>e?1:0}function Vl(r,e,t){return r.length===e.length&&r.every((a,c)=>t(a,e[c]))}function Oc(r){return r+"\0"}class Qr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new Tt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new Tt(at.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new Tt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Tt(at.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Qr.fromMillis(Date.now())}static fromDate(e){return Qr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),a=Math.floor(1e6*(e-1e3*t));return new Qr(t,a)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ir(this.nanoseconds,e.nanoseconds):ir(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Nn{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Nn(e)}static min(){return new Nn(new Qr(0,0))}static max(){return new Nn(new Qr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Na{constructor(e,t,a){void 0===t?t=0:t>e.length&&Ot(),void 0===a?a=e.length-t:a>e.length-t&&Ot(),this.segments=e,this.offset=t,this.len=a}get length(){return this.len}isEqual(e){return 0===Na.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Na?e.forEach(a=>{t.push(a)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,a=this.limit();t<a;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const a=Math.min(e.length,t.length);for(let c=0;c<a;c++){const f=e.get(c),v=t.get(c);if(f<v)return-1;if(f>v)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class $n extends Na{construct(e,t,a){return new $n(e,t,a)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const a of e){if(a.indexOf("//")>=0)throw new Tt(at.INVALID_ARGUMENT,`Invalid segment (${a}). Paths must not contain // in them.`);t.push(...a.split("/").filter(c=>c.length>0))}return new $n(t)}static emptyPath(){return new $n([])}}const Mu=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class _i extends Na{construct(e,t,a){return new _i(e,t,a)}static isValidIdentifier(e){return Mu.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),_i.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new _i(["__name__"])}static fromServerFormat(e){const t=[];let a="",c=0;const f=()=>{if(0===a.length)throw new Tt(at.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(a),a=""};let v=!1;for(;c<e.length;){const M=e[c];if("\\"===M){if(c+1===e.length)throw new Tt(at.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const j=e[c+1];if("\\"!==j&&"."!==j&&"`"!==j)throw new Tt(at.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);a+=j,c+=2}else"`"===M?(v=!v,c++):"."!==M||v?(a+=M,c++):(f(),c++)}if(f(),v)throw new Tt(at.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new _i(t)}static emptyPath(){return new _i([])}}class on{constructor(e){this.path=e}static fromPath(e){return new on($n.fromString(e))}static fromName(e){return new on($n.fromString(e).popFirst(5))}static empty(){return new on($n.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===$n.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return $n.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new on(new $n(e.slice()))}}class Ul{constructor(e,t,a,c){this.indexId=e,this.collectionGroup=t,this.fields=a,this.indexState=c}}function Ts(r){return r.fields.find(e=>2===e.kind)}function Bs(r){return r.fields.filter(e=>2!==e.kind)}Ul.UNKNOWN_ID=-1;class Bl{constructor(e,t){this.fieldPath=e,this.kind=t}}class Hl{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Hl(0,ao.min())}}function lc(r,e){const t=r.toTimestamp().seconds,a=r.toTimestamp().nanoseconds+1,c=Nn.fromTimestamp(1e9===a?new Qr(t+1,0):new Qr(t,a));return new ao(c,on.empty(),e)}function kc(r){return new ao(r.readTime,r.key,-1)}class ao{constructor(e,t,a){this.readTime=e,this.documentKey=t,this.largestBatchId=a}static min(){return new ao(Nn.min(),on.empty(),-1)}static max(){return new ao(Nn.max(),on.empty(),-1)}}function ud(r,e){let t=r.readTime.compareTo(e.readTime);return 0!==t?t:(t=on.comparator(r.documentKey,e.documentKey),0!==t?t:ir(r.largestBatchId,e.largestBatchId))}const yl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class js{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Xo(r){return A.apply(this,arguments)}function A(){return A=(0,Ue.Z)(function*(r){if(r.code!==at.FAILED_PRECONDITION||r.message!==yl)throw r;Vt("LocalStore","Unexpectedly lost primary lease")}),A.apply(this,arguments)}class I{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ot(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new I((a,c)=>{this.nextCallback=f=>{this.wrapSuccess(e,f).next(a,c)},this.catchCallback=f=>{this.wrapFailure(t,f).next(a,c)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof I?t:I.resolve(t)}catch(t){return I.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):I.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):I.reject(t)}static resolve(e){return new I((t,a)=>{t(e)})}static reject(e){return new I((t,a)=>{a(e)})}static waitFor(e){return new I((t,a)=>{let c=0,f=0,v=!1;e.forEach(M=>{++c,M.next(()=>{++f,v&&f===c&&t()},j=>a(j))}),v=!0,f===c&&t()})}static or(e){let t=I.resolve(!1);for(const a of e)t=t.next(c=>c?I.resolve(c):a());return t}static forEach(e,t){const a=[];return e.forEach((c,f)=>{a.push(t.call(this,c,f))}),this.waitFor(a)}static mapArray(e,t){return new I((a,c)=>{const f=e.length,v=new Array(f);let M=0;for(let j=0;j<f;j++){const q=j;t(e[q]).next(ie=>{v[q]=ie,++M,M===f&&a(v)},ie=>c(ie))}})}static doWhile(e,t){return new I((a,c)=>{const f=()=>{!0===e()?t().next(()=>{f()},c):a()};f()})}}class b{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new vr,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new ee(e,t.error)):this.v.resolve()},this.transaction.onerror=a=>{const c=Kn(a.target.error);this.v.reject(new ee(e,c))}}static open(e,t,a,c){try{return new b(t,e.transaction(c,a))}catch(f){throw new ee(t,f)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(Vt("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new ve(t)}}class P{constructor(e,t,a){this.name=e,this.version=t,this.V=a,12.2===P.S((0,Fe.z$)())&&Pi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return Vt("SimpleDb","Removing database:",e),ut(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,Fe.hl)())return!1;if(P.C())return!0;const e=(0,Fe.z$)(),t=P.S(e),a=0<t&&t<10,c=P.N(e),f=0<c&&c<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||a||f)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),a=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(a)}static N(e){const t=e.match(/Android ([\d.]+)/i),a=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(a)}$(e){var t=this;return(0,Ue.Z)(function*(){return t.db||(Vt("SimpleDb","Opening database:",t.name),t.db=yield new Promise((a,c)=>{const f=indexedDB.open(t.name,t.version);f.onsuccess=v=>{a(v.target.result)},f.onblocked=()=>{c(new ee(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},f.onerror=v=>{const M=v.target.error;c("VersionError"===M.name?new Tt(at.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===M.name?new Tt(at.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+M):new ee(e,M))},f.onupgradeneeded=v=>{Vt("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',v.oldVersion),t.V.O(v.target.result,f.transaction,v.oldVersion,t.version).next(()=>{Vt("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=a=>t.F(a)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,a,c){var f=this;return(0,Ue.Z)(function*(){const v="readonly"===t;let M=0;for(;;){++M;try{f.db=yield f.$(e);const j=b.open(f.db,e,v?"readonly":"readwrite",a),q=c(j).next(ie=>(j.P(),ie)).catch(ie=>(j.abort(ie),I.reject(ie))).toPromise();return q.catch(()=>{}),yield j.R,q}catch(j){const q=j,ie="FirebaseError"!==q.name&&M<3;if(Vt("SimpleDb","Transaction failed with error:",q.message,"Retrying:",ie),f.close(),!ie)return Promise.reject(q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class B{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return ut(this.L.delete())}}class ee extends Tt{constructor(e,t){super(at.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function ce(r){return"IndexedDbTransactionError"===r.name}class ve{constructor(e){this.store=e}put(e,t){let a;return void 0!==t?(Vt("SimpleDb","PUT",this.store.name,e,t),a=this.store.put(t,e)):(Vt("SimpleDb","PUT",this.store.name,"<auto-key>",e),a=this.store.put(e)),ut(a)}add(e){return Vt("SimpleDb","ADD",this.store.name,e,e),ut(this.store.add(e))}get(e){return ut(this.store.get(e)).next(t=>(void 0===t&&(t=null),Vt("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return Vt("SimpleDb","DELETE",this.store.name,e),ut(this.store.delete(e))}count(){return Vt("SimpleDb","COUNT",this.store.name),ut(this.store.count())}j(e,t){const a=this.options(e,t);if(a.index||"function"!=typeof this.store.getAll){const c=this.cursor(a),f=[];return this.W(c,(v,M)=>{f.push(M)}).next(()=>f)}{const c=this.store.getAll(a.range);return new I((f,v)=>{c.onerror=M=>{v(M.target.error)},c.onsuccess=M=>{f(M.target.result)}})}}H(e,t){const a=this.store.getAll(e,null===t?void 0:t);return new I((c,f)=>{a.onerror=v=>{f(v.target.error)},a.onsuccess=v=>{c(v.target.result)}})}J(e,t){Vt("SimpleDb","DELETE ALL",this.store.name);const a=this.options(e,t);a.Y=!1;const c=this.cursor(a);return this.W(c,(f,v,M)=>M.delete())}X(e,t){let a;t?a=e:(a={},t=e);const c=this.cursor(a);return this.W(c,t)}Z(e){const t=this.cursor({});return new I((a,c)=>{t.onerror=f=>{const v=Kn(f.target.error);c(v)},t.onsuccess=f=>{const v=f.target.result;v?e(v.primaryKey,v.value).next(M=>{M?v.continue():a()}):a()}})}W(e,t){const a=[];return new I((c,f)=>{e.onerror=v=>{f(v.target.error)},e.onsuccess=v=>{const M=v.target.result;if(!M)return void c();const j=new B(M),q=t(M.primaryKey,M.value,j);if(q instanceof I){const ie=q.catch(we=>(j.done(),I.reject(we)));a.push(ie)}j.isDone?c():null===j.K?M.continue():M.continue(j.K)}}).next(()=>I.waitFor(a))}options(e,t){let a;return void 0!==e&&("string"==typeof e?a=e:t=e),{index:a,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const a=this.store.index(e.index);return e.Y?a.openKeyCursor(e.range,t):a.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function ut(r){return new I((e,t)=>{r.onsuccess=a=>{e(a.target.result)},r.onerror=a=>{const c=Kn(a.target.error);t(c)}})}let qt=!1;function Kn(r){const e=P.S((0,Fe.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(r.message.indexOf(t)>=0){const a=new Tt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return qt||(qt=!0,setTimeout(()=>{throw a},0)),a}}return r}class ln{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;Vt("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,Ue.Z)(function*(){t.task=null;try{Vt("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(a){ce(a)?Vt("IndexBackiller","Ignoring IndexedDB error during index backfill: ",a):yield Xo(a)}yield t.et(6e4)}))}}class Er{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,Ue.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",a=>t.st(a,e))})()}st(e,t){const a=new Set;let c=t,f=!0;return I.doWhile(()=>!0===f&&c>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(v=>{if(null!==v&&!a.has(v))return Vt("IndexBackiller",`Processing collection: ${v}`),this.it(e,v,c).next(M=>{c-=M,a.add(v)});f=!1})).next(()=>t-c)}it(e,t,a){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(c=>this.localStore.localDocuments.getNextDocuments(e,t,c,a).next(f=>{const v=f.changes;return this.localStore.indexManager.updateIndexEntries(e,v).next(()=>this.rt(c,f)).next(M=>(Vt("IndexBackiller",`Updating offset: ${M}`),this.localStore.indexManager.updateCollectionGroup(e,t,M))).next(()=>v.size)}))}rt(e,t){let a=e;return t.changes.forEach((c,f)=>{const v=kc(f);ud(v,a)>0&&(a=v)}),new ao(a.readTime,a.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Lr=(()=>{class r{constructor(t,a){this.previousValue=t,a&&(a.sequenceNumberHandler=c=>this.ot(c),this.ut=c=>a.writeSequenceNumber(c))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return r.ct=-1,r})();function Ti(r){return null==r}function ea(r){return 0===r&&1/r==-1/0}function Lo(r){return"number"==typeof r&&Number.isInteger(r)&&!ea(r)&&r<=Number.MAX_SAFE_INTEGER&&r>=Number.MIN_SAFE_INTEGER}function rs(r){let e="";for(let t=0;t<r.length;t++)e.length>0&&(e=_l(e)),e=wa(r.get(t),e);return _l(e)}function wa(r,e){let t=e;const a=r.length;for(let c=0;c<a;c++){const f=r.charAt(c);switch(f){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=f}}return t}function _l(r){return r+"\x01\x01"}function hi(r){const e=r.length;if(Sn(e>=2),2===e)return Sn("\x01"===r.charAt(0)&&"\x01"===r.charAt(1)),$n.emptyPath();const t=e-2,a=[];let c="";for(let f=0;f<e;){const v=r.indexOf("\x01",f);switch((v<0||v>t)&&Ot(),r.charAt(v+1)){case"\x01":const M=r.substring(f,v);let j;0===c.length?j=M:(c+=M,j=c,c=""),a.push(j);break;case"\x10":c+=r.substring(f,v),c+="\0";break;case"\x11":c+=r.substring(f,v+1);break;default:Ot()}f=v+2}return new $n(a)}const lu=["userId","batchId"];function Yi(r,e){return[r,rs(e)]}function $d(r,e,t){return[r,rs(e),t]}const cd={},Fc=["prefixPath","collectionGroup","readTime","documentId"],uu=["prefixPath","collectionGroup","documentId"],Gd=["collectionGroup","readTime","prefixPath","documentId"],Lc=["canonicalId","targetId"],xu=["targetId","path"],Gh=["path","targetId"],Pa=["collectionId","parent"],dd=["indexId","uid"],Nu=["uid","sequenceNumber"],zd=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Vc=["indexId","uid","orderedDocumentKey"],vl=["userId","collectionPath","documentId"],uc=["userId","collectionPath","largestBatchId"],cc=["userId","collectionGroup","largestBatchId"],Uc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Ff=[...Uc,"documentOverlays"],Ia=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],dc=Ia,Lf=[...dc,"indexConfiguration","indexState","indexEntries"];class hd extends js{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function Ss(r,e){const t=nn(r);return P.M(t.ht,e)}function Wd(r){let e=0;for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e++;return e}function $l(r,e){for(const t in r)Object.prototype.hasOwnProperty.call(r,t)&&e(t,r[t])}function Kd(r){for(const e in r)if(Object.prototype.hasOwnProperty.call(r,e))return!1;return!0}class Si{constructor(e,t){this.comparator=e,this.root=t||is.EMPTY}insert(e,t){return new Si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,is.BLACK,null,null))}remove(e){return new Si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,is.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const a=this.comparator(e,t.key);if(0===a)return t.value;a<0?t=t.left:a>0&&(t=t.right)}return null}indexOf(e){let t=0,a=this.root;for(;!a.isEmpty();){const c=this.comparator(e,a.key);if(0===c)return t+a.left.size;c<0?a=a.left:(t+=a.left.size+1,a=a.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,a)=>(e(t,a),!1))}toString(){const e=[];return this.inorderTraversal((t,a)=>(e.push(`${t}:${a}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Pu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Pu(this.root,e,this.comparator,!1)}getReverseIterator(){return new Pu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Pu(this.root,e,this.comparator,!0)}}class Pu{constructor(e,t,a,c){this.isReverse=c,this.nodeStack=[];let f=1;for(;!e.isEmpty();)if(f=t?a(e.key,t):1,t&&c&&(f*=-1),f<0)e=this.isReverse?e.left:e.right;else{if(0===f){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class is{constructor(e,t,a,c,f){this.key=e,this.value=t,this.color=a??is.RED,this.left=c??is.EMPTY,this.right=f??is.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,a,c,f){return new is(e??this.key,t??this.value,a??this.color,c??this.left,f??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,a){let c=this;const f=a(e,c.key);return c=f<0?c.copy(null,null,null,c.left.insert(e,t,a),null):0===f?c.copy(null,t,null,null,null):c.copy(null,null,null,null,c.right.insert(e,t,a)),c.fixUp()}removeMin(){if(this.left.isEmpty())return is.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let a,c=this;if(t(e,c.key)<0)c.left.isEmpty()||c.left.isRed()||c.left.left.isRed()||(c=c.moveRedLeft()),c=c.copy(null,null,null,c.left.remove(e,t),null);else{if(c.left.isRed()&&(c=c.rotateRight()),c.right.isEmpty()||c.right.isRed()||c.right.left.isRed()||(c=c.moveRedRight()),0===t(e,c.key)){if(c.right.isEmpty())return is.EMPTY;a=c.right.min(),c=c.copy(a.key,a.value,null,null,c.right.removeMin())}c=c.copy(null,null,null,null,c.right.remove(e,t))}return c.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,is.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,is.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ot();const e=this.left.check();if(e!==this.right.check())throw Ot();return e+(this.isRed()?0:1)}}is.EMPTY=null,is.RED=!0,is.BLACK=!1,is.EMPTY=new class{constructor(){this.size=0}get key(){throw Ot()}get value(){throw Ot()}get color(){throw Ot()}get left(){throw Ot()}get right(){throw Ot()}copy(r,e,t,a,c){return this}insert(r,e,t){return new is(r,e)}remove(r,e){return this}isEmpty(){return!0}inorderTraversal(r){return!1}reverseTraversal(r){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class fi{constructor(e){this.comparator=e,this.data=new Si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,a)=>(e(t),!1))}forEachInRange(e,t){const a=this.data.getIteratorFrom(e[0]);for(;a.hasNext();){const c=a.getNext();if(this.comparator(c.key,e[1])>=0)return;t(c.key)}}forEachWhile(e,t){let a;for(a=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();a.hasNext();)if(!e(a.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new cu(this.data.getIterator())}getIteratorFrom(e){return new cu(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(a=>{t=t.add(a)}),t}isEqual(e){if(!(e instanceof fi)||this.size!==e.size)return!1;const t=this.data.getIterator(),a=e.data.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(0!==this.comparator(c,f))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new fi(this.comparator);return t.data=e,t}}class cu{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function tl(r){return r.hasNext()?r.getNext():void 0}class Hs{constructor(e){this.fields=e,e.sort(_i.comparator)}static empty(){return new Hs([])}unionWith(e){let t=new fi(_i.comparator);for(const a of this.fields)t=t.add(a);for(const a of e)t=t.add(a);return new Hs(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Vl(this.fields,e.fields,(t,a)=>t.isEqual(a))}}class Oa extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class gs{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new Oa("Invalid base64 string: "+c):c}}(e);return new gs(t)}static fromUint8Array(e){const t=function(a){let c="";for(let f=0;f<a.length;++f)c+=String.fromCharCode(a[f]);return c}(e);return new gs(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let a=0;a<e.length;a++)t[a]=e.charCodeAt(a);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ir(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}gs.EMPTY_BYTE_STRING=new gs("");const Vf=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ta(r){if(Sn(!!r),"string"==typeof r){let e=0;const t=Vf.exec(r);if(Sn(!!t),t[1]){let c=t[1];c=(c+"000000000").substr(0,9),e=Number(c)}const a=new Date(r);return{seconds:Math.floor(a.getTime()/1e3),nanos:e}}return{seconds:As(r.seconds),nanos:As(r.nanos)}}function As(r){return"number"==typeof r?r:"string"==typeof r?Number(r):0}function du(r){return"string"==typeof r?gs.fromBase64String(r):gs.fromUint8Array(r)}function El(r){var e,t;return"server_timestamp"===(null===(t=((null===(e=r?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function ka(r){const e=r.mapValue.fields.__previous_value__;return El(e)?ka(e):e}function jc(r){const e=ta(r.mapValue.fields.__local_write_time__.timestampValue);return new Qr(e.seconds,e.nanos)}class Bp{constructor(e,t,a,c,f,v,M,j,q){this.databaseId=e,this.appId=t,this.persistenceKey=a,this.host=c,this.ssl=f,this.forceLongPolling=v,this.autoDetectLongPolling=M,this.longPollingOptions=j,this.useFetchStreams=q}}class hu{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new hu("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof hu&&e.projectId===this.projectId&&e.database===this.database}}const Vo={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},wl={nullValue:"NULL_VALUE"};function Io(r){return"nullValue"in r?0:"booleanValue"in r?1:"integerValue"in r||"doubleValue"in r?2:"timestampValue"in r?3:"stringValue"in r?5:"bytesValue"in r?6:"referenceValue"in r?7:"geoPointValue"in r?8:"arrayValue"in r?9:"mapValue"in r?El(r)?4:en(r)?9007199254740991:10:Ot()}function Fa(r,e){if(r===e)return!0;const t=Io(r);if(t!==Io(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return r.booleanValue===e.booleanValue;case 4:return jc(r).isEqual(jc(e));case 3:return function(a,c){if("string"==typeof a.timestampValue&&"string"==typeof c.timestampValue&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const f=ta(a.timestampValue),v=ta(c.timestampValue);return f.seconds===v.seconds&&f.nanos===v.nanos}(r,e);case 5:return r.stringValue===e.stringValue;case 6:return c=e,du(r.bytesValue).isEqual(du(c.bytesValue));case 7:return r.referenceValue===e.referenceValue;case 8:return function(a,c){return As(a.geoPointValue.latitude)===As(c.geoPointValue.latitude)&&As(a.geoPointValue.longitude)===As(c.geoPointValue.longitude)}(r,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return As(a.integerValue)===As(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const f=As(a.doubleValue),v=As(c.doubleValue);return f===v?ea(f)===ea(v):isNaN(f)&&isNaN(v)}return!1}(r,e);case 9:return Vl(r.arrayValue.values||[],e.arrayValue.values||[],Fa);case 10:return function(a,c){const f=a.mapValue.fields||{},v=c.mapValue.fields||{};if(Wd(f)!==Wd(v))return!1;for(const M in f)if(f.hasOwnProperty(M)&&(void 0===v[M]||!Fa(f[M],v[M])))return!1;return!0}(r,e);default:return Ot()}var c}function Gl(r,e){return void 0!==(r.values||[]).find(t=>Fa(t,e))}function $s(r,e){if(r===e)return 0;const t=Io(r),a=Io(e);if(t!==a)return ir(t,a);switch(t){case 0:case 9007199254740991:return 0;case 1:return ir(r.booleanValue,e.booleanValue);case 2:return function(c,f){const v=As(c.integerValue||c.doubleValue),M=As(f.integerValue||f.doubleValue);return v<M?-1:v>M?1:v===M?0:isNaN(v)?isNaN(M)?0:-1:1}(r,e);case 3:return Ou(r.timestampValue,e.timestampValue);case 4:return Ou(jc(r),jc(e));case 5:return ir(r.stringValue,e.stringValue);case 6:return function(c,f){const v=du(c),M=du(f);return v.compareTo(M)}(r.bytesValue,e.bytesValue);case 7:return function(c,f){const v=c.split("/"),M=f.split("/");for(let j=0;j<v.length&&j<M.length;j++){const q=ir(v[j],M[j]);if(0!==q)return q}return ir(v.length,M.length)}(r.referenceValue,e.referenceValue);case 8:return function(c,f){const v=ir(As(c.latitude),As(f.latitude));return 0!==v?v:ir(As(c.longitude),As(f.longitude))}(r.geoPointValue,e.geoPointValue);case 9:return function(c,f){const v=c.values||[],M=f.values||[];for(let j=0;j<v.length&&j<M.length;++j){const q=$s(v[j],M[j]);if(q)return q}return ir(v.length,M.length)}(r.arrayValue,e.arrayValue);case 10:return function(c,f){if(c===Vo.mapValue&&f===Vo.mapValue)return 0;if(c===Vo.mapValue)return 1;if(f===Vo.mapValue)return-1;const v=c.fields||{},M=Object.keys(v),j=f.fields||{},q=Object.keys(j);M.sort(),q.sort();for(let ie=0;ie<M.length&&ie<q.length;++ie){const we=ir(M[ie],q[ie]);if(0!==we)return we;const nt=$s(v[M[ie]],j[q[ie]]);if(0!==nt)return nt}return ir(M.length,q.length)}(r.mapValue,e.mapValue);default:throw Ot()}}function Ou(r,e){if("string"==typeof r&&"string"==typeof e&&r.length===e.length)return ir(r,e);const t=ta(r),a=ta(e),c=ir(t.seconds,a.seconds);return 0!==c?c:ir(t.nanos,a.nanos)}function Uo(r){return qd(r)}function qd(r){return"nullValue"in r?"null":"booleanValue"in r?""+r.booleanValue:"integerValue"in r?""+r.integerValue:"doubleValue"in r?""+r.doubleValue:"timestampValue"in r?function(a){const c=ta(a);return`time(${c.seconds},${c.nanos})`}(r.timestampValue):"stringValue"in r?r.stringValue:"bytesValue"in r?du(r.bytesValue).toBase64():"referenceValue"in r?on.fromName(r.referenceValue).toString():"geoPointValue"in r?`geo(${(e=r.geoPointValue).latitude},${e.longitude})`:"arrayValue"in r?function(a){let c="[",f=!0;for(const v of a.values||[])f?f=!1:c+=",",c+=qd(v);return c+"]"}(r.arrayValue):"mapValue"in r?function(a){const c=Object.keys(a.fields||{}).sort();let f="{",v=!0;for(const M of c)v?v=!1:f+=",",f+=`${M}:${qd(a.fields[M])}`;return f+"}"}(r.mapValue):Ot();var e}function k(r,e){return{referenceValue:`projects/${r.projectId}/databases/${r.database}/documents/${e.path.canonicalString()}`}}function Z(r){return!!r&&"integerValue"in r}function ae(r){return!!r&&"arrayValue"in r}function be(r){return!!r&&"nullValue"in r}function ze(r){return!!r&&"doubleValue"in r&&isNaN(Number(r.doubleValue))}function yt(r){return!!r&&"mapValue"in r}function Yt(r){if(r.geoPointValue)return{geoPointValue:Object.assign({},r.geoPointValue)};if(r.timestampValue&&"object"==typeof r.timestampValue)return{timestampValue:Object.assign({},r.timestampValue)};if(r.mapValue){const e={mapValue:{fields:{}}};return $l(r.mapValue.fields,(t,a)=>e.mapValue.fields[t]=Yt(a)),e}if(r.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(r.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Yt(r.arrayValue.values[t]);return e}return Object.assign({},r)}function en(r){return"__max__"===(((r.mapValue||{}).fields||{}).__type__||{}).stringValue}function hn(r){return"nullValue"in r?wl:"booleanValue"in r?{booleanValue:!1}:"integerValue"in r||"doubleValue"in r?{doubleValue:NaN}:"timestampValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in r?{stringValue:""}:"bytesValue"in r?{bytesValue:""}:"referenceValue"in r?k(hu.empty(),on.empty()):"geoPointValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in r?{arrayValue:{}}:"mapValue"in r?{mapValue:{}}:Ot()}function Pn(r){return"nullValue"in r?{booleanValue:!1}:"booleanValue"in r?{doubleValue:NaN}:"integerValue"in r||"doubleValue"in r?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in r?{stringValue:""}:"stringValue"in r?{bytesValue:""}:"bytesValue"in r?k(hu.empty(),on.empty()):"referenceValue"in r?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in r?{arrayValue:{}}:"arrayValue"in r?{mapValue:{}}:"mapValue"in r?Vo:Ot()}function sr(r,e){const t=$s(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?-1:!r.inclusive&&e.inclusive?1:0}function Bo(r,e){const t=$s(r.value,e.value);return 0!==t?t:r.inclusive&&!e.inclusive?1:!r.inclusive&&e.inclusive?-1:0}class zr{constructor(e){this.value=e}static empty(){return new zr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let a=0;a<e.length-1;++a)if(t=(t.mapValue.fields||{})[e.get(a)],!yt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Yt(t)}setAll(e){let t=_i.emptyPath(),a={},c=[];e.forEach((v,M)=>{if(!t.isImmediateParentOf(M)){const j=this.getFieldsMap(t);this.applyChanges(j,a,c),a={},c=[],t=M.popLast()}v?a[M.lastSegment()]=Yt(v):c.push(M.lastSegment())});const f=this.getFieldsMap(t);this.applyChanges(f,a,c)}delete(e){const t=this.field(e.popLast());yt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Fa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let a=0;a<e.length;++a){let c=t.mapValue.fields[e.get(a)];yt(c)&&c.mapValue.fields||(c={mapValue:{fields:{}}},t.mapValue.fields[e.get(a)]=c),t=c}return t.mapValue.fields}applyChanges(e,t,a){$l(t,(c,f)=>e[c]=f);for(const c of a)delete e[c]}clone(){return new zr(Yt(this.value))}}function ms(r){const e=[];return $l(r.fields,(t,a)=>{const c=new _i([t]);if(yt(a)){const f=ms(a.mapValue).fields;if(0===f.length)e.push(c);else for(const v of f)e.push(c.child(v))}else e.push(c)}),new Hs(e)}class pi{constructor(e,t,a,c,f,v,M){this.key=e,this.documentType=t,this.version=a,this.readTime=c,this.createTime=f,this.data=v,this.documentState=M}static newInvalidDocument(e){return new pi(e,0,Nn.min(),Nn.min(),Nn.min(),zr.empty(),0)}static newFoundDocument(e,t,a,c){return new pi(e,1,t,Nn.min(),a,c,0)}static newNoDocument(e,t){return new pi(e,2,t,Nn.min(),Nn.min(),zr.empty(),0)}static newUnknownDocument(e,t){return new pi(e,3,t,Nn.min(),Nn.min(),zr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Nn.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=zr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=zr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Nn.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof pi&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new pi(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Co{constructor(e,t){this.position=e,this.inclusive=t}}function Do(r,e,t){let a=0;for(let c=0;c<r.position.length;c++){const f=e[c],v=r.position[c];if(a=f.field.isKeyField()?on.comparator(on.fromName(v.referenceValue),t.key):$s(v,t.data.field(f.field)),"desc"===f.dir&&(a*=-1),0!==a)break}return a}function nl(r,e){if(null===r)return null===e;if(null===e||r.inclusive!==e.inclusive||r.position.length!==e.position.length)return!1;for(let t=0;t<r.position.length;t++)if(!Fa(r.position[t],e.position[t]))return!1;return!0}class zl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Uf(r,e){return r.dir===e.dir&&r.field.isEqual(e.field)}class Zd{}class qr extends Zd{constructor(e,t,a){super(),this.field=e,this.op=t,this.value=a}static create(e,t,a){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,a):new jf(e,t,a):"array-contains"===t?new Ca(e,a):"in"===t?new sm(e,a):"not-in"===t?new fc(e,a):"array-contains-any"===t?new pc(e,a):new qr(e,t,a)}static createKeyFieldInFilter(e,t,a){return"in"===t?new Hf(e,a):new $f(e,a)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison($s(t,this.value)):null!==t&&Io(this.value)===Io(t)&&this.matchesComparison($s(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Ot()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class vi extends Zd{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new vi(e,t)}matches(e){return ku(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function ku(r){return"and"===r.op}function fd(r){return"or"===r.op}function pd(r){return Yd(r)&&ku(r)}function Yd(r){for(const e of r.filters)if(e instanceof vi)return!1;return!0}function zh(r){if(r instanceof qr)return r.field.canonicalString()+r.op.toString()+Uo(r.value);if(pd(r))return r.filters.map(e=>zh(e)).join(",");{const e=r.filters.map(t=>zh(t)).join(",");return`${r.op}(${e})`}}function Bf(r,e){return r instanceof qr?(t=r,(a=e)instanceof qr&&t.op===a.op&&t.field.isEqual(a.field)&&Fa(t.value,a.value)):r instanceof vi?function(t,a){return a instanceof vi&&t.op===a.op&&t.filters.length===a.filters.length&&t.filters.reduce((c,f,v)=>c&&Bf(f,a.filters[v]),!0)}(r,e):void Ot();var t,a}function jp(r,e){const t=r.filters.concat(e);return vi.create(t,r.op)}function gd(r){return r instanceof qr?`${(e=r).field.canonicalString()} ${e.op} ${Uo(e.value)}`:r instanceof vi?function(e){return e.op.toString()+" {"+e.getFilters().map(gd).join(" ,")+"}"}(r):"Filter";var e}class jf extends qr{constructor(e,t,a){super(e,t,a),this.key=on.fromName(a.referenceValue)}matches(e){const t=on.comparator(e.key,this.key);return this.matchesComparison(t)}}class Hf extends qr{constructor(e,t){super(e,"in",t),this.keys=hc(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class $f extends qr{constructor(e,t){super(e,"not-in",t),this.keys=hc(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function hc(r,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(a=>on.fromName(a.referenceValue))}class Ca extends qr{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ae(t)&&Gl(t.arrayValue,this.value)}}class sm extends qr{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&Gl(this.value.arrayValue,t)}}class fc extends qr{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!Gl(this.value.arrayValue,t)}}class pc extends qr{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ae(t)||!t.arrayValue.values)&&t.arrayValue.values.some(a=>Gl(this.value.arrayValue,a))}}class Hp{constructor(e,t=null,a=[],c=[],f=null,v=null,M=null){this.path=e,this.collectionGroup=t,this.orderBy=a,this.filters=c,this.limit=f,this.startAt=v,this.endAt=M,this.dt=null}}function fu(r,e=null,t=[],a=[],c=null,f=null,v=null){return new Hp(r,e,t,a,c,f,v)}function Fu(r){const e=nn(r);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(a=>zh(a)).join(","),t+="|ob:",t+=e.orderBy.map(a=>{return(c=a).field.canonicalString()+c.dir;var c}).join(","),Ti(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Uo(a)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Uo(a)).join(",")),e.dt=t}return e.dt}function md(r,e){if(r.limit!==e.limit||r.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<r.orderBy.length;t++)if(!Uf(r.orderBy[t],e.orderBy[t]))return!1;if(r.filters.length!==e.filters.length)return!1;for(let t=0;t<r.filters.length;t++)if(!Bf(r.filters[t],e.filters[t]))return!1;return r.collectionGroup===e.collectionGroup&&!!r.path.isEqual(e.path)&&!!nl(r.startAt,e.startAt)&&nl(r.endAt,e.endAt)}function Hc(r){return on.isDocumentKey(r.path)&&null===r.collectionGroup&&0===r.filters.length}function Qd(r,e){return r.filters.filter(t=>t instanceof qr&&t.field.isEqual(e))}function Jd(r,e,t){let a=wl,c=!0;for(const f of Qd(r,e)){let v=wl,M=!0;switch(f.op){case"<":case"<=":v=hn(f.value);break;case"==":case"in":case">=":v=f.value;break;case">":v=f.value,M=!1;break;case"!=":case"not-in":v=wl}sr({value:a,inclusive:c},{value:v,inclusive:M})<0&&(a=v,c=M)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const v=t.position[f];sr({value:a,inclusive:c},{value:v,inclusive:t.inclusive})<0&&(a=v,c=t.inclusive);break}return{value:a,inclusive:c}}function yd(r,e,t){let a=Vo,c=!0;for(const f of Qd(r,e)){let v=Vo,M=!0;switch(f.op){case">=":case">":v=Pn(f.value),M=!1;break;case"==":case"in":case"<=":v=f.value;break;case"<":v=f.value,M=!1;break;case"!=":case"not-in":v=Vo}Bo({value:a,inclusive:c},{value:v,inclusive:M})>0&&(a=v,c=M)}if(null!==t)for(let f=0;f<r.orderBy.length;++f)if(r.orderBy[f].field.isEqual(e)){const v=t.position[f];Bo({value:a,inclusive:c},{value:v,inclusive:t.inclusive})>0&&(a=v,c=t.inclusive);break}return{value:a,inclusive:c}}class Wl{constructor(e,t=null,a=[],c=[],f=null,v="F",M=null,j=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=a,this.filters=c,this.limit=f,this.limitType=v,this.startAt=M,this.endAt=j,this.wt=null,this._t=null}}function Gf(r,e,t,a,c,f,v,M){return new Wl(r,e,t,a,c,f,v,M)}function gc(r){return new Wl(r)}function Xd(r){return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.explicitOrderBy.length||1===r.explicitOrderBy.length&&r.explicitOrderBy[0].field.isKeyField())}function eh(r){return r.explicitOrderBy.length>0?r.explicitOrderBy[0].field:null}function _d(r){for(const e of r.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function th(r){return null!==r.collectionGroup}function Lu(r){const e=nn(r);if(null===e.wt){e.wt=[];const t=_d(e),a=eh(e);if(null!==t&&null===a)t.isKeyField()||e.wt.push(new zl(t)),e.wt.push(new zl(_i.keyField(),"asc"));else{let c=!1;for(const f of e.explicitOrderBy)e.wt.push(f),f.field.isKeyField()&&(c=!0);if(!c){const f=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zl(_i.keyField(),f))}}}return e.wt}function jo(r){const e=nn(r);if(!e._t)if("F"===e.limitType)e._t=fu(e.path,e.collectionGroup,Lu(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const f of Lu(e))t.push(new zl(f.field,"desc"===f.dir?"asc":"desc"));const a=e.endAt?new Co(e.endAt.position,e.endAt.inclusive):null,c=e.startAt?new Co(e.startAt.position,e.startAt.inclusive):null;e._t=fu(e.path,e.collectionGroup,t,e.filters,e.limit,a,c)}return e._t}function rl(r,e){e.getFirstInequalityField(),_d(r);const t=r.filters.concat([e]);return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),t,r.limit,r.limitType,r.startAt,r.endAt)}function mc(r,e,t){return new Wl(r.path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),e,t,r.startAt,r.endAt)}function lo(r,e){return md(jo(r),jo(e))&&r.limitType===e.limitType}function nh(r){return`${Fu(jo(r))}|lt:${r.limitType}`}function Il(r){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(a=>gd(a)).join(", ")}]`),Ti(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(a=>{return`${(c=a).field.canonicalString()} (${c.dir})`;var c}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(a=>Uo(a)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(a=>Uo(a)).join(",")),`Target(${t})`}(jo(r))}; limitType=${r.limitType})`}function Kl(r,e){return e.isFoundDocument()&&function(t,a){const c=a.key.path;return null!==t.collectionGroup?a.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(c):on.isDocumentKey(t.path)?t.path.isEqual(c):t.path.isImmediateParentOf(c)}(r,e)&&function(t,a){for(const c of Lu(t))if(!c.field.isKeyField()&&null===a.data.field(c.field))return!1;return!0}(r,e)&&function(t,a){for(const c of t.filters)if(!c.matches(a))return!1;return!0}(r,e)&&(a=e,!((t=r).startAt&&!function(c,f,v){const M=Do(c,f,v);return c.inclusive?M<=0:M<0}(t.startAt,Lu(t),a)||t.endAt&&!function(c,f,v){const M=Do(c,f,v);return c.inclusive?M>=0:M>0}(t.endAt,Lu(t),a)));var t,a}function il(r){return r.collectionGroup||(r.path.length%2==1?r.path.lastSegment():r.path.get(r.path.length-2))}function Vu(r){return(e,t)=>{let a=!1;for(const c of Lu(r)){const f=Wh(c,e,t);if(0!==f)return f;a=a||c.field.isKeyField()}return 0}}function Wh(r,e,t){const a=r.field.isKeyField()?on.comparator(e.key,t.key):function(c,f,v){const M=f.data.field(c),j=v.data.field(c);return null!==M&&null!==j?$s(M,j):Ot()}(r.field,e,t);switch(r.dir){case"asc":return a;case"desc":return-1*a;default:return Ot()}}class ql{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0!==a)for(const[c,f]of a)if(this.equalsFn(c,e))return f}has(e){return void 0!==this.get(e)}set(e,t){const a=this.mapKeyFn(e),c=this.inner[a];if(void 0===c)return this.inner[a]=[[e,t]],void this.innerSize++;for(let f=0;f<c.length;f++)if(this.equalsFn(c[f][0],e))return void(c[f]=[e,t]);c.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),a=this.inner[t];if(void 0===a)return!1;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return 1===a.length?delete this.inner[t]:a.splice(c,1),this.innerSize--,!0;return!1}forEach(e){$l(this.inner,(t,a)=>{for(const[c,f]of a)e(c,f)})}isEmpty(){return Kd(this.inner)}size(){return this.innerSize}}const Uu=new Si(on.comparator);function La(){return Uu}const rh=new Si(on.comparator);function Cl(...r){let e=rh;for(const t of r)e=e.insert(t.key,t);return e}function ih(r){let e=rh;return r.forEach((t,a)=>e=e.insert(t,a.overlayedDocument)),e}function sl(){return $c()}function Kh(){return $c()}function $c(){return new ql(r=>r.toString(),(r,e)=>r.isEqual(e))}const sh=new Si(on.comparator),oh=new fi(on.comparator);function gr(...r){let e=oh;for(const t of r)e=e.add(t);return e}const Gc=new fi(ir);function zc(){return Gc}function ah(r,e){if(r.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ea(e)?"-0":e}}function lh(r){return{integerValue:""+r}}function yc(r,e){return Lo(e)?lh(e):ah(r,e)}class Wc{constructor(){this._=void 0}}function Ys(r,e,t){return r instanceof uh?function(a,c){const f={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&El(c)&&(c=ka(c)),c&&(f.fields.__previous_value__=c),{mapValue:f}}(t,e):r instanceof Bu?vd(r,e):r instanceof _c?Zh(r,e):function(a,c){const f=qh(a,c),v=Zl(f)+Zl(a.gt);return Z(f)&&Z(a.gt)?lh(v):ah(a.serializer,v)}(r,e)}function Da(r,e,t){return r instanceof Bu?vd(r,e):r instanceof _c?Zh(r,e):t}function qh(r,e){return r instanceof ju?Z(t=e)||(a=t)&&"doubleValue"in a?e:{integerValue:0}:null;var a,t}class uh extends Wc{}class Bu extends Wc{constructor(e){super(),this.elements=e}}function vd(r,e){const t=Yh(e);for(const a of r.elements)t.some(c=>Fa(c,a))||t.push(a);return{arrayValue:{values:t}}}class _c extends Wc{constructor(e){super(),this.elements=e}}function Zh(r,e){let t=Yh(e);for(const a of r.elements)t=t.filter(c=>!Fa(c,a));return{arrayValue:{values:t}}}class ju extends Wc{constructor(e,t){super(),this.serializer=e,this.gt=t}}function Zl(r){return As(r.integerValue||r.doubleValue)}function Yh(r){return ae(r)&&r.arrayValue.values?r.arrayValue.values.slice():[]}class Ed{constructor(e,t){this.field=e,this.transform=t}}class Gp{constructor(e,t){this.version=e,this.transformResults=t}}class ss{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new ss}static exists(e){return new ss(void 0,e)}static updateTime(e){return new ss(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ho(r,e){return void 0!==r.updateTime?e.isFoundDocument()&&e.version.isEqual(r.updateTime):void 0===r.exists||r.exists===e.isFoundDocument()}class wd{}function Qh(r,e){if(!r.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return r.isNoDocument()?new Ec(r.key,ss.none()):new Id(r.key,r.data,ss.none());{const t=r.data,a=zr.empty();let c=new fi(_i.comparator);for(let f of e.fields)if(!c.has(f)){let v=t.field(f);null===v&&f.length>1&&(f=f.popLast(),v=t.field(f)),null===v?a.delete(f):a.set(f,v),c=c.add(f)}return new vc(r.key,a,new Hs(c.toArray()),ss.none())}}function om(r,e,t){r instanceof Id?function(a,c,f){const v=a.value.clone(),M=am(a.fieldTransforms,c,f.transformResults);v.setAll(M),c.convertToFoundDocument(f.version,v).setHasCommittedMutations()}(r,e,t):r instanceof vc?function(a,c,f){if(!Ho(a.precondition,c))return void c.convertToUnknownDocument(f.version);const v=am(a.fieldTransforms,c,f.transformResults),M=c.data;M.setAll(ol(a)),M.setAll(v),c.convertToFoundDocument(f.version,M).setHasCommittedMutations()}(r,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Qs(r,e,t,a){return r instanceof Id?function(c,f,v,M){if(!Ho(c.precondition,f))return v;const j=c.value.clone(),q=Wf(c.fieldTransforms,M,f);return j.setAll(q),f.convertToFoundDocument(f.version,j).setHasLocalMutations(),null}(r,e,t,a):r instanceof vc?function(c,f,v,M){if(!Ho(c.precondition,f))return v;const j=Wf(c.fieldTransforms,M,f),q=f.data;return q.setAll(ol(c)),q.setAll(j),f.convertToFoundDocument(f.version,q).setHasLocalMutations(),null===v?null:v.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(ie=>ie.field))}(r,e,t,a):(v=t,Ho(r.precondition,f=e)?(f.convertToNoDocument(f.version).setHasLocalMutations(),null):v);var f,v}function Hu(r,e){let t=null;for(const a of r.fieldTransforms){const c=e.data.field(a.field),f=qh(a.transform,c||null);null!=f&&(null===t&&(t=zr.empty()),t.set(a.field,f))}return t||null}function zf(r,e){return r.type===e.type&&!!r.key.isEqual(e.key)&&!!r.precondition.isEqual(e.precondition)&&(a=e.fieldTransforms,!!(void 0===(t=r.fieldTransforms)&&void 0===a||t&&a&&Vl(t,a,(c,f)=>function $p(r,e){return r.field.isEqual(e.field)&&(a=e.transform,(t=r.transform)instanceof Bu&&a instanceof Bu||t instanceof _c&&a instanceof _c?Vl(t.elements,a.elements,Fa):t instanceof ju&&a instanceof ju?Fa(t.gt,a.gt):t instanceof uh&&a instanceof uh);var t,a}(c,f))))&&(0===r.type?r.value.isEqual(e.value):1!==r.type||r.data.isEqual(e.data)&&r.fieldMask.isEqual(e.fieldMask));var t,a}class Id extends wd{constructor(e,t,a,c=[]){super(),this.key=e,this.value=t,this.precondition=a,this.fieldTransforms=c,this.type=0}getFieldMask(){return null}}class vc extends wd{constructor(e,t,a,c,f=[]){super(),this.key=e,this.data=t,this.fieldMask=a,this.precondition=c,this.fieldTransforms=f,this.type=1}getFieldMask(){return this.fieldMask}}function ol(r){const e=new Map;return r.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const a=r.data.field(t);e.set(t,a)}}),e}function am(r,e,t){const a=new Map;Sn(r.length===t.length);for(let c=0;c<t.length;c++){const f=r[c],v=f.transform,M=e.data.field(f.field);a.set(f.field,Da(v,M,t[c]))}return a}function Wf(r,e,t){const a=new Map;for(const c of r){const f=c.transform,v=t.data.field(c.field);a.set(c.field,Ys(f,v,e))}return a}class Ec extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Kf extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class C{constructor(e,t,a,c){this.batchId=e,this.localWriteTime=t,this.baseMutations=a,this.mutations=c}applyToRemoteDocument(e,t){const a=t.mutationResults;for(let c=0;c<this.mutations.length;c++){const f=this.mutations[c];f.key.isEqual(e.key)&&om(f,e,a[c])}}applyToLocalView(e,t){for(const a of this.baseMutations)a.key.isEqual(e.key)&&(t=Qs(a,e,t,this.localWriteTime));for(const a of this.mutations)a.key.isEqual(e.key)&&(t=Qs(a,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const a=Kh();return this.mutations.forEach(c=>{const f=e.get(c.key),v=f.overlayedDocument;let M=this.applyToLocalView(v,f.mutatedFields);M=t.has(c.key)?null:M;const j=Qh(v,M);null!==j&&a.set(c.key,j),v.isValidDocument()||v.convertToNoDocument(Nn.min())}),a}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),gr())}isEqual(e){return this.batchId===e.batchId&&Vl(this.mutations,e.mutations,(t,a)=>zf(t,a))&&Vl(this.baseMutations,e.baseMutations,(t,a)=>zf(t,a))}}class m{constructor(e,t,a,c){this.batch=e,this.commitVersion=t,this.mutationResults=a,this.docVersions=c}static from(e,t,a){Sn(e.mutations.length===a.length);let c=sh;const f=e.mutations;for(let v=0;v<f.length;v++)c=c.insert(f[v].key,a[v].version);return new m(e,t,a,c)}}class y{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ${constructor(e,t){this.count=e,this.unchangedNames=t}}var J,me;function Xe(r){switch(r){default:return Ot();case at.CANCELLED:case at.UNKNOWN:case at.DEADLINE_EXCEEDED:case at.RESOURCE_EXHAUSTED:case at.INTERNAL:case at.UNAVAILABLE:case at.UNAUTHENTICATED:return!1;case at.INVALID_ARGUMENT:case at.NOT_FOUND:case at.ALREADY_EXISTS:case at.PERMISSION_DENIED:case at.FAILED_PRECONDITION:case at.ABORTED:case at.OUT_OF_RANGE:case at.UNIMPLEMENTED:case at.DATA_LOSS:return!0}}function kt(r){if(void 0===r)return Pi("GRPC error has no .code"),at.UNKNOWN;switch(r){case J.OK:return at.OK;case J.CANCELLED:return at.CANCELLED;case J.UNKNOWN:return at.UNKNOWN;case J.DEADLINE_EXCEEDED:return at.DEADLINE_EXCEEDED;case J.RESOURCE_EXHAUSTED:return at.RESOURCE_EXHAUSTED;case J.INTERNAL:return at.INTERNAL;case J.UNAVAILABLE:return at.UNAVAILABLE;case J.UNAUTHENTICATED:return at.UNAUTHENTICATED;case J.INVALID_ARGUMENT:return at.INVALID_ARGUMENT;case J.NOT_FOUND:return at.NOT_FOUND;case J.ALREADY_EXISTS:return at.ALREADY_EXISTS;case J.PERMISSION_DENIED:return at.PERMISSION_DENIED;case J.FAILED_PRECONDITION:return at.FAILED_PRECONDITION;case J.ABORTED:return at.ABORTED;case J.OUT_OF_RANGE:return at.OUT_OF_RANGE;case J.UNIMPLEMENTED:return at.UNIMPLEMENTED;case J.DATA_LOSS:return at.DATA_LOSS;default:return Ot()}}(me=J||(J={}))[me.OK=0]="OK",me[me.CANCELLED=1]="CANCELLED",me[me.UNKNOWN=2]="UNKNOWN",me[me.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",me[me.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",me[me.NOT_FOUND=5]="NOT_FOUND",me[me.ALREADY_EXISTS=6]="ALREADY_EXISTS",me[me.PERMISSION_DENIED=7]="PERMISSION_DENIED",me[me.UNAUTHENTICATED=16]="UNAUTHENTICATED",me[me.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",me[me.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",me[me.ABORTED=10]="ABORTED",me[me.OUT_OF_RANGE=11]="OUT_OF_RANGE",me[me.UNIMPLEMENTED=12]="UNIMPLEMENTED",me[me.INTERNAL=13]="INTERNAL",me[me.UNAVAILABLE=14]="UNAVAILABLE",me[me.DATA_LOSS=15]="DATA_LOSS";class Qt{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return yn}static getOrCreateInstance(){return null===yn&&(yn=new Qt),yn}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let yn=null;function Dn(){return new TextEncoder}const os=new Xa([4294967295,4294967295],0);function Va(r){const e=Dn().encode(r),t=new Pl;return t.update(e),new Uint8Array(t.digest())}function Jh(r){const e=new DataView(r.buffer),t=e.getUint32(0,!0),a=e.getUint32(4,!0),c=e.getUint32(8,!0),f=e.getUint32(12,!0);return[new Xa([t,a],0),new Xa([c,f],0)]}class qf{constructor(e,t,a){if(this.bitmap=e,this.padding=t,this.hashCount=a,t<0||t>=8)throw new wc(`Invalid padding: ${t}`);if(a<0)throw new wc(`Invalid hash count: ${a}`);if(e.length>0&&0===this.hashCount)throw new wc(`Invalid hash count: ${a}`);if(0===e.length&&0!==t)throw new wc(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Xa.fromNumber(this.It)}Et(e,t,a){let c=e.add(t.multiply(Xa.fromNumber(a)));return 1===c.compare(os)&&(c=new Xa([c.getBits(0),c.getBits(1)],0)),c.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=Va(e),[a,c]=Jh(t);for(let f=0;f<this.hashCount;f++){const v=this.Et(a,c,f);if(!this.At(v))return!1}return!0}static create(e,t,a){const c=e%8==0?0:8-e%8,f=new Uint8Array(Math.ceil(e/8)),v=new qf(f,c,t);return a.forEach(M=>v.insert(M)),v}insert(e){if(0===this.It)return;const t=Va(e),[a,c]=Jh(t);for(let f=0;f<this.hashCount;f++){const v=this.Et(a,c,f);this.Rt(v)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class wc extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Cd{constructor(e,t,a,c,f){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=a,this.documentUpdates=c,this.resolvedLimboDocuments=f}static createSynthesizedRemoteEventForCurrentChange(e,t,a){const c=new Map;return c.set(e,Dd.createSynthesizedTargetChangeForCurrentChange(e,t,a)),new Cd(Nn.min(),c,new Si(ir),La(),gr())}}class Dd{constructor(e,t,a,c,f){this.resumeToken=e,this.current=t,this.addedDocuments=a,this.modifiedDocuments=c,this.removedDocuments=f}static createSynthesizedTargetChangeForCurrentChange(e,t,a){return new Dd(a,t,gr(),gr(),gr())}}class ch{constructor(e,t,a,c){this.Pt=e,this.removedTargetIds=t,this.key=a,this.bt=c}}class zp{constructor(e,t){this.targetId=e,this.Vt=t}}class Xh{constructor(e,t,a=gs.EMPTY_BYTE_STRING,c=null){this.state=e,this.targetIds=t,this.resumeToken=a,this.cause=c}}class Kc{constructor(){this.St=0,this.Dt=ef(),this.Ct=gs.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=gr(),t=gr(),a=gr();return this.Dt.forEach((c,f)=>{switch(f){case 0:e=e.add(c);break;case 2:t=t.add(c);break;case 1:a=a.add(c);break;default:Ot()}}),new Dd(this.Ct,this.xt,e,t,a)}Ft(){this.Nt=!1,this.Dt=ef()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class Wp{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=La(),this.zt=dh(),this.Wt=new Si(ir)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const a=this.Zt(t);switch(e.state){case 0:this.te(t)&&a.$t(e.resumeToken);break;case 1:a.Ut(),a.kt||a.Ft(),a.$t(e.resumeToken);break;case 2:a.Ut(),a.kt||this.removeTarget(t);break;case 3:this.te(t)&&(a.Kt(),a.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),a.$t(e.resumeToken));break;default:Ot()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((a,c)=>{this.te(c)&&t(c)})}ne(e){var t;const a=e.targetId,c=e.Vt.count,f=this.se(a);if(f){const v=f.target;if(Hc(v))if(0===c){const M=new on(v.path);this.Yt(a,M,pi.newNoDocument(M,Nn.min()))}else Sn(1===c);else{const M=this.ie(a);if(M!==c){const j=this.re(e,M);0!==j&&(this.ee(a),this.Wt=this.Wt.insert(a,2===j?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=Qt.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(q,ie,we){var nt,It,Wt,pn,_n,Ur;const Ei={localCacheCount:ie,existenceFilterCount:we.count},Br=we.unchangedNames;return Br&&(Ei.bloomFilter={applied:0===q,hashCount:null!==(nt=Br?.hashCount)&&void 0!==nt?nt:0,bitmapLength:null!==(pn=null===(Wt=null===(It=Br?.bits)||void 0===It?void 0:It.bitmap)||void 0===Wt?void 0:Wt.length)&&void 0!==pn?pn:0,padding:null!==(Ur=null===(_n=Br?.bits)||void 0===_n?void 0:_n.padding)&&void 0!==Ur?Ur:0}),Ei}(j,M,e.Vt))}}}}re(e,t){const{unchangedNames:a,count:c}=e.Vt;if(!a||!a.bits)return 1;const{bits:{bitmap:f="",padding:v=0},hashCount:M=0}=a;let j,q;try{j=du(f).toUint8Array()}catch(ie){if(ie instanceof Oa)return ps("Decoding the base64 bloom filter in existence filter failed ("+ie.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw ie}try{q=new qf(j,v,M)}catch(ie){return ps(ie instanceof wc?"BloomFilter error: ":"Applying bloom filter failed: ",ie),1}return 0===q.It?1:c!==t-this.oe(e.targetId,q)?2:0}oe(e,t){const a=this.Gt.getRemoteKeysForTarget(e);let c=0;return a.forEach(f=>{const v=this.Gt.ue(),M=`projects/${v.projectId}/databases/${v.database}/documents/${f.path.canonicalString()}`;t.vt(M)||(this.Yt(e,f,null),c++)}),c}ce(e){const t=new Map;this.Qt.forEach((f,v)=>{const M=this.se(v);if(M){if(f.current&&Hc(M.target)){const j=new on(M.target.path);null!==this.jt.get(j)||this.ae(v,j)||this.Yt(v,j,pi.newNoDocument(j,e))}f.Mt&&(t.set(v,f.Ot()),f.Ft())}});let a=gr();this.zt.forEach((f,v)=>{let M=!0;v.forEachWhile(j=>{const q=this.se(j);return!q||"TargetPurposeLimboResolution"===q.purpose||(M=!1,!1)}),M&&(a=a.add(f))}),this.jt.forEach((f,v)=>v.setReadTime(e));const c=new Cd(e,t,this.Wt,this.jt,a);return this.jt=La(),this.zt=dh(),this.Wt=new Si(ir),c}Jt(e,t){if(!this.te(e))return;const a=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,a),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,a){if(!this.te(e))return;const c=this.Zt(e);this.ae(e,t)?c.Bt(t,1):c.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),a&&(this.jt=this.jt.insert(t,a))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new Kc,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new fi(ir),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||Vt("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new Kc),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function dh(){return new Si(on.comparator)}function ef(){return new Si(on.comparator)}const Js={asc:"ASCENDING",desc:"DESCENDING"},Sy={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},H_={and:"AND",or:"OR"};class Ic{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function bo(r,e){return r.useProto3Json||Ti(e)?e:{value:e}}function na(r,e){return r.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function tf(r,e){return r.useProto3Json?e.toBase64():e.toUint8Array()}function $_(r,e){return na(r,e.toTimestamp())}function uo(r){return Sn(!!r),Nn.fromTimestamp(function(e){const t=ta(e);return new Qr(t.seconds,t.nanos)}(r))}function lm(r,e){return(t=r,new $n(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function G_(r){const e=$n.fromString(r);return Sn(Ry(e)),e}function $u(r,e){return lm(r.databaseId,e.path)}function al(r,e){const t=G_(e);if(t.get(1)!==r.databaseId.projectId)throw new Tt(at.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+r.databaseId.projectId);if(t.get(3)!==r.databaseId.database)throw new Tt(at.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+r.databaseId.database);return new on(Kp(t))}function nf(r,e){return lm(r.databaseId,e)}function um(r){const e=G_(r);return 4===e.length?$n.emptyPath():Kp(e)}function rf(r){return new $n(["projects",r.databaseId.projectId,"databases",r.databaseId.database]).canonicalString()}function Kp(r){return Sn(r.length>4&&"documents"===r.get(4)),r.popFirst(5)}function cm(r,e,t){return{name:$u(r,e),fields:t.value.mapValue.fields}}function qp(r,e,t){const a=al(r,e.name),c=uo(e.updateTime),f=e.createTime?uo(e.createTime):Nn.min(),v=new zr({mapValue:{fields:e.fields}}),M=pi.newFoundDocument(a,c,f,v);return t&&M.setHasCommittedMutations(),t?M.setHasCommittedMutations():M}function Zp(r,e){let t;if(e instanceof Id)t={update:cm(r,e.key,e.value)};else if(e instanceof Ec)t={delete:$u(r,e.key)};else if(e instanceof vc)t={update:cm(r,e.key,e.data),updateMask:pm(e.fieldMask)};else{if(!(e instanceof Kf))return Ot();t={verify:$u(r,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(a=>function(c,f){const v=f.transform;if(v instanceof uh)return{fieldPath:f.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(v instanceof Bu)return{fieldPath:f.field.canonicalString(),appendMissingElements:{values:v.elements}};if(v instanceof _c)return{fieldPath:f.field.canonicalString(),removeAllFromArray:{values:v.elements}};if(v instanceof ju)return{fieldPath:f.field.canonicalString(),increment:v.gt};throw Ot()}(0,a))),e.precondition.isNone||(t.currentDocument=void 0!==(c=e.precondition).updateTime?{updateTime:$_(r,c.updateTime)}:void 0!==c.exists?{exists:c.exists}:Ot()),t;var c}function Yp(r,e){const t=e.currentDocument?void 0!==(c=e.currentDocument).updateTime?ss.updateTime(uo(c.updateTime)):void 0!==c.exists?ss.exists(c.exists):ss.none():ss.none(),a=e.updateTransforms?e.updateTransforms.map(c=>function(f,v){let M=null;"setToServerValue"in v?(Sn("REQUEST_TIME"===v.setToServerValue),M=new uh):"appendMissingElements"in v?M=new Bu(v.appendMissingElements.values||[]):"removeAllFromArray"in v?M=new _c(v.removeAllFromArray.values||[]):"increment"in v?M=new ju(f,v.increment):Ot();const j=_i.fromServerFormat(v.fieldPath);return new Ed(j,M)}(r,c)):[];var c;if(e.update){const c=al(r,e.update.name),f=new zr({mapValue:{fields:e.update.fields}});if(e.updateMask){const v=new Hs((e.updateMask.fieldPaths||[]).map(q=>_i.fromServerFormat(q)));return new vc(c,f,v,t,a)}return new Id(c,f,t,a)}if(e.delete){const c=al(r,e.delete);return new Ec(c,t)}if(e.verify){const c=al(r,e.verify);return new Kf(c,t)}return Ot()}function fm(r,e){return{documents:[nf(r,e.path)]}}function Zf(r,e){const t={structuredQuery:{}},a=e.path;null!==e.collectionGroup?(t.parent=nf(r,a),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=nf(r,a.popLast()),t.structuredQuery.from=[{collectionId:a.lastSegment()}]);const c=function(j){if(0!==j.length)return eg(vi.create(j,"and"))}(e.filters);c&&(t.structuredQuery.where=c);const f=function(j){if(0!==j.length)return j.map(q=>{return{field:Gu((ie=q).field),direction:Jp(ie.dir)};var ie})}(e.orderBy);f&&(t.structuredQuery.orderBy=f);const v=bo(r,e.limit);var M,j;return null!==v&&(t.structuredQuery.limit=v),e.startAt&&(t.structuredQuery.startAt={before:(M=e.startAt).inclusive,values:M.position}),e.endAt&&(t.structuredQuery.endAt={before:!(j=e.endAt).inclusive,values:j.position}),t}function qc(r){let e=um(r.parent);const t=r.structuredQuery,a=t.from?t.from.length:0;let c=null;if(a>0){Sn(1===a);const ie=t.from[0];ie.allDescendants?c=ie.collectionId:e=e.child(ie.collectionId)}let f=[];t.where&&(f=function(ie){const we=Qp(ie);return we instanceof vi&&pd(we)?we.getFilters():[we]}(t.where));let v=[];t.orderBy&&(v=t.orderBy.map(ie=>{return new zl(pu((we=ie).field),function(nt){switch(nt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(we.direction));var we}));let M=null;t.limit&&(M=function(ie){let we;return we="object"==typeof ie?ie.value:ie,Ti(we)?null:we}(t.limit));let j=null;var ie;t.startAt&&(j=new Co((ie=t.startAt).values||[],!!ie.before));let q=null;return t.endAt&&(q=function(ie){return new Co(ie.values||[],!ie.before)}(t.endAt)),Gf(e,c,v,f,M,"F",j,q)}function Qp(r){return void 0!==r.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pu(e.unaryFilter.field);return qr.create(t,"==",{doubleValue:NaN});case"IS_NULL":const a=pu(e.unaryFilter.field);return qr.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=pu(e.unaryFilter.field);return qr.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const f=pu(e.unaryFilter.field);return qr.create(f,"!=",{nullValue:"NULL_VALUE"});default:return Ot()}}(r):void 0!==r.fieldFilter?qr.create(pu((e=r).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ot()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==r.compositeFilter?function(e){return vi.create(e.compositeFilter.filters.map(t=>Qp(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Ot()}}(e.compositeFilter.op))}(r):Ot();var e}function Jp(r){return Js[r]}function z_(r){return Sy[r]}function Xp(r){return H_[r]}function Gu(r){return{fieldPath:r.canonicalString()}}function pu(r){return _i.fromServerFormat(r.fieldPath)}function eg(r){return r instanceof qr?function(e){if("=="===e.op){if(ze(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NAN"}};if(be(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(ze(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NAN"}};if(be(e.value))return{unaryFilter:{field:Gu(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Gu(e.field),op:z_(e.op),value:e.value}}}(r):r instanceof vi?function(e){const t=e.getFilters().map(a=>eg(a));return 1===t.length?t[0]:{compositeFilter:{op:Xp(e.op),filters:t}}}(r):Ot()}function pm(r){const e=[];return r.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Ry(r){return r.length>=4&&"projects"===r.get(0)&&"databases"===r.get(2)}class Zc{constructor(e,t,a,c,f=Nn.min(),v=Nn.min(),M=gs.EMPTY_BYTE_STRING,j=null){this.target=e,this.targetId=t,this.purpose=a,this.sequenceNumber=c,this.snapshotVersion=f,this.lastLimboFreeSnapshotVersion=v,this.resumeToken=M,this.expectedCount=j}withSequenceNumber(e){return new Zc(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Zc(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gm{constructor(e){this.fe=e}}function Yf(r,e){const t=e.key,a={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:tg(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())a.document={name:$u(c=r.fe,(f=e).key),fields:f.data.value.mapValue.fields,updateTime:na(c,f.version.toTimestamp()),createTime:na(c,f.createTime.toTimestamp())};else if(e.isNoDocument())a.noDocument={path:t.path.toArray(),readTime:bd(e.version)};else{if(!e.isUnknownDocument())return Ot();a.unknownDocument={path:t.path.toArray(),version:bd(e.version)}}var c,f;return a}function tg(r){const e=r.toTimestamp();return[e.seconds,e.nanoseconds]}function bd(r){const e=r.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Td(r){const e=new Qr(r.seconds,r.nanoseconds);return Nn.fromTimestamp(e)}function Yc(r,e){const t=(e.baseMutations||[]).map(f=>Yp(r.fe,f));for(let f=0;f<e.mutations.length-1;++f){const v=e.mutations[f];f+1<e.mutations.length&&void 0!==e.mutations[f+1].transform&&(v.updateTransforms=e.mutations[f+1].transform.fieldTransforms,e.mutations.splice(f+1,1),++f)}const a=e.mutations.map(f=>Yp(r.fe,f)),c=Qr.fromMillis(e.localWriteTimeMs);return new C(e.batchId,c,t,a)}function Qf(r){const e=Td(r.readTime),t=void 0!==r.lastLimboFreeSnapshotVersion?Td(r.lastLimboFreeSnapshotVersion):Nn.min();let a;var c;return void 0!==r.query.documents?(Sn(1===(c=r.query).documents.length),a=jo(gc(um(c.documents[0])))):a=jo(qc(r.query)),new Zc(a,r.targetId,"TargetPurposeListen",r.lastListenSequenceNumber,e,t,gs.fromBase64String(r.resumeToken))}function mm(r,e){const t=bd(e.snapshotVersion),a=bd(e.lastLimboFreeSnapshotVersion);let c;c=Hc(e.target)?fm(r.fe,e.target):Zf(r.fe,e.target);const f=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Fu(e.target),readTime:t,resumeToken:f,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:a,query:c}}function Rs(r){const e=qc({parent:r.parent,structuredQuery:r.structuredQuery});return"LAST"===r.limitType?mc(e,e.limit,"L"):e}function Wi(r,e){return new y(e.largestBatchId,Yp(r.fe,e.overlayMutation))}function ym(r,e){const t=e.path.lastSegment();return[r,rs(e.path.popLast()),t]}function ng(r,e,t,a){return{indexId:r,uid:e.uid||"",sequenceNumber:t,readTime:bd(a.readTime),documentKey:rs(a.documentKey.path),largestBatchId:a.largestBatchId}}class Jf{getBundleMetadata(e,t){return My(e).get(t).next(a=>{if(a)return{id:(c=a).bundleId,createTime:Td(c.createTime),version:c.version};var c})}saveBundleMetadata(e,t){return My(e).put({bundleId:(a=t).id,createTime:bd(uo(a.createTime)),version:a.version});var a}getNamedQuery(e,t){return fh(e).get(t).next(a=>{if(a)return{name:(c=a).name,query:Rs(c.bundledQuery),readTime:Td(c.readTime)};var c})}saveNamedQuery(e,t){return fh(e).put({name:(a=t).name,readTime:bd(uo(a.readTime)),bundledQuery:a.bundledQuery});var a}}function My(r){return Ss(r,"bundles")}function fh(r){return Ss(r,"namedQueries")}class Sd{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new Sd(e,t.uid||"")}getOverlay(e,t){return Xf(e).get(ym(this.userId,t)).next(a=>a?Wi(this.serializer,a):null)}getOverlays(e,t){const a=sl();return I.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&a.set(c,f)})).next(()=>a)}saveOverlays(e,t,a){const c=[];return a.forEach((f,v)=>{const M=new y(t,v);c.push(this.we(e,M))}),I.waitFor(c)}removeOverlaysForBatchId(e,t,a){const c=new Set;t.forEach(v=>c.add(rs(v.getCollectionPath())));const f=[];return c.forEach(v=>{const M=IDBKeyRange.bound([this.userId,v,a],[this.userId,v,a+1],!1,!0);f.push(Xf(e).J("collectionPathOverlayIndex",M))}),I.waitFor(f)}getOverlaysForCollection(e,t,a){const c=sl(),f=rs(t),v=IDBKeyRange.bound([this.userId,f,a],[this.userId,f,Number.POSITIVE_INFINITY],!0);return Xf(e).j("collectionPathOverlayIndex",v).next(M=>{for(const j of M){const q=Wi(this.serializer,j);c.set(q.getKey(),q)}return c})}getOverlaysForCollectionGroup(e,t,a,c){const f=sl();let v;const M=IDBKeyRange.bound([this.userId,t,a],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Xf(e).X({index:"collectionGroupOverlayIndex",range:M},(j,q,ie)=>{const we=Wi(this.serializer,q);f.size()<c||we.largestBatchId===v?(f.set(we.getKey(),we),v=we.largestBatchId):ie.done()}).next(()=>f)}we(e,t){return Xf(e).put(function(a,c,f){const[v,M,j]=ym(c,f.mutation.key);return{userId:c,collectionPath:M,documentId:j,collectionGroup:f.mutation.key.getCollectionGroup(),largestBatchId:f.largestBatchId,overlayMutation:Zp(a.fe,f.mutation)}}(this.serializer,this.userId,t))}}function Xf(r){return Ss(r,"documentOverlays")}class ph{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(As(e.integerValue));else if("doubleValue"in e){const a=As(e.doubleValue);isNaN(a)?this.ye(t,13):(this.ye(t,15),ea(a)?t.pe(0):t.pe(a))}else if("timestampValue"in e){const a=e.timestampValue;this.ye(t,20),"string"==typeof a?t.Ie(a):(t.Ie(`${a.seconds||""}`),t.pe(a.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(du(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const a=e.geoPointValue;this.ye(t,45),t.pe(a.latitude||0),t.pe(a.longitude||0)}else"mapValue"in e?en(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Ot()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const a=e.fields||{};this.ye(t,55);for(const c of Object.keys(a))this.Te(c,t),this.me(a[c],t)}Pe(e,t){const a=e.values||[];this.ye(t,50);for(const c of a)this.me(c,t)}ve(e,t){this.ye(t,37),on.fromName(e).path.forEach(a=>{this.ye(t,60),this.be(a,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function _m(r){if(0===r)return 8;let e=0;return r>>4==0&&(e+=4,r<<=4),r>>6==0&&(e+=2,r<<=2),r>>7==0&&(e+=1),e}function xy(r){const e=64-function(t){let a=0;for(let c=0;c<8;++c){const f=_m(255&t[c]);if(a+=f,8!==f)break}return a}(r);return Math.ceil(e/8)}ph.Ve=new ph;class W_{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.De(a.value),a=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let a=t.next();for(;!a.done;)this.Ne(a.value),a=t.next();this.ke()}Me(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.De(a);else if(a<2048)this.De(960|a>>>6),this.De(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.De(480|a>>>12),this.De(128|63&a>>>6),this.De(128|63&a);else{const c=t.codePointAt(0);this.De(240|c>>>18),this.De(128|63&c>>>12),this.De(128|63&c>>>6),this.De(128|63&c)}}this.Ce()}$e(e){for(const t of e){const a=t.charCodeAt(0);if(a<128)this.Ne(a);else if(a<2048)this.Ne(960|a>>>6),this.Ne(128|63&a);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|a>>>12),this.Ne(128|63&a>>>6),this.Ne(128|63&a);else{const c=t.codePointAt(0);this.Ne(240|c>>>18),this.Ne(128|63&c>>>12),this.Ne(128|63&c>>>6),this.Ne(128|63&c)}}this.ke()}Oe(e){const t=this.Fe(e),a=xy(t);this.Be(1+a),this.buffer[this.position++]=255&a;for(let c=t.length-a;c<t.length;++c)this.buffer[this.position++]=255&t[c]}Le(e){const t=this.Fe(e),a=xy(t);this.Be(1+a),this.buffer[this.position++]=~(255&a);for(let c=t.length-a;c<t.length;++c)this.buffer[this.position++]=~(255&t[c])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(c){const f=new DataView(new ArrayBuffer(8));return f.setFloat64(0,c,!1),new Uint8Array(f.buffer)}(e),a=0!=(128&t[0]);t[0]^=a?255:128;for(let c=1;c<t.length;++c)t[c]^=a?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let a=2*this.buffer.length;a<t&&(a=t);const c=new Uint8Array(a);c.set(this.buffer),this.buffer=c}}class K_{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class vm{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class af{constructor(){this.je=new W_,this.ze=new K_(this.je),this.We=new vm(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class Qc{constructor(e,t,a,c){this.indexId=e,this.documentKey=t,this.arrayValue=a,this.directionalValue=c}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,a=new Uint8Array(t);return a.set(this.directionalValue,0),t!==e?a.set([0],this.directionalValue.length):++a[a.length-1],new Qc(this.indexId,this.documentKey,this.arrayValue,a)}}function Cc(r,e){let t=r.indexId-e.indexId;return 0!==t?t:(t=gh(r.arrayValue,e.arrayValue),0!==t?t:(t=gh(r.directionalValue,e.directionalValue),0!==t?t:on.comparator(r.documentKey,e.documentKey)))}function gh(r,e){for(let t=0;t<r.length&&t<e.length;++t){const a=r[t]-e[t];if(0!==a)return a}return r.length-e.length}class rg{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const a=t;a.isInequality()?this.Ze=a:this.Xe.push(a)}}tn(e){Sn(e.collectionGroup===this.collectionId);const t=Ts(e);if(void 0!==t&&!this.en(t))return!1;const a=Bs(e);let c=new Set,f=0,v=0;for(;f<a.length&&this.en(a[f]);++f)c=c.add(a[f].fieldPath.canonicalString());if(f===a.length)return!0;if(void 0!==this.Ze){if(!c.has(this.Ze.field.canonicalString())){const M=a[f];if(!this.nn(this.Ze,M)||!this.sn(this.Ye[v++],M))return!1}++f}for(;f<a.length;++f){const M=a[f];if(v>=this.Ye.length||!this.sn(this.Ye[v++],M))return!1}return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function mh(r){var e,t;if(Sn(r instanceof qr||r instanceof vi),r instanceof qr){if(r instanceof sm){const c=(null===(t=null===(e=r.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(f=>qr.create(r.field,"==",f)))||[];return vi.create(c,"or")}return r}const a=r.filters.map(c=>mh(c));return vi.create(a,r.op)}function ep(r){if(0===r.getFilters().length)return[];const e=Em(mh(r));return Sn(Ny(e)),yh(e)||ra(e)?[e]:e.getFilters()}function yh(r){return r instanceof qr}function ra(r){return r instanceof vi&&pd(r)}function Ny(r){return yh(r)||ra(r)||function(e){if(e instanceof vi&&fd(e)){for(const t of e.getFilters())if(!yh(t)&&!ra(t))return!1;return!0}return!1}(r)}function Em(r){if(Sn(r instanceof qr||r instanceof vi),r instanceof qr)return r;if(1===r.filters.length)return Em(r.filters[0]);const e=r.filters.map(a=>Em(a));let t=vi.create(e,r.op);return t=Jc(t),Ny(t)?t:(Sn(t instanceof vi),Sn(ku(t)),Sn(t.filters.length>1),t.filters.reduce((a,c)=>wm(a,c)))}function wm(r,e){let t;return Sn(r instanceof qr||r instanceof vi),Sn(e instanceof qr||e instanceof vi),t=r instanceof qr?e instanceof qr?vi.create([r,e],"and"):Py(r,e):e instanceof qr?Py(e,r):function(a,c){if(Sn(a.filters.length>0&&c.filters.length>0),ku(a)&&ku(c))return jp(a,c.getFilters());const f=fd(a)?a:c,v=fd(a)?c:a,M=f.filters.map(j=>wm(j,v));return vi.create(M,"or")}(r,e),Jc(t)}function Py(r,e){if(ku(e))return jp(e,r.getFilters());{const t=e.filters.map(a=>wm(r,a));return vi.create(t,"or")}}function Jc(r){if(Sn(r instanceof qr||r instanceof vi),r instanceof qr)return r;const e=r.getFilters();if(1===e.length)return Jc(e[0]);if(Yd(r))return r;const t=e.map(c=>Jc(c)),a=[];return t.forEach(c=>{c instanceof qr?a.push(c):c instanceof vi&&(c.op===r.op?a.push(...c.filters):a.push(c))}),1===a.length?a[0]:vi.create(a,r.op)}class Xc{constructor(){this.rn=new lf}addToCollectionParentIndex(e,t){return this.rn.add(t),I.resolve()}getCollectionParents(e,t){return I.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return I.resolve()}deleteFieldIndex(e,t){return I.resolve()}getDocumentsMatchingTarget(e,t){return I.resolve(null)}getIndexType(e,t){return I.resolve(0)}getFieldIndexes(e,t){return I.resolve([])}getNextCollectionGroupToUpdate(e){return I.resolve(null)}getMinOffset(e,t){return I.resolve(ao.min())}getMinOffsetFromCollectionGroup(e,t){return I.resolve(ao.min())}updateCollectionGroup(e,t,a){return I.resolve()}updateIndexEntries(e,t){return I.resolve()}}class lf{constructor(){this.index={}}add(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t]||new fi($n.comparator),f=!c.has(a);return this.index[t]=c.add(a),f}has(e){const t=e.lastSegment(),a=e.popLast(),c=this.index[t];return c&&c.has(a)}getEntries(e){return(this.index[e]||new fi($n.comparator)).toArray()}}const tp=new Uint8Array(0);class Oy{constructor(e,t){this.user=e,this.databaseId=t,this.on=new lf,this.un=new ql(a=>Fu(a),(a,c)=>md(a,c)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const a=t.lastSegment(),c=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const f={collectionId:a,parent:rs(c)};return Im(e).put(f)}return I.resolve()}getCollectionParents(e,t){const a=[],c=IDBKeyRange.bound([t,""],[Oc(t),""],!1,!0);return Im(e).j(c).next(f=>{for(const v of f){if(v.collectionId!==t)break;a.push(hi(v.parent))}return a})}addFieldIndex(e,t){const a=ig(e),c={indexId:(v=t).indexId,collectionGroup:v.collectionGroup,fields:v.fields.map(M=>[M.fieldPath.canonicalString(),M.kind])};var v;delete c.indexId;const f=a.add(c);if(t.indexState){const v=Yl(e);return f.next(M=>{v.put(ng(M,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return f.next()}deleteFieldIndex(e,t){const a=ig(e),c=Yl(e),f=Dl(e);return a.delete(t.indexId).next(()=>c.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>f.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const a=Dl(e);let c=!0;const f=new Map;return I.forEach(this.cn(t),v=>this.an(e,v).next(M=>{c&&(c=!!M),f.set(v,M)})).next(()=>{if(c){let v=gr();const M=[];return I.forEach(f,(j,q)=>{var ie;Vt("IndexedDbIndexManager",`Using index ${ie=j,`id=${ie.indexId}|cg=${ie.collectionGroup}|f=${ie.fields.map(Br=>`${Br.fieldPath}:${Br.kind}`).join(",")}`} to execute ${Fu(t)}`);const we=function(Br,Xs){const ks=Ts(Xs);if(void 0===ks)return null;for(const Ms of Qd(Br,ks.fieldPath))switch(Ms.op){case"array-contains-any":return Ms.value.arrayValue.values||[];case"array-contains":return[Ms.value]}return null}(q,j),nt=function(Br,Xs){const ks=new Map;for(const Ms of Bs(Xs))for(const Ml of Qd(Br,Ms.fieldPath))switch(Ml.op){case"==":case"in":ks.set(Ms.fieldPath.canonicalString(),Ml.value);break;case"not-in":case"!=":return ks.set(Ms.fieldPath.canonicalString(),Ml.value),Array.from(ks.values())}return null}(q,j),It=function(Br,Xs){const ks=[];let Ms=!0;for(const Ml of Bs(Xs)){const Vp=0===Ml.kind?Jd(Br,Ml.fieldPath,Br.startAt):yd(Br,Ml.fieldPath,Br.startAt);ks.push(Vp.value),Ms&&(Ms=Vp.inclusive)}return new Co(ks,Ms)}(q,j),Wt=function(Br,Xs){const ks=[];let Ms=!0;for(const Ml of Bs(Xs)){const Vp=0===Ml.kind?yd(Br,Ml.fieldPath,Br.endAt):Jd(Br,Ml.fieldPath,Br.endAt);ks.push(Vp.value),Ms&&(Ms=Vp.inclusive)}return new Co(ks,Ms)}(q,j),pn=this.hn(j,q,It),_n=this.hn(j,q,Wt),Ur=this.ln(j,q,nt),Ei=this.fn(j.indexId,we,pn,It.inclusive,_n,Wt.inclusive,Ur);return I.forEach(Ei,Br=>a.H(Br,t.limit).next(Xs=>{Xs.forEach(ks=>{const Ms=on.fromSegments(ks.documentKey);v.has(Ms)||(v=v.add(Ms),M.push(Ms))})}))}).next(()=>M)}return I.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:ep(vi.create(e.filters,"and")).map(a=>fu(e.path,e.collectionGroup,e.orderBy,a.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,a,c,f,v,M){const j=(null!=t?t.length:1)*Math.max(a.length,f.length),q=j/(null!=t?t.length:1),ie=[];for(let we=0;we<j;++we){const nt=t?this.dn(t[we/q]):tp,It=this.wn(e,nt,a[we%q],c),Wt=this._n(e,nt,f[we%q],v),pn=M.map(_n=>this.wn(e,nt,_n,!0));ie.push(...this.createRange(It,Wt,pn))}return ie}wn(e,t,a,c){const f=new Qc(e,on.empty(),t,a);return c?f:f.Je()}_n(e,t,a,c){const f=new Qc(e,on.empty(),t,a);return c?f.Je():f}an(e,t){const a=new rg(t),c=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,c).next(f=>{let v=null;for(const M of f)a.tn(M)&&(!v||M.fields.length>v.fields.length)&&(v=M);return v})}getIndexType(e,t){let a=2;const c=this.cn(t);return I.forEach(c,f=>this.an(e,f).next(v=>{v?0!==a&&v.fields.length<function(M){let j=new fi(_i.comparator),q=!1;for(const ie of M.filters)for(const we of ie.getFlattenedFilters())we.field.isKeyField()||("array-contains"===we.op||"array-contains-any"===we.op?q=!0:j=j.add(we.field));for(const ie of M.orderBy)ie.field.isKeyField()||(j=j.add(ie.field));return j.size+(q?1:0)}(f)&&(a=1):a=0})).next(()=>null!==t.limit&&c.length>1&&2===a?1:a)}mn(e,t){const a=new af;for(const c of Bs(e)){const f=t.data.field(c.fieldPath);if(null==f)return null;const v=a.He(c.kind);ph.Ve._e(f,v)}return a.Qe()}dn(e){const t=new af;return ph.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const a=new af;return ph.Ve._e(k(this.databaseId,t),a.He(function(c){const f=Bs(c);return 0===f.length?0:f[f.length-1].kind}(e))),a.Qe()}ln(e,t,a){if(null===a)return[];let c=[];c.push(new af);let f=0;for(const v of Bs(e)){const M=a[f++];for(const j of c)if(this.yn(t,v.fieldPath)&&ae(M))c=this.pn(c,v,M);else{const q=j.He(v.kind);ph.Ve._e(M,q)}}return this.In(c)}hn(e,t,a){return this.ln(e,t,a.position)}In(e){const t=[];for(let a=0;a<e.length;++a)t[a]=e[a].Qe();return t}pn(e,t,a){const c=[...e],f=[];for(const v of a.arrayValue.values||[])for(const M of c){const j=new af;j.seed(M.Qe()),ph.Ve._e(v,j.He(t.kind)),f.push(j)}return f}yn(e,t){return!!e.filters.find(a=>a instanceof qr&&a.field.isEqual(t)&&("in"===a.op||"not-in"===a.op))}getFieldIndexes(e,t){const a=ig(e),c=Yl(e);return(t?a.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):a.j()).next(f=>{const v=[];return I.forEach(f,M=>c.get([M.indexId,this.uid]).next(j=>{v.push(function(q,ie){const we=ie?new Hl(ie.sequenceNumber,new ao(Td(ie.readTime),new on(hi(ie.documentKey)),ie.largestBatchId)):Hl.empty(),nt=q.fields.map(([It,Wt])=>new Bl(_i.fromServerFormat(It),Wt));return new Ul(q.indexId,q.collectionGroup,nt,we)}(M,j))})).next(()=>v)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((a,c)=>{const f=a.indexState.sequenceNumber-c.indexState.sequenceNumber;return 0!==f?f:ir(a.collectionGroup,c.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,a){const c=ig(e),f=Yl(e);return this.Tn(e).next(v=>c.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(M=>I.forEach(M,j=>f.put(ng(j.indexId,this.user,v,a)))))}updateIndexEntries(e,t){const a=new Map;return I.forEach(t,(c,f)=>{const v=a.get(c.collectionGroup);return(v?I.resolve(v):this.getFieldIndexes(e,c.collectionGroup)).next(M=>(a.set(c.collectionGroup,M),I.forEach(M,j=>this.En(e,c,j).next(q=>{const ie=this.An(f,j);return q.isEqual(ie)?I.resolve():this.vn(e,f,j,q,ie)}))))})}Rn(e,t,a,c){return Dl(e).put({indexId:c.indexId,uid:this.uid,arrayValue:c.arrayValue,directionalValue:c.directionalValue,orderedDocumentKey:this.gn(a,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,a,c){return Dl(e).delete([c.indexId,this.uid,c.arrayValue,c.directionalValue,this.gn(a,t.key),t.key.path.toArray()])}En(e,t,a){const c=Dl(e);let f=new fi(Cc);return c.X({index:"documentKeyIndex",range:IDBKeyRange.only([a.indexId,this.uid,this.gn(a,t)])},(v,M)=>{f=f.add(new Qc(a.indexId,t,M.arrayValue,M.directionalValue))}).next(()=>f)}An(e,t){let a=new fi(Cc);const c=this.mn(t,e);if(null==c)return a;const f=Ts(t);if(null!=f){const v=e.data.field(f.fieldPath);if(ae(v))for(const M of v.arrayValue.values||[])a=a.add(new Qc(t.indexId,e.key,this.dn(M),c))}else a=a.add(new Qc(t.indexId,e.key,tp,c));return a}vn(e,t,a,c,f){Vt("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const v=[];return function(M,j,q,ie,we){const nt=M.getIterator(),It=j.getIterator();let Wt=tl(nt),pn=tl(It);for(;Wt||pn;){let _n=!1,Ur=!1;if(Wt&&pn){const Ei=q(Wt,pn);Ei<0?Ur=!0:Ei>0&&(_n=!0)}else null!=Wt?Ur=!0:_n=!0;_n?(ie(pn),pn=tl(It)):Ur?(we(Wt),Wt=tl(nt)):(Wt=tl(nt),pn=tl(It))}}(c,f,Cc,M=>{v.push(this.Rn(e,t,a,M))},M=>{v.push(this.Pn(e,t,a,M))}),I.waitFor(v)}Tn(e){let t=1;return Yl(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(a,c,f)=>{f.done(),t=c.sequenceNumber+1}).next(()=>t)}createRange(e,t,a){a=a.sort((v,M)=>Cc(v,M)).filter((v,M,j)=>!M||0!==Cc(v,j[M-1]));const c=[];c.push(e);for(const v of a){const M=Cc(v,e),j=Cc(v,t);if(0===M)c[0]=e.Je();else if(M>0&&j<0)c.push(v),c.push(v.Je());else if(j>0)break}c.push(t);const f=[];for(let v=0;v<c.length;v+=2){if(this.bn(c[v],c[v+1]))return[];f.push(IDBKeyRange.bound([c[v].indexId,this.uid,c[v].arrayValue,c[v].directionalValue,tp,[]],[c[v+1].indexId,this.uid,c[v+1].arrayValue,c[v+1].directionalValue,tp,[]]))}return f}bn(e,t){return Cc(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(ky)}getMinOffset(e,t){return I.mapArray(this.cn(t),a=>this.an(e,a).next(c=>c||Ot())).next(ky)}}function Im(r){return Ss(r,"collectionParents")}function Dl(r){return Ss(r,"indexEntries")}function ig(r){return Ss(r,"indexConfiguration")}function Yl(r){return Ss(r,"indexState")}function ky(r){Sn(0!==r.length);let e=r[0].indexState.offset,t=e.largestBatchId;for(let a=1;a<r.length;a++){const c=r[a].indexState.offset;ud(c,e)<0&&(e=c),t<c.largestBatchId&&(t=c.largestBatchId)}return new ao(e.readTime,e.documentKey,t)}const Cm={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class $o{constructor(e,t,a){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=a}static withCacheSize(e){return new $o(e,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function Dm(r,e,t){const a=r.store("mutations"),c=r.store("documentMutations"),f=[],v=IDBKeyRange.only(t.batchId);let M=0;const j=a.X({range:v},(ie,we,nt)=>(M++,nt.delete()));f.push(j.next(()=>{Sn(1===M)}));const q=[];for(const ie of t.mutations){const we=$d(e,ie.key.path,t.batchId);f.push(c.delete(we)),q.push(ie.key)}return I.waitFor(f).next(()=>q)}function sg(r){if(!r)return 0;let e;if(r.document)e=r.document;else if(r.unknownDocument)e=r.unknownDocument;else{if(!r.noDocument)throw Ot();e=r.noDocument}return JSON.stringify(e).length}$o.DEFAULT_COLLECTION_PERCENTILE=10,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,$o.DEFAULT=new $o(41943040,$o.DEFAULT_COLLECTION_PERCENTILE,$o.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),$o.DISABLED=new $o(-1,0,0);class og{constructor(e,t,a,c){this.userId=e,this.serializer=t,this.indexManager=a,this.referenceDelegate=c,this.Vn={}}static de(e,t,a,c){Sn(""!==e.uid);const f=e.isAuthenticated()?e.uid:"";return new og(f,t,a,c)}checkEmpty(e){let t=!0;const a=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).X({index:"userMutationsIndex",range:a},(c,f,v)=>{t=!1,v.done()}).next(()=>t)}addMutationBatch(e,t,a,c){const f=_h(e),v=Ad(e);return v.add({}).next(M=>{Sn("number"==typeof M);const j=new C(M,t,a,c),q=function(nt,It,Wt){const pn=Wt.baseMutations.map(Ur=>Zp(nt.fe,Ur)),_n=Wt.mutations.map(Ur=>Zp(nt.fe,Ur));return{userId:It,batchId:Wt.batchId,localWriteTimeMs:Wt.localWriteTime.toMillis(),baseMutations:pn,mutations:_n}}(this.serializer,this.userId,j),ie=[];let we=new fi((nt,It)=>ir(nt.canonicalString(),It.canonicalString()));for(const nt of c){const It=$d(this.userId,nt.key.path,M);we=we.add(nt.key.path.popLast()),ie.push(v.put(q)),ie.push(f.put(It,cd))}return we.forEach(nt=>{ie.push(this.indexManager.addToCollectionParentIndex(e,nt))}),e.addOnCommittedListener(()=>{this.Vn[M]=j.keys()}),I.waitFor(ie).next(()=>j)})}lookupMutationBatch(e,t){return Ad(e).get(t).next(a=>a?(Sn(a.userId===this.userId),Yc(this.serializer,a)):null)}Sn(e,t){return this.Vn[t]?I.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(a=>{if(a){const c=a.keys();return this.Vn[t]=c,c}return null})}getNextMutationBatchAfterBatchId(e,t){const a=t+1,c=IDBKeyRange.lowerBound([this.userId,a]);let f=null;return Ad(e).X({index:"userMutationsIndex",range:c},(v,M,j)=>{M.userId===this.userId&&(Sn(M.batchId>=a),f=Yc(this.serializer,M)),j.done()}).next(()=>f)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let a=-1;return Ad(e).X({index:"userMutationsIndex",range:t,reverse:!0},(c,f,v)=>{a=f.batchId,v.done()}).next(()=>a)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Ad(e).j("userMutationsIndex",t).next(a=>a.map(c=>Yc(this.serializer,c)))}getAllMutationBatchesAffectingDocumentKey(e,t){const a=Yi(this.userId,t.path),c=IDBKeyRange.lowerBound(a),f=[];return _h(e).X({range:c},(v,M,j)=>{const[q,ie,we]=v,nt=hi(ie);if(q===this.userId&&t.path.isEqual(nt))return Ad(e).get(we).next(It=>{if(!It)throw Ot();Sn(It.userId===this.userId),f.push(Yc(this.serializer,It))});j.done()}).next(()=>f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new fi(ir);const c=[];return t.forEach(f=>{const v=Yi(this.userId,f.path),M=IDBKeyRange.lowerBound(v),j=_h(e).X({range:M},(q,ie,we)=>{const[nt,It,Wt]=q,pn=hi(It);nt===this.userId&&f.path.isEqual(pn)?a=a.add(Wt):we.done()});c.push(j)}),I.waitFor(c).next(()=>this.Dn(e,a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1,f=Yi(this.userId,a),v=IDBKeyRange.lowerBound(f);let M=new fi(ir);return _h(e).X({range:v},(j,q,ie)=>{const[we,nt,It]=j,Wt=hi(nt);we===this.userId&&a.isPrefixOf(Wt)?Wt.length===c&&(M=M.add(It)):ie.done()}).next(()=>this.Dn(e,M))}Dn(e,t){const a=[],c=[];return t.forEach(f=>{c.push(Ad(e).get(f).next(v=>{if(null===v)throw Ot();Sn(v.userId===this.userId),a.push(Yc(this.serializer,v))}))}),I.waitFor(c).next(()=>a)}removeMutationBatch(e,t){return Dm(e.ht,this.userId,t).next(a=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),I.forEach(a,c=>this.referenceDelegate.markPotentiallyOrphaned(e,c))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return I.resolve();const a=IDBKeyRange.lowerBound([this.userId]),c=[];return _h(e).X({range:a},(f,v,M)=>{if(f[0]===this.userId){const j=hi(f[1]);c.push(j)}else M.done()}).next(()=>{Sn(0===c.length)})})}containsKey(e,t){return gu(e,this.userId,t)}xn(e){return Fy(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function gu(r,e,t){const a=Yi(e,t.path),c=a[1],f=IDBKeyRange.lowerBound(a);let v=!1;return _h(r).X({range:f,Y:!0},(M,j,q)=>{const[ie,we,nt]=M;ie===e&&we===c&&(v=!0),q.done()}).next(()=>v)}function Ad(r){return Ss(r,"mutations")}function _h(r){return Ss(r,"documentMutations")}function Fy(r){return Ss(r,"mutationQueues")}class vh{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new vh(0)}static Mn(){return new vh(-1)}}class q_{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const a=new vh(t.highestTargetId);return t.highestTargetId=a.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Nn.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,a){return this.$n(e).next(c=>(c.highestListenSequenceNumber=t,a&&(c.lastRemoteSnapshotVersion=a.toTimestamp()),t>c.highestListenSequenceNumber&&(c.highestListenSequenceNumber=t),this.On(e,c)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(a=>(a.targetCount+=1,this.Bn(t,a),this.On(e,a))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ia(e).delete(t.targetId)).next(()=>this.$n(e)).next(a=>(Sn(a.targetCount>0),a.targetCount-=1,this.On(e,a)))}removeTargets(e,t,a){let c=0;const f=[];return ia(e).X((v,M)=>{const j=Qf(M);j.sequenceNumber<=t&&null===a.get(j.targetId)&&(c++,f.push(this.removeTargetData(e,j)))}).next(()=>I.waitFor(f)).next(()=>c)}forEachTarget(e,t){return ia(e).X((a,c)=>{const f=Qf(c);t(f)})}$n(e){return np(e).get("targetGlobalKey").next(t=>(Sn(null!==t),t))}On(e,t){return np(e).put("targetGlobalKey",t)}Fn(e,t){return ia(e).put(mm(this.serializer,t))}Bn(e,t){let a=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,a=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,a=!0),a}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const a=Fu(t),c=IDBKeyRange.bound([a,Number.NEGATIVE_INFINITY],[a,Number.POSITIVE_INFINITY]);let f=null;return ia(e).X({range:c,index:"queryTargetsIndex"},(v,M,j)=>{const q=Qf(M);md(t,q.target)&&(f=q,j.done())}).next(()=>f)}addMatchingKeys(e,t,a){const c=[],f=Dc(e);return t.forEach(v=>{const M=rs(v.path);c.push(f.put({targetId:a,path:M})),c.push(this.referenceDelegate.addReference(e,a,v))}),I.waitFor(c)}removeMatchingKeys(e,t,a){const c=Dc(e);return I.forEach(t,f=>{const v=rs(f.path);return I.waitFor([c.delete([a,v]),this.referenceDelegate.removeReference(e,a,f)])})}removeMatchingKeysForTargetId(e,t){const a=Dc(e),c=IDBKeyRange.bound([t],[t+1],!1,!0);return a.delete(c)}getMatchingKeysForTargetId(e,t){const a=IDBKeyRange.bound([t],[t+1],!1,!0),c=Dc(e);let f=gr();return c.X({range:a,Y:!0},(v,M,j)=>{const q=hi(v[1]),ie=new on(q);f=f.add(ie)}).next(()=>f)}containsKey(e,t){const a=rs(t.path),c=IDBKeyRange.bound([a],[Oc(a)],!1,!0);let f=0;return Dc(e).X({index:"documentTargetsIndex",Y:!0,range:c},([v,M],j,q)=>{0!==v&&(f++,q.done())}).next(()=>f>0)}le(e,t){return ia(e).get(t).next(a=>a?Qf(a):null)}}function ia(r){return Ss(r,"targets")}function np(r){return Ss(r,"targetGlobal")}function Dc(r){return Ss(r,"targetDocuments")}function bm([r,e],[t,a]){const c=ir(r,t);return 0===c?ir(e,a):c}class Z_{constructor(e){this.Ln=e,this.buffer=new fi(bm),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const a=this.buffer.last();bm(t,a)<0&&(this.buffer=this.buffer.delete(a).add(t))}}get maxValue(){return this.buffer.last()[0]}}class Rr{constructor(e,t,a){this.garbageCollector=e,this.asyncQueue=t,this.localStore=a,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;Vt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,Ue.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(a){ce(a)?Vt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",a):yield Xo(a)}yield t.Qn(3e5)}))}}class Tm{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(a=>Math.floor(t/100*a))}nthSequenceNumber(e,t){if(0===t)return I.resolve(Lr.ct);const a=new Z_(t);return this.jn.forEachTarget(e,c=>a.Kn(c.sequenceNumber)).next(()=>this.jn.Wn(e,c=>a.Kn(c))).next(()=>a.maxValue)}removeTargets(e,t,a){return this.jn.removeTargets(e,t,a)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector","Garbage collection skipped; disabled"),I.resolve(Cm)):this.getCacheSize(e).next(a=>a<this.params.cacheSizeCollectionThreshold?(Vt("LruGarbageCollector",`Garbage collection skipped; Cache size ${a} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Cm):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let a,c,f,v,M,j,q;const ie=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(we=>(we>this.params.maximumSequenceNumbersToCollect?(Vt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${we}`),c=this.params.maximumSequenceNumbersToCollect):c=we,v=Date.now(),this.nthSequenceNumber(e,c))).next(we=>(a=we,M=Date.now(),this.removeTargets(e,a,t))).next(we=>(f=we,j=Date.now(),this.removeOrphanedDocuments(e,a))).next(we=>(q=Date.now(),au()<=De.in.DEBUG&&Vt("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${v-ie}ms\n\tDetermined least recently used ${c} in `+(M-v)+`ms\n\tRemoved ${f} targets in `+(j-M)+`ms\n\tRemoved ${we} documents in `+(q-j)+`ms\nTotal Duration: ${q-ie}ms`),I.resolve({didRun:!0,sequenceNumbersCollected:c,targetsRemoved:f,documentsRemoved:we})))}}class Ly{constructor(e,t){this.db=e,this.garbageCollector=function Sm(r,e){return new Tm(r,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(a=>t.next(c=>a+c))}Jn(e){let t=0;return this.Wn(e,a=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(a,c)=>t(c))}addReference(e,t,a){return ag(e,a)}removeReference(e,t,a){return ag(e,a)}removeTargets(e,t,a){return this.db.getTargetCache().removeTargets(e,t,a)}markPotentiallyOrphaned(e,t){return ag(e,t)}Xn(e,t){return function(a,c){let f=!1;return Fy(a).Z(v=>gu(a,v,c).next(M=>(M&&(f=!0),I.resolve(!M)))).next(()=>f)}(e,t)}removeOrphanedDocuments(e,t){const a=this.db.getRemoteDocumentCache().newChangeBuffer(),c=[];let f=0;return this.Yn(e,(v,M)=>{if(M<=t){const j=this.Xn(e,v).next(q=>{if(!q)return f++,a.getEntry(e,v).next(()=>(a.removeEntry(v,Nn.min()),Dc(e).delete([0,rs(v.path)])))});c.push(j)}}).next(()=>I.waitFor(c)).next(()=>a.apply(e)).next(()=>f)}removeTarget(e,t){const a=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,a)}updateLimboDocument(e,t){return ag(e,t)}Yn(e,t){const a=Dc(e);let c,f=Lr.ct;return a.X({index:"documentTargetsIndex"},([v,M],{path:j,sequenceNumber:q})=>{0===v?(f!==Lr.ct&&t(new on(hi(c)),f),f=q,c=j):f=Lr.ct}).next(()=>{f!==Lr.ct&&t(new on(hi(c)),f)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ag(r,e){return Dc(r).put((a=r.currentSequenceNumber,{targetId:0,path:rs(e.path),sequenceNumber:a}));var a}class zu{constructor(){this.changes=new ql(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,pi.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const a=this.changes.get(t);return void 0!==a?I.resolve(a):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class lg{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,a){return Eh(e).put(a)}removeEntry(e,t,a){return Eh(e).delete(function(c,f){const v=c.path.toArray();return[v.slice(0,v.length-2),v[v.length-2],tg(f),v[v.length-1]]}(t,a))}updateMetadata(e,t){return this.getMetadata(e).next(a=>(a.byteSize+=t,this.Zn(e,a)))}getEntry(e,t){let a=pi.newInvalidDocument(t);return Eh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sa(t))},(c,f)=>{a=this.ts(t,f)}).next(()=>a)}es(e,t){let a={size:0,document:pi.newInvalidDocument(t)};return Eh(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(sa(t))},(c,f)=>{a={document:this.ts(t,f),size:sg(f)}}).next(()=>a)}getEntries(e,t){let a=La();return this.ns(e,t,(c,f)=>{const v=this.ts(c,f);a=a.insert(c,v)}).next(()=>a)}ss(e,t){let a=La(),c=new Si(on.comparator);return this.ns(e,t,(f,v)=>{const M=this.ts(f,v);a=a.insert(f,M),c=c.insert(f,sg(v))}).next(()=>({documents:a,rs:c}))}ns(e,t,a){if(t.isEmpty())return I.resolve();let c=new fi(Rm);t.forEach(j=>c=c.add(j));const f=IDBKeyRange.bound(sa(c.first()),sa(c.last())),v=c.getIterator();let M=v.getNext();return Eh(e).X({index:"documentKeyIndex",range:f},(j,q,ie)=>{const we=on.fromSegments([...q.prefixPath,q.collectionGroup,q.documentId]);for(;M&&Rm(M,we)<0;)a(M,null),M=v.getNext();M&&M.isEqual(we)&&(a(M,q),M=v.hasNext()?v.getNext():null),M?ie.G(sa(M)):ie.done()}).next(()=>{for(;M;)a(M,null),M=v.hasNext()?v.getNext():null})}getDocumentsMatchingQuery(e,t,a,c){const f=t.path,v=[f.popLast().toArray(),f.lastSegment(),tg(a.readTime),a.documentKey.path.isEmpty()?"":a.documentKey.path.lastSegment()],M=[f.popLast().toArray(),f.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Eh(e).j(IDBKeyRange.bound(v,M,!0)).next(j=>{let q=La();for(const ie of j){const we=this.ts(on.fromSegments(ie.prefixPath.concat(ie.collectionGroup,ie.documentId)),ie);we.isFoundDocument()&&(Kl(t,we)||c.has(we.key))&&(q=q.insert(we.key,we))}return q})}getAllFromCollectionGroup(e,t,a,c){let f=La();const v=uf(t,a),M=uf(t,ao.max());return Eh(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(v,M,!0)},(j,q,ie)=>{const we=this.ts(on.fromSegments(q.prefixPath.concat(q.collectionGroup,q.documentId)),q);f=f.insert(we.key,we),f.size===c&&ie.done()}).next(()=>f)}newChangeBuffer(e){return new Uy(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return Am(e).get("remoteDocumentGlobalKey").next(t=>(Sn(!!t),t))}Zn(e,t){return Am(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const a=function sf(r,e){let t;if(e.document)t=qp(r.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const a=on.fromSegments(e.noDocument.path),c=Td(e.noDocument.readTime);t=pi.newNoDocument(a,c),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Ot();{const a=on.fromSegments(e.unknownDocument.path),c=Td(e.unknownDocument.version);t=pi.newUnknownDocument(a,c)}}return e.readTime&&t.setReadTime(function(a){const c=new Qr(a[0],a[1]);return Nn.fromTimestamp(c)}(e.readTime)),t}(this.serializer,t);if(!a.isNoDocument()||!a.version.isEqual(Nn.min()))return a}return pi.newInvalidDocument(e)}}function Vy(r){return new lg(r)}class Uy extends zu{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new ql(a=>a.toString(),(a,c)=>a.isEqual(c))}applyChanges(e){const t=[];let a=0,c=new fi((f,v)=>ir(f.canonicalString(),v.canonicalString()));return this.changes.forEach((f,v)=>{const M=this.us.get(f);if(t.push(this.os.removeEntry(e,f,M.readTime)),v.isValidDocument()){const j=Yf(this.os.serializer,v);c=c.add(f.path.popLast()),a+=sg(j)-M.size,t.push(this.os.addEntry(e,f,j))}else if(a-=M.size,this.trackRemovals){const j=Yf(this.os.serializer,v.convertToNoDocument(Nn.min()));t.push(this.os.addEntry(e,f,j))}}),c.forEach(f=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,f))}),t.push(this.os.updateMetadata(e,a)),I.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(a=>(this.us.set(t,{size:a.size,readTime:a.document.readTime}),a.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:a,rs:c})=>(c.forEach((f,v)=>{this.us.set(f,{size:v,readTime:a.get(f).readTime})}),a))}}function Am(r){return Ss(r,"remoteDocumentGlobal")}function Eh(r){return Ss(r,"remoteDocumentsV14")}function sa(r){const e=r.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function uf(r,e){const t=e.documentKey.path.toArray();return[r,tg(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function Rm(r,e){const t=r.path.toArray(),a=e.path.toArray();let c=0;for(let f=0;f<t.length-2&&f<a.length-2;++f)if(c=ir(t[f],a[f]),c)return c;return c=ir(t.length,a.length),c||(c=ir(t[t.length-2],a[a.length-2]),c||ir(t[t.length-1],a[a.length-1]))}class Wu{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class By{constructor(e,t,a,c){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=a,this.indexManager=c}getDocument(e,t){let a=null;return this.documentOverlayCache.getOverlay(e,t).next(c=>(a=c,this.remoteDocumentCache.getEntry(e,t))).next(c=>(null!==a&&Qs(a.mutation,c,Hs.empty(),Qr.now()),c))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.getLocalViewOfDocuments(e,a,gr()).next(()=>a))}getLocalViewOfDocuments(e,t,a=gr()){const c=sl();return this.populateOverlays(e,c,t).next(()=>this.computeViews(e,t,c,a).next(f=>{let v=Cl();return f.forEach((M,j)=>{v=v.insert(M,j.overlayedDocument)}),v}))}getOverlayedDocuments(e,t){const a=sl();return this.populateOverlays(e,a,t).next(()=>this.computeViews(e,t,a,gr()))}populateOverlays(e,t,a){const c=[];return a.forEach(f=>{t.has(f)||c.push(f)}),this.documentOverlayCache.getOverlays(e,c).next(f=>{f.forEach((v,M)=>{t.set(v,M)})})}computeViews(e,t,a,c){let f=La();const v=$c(),M=$c();return t.forEach((j,q)=>{const ie=a.get(q.key);c.has(q.key)&&(void 0===ie||ie.mutation instanceof vc)?f=f.insert(q.key,q):void 0!==ie?(v.set(q.key,ie.mutation.getFieldMask()),Qs(ie.mutation,q,ie.mutation.getFieldMask(),Qr.now())):v.set(q.key,Hs.empty())}),this.recalculateAndSaveOverlays(e,f).next(j=>(j.forEach((q,ie)=>v.set(q,ie)),t.forEach((q,ie)=>{var we;return M.set(q,new Wu(ie,null!==(we=v.get(q))&&void 0!==we?we:null))}),M))}recalculateAndSaveOverlays(e,t){const a=$c();let c=new Si((v,M)=>v-M),f=gr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(v=>{for(const M of v)M.keys().forEach(j=>{const q=t.get(j);if(null===q)return;let ie=a.get(j)||Hs.empty();ie=M.applyToLocalView(q,ie),a.set(j,ie);const we=(c.get(M.batchId)||gr()).add(j);c=c.insert(M.batchId,we)})}).next(()=>{const v=[],M=c.getReverseIterator();for(;M.hasNext();){const j=M.getNext(),q=j.key,ie=j.value,we=Kh();ie.forEach(nt=>{if(!f.has(nt)){const It=Qh(t.get(nt),a.get(nt));null!==It&&we.set(nt,It),f=f.add(nt)}}),v.push(this.documentOverlayCache.saveOverlays(e,q,we))}return I.waitFor(v)}).next(()=>a)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(a=>this.recalculateAndSaveOverlays(e,a))}getDocumentsMatchingQuery(e,t,a){return on.isDocumentKey((c=t).path)&&null===c.collectionGroup&&0===c.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):th(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,a):this.getDocumentsMatchingCollectionQuery(e,t,a);var c}getNextDocuments(e,t,a,c){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,a,c).next(f=>{const v=c-f.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,a.largestBatchId,c-f.size):I.resolve(sl());let M=-1,j=f;return v.next(q=>I.forEach(q,(ie,we)=>(M<we.largestBatchId&&(M=we.largestBatchId),f.get(ie)?I.resolve():this.remoteDocumentCache.getEntry(e,ie).next(nt=>{j=j.insert(ie,nt)}))).next(()=>this.populateOverlays(e,q,f)).next(()=>this.computeViews(e,j,q,gr())).next(ie=>({batchId:M,changes:ih(ie)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new on(t)).next(a=>{let c=Cl();return a.isFoundDocument()&&(c=c.insert(a.key,a)),c})}getDocumentsMatchingCollectionGroupQuery(e,t,a){const c=t.collectionGroup;let f=Cl();return this.indexManager.getCollectionParents(e,c).next(v=>I.forEach(v,M=>{const j=(q=t,ie=M.child(c),new Wl(ie,null,q.explicitOrderBy.slice(),q.filters.slice(),q.limit,q.limitType,q.startAt,q.endAt));var q,ie;return this.getDocumentsMatchingCollectionQuery(e,j,a).next(q=>{q.forEach((ie,we)=>{f=f.insert(ie,we)})})}).next(()=>f))}getDocumentsMatchingCollectionQuery(e,t,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,a.largestBatchId).next(f=>(c=f,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,a,c))).next(f=>{c.forEach((M,j)=>{const q=j.getKey();null===f.get(q)&&(f=f.insert(q,pi.newInvalidDocument(q)))});let v=Cl();return f.forEach((M,j)=>{const q=c.get(M);void 0!==q&&Qs(q.mutation,j,Hs.empty(),Qr.now()),Kl(t,j)&&(v=v.insert(M,j))}),v})}}class Mm{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return I.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var a;return this.cs.set(t.id,{id:(a=t).id,version:a.version,createTime:uo(a.createTime)}),I.resolve()}getNamedQuery(e,t){return I.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(a=t).name,query:Rs(a.bundledQuery),readTime:uo(a.readTime)}),I.resolve();var a}}class ug{constructor(){this.overlays=new Si(on.comparator),this.ls=new Map}getOverlay(e,t){return I.resolve(this.overlays.get(t))}getOverlays(e,t){const a=sl();return I.forEach(t,c=>this.getOverlay(e,c).next(f=>{null!==f&&a.set(c,f)})).next(()=>a)}saveOverlays(e,t,a){return a.forEach((c,f)=>{this.we(e,t,f)}),I.resolve()}removeOverlaysForBatchId(e,t,a){const c=this.ls.get(a);return void 0!==c&&(c.forEach(f=>this.overlays=this.overlays.remove(f)),this.ls.delete(a)),I.resolve()}getOverlaysForCollection(e,t,a){const c=sl(),f=t.length+1,v=new on(t.child("")),M=this.overlays.getIteratorFrom(v);for(;M.hasNext();){const j=M.getNext().value,q=j.getKey();if(!t.isPrefixOf(q.path))break;q.path.length===f&&j.largestBatchId>a&&c.set(j.getKey(),j)}return I.resolve(c)}getOverlaysForCollectionGroup(e,t,a,c){let f=new Si((q,ie)=>q-ie);const v=this.overlays.getIterator();for(;v.hasNext();){const q=v.getNext().value;if(q.getKey().getCollectionGroup()===t&&q.largestBatchId>a){let ie=f.get(q.largestBatchId);null===ie&&(ie=sl(),f=f.insert(q.largestBatchId,ie)),ie.set(q.getKey(),q)}}const M=sl(),j=f.getIterator();for(;j.hasNext()&&(j.getNext().value.forEach((q,ie)=>M.set(q,ie)),!(M.size()>=c)););return I.resolve(M)}we(e,t,a){const c=this.overlays.get(a.key);if(null!==c){const v=this.ls.get(c.largestBatchId).delete(a.key);this.ls.set(c.largestBatchId,v)}this.overlays=this.overlays.insert(a.key,new y(t,a));let f=this.ls.get(t);void 0===f&&(f=gr(),this.ls.set(t,f)),this.ls.set(t,f.add(a.key))}}class xm{constructor(){this.fs=new fi(Go.ds),this.ws=new fi(Go._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const a=new Go(e,t);this.fs=this.fs.add(a),this.ws=this.ws.add(a)}gs(e,t){e.forEach(a=>this.addReference(a,t))}removeReference(e,t){this.ys(new Go(e,t))}ps(e,t){e.forEach(a=>this.removeReference(a,t))}Is(e){const t=new on(new $n([])),a=new Go(t,e),c=new Go(t,e+1),f=[];return this.ws.forEachInRange([a,c],v=>{this.ys(v),f.push(v.key)}),f}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new on(new $n([])),a=new Go(t,e),c=new Go(t,e+1);let f=gr();return this.ws.forEachInRange([a,c],v=>{f=f.add(v.key)}),f}containsKey(e){const t=new Go(e,0),a=this.fs.firstAfterOrEqual(t);return null!==a&&e.isEqual(a.key)}}class Go{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return on.comparator(e.key,t.key)||ir(e.As,t.As)}static _s(e,t){return ir(e.As,t.As)||on.comparator(e.key,t.key)}}class Y_{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new fi(Go.ds)}checkEmpty(e){return I.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,a,c){const f=this.vs;this.vs++;const v=new C(f,t,a,c);this.mutationQueue.push(v);for(const M of c)this.Rs=this.Rs.add(new Go(M.key,f)),this.indexManager.addToCollectionParentIndex(e,M.key.path.popLast());return I.resolve(v)}lookupMutationBatch(e,t){return I.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const c=this.bs(t+1),f=c<0?0:c;return I.resolve(this.mutationQueue.length>f?this.mutationQueue[f]:null)}getHighestUnacknowledgedBatchId(){return I.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return I.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const a=new Go(t,0),c=new Go(t,Number.POSITIVE_INFINITY),f=[];return this.Rs.forEachInRange([a,c],v=>{const M=this.Ps(v.As);f.push(M)}),I.resolve(f)}getAllMutationBatchesAffectingDocumentKeys(e,t){let a=new fi(ir);return t.forEach(c=>{const f=new Go(c,0),v=new Go(c,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([f,v],M=>{a=a.add(M.As)})}),I.resolve(this.Vs(a))}getAllMutationBatchesAffectingQuery(e,t){const a=t.path,c=a.length+1;let f=a;on.isDocumentKey(f)||(f=f.child(""));const v=new Go(new on(f),0);let M=new fi(ir);return this.Rs.forEachWhile(j=>{const q=j.key.path;return!!a.isPrefixOf(q)&&(q.length===c&&(M=M.add(j.As)),!0)},v),I.resolve(this.Vs(M))}Vs(e){const t=[];return e.forEach(a=>{const c=this.Ps(a);null!==c&&t.push(c)}),t}removeMutationBatch(e,t){Sn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let a=this.Rs;return I.forEach(t.mutations,c=>{const f=new Go(c.key,t.batchId);return a=a.delete(f),this.referenceDelegate.markPotentiallyOrphaned(e,c.key)}).next(()=>{this.Rs=a})}Cn(e){}containsKey(e,t){const a=new Go(t,0),c=this.Rs.firstAfterOrEqual(a);return I.resolve(t.isEqual(c&&c.key))}performConsistencyCheck(e){return I.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class Q_{constructor(e){this.Ds=e,this.docs=new Si(on.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const a=t.key,c=this.docs.get(a),f=c?c.size:0,v=this.Ds(t);return this.docs=this.docs.insert(a,{document:t.mutableCopy(),size:v}),this.size+=v-f,this.indexManager.addToCollectionParentIndex(e,a.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const a=this.docs.get(t);return I.resolve(a?a.document.mutableCopy():pi.newInvalidDocument(t))}getEntries(e,t){let a=La();return t.forEach(c=>{const f=this.docs.get(c);a=a.insert(c,f?f.document.mutableCopy():pi.newInvalidDocument(c))}),I.resolve(a)}getDocumentsMatchingQuery(e,t,a,c){let f=La();const v=t.path,M=new on(v.child("")),j=this.docs.getIteratorFrom(M);for(;j.hasNext();){const{key:q,value:{document:ie}}=j.getNext();if(!v.isPrefixOf(q.path))break;q.path.length>v.length+1||ud(kc(ie),a)<=0||(c.has(ie.key)||Kl(t,ie))&&(f=f.insert(ie.key,ie.mutableCopy()))}return I.resolve(f)}getAllFromCollectionGroup(e,t,a,c){Ot()}Cs(e,t){return I.forEach(this.docs,a=>t(a))}newChangeBuffer(e){return new J_(this)}getSize(e){return I.resolve(this.size)}}class J_ extends zu{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((a,c)=>{c.isValidDocument()?t.push(this.os.addEntry(e,c)):this.os.removeEntry(a)}),I.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class jy{constructor(e){this.persistence=e,this.xs=new ql(t=>Fu(t),md),this.lastRemoteSnapshotVersion=Nn.min(),this.highestTargetId=0,this.Ns=0,this.ks=new xm,this.targetCount=0,this.Ms=vh.kn()}forEachTarget(e,t){return this.xs.forEach((a,c)=>t(c)),I.resolve()}getLastRemoteSnapshotVersion(e){return I.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return I.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),I.resolve(this.highestTargetId)}setTargetsMetadata(e,t,a){return a&&(this.lastRemoteSnapshotVersion=a),t>this.Ns&&(this.Ns=t),I.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new vh(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,I.resolve()}updateTargetData(e,t){return this.Fn(t),I.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,I.resolve()}removeTargets(e,t,a){let c=0;const f=[];return this.xs.forEach((v,M)=>{M.sequenceNumber<=t&&null===a.get(M.targetId)&&(this.xs.delete(v),f.push(this.removeMatchingKeysForTargetId(e,M.targetId)),c++)}),I.waitFor(f).next(()=>c)}getTargetCount(e){return I.resolve(this.targetCount)}getTargetData(e,t){const a=this.xs.get(t)||null;return I.resolve(a)}addMatchingKeys(e,t,a){return this.ks.gs(t,a),I.resolve()}removeMatchingKeys(e,t,a){this.ks.ps(t,a);const c=this.persistence.referenceDelegate,f=[];return c&&t.forEach(v=>{f.push(c.markPotentiallyOrphaned(e,v))}),I.waitFor(f)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),I.resolve()}getMatchingKeysForTargetId(e,t){const a=this.ks.Es(t);return I.resolve(a)}containsKey(e,t){return I.resolve(this.ks.containsKey(t))}}class Ku{constructor(e,t){this.$s={},this.overlays={},this.Os=new Lr(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new jy(this),this.indexManager=new Xc,this.remoteDocumentCache=new Q_(a=>this.referenceDelegate.Ls(a)),this.serializer=new gm(t),this.qs=new Mm(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new ug,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let a=this.$s[e.toKey()];return a||(a=new Y_(t,this.referenceDelegate),this.$s[e.toKey()]=a),a}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,a){Vt("MemoryPersistence","Starting transaction:",e);const c=new bc(this.Os.next());return this.referenceDelegate.Us(),a(c).next(f=>this.referenceDelegate.Ks(c).next(()=>f)).toPromise().then(f=>(c.raiseOnCommittedEvent(),f))}Gs(e,t){return I.or(Object.values(this.$s).map(a=>()=>a.containsKey(e,t)))}}class bc extends js{constructor(e){super(),this.currentSequenceNumber=e}}class mu{constructor(e){this.persistence=e,this.Qs=new xm,this.js=null}static zs(e){return new mu(e)}get Ws(){if(this.js)return this.js;throw Ot()}addReference(e,t,a){return this.Qs.addReference(a,t),this.Ws.delete(a.toString()),I.resolve()}removeReference(e,t,a){return this.Qs.removeReference(a,t),this.Ws.add(a.toString()),I.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),I.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(c=>this.Ws.add(c.toString()));const a=this.persistence.getTargetCache();return a.getMatchingKeysForTargetId(e,t.targetId).next(c=>{c.forEach(f=>this.Ws.add(f.toString()))}).next(()=>a.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return I.forEach(this.Ws,a=>{const c=on.fromPath(a);return this.Hs(e,c).next(f=>{f||t.removeEntry(c,Nn.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(a=>{a?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return I.or([()=>I.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class Hy{constructor(e){this.serializer=e}O(e,t,a,c){const f=new b("createOrUpgrade",t);var M;a<1&&c>=1&&(e.createObjectStore("owner"),(M=e).createObjectStore("mutationQueues",{keyPath:"userId"}),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lu,{unique:!0}),M.createObjectStore("documentMutations"),Tc(e),function(M){M.createObjectStore("remoteDocuments")}(e));let v=I.resolve();return a<3&&c>=3&&(0!==a&&(function(M){M.deleteObjectStore("targetDocuments"),M.deleteObjectStore("targets"),M.deleteObjectStore("targetGlobal")}(e),Tc(e)),v=v.next(()=>function(M){const j=M.store("targetGlobal"),q={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Nn.min().toTimestamp(),targetCount:0};return j.put("targetGlobalKey",q)}(f))),a<4&&c>=4&&(0!==a&&(v=v.next(()=>function(M,j){return j.store("mutations").j().next(q=>{M.deleteObjectStore("mutations"),M.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",lu,{unique:!0});const ie=j.store("mutations"),we=q.map(nt=>ie.put(nt));return I.waitFor(we)})}(e,f))),v=v.next(()=>{!function(M){M.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),a<5&&c>=5&&(v=v.next(()=>this.Ys(f))),a<6&&c>=6&&(v=v.next(()=>(function(M){M.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(f)))),a<7&&c>=7&&(v=v.next(()=>this.Zs(f))),a<8&&c>=8&&(v=v.next(()=>this.ti(e,f))),a<9&&c>=9&&(v=v.next(()=>{!function(M){M.objectStoreNames.contains("remoteDocumentChanges")&&M.deleteObjectStore("remoteDocumentChanges")}(e)})),a<10&&c>=10&&(v=v.next(()=>this.ei(f))),a<11&&c>=11&&(v=v.next(()=>{(function(M){M.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(M){M.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),a<12&&c>=12&&(v=v.next(()=>{!function(M){const j=M.createObjectStore("documentOverlays",{keyPath:vl});j.createIndex("collectionPathOverlayIndex",uc,{unique:!1}),j.createIndex("collectionGroupOverlayIndex",cc,{unique:!1})}(e)})),a<13&&c>=13&&(v=v.next(()=>function(M){const j=M.createObjectStore("remoteDocumentsV14",{keyPath:Fc});j.createIndex("documentKeyIndex",uu),j.createIndex("collectionGroupIndex",Gd)}(e)).next(()=>this.ni(e,f)).next(()=>e.deleteObjectStore("remoteDocuments"))),a<14&&c>=14&&(v=v.next(()=>this.si(e,f))),a<15&&c>=15&&(v=v.next(()=>function(M){M.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),M.createObjectStore("indexState",{keyPath:dd}).createIndex("sequenceNumberIndex",Nu,{unique:!1}),M.createObjectStore("indexEntries",{keyPath:zd}).createIndex("documentKeyIndex",Vc,{unique:!1})}(e))),v}Xs(e){let t=0;return e.store("remoteDocuments").X((a,c)=>{t+=sg(c)}).next(()=>{const a={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",a)})}Ys(e){const t=e.store("mutationQueues"),a=e.store("mutations");return t.j().next(c=>I.forEach(c,f=>{const v=IDBKeyRange.bound([f.userId,-1],[f.userId,f.lastAcknowledgedBatchId]);return a.j("userMutationsIndex",v).next(M=>I.forEach(M,j=>{Sn(j.userId===f.userId);const q=Yc(this.serializer,j);return Dm(e,f.userId,q).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),a=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(c=>{const f=[];return a.X((v,M)=>{const j=new $n(v),q=[0,rs(j)];f.push(t.get(q).next(ie=>ie?I.resolve():t.put({targetId:0,path:rs(j),sequenceNumber:c.highestListenSequenceNumber})))}).next(()=>I.waitFor(f))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:Pa});const a=t.store("collectionParents"),c=new lf,f=v=>{if(c.add(v)){const M=v.lastSegment(),j=v.popLast();return a.put({collectionId:M,parent:rs(j)})}};return t.store("remoteDocuments").X({Y:!0},(v,M)=>{const j=new $n(v);return f(j.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([v,M,j],q)=>{const ie=hi(M);return f(ie.popLast())}))}ei(e){const t=e.store("targets");return t.X((a,c)=>{const f=Qf(c),v=mm(this.serializer,f);return t.put(v)})}ni(e,t){const a=t.store("remoteDocuments"),c=[];return a.X((f,v)=>{const M=t.store("remoteDocumentsV14"),j=(q=v,q.document?new on($n.fromString(q.document.name).popFirst(5)):q.noDocument?on.fromSegments(q.noDocument.path):q.unknownDocument?on.fromSegments(q.unknownDocument.path):Ot()).path.toArray();var q;const ie={prefixPath:j.slice(0,j.length-2),collectionGroup:j[j.length-2],documentId:j[j.length-1],readTime:v.readTime||[0,0],unknownDocument:v.unknownDocument,noDocument:v.noDocument,document:v.document,hasCommittedMutations:!!v.hasCommittedMutations};c.push(M.put(ie))}).next(()=>I.waitFor(c))}si(e,t){const a=t.store("mutations"),c=Vy(this.serializer),f=new Ku(mu.zs,this.serializer.fe);return a.j().next(v=>{const M=new Map;return v.forEach(j=>{var q;let ie=null!==(q=M.get(j.userId))&&void 0!==q?q:gr();Yc(this.serializer,j).keys().forEach(we=>ie=ie.add(we)),M.set(j.userId,ie)}),I.forEach(M,(j,q)=>{const ie=new ns(q),we=Sd.de(this.serializer,ie),nt=f.getIndexManager(ie),It=og.de(ie,this.serializer,nt,f.referenceDelegate);return new By(c,It,we,nt).recalculateAndSaveOverlaysForDocumentKeys(new hd(t,Lr.ct),j).next()})})}}function Tc(r){r.createObjectStore("targetDocuments",{keyPath:xu}).createIndex("documentTargetsIndex",Gh,{unique:!0}),r.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Lc,{unique:!0}),r.createObjectStore("targetGlobal")}const wh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class rp{constructor(e,t,a,c,f,v,M,j,q,ie,we=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=a,this.ii=f,this.window=v,this.document=M,this.ri=q,this.oi=ie,this.ui=we,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=nt=>Promise.resolve(),!rp.D())throw new Tt(at.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Ly(this,c),this.di=t+"main",this.serializer=new gm(j),this.wi=new P(this.di,this.ui,new Hy(this.serializer)),this.Bs=new q_(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Vy(this.serializer),this.qs=new Jf,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===ie&&Pi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Tt(at.FAILED_PRECONDITION,wh);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Lr(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var a=(0,Ue.Z)(function*(c){if(t.started)return e(c)});return function(c){return a.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,Ue.Z)(function*(a){null===a.newVersion&&(yield e())});return function(a){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,Ue.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>sp(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(ce(e))return Vt("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return Vt("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return ip(e).get("owner").next(t=>I.resolve(this.Ri(t)))}Pi(e){return sp(e).delete(this.clientId)}bi(){var e=this;return(0,Ue.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",a=>{const c=Ss(a,"clientMetadata");return c.j().next(f=>{const v=e.Si(f,18e5),M=f.filter(j=>-1===v.indexOf(j));return I.forEach(M,j=>c.delete(j.clientId)).next(()=>M)})}).catch(()=>[]);if(e._i)for(const a of t)e._i.removeItem(e.Di(a.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?I.resolve(!0):ip(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new Tt(at.FAILED_PRECONDITION,wh);return!1}}return!(!this.networkEnabled||!this.inForeground)||sp(e).j().next(a=>void 0===this.Si(a,5e3).find(c=>{if(this.clientId!==c.clientId){const v=!this.inForeground&&c.inForeground,M=this.networkEnabled===c.networkEnabled;if(!this.networkEnabled&&c.networkEnabled||v&&M)return!0}return!1}))}).next(t=>(this.isPrimary!==t&&Vt("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,Ue.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const a=new hd(t,Lr.ct);return e.Ai(a).next(()=>e.Pi(a))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(a=>this.Vi(a.updateTimeMs,t)&&!this.Ci(a.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>sp(e).j().next(t=>this.Si(t,18e5).map(a=>a.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return og.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Oy(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return Sd.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,a){Vt("IndexedDbPersistence","Starting transaction:",e);const c="readonly"===t?"readonly":"readwrite",f=15===(v=this.ui)?Lf:14===v?dc:13===v?Ia:12===v?Ff:11===v?Uc:void Ot();var v;let M;return this.wi.runTransaction(e,c,f,j=>(M=new hd(j,this.Os?this.Os.next():Lr.ct),"readwrite-primary"===t?this.Ti(M).next(q=>!!q||this.Ei(M)).next(q=>{if(!q)throw Pi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new Tt(at.FAILED_PRECONDITION,yl);return a(M)}).next(q=>this.vi(M).next(()=>q)):this.Oi(M).next(()=>a(M)))).then(j=>(M.raiseOnCommittedEvent(),j))}Oi(e){return ip(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new Tt(at.FAILED_PRECONDITION,wh)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ip(e).put("owner",t)}static D(){return P.D()}Ai(e){const t=ip(e);return t.get("owner").next(a=>this.Ri(a)?(Vt("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):I.resolve())}Vi(e,t){const a=Date.now();return!(e<a-t||e>a&&(Pi(`Detected an update time that is in the future: ${e} > ${a}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,Fe.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const a=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return Vt("IndexedDbPersistence",`Client '${e}' ${a?"is":"is not"} zombied in LocalStorage`),a}catch(a){return Pi("IndexedDbPersistence","Failed to get zombied client id.",a),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){Pi("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ip(r){return Ss(r,"owner")}function sp(r){return Ss(r,"clientMetadata")}function Nm(r,e){let t=r.projectId;return r.isDefaultDatabase||(t+="."+r.database),"firestore/"+e+"/"+t+"/"}class Pm{constructor(e,t,a,c){this.targetId=e,this.fromCache=t,this.Fi=a,this.Bi=c}static Li(e,t){let a=gr(),c=gr();for(const f of t.docChanges)switch(f.type){case 0:a=a.add(f.doc.key);break;case 1:c=c.add(f.doc.key)}return new Pm(e,t.fromCache,a,c)}}class $y{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,a,c){return this.Ki(e,t).next(f=>f||this.Gi(e,t,c,a)).next(f=>f||this.Qi(e,t))}Ki(e,t){if(Xd(t))return I.resolve(null);let a=jo(t);return this.indexManager.getIndexType(e,a).next(c=>0===c?null:(null!==t.limit&&1===c&&(t=mc(t,null,"F"),a=jo(t)),this.indexManager.getDocumentsMatchingTarget(e,a).next(f=>{const v=gr(...f);return this.Ui.getDocuments(e,v).next(M=>this.indexManager.getMinOffset(e,a).next(j=>{const q=this.ji(t,M);return this.zi(t,q,v,j.readTime)?this.Ki(e,mc(t,null,"F")):this.Wi(e,q,t,j)}))})))}Gi(e,t,a,c){return Xd(t)||c.isEqual(Nn.min())?this.Qi(e,t):this.Ui.getDocuments(e,a).next(f=>{const v=this.ji(t,f);return this.zi(t,v,a,c)?this.Qi(e,t):(au()<=De.in.DEBUG&&Vt("QueryEngine","Re-using previous result from %s to execute query: %s",c.toString(),Il(t)),this.Wi(e,v,t,lc(c,-1)))})}ji(e,t){let a=new fi(Vu(e));return t.forEach((c,f)=>{Kl(e,f)&&(a=a.add(f))}),a}zi(e,t,a,c){if(null===e.limit)return!1;if(a.size!==t.size)return!0;const f="F"===e.limitType?t.last():t.first();return!!f&&(f.hasPendingWrites||f.version.compareTo(c)>0)}Qi(e,t){return au()<=De.in.DEBUG&&Vt("QueryEngine","Using full collection scan to execute query:",Il(t)),this.Ui.getDocumentsMatchingQuery(e,t,ao.min())}Wi(e,t,a,c){return this.Ui.getDocumentsMatchingQuery(e,a,c).next(f=>(t.forEach(v=>{f=f.insert(v.key,v)}),f))}}class Gy{constructor(e,t,a,c){this.persistence=e,this.Hi=t,this.serializer=c,this.Ji=new Si(ir),this.Yi=new ql(f=>Fu(f),md),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(a)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new By(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function Om(r,e,t,a){return new Gy(r,e,t,a)}function dg(r,e){return Ih.apply(this,arguments)}function Ih(){return Ih=(0,Ue.Z)(function*(r,e){const t=nn(r);return yield t.persistence.runTransaction("Handle user change","readonly",a=>{let c;return t.mutationQueue.getAllMutationBatches(a).next(f=>(c=f,t.tr(e),t.mutationQueue.getAllMutationBatches(a))).next(f=>{const v=[],M=[];let j=gr();for(const q of c){v.push(q.batchId);for(const ie of q.mutations)j=j.add(ie.key)}for(const q of f){M.push(q.batchId);for(const ie of q.mutations)j=j.add(ie.key)}return t.localDocuments.getDocuments(a,j).next(q=>({er:q,removedBatchIds:v,addedBatchIds:M}))})})}),Ih.apply(this,arguments)}function op(r,e){const t=nn(r);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",a=>{const c=e.batch.keys(),f=t.Zi.newChangeBuffer({trackRemovals:!0});return function(v,M,j,q){const ie=j.batch,we=ie.keys();let nt=I.resolve();return we.forEach(It=>{nt=nt.next(()=>q.getEntry(M,It)).next(Wt=>{const pn=j.docVersions.get(It);Sn(null!==pn),Wt.version.compareTo(pn)<0&&(ie.applyToRemoteDocument(Wt,j),Wt.isValidDocument()&&(Wt.setReadTime(j.commitVersion),q.addEntry(Wt)))})}),nt.next(()=>v.mutationQueue.removeMutationBatch(M,ie))}(t,a,e,f).next(()=>f.apply(a)).next(()=>t.mutationQueue.performConsistencyCheck(a)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(a,c,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(a,function(v){let M=gr();for(let j=0;j<v.mutationResults.length;++j)v.mutationResults[j].transformResults.length>0&&(M=M.add(v.batch.mutations[j].key));return M}(e))).next(()=>t.localDocuments.getDocuments(a,c))})}function X_(r){const e=nn(r);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function km(r,e){const t=nn(r),a=e.snapshotVersion;let c=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",f=>{const v=t.Zi.newChangeBuffer({trackRemovals:!0});c=t.Ji;const M=[];e.targetChanges.forEach((ie,we)=>{const nt=c.get(we);if(!nt)return;M.push(t.Bs.removeMatchingKeys(f,ie.removedDocuments,we).next(()=>t.Bs.addMatchingKeys(f,ie.addedDocuments,we)));let It=nt.withSequenceNumber(f.currentSequenceNumber);var Wt,pn,_n;null!==e.targetMismatches.get(we)?It=It.withResumeToken(gs.EMPTY_BYTE_STRING,Nn.min()).withLastLimboFreeSnapshotVersion(Nn.min()):ie.resumeToken.approximateByteSize()>0&&(It=It.withResumeToken(ie.resumeToken,a)),c=c.insert(we,It),pn=It,_n=ie,(0===(Wt=nt).resumeToken.approximateByteSize()||pn.snapshotVersion.toMicroseconds()-Wt.snapshotVersion.toMicroseconds()>=3e8||_n.addedDocuments.size+_n.modifiedDocuments.size+_n.removedDocuments.size>0)&&M.push(t.Bs.updateTargetData(f,It))});let j=La(),q=gr();if(e.documentUpdates.forEach(ie=>{e.resolvedLimboDocuments.has(ie)&&M.push(t.persistence.referenceDelegate.updateLimboDocument(f,ie))}),M.push(Fm(f,v,e.documentUpdates).next(ie=>{j=ie.nr,q=ie.sr})),!a.isEqual(Nn.min())){const ie=t.Bs.getLastRemoteSnapshotVersion(f).next(we=>t.Bs.setTargetsMetadata(f,f.currentSequenceNumber,a));M.push(ie)}return I.waitFor(M).next(()=>v.apply(f)).next(()=>t.localDocuments.getLocalViewOfDocuments(f,j,q)).next(()=>j)}).then(f=>(t.Ji=c,f))}function Fm(r,e,t){let a=gr(),c=gr();return t.forEach(f=>a=a.add(f)),e.getEntries(r,a).next(f=>{let v=La();return t.forEach((M,j)=>{const q=f.get(M);j.isFoundDocument()!==q.isFoundDocument()&&(c=c.add(M)),j.isNoDocument()&&j.version.isEqual(Nn.min())?(e.removeEntry(M,j.readTime),v=v.insert(M,j)):!q.isValidDocument()||j.version.compareTo(q.version)>0||0===j.version.compareTo(q.version)&&q.hasPendingWrites?(e.addEntry(j),v=v.insert(M,j)):Vt("LocalStore","Ignoring outdated watch update for ",M,". Current version:",q.version," Watch version:",j.version)}),{nr:v,sr:c}})}function Bv(r,e){const t=nn(r);return t.persistence.runTransaction("Get next mutation batch","readonly",a=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(a,e)))}function qu(r,e){const t=nn(r);return t.persistence.runTransaction("Allocate target","readwrite",a=>{let c;return t.Bs.getTargetData(a,e).next(f=>f?(c=f,I.resolve(c)):t.Bs.allocateTargetId(a).next(v=>(c=new Zc(e,v,"TargetPurposeListen",a.currentSequenceNumber),t.Bs.addTargetData(a,c).next(()=>c))))}).then(a=>{const c=t.Ji.get(a.targetId);return(null===c||a.snapshotVersion.compareTo(c.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(a.targetId,a),t.Yi.set(e,a.targetId)),a})}function co(r,e,t){return cf.apply(this,arguments)}function cf(){return cf=(0,Ue.Z)(function*(r,e,t){const a=nn(r),c=a.Ji.get(e),f=t?"readwrite":"readwrite-primary";try{t||(yield a.persistence.runTransaction("Release target",f,v=>a.persistence.referenceDelegate.removeTarget(v,c)))}catch(v){if(!ce(v))throw v;Vt("LocalStore",`Failed to update sequence numbers for target ${e}: ${v}`)}a.Ji=a.Ji.remove(e),a.Yi.delete(c.target)}),cf.apply(this,arguments)}function Ch(r,e,t){const a=nn(r);let c=Nn.min(),f=gr();return a.persistence.runTransaction("Execute query","readonly",v=>function(M,j,q){const ie=nn(M),we=ie.Yi.get(q);return void 0!==we?I.resolve(ie.Ji.get(we)):ie.Bs.getTargetData(j,q)}(a,v,jo(e)).next(M=>{if(M)return c=M.lastLimboFreeSnapshotVersion,a.Bs.getMatchingKeysForTargetId(v,M.targetId).next(j=>{f=j})}).next(()=>a.Hi.getDocumentsMatchingQuery(v,e,t?c:Nn.min(),t?f:gr())).next(M=>(zy(a,il(e),M),{documents:M,ir:f})))}function ba(r,e){const t=nn(r),a=nn(t.Bs),c=t.Ji.get(e);return c?Promise.resolve(c.target):t.persistence.runTransaction("Get target data","readonly",f=>a.le(f,e).next(v=>v?v.target:null))}function hg(r,e){const t=nn(r),a=t.Xi.get(e)||Nn.min();return t.persistence.runTransaction("Get new document changes","readonly",c=>t.Zi.getAllFromCollectionGroup(c,e,lc(a,-1),Number.MAX_SAFE_INTEGER)).then(c=>(zy(t,e,c),c))}function zy(r,e,t){let a=r.Xi.get(e)||Nn.min();t.forEach((c,f)=>{f.readTime.compareTo(a)>0&&(a=f.readTime)}),r.Xi.set(e,a)}function ho(){return ho=(0,Ue.Z)(function*(r,e,t,a){const c=nn(r);let f=gr(),v=La();for(const q of t){const ie=e.rr(q.metadata.name);q.document&&(f=f.add(ie));const we=e.ur(q);we.setReadTime(e.cr(q.metadata.readTime)),v=v.insert(ie,we)}const M=c.Zi.newChangeBuffer({trackRemovals:!0}),j=yield qu(c,(q=a,jo(gc($n.fromString(`__bundle__/docs/${q}`)))));var q;return c.persistence.runTransaction("Apply bundle documents","readwrite",q=>Fm(q,M,v).next(ie=>(M.apply(q),ie)).next(ie=>c.Bs.removeMatchingKeysForTargetId(q,j.targetId).next(()=>c.Bs.addMatchingKeys(q,f,j.targetId)).next(()=>c.localDocuments.getLocalViewOfDocuments(q,ie.nr,ie.sr)).next(()=>ie.nr)))}),ho.apply(this,arguments)}function Vm(r,e){return fg.apply(this,arguments)}function fg(){return fg=(0,Ue.Z)(function*(r,e,t=gr()){const a=yield qu(r,jo(Rs(e.bundledQuery))),c=nn(r);return c.persistence.runTransaction("Save named query","readwrite",f=>{const v=uo(e.readTime);if(a.snapshotVersion.compareTo(v)>=0)return c.qs.saveNamedQuery(f,e);const M=a.withResumeToken(gs.EMPTY_BYTE_STRING,v);return c.Ji=c.Ji.insert(M.targetId,M),c.Bs.updateTargetData(f,M).next(()=>c.Bs.removeMatchingKeysForTargetId(f,a.targetId)).next(()=>c.Bs.addMatchingKeys(f,t,a.targetId)).next(()=>c.qs.saveNamedQuery(f,e))})}),fg.apply(this,arguments)}function pg(r,e){return`firestore_clients_${r}_${e}`}function ev(r,e,t){let a=`firestore_mutations_${r}_${t}`;return e.isAuthenticated()&&(a+=`_${e.uid}`),a}function ap(r,e){return`firestore_targets_${r}_${e}`}class ed{constructor(e,t,a,c){this.user=e,this.batchId=t,this.state=a,this.error=c}static ar(e,t,a){const c=JSON.parse(a);let f,v="object"==typeof c&&-1!==["pending","acknowledged","rejected"].indexOf(c.state)&&(void 0===c.error||"object"==typeof c.error);return v&&c.error&&(v="string"==typeof c.error.message&&"string"==typeof c.error.code,v&&(f=new Tt(c.error.code,c.error.message))),v?new ed(e,t,c.state,f):(Pi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${a}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Rd{constructor(e,t,a){this.targetId=e,this.state=t,this.error=a}static ar(e,t){const a=JSON.parse(t);let c,f="object"==typeof a&&-1!==["not-current","current","rejected"].indexOf(a.state)&&(void 0===a.error||"object"==typeof a.error);return f&&a.error&&(f="string"==typeof a.error.message&&"string"==typeof a.error.code,f&&(c=new Tt(a.error.code,a.error.message))),f?new Rd(e,a.state,c):(Pi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class Dh{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const a=JSON.parse(t);let c="object"==typeof a&&a.activeTargetIds instanceof Array,f=zc();for(let v=0;c&&v<a.activeTargetIds.length;++v)c=Lo(a.activeTargetIds[v]),f=f.add(a.activeTargetIds[v]);return c?new Dh(e,f):(Pi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class df{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new df(t.clientId,t.onlineState):(Pi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class lp{constructor(){this.activeTargetIds=zc()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class up{constructor(e,t,a,c,f){this.window=e,this.ii=t,this.persistenceKey=a,this.wr=c,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new Si(ir),this.started=!1,this.yr=[];const v=a.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=f,this.pr=pg(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new lp),this.Tr=new RegExp(`^firestore_clients_${v}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${v}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${v}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(M){return`firestore_bundle_loaded_v2_${M}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,Ue.Z)(function*(){const t=yield e.syncEngine.$i();for(const c of t){if(c===e.wr)continue;const f=e.getItem(pg(e.persistenceKey,c));if(f){const v=Dh.ar(c,f);v&&(e.gr=e.gr.insert(v.clientId,v))}}e.Pr();const a=e.storage.getItem(e.vr);if(a){const c=e.br(a);c&&e.Vr(c)}for(const c of e.yr)e.mr(c);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((a,c)=>{c.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,a){this.Dr(e,t,a),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const a=this.storage.getItem(ap(this.persistenceKey,e));if(a){const c=Rd.ar(e,a);c&&(t=c.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(ap(this.persistenceKey,e))}updateQueryState(e,t,a){this.kr(e,t,a)}handleUserChange(e,t,a){t.forEach(c=>{this.Cr(c)}),this.currentUser=e,a.forEach(c=>{this.addPendingMutation(c)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return Vt("SharedClientState","READ",e,t),t}setItem(e,t){Vt("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){Vt("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const a=e;if(a.storageArea===this.storage){if(Vt("SharedClientState","EVENT",a.key,a.newValue),a.key===this.pr)return void Pi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,Ue.Z)(function*(){if(t.started){if(null!==a.key)if(t.Tr.test(a.key)){if(null==a.newValue){const c=t.Or(a.key);return t.Fr(c,null)}{const c=t.Br(a.key,a.newValue);if(c)return t.Fr(c.clientId,c)}}else if(t.Er.test(a.key)){if(null!==a.newValue){const c=t.Lr(a.key,a.newValue);if(c)return t.qr(c)}}else if(t.Ar.test(a.key)){if(null!==a.newValue){const c=t.Ur(a.key,a.newValue);if(c)return t.Kr(c)}}else if(a.key===t.vr){if(null!==a.newValue){const c=t.br(a.newValue);if(c)return t.Vr(c)}}else if(a.key===t.Ir){const c=function(f){let v=Lr.ct;if(null!=f)try{const M=JSON.parse(f);Sn("number"==typeof M),v=M}catch(M){Pi("SharedClientState","Failed to read sequence number from WebStorage",M)}return v}(a.newValue);c!==Lr.ct&&t.sequenceNumberHandler(c)}else if(a.key===t.Rr){const c=t.Gr(a.newValue);yield Promise.all(c.map(f=>t.syncEngine.Qr(f)))}}else t.yr.push(a)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,a){const c=new ed(this.currentUser,e,t,a),f=ev(this.persistenceKey,this.currentUser,e);this.setItem(f,c.hr())}Cr(e){const t=ev(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,a){const c=ap(this.persistenceKey,e),f=new Rd(e,t,a);this.setItem(c,f.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const a=this.Or(e);return Dh.ar(a,t)}Lr(e,t){const a=this.Er.exec(e),c=Number(a[1]);return ed.ar(new ns(void 0!==a[2]?a[2]:null),c,t)}Ur(e,t){const a=this.Ar.exec(e),c=Number(a[1]);return Rd.ar(c,t)}br(e){return df.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,Ue.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);Vt("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const a=t?this.gr.insert(e,t):this.gr.remove(e),c=this.Sr(this.gr),f=this.Sr(a),v=[],M=[];return f.forEach(j=>{c.has(j)||v.push(j)}),c.forEach(j=>{f.has(j)||M.push(j)}),this.syncEngine.Wr(v,M).then(()=>{this.gr=a})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=zc();return e.forEach((a,c)=>{t=t.unionWith(c.activeTargetIds)}),t}}class tv{constructor(){this.Hr=new lp,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,a){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,a){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new lp,Promise.resolve()}handleUserChange(e,t,a){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class Wy{Yr(e){}shutdown(){}}class gg{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){Vt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){Vt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let cp=null;function Um(){return null===cp?cp=268435456+Math.round(2147483648*Math.random()):cp++,"0x"+cp.toString(16)}const Ky={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class jv{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ua="WebChannelConnection";class nv extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,a,c,f){const v=Um(),M=this.To(e,t);Vt("RestConnection",`Sending RPC '${e}' ${v}:`,M,a);const j={};return this.Eo(j,c,f),this.Ao(e,M,j,a).then(q=>(Vt("RestConnection",`Received RPC '${e}' ${v}: `,q),q),q=>{throw ps("RestConnection",`RPC '${e}' ${v} failed with error: `,q,"url: ",M,"request:",a),q})}vo(e,t,a,c,f,v){return this.Io(e,t,a,c,f)}Eo(e,t,a){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tu,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((c,f)=>e[f]=c),a&&a.headers.forEach((c,f)=>e[f]=c)}To(e,t){return`${this.mo}/v1/${t}:${Ky[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,a,c){const f=Um();return new Promise((v,M)=>{const j=new ml;j.setWithCredentials(!0),j.listenOnce(wo.COMPLETE,()=>{try{switch(j.getLastErrorCode()){case Qo.NO_ERROR:const ie=j.getResponseJson();Vt(Ua,`XHR for RPC '${e}' ${f} received:`,JSON.stringify(ie)),v(ie);break;case Qo.TIMEOUT:Vt(Ua,`RPC '${e}' ${f} timed out`),M(new Tt(at.DEADLINE_EXCEEDED,"Request time out"));break;case Qo.HTTP_ERROR:const we=j.getStatus();if(Vt(Ua,`RPC '${e}' ${f} failed with status:`,we,"response text:",j.getResponseText()),we>0){let nt=j.getResponseJson();Array.isArray(nt)&&(nt=nt[0]);const It=nt?.error;if(It&&It.status&&It.message){const Wt=function(pn){const _n=pn.toLowerCase().replace(/_/g,"-");return Object.values(at).indexOf(_n)>=0?_n:at.UNKNOWN}(It.status);M(new Tt(Wt,It.message))}else M(new Tt(at.UNKNOWN,"Server responded with status "+j.getStatus()))}else M(new Tt(at.UNAVAILABLE,"Connection failed."));break;default:Ot()}}finally{Vt(Ua,`RPC '${e}' ${f} completed.`)}});const q=JSON.stringify(c);Vt(Ua,`RPC '${e}' ${f} sending request:`,c),j.send(t,"POST",q,a,15)})}Ro(e,t,a){const c=Um(),f=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],v=io(),M=ts(),j={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},q=this.longPollingOptions.timeoutSeconds;void 0!==q&&(j.longPollingTimeout=Math.round(1e3*q)),this.useFetchStreams&&(j.xmlHttpFactory=new Ja({})),this.Eo(j.initMessageHeaders,t,a),j.encodeInitMessageHeaders=!0;const ie=f.join("");Vt(Ua,`Creating RPC '${e}' stream ${c}: ${ie}`,j);const we=v.createWebChannel(ie,j);let nt=!1,It=!1;const Wt=new jv({ro:_n=>{It?Vt(Ua,`Not sending because RPC '${e}' stream ${c} is closed:`,_n):(nt||(Vt(Ua,`Opening RPC '${e}' stream ${c} transport.`),we.open(),nt=!0),Vt(Ua,`RPC '${e}' stream ${c} sending:`,_n),we.send(_n))},oo:()=>we.close()}),pn=(_n,Ur,Ei)=>{_n.listen(Ur,Br=>{try{Ei(Br)}catch(Xs){setTimeout(()=>{throw Xs},0)}})};return pn(we,Fo.EventType.OPEN,()=>{It||Vt(Ua,`RPC '${e}' stream ${c} transport opened.`)}),pn(we,Fo.EventType.CLOSE,()=>{It||(It=!0,Vt(Ua,`RPC '${e}' stream ${c} transport closed`),Wt.wo())}),pn(we,Fo.EventType.ERROR,_n=>{It||(It=!0,ps(Ua,`RPC '${e}' stream ${c} transport errored:`,_n),Wt.wo(new Tt(at.UNAVAILABLE,"The operation could not be completed")))}),pn(we,Fo.EventType.MESSAGE,_n=>{var Ur;if(!It){const Ei=_n.data[0];Sn(!!Ei);const Br=Ei,Xs=Br.error||(null===(Ur=Br[0])||void 0===Ur?void 0:Ur.error);if(Xs){Vt(Ua,`RPC '${e}' stream ${c} received error:`,Xs);const ks=Xs.status;let Ms=function(Vp){const kv=J[Vp];if(void 0!==kv)return kt(kv)}(ks),Ml=Xs.message;void 0===Ms&&(Ms=at.INTERNAL,Ml="Unknown error status: "+ks+" with message "+Xs.message),It=!0,Wt.wo(new Tt(Ms,Ml)),we.close()}else Vt(Ua,`RPC '${e}' stream ${c} received:`,Ei),Wt._o(Ei)}}),pn(M,Nl.STAT_EVENT,_n=>{_n.stat===so.PROXY?Vt(Ua,`RPC '${e}' stream ${c} detected buffering proxy`):_n.stat===so.NOPROXY&&Vt(Ua,`RPC '${e}' stream ${c} detected no buffering proxy`)}),setTimeout(()=>{Wt.fo()},0),Wt}}function Bm(){return typeof window<"u"?window:null}function dp(){return typeof document<"u"?document:null}function hf(r){return new Ic(r,!0)}class hp{constructor(e,t,a=1e3,c=1.5,f=6e4){this.ii=e,this.timerId=t,this.Po=a,this.bo=c,this.Vo=f,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),a=Math.max(0,Date.now()-this.Co),c=Math.max(0,t-a);c>0&&Vt("ExponentialBackoff",`Backing off for ${c} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${a} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,c,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class qy{constructor(e,t,a,c,f,v,M,j){this.ii=e,this.$o=a,this.Oo=c,this.connection=f,this.authCredentialsProvider=v,this.appCheckCredentialsProvider=M,this.listener=j,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new hp(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,Ue.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,Ue.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var a=this;return(0,Ue.Z)(function*(){a.Ho(),a.Jo(),a.qo.cancel(),a.Fo++,4!==e?a.qo.reset():t&&t.code===at.RESOURCE_EXHAUSTED?(Pi(t.toString()),Pi("Using maximum backoff delay to prevent overloading the backend."),a.qo.xo()):t&&t.code===at.UNAUTHENTICATED&&3!==a.state&&(a.authCredentialsProvider.invalidateToken(),a.appCheckCredentialsProvider.invalidateToken()),null!==a.stream&&(a.Yo(),a.stream.close(),a.stream=null),a.state=e,yield a.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([a,c])=>{this.Fo===t&&this.Zo(a,c)},a=>{e(()=>{const c=new Tt(at.UNKNOWN,"Fetching auth token failed: "+a.message);return this.tu(c)})})}Zo(e,t){const a=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{a(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(c=>{a(()=>this.tu(c))}),this.stream.onMessage(c=>{a(()=>this.onMessage(c))})}Go(){var e=this;this.state=5,this.qo.No((0,Ue.Z)(function*(){e.state=0,e.start()}))}tu(e){return Vt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(Vt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Hv extends qy{constructor(e,t,a,c,f,v){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,a,c,v),this.serializer=f}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function hh(r,e){let t;if("targetChange"in e){const a="NO_CHANGE"===(j=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===j?1:"REMOVE"===j?2:"CURRENT"===j?3:"RESET"===j?4:Ot(),c=e.targetChange.targetIds||[],f=function(j,q){return j.useProto3Json?(Sn(void 0===q||"string"==typeof q),gs.fromBase64String(q||"")):(Sn(void 0===q||q instanceof Uint8Array),gs.fromUint8Array(q||new Uint8Array))}(r,e.targetChange.resumeToken),v=e.targetChange.cause,M=v&&function(j){const q=void 0===j.code?at.UNKNOWN:kt(j.code);return new Tt(q,j.message||"")}(v);t=new Xh(a,c,f,M||null)}else if("documentChange"in e){const a=e.documentChange,c=al(r,a.document.name),f=uo(a.document.updateTime),v=a.document.createTime?uo(a.document.createTime):Nn.min(),M=new zr({mapValue:{fields:a.document.fields}}),j=pi.newFoundDocument(c,f,v,M);t=new ch(a.targetIds||[],a.removedTargetIds||[],j.key,j)}else if("documentDelete"in e){const a=e.documentDelete,c=al(r,a.document),f=a.readTime?uo(a.readTime):Nn.min(),v=pi.newNoDocument(c,f);t=new ch([],a.removedTargetIds||[],v.key,v)}else if("documentRemove"in e){const a=e.documentRemove,c=al(r,a.document);t=new ch([],a.removedTargetIds||[],c,null)}else{if(!("filter"in e))return Ot();{const a=e.filter,{count:c=0,unchangedNames:f}=a,v=new $(c,f);t=new zp(a.targetId,v)}}var j;return t}(this.serializer,e),a=function(c){if(!("targetChange"in c))return Nn.min();const f=c.targetChange;return f.targetIds&&f.targetIds.length?Nn.min():f.readTime?uo(f.readTime):Nn.min()}(e);return this.listener.nu(t,a)}su(e){const t={};t.database=rf(this.serializer),t.addTarget=function(c,f){let v;const M=f.target;if(v=Hc(M)?{documents:fm(c,M)}:{query:Zf(c,M)},v.targetId=f.targetId,f.resumeToken.approximateByteSize()>0){v.resumeToken=tf(c,f.resumeToken);const j=bo(c,f.expectedCount);null!==j&&(v.expectedCount=j)}else if(f.snapshotVersion.compareTo(Nn.min())>0){v.readTime=na(c,f.snapshotVersion.toTimestamp());const j=bo(c,f.expectedCount);null!==j&&(v.expectedCount=j)}return v}(this.serializer,e);const a=function Ay(r,e){const t=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ot()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);a&&(t.labels=a),this.Wo(t)}iu(e){const t={};t.database=rf(this.serializer),t.removeTarget=e,this.Wo(t)}}class Zy extends qy{constructor(e,t,a,c,f,v){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,a,c,v),this.serializer=f,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Sn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function hm(r,e){return r&&r.length>0?(Sn(void 0!==e),r.map(t=>function(a,c){let f=uo(a.updateTime?a.updateTime:c);return f.isEqual(Nn.min())&&(f=uo(c)),new Gp(f,a.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),a=uo(e.commitTime);return this.listener.cu(a,t)}return Sn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=rf(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(a=>Zp(this.serializer,a))};this.Wo(t)}}class rv extends class{}{constructor(e,t,a,c){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=a,this.serializer=c,this.lu=!1}fu(){if(this.lu)throw new Tt(at.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,a){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,f])=>this.connection.Io(e,t,a,c,f)).catch(c=>{throw"FirebaseError"===c.name?(c.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new Tt(at.UNKNOWN,c.toString())})}vo(e,t,a,c){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([f,v])=>this.connection.vo(e,t,a,f,v,c)).catch(f=>{throw"FirebaseError"===f.name?(f.code===at.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),f):new Tt(at.UNKNOWN,f.toString())})}terminate(){this.lu=!0}}class TE{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(Pi(t),this.mu=!1):Vt("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class SE{constructor(e,t,a,c,f){var v=this;this.localStore=e,this.datastore=t,this.asyncQueue=a,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=f,this.Pu.Yr(M=>{a.enqueueAndForget((0,Ue.Z)(function*(){var j;bl(v)&&(Vt("RemoteStore","Restarting streams for network reachability change."),yield(j=(0,Ue.Z)(function*(q){const ie=nn(q);ie.vu.add(4),yield Ql(ie),ie.bu.set("Unknown"),ie.vu.delete(4),yield Hm(ie)}),function(q){return j.apply(this,arguments)})(v))}))}),this.bu=new TE(a,c)}}function Hm(r){return Yy.apply(this,arguments)}function Yy(){return Yy=(0,Ue.Z)(function*(r){if(bl(r))for(const e of r.Ru)yield e(!0)}),Yy.apply(this,arguments)}function Ql(r){return fp.apply(this,arguments)}function fp(){return fp=(0,Ue.Z)(function*(r){for(const e of r.Ru)yield e(!1)}),fp.apply(this,arguments)}function mg(r,e){const t=nn(r);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),Gm(t)?pf(t):gp(t).Ko()&&pp(t,e))}function ff(r,e){const t=nn(r),a=gp(t);t.Au.delete(e),a.Ko()&&$m(t,e),0===t.Au.size&&(a.Ko()?a.jo():bl(t)&&t.bu.set("Unknown"))}function pp(r,e){if(r.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Nn.min())>0){const t=r.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}gp(r).su(e)}function $m(r,e){r.Vu.qt(e),gp(r).iu(e)}function pf(r){r.Vu=new Wp({getRemoteKeysForTarget:e=>r.remoteSyncer.getRemoteKeysForTarget(e),le:e=>r.Au.get(e)||null,ue:()=>r.datastore.serializer.databaseId}),gp(r).start(),r.bu.gu()}function Gm(r){return bl(r)&&!gp(r).Uo()&&r.Au.size>0}function bl(r){return 0===nn(r).vu.size}function yg(r){r.Vu=void 0}function $v(r){return Qy.apply(this,arguments)}function Qy(){return Qy=(0,Ue.Z)(function*(r){r.Au.forEach((e,t)=>{pp(r,e)})}),Qy.apply(this,arguments)}function Jy(r,e){return zm.apply(this,arguments)}function zm(){return zm=(0,Ue.Z)(function*(r,e){yg(r),Gm(r)?(r.bu.Iu(e),pf(r)):r.bu.set("Unknown")}),zm.apply(this,arguments)}function _g(r,e,t){return bh.apply(this,arguments)}function bh(){return bh=(0,Ue.Z)(function*(r,e,t){if(r.bu.set("Online"),e instanceof Xh&&2===e.state&&e.cause)try{yield(a=(0,Ue.Z)(function*(c,f){const v=f.cause;for(const M of f.targetIds)c.Au.has(M)&&(yield c.remoteSyncer.rejectListen(M,v),c.Au.delete(M),c.Vu.removeTarget(M))}),function(c,f){return a.apply(this,arguments)})(r,e)}catch(a){Vt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),a),yield Sc(r,a)}else if(e instanceof ch?r.Vu.Ht(e):e instanceof zp?r.Vu.ne(e):r.Vu.Xt(e),!t.isEqual(Nn.min()))try{const a=yield X_(r.localStore);t.compareTo(a)>=0&&(yield function(c,f){const v=c.Vu.ce(f);return v.targetChanges.forEach((M,j)=>{if(M.resumeToken.approximateByteSize()>0){const q=c.Au.get(j);q&&c.Au.set(j,q.withResumeToken(M.resumeToken,f))}}),v.targetMismatches.forEach((M,j)=>{const q=c.Au.get(M);if(!q)return;c.Au.set(M,q.withResumeToken(gs.EMPTY_BYTE_STRING,q.snapshotVersion)),$m(c,M);const ie=new Zc(q.target,M,j,q.sequenceNumber);pp(c,ie)}),c.remoteSyncer.applyRemoteEvent(v)}(r,t))}catch(a){Vt("RemoteStore","Failed to raise snapshot:",a),yield Sc(r,a)}var a}),bh.apply(this,arguments)}function Sc(r,e,t){return Jl.apply(this,arguments)}function Jl(){return Jl=(0,Ue.Z)(function*(r,e,t){if(!ce(e))throw e;r.vu.add(1),yield Ql(r),r.bu.set("Offline"),t||(t=()=>X_(r.localStore)),r.asyncQueue.enqueueRetryable((0,Ue.Z)(function*(){Vt("RemoteStore","Retrying IndexedDB access"),yield t(),r.vu.delete(1),yield Hm(r)}))}),Jl.apply(this,arguments)}function Md(r,e){return e().catch(t=>Sc(r,t,e))}function td(r){return gf.apply(this,arguments)}function gf(){return gf=(0,Ue.Z)(function*(r){const e=nn(r),t=xd(e);let a=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;Xy(e);)try{const c=yield Bv(e.localStore,a);if(null===c){0===e.Eu.length&&t.jo();break}a=c.batchId,e_(e,c)}catch(c){yield Sc(e,c)}vg(e)&&Eg(e)}),gf.apply(this,arguments)}function Xy(r){return bl(r)&&r.Eu.length<10}function e_(r,e){r.Eu.push(e);const t=xd(r);t.Ko()&&t.ou&&t.uu(e.mutations)}function vg(r){return bl(r)&&!xd(r).Uo()&&r.Eu.length>0}function Eg(r){xd(r).start()}function t_(r){return mf.apply(this,arguments)}function mf(){return mf=(0,Ue.Z)(function*(r){xd(r).hu()}),mf.apply(this,arguments)}function wg(r){return n_.apply(this,arguments)}function n_(){return n_=(0,Ue.Z)(function*(r){const e=xd(r);for(const t of r.Eu)e.uu(t.mutations)}),n_.apply(this,arguments)}function sv(r,e,t){return Ig.apply(this,arguments)}function Ig(){return Ig=(0,Ue.Z)(function*(r,e,t){const a=r.Eu.shift(),c=m.from(a,e,t);yield Md(r,()=>r.remoteSyncer.applySuccessfulWrite(c)),yield td(r)}),Ig.apply(this,arguments)}function ov(r,e){return Cg.apply(this,arguments)}function Cg(){return Cg=(0,Ue.Z)(function*(r,e){var t;e&&xd(r).ou&&(yield(t=(0,Ue.Z)(function*(a,c){if(Xe(f=c.code)&&f!==at.ABORTED){const v=a.Eu.shift();xd(a).Qo(),yield Md(a,()=>a.remoteSyncer.rejectFailedWrite(v.batchId,c)),yield td(a)}var f}),function(a,c){return t.apply(this,arguments)})(r,e)),vg(r)&&Eg(r)}),Cg.apply(this,arguments)}function r_(r,e){return Wm.apply(this,arguments)}function Wm(){return Wm=(0,Ue.Z)(function*(r,e){const t=nn(r);t.asyncQueue.verifyOperationInProgress(),Vt("RemoteStore","RemoteStore received new credentials");const a=bl(t);t.vu.add(3),yield Ql(t),a&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield Hm(t)}),Wm.apply(this,arguments)}function ll(r,e){return Ki.apply(this,arguments)}function Ki(){return Ki=(0,Ue.Z)(function*(r,e){const t=nn(r);e?(t.vu.delete(2),yield Hm(t)):e||(t.vu.add(2),yield Ql(t),t.bu.set("Unknown"))}),Ki.apply(this,arguments)}function gp(r){return r.Su||(r.Su=function(e,t,a){const c=nn(e);return c.fu(),new Hv(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{uo:$v.bind(null,r),ao:Jy.bind(null,r),nu:_g.bind(null,r)}),r.Ru.push(function(){var e=(0,Ue.Z)(function*(t){t?(r.Su.Qo(),Gm(r)?pf(r):r.bu.set("Unknown")):(yield r.Su.stop(),yg(r))});return function(t){return e.apply(this,arguments)}}())),r.Su}function xd(r){return r.Du||(r.Du=function(e,t,a){const c=nn(e);return c.fu(),new Zy(t,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(r.datastore,r.asyncQueue,{uo:t_.bind(null,r),ao:ov.bind(null,r),au:wg.bind(null,r),cu:sv.bind(null,r)}),r.Ru.push(function(){var e=(0,Ue.Z)(function*(t){t?(r.Du.Qo(),yield td(r)):(yield r.Du.stop(),r.Eu.length>0&&(Vt("RemoteStore",`Stopping write stream with ${r.Eu.length} pending writes`),r.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),r.Du}class Km{constructor(e,t,a,c,f){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=a,this.op=c,this.removalCallback=f,this.deferred=new vr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(v=>{})}static createAndSchedule(e,t,a,c,f){const v=Date.now()+a,M=new Km(e,t,v,c,f);return M.start(a),M}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Tt(at.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Nd(r,e){if(Pi("AsyncQueue",`${e}: ${r}`),ce(r))return new Tt(at.UNAVAILABLE,`${e}: ${r}`);throw r}class Th{constructor(e){this.comparator=e?(t,a)=>e(t,a)||on.comparator(t.key,a.key):(t,a)=>on.comparator(t.key,a.key),this.keyedMap=Cl(),this.sortedSet=new Si(this.comparator)}static emptySet(e){return new Th(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,a)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Th)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),a=e.sortedSet.getIterator();for(;t.hasNext();){const c=t.getNext().key,f=a.getNext().key;if(!c.isEqual(f))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const a=new Th;return a.comparator=this.comparator,a.keyedMap=e,a.sortedSet=t,a}}class i_{constructor(){this.Cu=new Si(on.comparator)}track(e){const t=e.doc.key,a=this.Cu.get(t);a?0!==e.type&&3===a.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==a.type?this.Cu=this.Cu.insert(t,{type:a.type,doc:e.doc}):2===e.type&&2===a.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===a.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===a.type?this.Cu=this.Cu.remove(t):1===e.type&&2===a.type?this.Cu=this.Cu.insert(t,{type:1,doc:a.doc}):0===e.type&&1===a.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Ot():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,a)=>{e.push(a)}),e}}class yf{constructor(e,t,a,c,f,v,M,j,q){this.query=e,this.docs=t,this.oldDocs=a,this.docChanges=c,this.mutatedKeys=f,this.fromCache=v,this.syncStateChanged=M,this.excludesMetadataChanges=j,this.hasCachedResults=q}static fromInitialDocuments(e,t,a,c,f){const v=[];return t.forEach(M=>{v.push({type:0,doc:M})}),new yf(e,t,Th.emptySet(t),v,a,c,!0,!1,f)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&lo(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,a=e.docChanges;if(t.length!==a.length)return!1;for(let c=0;c<t.length;c++)if(t[c].type!==a[c].type||!t[c].doc.isEqual(a[c].doc))return!1;return!0}}class av{constructor(){this.Nu=void 0,this.listeners=[]}}class s_{constructor(){this.queries=new ql(e=>nh(e),lo),this.onlineState="Unknown",this.ku=new Set}}function qm(r,e){return Dg.apply(this,arguments)}function Dg(){return Dg=(0,Ue.Z)(function*(r,e){const t=nn(r),a=e.query;let c=!1,f=t.queries.get(a);if(f||(c=!0,f=new av),c)try{f.Nu=yield t.onListen(a)}catch(v){const M=Nd(v,`Initialization of query '${Il(e.query)}' failed`);return void e.onError(M)}t.queries.set(a,f),f.listeners.push(e),e.Mu(t.onlineState),f.Nu&&e.$u(f.Nu)&&Ym(t)}),Dg.apply(this,arguments)}function Zm(r,e){return o_.apply(this,arguments)}function o_(){return o_=(0,Ue.Z)(function*(r,e){const t=nn(r),a=e.query;let c=!1;const f=t.queries.get(a);if(f){const v=f.listeners.indexOf(e);v>=0&&(f.listeners.splice(v,1),c=0===f.listeners.length)}if(c)return t.queries.delete(a),t.onUnlisten(a)}),o_.apply(this,arguments)}function a_(r,e){const t=nn(r);let a=!1;for(const c of e){const v=t.queries.get(c.query);if(v){for(const M of v.listeners)M.$u(c)&&(a=!0);v.Nu=c}}a&&Ym(t)}function l_(r,e,t){const a=nn(r),c=a.queries.get(e);if(c)for(const f of c.listeners)f.onError(t);a.queries.delete(e)}function Ym(r){r.ku.forEach(e=>{e.next()})}class yu{constructor(e,t,a){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=a||{}}$u(e){if(!this.options.includeMetadataChanges){const a=[];for(const c of e.docChanges)3!==c.type&&a.push(c);e=new yf(e.query,e.docs,e.oldDocs,a,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=yf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Qm{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class u_{constructor(e){this.serializer=e}rr(e){return al(this.serializer,e)}ur(e){return e.metadata.exists?qp(this.serializer,e.document,!1):pi.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return uo(e)}}class lv{constructor(e,t,a){this.ju=e,this.localStore=t,this.serializer=a,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uv(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const a=$n.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(a.get(a.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,a=new u_(this.serializer);for(const c of e)if(c.metadata.queries){const f=a.rr(c.metadata.name);for(const v of c.metadata.queries){const M=(t.get(v)||gr()).add(f);t.set(v,M)}}return t}complete(){var e=this;return(0,Ue.Z)(function*(){const t=yield function Lm(r,e,t,a){return ho.apply(this,arguments)}(e.localStore,new u_(e.serializer),e.documents,e.ju.id),a=e.Wu(e.documents);for(const c of e.queries)yield Vm(e.localStore,c,a.get(c.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function uv(r){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:r.totalDocuments,totalBytes:r.totalBytes}}class Jm{constructor(e){this.key=e}}class c_{constructor(e){this.key=e}}class d_{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=gr(),this.mutatedKeys=gr(),this.tc=Vu(e),this.ec=new Th(this.tc)}get nc(){return this.Yu}sc(e,t){const a=t?t.ic:new i_,c=t?t.ec:this.ec;let f=t?t.mutatedKeys:this.mutatedKeys,v=c,M=!1;const j="F"===this.query.limitType&&c.size===this.query.limit?c.last():null,q="L"===this.query.limitType&&c.size===this.query.limit?c.first():null;if(e.inorderTraversal((ie,we)=>{const nt=c.get(ie),It=Kl(this.query,we)?we:null,Wt=!!nt&&this.mutatedKeys.has(nt.key),pn=!!It&&(It.hasLocalMutations||this.mutatedKeys.has(It.key)&&It.hasCommittedMutations);let _n=!1;nt&&It?nt.data.isEqual(It.data)?Wt!==pn&&(a.track({type:3,doc:It}),_n=!0):this.rc(nt,It)||(a.track({type:2,doc:It}),_n=!0,(j&&this.tc(It,j)>0||q&&this.tc(It,q)<0)&&(M=!0)):!nt&&It?(a.track({type:0,doc:It}),_n=!0):nt&&!It&&(a.track({type:1,doc:nt}),_n=!0,(j||q)&&(M=!0)),_n&&(It?(v=v.add(It),f=pn?f.add(ie):f.delete(ie)):(v=v.delete(ie),f=f.delete(ie)))}),null!==this.query.limit)for(;v.size>this.query.limit;){const ie="F"===this.query.limitType?v.last():v.first();v=v.delete(ie.key),f=f.delete(ie.key),a.track({type:1,doc:ie})}return{ec:v,ic:a,zi:M,mutatedKeys:f}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,a){const c=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const f=e.ic.xu();f.sort((q,ie)=>function(we,nt){const It=Wt=>{switch(Wt){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ot()}};return It(we)-It(nt)}(q.type,ie.type)||this.tc(q.doc,ie.doc)),this.oc(a);const v=t?this.uc():[],M=0===this.Zu.size&&this.current?1:0,j=M!==this.Xu;return this.Xu=M,0!==f.length||j?{snapshot:new yf(this.query,e.ec,c,f,e.mutatedKeys,0===M,j,!1,!!a&&a.resumeToken.approximateByteSize()>0),cc:v}:{cc:v}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new i_,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=gr(),this.ec.forEach(a=>{this.ac(a.key)&&(this.Zu=this.Zu.add(a.key))});const t=[];return e.forEach(a=>{this.Zu.has(a)||t.push(new c_(a))}),this.Zu.forEach(a=>{e.has(a)||t.push(new Jm(a))}),t}hc(e){this.Yu=e.ir,this.Zu=gr();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return yf.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class cv{constructor(e,t,a){this.query=e,this.targetId=t,this.view=a}}class Xm{constructor(e){this.key=e,this.fc=!1}}class dv{constructor(e,t,a,c,f,v){this.localStore=e,this.remoteStore=t,this.eventManager=a,this.sharedClientState=c,this.currentUser=f,this.maxConcurrentLimboResolutions=v,this.dc={},this.wc=new ql(M=>nh(M),lo),this._c=new Map,this.mc=new Set,this.gc=new Si(on.comparator),this.yc=new Map,this.Ic=new xm,this.Tc={},this.Ec=new Map,this.Ac=vh.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function hv(r,e){return _f.apply(this,arguments)}function _f(){return _f=(0,Ue.Z)(function*(r,e){const t=cl(r);let a,c;const f=t.wc.get(e);if(f)a=f.targetId,t.sharedClientState.addLocalQueryTarget(a),c=f.view.lc();else{const v=yield qu(t.localStore,jo(e)),M=t.sharedClientState.addLocalQueryTarget(v.targetId);a=v.targetId,c=yield mp(t,e,a,"current"===M,v.resumeToken),t.isPrimaryClient&&mg(t.remoteStore,v)}return c}),_f.apply(this,arguments)}function mp(r,e,t,a,c){return vf.apply(this,arguments)}function vf(){return vf=(0,Ue.Z)(function*(r,e,t,a,c){r.Rc=(we,nt,It)=>{return(Wt=(0,Ue.Z)(function*(pn,_n,Ur,Ei){let Br=_n.view.sc(Ur);Br.zi&&(Br=yield Ch(pn.localStore,_n.query,!1).then(({documents:Ms})=>_n.view.sc(Ms,Br)));const Xs=Ei&&Ei.targetChanges.get(_n.targetId),ks=_n.view.applyChanges(Br,pn.isPrimaryClient,Xs);return Ag(pn,_n.targetId,ks.cc),ks.snapshot}),function(pn,_n,Ur,Ei){return Wt.apply(this,arguments)})(r,we,nt,It);var Wt};const f=yield Ch(r.localStore,e,!0),v=new d_(e,f.ir),M=v.sc(f.documents),j=Dd.createSynthesizedTargetChangeForCurrentChange(t,a&&"Offline"!==r.onlineState,c),q=v.applyChanges(M,r.isPrimaryClient,j);Ag(r,t,q.cc);const ie=new cv(e,t,v);return r.wc.set(e,ie),r._c.has(t)?r._c.get(t).push(e):r._c.set(t,[e]),q.snapshot}),vf.apply(this,arguments)}function Gv(r,e){return yp.apply(this,arguments)}function yp(){return yp=(0,Ue.Z)(function*(r,e){const t=nn(r),a=t.wc.get(e),c=t._c.get(a.targetId);if(c.length>1)return t._c.set(a.targetId,c.filter(f=>!lo(f,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(a.targetId),t.sharedClientState.isActiveQueryTarget(a.targetId)||(yield co(t.localStore,a.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(a.targetId),ff(t.remoteStore,a.targetId),Yu(t,a.targetId)}).catch(Xo))):(Yu(t,a.targetId),yield co(t.localStore,a.targetId,!0))}),yp.apply(this,arguments)}function bg(){return bg=(0,Ue.Z)(function*(r,e,t){const a=Mh(r);try{const c=yield function(f,v){const M=nn(f),j=Qr.now(),q=v.reduce((nt,It)=>nt.add(It.key),gr());let ie,we;return M.persistence.runTransaction("Locally write mutations","readwrite",nt=>{let It=La(),Wt=gr();return M.Zi.getEntries(nt,q).next(pn=>{It=pn,It.forEach((_n,Ur)=>{Ur.isValidDocument()||(Wt=Wt.add(_n))})}).next(()=>M.localDocuments.getOverlayedDocuments(nt,It)).next(pn=>{ie=pn;const _n=[];for(const Ur of v){const Ei=Hu(Ur,ie.get(Ur.key).overlayedDocument);null!=Ei&&_n.push(new vc(Ur.key,Ei,ms(Ei.value.mapValue),ss.exists(!0)))}return M.mutationQueue.addMutationBatch(nt,j,_n,v)}).next(pn=>{we=pn;const _n=pn.applyToLocalDocumentSet(ie,Wt);return M.documentOverlayCache.saveOverlays(nt,pn.batchId,_n)})}).then(()=>({batchId:we.batchId,changes:ih(ie)}))}(a.localStore,e);a.sharedClientState.addPendingMutation(c.batchId),function(f,v,M){let j=f.Tc[f.currentUser.toKey()];j||(j=new Si(ir)),j=j.insert(v,M),f.Tc[f.currentUser.toKey()]=j}(a,c.batchId,t),yield ul(a,c.changes),yield td(a.remoteStore)}catch(c){const f=Nd(c,"Failed to persist write");t.reject(f)}}),bg.apply(this,arguments)}function h_(r,e){return Tg.apply(this,arguments)}function Tg(){return Tg=(0,Ue.Z)(function*(r,e){const t=nn(r);try{const a=yield km(t.localStore,e);e.targetChanges.forEach((c,f)=>{const v=t.yc.get(f);v&&(Sn(c.addedDocuments.size+c.modifiedDocuments.size+c.removedDocuments.size<=1),c.addedDocuments.size>0?v.fc=!0:c.modifiedDocuments.size>0?Sn(v.fc):c.removedDocuments.size>0&&(Sn(v.fc),v.fc=!1))}),yield ul(t,a,e)}catch(a){yield Xo(a)}}),Tg.apply(this,arguments)}function ey(r,e,t){const a=nn(r);if(a.isPrimaryClient&&0===t||!a.isPrimaryClient&&1===t){const c=[];a.wc.forEach((f,v)=>{const M=v.view.Mu(e);M.snapshot&&c.push(M.snapshot)}),function(f,v){const M=nn(f);M.onlineState=v;let j=!1;M.queries.forEach((q,ie)=>{for(const we of ie.listeners)we.Mu(v)&&(j=!0)}),j&&Ym(M)}(a.eventManager,e),c.length&&a.dc.nu(c),a.onlineState=e,a.isPrimaryClient&&a.sharedClientState.setOnlineState(e)}}function ty(r,e,t){return Xl.apply(this,arguments)}function Xl(){return Xl=(0,Ue.Z)(function*(r,e,t){const a=nn(r);a.sharedClientState.updateQueryState(e,"rejected",t);const c=a.yc.get(e),f=c&&c.key;if(f){let v=new Si(on.comparator);v=v.insert(f,pi.newNoDocument(f,Nn.min()));const M=gr().add(f),j=new Cd(Nn.min(),new Map,new Si(ir),v,M);yield h_(a,j),a.gc=a.gc.remove(f),a.yc.delete(e),f_(a)}else yield co(a.localStore,e,!1).then(()=>Yu(a,e,t)).catch(Xo)}),Xl.apply(this,arguments)}function Zu(r,e){return Sh.apply(this,arguments)}function Sh(){return Sh=(0,Ue.Z)(function*(r,e){const t=nn(r),a=e.batch.batchId;try{const c=yield op(t.localStore,e);Ep(t,a,null),Sg(t,a),t.sharedClientState.updateMutationState(a,"acknowledged"),yield ul(t,c)}catch(c){yield Xo(c)}}),Sh.apply(this,arguments)}function Ah(r,e,t){return _p.apply(this,arguments)}function _p(){return _p=(0,Ue.Z)(function*(r,e,t){const a=nn(r);try{const c=yield function(f,v){const M=nn(f);return M.persistence.runTransaction("Reject batch","readwrite-primary",j=>{let q;return M.mutationQueue.lookupMutationBatch(j,v).next(ie=>(Sn(null!==ie),q=ie.keys(),M.mutationQueue.removeMutationBatch(j,ie))).next(()=>M.mutationQueue.performConsistencyCheck(j)).next(()=>M.documentOverlayCache.removeOverlaysForBatchId(j,q,v)).next(()=>M.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(j,q)).next(()=>M.localDocuments.getDocuments(j,q))})}(a.localStore,e);Ep(a,e,t),Sg(a,e),a.sharedClientState.updateMutationState(e,"rejected",t),yield ul(a,c)}catch(c){yield Xo(c)}}),_p.apply(this,arguments)}function Ba(){return Ba=(0,Ue.Z)(function*(r,e){const t=nn(r);bl(t.remoteStore)||Vt("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const a=yield function(f){const v=nn(f);return v.persistence.runTransaction("Get highest unacknowledged batch id","readonly",M=>v.mutationQueue.getHighestUnacknowledgedBatchId(M))}(t.localStore);if(-1===a)return void e.resolve();const c=t.Ec.get(a)||[];c.push(e),t.Ec.set(a,c)}catch(a){const c=Nd(a,"Initialization of waitForPendingWrites() operation failed");e.reject(c)}}),Ba.apply(this,arguments)}function Sg(r,e){(r.Ec.get(e)||[]).forEach(t=>{t.resolve()}),r.Ec.delete(e)}function Ep(r,e,t){const a=nn(r);let c=a.Tc[a.currentUser.toKey()];if(c){const f=c.get(e);f&&(t?f.reject(t):f.resolve(),c=c.remove(e)),a.Tc[a.currentUser.toKey()]=c}}function Yu(r,e,t=null){r.sharedClientState.removeLocalQueryTarget(e);for(const a of r._c.get(e))r.wc.delete(a),t&&r.dc.Pc(a,t);r._c.delete(e),r.isPrimaryClient&&r.Ic.Is(e).forEach(a=>{r.Ic.containsKey(a)||ny(r,a)})}function ny(r,e){r.mc.delete(e.path.canonicalString());const t=r.gc.get(e);null!==t&&(ff(r.remoteStore,t),r.gc=r.gc.remove(e),r.yc.delete(t),f_(r))}function Ag(r,e,t){for(const a of t)a instanceof Jm?(r.Ic.addReference(a.key,e),Wv(r,a)):a instanceof c_?(Vt("SyncEngine","Document no longer in limbo: "+a.key),r.Ic.removeReference(a.key,e),r.Ic.containsKey(a.key)||ny(r,a.key)):Ot()}function Wv(r,e){const t=e.key,a=t.path.canonicalString();r.gc.get(t)||r.mc.has(a)||(Vt("SyncEngine","New document in limbo: "+t),r.mc.add(a),f_(r))}function f_(r){for(;r.mc.size>0&&r.gc.size<r.maxConcurrentLimboResolutions;){const e=r.mc.values().next().value;r.mc.delete(e);const t=new on($n.fromString(e)),a=r.Ac.next();r.yc.set(a,new Xm(t)),r.gc=r.gc.insert(t,a),mg(r.remoteStore,new Zc(jo(gc(t.path)),a,"TargetPurposeLimboResolution",Lr.ct))}}function ul(r,e,t){return Rg.apply(this,arguments)}function Rg(){return Rg=(0,Ue.Z)(function*(r,e,t){const a=nn(r),c=[],f=[],v=[];var M;a.wc.isEmpty()||(a.wc.forEach((M,j)=>{v.push(a.Rc(j,e,t).then(q=>{if((q||t)&&a.isPrimaryClient&&a.sharedClientState.updateQueryState(j.targetId,q?.fromCache?"not-current":"current"),q){c.push(q);const ie=Pm.Li(j.targetId,q);f.push(ie)}}))}),yield Promise.all(v),a.dc.nu(c),yield(M=(0,Ue.Z)(function*(j,q){const ie=nn(j);try{yield ie.persistence.runTransaction("notifyLocalViewChanges","readwrite",we=>I.forEach(q,nt=>I.forEach(nt.Fi,It=>ie.persistence.referenceDelegate.addReference(we,nt.targetId,It)).next(()=>I.forEach(nt.Bi,It=>ie.persistence.referenceDelegate.removeReference(we,nt.targetId,It)))))}catch(we){if(!ce(we))throw we;Vt("LocalStore","Failed to update sequence numbers: "+we)}for(const we of q){const nt=we.targetId;if(!we.fromCache){const It=ie.Ji.get(nt),pn=It.withLastLimboFreeSnapshotVersion(It.snapshotVersion);ie.Ji=ie.Ji.insert(nt,pn)}}}),function(j,q){return M.apply(this,arguments)})(a.localStore,f))}),Rg.apply(this,arguments)}function fv(r,e){return ry.apply(this,arguments)}function ry(){return ry=(0,Ue.Z)(function*(r,e){const t=nn(r);if(!t.currentUser.isEqual(e)){Vt("SyncEngine","User change. New user:",e.toKey());const a=yield dg(t.localStore,e);t.currentUser=e,(c=t).Ec.forEach(v=>{v.forEach(M=>{M.reject(new Tt(at.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),c.Ec.clear(),t.sharedClientState.handleUserChange(e,a.removedBatchIds,a.addedBatchIds),yield ul(t,a.er)}var c}),ry.apply(this,arguments)}function iy(r,e){const t=nn(r),a=t.yc.get(e);if(a&&a.fc)return gr().add(a.key);{let c=gr();const f=t._c.get(e);if(!f)return c;for(const v of f){const M=t.wc.get(v);c=c.unionWith(M.view.nc)}return c}}function p_(r,e){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,Ue.Z)(function*(r,e){const t=nn(r),a=yield Ch(t.localStore,e.query,!0),c=e.view.hc(a);return t.isPrimaryClient&&Ag(t,e.targetId,c.cc),c}),Ef.apply(this,arguments)}function Kv(r,e){return Mg.apply(this,arguments)}function Mg(){return Mg=(0,Ue.Z)(function*(r,e){const t=nn(r);return hg(t.localStore,e).then(a=>ul(t,a))}),Mg.apply(this,arguments)}function sy(r,e,t,a){return oy.apply(this,arguments)}function oy(){return oy=(0,Ue.Z)(function*(r,e,t,a){const c=nn(r),f=yield function(v,M){const j=nn(v),q=nn(j.mutationQueue);return j.persistence.runTransaction("Lookup mutation documents","readonly",ie=>q.Sn(ie,M).next(we=>we?j.localDocuments.getDocuments(ie,we):I.resolve(null)))}(c.localStore,e);var M;null!==f?("pending"===t?yield td(c.remoteStore):"acknowledged"===t||"rejected"===t?(Ep(c,e,a||null),Sg(c,e),M=e,nn(nn(c.localStore).mutationQueue).Cn(M)):Ot(),yield ul(c,f)):Vt("SyncEngine","Cannot apply mutation batch with id: "+e)}),oy.apply(this,arguments)}function ay(){return ay=(0,Ue.Z)(function*(r,e){const t=nn(r);if(cl(t),Mh(t),!0===e&&!0!==t.vc){const a=t.sharedClientState.getAllActiveQueryTargets(),c=yield Rh(t,a.toArray());t.vc=!0,yield ll(t.remoteStore,!0);for(const f of c)mg(t.remoteStore,f)}else if(!1===e&&!1!==t.vc){const a=[];let c=Promise.resolve();t._c.forEach((f,v)=>{t.sharedClientState.isLocalQueryTarget(v)?a.push(v):c=c.then(()=>(Yu(t,v),co(t.localStore,v,!0))),ff(t.remoteStore,v)}),yield c,yield Rh(t,a),function(f){const v=nn(f);v.yc.forEach((M,j)=>{ff(v.remoteStore,j)}),v.Ic.Ts(),v.yc=new Map,v.gc=new Si(on.comparator)}(t),t.vc=!1,yield ll(t.remoteStore,!1)}}),ay.apply(this,arguments)}function Rh(r,e,t){return _u.apply(this,arguments)}function _u(){return _u=(0,Ue.Z)(function*(r,e,t){const a=nn(r),c=[],f=[];for(const v of e){let M;const j=a._c.get(v);if(j&&0!==j.length){M=yield qu(a.localStore,jo(j[0]));for(const q of j){const ie=a.wc.get(q),we=yield p_(a,ie);we.snapshot&&f.push(we.snapshot)}}else{const q=yield ba(a.localStore,v);M=yield qu(a.localStore,q),yield mp(a,xg(q),v,!1,M.resumeToken)}c.push(M)}return a.dc.nu(f),c}),_u.apply(this,arguments)}function xg(r){return Gf(r.path,r.collectionGroup,r.orderBy,r.filters,r.limit,"F",r.startAt,r.endAt)}function Pd(r){const e=nn(r);return nn(nn(e.localStore).persistence).$i()}function m_(r,e,t,a){return wp.apply(this,arguments)}function wp(){return wp=(0,Ue.Z)(function*(r,e,t,a){const c=nn(r);if(c.vc)return void Vt("SyncEngine","Ignoring unexpected query state notification.");const f=c._c.get(e);if(f&&f.length>0)switch(t){case"current":case"not-current":{const v=yield hg(c.localStore,il(f[0])),M=Cd.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,gs.EMPTY_BYTE_STRING);yield ul(c,v,M);break}case"rejected":yield co(c.localStore,e,!0),Yu(c,e,a);break;default:Ot()}}),wp.apply(this,arguments)}function Qu(r,e,t){return Ip.apply(this,arguments)}function Ip(){return Ip=(0,Ue.Z)(function*(r,e,t){const a=cl(r);if(a.vc){for(const c of e){if(a._c.has(c)){Vt("SyncEngine","Adding an already active target "+c);continue}const f=yield ba(a.localStore,c),v=yield qu(a.localStore,f);yield mp(a,xg(f),v.targetId,!1,v.resumeToken),mg(a.remoteStore,v)}for(const c of t)a._c.has(c)&&(yield co(a.localStore,c,!1).then(()=>{ff(a.remoteStore,c),Yu(a,c)}).catch(Xo))}}),Ip.apply(this,arguments)}function cl(r){const e=nn(r);return e.remoteStore.remoteSyncer.applyRemoteEvent=h_.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=iy.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=ty.bind(null,e),e.dc.nu=a_.bind(null,e.eventManager),e.dc.Pc=l_.bind(null,e.eventManager),e}function Mh(r){const e=nn(r);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Zu.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ah.bind(null,e),e}class vu{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,Ue.Z)(function*(){t.serializer=hf(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return Om(this.persistence,new $y,e.initialUser,this.serializer)}createPersistence(e){return new Ku(mu.zs,this.serializer)}createSharedClientState(e){return new tv}terminate(){var e=this;return(0,Ue.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class dl extends vu{constructor(e,t,a){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=a,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,a=this;return(0,Ue.Z)(function*(){yield t().call(a,e),yield a.Vc.initialize(a,e),yield Mh(a.Vc.syncEngine),yield td(a.Vc.remoteStore),yield a.persistence.Ii(()=>(a.gcScheduler&&!a.gcScheduler.started&&a.gcScheduler.start(),a.indexBackfillerScheduler&&!a.indexBackfillerScheduler.started&&a.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return Om(this.persistence,new $y,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new Rr(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const a=new Er(t,this.persistence);return new ln(e.asyncQueue,a)}createPersistence(e){const t=Nm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),a=void 0!==this.cacheSizeBytes?$o.withCacheSize(this.cacheSizeBytes):$o.DEFAULT;return new rp(this.synchronizeTabs,t,e.clientId,a,e.asyncQueue,Bm(),dp(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new tv}}class Ju extends dl{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,a=this;return(0,Ue.Z)(function*(){yield t().call(a,e);const c=a.Vc.syncEngine;a.sharedClientState instanceof up&&(a.sharedClientState.syncEngine={jr:sy.bind(null,c),zr:m_.bind(null,c),Wr:Qu.bind(null,c),$i:Pd.bind(null,c),Qr:Kv.bind(null,c)},yield a.sharedClientState.start()),yield a.persistence.Ii(function(){var f=(0,Ue.Z)(function*(v){yield function g_(r,e){return ay.apply(this,arguments)}(a.Vc.syncEngine,v),a.gcScheduler&&(v&&!a.gcScheduler.started?a.gcScheduler.start():v||a.gcScheduler.stop()),a.indexBackfillerScheduler&&(v&&!a.indexBackfillerScheduler.started?a.indexBackfillerScheduler.start():v||a.indexBackfillerScheduler.stop())});return function(v){return f.apply(this,arguments)}}())})()}createSharedClientState(e){const t=Bm();if(!up.D(t))throw new Tt(at.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const a=Nm(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new up(t,e.asyncQueue,a,e.clientId,e.initialUser)}}class Eu{initialize(e,t){var a=this;return(0,Ue.Z)(function*(){a.localStore||(a.localStore=e.localStore,a.sharedClientState=e.sharedClientState,a.datastore=a.createDatastore(t),a.remoteStore=a.createRemoteStore(t),a.eventManager=a.createEventManager(t),a.syncEngine=a.createSyncEngine(t,!e.synchronizeTabs),a.sharedClientState.onlineStateHandler=c=>ey(a.syncEngine,c,1),a.remoteStore.remoteSyncer.handleCredentialChange=fv.bind(null,a.syncEngine),yield ll(a.remoteStore,a.syncEngine.isPrimaryClient))})()}createEventManager(e){return new s_}createDatastore(e){const t=hf(e.databaseInfo.databaseId),a=new nv(e.databaseInfo);return new rv(e.authCredentials,e.appCheckCredentials,a,t)}createRemoteStore(e){return t=this.localStore,a=this.datastore,c=e.asyncQueue,f=M=>ey(this.syncEngine,M,0),v=gg.D()?new gg:new Wy,new SE(t,a,c,f,v);var t,a,c,f,v}createSyncEngine(e,t){return function(a,c,f,v,M,j,q){const ie=new dv(a,c,f,v,M,j);return q&&(ie.vc=!0),ie}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,Ue.Z)(function*(t){const a=nn(t);Vt("RemoteStore","RemoteStore shutting down."),a.vu.add(5),yield Ql(a),a.Pu.shutdown(),a.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function Od(r,e=10240){let t=0;return{read:()=>(0,Ue.Z)(function*(){if(t<r.byteLength){const a={value:r.slice(t,t+e),done:!1};return t+=e,a}return{done:!0}})(),cancel:()=>(0,Ue.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class oa{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):Pi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class wu{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new vr,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(a=>{a&&a.Qu()?this.metadata.resolve(a.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(a?.Gu)}`))},a=>this.metadata.reject(a))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,Ue.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,Ue.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,Ue.Z)(function*(){const t=yield e.kc();if(null===t)return null;const a=e.xc.decode(t),c=Number(a);isNaN(c)&&e.Mc(`length string (${a}) is not valid number`);const f=yield e.$c(c);return new Qm(JSON.parse(f),t.length+c)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,Ue.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const a=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),a})()}$c(e){var t=this;return(0,Ue.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const a=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),a})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,Ue.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const a=new Uint8Array(e.buffer.length+t.value.length);a.set(e.buffer),a.set(t.value,e.buffer.length),e.buffer=a}return t.done})()}}class Ac{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,Ue.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new Tt(at.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const a=yield(c=(0,Ue.Z)(function*(f,v){const M=nn(f),j=rf(M.serializer)+"/documents",q={documents:v.map(It=>$u(M.serializer,It))},ie=yield M.vo("BatchGetDocuments",j,q,v.length),we=new Map;ie.forEach(It=>{const Wt=function dm(r,e){return"found"in e?function(t,a){Sn(!!a.found);const c=al(t,a.found.name),f=uo(a.found.updateTime),v=a.found.createTime?uo(a.found.createTime):Nn.min(),M=new zr({mapValue:{fields:a.found.fields}});return pi.newFoundDocument(c,f,v,M)}(r,e):"missing"in e?function(t,a){Sn(!!a.missing),Sn(!!a.readTime);const c=al(t,a.missing),f=uo(a.readTime);return pi.newNoDocument(c,f)}(r,e):Ot()}(M.serializer,It);we.set(Wt.key.toString(),Wt)});const nt=[];return v.forEach(It=>{const Wt=we.get(It.toString());Sn(!!Wt),nt.push(Wt)}),nt}),function(f,v){return c.apply(this,arguments)})(t.datastore,e);var c;return a.forEach(c=>t.recordVersion(c)),a})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(a){this.lastWriteError=a}this.writtenDocs.add(e.toString())}delete(e){this.write(new Ec(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,Ue.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var a;e.mutations.forEach(a=>{t.delete(a.key.toString())}),t.forEach((a,c)=>{const f=on.fromPath(c);e.mutations.push(new Kf(f,e.precondition(f)))}),yield(a=(0,Ue.Z)(function*(c,f){const v=nn(c),M=rf(v.serializer)+"/documents",j={writes:f.map(q=>Zp(v.serializer,q))};yield v.Io("Commit",M,j)}),function(c,f){return a.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Ot();t=Nn.min()}const a=this.readVersions.get(e.key.toString());if(a){if(!t.isEqual(a))throw new Tt(at.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Nn.min())?ss.exists(!1):ss.updateTime(t):ss.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Nn.min()))throw new Tt(at.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return ss.updateTime(t)}return ss.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class wf{constructor(e,t,a,c,f){this.asyncQueue=e,this.datastore=t,this.options=a,this.updateFunction=c,this.deferred=f,this.Bc=a.maxAttempts,this.qo=new hp(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,Ue.Z)(function*(){const t=new Ac(e.datastore),a=e.qc(t);a&&a.then(c=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(c)}).catch(f=>{e.Uc(f)}))}).catch(c=>{e.Uc(c)})}))}qc(e){try{const t=this.updateFunction(e);return!Ti(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!Xe(t)}return!1}}class kd{constructor(e,t,a,c){var f=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=a,this.databaseInfo=c,this.user=ns.UNAUTHENTICATED,this.clientId=Ru.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(a,function(){var v=(0,Ue.Z)(function*(M){Vt("FirestoreClient","Received user=",M.uid),yield f.authCredentialListener(M),f.user=M});return function(M){return v.apply(this,arguments)}}()),this.appCheckCredentials.start(a,v=>(Vt("FirestoreClient","Received new app check token=",v),this.appCheckCredentialListener(v,this.user)))}getConfiguration(){var e=this;return(0,Ue.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Tt(at.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new vr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,Ue.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(a){const c=Nd(a,"Failed to shutdown persistence");t.reject(c)}})),t.promise}}function Rc(r,e){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,Ue.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress(),Vt("FirestoreClient","Initializing OfflineComponentProvider");const t=yield r.getConfiguration();yield e.initialize(t);let a=t.initialUser;r.setCredentialChangeListener(function(){var c=(0,Ue.Z)(function*(f){a.isEqual(f)||(yield dg(e.localStore,f),a=f)});return function(f){return c.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>r.terminate()),r._offlineComponents=e}),Iu.apply(this,arguments)}function xh(r,e){return Pg.apply(this,arguments)}function Pg(){return Pg=(0,Ue.Z)(function*(r,e){r.asyncQueue.verifyOperationInProgress();const t=yield Og(r);Vt("FirestoreClient","Initializing OnlineComponentProvider");const a=yield r.getConfiguration();yield e.initialize(t,a),r.setCredentialChangeListener(c=>r_(e.remoteStore,c)),r.setAppCheckTokenChangeListener((c,f)=>r_(e.remoteStore,f)),r._onlineComponents=e}),Pg.apply(this,arguments)}function Cp(r){return"FirebaseError"===r.name?r.code===at.FAILED_PRECONDITION||r.code===at.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||22===r.code||20===r.code||11===r.code}function Og(r){return kg.apply(this,arguments)}function kg(){return kg=(0,Ue.Z)(function*(r){if(!r._offlineComponents)if(r._uninitializedComponentsProvider){Vt("FirestoreClient","Using user provided OfflineComponentProvider");try{yield Rc(r,r._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!Cp(t))throw t;ps("Error using user provided cache. Falling back to memory cache: "+t),yield Rc(r,new vu)}}else Vt("FirestoreClient","Using default OfflineComponentProvider"),yield Rc(r,new vu);return r._offlineComponents}),kg.apply(this,arguments)}function Dp(r){return ja.apply(this,arguments)}function ja(){return ja=(0,Ue.Z)(function*(r){return r._onlineComponents||(r._uninitializedComponentsProvider?(Vt("FirestoreClient","Using user provided OnlineComponentProvider"),yield xh(r,r._uninitializedComponentsProvider._online)):(Vt("FirestoreClient","Using default OnlineComponentProvider"),yield xh(r,new Eu))),r._onlineComponents}),ja.apply(this,arguments)}function Fg(r){return Og(r).then(e=>e.persistence)}function Fd(r){return Og(r).then(e=>e.localStore)}function bp(r){return Dp(r).then(e=>e.remoteStore)}function ly(r){return Dp(r).then(e=>e.syncEngine)}function If(r){return cy.apply(this,arguments)}function cy(){return cy=(0,Ue.Z)(function*(r){const e=yield Dp(r),t=e.eventManager;return t.onListen=hv.bind(null,e.syncEngine),t.onUnlisten=Gv.bind(null,e.syncEngine),t}),cy.apply(this,arguments)}function Tp(r,e,t={}){const a=new vr;return r.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return function(c,f,v,M,j){const q=new oa({next:we=>{f.enqueueAndForget(()=>Zm(c,ie));const nt=we.docs.has(v);!nt&&we.fromCache?j.reject(new Tt(at.UNAVAILABLE,"Failed to get document because the client is offline.")):nt&&we.fromCache&&M&&"server"===M.source?j.reject(new Tt(at.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):j.resolve(we)},error:we=>j.reject(we)}),ie=new yu(gc(v.path),q,{includeMetadataChanges:!0,Ku:!0});return qm(c,ie)}(yield If(r),r.asyncQueue,e,t,a)})),a.promise}function Nh(r,e,t={}){const a=new vr;return r.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return function(c,f,v,M,j){const q=new oa({next:we=>{f.enqueueAndForget(()=>Zm(c,ie)),we.fromCache&&"server"===M.source?j.reject(new Tt(at.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):j.resolve(we)},error:we=>j.reject(we)}),ie=new yu(v,q,{includeMetadataChanges:!0,Ku:!0});return qm(c,ie)}(yield If(r),r.asyncQueue,e,t,a)})),a.promise}function Rp(r){const e={};return void 0!==r.timeoutSeconds&&(e.timeoutSeconds=r.timeoutSeconds),e}const Mp=new Map;function Ug(r,e,t){if(!t)throw new Tt(at.INVALID_ARGUMENT,`Function ${r}() cannot be called with an empty ${e}.`)}function hy(r,e,t,a){if(!0===e&&!0===a)throw new Tt(at.INVALID_ARGUMENT,`${r} and ${t} cannot be used together.`)}function Bg(r){if(!on.isDocumentKey(r))throw new Tt(at.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${r} has ${r.length}.`)}function fy(r){if(on.isDocumentKey(r))throw new Tt(at.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${r} has ${r.length}.`)}function jg(r){if(void 0===r)return"undefined";if(null===r)return"null";if("string"==typeof r)return r.length>20&&(r=`${r.substring(0,20)}...`),JSON.stringify(r);if("number"==typeof r||"boolean"==typeof r)return""+r;if("object"==typeof r){if(r instanceof Array)return"an array";{const e=(t=r).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof r?"a function":Ot()}function ii(r,e){if("_delegate"in r&&(r=r._delegate),!(r instanceof e)){if(e.name===r.constructor.name)throw new Tt(at.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=jg(r);throw new Tt(at.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return r}function nd(r,e){if(e<=0)throw new Tt(at.INVALID_ARGUMENT,`Function ${r}() requires a positive number, but it was: ${e}.`)}class xp{constructor(e){var t,a;if(void 0===e.host){if(void 0!==e.ssl)throw new Tt(at.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Tt(at.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}hy("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=Rp(null!==(a=e.experimentalLongPollingOptions)&&void 0!==a?a:{}),function(c){if(void 0!==c.timeoutSeconds){if(isNaN(c.timeoutSeconds))throw new Tt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new Tt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new Tt(at.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ld{constructor(e,t,a,c){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=a,this._app=c,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new xp({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new Tt(at.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Tt(at.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new xp(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new oo;switch(t.type){case"firstParty":return new Su(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new Tt(at.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Mp.get(e);t&&(Vt("ComponentProvider","Removing Datastore"),Mp.delete(e),t.terminate())}(this),Promise.resolve()}}class ys{constructor(e,t,a){this.converter=t,this._key=a,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Xu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ys(this.firestore,e,this._key)}}class aa{constructor(e,t,a){this.converter=t,this._query=a,this.type="query",this.firestore=e}withConverter(e){return new aa(this.firestore,e,this._query)}}class Xu extends aa{constructor(e,t,a){super(e,t,gc(a)),this._path=a,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ys(this.firestore,null,new on(e))}withConverter(e){return new Xu(this.firestore,e,this._path)}}function Hg(r,e,...t){if(r=(0,Fe.m9)(r),Ug("collection","path",e),r instanceof Ld){const a=$n.fromString(e,...t);return fy(a),new Xu(r,null,a)}{if(!(r instanceof ys||r instanceof Xu))throw new Tt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child($n.fromString(e,...t));return fy(a),new Xu(r.firestore,null,a)}}function Ph(r,e,...t){if(r=(0,Fe.m9)(r),1===arguments.length&&(e=Ru.A()),Ug("doc","path",e),r instanceof Ld){const a=$n.fromString(e,...t);return Bg(a),new ys(r,null,new on(a))}{if(!(r instanceof ys||r instanceof Xu))throw new Tt(at.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const a=r._path.child($n.fromString(e,...t));return Bg(a),new ys(r.firestore,r instanceof Xu?r.converter:null,new on(a))}}function py(r,e){return r=(0,Fe.m9)(r),e=(0,Fe.m9)(e),(r instanceof ys||r instanceof Xu)&&(e instanceof ys||e instanceof Xu)&&r.firestore===e.firestore&&r.path===e.path&&r.converter===e.converter}function Oh(r,e){return r=(0,Fe.m9)(r),e=(0,Fe.m9)(e),r instanceof aa&&e instanceof aa&&r.firestore===e.firestore&&lo(r._query,e._query)&&r.converter===e.converter}class $g{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new hp(this,"async_queue_retry"),this.Xc=()=>{const t=dp();t&&Vt("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=dp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=dp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new vr;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,Ue.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!ce(t))throw t;Vt("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(a=>{throw this.Wc=a,this.Hc=!1,Pi("INTERNAL UNHANDLED ERROR: ",function(f){let v=f.message||"";return f.stack&&(v=f.stack.includes(f.message)?f.stack:f.message+"\n"+f.stack),v}(a)),a}).then(a=>(this.Hc=!1,a))));return this.Gc=t,t}enqueueAfterDelay(e,t,a){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const c=Km.createAndSchedule(this,e,t,a,f=>this.na(f));return this.zc.push(c),c}Zc(){this.Wc&&Ot()}verifyOperationInProgress(){}sa(){var e=this;return(0,Ue.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,a)=>t.targetTimeMs-a.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function kh(r){return function(e,t){if("object"!=typeof e||null===e)return!1;const a=e;for(const c of["next","error","complete"])if(c in a&&"function"==typeof a[c])return!0;return!1}(r)}class v_{constructor(){this._progressObserver={},this._taskCompletionResolver=new vr,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,a){this._progressObserver={next:e,error:t,complete:a}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Os extends Ld{constructor(e,t,a,c){super(e,t,a,c),this.type="firestore",this._queue=new $g,this._persistenceKey=c?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||w_(this),this._firestoreClient.terminate()}}function fo(r){return r._firestoreClient||w_(r),r._firestoreClient.verifyNotTerminated(),r._firestoreClient}function w_(r){var e,t,a;const c=r._freezeSettings(),f=(M=(null===(e=r._app)||void 0===e?void 0:e.options.appId)||"",new Bp(r._databaseId,M,r._persistenceKey,(q=c).host,q.ssl,q.experimentalForceLongPolling,q.experimentalAutoDetectLongPolling,Rp(q.experimentalLongPollingOptions),q.useFetchStreams));var M,q;r._firestoreClient=new kd(r._authCredentials,r._appCheckCredentials,r._queue,f),(null===(t=c.cache)||void 0===t?void 0:t._offlineComponentProvider)&&(null===(a=c.cache)||void 0===a?void 0:a._onlineComponentProvider)&&(r._firestoreClient._uninitializedComponentsProvider={_offlineKind:c.cache.kind,_offline:c.cache._offlineComponentProvider,_online:c.cache._onlineComponentProvider})}function Gg(r,e,t){const a=new vr;return r.asyncQueue.enqueue((0,Ue.Z)(function*(){try{yield Rc(r,t),yield xh(r,e),a.resolve()}catch(c){const f=c;if(!Cp(f))throw f;ps("Error enabling indexeddb cache. Falling back to memory cache: "+f),a.reject(f)}})).then(()=>a.promise)}function D_(r){if(r._initialized||r._terminated)throw new Tt(at.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class ec{constructor(e){this._byteString=e}static fromBase64String(e){try{return new ec(gs.fromBase64String(e))}catch(t){throw new Tt(at.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new ec(gs.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class rd{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new Tt(at.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new _i(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class tc{constructor(e){this._methodName=e}}class Tl{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new Tt(at.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new Tt(at.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ir(this._lat,e._lat)||ir(this._long,e._long)}}const Ev=/^__.*__$/;class T_{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return null!==this.fieldMask?new vc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Id(e,this.data,t,this.fieldTransforms)}}class nc{constructor(e,t,a){this.data=e,this.fieldMask=t,this.fieldTransforms=a}toMutation(e,t){return new vc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function eu(r){switch(r){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ot()}}class Sl{constructor(e,t,a,c,f,v){this.settings=e,this.databaseId=t,this.serializer=a,this.ignoreUndefinedProperties=c,void 0===f&&this.ua(),this.fieldTransforms=f||[],this.fieldMask=v||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new Sl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.aa({path:a,la:!1});return c.fa(e),c}da(e){var t;const a=null===(t=this.path)||void 0===t?void 0:t.child(e),c=this.aa({path:a,la:!1});return c.ua(),c}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return Sf(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(eu(this.ca)&&Ev.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class tu{constructor(e,t,a){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=a||hf(e)}ya(e,t,a,c=!1){return new Sl({ca:e,methodName:t,ga:a,path:_i.emptyPath(),la:!1,ma:c},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Mc(r){const e=r._freezeSettings(),t=hf(r._databaseId);return new tu(r._databaseId,!!e.ignoreUndefinedProperties,t)}function Vd(r,e,t,a,c,f={}){const v=r.ya(f.merge||f.mergeFields?2:0,e,t,c);sd("Data must be an object, but it was:",v,a);const M=bf(a,v);let j,q;if(f.merge)j=new Hs(v.fieldMask),q=v.fieldTransforms;else if(f.mergeFields){const ie=[];for(const we of f.mergeFields){const nt=Tf(e,we,t);if(!v.contains(nt))throw new Tt(at.INVALID_ARGUMENT,`Field '${nt}' is specified in your field mask but missing from your input data.`);Wg(ie,nt)||ie.push(nt)}j=new Hs(ie),q=v.fieldTransforms.filter(we=>j.covers(we.field))}else j=null,q=v.fieldTransforms;return new T_(new zr(M),j,q)}class Lh extends tc{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Lh}}function S_(r,e,t){return new Sl({ca:3,ga:e.settings.ga,methodName:r._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class yy extends tc{_toFieldTransform(e){return new Ed(e.path,new uh)}isEqual(e){return e instanceof yy}}class Pp extends tc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=S_(this,e,!0),a=this.pa.map(f=>id(f,t)),c=new Bu(a);return new Ed(e.path,c)}isEqual(e){return this===e}}class Op extends tc{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=S_(this,e,!0),a=this.pa.map(f=>id(f,t)),c=new _c(a);return new Ed(e.path,c)}isEqual(e){return this===e}}class wv extends tc{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new ju(e.serializer,yc(e.serializer,this.Ia));return new Ed(e.path,t)}isEqual(e){return this===e}}function Vh(r,e,t,a){const c=r.ya(1,e,t);sd("Data must be an object, but it was:",c,a);const f=[],v=zr.empty();$l(a,(j,q)=>{const ie=Ud(e,j,t);q=(0,Fe.m9)(q);const we=c.da(ie);if(q instanceof Lh)f.push(ie);else{const nt=id(q,we);null!=nt&&(f.push(ie),v.set(ie,nt))}});const M=new Hs(f);return new nc(v,M,c.fieldTransforms)}function _y(r,e,t,a,c,f){const v=r.ya(1,e,t),M=[Tf(e,a,t)],j=[c];if(f.length%2!=0)throw new Tt(at.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let nt=0;nt<f.length;nt+=2)M.push(Tf(e,f[nt])),j.push(f[nt+1]);const q=[],ie=zr.empty();for(let nt=M.length-1;nt>=0;--nt)if(!Wg(q,M[nt])){const It=M[nt];let Wt=j[nt];Wt=(0,Fe.m9)(Wt);const pn=v.da(It);if(Wt instanceof Lh)q.push(It);else{const _n=id(Wt,pn);null!=_n&&(q.push(It),ie.set(It,_n))}}const we=new Hs(q);return new nc(ie,we,v.fieldTransforms)}function zg(r,e,t,a=!1){return id(t,r.ya(a?4:3,e))}function id(r,e){if(nu(r=(0,Fe.m9)(r)))return sd("Unsupported field value:",e,r),bf(r,e);if(r instanceof tc)return function(t,a){if(!eu(a.ca))throw a._a(`${t._methodName}() can only be used with update() and set()`);if(!a.path)throw a._a(`${t._methodName}() is not currently supported inside arrays`);const c=t._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(r,e),null;if(void 0===r&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),r instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,a){const c=[];let f=0;for(const v of t){let M=id(v,a.wa(f));null==M&&(M={nullValue:"NULL_VALUE"}),c.push(M),f++}return{arrayValue:{values:c}}}(r,e)}return function(t,a){if(null===(t=(0,Fe.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yc(a.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const c=Qr.fromDate(t);return{timestampValue:na(a.serializer,c)}}if(t instanceof Qr){const c=new Qr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:na(a.serializer,c)}}if(t instanceof Tl)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof ec)return{bytesValue:tf(a.serializer,t._byteString)};if(t instanceof ys){const c=a.databaseId,f=t.firestore._databaseId;if(!f.isEqual(c))throw a._a(`Document reference is for database ${f.projectId}/${f.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:lm(t.firestore._databaseId||a.databaseId,t._key.path)}}throw a._a(`Unsupported field value: ${jg(t)}`)}(r,e)}function bf(r,e){const t={};return Kd(r)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):$l(r,(a,c)=>{const f=id(c,e.ha(a));null!=f&&(t[a]=f)}),{mapValue:{fields:t}}}function nu(r){return!("object"!=typeof r||null===r||r instanceof Array||r instanceof Date||r instanceof Qr||r instanceof Tl||r instanceof ec||r instanceof ys||r instanceof tc)}function sd(r,e,t){if(!nu(t)||"object"!=typeof(a=t)||null===a||Object.getPrototypeOf(a)!==Object.prototype&&null!==Object.getPrototypeOf(a)){const a=jg(t);throw e._a("an object"===a?r+" a custom object":r+" "+a)}var a}function Tf(r,e,t){if((e=(0,Fe.m9)(e))instanceof rd)return e._internalPath;if("string"==typeof e)return Ud(r,e);throw Sf("Field path arguments must be of type string or ",r,!1,void 0,t)}const vy=new RegExp("[~\\*/\\[\\]]");function Ud(r,e,t){if(e.search(vy)>=0)throw Sf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,r,!1,void 0,t);try{return new rd(...e.split("."))._internalPath}catch{throw Sf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,r,!1,void 0,t)}}function Sf(r,e,t,a,c){const f=a&&!a.isEmpty(),v=void 0!==c;let M=`Function ${e}() called with invalid data`;t&&(M+=" (via `toFirestore()`)"),M+=". ";let j="";return(f||v)&&(j+=" (found",f&&(j+=` in field ${a}`),v&&(j+=` in document ${c}`),j+=")"),new Tt(at.INVALID_ARGUMENT,M+r+j)}function Wg(r,e){return r.some(t=>t.isEqual(e))}class od{constructor(e,t,a,c,f){this._firestore=e,this._userDataWriter=t,this._key=a,this._document=c,this._converter=f}get id(){return this._key.path.lastSegment()}get ref(){return new ys(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new A_(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(kp("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class A_ extends od{data(){return super.data()}}function kp(r,e){return"string"==typeof e?Ud(r,e):e instanceof rd?e._internalPath:e._delegate._internalPath}function Fp(r){if("L"===r.limitType&&0===r.explicitOrderBy.length)throw new Tt(at.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Kg{}class Uh extends Kg{}function Bd(r,e,...t){let a=[];e instanceof Kg&&a.push(e),a=a.concat(t),function(c){const f=c.filter(M=>M instanceof Rf).length,v=c.filter(M=>M instanceof Af).length;if(f>1||f>0&&v>0)throw new Tt(at.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(a);for(const c of a)r=c._apply(r);return r}class Af extends Uh{constructor(e,t,a){super(),this._field=e,this._op=t,this._value=a,this.type="where"}static _create(e,t,a){return new Af(e,t,a)}_apply(e){const t=this._parse(e);return N_(e._query,t),new aa(e.firestore,e.converter,rl(e._query,t))}_parse(e){const t=Mc(e.firestore);return function(c,f,v,M,j,q,ie){let we;if(j.isKeyField()){if("array-contains"===q||"array-contains-any"===q)throw new Tt(at.INVALID_ARGUMENT,`Invalid Query. You can't perform '${q}' queries on documentId().`);if("in"===q||"not-in"===q){Ey(ie,q);const nt=[];for(const It of ie)nt.push(Jg(M,c,It));we={arrayValue:{values:nt}}}else we=Jg(M,c,ie)}else"in"!==q&&"not-in"!==q&&"array-contains-any"!==q||Ey(ie,q),we=zg(v,"where",ie,"in"===q||"not-in"===q);return qr.create(j,q,we)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class Rf extends Kg{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new Rf(e,t)}_parse(e){const t=this._queryConstraints.map(a=>a._parse(e)).filter(a=>a.getFilters().length>0);return 1===t.length?t[0]:vi.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(a,c){let f=a;const v=c.getFlattenedFilters();for(const M of v)N_(f,M),f=rl(f,M)}(e._query,t),new aa(e.firestore,e.converter,rl(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class Mf extends Uh{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new Mf(e,t)}_apply(e){const t=function(a,c,f){if(null!==a.startAt)throw new Tt(at.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==a.endAt)throw new Tt(at.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const v=new zl(c,f);return function(M,j){if(null===eh(M)){const q=_d(M);null!==q&&P_(0,q,j.field)}}(a,v),v}(e._query,this._field,this._direction);return new aa(e.firestore,e.converter,function(a,c){const f=a.explicitOrderBy.concat([c]);return new Wl(a.path,a.collectionGroup,f,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,t))}}class qg extends Uh{constructor(e,t,a){super(),this.type=e,this._limit=t,this._limitType=a}static _create(e,t,a){return new qg(e,t,a)}_apply(e){return new aa(e.firestore,e.converter,mc(e._query,this._limit,this._limitType))}}class Zg extends Uh{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Zg(e,t,a)}_apply(e){const t=Qg(e,this.type,this._docOrFields,this._inclusive);return new aa(e.firestore,e.converter,(c=t,new Wl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,c,a.endAt)));var a,c}}class Yg extends Uh{constructor(e,t,a){super(),this.type=e,this._docOrFields=t,this._inclusive=a}static _create(e,t,a){return new Yg(e,t,a)}_apply(e){const t=Qg(e,this.type,this._docOrFields,this._inclusive);return new aa(e.firestore,e.converter,(c=t,new Wl((a=e._query).path,a.collectionGroup,a.explicitOrderBy.slice(),a.filters.slice(),a.limit,a.limitType,a.startAt,c)));var a,c}}function Qg(r,e,t,a){if(t[0]=(0,Fe.m9)(t[0]),t[0]instanceof od)return function(c,f,v,M,j){if(!M)throw new Tt(at.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${v}().`);const q=[];for(const ie of Lu(c))if(ie.field.isKeyField())q.push(k(f,M.key));else{const we=M.data.field(ie.field);if(El(we))throw new Tt(at.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+ie.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===we){const nt=ie.field.canonicalString();throw new Tt(at.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${nt}' (used as the orderBy) does not exist.`)}q.push(we)}return new Co(q,j)}(r._query,r.firestore._databaseId,e,t[0]._document,a);{const c=Mc(r.firestore);return function(f,v,M,j,q,ie){const we=f.explicitOrderBy;if(q.length>we.length)throw new Tt(at.INVALID_ARGUMENT,`Too many arguments provided to ${j}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const nt=[];for(let It=0;It<q.length;It++){const Wt=q[It];if(we[It].field.isKeyField()){if("string"!=typeof Wt)throw new Tt(at.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${j}(), but got a ${typeof Wt}`);if(!th(f)&&-1!==Wt.indexOf("/"))throw new Tt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${j}() must be a plain document ID, but '${Wt}' contains a slash.`);const pn=f.path.child($n.fromString(Wt));if(!on.isDocumentKey(pn))throw new Tt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${j}() must result in a valid document path, but '${pn}' is not because it contains an odd number of segments.`);const _n=new on(pn);nt.push(k(v,_n))}else{const pn=zg(M,j,Wt);nt.push(pn)}}return new Co(nt,ie)}(r._query,r.firestore._databaseId,c,e,t,a)}}function Jg(r,e,t){if("string"==typeof(t=(0,Fe.m9)(t))){if(""===t)throw new Tt(at.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!th(e)&&-1!==t.indexOf("/"))throw new Tt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const a=e.path.child($n.fromString(t));if(!on.isDocumentKey(a))throw new Tt(at.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${a}' is not because it has an odd number of segments (${a.length}).`);return k(r,new on(a))}if(t instanceof ys)return k(r,t._key);throw new Tt(at.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jg(t)}.`)}function Ey(r,e){if(!Array.isArray(r)||0===r.length)throw new Tt(at.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function N_(r,e){if(e.isInequality()){const a=_d(r),c=e.field;if(null!==a&&!a.isEqual(c))throw new Tt(at.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${a.toString()}' and '${c.toString()}'`);const f=eh(r);null!==f&&P_(0,c,f)}const t=function(a,c){for(const f of a)for(const v of f.getFlattenedFilters())if(c.indexOf(v.op)>=0)return v.op;return null}(r.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new Tt(at.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function P_(r,e,t){if(!t.isEqual(e))throw new Tt(at.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class Xg{convertValue(e,t="none"){switch(Io(e)){case 0:return null;case 1:return e.booleanValue;case 2:return As(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(du(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Ot()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const a={};return $l(e,(c,f)=>{a[c]=this.convertValue(f,t)}),a}convertGeoPoint(e){return new Tl(As(e.latitude),As(e.longitude))}convertArray(e,t){return(e.values||[]).map(a=>this.convertValue(a,t))}convertServerTimestamp(e,t){switch(t){case"previous":const a=ka(e);return null==a?null:this.convertValue(a,t);case"estimate":return this.convertTimestamp(jc(e));default:return null}}convertTimestamp(e){const t=ta(e);return new Qr(t.seconds,t.nanos)}convertDocumentKey(e,t){const a=$n.fromString(e);Sn(Ry(a));const c=new hu(a.get(1),a.get(3)),f=new on(a.popFirst(5));return c.isEqual(t)||Pi(`Document ${f} contains a document reference within a different database (${c.projectId}/${c.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),f}}function xf(r,e,t){let a;return a=r?t&&(t.merge||t.mergeFields)?r.toFirestore(e,t):r.toFirestore(e):e,a}class u extends Xg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,t)}}class S{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class O extends od{constructor(e,t,a,c,f,v){super(e,t,a,c,v),this._firestore=e,this._firestoreImpl=e,this.metadata=f}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new G(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const a=this._document.data.field(kp("DocumentSnapshot.get",e));if(null!==a)return this._userDataWriter.convertValue(a,t.serverTimestamps)}}}class G extends O{data(e={}){return super.data(e)}}class Q{constructor(e,t,a,c){this._firestore=e,this._userDataWriter=t,this._snapshot=c,this.metadata=new S(c.hasPendingWrites,c.fromCache),this.query=a}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(a=>{e.call(t,new G(this._firestore,this._userDataWriter,a.key,a,new S(this._snapshot.mutatedKeys.has(a.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new Tt(at.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let f=0;return a._snapshot.docChanges.map(v=>({type:"added",doc:new G(a._firestore,a._userDataWriter,v.doc.key,v.doc,new S(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter),oldIndex:-1,newIndex:f++}))}{let f=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(v=>c||3!==v.type).map(v=>{const M=new G(a._firestore,a._userDataWriter,v.doc.key,v.doc,new S(a._snapshot.mutatedKeys.has(v.doc.key),a._snapshot.fromCache),a.query.converter);let j=-1,q=-1;return 0!==v.type&&(j=f.indexOf(v.doc.key),f=f.delete(v.doc.key)),1!==v.type&&(f=f.add(v.doc),q=f.indexOf(v.doc.key)),{type:Ee(v.type),doc:M,oldIndex:j,newIndex:q}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ee(r){switch(r){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ot()}}function Te(r,e){return r instanceof O&&e instanceof O?r._firestore===e._firestore&&r._key.isEqual(e._key)&&(null===r._document?null===e._document:r._document.isEqual(e._document))&&r._converter===e._converter:r instanceof Q&&e instanceof Q&&r._firestore===e._firestore&&Oh(r.query,e.query)&&r.metadata.isEqual(e.metadata)&&r._snapshot.isEqual(e._snapshot)}class _t extends Xg{constructor(e){super(),this.firestore=e}convertBytes(e){return new ec(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ys(this.firestore,null,t)}}function Zr(r,e,t){r=ii(r,ys);const a=ii(r.firestore,Os),c=xf(r.converter,e,t);return Ko(a,[Vd(Mc(a),"setDoc",r._key,c,null!==r.converter,t).toMutation(r._key,ss.none())])}function Wr(r,e,t,...a){r=ii(r,ys);const c=ii(r.firestore,Os),f=Mc(c);let v;return v="string"==typeof(e=(0,Fe.m9)(e))||e instanceof rd?_y(f,"updateDoc",r._key,e,t,a):Vh(f,"updateDoc",r._key,e),Ko(c,[v.toMutation(r._key,ss.exists(!0))])}function Wo(r,...e){var t,a,c;r=(0,Fe.m9)(r);let f={includeMetadataChanges:!1},v=0;"object"!=typeof e[v]||kh(e[v])||(f=e[v],v++);const M={includeMetadataChanges:f.includeMetadataChanges};if(kh(e[v])){const we=e[v];e[v]=null===(t=we.next)||void 0===t?void 0:t.bind(we),e[v+1]=null===(a=we.error)||void 0===a?void 0:a.bind(we),e[v+2]=null===(c=we.complete)||void 0===c?void 0:c.bind(we)}let j,q,ie;if(r instanceof ys)q=ii(r.firestore,Os),ie=gc(r._key.path),j={next:we=>{e[v]&&e[v](rc(q,r,we))},error:e[v+1],complete:e[v+2]};else{const we=ii(r,aa);q=ii(we.firestore,Os),ie=we._query;const nt=new _t(q);j={next:It=>{e[v]&&e[v](new Q(q,nt,we,It))},error:e[v+1],complete:e[v+2]},Fp(r._query)}return function(we,nt,It,Wt){const pn=new oa(Wt),_n=new yu(nt,pn,It);return we.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return qm(yield If(we),_n)})),()=>{pn.Dc(),we.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return Zm(yield If(we),_n)}))}}(fo(q),ie,M,j)}function Ko(r,e){return function(t,a){const c=new vr;return t.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return function zv(r,e,t){return bg.apply(this,arguments)}(yield ly(t),a,c)})),c.promise}(fo(r),e)}function rc(r,e,t){const a=t.docs.get(e._key),c=new _t(r);return new O(r,c,e._key,a,new S(t.hasPendingWrites,t.fromCache),e.converter)}const Iy={maxAttempts:5};class L_{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Mc(e)}set(e,t,a){this._verifyNotCommitted();const c=as(e,this._firestore),f=xf(c.converter,t,a),v=Vd(this._dataReader,"WriteBatch.set",c._key,f,null!==c.converter,a);return this._mutations.push(v.toMutation(c._key,ss.none())),this}update(e,t,a,...c){this._verifyNotCommitted();const f=as(e,this._firestore);let v;return v="string"==typeof(t=(0,Fe.m9)(t))||t instanceof rd?_y(this._dataReader,"WriteBatch.update",f._key,t,a,c):Vh(this._dataReader,"WriteBatch.update",f._key,t),this._mutations.push(v.toMutation(f._key,ss.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=as(e,this._firestore);return this._mutations=this._mutations.concat(new Ec(t._key,ss.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Tt(at.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function as(r,e){if((r=(0,Fe.m9)(r)).firestore!==e)throw new Tt(at.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return r}class ic extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Mc(e)}get(e){const t=as(e,this._firestore),a=new u(this._firestore);return this._transaction.lookup([t._key]).then(c=>{if(!c||1!==c.length)return Ot();const f=c[0];if(f.isFoundDocument())return new od(this._firestore,a,f.key,f,t.converter);if(f.isNoDocument())return new od(this._firestore,a,t._key,null,t.converter);throw Ot()})}set(e,t,a){const c=as(e,this._firestore),f=xf(c.converter,t,a),v=Vd(this._dataReader,"Transaction.set",c._key,f,null!==c.converter,a);return this._transaction.set(c._key,v),this}update(e,t,a,...c){const f=as(e,this._firestore);let v;return v="string"==typeof(t=(0,Fe.m9)(t))||t instanceof rd?_y(this._dataReader,"Transaction.update",f._key,t,a,c):Vh(this._dataReader,"Transaction.update",f._key,t),this._transaction.update(f._key,v),this}delete(e){const t=as(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=as(e,this._firestore),a=new _t(this._firestore);return super.get(e).then(c=>new O(this._firestore,a,t._key,c._document,new S(!1,!1),t.converter))}}function Xv(r,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Tt("invalid-argument",`Invalid options passed to function ${r}(): You cannot specify both "merge" and "mergeFields".`);return e}function xE(){if(typeof Uint8Array>"u")throw new Tt("unimplemented","Uint8Arrays are not available in this environment.")}function NE(){if(!function Bc(){return typeof atob<"u"}())throw new Tt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(r,e=!0){Tu=an.SDK_VERSION,(0,an._registerComponent)(new it.wA("firestore",(t,{instanceIdentifier:a,options:c})=>{const f=t.getProvider("app").getImmediate(),v=new Os(new el(t.getProvider("auth-internal")),new ld(t.getProvider("app-check-internal")),function(M,j){if(!Object.prototype.hasOwnProperty.apply(M.options,["projectId"]))throw new Tt(at.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new hu(M.options.projectId,j)}(f,a),f);return c=Object.assign({useFetchStreams:e},c),v._setSettings(c),v},"PUBLIC").setMultipleInstances(!0)),(0,an.registerVersion)(ou,"3.13.0",r),(0,an.registerVersion)(ou,"3.13.0","esm2017")}();class tm{constructor(e){this._delegate=e}static fromBase64String(e){return NE(),new tm(ec.fromBase64String(e))}static fromUint8Array(e){return xE(),new tm(ec.fromUint8Array(e))}toBase64(){return NE(),this._delegate.toBase64()}toUint8Array(){return xE(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function nm(r){return function PE(r,e){if("object"!=typeof r||null===r)return!1;const t=r;for(const a of e)if(a in t&&"function"==typeof t[a])return!0;return!1}(r,["next","error","complete"])}class OE{enableIndexedDbPersistence(e,t){return function zo(r,e){D_(r=ii(r,Os));const t=fo(r);if(t._uninitializedComponentsProvider)throw new Tt(at.FAILED_PRECONDITION,"SDK cache is already specified.");ps("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const a=r._freezeSettings(),c=new Eu;return Gg(t,c,new dl(c,a.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function my(r){D_(r=ii(r,Os));const e=fo(r);if(e._uninitializedComponentsProvider)throw new Tt(at.FAILED_PRECONDITION,"SDK cache is already specified.");ps("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=r._freezeSettings(),a=new Eu;return Gg(e,a,new Ju(a,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function I_(r){if(r._initialized&&!r._terminated)throw new Tt(at.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new vr;return r._queue.enqueueAndForgetEvenWhileRestricted((0,Ue.Z)(function*(){try{yield(t=(0,Ue.Z)(function*(a){if(!P.D())return Promise.resolve();const c=a+"main";yield P.delete(c)}),function(a){return t.apply(this,arguments)})(Nm(r._databaseId,r._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class Av{constructor(e,t,a){this._delegate=t,this._persistenceProvider=a,this.INTERNAL={delete:()=>this.terminate()},e instanceof hu||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&ps("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,a={}){!function Np(r,e,t,a={}){var c;const f=(r=ii(r,Ld))._getSettings(),v=`${e}:${t}`;if("firestore.googleapis.com"!==f.host&&f.host!==v&&ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),r._setSettings(Object.assign(Object.assign({},f),{host:v,ssl:!1})),a.mockUserToken){let M,j;if("string"==typeof a.mockUserToken)M=a.mockUserToken,j=ns.MOCK_USER;else{M=(0,Fe.Sg)(a.mockUserToken,null===(c=r._app)||void 0===c?void 0:c.options.projectId);const q=a.mockUserToken.sub||a.mockUserToken.user_id;if(!q)throw new Tt(at.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");j=new ns(q)}r._authCredentials=new kl(new Jo(M,j))}}(this._delegate,e,t,a)}enableNetwork(){return function mv(r){return function y_(r){return r.asyncQueue.enqueue((0,Ue.Z)(function*(){const e=yield Fg(r),t=yield bp(r);return e.setNetworkEnabled(!0),function(a){const c=nn(a);return c.vu.delete(0),Hm(c)}(t)}))}(fo(r=ii(r,Os)))}(this._delegate)}disableNetwork(){return function C_(r){return function Cf(r){return r.asyncQueue.enqueue((0,Ue.Z)(function*(){const e=yield Fg(r),t=yield bp(r);return e.setNetworkEnabled(!1),(a=(0,Ue.Z)(function*(c){const f=nn(c);f.vu.add(0),yield Ql(f),f.bu.set("Offline")}),function(c){return a.apply(this,arguments)})(t);var a}))}(fo(r=ii(r,Os)))}(this._delegate)}enablePersistence(e){let t=!1,a=!1;return e&&(t=!!e.synchronizeTabs,a=!!e.experimentalForceOwningTab,hy("synchronizeTabs",t,"experimentalForceOwningTab",a)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,a)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function gv(r){return function(e){const t=new vr;return e.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return function vp(r,e){return Ba.apply(this,arguments)}(yield ly(e),t)})),t.promise}(fo(r=ii(r,Os)))}(this._delegate)}onSnapshotsInSync(e){return function $a(r,e){return function Vg(r,e){const t=new oa(e);return r.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return a=yield If(r),c=t,nn(a).ku.add(c),void c.next();var a,c})),()=>{t.Dc(),r.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return a=yield If(r),c=t,void nn(a).ku.delete(c);var a,c}))}}(fo(r=ii(r,Os)),kh(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new Tt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new rm(this,Hg(this._delegate,e))}catch(t){throw Al(t,"collection()","Firestore.collection()")}}doc(e){try{return new Nc(this,Ph(this._delegate,e))}catch(t){throw Al(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Rl(this,function __(r,e){if(r=ii(r,Ld),Ug("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Tt(at.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new aa(r,null,(t=e,new Wl($n.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Al(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function Cu(r,e,t){r=ii(r,Os);const a=Object.assign(Object.assign({},Iy),t);return function(c){if(c.maxAttempts<1)throw new Tt(at.INVALID_ARGUMENT,"Max attempts must be at least 1")}(a),function(c,f,v){const M=new vr;return c.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){const j=yield function uy(r){return Dp(r).then(e=>e.datastore)}(c);new wf(c.asyncQueue,j,v,f,M).run()})),M.promise}(fo(r),c=>e(new ic(r,c)),a)}(this._delegate,t=>e(new eE(this,t)))}batch(){return fo(this._delegate),new tE(new L_(this._delegate,e=>Ko(this._delegate,e)))}loadBundle(e){return function Df(r,e){const t=fo(r=ii(r,Os)),a=new v_;return function Sp(r,e,t,a){const c=function(f,v){let M;return M="string"==typeof f?Dn().encode(f):f,j=function(j,q){if(j instanceof Uint8Array)return Od(j,q);if(j instanceof ArrayBuffer)return Od(new Uint8Array(j),q);if(j instanceof ReadableStream)return j.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(M),new wu(j,v);var j}(t,hf(e));r.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){!function To(r,e,t){const a=nn(r);var c;(c=(0,Ue.Z)(function*(f,v,M){try{const j=yield v.getMetadata();if(yield function(nt,It){const Wt=nn(nt),pn=uo(It.createTime);return Wt.persistence.runTransaction("hasNewerBundle","readonly",_n=>Wt.qs.getBundleMetadata(_n,It.id)).then(_n=>!!_n&&_n.createTime.compareTo(pn)>=0)}(f.localStore,j))return yield v.close(),M._completeWith({taskState:"Success",documentsLoaded:(nt=j).totalDocuments,bytesLoaded:nt.totalBytes,totalDocuments:nt.totalDocuments,totalBytes:nt.totalBytes}),Promise.resolve(new Set);M._updateProgress(uv(j));const q=new lv(j,f.localStore,v.serializer);let ie=yield v.bc();for(;ie;){const nt=yield q.zu(ie);nt&&M._updateProgress(nt),ie=yield v.bc()}const we=yield q.complete();return yield ul(f,we.Ju,void 0),yield function(nt,It){const Wt=nn(nt);return Wt.persistence.runTransaction("Save bundle","readwrite",pn=>Wt.qs.saveBundleMetadata(pn,It))}(f.localStore,j),M._completeWith(we.progress),Promise.resolve(we.Hu)}catch(j){return ps("SyncEngine",`Loading bundle failed with ${j}`),M._failWith(j),Promise.resolve(new Set)}var nt}),function(f,v,M){return c.apply(this,arguments)})(a,e,t).then(c=>{a.sharedClientState.notifyBundleLoaded(c)})}(yield ly(r),c,a)}))}(t,r._databaseId,e,a),a}(this._delegate,e)}namedQuery(e){return function _v(r,e){return function Ap(r,e){return r.asyncQueue.enqueue((0,Ue.Z)(function*(){return function(t,a){const c=nn(t);return c.persistence.runTransaction("Get named query","readonly",f=>c.qs.getNamedQuery(f,a))}(yield Fd(r),e)}))}(fo(r=ii(r,Os)),e).then(t=>t?new aa(r,null,t.query):null)}(this._delegate,e).then(t=>t?new Rl(this,t):null)}}class Pf extends Xg{constructor(e){super(),this.firestore=e}convertBytes(e){return new tm(new ec(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return Nc.forKey(t,this.firestore,null)}}class eE{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new Pf(e)}get(e){const t=Of(e);return this._delegate.get(t).then(a=>new Bh(this._firestore,new O(this._firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,t.converter)))}set(e,t,a){const c=Of(e);return a?(Xv("Transaction.set",a),this._delegate.set(c,t,a)):this._delegate.set(c,t),this}update(e,t,a,...c){const f=Of(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,a,...c),this}delete(e){const t=Of(e);return this._delegate.delete(t),this}}class tE{constructor(e){this._delegate=e}set(e,t,a){const c=Of(e);return a?(Xv("WriteBatch.set",a),this._delegate.set(c,t,a)):this._delegate.set(c,t),this}update(e,t,a,...c){const f=Of(e);return 2===arguments.length?this._delegate.update(f,t):this._delegate.update(f,t,a,...c),this}delete(e){const t=Of(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Lp{constructor(e,t,a){this._firestore=e,this._userDataWriter=t,this._delegate=a}fromFirestore(e,t){const a=new G(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new Dy(this._firestore,a),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const a=Lp.INSTANCES;let c=a.get(e);c||(c=new WeakMap,a.set(e,c));let f=c.get(t);return f||(f=new Lp(e,new Pf(e),t),c.set(t,f)),f}}Lp.INSTANCES=new WeakMap;class Nc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pf(e)}static forPath(e,t,a){if(e.length%2!=0)throw new Tt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new Nc(t,new ys(t._delegate,a,new on(e)))}static forKey(e,t,a){return new Nc(t,new ys(t._delegate,a,e))}get id(){return this._delegate.id}get parent(){return new rm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new rm(this.firestore,Hg(this._delegate,e))}catch(t){throw Al(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,Fe.m9)(e))instanceof ys&&py(this._delegate,e)}set(e,t){t=Xv("DocumentReference.set",t);try{return t?Zr(this._delegate,e,t):Zr(this._delegate,e)}catch(a){throw Al(a,"setDoc()","DocumentReference.set()")}}update(e,t,...a){try{return 1===arguments.length?Wr(this._delegate,e):Wr(this._delegate,e,t,...a)}catch(c){throw Al(c,"updateDoc()","DocumentReference.update()")}}delete(){return function Ha(r){return Ko(ii(r.firestore,Os),[new Ec(r._key,ss.none())])}(this._delegate)}onSnapshot(...e){const t=nE(e),a=rE(e,c=>new Bh(this.firestore,new O(this.firestore._delegate,this._userDataWriter,c._key,c._document,c.metadata,this._delegate.converter)));return Wo(this._delegate,t,a)}get(e){let t;return t="cache"===e?.source?function Ze(r){r=ii(r,ys);const e=ii(r.firestore,Os),t=fo(e),a=new _t(e);return function pv(r,e){const t=new vr;return r.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return(a=(0,Ue.Z)(function*(c,f,v){try{const M=yield function(j,q){const ie=nn(j);return ie.persistence.runTransaction("read document","readonly",we=>ie.localDocuments.getDocument(we,q))}(c,f);M.isFoundDocument()?v.resolve(M):M.isNoDocument()?v.resolve(null):v.reject(new Tt(at.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(M){const j=Nd(M,`Failed to get document '${f} from cache`);v.reject(j)}}),function(c,f,v){return a.apply(this,arguments)})(yield Fd(r),e,t);var a})),t.promise}(t,r._key).then(c=>new O(e,a,r._key,c,new S(null!==c&&c.hasLocalMutations,!0),r.converter))}(this._delegate):"server"===e?.source?function Zt(r){r=ii(r,ys);const e=ii(r.firestore,Os);return Tp(fo(e),r._key,{source:"server"}).then(t=>rc(e,r,t))}(this._delegate):function qe(r){r=ii(r,ys);const e=ii(r.firestore,Os);return Tp(fo(e),r._key).then(t=>rc(e,r,t))}(this._delegate),t.then(a=>new Bh(this.firestore,new O(this.firestore._delegate,this._userDataWriter,a._key,a._document,a.metadata,this._delegate.converter)))}withConverter(e){return new Nc(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Al(r,e,t){return r.message=r.message.replace(e,t),r}function nE(r){for(const e of r)if("object"==typeof e&&!nm(e))return e;return{}}function rE(r,e){var t,a;let c;return c=nm(r[0])?r[0]:nm(r[1])?r[1]:"function"==typeof r[0]?{next:r[0],error:r[1],complete:r[2]}:{next:r[1],error:r[2],complete:r[3]},{next:f=>{c.next&&c.next(e(f))},error:null===(t=c.error)||void 0===t?void 0:t.bind(c),complete:null===(a=c.complete)||void 0===a?void 0:a.bind(c)}}class Bh{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new Nc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return Te(this._delegate,e._delegate)}}class Dy extends Bh{data(e){const t=this._delegate.data(e);return function oc(r,e){r||Ot()}(void 0!==t),t}}class Rl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new Pf(e)}where(e,t,a){try{return new Rl(this.firestore,Bd(this._delegate,function Iv(r,e,t){const a=e,c=kp("where",r);return Af._create(c,a,t)}(e,t,a)))}catch(c){throw Al(c,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Rl(this.firestore,Bd(this._delegate,function R_(r,e="asc"){const t=e,a=kp("orderBy",r);return Mf._create(a,t)}(e,t)))}catch(a){throw Al(a,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Rl(this.firestore,Bd(this._delegate,function M_(r){return nd("limit",r),qg._create("limit",r,"F")}(e)))}catch(t){throw Al(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Rl(this.firestore,Bd(this._delegate,function Dv(r){return nd("limitToLast",r),qg._create("limitToLast",r,"L")}(e)))}catch(t){throw Al(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Rl(this.firestore,Bd(this._delegate,function bv(...r){return Zg._create("startAt",r,!0)}(...e)))}catch(t){throw Al(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Rl(this.firestore,Bd(this._delegate,function Tv(...r){return Zg._create("startAfter",r,!1)}(...e)))}catch(t){throw Al(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Rl(this.firestore,Bd(this._delegate,function Sv(...r){return Yg._create("endBefore",r,!1)}(...e)))}catch(t){throw Al(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Rl(this.firestore,Bd(this._delegate,function x_(...r){return Yg._create("endAt",r,!0)}(...e)))}catch(t){throw Al(t,"endAt()","Query.endAt()")}}isEqual(e){return Oh(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function Cr(r){r=ii(r,aa);const e=ii(r.firestore,Os),t=fo(e),a=new _t(e);return function Lg(r,e){const t=new vr;return r.asyncQueue.enqueueAndForget((0,Ue.Z)(function*(){return(a=(0,Ue.Z)(function*(c,f,v){try{const M=yield Ch(c,f,!0),j=new d_(f,M.ir),q=j.sc(M.documents),ie=j.applyChanges(q,!1);v.resolve(ie.snapshot)}catch(M){const j=Nd(M,`Failed to execute query '${f} against cache`);v.reject(j)}}),function(c,f,v){return a.apply(this,arguments)})(yield Fd(r),e,t);var a})),t.promise}(t,r._query).then(c=>new Q(e,a,r,c))}(this._delegate):"server"===e?.source?function Vr(r){r=ii(r,aa);const e=ii(r.firestore,Os),t=fo(e),a=new _t(e);return Nh(t,r._query,{source:"server"}).then(c=>new Q(e,a,r,c))}(this._delegate):function Tn(r){r=ii(r,aa);const e=ii(r.firestore,Os),t=fo(e),a=new _t(e);return Fp(r._query),Nh(t,r._query).then(c=>new Q(e,a,r,c))}(this._delegate),t.then(a=>new V_(this.firestore,new Q(this.firestore._delegate,this._userDataWriter,this._delegate,a._snapshot)))}onSnapshot(...e){const t=nE(e),a=rE(e,c=>new V_(this.firestore,new Q(this.firestore._delegate,this._userDataWriter,this._delegate,c._snapshot)));return Wo(this._delegate,t,a)}withConverter(e){return new Rl(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}class FE{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new Dy(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class V_{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Rl(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new Dy(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new FE(this._firestore,t))}forEach(e,t){this._delegate.forEach(a=>{e.call(t,new Dy(this._firestore,a))})}isEqual(e){return Te(this._delegate,e._delegate)}}class rm extends Rl{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new Nc(this.firestore,e):null}doc(e){try{return new Nc(this.firestore,void 0===e?Ph(this._delegate):Ph(this._delegate,e))}catch(t){throw Al(t,"doc()","CollectionReference.doc()")}}add(e){return function ei(r,e){const t=ii(r.firestore,Os),a=Ph(r),c=xf(r.converter,e);return Ko(t,[Vd(Mc(r.firestore),"addDoc",a._key,c,null!==r.converter,{}).toMutation(a._key,ss.exists(!1))]).then(()=>a)}(this._delegate,e).then(t=>new Nc(this.firestore,t))}isEqual(e){return py(this._delegate,e._delegate)}withConverter(e){return new rm(this.firestore,this._delegate.withConverter(e?Lp.getInstance(this.firestore,e):null))}}function Of(r){return ii(r,ys)}class Rv{constructor(...e){this._delegate=new rd(...e)}static documentId(){return new Rv(_i.keyField().canonicalString())}isEqual(e){return(e=(0,Fe.m9)(e))instanceof rd&&this._delegate._internalPath.isEqual(e._internalPath)}}class jh{constructor(e){this._delegate=e}static serverTimestamp(){const e=function Cy(){return new yy("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new jh(e)}static delete(){const e=function em(){return new Lh("deleteField")}();return e._methodName="FieldValue.delete",new jh(e)}static arrayUnion(...e){const t=function Zv(...r){return new Pp("arrayUnion",r)}(...e);return t._methodName="FieldValue.arrayUnion",new jh(t)}static arrayRemove(...e){const t=function Yv(...r){return new Op("arrayRemove",r)}(...e);return t._methodName="FieldValue.arrayRemove",new jh(t)}static increment(e){const t=function Qv(r){return new wv("increment",r)}(e);return t._methodName="FieldValue.increment",new jh(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const LE={Firestore:Av,GeoPoint:Tl,Timestamp:Qr,Blob:tm,Transaction:eE,WriteBatch:tE,DocumentReference:Nc,DocumentSnapshot:Bh,Query:Rl,QueryDocumentSnapshot:Dy,QuerySnapshot:V_,CollectionReference:rm,FieldPath:Rv,FieldValue:jh,setLogLevel:function kE(r){!function Ol(r){bs.setLogLevel(r)}(r)},CACHE_SIZE_UNLIMITED:-1};!function sE(r){(function iE(r,e){r.INTERNAL.registerComponent(new it.wA("firestore-compat",t=>{const a=t.getProvider("app-compat").getImmediate(),c=t.getProvider("firestore").getImmediate();return e(a,c)},"PUBLIC").setServiceProps(Object.assign({},LE)))})(r,(e,t)=>new Av(e,t,new OE)),r.registerVersion("@firebase/firestore-compat","0.3.12")}(dt.Z);var Hh=z(1205),VE=z(6217);function oE(r,e){return function Mv(r,e=Y.z){return new X.y(t=>{let a;return null!=e?e.schedule(()=>{a=r.onSnapshot({includeMetadataChanges:!0},t)}):a=r.onSnapshot({includeMetadataChanges:!0},t),()=>{a?.()}})}(r,e)}function xv(r,e){return oE(r,e).pipe((0,pe.U)(t=>({payload:t,type:"query"})))}function U_(r,e){return xv(r,e).pipe((0,Ve.O)(void 0),ye(),(0,pe.U)(([t,a])=>{const c=a.payload.docChanges(),f=c.map(v=>({type:v.type,payload:v}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(a.payload.metadata)&&a.payload.docs.forEach((v,M)=>{const j=c.find(ie=>ie.doc.ref.isEqual(v.ref)),q=t?.payload.docs.find(ie=>ie.ref.isEqual(v.ref));j&&JSON.stringify(j.doc.metadata)===JSON.stringify(v.metadata)||!j&&q&&JSON.stringify(q.metadata)===JSON.stringify(v.metadata)||f.push({type:"modified",payload:{oldIndex:M,newIndex:M,type:"modified",doc:v}})}),f}))}function lE(r,e,t){return U_(r,t).pipe((0,Se.R)((a,c)=>function UE(r,e,t){return e.forEach(a=>{t.indexOf(a.type)>-1&&(r=function BE(r,e){switch(e.type){case"added":if(!r[e.newIndex]||!r[e.newIndex].doc.ref.isEqual(e.doc.ref))return Nv(r,e.newIndex,0,e);break;case"modified":if(null==r[e.oldIndex]||r[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=r.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return Nv(r,e.newIndex,1,e)}break;case"removed":if(r[e.oldIndex]&&r[e.oldIndex].doc.ref.isEqual(e.doc.ref))return Nv(r,e.oldIndex,1)}return r}(r,a))}),r}(a,c.map(f=>f.payload),e),[]),(0,Rt.x)(),(0,pe.U)(a=>a.map(c=>({type:c.type,payload:c}))))}function Nv(r,e,t,...a){const c=r.slice();return c.splice(e,t,...a),c}function uE(r){return(!r||0===r.length)&&(r=["added","removed","modified"]),r}z(9260);class cE{constructor(e,t,a){this.ref=e,this.query=t,this.afs=a}stateChanges(e){let t=U_(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,pe.U)(a=>a.filter(c=>e.indexOf(c.type)>-1)))),t.pipe((0,Ve.O)(void 0),ye(),(0,vt.h)(([a,c])=>c.length>0||!a),(0,pe.U)(([a,c])=>c),Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Se.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=uE(e);return lE(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return xv(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(t=>t.payload.docs.map(a=>e.idField?Object.assign(Object.assign({},a.data()),{[e.idField]:a.id}):a.data())),Ne.iC)}get(e){return(0,Re.D)(this.query.get(e)).pipe(Ne.iC)}add(e){return this.ref.add(e)}doc(e){return new Pv(this.ref.doc(e),this.afs)}}class Pv{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const a=this.ref.collection(e),{ref:c,query:f}=fE(a,t);return new cE(c,f,this.afs)}snapshotChanges(){return function aE(r,e){return oE(r,e).pipe((0,Ve.O)(void 0),ye(),(0,pe.U)(([t,a])=>a.exists?t?.exists?{payload:a,type:"modified"}:{payload:a,type:"added"}:{payload:a,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,pe.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,Re.D)(this.ref.get(e)).pipe(Ne.iC)}}class dE{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?U_(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(t=>t.filter(a=>e.indexOf(a.type)>-1)),(0,vt.h)(t=>t.length>0),Ne.iC):U_(this.query,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,Se.R)((t,a)=>[...t,...a],[]))}snapshotChanges(e){const t=uE(e);return lE(this.query,t,this.afs.schedulers.outsideAngular).pipe(Ne.iC)}valueChanges(e={}){return xv(this.query,this.afs.schedulers.outsideAngular).pipe((0,pe.U)(a=>a.payload.docs.map(c=>e.idField?Object.assign({[e.idField]:c.id},c.data()):c.data())),Ne.iC)}get(e){return(0,Re.D)(this.query.get(e)).pipe(Ne.iC)}}const jE=new w.OlP("angularfire2.enableFirestorePersistence"),HE=new w.OlP("angularfire2.firestore.persistenceSettings"),hE=new w.OlP("angularfire2.firestore.settings"),$E=new w.OlP("angularfire2.firestore.use-emulator");function fE(r,e=(t=>t)){return{query:e(r),ref:r}}let GE=(()=>{class r{constructor(t,a,c,f,v,M,j,q,ie,we,nt,It,Wt,pn,_n,Ur,Ei){this.schedulers=j;const Br=(0,ct.on)(t,M,a),Xs=ie;we&&(0,Hh.nw)(Br,M,nt,Wt,pn,_n,It,Ur),[this.firestore,this.persistenceEnabled$]=(0,ct.cc)(`${Br.name}.firestore`,"AngularFirestore",Br.name,()=>{const ks=M.runOutsideAngular(()=>Br.firestore());if(f&&ks.settings(f),Xs&&ks.useEmulator(...Xs),c&&!(0,$t.PM)(v)){const Ms=()=>{try{return(0,Re.D)(ks.enablePersistence(q||void 0).then(()=>!0,()=>!1))}catch(Ml){return typeof console<"u"&&console.warn(Ml),(0,Ce.of)(!1)}};return[ks,M.runOutsideAngular(Ms)]}return[ks,(0,Ce.of)(!1)]},[f,Xs,c])}collection(t,a){let c;c="string"==typeof t?this.firestore.collection(t):t;const{ref:f,query:v}=fE(c,a),M=this.schedulers.ngZone.run(()=>f);return new cE(M,v,this)}collectionGroup(t,a){const c=a||(v=>v),f=this.firestore.collectionGroup(t);return new dE(c(f),this)}doc(t){let a;a="string"==typeof t?this.firestore.doc(t):t;const c=this.schedulers.ngZone.run(()=>a);return new Pv(c,this)}createId(){return this.firestore.collection("_").doc().id}}return r.\u0275fac=function(t){return new(t||r)(w.LFG(ct.Dh),w.LFG(ct.xv,8),w.LFG(jE,8),w.LFG(hE,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Ne.HU),w.LFG(HE,8),w.LFG($E,8),w.LFG(Hh.zQ,8),w.LFG(Hh.Qv,8),w.LFG(Hh.L6,8),w.LFG(Hh._Q,8),w.LFG(Hh.rT,8),w.LFG(Hh.lh,8),w.LFG(Hh.f7,8),w.LFG(VE.nm,8))},r.\u0275prov=w.Yz7({token:r,factory:r.\u0275fac,providedIn:"any"}),r})();var Ov=z(7001);let gE=(()=>{class r{constructor(t,a,c,f){this.afs=t,this.afAuth=a,this.router=c,this.ngZone=f,this.afAuth.authState.subscribe(v=>{v?(this.userData=v,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}signIn(t,a){return this.afAuth.signInWithEmailAndPassword(t,a).then(c=>{console.log("result",c),this.afAuth.authState.subscribe(f=>{f&&(localStorage.setItem("loggedIn","true"),this.router.navigate(["/dashboard"]))})}).catch(c=>{window.alert(c.message)})}signUp(t,a){return this.afAuth.createUserWithEmailAndPassword(t,a).then(c=>{console.log(c),this.SendVerificationMail()}).catch(c=>{window.alert(c.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>t.sendEmailVerification()).then(()=>{this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(a=>{window.alert(a)})}get isLoggedIn(){return JSON.parse(localStorage.getItem("loggedIn"))}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),localStorage.removeItem("loggedIn"),this.router.navigate(["/auth"])})}}return r.\u0275fac=function(t){return new(t||r)(w.LFG(GE),w.LFG(Hh.zQ),w.LFG(Ov.F0),w.LFG(w.R0b))},r.\u0275prov=w.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})()},4766:(rn,ot,z)=>{z.d(ot,{N:()=>w});const w={production:!0,projectName:"Test",domain:"http://localhost:3000",firebaseConfig:{apiKey:"AIzaSyBODnFqRFLG0dpOSYKIZ0RUulDb3GYrPg4",authDomain:"angular-firebase-f8eb1.firebaseapp.com",projectId:"angular-firebase-f8eb1",storageBucket:"angular-firebase-f8eb1.appspot.com",messagingSenderId:"71816398417",appId:"1:71816398417:web:330a9f6d61a762fa129a70",measurementId:"G-K2464JBSWQ"}}},3269:(rn,ot,z)=>{var w=z(1481),Y=z(4650),X=z(7001);const Ce=[{path:"auth",children:[{path:"",loadChildren:()=>z.e(299).then(z.bind(z,6299)).then(u=>u.AuthModule)}]},{path:"",canActivate:[z(6159).a],children:[{path:"",loadChildren:()=>z.e(218).then(z.bind(z,8218)).then(u=>u.ModulesModule)}]}];let Ne=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=Y.oAB({type:u}),u.\u0275inj=Y.cJS({imports:[X.Bz.forRoot(Ce,{initialNavigation:"enabledBlocking"}),X.Bz]}),u})(),Ve=(()=>{class u{constructor(){this.title="emission-calculator"}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275cmp=Y.Xpm({type:u,selectors:[["app-root"]],decls:1,vars:0,template:function(o,d){1&o&&Y._UZ(0,"router-outlet")},dependencies:[X.lC]}),u})();var Ge=z(529),Ye=z(433),ye=z(4766),pe=z(2011),Se=z(4986),Rt=z(9751),vt=z(9646),ct=z(6451),$t=z(4004),pt=z(3099),dt=z(3900),Ue=z(5026),an=z(1884),it=z(4482),De=z(5403),Fe=z(8421),At=z(4671),Et=z(5032),We=z(7669),Dt=z(4976),Ht=(z(2644),z(3942)),Dr=z(4859),si=z(5861),kn=z(6881),se=z(2090),Ae=z(1877);const Me="@firebase/database";let tt="";function gt(u){tt=u}class et{constructor(i){this.domStorage_=i,this.prefix_="firebase:"}set(i,o){null==o?this.domStorage_.removeItem(this.prefixedName_(i)):this.domStorage_.setItem(this.prefixedName_(i),(0,se.Wl)(o))}get(i){const o=this.domStorage_.getItem(this.prefixedName_(i));return null==o?null:(0,se.cI)(o)}remove(i){this.domStorage_.removeItem(this.prefixedName_(i))}prefixedName_(i){return this.prefix_+i}toString(){return this.domStorage_.toString()}}class zt{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(i,o){null==o?delete this.cache_[i]:this.cache_[i]=o}get(i){return(0,se.r3)(this.cache_,i)?this.cache_[i]:null}remove(i){delete this.cache_[i]}}const dn=function(u){try{if(typeof window<"u"&&typeof window[u]<"u"){const i=window[u];return i.setItem("firebase:sentinel","cache"),i.removeItem("firebase:sentinel"),new et(i)}}catch{}return new zt},En=dn("localStorage"),un=dn("sessionStorage"),Mn=new Ae.Yd("@firebase/database"),fr=function(){let u=1;return function(){return u++}}(),Hn=function(u){const i=(0,se.dS)(u),o=new se.gQ;o.update(i);const d=o.digest();return se.US.encodeByteArray(d)},Xn=function(...u){let i="";for(let o=0;o<u.length;o++){const d=u[o];Array.isArray(d)||d&&"object"==typeof d&&"number"==typeof d.length?i+=Xn.apply(null,d):i+="object"==typeof d?(0,se.Wl)(d):d,i+=" "}return i};let Jt=null,cr=!0;const kr=function(u,i){(0,se.hu)(!i||!0===u||!1===u,"Can't turn on custom loggers persistently."),!0===u?(Mn.logLevel=Ae.in.VERBOSE,Jt=Mn.log.bind(Mn),i&&un.set("logging_enabled",!0)):"function"==typeof u?Jt=u:(Jt=null,un.remove("logging_enabled"))},Fn=function(...u){if(!0===cr&&(cr=!1,null===Jt&&!0===un.get("logging_enabled")&&kr(!0)),Jt){const i=Xn.apply(null,u);Jt(i)}},Ut=function(u){return function(...i){Fn(u,...i)}},wr=function(...u){const i="FIREBASE INTERNAL ERROR: "+Xn(...u);Mn.error(i)},An=function(...u){const i=`FIREBASE FATAL ERROR: ${Xn(...u)}`;throw Mn.error(i),new Error(i)},er=function(...u){const i="FIREBASE WARNING: "+Xn(...u);Mn.warn(i)},xi=function(u){return"number"==typeof u&&(u!=u||u===Number.POSITIVE_INFINITY||u===Number.NEGATIVE_INFINITY)},Qe="[MIN_NAME]",ge="[MAX_NAME]",he=function(u,i){if(u===i)return 0;if(u===Qe||i===ge)return-1;if(i===Qe||u===ge)return 1;{const o=$r(u),d=$r(i);return null!==o?null!==d?o-d==0?u.length-i.length:o-d:-1:null!==d?1:u<i?-1:1}},ht=function(u,i){return u===i?0:u<i?-1:1},mt=function(u,i){if(i&&u in i)return i[u];throw new Error("Missing required key ("+u+") in object: "+(0,se.Wl)(i))},cn=function(u){if("object"!=typeof u||null===u)return(0,se.Wl)(u);const i=[];for(const d in u)i.push(d);i.sort();let o="{";for(let d=0;d<i.length;d++)0!==d&&(o+=","),o+=(0,se.Wl)(i[d]),o+=":",o+=cn(u[i[d]]);return o+="}",o},Rn=function(u,i){const o=u.length;if(o<=i)return[u];const d=[];for(let g=0;g<o;g+=i)d.push(u.substring(g,g+i>o?o:g+i));return d};function wn(u,i){for(const o in u)u.hasOwnProperty(o)&&i(o,u[o])}const jt=function(u){(0,se.hu)(!xi(u),"Invalid JSON number");const d=1023;let g,E,S,O,G;0===u?(E=0,S=0,g=1/u==-1/0?1:0):(g=u<0,(u=Math.abs(u))>=Math.pow(2,1-d)?(O=Math.min(Math.floor(Math.log(u)/Math.LN2),d),E=O+d,S=Math.round(u*Math.pow(2,52-O)-Math.pow(2,52))):(E=0,S=Math.round(u/Math.pow(2,-1074))));const Q=[];for(G=52;G;G-=1)Q.push(S%2?1:0),S=Math.floor(S/2);for(G=11;G;G-=1)Q.push(E%2?1:0),E=Math.floor(E/2);Q.push(g?1:0),Q.reverse();const Ee=Q.join("");let Te="";for(G=0;G<64;G+=8){let qe=parseInt(Ee.substr(G,8),2).toString(16);1===qe.length&&(qe="0"+qe),Te+=qe}return Te.toLowerCase()},Vn=new RegExp("^-?(0*)\\d{1,10}$"),$r=function(u){if(Vn.test(u)){const i=Number(u);if(i>=-2147483648&&i<=2147483647)return i}return null},br=function(u){try{u()}catch(i){setTimeout(()=>{throw er("Exception was thrown by user callback.",i.stack||""),i},Math.floor(0))}},li=function(u,i){const o=setTimeout(u,i);return"number"==typeof o&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(o):"object"==typeof o&&o.unref&&o.unref(),o};class jr{constructor(i,o){this.appName_=i,this.appCheckProvider=o,this.appCheck=o?.getImmediate({optional:!0}),this.appCheck||o?.get().then(d=>this.appCheck=d)}getToken(i){return this.appCheck?this.appCheck.getToken(i):new Promise((o,d)=>{setTimeout(()=>{this.appCheck?this.getToken(i).then(o,d):o(null)},0)})}addTokenChangeListener(i){var o;null===(o=this.appCheckProvider)||void 0===o||o.get().then(d=>d.addTokenListener(i))}notifyForInvalidToken(){er(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class Jr{constructor(i,o,d){this.appName_=i,this.firebaseOptions_=o,this.authProvider_=d,this.auth_=null,this.auth_=d.getImmediate({optional:!0}),this.auth_||d.onInit(g=>this.auth_=g)}getToken(i){return this.auth_?this.auth_.getToken(i).catch(o=>o&&"auth/token-not-initialized"===o.code?(Fn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(o)):new Promise((o,d)=>{setTimeout(()=>{this.auth_?this.getToken(i).then(o,d):o(null)},0)})}addTokenChangeListener(i){this.auth_?this.auth_.addAuthTokenListener(i):this.authProvider_.get().then(o=>o.addAuthTokenListener(i))}removeTokenChangeListener(i){this.authProvider_.get().then(o=>o.removeAuthTokenListener(i))}notifyForInvalidToken(){let i='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';i+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',er(i)}}let ti=(()=>{class u{constructor(o){this.accessToken=o}getToken(o){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(o){o(this.accessToken)}removeTokenChangeListener(o){}notifyForInvalidToken(){}}return u.OWNER="owner",u})();const Gt=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,de="websocket",ue="long_polling";class oe{constructor(i,o,d,g,E=!1,S="",O=!1,G=!1){this.secure=o,this.namespace=d,this.webSocketOnly=g,this.nodeAdmin=E,this.persistenceKey=S,this.includeNamespaceInQueryParams=O,this.isUsingEmulator=G,this._host=i.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=En.get("host:"+i)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(i){i!==this.internalHost&&(this.internalHost=i,this.isCacheableHost()&&En.set("host:"+this._host,this.internalHost))}toString(){let i=this.toURLString();return this.persistenceKey&&(i+="<"+this.persistenceKey+">"),i}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Ct(u,i,o){let d;if((0,se.hu)("string"==typeof i,"typeof type must == string"),(0,se.hu)("object"==typeof o,"typeof params must == object"),i===de)d=(u.secure?"wss://":"ws://")+u.internalHost+"/.ws?";else{if(i!==ue)throw new Error("Unknown connection type: "+i);d=(u.secure?"https://":"http://")+u.internalHost+"/.lp?"}(function Be(u){return u.host!==u.internalHost||u.isCustomHost()||u.includeNamespaceInQueryParams})(u)&&(o.ns=u.namespace);const g=[];return wn(o,(E,S)=>{g.push(E+"="+S)}),d+g.join("&")}class sn{constructor(){this.counters_={}}incrementCounter(i,o=1){(0,se.r3)(this.counters_,i)||(this.counters_[i]=0),this.counters_[i]+=o}get(){return(0,se.p$)(this.counters_)}}const xn={},He={};function je(u){const i=u.toString();return xn[i]||(xn[i]=new sn),xn[i]}class Pt{constructor(i){this.onMessage_=i,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(i,o){this.closeAfterResponse=i,this.onClose=o,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(i,o){for(this.pendingResponses[i]=o;this.pendingResponses[this.currentResponseNum];){const d=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let g=0;g<d.length;++g)d[g]&&br(()=>{this.onMessage_(d[g])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Fi{constructor(i,o,d,g,E,S,O){this.connId=i,this.repoInfo=o,this.applicationId=d,this.appCheckToken=g,this.authToken=E,this.transportSessionId=S,this.lastSessionId=O,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ut(i),this.stats_=je(o),this.urlFn=G=>(this.appCheckToken&&(G.ac=this.appCheckToken),Ct(o,ue,G))}open(i,o){this.curSegmentNum=0,this.onDisconnect_=o,this.myPacketOrderer=new Pt(i),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(u){if((0,se.Yr)()||"complete"===document.readyState)u();else{let i=!1;const o=function(){document.body?i||(i=!0,u()):setTimeout(o,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",o,!1),window.addEventListener("load",o,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&o()}),window.attachEvent("onload",o))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gi((...E)=>{const[S,O,G,Q,Ee]=E;if(this.incrementIncomingBytes_(E),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===S)this.id=O,this.password=G;else{if("close"!==S)throw new Error("Unrecognized command received: "+S);O?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(O,()=>{this.onClosed_()})):this.onClosed_()}},(...E)=>{const[S,O]=E;this.incrementIncomingBytes_(E),this.myPacketOrderer.handleResponse(S,O)},()=>{this.onClosed_()},this.urlFn);const d={start:"t"};d.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(d.cb=this.scriptTagHolder.uniqueCallbackIdentifier),d.v="5",this.transportSessionId&&(d.s=this.transportSessionId),this.lastSessionId&&(d.ls=this.lastSessionId),this.applicationId&&(d.p=this.applicationId),this.appCheckToken&&(d.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&Gt.test(location.hostname)&&(d.r="f");const g=this.urlFn(d);this.log_("Connecting via long-poll to "+g),this.scriptTagHolder.addTag(g,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Fi.forceAllow_=!0}static forceDisallow(){Fi.forceDisallow_=!0}static isAvailable(){return!((0,se.Yr)()||!Fi.forceAllow_&&(Fi.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(i){const o=(0,se.Wl)(i);this.bytesSent+=o.length,this.stats_.incrementCounter("bytes_sent",o.length);const d=(0,se.h$)(o),g=Rn(d,1840);for(let E=0;E<g.length;E++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,g.length,g[E]),this.curSegmentNum++}addDisconnectPingFrame(i,o){if((0,se.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const d={dframe:"t"};d.id=i,d.pw=o,this.myDisconnFrame.src=this.urlFn(d),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(i){const o=(0,se.Wl)(i).length;this.bytesReceived+=o,this.stats_.incrementCounter("bytes_received",o)}}class gi{constructor(i,o,d,g){if(this.onDisconnect=d,this.urlFn=g,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,se.Yr)())this.commandCB=i,this.onMessageCB=o;else{this.uniqueCallbackIdentifier=fr(),window["pLPCommand"+this.uniqueCallbackIdentifier]=i,window["pRTLPCB"+this.uniqueCallbackIdentifier]=o,this.myIFrame=gi.createIFrame_();let E="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(E='<script>document.domain="'+document.domain+'";<\/script>');const S="<html><body>"+E+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(S),this.myIFrame.doc.close()}catch(O){Fn("frame writing exception"),O.stack&&Fn(O.stack),Fn(O)}}}static createIFrame_(){const i=document.createElement("iframe");if(i.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(i);try{i.contentWindow.document||Fn("No IE domain setting required")}catch{const d=document.domain;i.src="javascript:void((function(){document.open();document.domain='"+d+"';document.close();})())"}return i.contentDocument?i.doc=i.contentDocument:i.contentWindow?i.doc=i.contentWindow.document:i.document&&(i.doc=i.document),i}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const i=this.onDisconnect;i&&(this.onDisconnect=null,i())}startLongPoll(i,o){for(this.myID=i,this.myPW=o,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const i={};i.id=this.myID,i.pw=this.myPW,i.ser=this.currentSerial;let o=this.urlFn(i),d="",g=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+d.length<=1870;){const S=this.pendingSegs.shift();d=d+"&seg"+g+"="+S.seg+"&ts"+g+"="+S.ts+"&d"+g+"="+S.d,g++}return o+=d,this.addLongPollTag_(o,this.currentSerial),!0}return!1}enqueueSegment(i,o,d){this.pendingSegs.push({seg:i,ts:o,d}),this.alive&&this.newRequest_()}addLongPollTag_(i,o){this.outstandingRequests.add(o);const d=()=>{this.outstandingRequests.delete(o),this.newRequest_()},g=setTimeout(d,Math.floor(25e3));this.addTag(i,()=>{clearTimeout(g),d()})}addTag(i,o){(0,se.Yr)()?this.doNodeLongPoll(i,o):setTimeout(()=>{try{if(!this.sendNewPolls)return;const d=this.myIFrame.doc.createElement("script");d.type="text/javascript",d.async=!0,d.src=i,d.onload=d.onreadystatechange=function(){const g=d.readyState;(!g||"loaded"===g||"complete"===g)&&(d.onload=d.onreadystatechange=null,d.parentNode&&d.parentNode.removeChild(d),o())},d.onerror=()=>{Fn("Long-poll script failed to load: "+i),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(d)}catch{}},Math.floor(1))}}let ui=null;typeof MozWebSocket<"u"?ui=MozWebSocket:typeof WebSocket<"u"&&(ui=WebSocket);let Qi=(()=>{class u{constructor(o,d,g,E,S,O,G){this.connId=o,this.applicationId=g,this.appCheckToken=E,this.authToken=S,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ut(this.connId),this.stats_=je(d),this.connURL=u.connectionURL_(d,O,G,E,g),this.nodeAdmin=d.nodeAdmin}static connectionURL_(o,d,g,E,S){const O={v:"5"};return!(0,se.Yr)()&&typeof location<"u"&&location.hostname&&Gt.test(location.hostname)&&(O.r="f"),d&&(O.s=d),g&&(O.ls=g),E&&(O.ac=E),S&&(O.p=S),Ct(o,de,O)}open(o,d){this.onDisconnect=d,this.onMessage=o,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,En.set("previous_websocket_failure",!0);try{let g;if((0,se.Yr)()){g={headers:{"User-Agent":`Firebase/5/${tt}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(g.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(g.headers["X-Firebase-AppCheck"]=this.appCheckToken);const S=process.env,O=0===this.connURL.indexOf("wss://")?S.HTTPS_PROXY||S.https_proxy:S.HTTP_PROXY||S.http_proxy;O&&(g.proxy={origin:O})}this.mySock=new ui(this.connURL,[],g)}catch(g){this.log_("Error instantiating WebSocket.");const E=g.message||g.data;return E&&this.log_(E),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=g=>{this.handleIncomingFrame(g)},this.mySock.onerror=g=>{this.log_("WebSocket error.  Closing connection.");const E=g.message||g.data;E&&this.log_(E),this.onClosed_()}}start(){}static forceDisallow(){u.forceDisallow_=!0}static isAvailable(){let o=!1;if(typeof navigator<"u"&&navigator.userAgent){const g=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);g&&g.length>1&&parseFloat(g[1])<4.4&&(o=!0)}return!o&&null!==ui&&!u.forceDisallow_}static previouslyFailed(){return En.isInMemoryStorage||!0===En.get("previous_websocket_failure")}markConnectionHealthy(){En.remove("previous_websocket_failure")}appendFrame_(o){if(this.frames.push(o),this.frames.length===this.totalFrames){const d=this.frames.join("");this.frames=null;const g=(0,se.cI)(d);this.onMessage(g)}}handleNewFrameCount_(o){this.totalFrames=o,this.frames=[]}extractFrameCount_(o){if((0,se.hu)(null===this.frames,"We already have a frame buffer"),o.length<=6){const d=Number(o);if(!isNaN(d))return this.handleNewFrameCount_(d),null}return this.handleNewFrameCount_(1),o}handleIncomingFrame(o){if(null===this.mySock)return;const d=o.data;if(this.bytesReceived+=d.length,this.stats_.incrementCounter("bytes_received",d.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(d);else{const g=this.extractFrameCount_(d);null!==g&&this.appendFrame_(g)}}send(o){this.resetKeepAlive();const d=(0,se.Wl)(o);this.bytesSent+=d.length,this.stats_.incrementCounter("bytes_sent",d.length);const g=Rn(d,16384);g.length>1&&this.sendString_(String(g.length));for(let E=0;E<g.length;E++)this.sendString_(g[E])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(o){try{this.mySock.send(o)}catch(d){this.log_("Exception thrown from WebSocket.send():",d.message||d.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return u.responsesRequiredToBeHealthy=2,u.healthyTimeout=3e4,u})(),xs=(()=>{class u{constructor(o){this.initTransports_(o)}static get ALL_TRANSPORTS(){return[Fi,Qi]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(o){const d=Qi&&Qi.isAvailable();let g=d&&!Qi.previouslyFailed();if(o.webSocketOnly&&(d||er("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),g=!0),g)this.transports_=[Qi];else{const E=this.transports_=[];for(const S of u.ALL_TRANSPORTS)S&&S.isAvailable()&&E.push(S);u.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return u.globalTransportInitialized_=!1,u})();class wt{constructor(i,o,d,g,E,S,O,G,Q,Ee){this.id=i,this.repoInfo_=o,this.applicationId_=d,this.appCheckToken_=g,this.authToken_=E,this.onMessage_=S,this.onReady_=O,this.onDisconnect_=G,this.onKill_=Q,this.lastSessionId=Ee,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ut("c:"+this.id+":"),this.transportManager_=new xs(o),this.log_("Connection created"),this.start_()}start_(){const i=this.transportManager_.initialTransport();this.conn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.conn_),d=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(o,d)},Math.floor(0));const g=i.healthyTimeout||0;g>0&&(this.healthyTimeout_=li(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(g)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(i){return o=>{i===this.conn_?this.onConnectionLost_(o):i===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(i){return o=>{2!==this.state_&&(i===this.rx_?this.onPrimaryMessageReceived_(o):i===this.secondaryConn_?this.onSecondaryMessageReceived_(o):this.log_("message on old connection"))}}sendRequest(i){this.sendData_({t:"d",d:i})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(i){if("t"in i){const o=i.t;"a"===o?this.upgradeIfSecondaryHealthy_():"r"===o?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===o&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(i){const o=mt("t",i),d=mt("d",i);if("c"===o)this.onSecondaryControl_(d);else{if("d"!==o)throw new Error("Unknown protocol layer: "+o);this.pendingDataMessages.push(d)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(i){const o=mt("t",i),d=mt("d",i);"c"===o?this.onControl_(d):"d"===o&&this.onDataMessage_(d)}onDataMessage_(i){this.onPrimaryResponse_(),this.onMessage_(i)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(i){const o=mt("t",i);if("d"in i){const d=i.d;if("h"===o){const g=Object.assign({},d);this.repoInfo_.isUsingEmulator&&(g.h=this.repoInfo_.host),this.onHandshake_(g)}else if("n"===o){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let g=0;g<this.pendingDataMessages.length;++g)this.onDataMessage_(this.pendingDataMessages[g]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===o?this.onConnectionShutdown_(d):"r"===o?this.onReset_(d):"e"===o?wr("Server Error: "+d):"o"===o?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):wr("Unknown control packet command: "+o)}}onHandshake_(i){const o=i.ts,d=i.v,g=i.h;this.sessionId=i.s,this.repoInfo_.host=g,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,o),"5"!==d&&er("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const i=this.transportManager_.upgradeTransport();i&&this.startUpgrade_(i)}startUpgrade_(i){this.secondaryConn_=new i(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=i.responsesRequiredToBeHealthy||0;const o=this.connReceiver_(this.secondaryConn_),d=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(o,d),li(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(i){this.log_("Reset packet received.  New host: "+i),this.repoInfo_.host=i,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(i,o){this.log_("Realtime connection established."),this.conn_=i,this.state_=1,this.onReady_&&(this.onReady_(o,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):li(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const i=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===i||this.rx_===i)&&this.close()}onConnectionLost_(i){this.conn_=null,i||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(En.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(i){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(i),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(i){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(i)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Ft{put(i,o,d,g){}merge(i,o,d,g){}refreshAuthToken(i){}refreshAppCheckToken(i){}onDisconnectPut(i,o,d){}onDisconnectMerge(i,o,d){}onDisconnectCancel(i,o){}reportStats(i){}}class On{constructor(i){this.allowedEvents_=i,this.listeners_={},(0,se.hu)(Array.isArray(i)&&i.length>0,"Requires a non-empty array")}trigger(i,...o){if(Array.isArray(this.listeners_[i])){const d=[...this.listeners_[i]];for(let g=0;g<d.length;g++)d[g].callback.apply(d[g].context,o)}}on(i,o,d){this.validateEventType_(i),this.listeners_[i]=this.listeners_[i]||[],this.listeners_[i].push({callback:o,context:d});const g=this.getInitialEvent(i);g&&o.apply(d,g)}off(i,o,d){this.validateEventType_(i);const g=this.listeners_[i]||[];for(let E=0;E<g.length;E++)if(g[E].callback===o&&(!d||d===g[E].context))return void g.splice(E,1)}validateEventType_(i){(0,se.hu)(this.allowedEvents_.find(o=>o===i),"Unknown event: "+i)}}class Ir extends On{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,se.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Ir}getInitialEvent(i){return(0,se.hu)("online"===i,"Unknown event type: "+i),[this.online_]}currentlyOnline(){return this.online_}}class nr{constructor(i,o){if(void 0===o){this.pieces_=i.split("/");let d=0;for(let g=0;g<this.pieces_.length;g++)this.pieces_[g].length>0&&(this.pieces_[d]=this.pieces_[g],d++);this.pieces_.length=d,this.pieceNum_=0}else this.pieces_=i,this.pieceNum_=o}toString(){let i="";for(let o=this.pieceNum_;o<this.pieces_.length;o++)""!==this.pieces_[o]&&(i+="/"+this.pieces_[o]);return i||"/"}}function dr(){return new nr("")}function Cn(u){return u.pieceNum_>=u.pieces_.length?null:u.pieces_[u.pieceNum_]}function cs(u){return u.pieces_.length-u.pieceNum_}function pr(u){let i=u.pieceNum_;return i<u.pieces_.length&&i++,new nr(u.pieces_,i)}function ds(u){return u.pieceNum_<u.pieces_.length?u.pieces_[u.pieces_.length-1]:null}function ai(u,i=0){return u.pieces_.slice(u.pieceNum_+i)}function mo(u){if(u.pieceNum_>=u.pieces_.length)return null;const i=[];for(let o=u.pieceNum_;o<u.pieces_.length-1;o++)i.push(u.pieces_[o]);return new nr(i,0)}function Pr(u,i){const o=[];for(let d=u.pieceNum_;d<u.pieces_.length;d++)o.push(u.pieces_[d]);if(i instanceof nr)for(let d=i.pieceNum_;d<i.pieces_.length;d++)o.push(i.pieces_[d]);else{const d=i.split("/");for(let g=0;g<d.length;g++)d[g].length>0&&o.push(d[g])}return new nr(o,0)}function Gn(u){return u.pieceNum_>=u.pieces_.length}function Li(u,i){const o=Cn(u),d=Cn(i);if(null===o)return i;if(o===d)return Li(pr(u),pr(i));throw new Error("INTERNAL ERROR: innerPath ("+i+") is not within outerPath ("+u+")")}function xl(u,i){const o=ai(u,0),d=ai(i,0);for(let g=0;g<o.length&&g<d.length;g++){const E=he(o[g],d[g]);if(0!==E)return E}return o.length===d.length?0:o.length<d.length?-1:1}function No(u,i){if(cs(u)!==cs(i))return!1;for(let o=u.pieceNum_,d=i.pieceNum_;o<=u.pieces_.length;o++,d++)if(u.pieces_[o]!==i.pieces_[d])return!1;return!0}function qi(u,i){let o=u.pieceNum_,d=i.pieceNum_;if(cs(u)>cs(i))return!1;for(;o<u.pieces_.length;){if(u.pieces_[o]!==i.pieces_[d])return!1;++o,++d}return!0}class hl{constructor(i,o){this.errorPrefix_=o,this.parts_=ai(i,0),this.byteLength_=Math.max(1,this.parts_.length);for(let d=0;d<this.parts_.length;d++)this.byteLength_+=(0,se.ug)(this.parts_[d]);Ka(this)}}function Ka(u){if(u.byteLength_>768)throw new Error(u.errorPrefix_+"has a key path longer than 768 bytes ("+u.byteLength_+").");if(u.parts_.length>32)throw new Error(u.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+zs(u))}function zs(u){return 0===u.parts_.length?"":"in property '"+u.parts_.join(".")+"'"}class yo extends On{constructor(){let i,o;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(o="visibilitychange",i="hidden"):typeof document.mozHidden<"u"?(o="mozvisibilitychange",i="mozHidden"):typeof document.msHidden<"u"?(o="msvisibilitychange",i="msHidden"):typeof document.webkitHidden<"u"&&(o="webkitvisibilitychange",i="webkitHidden")),this.visible_=!0,o&&document.addEventListener(o,()=>{const d=!document[i];d!==this.visible_&&(this.visible_=d,this.trigger("visible",d))},!1)}static getInstance(){return new yo}getInitialEvent(i){return(0,se.hu)("visible"===i,"Unknown event type: "+i),[this.visible_]}}const ni=1e3;let vo,Ws=(()=>{class u extends Ft{constructor(o,d,g,E,S,O,G,Q){if(super(),this.repoInfo_=o,this.applicationId_=d,this.onDataUpdate_=g,this.onConnectStatus_=E,this.onServerInfoUpdate_=S,this.authTokenProvider_=O,this.appCheckTokenProvider_=G,this.authOverride_=Q,this.id=u.nextPersistentConnectionId_++,this.log_=Ut("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=ni,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Q&&!(0,se.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");yo.getInstance().on("visible",this.onVisible_,this),-1===o.host.indexOf("fblocal")&&Ir.getInstance().on("online",this.onOnline_,this)}sendRequest(o,d,g){const E=++this.requestNumber_,S={r:E,a:o,b:d};this.log_((0,se.Wl)(S)),(0,se.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(S),g&&(this.requestCBHash_[E]=g)}get(o){this.initConnection_();const d=new se.BH,g={p:o._path.toString(),q:o._queryObject};return this.outstandingGets_.push({action:"g",request:g,onComplete:O=>{const G=O.d;"ok"===O.s?d.resolve(G):d.reject(G)}}),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),d.promise}listen(o,d,g,E){this.initConnection_();const S=o._queryIdentifier,O=o._path.toString();this.log_("Listen called for "+O+" "+S),this.listens.has(O)||this.listens.set(O,new Map),(0,se.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,se.hu)(!this.listens.get(O).has(S),"listen() called twice for same path/queryId.");const G={onComplete:E,hashFn:d,query:o,tag:g};this.listens.get(O).set(S,G),this.connected_&&this.sendListen_(G)}sendGet_(o){const d=this.outstandingGets_[o];this.sendRequest("g",d.request,g=>{delete this.outstandingGets_[o],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),d.onComplete&&d.onComplete(g)})}sendListen_(o){const d=o.query,g=d._path.toString(),E=d._queryIdentifier;this.log_("Listen on "+g+" for "+E);const S={p:g};o.tag&&(S.q=d._queryObject,S.t=o.tag),S.h=o.hashFn(),this.sendRequest("q",S,G=>{const Q=G.d,Ee=G.s;u.warnOnListenWarnings_(Q,d),(this.listens.get(g)&&this.listens.get(g).get(E))===o&&(this.log_("listen response",G),"ok"!==Ee&&this.removeListen_(g,E),o.onComplete&&o.onComplete(Ee,Q))})}static warnOnListenWarnings_(o,d){if(o&&"object"==typeof o&&(0,se.r3)(o,"w")){const g=(0,se.DV)(o,"w");if(Array.isArray(g)&&~g.indexOf("no_index")){const E='".indexOn": "'+d._queryParams.getIndex().toString()+'"',S=d._path.toString();er(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${E} at ${S} to your security rules for better performance.`)}}}refreshAuthToken(o){this.authToken_=o,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(o)}reduceReconnectDelayIfAdminCredential_(o){(o&&40===o.length||(0,se.GJ)(o))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(o){this.appCheckToken_=o,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const o=this.authToken_,d=(0,se.w9)(o)?"auth":"gauth",g={cred:o};null===this.authOverride_?g.noauth=!0:"object"==typeof this.authOverride_&&(g.authvar=this.authOverride_),this.sendRequest(d,g,E=>{const S=E.s,O=E.d||"error";this.authToken_===o&&("ok"===S?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(S,O))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},o=>{const d=o.s,g=o.d||"error";"ok"===d?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(d,g)})}unlisten(o,d){const g=o._path.toString(),E=o._queryIdentifier;this.log_("Unlisten called for "+g+" "+E),(0,se.hu)(o._queryParams.isDefault()||!o._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(g,E)&&this.connected_&&this.sendUnlisten_(g,E,o._queryObject,d)}sendUnlisten_(o,d,g,E){this.log_("Unlisten on "+o+" for "+d);const S={p:o};E&&(S.q=g,S.t=E),this.sendRequest("n",S)}onDisconnectPut(o,d,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",o,d,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"o",data:d,onComplete:g})}onDisconnectMerge(o,d,g){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",o,d,g):this.onDisconnectRequestQueue_.push({pathString:o,action:"om",data:d,onComplete:g})}onDisconnectCancel(o,d){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",o,null,d):this.onDisconnectRequestQueue_.push({pathString:o,action:"oc",data:null,onComplete:d})}sendOnDisconnect_(o,d,g,E){const S={p:d,d:g};this.log_("onDisconnect "+o,S),this.sendRequest(o,S,O=>{E&&setTimeout(()=>{E(O.s,O.d)},Math.floor(0))})}put(o,d,g,E){this.putInternal("p",o,d,g,E)}merge(o,d,g,E){this.putInternal("m",o,d,g,E)}putInternal(o,d,g,E,S){this.initConnection_();const O={p:d,d:g};void 0!==S&&(O.h=S),this.outstandingPuts_.push({action:o,request:O,onComplete:E}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+d)}sendPut_(o){const d=this.outstandingPuts_[o].action,g=this.outstandingPuts_[o].request,E=this.outstandingPuts_[o].onComplete;this.outstandingPuts_[o].queued=this.connected_,this.sendRequest(d,g,S=>{this.log_(d+" response",S),delete this.outstandingPuts_[o],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),E&&E(S.s,S.d)})}reportStats(o){if(this.connected_){const d={c:o};this.log_("reportStats",d),this.sendRequest("s",d,g=>{"ok"!==g.s&&this.log_("reportStats","Error sending stats: "+g.d)})}}onDataMessage_(o){if("r"in o){this.log_("from server: "+(0,se.Wl)(o));const d=o.r,g=this.requestCBHash_[d];g&&(delete this.requestCBHash_[d],g(o.b))}else{if("error"in o)throw"A server-side error has occurred: "+o.error;"a"in o&&this.onDataPush_(o.a,o.b)}}onDataPush_(o,d){this.log_("handleServerMessage",o,d),"d"===o?this.onDataUpdate_(d.p,d.d,!1,d.t):"m"===o?this.onDataUpdate_(d.p,d.d,!0,d.t):"c"===o?this.onListenRevoked_(d.p,d.q):"ac"===o?this.onAuthRevoked_(d.s,d.d):"apc"===o?this.onAppCheckRevoked_(d.s,d.d):"sd"===o?this.onSecurityDebugPacket_(d):wr("Unrecognized action received from server: "+(0,se.Wl)(o)+"\nAre you using the latest client?")}onReady_(o,d){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(o),this.lastSessionId=d,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(o){(0,se.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(o))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(o){o&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=ni,this.realtime_||this.scheduleConnect_(0)),this.visible_=o}onOnline_(o){o?(this.log_("Browser went online."),this.reconnectDelay_=ni,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=ni),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const o=(new Date).getTime()-this.lastConnectionAttemptTime_;let d=Math.max(0,this.reconnectDelay_-o);d=Math.random()*d,this.log_("Trying to reconnect in "+d+"ms"),this.scheduleConnect_(d),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var o=this;return(0,si.Z)(function*(){if(o.shouldReconnect_()){o.log_("Making a connection attempt"),o.lastConnectionAttemptTime_=(new Date).getTime(),o.lastConnectionEstablishedTime_=null;const d=o.onDataMessage_.bind(o),g=o.onReady_.bind(o),E=o.onRealtimeDisconnect_.bind(o),S=o.id+":"+u.nextConnectionId_++,O=o.lastSessionId;let G=!1,Q=null;const Ee=function(){Q?Q.close():(G=!0,E())};o.realtime_={close:Ee,sendRequest:function(_t){(0,se.hu)(Q,"sendRequest call when we're not connected not allowed."),Q.sendRequest(_t)}};const qe=o.forceTokenRefresh_;o.forceTokenRefresh_=!1;try{const[_t,Ze]=yield Promise.all([o.authTokenProvider_.getToken(qe),o.appCheckTokenProvider_.getToken(qe)]);G?Fn("getToken() completed but was canceled"):(Fn("getToken() completed. Creating connection."),o.authToken_=_t&&_t.accessToken,o.appCheckToken_=Ze&&Ze.token,Q=new wt(S,o.repoInfo_,o.applicationId_,o.appCheckToken_,o.authToken_,d,g,E,Zt=>{er(Zt+" ("+o.repoInfo_.toString()+")"),o.interrupt("server_kill")},O))}catch(_t){o.log_("Failed to get token: "+_t),G||(o.repoInfo_.nodeAdmin&&er(_t),Ee())}}})()}interrupt(o){Fn("Interrupting connection for reason: "+o),this.interruptReasons_[o]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(o){Fn("Resuming connection for reason: "+o),delete this.interruptReasons_[o],(0,se.xb)(this.interruptReasons_)&&(this.reconnectDelay_=ni,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(o){const d=o-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:d})}cancelSentTransactions_(){for(let o=0;o<this.outstandingPuts_.length;o++){const d=this.outstandingPuts_[o];d&&"h"in d.request&&d.queued&&(d.onComplete&&d.onComplete("disconnect"),delete this.outstandingPuts_[o],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(o,d){let g;g=d?d.map(S=>cn(S)).join("$"):"default";const E=this.removeListen_(o,g);E&&E.onComplete&&E.onComplete("permission_denied")}removeListen_(o,d){const g=new nr(o).toString();let E;if(this.listens.has(g)){const S=this.listens.get(g);E=S.get(d),S.delete(d),0===S.size&&this.listens.delete(g)}else E=void 0;return E}onAuthRevoked_(o,d){Fn("Auth token revoked: "+o+"/"+d),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===o||"permission_denied"===o)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(o,d){Fn("App check token revoked: "+o+"/"+d),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===o||"permission_denied"===o)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(o){this.securityDebugCallback_?this.securityDebugCallback_(o):"msg"in o&&console.log("FIREBASE: "+o.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const o of this.listens.values())for(const d of o.values())this.sendListen_(d);for(let o=0;o<this.outstandingPuts_.length;o++)this.outstandingPuts_[o]&&this.sendPut_(o);for(;this.onDisconnectRequestQueue_.length;){const o=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(o.action,o.pathString,o.data,o.onComplete)}for(let o=0;o<this.outstandingGets_.length;o++)this.outstandingGets_[o]&&this.sendGet_(o)}sendConnectStats_(){const o={};let d="js";(0,se.Yr)()&&(d=this.repoInfo_.nodeAdmin?"admin_node":"node"),o["sdk."+d+"."+tt.replace(/\./g,"-")]=1,(0,se.uI)()?o["framework.cordova"]=1:(0,se.b$)()&&(o["framework.reactnative"]=1),this.reportStats(o)}shouldReconnect_(){const o=Ir.getInstance().currentlyOnline();return(0,se.xb)(this.interruptReasons_)&&o}}return u.nextPersistentConnectionId_=0,u.nextConnectionId_=0,u})();class Jn{constructor(i,o){this.name=i,this.node=o}static Wrap(i,o){return new Jn(i,o)}}class yi{getCompare(){return this.compare.bind(this)}indexedValueChanged(i,o){const d=new Jn(Qe,i),g=new Jn(Qe,o);return 0!==this.compare(d,g)}minPost(){return Jn.MIN}}class hs extends yi{static get __EMPTY_NODE(){return vo}static set __EMPTY_NODE(i){vo=i}compare(i,o){return he(i.name,o.name)}isDefinedOn(i){throw(0,se.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(i,o){return!1}minPost(){return Jn.MIN}maxPost(){return new Jn(ge,vo)}makePost(i,o){return(0,se.hu)("string"==typeof i,"KeyIndex indexValue must always be a string."),new Jn(i,vo)}toString(){return".key"}}const Ks=new hs;class Hi{constructor(i,o,d,g,E=null){this.isReverse_=g,this.resultGenerator_=E,this.nodeStack_=[];let S=1;for(;!i.isEmpty();)if(S=o?d(i.key,o):1,g&&(S*=-1),S<0)i=this.isReverse_?i.left:i.right;else{if(0===S){this.nodeStack_.push(i);break}this.nodeStack_.push(i),i=this.isReverse_?i.right:i.left}}getNext(){if(0===this.nodeStack_.length)return null;let o,i=this.nodeStack_.pop();if(o=this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value},this.isReverse_)for(i=i.left;!i.isEmpty();)this.nodeStack_.push(i),i=i.right;else for(i=i.right;!i.isEmpty();)this.nodeStack_.push(i),i=i.left;return o}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const i=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(i.key,i.value):{key:i.key,value:i.value}}}let la,$i=(()=>{class u{constructor(o,d,g,E,S){this.key=o,this.value=d,this.color=g??u.RED,this.left=E??fn.EMPTY_NODE,this.right=S??fn.EMPTY_NODE}copy(o,d,g,E,S){return new u(o??this.key,d??this.value,g??this.color,E??this.left,S??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(o){return this.left.inorderTraversal(o)||!!o(this.key,this.value)||this.right.inorderTraversal(o)}reverseTraversal(o){return this.right.reverseTraversal(o)||o(this.key,this.value)||this.left.reverseTraversal(o)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(o,d,g){let E=this;const S=g(o,E.key);return E=S<0?E.copy(null,null,null,E.left.insert(o,d,g),null):0===S?E.copy(null,d,null,null,null):E.copy(null,null,null,null,E.right.insert(o,d,g)),E.fixUp_()}removeMin_(){if(this.left.isEmpty())return fn.EMPTY_NODE;let o=this;return!o.left.isRed_()&&!o.left.left.isRed_()&&(o=o.moveRedLeft_()),o=o.copy(null,null,null,o.left.removeMin_(),null),o.fixUp_()}remove(o,d){let g,E;if(g=this,d(o,g.key)<0)!g.left.isEmpty()&&!g.left.isRed_()&&!g.left.left.isRed_()&&(g=g.moveRedLeft_()),g=g.copy(null,null,null,g.left.remove(o,d),null);else{if(g.left.isRed_()&&(g=g.rotateRight_()),!g.right.isEmpty()&&!g.right.isRed_()&&!g.right.left.isRed_()&&(g=g.moveRedRight_()),0===d(o,g.key)){if(g.right.isEmpty())return fn.EMPTY_NODE;E=g.right.min_(),g=g.copy(E.key,E.value,null,null,g.right.removeMin_())}g=g.copy(null,null,null,null,g.right.remove(o,d))}return g.fixUp_()}isRed_(){return this.color}fixUp_(){let o=this;return o.right.isRed_()&&!o.left.isRed_()&&(o=o.rotateLeft_()),o.left.isRed_()&&o.left.left.isRed_()&&(o=o.rotateRight_()),o.left.isRed_()&&o.right.isRed_()&&(o=o.colorFlip_()),o}moveRedLeft_(){let o=this.colorFlip_();return o.right.left.isRed_()&&(o=o.copy(null,null,null,null,o.right.rotateRight_()),o=o.rotateLeft_(),o=o.colorFlip_()),o}moveRedRight_(){let o=this.colorFlip_();return o.left.left.isRed_()&&(o=o.rotateRight_(),o=o.colorFlip_()),o}rotateLeft_(){const o=this.copy(null,null,u.RED,null,this.right.left);return this.right.copy(null,null,this.color,o,null)}rotateRight_(){const o=this.copy(null,null,u.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,o)}colorFlip_(){const o=this.left.copy(null,null,!this.left.color,null,null),d=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,o,d)}checkMaxDepth_(){const o=this.check_();return Math.pow(2,o)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const o=this.left.check_();if(o!==this.right.check_())throw new Error("Black depths differ");return o+(this.isRed_()?0:1)}}return u.RED=!0,u.BLACK=!1,u})();class fn{constructor(i,o=fn.EMPTY_NODE){this.comparator_=i,this.root_=o}insert(i,o){return new fn(this.comparator_,this.root_.insert(i,o,this.comparator_).copy(null,null,$i.BLACK,null,null))}remove(i){return new fn(this.comparator_,this.root_.remove(i,this.comparator_).copy(null,null,$i.BLACK,null,null))}get(i){let o,d=this.root_;for(;!d.isEmpty();){if(o=this.comparator_(i,d.key),0===o)return d.value;o<0?d=d.left:o>0&&(d=d.right)}return null}getPredecessorKey(i){let o,d=this.root_,g=null;for(;!d.isEmpty();){if(o=this.comparator_(i,d.key),0===o){if(d.left.isEmpty())return g?g.key:null;for(d=d.left;!d.right.isEmpty();)d=d.right;return d.key}o<0?d=d.left:o>0&&(g=d,d=d.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(i){return this.root_.inorderTraversal(i)}reverseTraversal(i){return this.root_.reverseTraversal(i)}getIterator(i){return new Hi(this.root_,null,this.comparator_,!1,i)}getIteratorFrom(i,o){return new Hi(this.root_,i,this.comparator_,!1,o)}getReverseIteratorFrom(i,o){return new Hi(this.root_,i,this.comparator_,!0,o)}getReverseIterator(i){return new Hi(this.root_,null,this.comparator_,!0,i)}}function iu(u,i){return he(u.name,i.name)}function Aa(u,i){return he(u,i)}fn.EMPTY_NODE=new class Ui{copy(i,o,d,g,E){return this}insert(i,o,d){return new $i(i,o,null)}remove(i,o){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const ws=function(u){return"number"==typeof u?"number:"+jt(u):"string:"+u},ua=function(u){if(u.isLeafNode()){const i=u.val();(0,se.hu)("string"==typeof i||"number"==typeof i||"object"==typeof i&&(0,se.r3)(i,".sv"),"Priority must be a string or number.")}else(0,se.hu)(u===la||u.isEmpty(),"priority of unexpected type.");(0,se.hu)(u===la||u.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Xi,xt,rr,Po=(()=>{class u{constructor(o,d=u.__childrenNodeConstructor.EMPTY_NODE){this.value_=o,this.priorityNode_=d,this.lazyHash_=null,(0,se.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ua(this.priorityNode_)}static set __childrenNodeConstructor(o){Xi=o}static get __childrenNodeConstructor(){return Xi}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(o){return new u(this.value_,o)}getImmediateChild(o){return".priority"===o?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}getChild(o){return Gn(o)?this:".priority"===Cn(o)?this.priorityNode_:u.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(o,d){return null}updateImmediateChild(o,d){return".priority"===o?this.updatePriority(d):d.isEmpty()&&".priority"!==o?this:u.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(o,d).updatePriority(this.priorityNode_)}updateChild(o,d){const g=Cn(o);return null===g?d:d.isEmpty()&&".priority"!==g?this:((0,se.hu)(".priority"!==g||1===cs(o),".priority must be the last token in a path"),this.updateImmediateChild(g,u.__childrenNodeConstructor.EMPTY_NODE.updateChild(pr(o),d)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(o,d){return!1}val(o){return o&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let o="";this.priorityNode_.isEmpty()||(o+="priority:"+ws(this.priorityNode_.val())+":");const d=typeof this.value_;o+=d+":",o+="number"===d?jt(this.value_):this.value_,this.lazyHash_=Hn(o)}return this.lazyHash_}getValue(){return this.value_}compareTo(o){return o===u.__childrenNodeConstructor.EMPTY_NODE?1:o instanceof u.__childrenNodeConstructor?-1:((0,se.hu)(o.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(o))}compareToLeafNode_(o){const d=typeof o.value_,g=typeof this.value_,E=u.VALUE_TYPE_ORDER.indexOf(d),S=u.VALUE_TYPE_ORDER.indexOf(g);return(0,se.hu)(E>=0,"Unknown leaf type: "+d),(0,se.hu)(S>=0,"Unknown leaf type: "+g),E===S?"object"===g?0:this.value_<o.value_?-1:this.value_===o.value_?0:1:S-E}withIndex(){return this}isIndexed(){return!0}equals(o){if(o===this)return!0;if(o.isLeafNode()){const d=o;return this.value_===d.value_&&this.priorityNode_.equals(d.priorityNode_)}return!1}}return u.VALUE_TYPE_ORDER=["object","boolean","number","string"],u})();const Ar=new class Di extends yi{compare(i,o){const d=i.node.getPriority(),g=o.node.getPriority(),E=d.compareTo(g);return 0===E?he(i.name,o.name):E}isDefinedOn(i){return!i.getPriority().isEmpty()}indexedValueChanged(i,o){return!i.getPriority().equals(o.getPriority())}minPost(){return Jn.MIN}maxPost(){return new Jn(ge,new Po("[PRIORITY-POST]",rr))}makePost(i,o){const d=xt(i);return new Jn(o,new Po("[PRIORITY-POST]",d))}toString(){return".priority"}},Ns=Math.log(2);class es{constructor(i){this.count=parseInt(Math.log(i+1)/Ns,10),this.current_=this.count-1;const g=(E=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=i+1&g}nextBitIsOne(){const i=!(this.bits_&1<<this.current_);return this.current_--,i}}const no=function(u,i,o,d){u.sort(i);const g=function(G,Q){const Ee=Q-G;let Te,qe;if(0===Ee)return null;if(1===Ee)return Te=u[G],qe=o?o(Te):Te,new $i(qe,Te.node,$i.BLACK,null,null);{const _t=parseInt(Ee/2,10)+G,Ze=g(G,_t),Zt=g(_t+1,Q);return Te=u[_t],qe=o?o(Te):Te,new $i(qe,Te.node,$i.BLACK,Ze,Zt)}},O=function(G){let Q=null,Ee=null,Te=u.length;const qe=function(Ze,Zt){const Tn=Te-Ze,Cr=Te;Te-=Ze;const Vr=g(Tn+1,Cr),Zr=u[Tn],Wr=o?o(Zr):Zr;_t(new $i(Wr,Zr.node,Zt,null,Vr))},_t=function(Ze){Q?(Q.left=Ze,Q=Ze):(Ee=Ze,Q=Ze)};for(let Ze=0;Ze<G.count;++Ze){const Zt=G.nextBitIsOne(),Tn=Math.pow(2,G.count-(Ze+1));Zt?qe(Tn,$i.BLACK):(qe(Tn,$i.BLACK),qe(Tn,$i.RED))}return Ee}(new es(u.length));return new fn(d||i,O)};let Oo;const Is={};class Fr{constructor(i,o){this.indexes_=i,this.indexSet_=o}static get Default(){return(0,se.hu)(Is&&Ar,"ChildrenNode.ts has not been loaded"),Oo=Oo||new Fr({".priority":Is},{".priority":Ar}),Oo}get(i){const o=(0,se.DV)(this.indexes_,i);if(!o)throw new Error("No index defined for "+i);return o instanceof fn?o:null}hasIndex(i){return(0,se.r3)(this.indexSet_,i.toString())}addIndex(i,o){(0,se.hu)(i!==Ks,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const d=[];let g=!1;const E=o.getIterator(Jn.Wrap);let O,S=E.getNext();for(;S;)g=g||i.isDefinedOn(S.node),d.push(S),S=E.getNext();O=g?no(d,i.getCompare()):Is;const G=i.toString(),Q=Object.assign({},this.indexSet_);Q[G]=i;const Ee=Object.assign({},this.indexes_);return Ee[G]=O,new Fr(Ee,Q)}addToIndexes(i,o){const d=(0,se.UI)(this.indexes_,(g,E)=>{const S=(0,se.DV)(this.indexSet_,E);if((0,se.hu)(S,"Missing index implementation for "+E),g===Is){if(S.isDefinedOn(i.node)){const O=[],G=o.getIterator(Jn.Wrap);let Q=G.getNext();for(;Q;)Q.name!==i.name&&O.push(Q),Q=G.getNext();return O.push(i),no(O,S.getCompare())}return Is}{const O=o.get(i.name);let G=g;return O&&(G=G.remove(new Jn(i.name,O))),G.insert(i,i.node)}});return new Fr(d,this.indexSet_)}removeFromIndexes(i,o){const d=(0,se.UI)(this.indexes_,g=>{if(g===Is)return g;{const E=o.get(i.name);return E?g.remove(new Jn(i.name,E)):g}});return new Fr(d,this.indexSet_)}}let H,V=(()=>{class u{constructor(o,d,g){this.children_=o,this.priorityNode_=d,this.indexMap_=g,this.lazyHash_=null,this.priorityNode_&&ua(this.priorityNode_),this.children_.isEmpty()&&(0,se.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return H||(H=new u(new fn(Aa),null,Fr.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||H}updatePriority(o){return this.children_.isEmpty()?this:new u(this.children_,o,this.indexMap_)}getImmediateChild(o){if(".priority"===o)return this.getPriority();{const d=this.children_.get(o);return null===d?H:d}}getChild(o){const d=Cn(o);return null===d?this:this.getImmediateChild(d).getChild(pr(o))}hasChild(o){return null!==this.children_.get(o)}updateImmediateChild(o,d){if((0,se.hu)(d,"We should always be passing snapshot nodes"),".priority"===o)return this.updatePriority(d);{const g=new Jn(o,d);let E,S;d.isEmpty()?(E=this.children_.remove(o),S=this.indexMap_.removeFromIndexes(g,this.children_)):(E=this.children_.insert(o,d),S=this.indexMap_.addToIndexes(g,this.children_));const O=E.isEmpty()?H:this.priorityNode_;return new u(E,O,S)}}updateChild(o,d){const g=Cn(o);if(null===g)return d;{(0,se.hu)(".priority"!==Cn(o)||1===cs(o),".priority must be the last token in a path");const E=this.getImmediateChild(g).updateChild(pr(o),d);return this.updateImmediateChild(g,E)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(o){if(this.isEmpty())return null;const d={};let g=0,E=0,S=!0;if(this.forEachChild(Ar,(O,G)=>{d[O]=G.val(o),g++,S&&u.INTEGER_REGEXP_.test(O)?E=Math.max(E,Number(O)):S=!1}),!o&&S&&E<2*g){const O=[];for(const G in d)O[G]=d[G];return O}return o&&!this.getPriority().isEmpty()&&(d[".priority"]=this.getPriority().val()),d}hash(){if(null===this.lazyHash_){let o="";this.getPriority().isEmpty()||(o+="priority:"+ws(this.getPriority().val())+":"),this.forEachChild(Ar,(d,g)=>{const E=g.hash();""!==E&&(o+=":"+d+":"+E)}),this.lazyHash_=""===o?"":Hn(o)}return this.lazyHash_}getPredecessorChildName(o,d,g){const E=this.resolveIndex_(g);if(E){const S=E.getPredecessorKey(new Jn(o,d));return S?S.name:null}return this.children_.getPredecessorKey(o)}getFirstChildName(o){const d=this.resolveIndex_(o);if(d){const g=d.minKey();return g&&g.name}return this.children_.minKey()}getFirstChild(o){const d=this.getFirstChildName(o);return d?new Jn(d,this.children_.get(d)):null}getLastChildName(o){const d=this.resolveIndex_(o);if(d){const g=d.maxKey();return g&&g.name}return this.children_.maxKey()}getLastChild(o){const d=this.getLastChildName(o);return d?new Jn(d,this.children_.get(d)):null}forEachChild(o,d){const g=this.resolveIndex_(o);return g?g.inorderTraversal(E=>d(E.name,E.node)):this.children_.inorderTraversal(d)}getIterator(o){return this.getIteratorFrom(o.minPost(),o)}getIteratorFrom(o,d){const g=this.resolveIndex_(d);if(g)return g.getIteratorFrom(o,E=>E);{const E=this.children_.getIteratorFrom(o.name,Jn.Wrap);let S=E.peek();for(;null!=S&&d.compare(S,o)<0;)E.getNext(),S=E.peek();return E}}getReverseIterator(o){return this.getReverseIteratorFrom(o.maxPost(),o)}getReverseIteratorFrom(o,d){const g=this.resolveIndex_(d);if(g)return g.getReverseIteratorFrom(o,E=>E);{const E=this.children_.getReverseIteratorFrom(o.name,Jn.Wrap);let S=E.peek();for(;null!=S&&d.compare(S,o)>0;)E.getNext(),S=E.peek();return E}}compareTo(o){return this.isEmpty()?o.isEmpty()?0:-1:o.isLeafNode()||o.isEmpty()?1:o===ne?-1:0}withIndex(o){if(o===Ks||this.indexMap_.hasIndex(o))return this;{const d=this.indexMap_.addIndex(o,this.children_);return new u(this.children_,this.priorityNode_,d)}}isIndexed(o){return o===Ks||this.indexMap_.hasIndex(o)}equals(o){if(o===this)return!0;if(o.isLeafNode())return!1;{const d=o;if(this.getPriority().equals(d.getPriority())){if(this.children_.count()===d.children_.count()){const g=this.getIterator(Ar),E=d.getIterator(Ar);let S=g.getNext(),O=E.getNext();for(;S&&O;){if(S.name!==O.name||!S.node.equals(O.node))return!1;S=g.getNext(),O=E.getNext()}return null===S&&null===O}return!1}return!1}}resolveIndex_(o){return o===Ks?null:this.indexMap_.get(o.toString())}}return u.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,u})();const ne=new class L extends V{constructor(){super(new fn(Aa),V.EMPTY_NODE,Fr.Default)}compareTo(i){return i===this?0:1}equals(i){return i===this}getPriority(){return this}getImmediateChild(i){return V.EMPTY_NODE}isEmpty(){return!1}};function Lt(u,i=null){if(null===u)return V.EMPTY_NODE;if("object"==typeof u&&".priority"in u&&(i=u[".priority"]),(0,se.hu)(null===i||"string"==typeof i||"number"==typeof i||"object"==typeof i&&".sv"in i,"Invalid priority type found: "+typeof i),"object"==typeof u&&".value"in u&&null!==u[".value"]&&(u=u[".value"]),"object"!=typeof u||".sv"in u)return new Po(u,Lt(i));if(u instanceof Array){let o=V.EMPTY_NODE;return wn(u,(d,g)=>{if((0,se.r3)(u,d)&&"."!==d.substring(0,1)){const E=Lt(g);(E.isLeafNode()||!E.isEmpty())&&(o=o.updateImmediateChild(d,E))}}),o.updatePriority(Lt(i))}{const o=[];let d=!1;if(wn(u,(S,O)=>{if("."!==S.substring(0,1)){const G=Lt(O);G.isEmpty()||(d=d||!G.getPriority().isEmpty(),o.push(new Jn(S,G)))}}),0===o.length)return V.EMPTY_NODE;const E=no(o,iu,S=>S.name,Aa);if(d){const S=no(o,Ar.getCompare());return new V(E,Lt(i),new Fr({".priority":S},{".priority":Ar}))}return new V(E,Lt(i),Fr.Default)}}Object.defineProperties(Jn,{MIN:{value:new Jn(Qe,V.EMPTY_NODE)},MAX:{value:new Jn(ge,ne)}}),hs.__EMPTY_NODE=V.EMPTY_NODE,Po.__childrenNodeConstructor=V,function Ra(u){la=u}(ne),function fl(u){rr=u}(ne),function ca(u){xt=u}(Lt);class _r extends yi{constructor(i){super(),this.indexPath_=i,(0,se.hu)(!Gn(i)&&".priority"!==Cn(i),"Can't create PathIndex with empty path or .priority key")}extractChild(i){return i.getChild(this.indexPath_)}isDefinedOn(i){return!i.getChild(this.indexPath_).isEmpty()}compare(i,o){const d=this.extractChild(i.node),g=this.extractChild(o.node),E=d.compareTo(g);return 0===E?he(i.name,o.name):E}makePost(i,o){const d=Lt(i),g=V.EMPTY_NODE.updateChild(this.indexPath_,d);return new Jn(o,g)}maxPost(){const i=V.EMPTY_NODE.updateChild(this.indexPath_,ne);return new Jn(ge,i)}toString(){return ai(this.indexPath_,0).join("/")}}const Gi=new class Cs extends yi{compare(i,o){const d=i.node.compareTo(o.node);return 0===d?he(i.name,o.name):d}isDefinedOn(i){return!0}indexedValueChanged(i,o){return!i.equals(o)}minPost(){return Jn.MIN}maxPost(){return Jn.MAX}makePost(i,o){const d=Lt(i);return new Jn(o,d)}toString(){return".value"}};function Ps(u){return{type:"value",snapshotNode:u}}function Ds(u,i){return{type:"child_added",snapshotNode:i,childName:u}}function Zi(u,i){return{type:"child_removed",snapshotNode:i,childName:u}}function Eo(u,i,o){return{type:"child_changed",snapshotNode:i,childName:u,oldSnap:o}}class fs{constructor(i){this.index_=i}updateChild(i,o,d,g,E,S){(0,se.hu)(i.isIndexed(this.index_),"A node must be indexed if only a child is updated");const O=i.getImmediateChild(o);return O.getChild(g).equals(d.getChild(g))&&O.isEmpty()===d.isEmpty()||(null!=S&&(d.isEmpty()?i.hasChild(o)?S.trackChildChange(Zi(o,O)):(0,se.hu)(i.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):O.isEmpty()?S.trackChildChange(Ds(o,d)):S.trackChildChange(Eo(o,d,O))),i.isLeafNode()&&d.isEmpty())?i:i.updateImmediateChild(o,d).withIndex(this.index_)}updateFullNode(i,o,d){return null!=d&&(i.isLeafNode()||i.forEachChild(Ar,(g,E)=>{o.hasChild(g)||d.trackChildChange(Zi(g,E))}),o.isLeafNode()||o.forEachChild(Ar,(g,E)=>{if(i.hasChild(g)){const S=i.getImmediateChild(g);S.equals(E)||d.trackChildChange(Eo(g,E,S))}else d.trackChildChange(Ds(g,E))})),o.withIndex(this.index_)}updatePriority(i,o){return i.isEmpty()?V.EMPTY_NODE:i.updatePriority(o)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class da{constructor(i){this.indexedFilter_=new fs(i.getIndex()),this.index_=i.getIndex(),this.startPost_=da.getStartPost_(i),this.endPost_=da.getEndPost_(i),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(i){const o=this.startIsInclusive_?this.index_.compare(this.getStartPost(),i)<=0:this.index_.compare(this.getStartPost(),i)<0,d=this.endIsInclusive_?this.index_.compare(i,this.getEndPost())<=0:this.index_.compare(i,this.getEndPost())<0;return o&&d}updateChild(i,o,d,g,E,S){return this.matches(new Jn(o,d))||(d=V.EMPTY_NODE),this.indexedFilter_.updateChild(i,o,d,g,E,S)}updateFullNode(i,o,d){o.isLeafNode()&&(o=V.EMPTY_NODE);let g=o.withIndex(this.index_);g=g.updatePriority(V.EMPTY_NODE);const E=this;return o.forEachChild(Ar,(S,O)=>{E.matches(new Jn(S,O))||(g=g.updateImmediateChild(S,V.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(i,g,d)}updatePriority(i,o){return i}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(i){if(i.hasStart()){const o=i.getIndexStartName();return i.getIndex().makePost(i.getIndexStartValue(),o)}return i.getIndex().minPost()}static getEndPost_(i){if(i.hasEnd()){const o=i.getIndexEndName();return i.getIndex().makePost(i.getIndexEndValue(),o)}return i.getIndex().maxPost()}}class ha{constructor(i){this.withinDirectionalStart=o=>this.reverse_?this.withinEndPost(o):this.withinStartPost(o),this.withinDirectionalEnd=o=>this.reverse_?this.withinStartPost(o):this.withinEndPost(o),this.withinStartPost=o=>{const d=this.index_.compare(this.rangedFilter_.getStartPost(),o);return this.startIsInclusive_?d<=0:d<0},this.withinEndPost=o=>{const d=this.index_.compare(o,this.rangedFilter_.getEndPost());return this.endIsInclusive_?d<=0:d<0},this.rangedFilter_=new da(i),this.index_=i.getIndex(),this.limit_=i.getLimit(),this.reverse_=!i.isViewFromLeft(),this.startIsInclusive_=!i.startAfterSet_,this.endIsInclusive_=!i.endBeforeSet_}updateChild(i,o,d,g,E,S){return this.rangedFilter_.matches(new Jn(o,d))||(d=V.EMPTY_NODE),i.getImmediateChild(o).equals(d)?i:i.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(i,o,d,g,E,S):this.fullLimitUpdateChild_(i,o,d,E,S)}updateFullNode(i,o,d){let g;if(o.isLeafNode()||o.isEmpty())g=V.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<o.numChildren()&&o.isIndexed(this.index_)){let E;g=V.EMPTY_NODE.withIndex(this.index_),E=this.reverse_?o.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):o.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let S=0;for(;E.hasNext()&&S<this.limit_;){const O=E.getNext();if(this.withinDirectionalStart(O)){if(!this.withinDirectionalEnd(O))break;g=g.updateImmediateChild(O.name,O.node),S++}}}else{let E;g=o.withIndex(this.index_),g=g.updatePriority(V.EMPTY_NODE),E=this.reverse_?g.getReverseIterator(this.index_):g.getIterator(this.index_);let S=0;for(;E.hasNext();){const O=E.getNext();S<this.limit_&&this.withinDirectionalStart(O)&&this.withinDirectionalEnd(O)?S++:g=g.updateImmediateChild(O.name,V.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(i,g,d)}updatePriority(i,o){return i}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(i,o,d,g,E){let S;if(this.reverse_){const Te=this.index_.getCompare();S=(qe,_t)=>Te(_t,qe)}else S=this.index_.getCompare();const O=i;(0,se.hu)(O.numChildren()===this.limit_,"");const G=new Jn(o,d),Q=this.reverse_?O.getFirstChild(this.index_):O.getLastChild(this.index_),Ee=this.rangedFilter_.matches(G);if(O.hasChild(o)){const Te=O.getImmediateChild(o);let qe=g.getChildAfterChild(this.index_,Q,this.reverse_);for(;null!=qe&&(qe.name===o||O.hasChild(qe.name));)qe=g.getChildAfterChild(this.index_,qe,this.reverse_);const _t=null==qe?1:S(qe,G);if(Ee&&!d.isEmpty()&&_t>=0)return E?.trackChildChange(Eo(o,d,Te)),O.updateImmediateChild(o,d);{E?.trackChildChange(Zi(o,Te));const Zt=O.updateImmediateChild(o,V.EMPTY_NODE);return null!=qe&&this.rangedFilter_.matches(qe)?(E?.trackChildChange(Ds(qe.name,qe.node)),Zt.updateImmediateChild(qe.name,qe.node)):Zt}}return d.isEmpty()?i:Ee&&S(Q,G)>=0?(null!=E&&(E.trackChildChange(Zi(Q.name,Q.node)),E.trackChildChange(Ds(o,d))),O.updateImmediateChild(o,d).updateImmediateChild(Q.name,V.EMPTY_NODE)):i}}class fa{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Ar}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,se.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,se.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Qe}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,se.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,se.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:ge}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,se.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Ar}copy(){const i=new fa;return i.limitSet_=this.limitSet_,i.limit_=this.limit_,i.startSet_=this.startSet_,i.startAfterSet_=this.startAfterSet_,i.indexStartValue_=this.indexStartValue_,i.startNameSet_=this.startNameSet_,i.indexStartName_=this.indexStartName_,i.endSet_=this.endSet_,i.endBeforeSet_=this.endBeforeSet_,i.indexEndValue_=this.indexEndValue_,i.endNameSet_=this.endNameSet_,i.indexEndName_=this.indexEndName_,i.index_=this.index_,i.viewFrom_=this.viewFrom_,i}}function ga(u,i,o){const d=u.copy();return d.startSet_=!0,void 0===i&&(i=null),d.indexStartValue_=i,null!=o?(d.startNameSet_=!0,d.indexStartName_=o):(d.startNameSet_=!1,d.indexStartName_=""),d}function ma(u,i,o){const d=u.copy();return d.endSet_=!0,void 0===i&&(i=null),d.indexEndValue_=i,void 0!==o?(d.endNameSet_=!0,d.indexEndName_=o):(d.endNameSet_=!1,d.indexEndName_=""),d}function Hr(u,i){const o=u.copy();return o.index_=i,o}function ko(u){const i={};if(u.isDefault())return i;let o;if(u.index_===Ar?o="$priority":u.index_===Gi?o="$value":u.index_===Ks?o="$key":((0,se.hu)(u.index_ instanceof _r,"Unrecognized index type!"),o=u.index_.toString()),i.orderBy=(0,se.Wl)(o),u.startSet_){const d=u.startAfterSet_?"startAfter":"startAt";i[d]=(0,se.Wl)(u.indexStartValue_),u.startNameSet_&&(i[d]+=","+(0,se.Wl)(u.indexStartName_))}if(u.endSet_){const d=u.endBeforeSet_?"endBefore":"endAt";i[d]=(0,se.Wl)(u.indexEndValue_),u.endNameSet_&&(i[d]+=","+(0,se.Wl)(u.indexEndName_))}return u.limitSet_&&(u.isViewFromLeft()?i.limitToFirst=u.limit_:i.limitToLast=u.limit_),i}function di(u){const i={};if(u.startSet_&&(i.sp=u.indexStartValue_,u.startNameSet_&&(i.sn=u.indexStartName_),i.sin=!u.startAfterSet_),u.endSet_&&(i.ep=u.indexEndValue_,u.endNameSet_&&(i.en=u.indexEndName_),i.ein=!u.endBeforeSet_),u.limitSet_){i.l=u.limit_;let o=u.viewFrom_;""===o&&(o=u.isViewFromLeft()?"l":"r"),i.vf=o}return u.index_!==Ar&&(i.i=u.index_.toString()),i}class Qa extends Ft{constructor(i,o,d,g){super(),this.repoInfo_=i,this.onDataUpdate_=o,this.authTokenProvider_=d,this.appCheckTokenProvider_=g,this.log_=Ut("p:rest:"),this.listens_={}}reportStats(i){throw new Error("Method not implemented.")}static getListenId_(i,o){return void 0!==o?"tag$"+o:((0,se.hu)(i._queryParams.isDefault(),"should have a tag if it's not a default query."),i._path.toString())}listen(i,o,d,g){const E=i._path.toString();this.log_("Listen called for "+E+" "+i._queryIdentifier);const S=Qa.getListenId_(i,d),O={};this.listens_[S]=O;const G=ko(i._queryParams);this.restRequest_(E+".json",G,(Q,Ee)=>{let Te=Ee;if(404===Q&&(Te=null,Q=null),null===Q&&this.onDataUpdate_(E,Te,!1,d),(0,se.DV)(this.listens_,S)===O){let qe;qe=Q?401===Q?"permission_denied":"rest_error:"+Q:"ok",g(qe,null)}})}unlisten(i,o){const d=Qa.getListenId_(i,o);delete this.listens_[d]}get(i){const o=ko(i._queryParams),d=i._path.toString(),g=new se.BH;return this.restRequest_(d+".json",o,(E,S)=>{let O=S;404===E&&(O=null,E=null),null===E?(this.onDataUpdate_(d,O,!1,null),g.resolve(O)):g.reject(new Error(O))}),g.promise}refreshAuthToken(i){}restRequest_(i,o={},d){return o.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([g,E])=>{g&&g.accessToken&&(o.auth=g.accessToken),E&&E.token&&(o.ac=E.token);const S=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+i+"?ns="+this.repoInfo_.namespace+(0,se.xO)(o);this.log_("Sending REST request for "+S);const O=new XMLHttpRequest;O.onreadystatechange=()=>{if(d&&4===O.readyState){this.log_("REST Response for "+S+" received. status:",O.status,"response:",O.responseText);let G=null;if(O.status>=200&&O.status<300){try{G=(0,se.cI)(O.responseText)}catch{er("Failed to parse JSON response for "+S+": "+O.responseText)}d(null,G)}else 401!==O.status&&404!==O.status&&er("Got unsuccessful REST response for "+S+" Status: "+O.status),d(O.status);d=null}},O.open("GET",S,!0),O.send()})}}class gl{constructor(){this.rootNode_=V.EMPTY_NODE}getNode(i){return this.rootNode_.getChild(i)}updateSnapshot(i,o){this.rootNode_=this.rootNode_.updateChild(i,o)}}function qo(){return{value:null,children:new Map}}function ya(u,i,o){if(Gn(i))u.value=o,u.children.clear();else if(null!==u.value)u.value=u.value.updateChild(i,o);else{const d=Cn(i);u.children.has(d)||u.children.set(d,qo()),ya(u.children.get(d),i=pr(i),o)}}function Zo(u,i){if(Gn(i))return u.value=null,u.children.clear(),!0;if(null!==u.value){if(u.value.isLeafNode())return!1;{const o=u.value;return u.value=null,o.forEachChild(Ar,(d,g)=>{ya(u,new nr(d),g)}),Zo(u,i)}}if(u.children.size>0){const o=Cn(i);return i=pr(i),u.children.has(o)&&Zo(u.children.get(o),i)&&u.children.delete(o),0===u.children.size}return!0}function qs(u,i,o){null!==u.value?o(i,u.value):function _a(u,i){u.children.forEach((o,d)=>{i(d,o)})}(u,(d,g)=>{qs(g,new nr(i.toString()+"/"+d),o)})}class Yo{constructor(i){this.collection_=i,this.last_=null}get(){const i=this.collection_.get(),o=Object.assign({},i);return this.last_&&wn(this.last_,(d,g)=>{o[d]=o[d]-g}),this.last_=i,o}}class ro{constructor(i,o){this.server_=o,this.statsToReport_={},this.statsListener_=new Yo(i);const d=1e4+2e4*Math.random();li(this.reportStats_.bind(this),Math.floor(d))}reportStats_(){const i=this.statsListener_.get(),o={};let d=!1;wn(i,(g,E)=>{E>0&&(0,se.r3)(this.statsToReport_,g)&&(o[g]=E,d=!0)}),d&&this.server_.reportStats(o),li(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var zi=(()=>{return(u=zi||(zi={}))[u.OVERWRITE=0]="OVERWRITE",u[u.MERGE=1]="MERGE",u[u.ACK_USER_WRITE=2]="ACK_USER_WRITE",u[u.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",zi;var u})();function bu(u){return{fromUser:!1,fromServer:!0,queryId:u,tagged:!0}}class Ri{constructor(i,o,d){this.path=i,this.affectedTree=o,this.revert=d,this.type=zi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(i){if(Gn(this.path)){if(null!=this.affectedTree.value)return(0,se.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const o=this.affectedTree.subtree(new nr(i));return new Ri(dr(),o,this.revert)}}return(0,se.hu)(Cn(this.path)===i,"operationForChild called for unrelated child."),new Ri(pr(this.path),this.affectedTree,this.revert)}}class Ea{constructor(i,o){this.source=i,this.path=o,this.type=zi.LISTEN_COMPLETE}operationForChild(i){return Gn(this.path)?new Ea(this.source,dr()):new Ea(this.source,pr(this.path))}}class Or{constructor(i,o,d){this.source=i,this.path=o,this.snap=d,this.type=zi.OVERWRITE}operationForChild(i){return Gn(this.path)?new Or(this.source,dr(),this.snap.getImmediateChild(i)):new Or(this.source,pr(this.path),this.snap)}}class N{constructor(i,o,d){this.source=i,this.path=o,this.children=d,this.type=zi.MERGE}operationForChild(i){if(Gn(this.path)){const o=this.children.subtree(new nr(i));return o.isEmpty()?null:o.value?new Or(this.source,dr(),o.value):new N(this.source,dr(),o)}return(0,se.hu)(Cn(this.path)===i,"Can't get a merge for a child not on the path of the operation"),new N(this.source,pr(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class K{constructor(i,o,d){this.node_=i,this.fullyInitialized_=o,this.filtered_=d}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(i){if(Gn(i))return this.isFullyInitialized()&&!this.filtered_;const o=Cn(i);return this.isCompleteForChild(o)}isCompleteForChild(i){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(i)}getNode(){return this.node_}}class U{constructor(i){this.query_=i,this.index_=this.query_._queryParams.getIndex()}}function Ie(u,i,o,d,g,E){const S=d.filter(O=>O.type===o);S.sort((O,G)=>function bt(u,i,o){if(null==i.childName||null==o.childName)throw(0,se.g5)("Should only compare child_ events.");const d=new Jn(i.childName,i.snapshotNode),g=new Jn(o.childName,o.snapshotNode);return u.index_.compare(d,g)}(u,O,G)),S.forEach(O=>{const G=function ft(u,i,o){return"value"===i.type||"child_removed"===i.type||(i.prevName=o.getPredecessorChildName(i.childName,i.snapshotNode,u.index_)),i}(u,O,E);g.forEach(Q=>{Q.respondsTo(O.type)&&i.push(Q.createEvent(G,u.query_))})})}function mn(u,i){return{eventCache:u,serverCache:i}}function tr(u,i,o,d){return mn(new K(i,o,d),u.serverCache)}function Yn(u,i,o,d){return mn(u.eventCache,new K(i,o,d))}function Zn(u){return u.eventCache.isFullyInitialized()?u.eventCache.getNode():null}function zn(u){return u.serverCache.isFullyInitialized()?u.serverCache.getNode():null}let bi;class Wn{constructor(i,o=(()=>(bi||(bi=new fn(ht)),bi))()){this.value=i,this.children=o}static fromObject(i){let o=new Wn(null);return wn(i,(d,g)=>{o=o.set(new nr(d),g)}),o}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(i,o){if(null!=this.value&&o(this.value))return{path:dr(),value:this.value};if(Gn(i))return null;{const d=Cn(i),g=this.children.get(d);if(null!==g){const E=g.findRootMostMatchingPathAndValue(pr(i),o);return null!=E?{path:Pr(new nr(d),E.path),value:E.value}:null}return null}}findRootMostValueAndPath(i){return this.findRootMostMatchingPathAndValue(i,()=>!0)}subtree(i){if(Gn(i))return this;{const o=Cn(i),d=this.children.get(o);return null!==d?d.subtree(pr(i)):new Wn(null)}}set(i,o){if(Gn(i))return new Wn(o,this.children);{const d=Cn(i),E=(this.children.get(d)||new Wn(null)).set(pr(i),o),S=this.children.insert(d,E);return new Wn(this.value,S)}}remove(i){if(Gn(i))return this.children.isEmpty()?new Wn(null):new Wn(null,this.children);{const o=Cn(i),d=this.children.get(o);if(d){const g=d.remove(pr(i));let E;return E=g.isEmpty()?this.children.remove(o):this.children.insert(o,g),null===this.value&&E.isEmpty()?new Wn(null):new Wn(this.value,E)}return this}}get(i){if(Gn(i))return this.value;{const o=Cn(i),d=this.children.get(o);return d?d.get(pr(i)):null}}setTree(i,o){if(Gn(i))return o;{const d=Cn(i),E=(this.children.get(d)||new Wn(null)).setTree(pr(i),o);let S;return S=E.isEmpty()?this.children.remove(d):this.children.insert(d,E),new Wn(this.value,S)}}fold(i){return this.fold_(dr(),i)}fold_(i,o){const d={};return this.children.inorderTraversal((g,E)=>{d[g]=E.fold_(Pr(i,g),o)}),o(i,this.value,d)}findOnPath(i,o){return this.findOnPath_(i,dr(),o)}findOnPath_(i,o,d){const g=!!this.value&&d(o,this.value);if(g)return g;if(Gn(i))return null;{const E=Cn(i),S=this.children.get(E);return S?S.findOnPath_(pr(i),Pr(o,E),d):null}}foreachOnPath(i,o){return this.foreachOnPath_(i,dr(),o)}foreachOnPath_(i,o,d){if(Gn(i))return this;{this.value&&d(o,this.value);const g=Cn(i),E=this.children.get(g);return E?E.foreachOnPath_(pr(i),Pr(o,g),d):new Wn(null)}}foreach(i){this.foreach_(dr(),i)}foreach_(i,o){this.children.inorderTraversal((d,g)=>{g.foreach_(Pr(i,d),o)}),this.value&&o(i,this.value)}foreachChild(i){this.children.inorderTraversal((o,d)=>{d.value&&i(o,d.value)})}}class Ni{constructor(i){this.writeTree_=i}static empty(){return new Ni(new Wn(null))}}function Bi(u,i,o){if(Gn(i))return new Ni(new Wn(o));{const d=u.writeTree_.findRootMostValueAndPath(i);if(null!=d){const g=d.path;let E=d.value;const S=Li(g,i);return E=E.updateChild(S,o),new Ni(u.writeTree_.set(g,E))}{const g=new Wn(o),E=u.writeTree_.setTree(i,g);return new Ni(E)}}}function io(u,i,o){let d=u;return wn(o,(g,E)=>{d=Bi(d,Pr(i,g),E)}),d}function ts(u,i){if(Gn(i))return Ni.empty();{const o=u.writeTree_.setTree(i,new Wn(null));return new Ni(o)}}function Qo(u,i){return null!=wo(u,i)}function wo(u,i){const o=u.writeTree_.findRootMostValueAndPath(i);return null!=o?u.writeTree_.get(o.path).getChild(Li(o.path,i)):null}function Nl(u){const i=[],o=u.writeTree_.value;return null!=o?o.isLeafNode()||o.forEachChild(Ar,(d,g)=>{i.push(new Jn(d,g))}):u.writeTree_.children.inorderTraversal((d,g)=>{null!=g.value&&i.push(new Jn(d,g.value))}),i}function so(u,i){if(Gn(i))return u;{const o=wo(u,i);return new Ni(null!=o?new Wn(o):u.writeTree_.subtree(i))}}function Ja(u){return u.writeTree_.isEmpty()}function Fo(u,i){return ml(dr(),u.writeTree_,i)}function ml(u,i,o){if(null!=i.value)return o.updateChild(u,i.value);{let d=null;return i.children.inorderTraversal((g,E)=>{".priority"===g?((0,se.hu)(null!==E.value,"Priority writes must always be leaf nodes"),d=E.value):o=ml(Pr(u,g),E,o)}),!o.getChild(u).isEmpty()&&null!==d&&(o=o.updateChild(Pr(u,".priority"),d)),o}}function Pl(u,i){return Fl(i,u)}function bs(u,i){if(u.snap)return qi(u.path,i);for(const o in u.children)if(u.children.hasOwnProperty(o)&&qi(Pr(u.path,o),i))return!0;return!1}function Ol(u){return u.visible}function Vt(u,i,o){let d=Ni.empty();for(let g=0;g<u.length;++g){const E=u[g];if(i(E)){const S=E.path;let O;if(E.snap)qi(o,S)?(O=Li(o,S),d=Bi(d,O,E.snap)):qi(S,o)&&(O=Li(S,o),d=Bi(d,dr(),E.snap.getChild(O)));else{if(!E.children)throw(0,se.g5)("WriteRecord should have .snap or .children");if(qi(o,S))O=Li(o,S),d=io(d,O,E.children);else if(qi(S,o))if(O=Li(S,o),Gn(O))d=io(d,dr(),E.children);else{const G=(0,se.DV)(E.children,Cn(O));if(G){const Q=G.getChild(pr(O));d=Bi(d,dr(),Q)}}}}}return d}function Pi(u,i,o,d,g){if(d||g){const E=so(u.visibleWrites,i);return!g&&Ja(E)?o:g||null!=o||Qo(E,dr())?Fo(Vt(u.allWrites,function(Q){return(Q.visible||g)&&(!d||!~d.indexOf(Q.writeId))&&(qi(Q.path,i)||qi(i,Q.path))},i),o||V.EMPTY_NODE):null}{const E=wo(u.visibleWrites,i);if(null!=E)return E;{const S=so(u.visibleWrites,i);return Ja(S)?o:null!=o||Qo(S,dr())?Fo(S,o||V.EMPTY_NODE):null}}}function at(u,i,o,d){return Pi(u.writeTree,u.treePath,i,o,d)}function Tt(u,i){return function ps(u,i,o){let d=V.EMPTY_NODE;const g=wo(u.visibleWrites,i);if(g)return g.isLeafNode()||g.forEachChild(Ar,(E,S)=>{d=d.updateImmediateChild(E,S)}),d;if(o){const E=so(u.visibleWrites,i);return o.forEachChild(Ar,(S,O)=>{const G=Fo(so(E,new nr(S)),O);d=d.updateImmediateChild(S,G)}),Nl(E).forEach(S=>{d=d.updateImmediateChild(S.name,S.node)}),d}return Nl(so(u.visibleWrites,i)).forEach(S=>{d=d.updateImmediateChild(S.name,S.node)}),d}(u.writeTree,u.treePath,i)}function vr(u,i,o,d){return function Pc(u,i,o,d,g){(0,se.hu)(d||g,"Either existingEventSnap or existingServerSnap must exist");const E=Pr(i,o);if(Qo(u.visibleWrites,E))return null;{const S=so(u.visibleWrites,E);return Ja(S)?g.getChild(o):Fo(S,g.getChild(o))}}(u.writeTree,u.treePath,i,o,d)}function Jo(u,i){return function Sn(u,i){return wo(u.visibleWrites,i)}(u.writeTree,Pr(u.treePath,i))}function kl(u,i,o){return function Ot(u,i,o,d){const g=Pr(i,o),E=wo(u.visibleWrites,g);return null!=E?E:d.isCompleteForChild(o)?Fo(so(u.visibleWrites,g),d.getNode().getImmediateChild(o)):null}(u.writeTree,u.treePath,i,o)}function el(u,i){return Fl(Pr(u.treePath,i),u.writeTree)}function Fl(u,i){return{treePath:u,writeTree:i}}class Su{constructor(){this.changeMap=new Map}trackChildChange(i){const o=i.type,d=i.childName;(0,se.hu)("child_added"===o||"child_changed"===o||"child_removed"===o,"Only child changes supported for tracking"),(0,se.hu)(".priority"!==d,"Only non-priority child changes can be tracked.");const g=this.changeMap.get(d);if(g){const E=g.type;if("child_added"===o&&"child_removed"===E)this.changeMap.set(d,Eo(d,i.snapshotNode,g.snapshotNode));else if("child_removed"===o&&"child_added"===E)this.changeMap.delete(d);else if("child_removed"===o&&"child_changed"===E)this.changeMap.set(d,Zi(d,g.oldSnap));else if("child_changed"===o&&"child_added"===E)this.changeMap.set(d,Ds(d,i.snapshotNode));else{if("child_changed"!==o||"child_changed"!==E)throw(0,se.g5)("Illegal combination of changes: "+i+" occurred after "+g);this.changeMap.set(d,Eo(d,i.snapshotNode,g.oldSnap))}}else this.changeMap.set(d,i)}getChanges(){return Array.from(this.changeMap.values())}}const ld=new class ri{getCompleteChild(i){return null}getChildAfterChild(i,o,d){return null}};class Au{constructor(i,o,d=null){this.writes_=i,this.viewCache_=o,this.optCompleteServerCache_=d}getCompleteChild(i){const o=this.viewCache_.eventCache;if(o.isCompleteForChild(i))return o.getNode().getImmediateChild(i);{const d=null!=this.optCompleteServerCache_?new K(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return kl(this.writes_,i,d)}}getChildAfterChild(i,o,d){const g=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:zn(this.viewCache_),E=function oo(u,i,o,d,g,E){return function oc(u,i,o,d,g,E,S){let O;const G=so(u.visibleWrites,i),Q=wo(G,dr());if(null!=Q)O=Q;else{if(null==o)return[];O=Fo(G,o)}if(O=O.withIndex(S),O.isEmpty()||O.isLeafNode())return[];{const Ee=[],Te=S.getCompare(),qe=E?O.getReverseIteratorFrom(d,S):O.getIteratorFrom(d,S);let _t=qe.getNext();for(;_t&&Ee.length<g;)0!==Te(_t,d)&&Ee.push(_t),_t=qe.getNext();return Ee}}(u.writeTree,u.treePath,i,o,d,g,E)}(this.writes_,g,o,1,d,i);return 0===E.length?null:E[0]}}function Oc(u,i,o,d,g,E){const S=i.eventCache;if(null!=Jo(d,o))return i;{let O,G;if(Gn(o))if((0,se.hu)(i.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),i.serverCache.isFiltered()){const Q=zn(i),Te=Tt(d,Q instanceof V?Q:V.EMPTY_NODE);O=u.filter.updateFullNode(i.eventCache.getNode(),Te,E)}else{const Q=at(d,zn(i));O=u.filter.updateFullNode(i.eventCache.getNode(),Q,E)}else{const Q=Cn(o);if(".priority"===Q){(0,se.hu)(1===cs(o),"Can't have a priority with additional path components");const Ee=S.getNode();G=i.serverCache.getNode();const Te=vr(d,o,Ee,G);O=null!=Te?u.filter.updatePriority(Ee,Te):S.getNode()}else{const Ee=pr(o);let Te;if(S.isCompleteForChild(Q)){G=i.serverCache.getNode();const qe=vr(d,o,S.getNode(),G);Te=null!=qe?S.getNode().getImmediateChild(Q).updateChild(Ee,qe):S.getNode().getImmediateChild(Q)}else Te=kl(d,Q,i.serverCache);O=null!=Te?u.filter.updateChild(S.getNode(),Q,Te,Ee,g,E):S.getNode()}}return tr(i,O,S.isFullyInitialized()||Gn(o),u.filter.filtersNodes())}}function Qr(u,i,o,d,g,E,S,O){const G=i.serverCache;let Q;const Ee=S?u.filter:u.filter.getIndexedFilter();if(Gn(o))Q=Ee.updateFullNode(G.getNode(),d,null);else if(Ee.filtersNodes()&&!G.isFiltered()){const _t=G.getNode().updateChild(o,d);Q=Ee.updateFullNode(G.getNode(),_t,null)}else{const _t=Cn(o);if(!G.isCompleteForPath(o)&&cs(o)>1)return i;const Ze=pr(o),Tn=G.getNode().getImmediateChild(_t).updateChild(Ze,d);Q=".priority"===_t?Ee.updatePriority(G.getNode(),Tn):Ee.updateChild(G.getNode(),_t,Tn,Ze,ld,null)}const Te=Yn(i,Q,G.isFullyInitialized()||Gn(o),Ee.filtersNodes());return Oc(u,Te,o,g,new Au(g,Te,E),O)}function Nn(u,i,o,d,g,E,S){const O=i.eventCache;let G,Q;const Ee=new Au(g,i,E);if(Gn(o))Q=u.filter.updateFullNode(i.eventCache.getNode(),d,S),G=tr(i,Q,!0,u.filter.filtersNodes());else{const Te=Cn(o);if(".priority"===Te)Q=u.filter.updatePriority(i.eventCache.getNode(),d),G=tr(i,Q,O.isFullyInitialized(),O.isFiltered());else{const qe=pr(o),_t=O.getNode().getImmediateChild(Te);let Ze;if(Gn(qe))Ze=d;else{const Zt=Ee.getCompleteChild(Te);Ze=null!=Zt?".priority"===ds(qe)&&Zt.getChild(mo(qe)).isEmpty()?Zt:Zt.updateChild(qe,d):V.EMPTY_NODE}G=_t.equals(Ze)?i:tr(i,u.filter.updateChild(O.getNode(),Te,Ze,qe,Ee,S),O.isFullyInitialized(),u.filter.filtersNodes())}}return G}function Na(u,i){return u.eventCache.isCompleteForChild(i)}function Mu(u,i,o){return o.foreach((d,g)=>{i=i.updateChild(d,g)}),i}function _i(u,i,o,d,g,E,S,O){if(i.serverCache.getNode().isEmpty()&&!i.serverCache.isFullyInitialized())return i;let Q,G=i;Q=Gn(o)?d:new Wn(null).setTree(o,d);const Ee=i.serverCache.getNode();return Q.children.inorderTraversal((Te,qe)=>{if(Ee.hasChild(Te)){const Ze=Mu(0,i.serverCache.getNode().getImmediateChild(Te),qe);G=Qr(u,G,new nr(Te),Ze,g,E,S,O)}}),Q.children.inorderTraversal((Te,qe)=>{const _t=!i.serverCache.isCompleteForChild(Te)&&null===qe.value;if(!Ee.hasChild(Te)&&!_t){const Zt=Mu(0,i.serverCache.getNode().getImmediateChild(Te),qe);G=Qr(u,G,new nr(Te),Zt,g,E,S,O)}}),G}class Bs{constructor(i,o){this.query_=i,this.eventRegistrations_=[];const d=this.query_._queryParams,g=new fs(d.getIndex()),E=function pa(u){return u.loadsAllData()?new fs(u.getIndex()):u.hasLimit()?new ha(u):new da(u)}(d);this.processor_=function Ll(u){return{filter:u}}(E);const S=o.serverCache,O=o.eventCache,G=g.updateFullNode(V.EMPTY_NODE,S.getNode(),null),Q=E.updateFullNode(V.EMPTY_NODE,O.getNode(),null),Ee=new K(G,S.isFullyInitialized(),g.filtersNodes()),Te=new K(Q,O.isFullyInitialized(),E.filtersNodes());this.viewCache_=mn(Te,Ee),this.eventGenerator_=new U(this.query_)}get query(){return this.query_}}function jl(u,i){const o=zn(u.viewCache_);return o&&(u.query._queryParams.loadsAllData()||!Gn(i)&&!o.getImmediateChild(Cn(i)).isEmpty())?o.getChild(i):null}function Hl(u){return 0===u.eventRegistrations_.length}function kc(u,i,o){const d=[];if(o){(0,se.hu)(null==i,"A cancel should cancel all event registrations.");const g=u.query._path;u.eventRegistrations_.forEach(E=>{const S=E.createCancelEvent(o,g);S&&d.push(S)})}if(i){let g=[];for(let E=0;E<u.eventRegistrations_.length;++E){const S=u.eventRegistrations_[E];if(S.matches(i)){if(i.hasAnyCallback()){g=g.concat(u.eventRegistrations_.slice(E+1));break}}else g.push(S)}u.eventRegistrations_=g}else u.eventRegistrations_=[];return d}function ao(u,i,o,d){i.type===zi.MERGE&&null!==i.source.queryId&&((0,se.hu)(zn(u.viewCache_),"We should always have a full cache before handling merges"),(0,se.hu)(Zn(u.viewCache_),"Missing event cache, even though we have a server cache"));const g=u.viewCache_,E=function ir(u,i,o,d,g){const E=new Su;let S,O;if(o.type===zi.OVERWRITE){const Q=o;Q.source.fromUser?S=Nn(u,i,Q.path,Q.snap,d,g,E):((0,se.hu)(Q.source.fromServer,"Unknown source."),O=Q.source.tagged||i.serverCache.isFiltered()&&!Gn(Q.path),S=Qr(u,i,Q.path,Q.snap,d,g,O,E))}else if(o.type===zi.MERGE){const Q=o;Q.source.fromUser?S=function $n(u,i,o,d,g,E,S){let O=i;return d.foreach((G,Q)=>{const Ee=Pr(o,G);Na(i,Cn(Ee))&&(O=Nn(u,O,Ee,Q,g,E,S))}),d.foreach((G,Q)=>{const Ee=Pr(o,G);Na(i,Cn(Ee))||(O=Nn(u,O,Ee,Q,g,E,S))}),O}(u,i,Q.path,Q.children,d,g,E):((0,se.hu)(Q.source.fromServer,"Unknown source."),O=Q.source.tagged||i.serverCache.isFiltered(),S=_i(u,i,Q.path,Q.children,d,g,O,E))}else if(o.type===zi.ACK_USER_WRITE){const Q=o;S=Q.revert?function Ts(u,i,o,d,g,E){let S;if(null!=Jo(d,o))return i;{const O=new Au(d,i,g),G=i.eventCache.getNode();let Q;if(Gn(o)||".priority"===Cn(o)){let Ee;if(i.serverCache.isFullyInitialized())Ee=at(d,zn(i));else{const Te=i.serverCache.getNode();(0,se.hu)(Te instanceof V,"serverChildren would be complete if leaf node"),Ee=Tt(d,Te)}Q=u.filter.updateFullNode(G,Ee,E)}else{const Ee=Cn(o);let Te=kl(d,Ee,i.serverCache);null==Te&&i.serverCache.isCompleteForChild(Ee)&&(Te=G.getImmediateChild(Ee)),Q=null!=Te?u.filter.updateChild(G,Ee,Te,pr(o),O,E):i.eventCache.getNode().hasChild(Ee)?u.filter.updateChild(G,Ee,V.EMPTY_NODE,pr(o),O,E):G,Q.isEmpty()&&i.serverCache.isFullyInitialized()&&(S=at(d,zn(i)),S.isLeafNode()&&(Q=u.filter.updateFullNode(Q,S,E)))}return S=i.serverCache.isFullyInitialized()||null!=Jo(d,dr()),tr(i,Q,S,u.filter.filtersNodes())}}(u,i,Q.path,d,g,E):function on(u,i,o,d,g,E,S){if(null!=Jo(g,o))return i;const O=i.serverCache.isFiltered(),G=i.serverCache;if(null!=d.value){if(Gn(o)&&G.isFullyInitialized()||G.isCompleteForPath(o))return Qr(u,i,o,G.getNode().getChild(o),g,E,O,S);if(Gn(o)){let Q=new Wn(null);return G.getNode().forEachChild(Ks,(Ee,Te)=>{Q=Q.set(new nr(Ee),Te)}),_i(u,i,o,Q,g,E,O,S)}return i}{let Q=new Wn(null);return d.foreach((Ee,Te)=>{const qe=Pr(o,Ee);G.isCompleteForPath(qe)&&(Q=Q.set(Ee,G.getNode().getChild(qe)))}),_i(u,i,o,Q,g,E,O,S)}}(u,i,Q.path,Q.affectedTree,d,g,E)}else{if(o.type!==zi.LISTEN_COMPLETE)throw(0,se.g5)("Unknown operation type: "+o.type);S=function Ul(u,i,o,d,g){const E=i.serverCache;return Oc(u,Yn(i,E.getNode(),E.isFullyInitialized()||Gn(o),E.isFiltered()),o,d,ld,g)}(u,i,o.path,d,E)}const G=E.getChanges();return function Vl(u,i,o){const d=i.eventCache;if(d.isFullyInitialized()){const g=d.getNode().isLeafNode()||d.getNode().isEmpty(),E=Zn(u);(o.length>0||!u.eventCache.isFullyInitialized()||g&&!d.getNode().equals(E)||!d.getNode().getPriority().equals(E.getPriority()))&&o.push(Ps(Zn(i)))}}(i,S,G),{viewCache:S,changes:G}}(u.processor_,g,i,o,d);return function Ru(u,i){(0,se.hu)(i.eventCache.getNode().isIndexed(u.filter.getIndex()),"Event snap not indexed"),(0,se.hu)(i.serverCache.getNode().isIndexed(u.filter.getIndex()),"Server snap not indexed")}(u.processor_,E.viewCache),(0,se.hu)(E.viewCache.serverCache.isFullyInitialized()||!g.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),u.viewCache_=E.viewCache,yl(u,E.changes,E.viewCache.eventCache.getNode(),null)}function yl(u,i,o,d){return function te(u,i,o,d){const g=[],E=[];return i.forEach(S=>{"child_changed"===S.type&&u.index_.indexedValueChanged(S.oldSnap,S.snapshotNode)&&E.push(function su(u,i){return{type:"child_moved",snapshotNode:i,childName:u}}(S.childName,S.snapshotNode))}),Ie(u,g,"child_removed",i,d,o),Ie(u,g,"child_added",i,d,o),Ie(u,g,"child_moved",E,d,o),Ie(u,g,"child_changed",i,d,o),Ie(u,g,"value",i,d,o),g}(u.eventGenerator_,i,o,d?[d]:u.eventRegistrations_)}let js,Lr;class Xo{constructor(){this.views=new Map}}function P(u,i,o,d){const g=i.source.queryId;if(null!==g){const E=u.views.get(g);return(0,se.hu)(null!=E,"SyncTree gave us an op for an invalid query."),ao(E,i,o,d)}{let E=[];for(const S of u.views.values())E=E.concat(ao(S,i,o,d));return E}}function B(u,i,o,d,g){const S=u.views.get(i._queryIdentifier);if(!S){let O=at(o,g?d:null),G=!1;O?G=!0:d instanceof V?(O=Tt(o,d),G=!1):(O=V.EMPTY_NODE,G=!1);const Q=mn(new K(O,G,!1),new K(d,g,!1));return new Bs(i,Q)}return S}function ve(u){const i=[];for(const o of u.views.values())o.query._queryParams.loadsAllData()||i.push(o);return i}function ut(u,i){let o=null;for(const d of u.views.values())o=o||jl(d,i);return o}function qt(u,i){return i._queryParams.loadsAllData()?Er(u):u.views.get(i._queryIdentifier)}function Kn(u,i){return null!=qt(u,i)}function ln(u){return null!=Er(u)}function Er(u){for(const i of u.views.values())if(i.query._queryParams.loadsAllData())return i;return null}let Lo=1;class rs{constructor(i){this.listenProvider_=i,this.syncPointTree_=new Wn(null),this.pendingWriteTree_=function nn(){return{visibleWrites:Ni.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wa(u,i,o,d,g){return function Xa(u,i,o,d,g){(0,se.hu)(d>u.lastWriteId,"Stacking an older write on top of newer ones"),void 0===g&&(g=!0),u.allWrites.push({path:i,snap:o,writeId:d,visible:g}),g&&(u.visibleWrites=Bi(u.visibleWrites,i,o)),u.lastWriteId=d}(u.pendingWriteTree_,i,o,d,g),g?Pa(u,new Or({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,o)):[]}function hi(u,i,o=!1){const d=function ns(u,i){for(let o=0;o<u.allWrites.length;o++){const d=u.allWrites[o];if(d.writeId===i)return d}return null}(u.pendingWriteTree_,i);if(function Tu(u,i){const o=u.allWrites.findIndex(O=>O.writeId===i);(0,se.hu)(o>=0,"removeWrite called with nonexistent writeId.");const d=u.allWrites[o];u.allWrites.splice(o,1);let g=d.visible,E=!1,S=u.allWrites.length-1;for(;g&&S>=0;){const O=u.allWrites[S];O.visible&&(S>=o&&bs(O,d.path)?g=!1:qi(d.path,O.path)&&(E=!0)),S--}return!!g&&(E?(function au(u){u.visibleWrites=Vt(u.allWrites,Ol,dr()),u.lastWriteId=u.allWrites.length>0?u.allWrites[u.allWrites.length-1].writeId:-1}(u),!0):(d.snap?u.visibleWrites=ts(u.visibleWrites,d.path):wn(d.children,G=>{u.visibleWrites=ts(u.visibleWrites,Pr(d.path,G))}),!0))}(u.pendingWriteTree_,i)){let E=new Wn(null);return null!=d.snap?E=E.set(dr(),!0):wn(d.children,S=>{E=E.set(new nr(S),!0)}),Pa(u,new Ri(d.path,E,o))}return[]}function lu(u,i,o){return Pa(u,new Or({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,o))}function Fc(u,i,o,d,g=!1){const E=i._path,S=u.syncPointTree_.get(E);let O=[];if(S&&("default"===i._queryIdentifier||Kn(S,i))){const G=function ce(u,i,o,d){const g=i._queryIdentifier,E=[];let S=[];const O=ln(u);if("default"===g)for(const[G,Q]of u.views.entries())S=S.concat(kc(Q,o,d)),Hl(Q)&&(u.views.delete(G),Q.query._queryParams.loadsAllData()||E.push(Q.query));else{const G=u.views.get(g);G&&(S=S.concat(kc(G,o,d)),Hl(G)&&(u.views.delete(g),G.query._queryParams.loadsAllData()||E.push(G.query)))}return O&&!ln(u)&&E.push(new(function I(){return(0,se.hu)(js,"Reference.ts has not been loaded"),js}())(i._repo,i._path)),{removed:E,events:S}}(S,i,o,d);(function b(u){return 0===u.views.size})(S)&&(u.syncPointTree_=u.syncPointTree_.remove(E));const Q=G.removed;if(O=G.events,!g){const Ee=-1!==Q.findIndex(qe=>qe._queryParams.loadsAllData()),Te=u.syncPointTree_.findOnPath(E,(qe,_t)=>ln(_t));if(Ee&&!Te){const qe=u.syncPointTree_.subtree(E);if(!qe.isEmpty()){const _t=function Ff(u){return u.fold((i,o,d)=>{if(o&&ln(o))return[Er(o)];{let g=[];return o&&(g=ve(o)),wn(d,(E,S)=>{g=g.concat(S)}),g}})}(qe);for(let Ze=0;Ze<_t.length;++Ze){const Zt=_t[Ze],Tn=Zt.query,Cr=zd(u,Zt);u.listenProvider_.startListening(Ia(Tn),Vc(u,Tn),Cr.hashFn,Cr.onComplete)}}}!Te&&Q.length>0&&!d&&(Ee?u.listenProvider_.stopListening(Ia(i),null):Q.forEach(qe=>{const _t=u.queryToTagMap.get(vl(qe));u.listenProvider_.stopListening(Ia(qe),_t)}))}!function dc(u,i){for(let o=0;o<i.length;++o){const d=i[o];if(!d._queryParams.loadsAllData()){const g=vl(d),E=u.queryToTagMap.get(g);u.queryToTagMap.delete(g),u.tagToQueryMap.delete(E)}}}(u,Q)}return O}function uu(u,i,o,d){const g=uc(u,d);if(null!=g){const E=cc(g),S=E.path,O=E.queryId,G=Li(S,i);return Uc(u,S,new Or(bu(O),G,o))}return[]}function Lc(u,i,o,d=!1){const g=i._path;let E=null,S=!1;u.syncPointTree_.foreachOnPath(g,(qe,_t)=>{const Ze=Li(qe,g);E=E||ut(_t,Ze),S=S||ln(_t)});let G,O=u.syncPointTree_.get(g);O?(S=S||ln(O),E=E||ut(O,dr())):(O=new Xo,u.syncPointTree_=u.syncPointTree_.set(g,O)),null!=E?G=!0:(G=!1,E=V.EMPTY_NODE,u.syncPointTree_.subtree(g).foreachChild((_t,Ze)=>{const Zt=ut(Ze,dr());Zt&&(E=E.updateImmediateChild(_t,Zt))}));const Q=Kn(O,i);if(!Q&&!i._queryParams.loadsAllData()){const qe=vl(i);(0,se.hu)(!u.queryToTagMap.has(qe),"View does not exist, but we have a tag");const _t=function Lf(){return Lo++}();u.queryToTagMap.set(qe,_t),u.tagToQueryMap.set(_t,qe)}let Te=function ee(u,i,o,d,g,E){const S=B(u,i,d,g,E);return u.views.has(i._queryIdentifier)||u.views.set(i._queryIdentifier,S),function lc(u,i){u.eventRegistrations_.push(i)}(S,o),function ud(u,i){const o=u.viewCache_.eventCache,d=[];return o.getNode().isLeafNode()||o.getNode().forEachChild(Ar,(E,S)=>{d.push(Ds(E,S))}),o.isFullyInitialized()&&d.push(Ps(o.getNode())),yl(u,d,o.getNode(),i)}(S,o)}(O,i,o,Pl(u.pendingWriteTree_,g),E,G);if(!Q&&!S&&!d){const qe=qt(O,i);Te=Te.concat(function hd(u,i,o){const d=i._path,g=Vc(u,i),E=zd(u,o),S=u.listenProvider_.startListening(Ia(i),g,E.hashFn,E.onComplete),O=u.syncPointTree_.subtree(d);if(g)(0,se.hu)(!ln(O.value),"If we're adding a query, it shouldn't be shadowed");else{const G=O.fold((Q,Ee,Te)=>{if(!Gn(Q)&&Ee&&ln(Ee))return[Er(Ee).query];{let qe=[];return Ee&&(qe=qe.concat(ve(Ee).map(_t=>_t.query))),wn(Te,(_t,Ze)=>{qe=qe.concat(Ze)}),qe}});for(let Q=0;Q<G.length;++Q){const Ee=G[Q];u.listenProvider_.stopListening(Ia(Ee),Vc(u,Ee))}}return S}(u,i,qe))}return Te}function xu(u,i,o){const g=u.pendingWriteTree_,E=u.syncPointTree_.findOnPath(i,(S,O)=>{const Q=ut(O,Li(S,i));if(Q)return Q});return Pi(g,i,E,o,!0)}function Pa(u,i){return dd(i,u.syncPointTree_,null,Pl(u.pendingWriteTree_,dr()))}function dd(u,i,o,d){if(Gn(u.path))return Nu(u,i,o,d);{const g=i.get(dr());null==o&&null!=g&&(o=ut(g,dr()));let E=[];const S=Cn(u.path),O=u.operationForChild(S),G=i.children.get(S);if(G&&O){const Q=o?o.getImmediateChild(S):null,Ee=el(d,S);E=E.concat(dd(O,G,Q,Ee))}return g&&(E=E.concat(P(g,u,d,o))),E}}function Nu(u,i,o,d){const g=i.get(dr());null==o&&null!=g&&(o=ut(g,dr()));let E=[];return i.children.inorderTraversal((S,O)=>{const G=o?o.getImmediateChild(S):null,Q=el(d,S),Ee=u.operationForChild(S);Ee&&(E=E.concat(Nu(Ee,O,G,Q)))}),g&&(E=E.concat(P(g,u,d,o))),E}function zd(u,i){const o=i.query,d=Vc(u,o);return{hashFn:()=>(function ac(u){return u.viewCache_.serverCache.getNode()}(i)||V.EMPTY_NODE).hash(),onComplete:g=>{if("ok"===g)return d?function cd(u,i,o){const d=uc(u,o);if(d){const g=cc(d),E=g.path,S=g.queryId,O=Li(E,i);return Uc(u,E,new Ea(bu(S),O))}return[]}(u,o._path,d):function $d(u,i){return Pa(u,new Ea({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i))}(u,o._path);{const E=function Oi(u,i){let o="Unknown Error";"too_big"===u?o="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===u?o="Client doesn't have permission to access the desired data.":"unavailable"===u&&(o="The service is unavailable");const d=new Error(u+" at "+i._path.toString()+": "+o);return d.code=u.toUpperCase(),d}(g,o);return Fc(u,o,null,E)}}}}function Vc(u,i){const o=vl(i);return u.queryToTagMap.get(o)}function vl(u){return u._path.toString()+"$"+u._queryIdentifier}function uc(u,i){return u.tagToQueryMap.get(i)}function cc(u){const i=u.indexOf("$");return(0,se.hu)(-1!==i&&i<u.length-1,"Bad queryKey."),{queryId:u.substr(i+1),path:new nr(u.substr(0,i))}}function Uc(u,i,o){const d=u.syncPointTree_.get(i);return(0,se.hu)(d,"Missing sync point for query tag that we're tracking"),P(d,o,Pl(u.pendingWriteTree_,i),null)}function Ia(u){return u._queryParams.loadsAllData()&&!u._queryParams.isDefault()?new(function ea(){return(0,se.hu)(Lr,"Reference.ts has not been loaded"),Lr}())(u._repo,u._path):u}class Ss{constructor(i){this.node_=i}getImmediateChild(i){const o=this.node_.getImmediateChild(i);return new Ss(o)}node(){return this.node_}}class Wd{constructor(i,o){this.syncTree_=i,this.path_=o}getImmediateChild(i){const o=Pr(this.path_,i);return new Wd(this.syncTree_,o)}node(){return xu(this.syncTree_,this.path_)}}const Kd=function(u,i,o){return u&&"object"==typeof u?((0,se.hu)(".sv"in u,"Unexpected leaf node or priority contents"),"string"==typeof u[".sv"]?Si(u[".sv"],i,o):"object"==typeof u[".sv"]?Pu(u[".sv"],i):void(0,se.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2))):u},Si=function(u,i,o){if("timestamp"===u)return o.timestamp;(0,se.hu)(!1,"Unexpected server value: "+u)},Pu=function(u,i,o){u.hasOwnProperty("increment")||(0,se.hu)(!1,"Unexpected server value: "+JSON.stringify(u,null,2));const d=u.increment;"number"!=typeof d&&(0,se.hu)(!1,"Unexpected increment value: "+d);const g=i.node();if((0,se.hu)(null!==g&&typeof g<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!g.isLeafNode())return d;const S=g.getValue();return"number"!=typeof S?d:S+d},is=function(u,i,o,d){return cu(i,new Wd(o,u),d)},fi=function(u,i,o){return cu(u,new Ss(i),o)};function cu(u,i,o){const d=u.getPriority().val(),g=Kd(d,i.getImmediateChild(".priority"),o);let E;if(u.isLeafNode()){const S=u,O=Kd(S.getValue(),i,o);return O!==S.getValue()||g!==S.getPriority().val()?new Po(O,Lt(g)):u}{const S=u;return E=S,g!==S.getPriority().val()&&(E=E.updatePriority(new Po(g))),S.forEachChild(Ar,(O,G)=>{const Q=cu(G,i.getImmediateChild(O),o);Q!==G&&(E=E.updateImmediateChild(O,Q))}),E}}class tl{constructor(i="",o=null,d={children:{},childCount:0}){this.name=i,this.parent=o,this.node=d}}function Hs(u,i){let o=i instanceof nr?i:new nr(i),d=u,g=Cn(o);for(;null!==g;){const E=(0,se.DV)(d.node.children,g)||{children:{},childCount:0};d=new tl(g,d,E),o=pr(o),g=Cn(o)}return d}function Oa(u){return u.node.value}function Bc(u,i){u.node.value=i,ka(u)}function gs(u){return u.node.childCount>0}function ta(u,i){wn(u.node.children,(o,d)=>{i(new tl(o,u,d))})}function As(u,i,o,d){o&&!d&&i(u),ta(u,g=>{As(g,i,!0,d)}),o&&d&&i(u)}function El(u){return new nr(null===u.parent?u.name:El(u.parent)+"/"+u.name)}function ka(u){null!==u.parent&&function jc(u,i,o){const d=function Vf(u){return void 0===Oa(u)&&!gs(u)}(o),g=(0,se.r3)(u.node.children,i);d&&g?(delete u.node.children[i],u.node.childCount--,ka(u)):!d&&!g&&(u.node.children[i]=o.node,u.node.childCount++,ka(u))}(u.parent,u.name,u)}const Bp=/[\[\].#$\/\u0000-\u001F\u007F]/,hu=/[\[\].#$\u0000-\u001F\u007F]/,Vo=10485760,wl=function(u){return"string"==typeof u&&0!==u.length&&!Bp.test(u)},Io=function(u){return"string"==typeof u&&0!==u.length&&!hu.test(u)},Gl=function(u){return null===u||"string"==typeof u||"number"==typeof u&&!xi(u)||u&&"object"==typeof u&&(0,se.r3)(u,".sv")},$s=function(u,i,o,d){d&&void 0===i||Ou((0,se.gK)(u,"value"),i,o)},Ou=function(u,i,o){const d=o instanceof nr?new hl(o,u):o;if(void 0===i)throw new Error(u+"contains undefined "+zs(d));if("function"==typeof i)throw new Error(u+"contains a function "+zs(d)+" with contents = "+i.toString());if(xi(i))throw new Error(u+"contains "+i.toString()+" "+zs(d));if("string"==typeof i&&i.length>Vo/3&&(0,se.ug)(i)>Vo)throw new Error(u+"contains a string greater than "+Vo+" utf8 bytes "+zs(d)+" ('"+i.substring(0,50)+"...')");if(i&&"object"==typeof i){let g=!1,E=!1;if(wn(i,(S,O)=>{if(".value"===S)g=!0;else if(".priority"!==S&&".sv"!==S&&(E=!0,!wl(S)))throw new Error(u+" contains an invalid key ("+S+") "+zs(d)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Ci(u,i){u.parts_.length>0&&(u.byteLength_+=1),u.parts_.push(i),u.byteLength_+=(0,se.ug)(i),Ka(u)})(d,S),Ou(u,O,d),function Kr(u){const i=u.parts_.pop();u.byteLength_-=(0,se.ug)(i),u.parts_.length>0&&(u.byteLength_-=1)}(d)}),g&&E)throw new Error(u+' contains ".value" child '+zs(d)+" in addition to actual children.")}},qd=function(u,i,o,d){if(d&&void 0===i)return;const g=(0,se.gK)(u,"values");if(!i||"object"!=typeof i||Array.isArray(i))throw new Error(g+" must be an object containing the children to replace.");const E=[];wn(i,(S,O)=>{const G=new nr(S);if(Ou(g,O,Pr(o,G)),".priority"===ds(G)&&!Gl(O))throw new Error(g+"contains an invalid value for '"+G.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");E.push(G)}),function(u,i){let o,d;for(o=0;o<i.length;o++){d=i[o];const E=ai(d);for(let S=0;S<E.length;S++)if((".priority"!==E[S]||S!==E.length-1)&&!wl(E[S]))throw new Error(u+"contains an invalid key ("+E[S]+") in path "+d.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}i.sort(xl);let g=null;for(o=0;o<i.length;o++){if(d=i[o],null!==g&&qi(g,d))throw new Error(u+"contains a path "+g.toString()+" that is ancestor of another path "+d.toString());g=d}}(g,E)},R=function(u,i,o){if(!o||void 0!==i){if(xi(i))throw new Error((0,se.gK)(u,"priority")+"is "+i.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!Gl(i))throw new Error((0,se.gK)(u,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},k=function(u,i,o,d){if(!(d&&void 0===o||wl(o)))throw new Error((0,se.gK)(u,i)+'was an invalid key = "'+o+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Z=function(u,i,o,d){if(!(d&&void 0===o||Io(o)))throw new Error((0,se.gK)(u,i)+'was an invalid path = "'+o+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},be=function(u,i){if(".info"===Cn(i))throw new Error(u+" failed = Can't modify data under /.info/")},ze=function(u,i){const o=i.path.toString();if("string"!=typeof i.repoInfo.host||0===i.repoInfo.host.length||!wl(i.repoInfo.namespace)&&"localhost"!==i.repoInfo.host.split(":")[0]||0!==o.length&&!function(u){return u&&(u=u.replace(/^\/*\.info(\/|$)/,"/")),Io(u)}(o))throw new Error((0,se.gK)(u,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class yt{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Yt(u,i){let o=null;for(let d=0;d<i.length;d++){const g=i[d],E=g.getPath();null!==o&&!No(E,o.path)&&(u.eventLists_.push(o),o=null),null===o&&(o={events:[],path:E}),o.events.push(g)}o&&u.eventLists_.push(o)}function en(u,i,o){Yt(u,o),Pn(u,d=>No(d,i))}function hn(u,i,o){Yt(u,o),Pn(u,d=>qi(d,i)||qi(i,d))}function Pn(u,i){u.recursionDepth_++;let o=!0;for(let d=0;d<u.eventLists_.length;d++){const g=u.eventLists_[d];g&&(i(g.path)?(sr(u.eventLists_[d]),u.eventLists_[d]=null):o=!1)}o&&(u.eventLists_=[]),u.recursionDepth_--}function sr(u){for(let i=0;i<u.events.length;i++){const o=u.events[i];if(null!==o){u.events[i]=null;const d=o.getEventRunner();Jt&&Fn("event: "+o.toString()),br(d)}}}const Bo="repo_interrupt";class ms{constructor(i,o,d,g){this.repoInfo_=i,this.forceRestClient_=o,this.authTokenProvider_=d,this.appCheckProvider_=g,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new yt,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=qo(),this.transactionQueueTree_=new tl,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function Co(u){const o=u.infoData_.getNode(new nr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+o}function Do(u){return function(u){return(u=u||{}).timestamp=u.timestamp||(new Date).getTime(),u}({timestamp:Co(u)})}function nl(u,i,o,d,g){u.dataUpdateCount++;const E=new nr(i);o=u.interceptServerDataCallback_?u.interceptServerDataCallback_(i,o):o;let S=[];if(g)if(d){const G=(0,se.UI)(o,Q=>Lt(Q));S=function Gd(u,i,o,d){const g=uc(u,d);if(g){const E=cc(g),S=E.path,O=E.queryId,G=Li(S,i),Q=Wn.fromObject(o);return Uc(u,S,new N(bu(O),G,Q))}return[]}(u.serverSyncTree_,E,G,g)}else{const G=Lt(o);S=uu(u.serverSyncTree_,E,G,g)}else if(d){const G=(0,se.UI)(o,Q=>Lt(Q));S=function Yi(u,i,o){const d=Wn.fromObject(o);return Pa(u,new N({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},i,d))}(u.serverSyncTree_,E,G)}else{const G=Lt(o);S=lu(u.serverSyncTree_,E,G)}let O=E;S.length>0&&(O=fu(u,E)),hn(u.eventQueue_,O,S)}function zl(u,i){Zd(u,"connected",i),!1===i&&function pd(u){hc(u,"onDisconnectEvents");const i=Do(u),o=qo();qs(u.onDisconnect_,dr(),(g,E)=>{const S=is(g,E,u.serverSyncTree_,i);ya(o,g,S)});let d=[];qs(o,dr(),(g,E)=>{d=d.concat(lu(u.serverSyncTree_,g,E));const S=yd(u,g);fu(u,S)}),u.onDisconnect_=qo(),hn(u.eventQueue_,dr(),d)}(u)}function Zd(u,i,o){const d=new nr("/.info/"+i),g=Lt(o);u.infoData_.updateSnapshot(d,g);const E=lu(u.infoSyncTree_,d,g);hn(u.eventQueue_,d,E)}function qr(u){return u.nextWriteId_++}function ku(u,i,o,d,g){hc(u,"set",{path:i.toString(),value:o,priority:d});const E=Do(u),S=Lt(o,d),O=xu(u.serverSyncTree_,i),G=fi(S,O,E),Q=qr(u),Ee=wa(u.serverSyncTree_,i,G,Q,!0);Yt(u.eventQueue_,Ee),u.server_.put(i.toString(),S.val(!0),(qe,_t)=>{const Ze="ok"===qe;Ze||er("set at "+i+" failed: "+qe);const Zt=hi(u.serverSyncTree_,Q,!Ze);hn(u.eventQueue_,i,Zt),Ca(0,g,qe,_t)});const Te=yd(u,i);fu(u,Te),hn(u.eventQueue_,Te,[])}function Yd(u,i,o){u.server_.onDisconnectCancel(i.toString(),(d,g)=>{"ok"===d&&Zo(u.onDisconnect_,i),Ca(0,o,d,g)})}function zh(u,i,o,d){const g=Lt(o);u.server_.onDisconnectPut(i.toString(),g.val(!0),(E,S)=>{"ok"===E&&ya(u.onDisconnect_,i,g),Ca(0,d,E,S)})}function jf(u,i,o){let d;d=".info"===Cn(i._path)?Fc(u.infoSyncTree_,i,o):Fc(u.serverSyncTree_,i,o),en(u.eventQueue_,i._path,d)}function Hf(u){u.persistentConnection_&&u.persistentConnection_.interrupt(Bo)}function hc(u,...i){let o="";u.persistentConnection_&&(o=u.persistentConnection_.id+":"),Fn(o,...i)}function Ca(u,i,o,d){i&&br(()=>{if("ok"===o)i(null);else{const g=(o||"error").toUpperCase();let E=g;d&&(E+=": "+d);const S=new Error(E);S.code=g,i(S)}})}function fc(u,i,o){return xu(u.serverSyncTree_,i,o)||V.EMPTY_NODE}function pc(u,i=u.transactionQueueTree_){if(i||Jd(u,i),Oa(i)){const o=Hc(u,i);(0,se.hu)(o.length>0,"Sending zero length transaction queue"),o.every(g=>0===g.status)&&function Hp(u,i,o){const d=o.map(Q=>Q.currentWriteId),g=fc(u,i,d);let E=g;const S=g.hash();for(let Q=0;Q<o.length;Q++){const Ee=o[Q];(0,se.hu)(0===Ee.status,"tryToSendTransactionQueue_: items in queue should all be run."),Ee.status=1,Ee.retryCount++;const Te=Li(i,Ee.path);E=E.updateChild(Te,Ee.currentOutputSnapshotRaw)}const O=E.val(!0),G=i;u.server_.put(G.toString(),O,Q=>{hc(u,"transaction put response",{path:G.toString(),status:Q});let Ee=[];if("ok"===Q){const Te=[];for(let qe=0;qe<o.length;qe++)o[qe].status=2,Ee=Ee.concat(hi(u.serverSyncTree_,o[qe].currentWriteId)),o[qe].onComplete&&Te.push(()=>o[qe].onComplete(null,!0,o[qe].currentOutputSnapshotResolved)),o[qe].unwatcher();Jd(u,Hs(u.transactionQueueTree_,i)),pc(u,u.transactionQueueTree_),hn(u.eventQueue_,i,Ee);for(let qe=0;qe<Te.length;qe++)br(Te[qe])}else{if("datastale"===Q)for(let Te=0;Te<o.length;Te++)o[Te].status=3===o[Te].status?4:0;else{er("transaction at "+G.toString()+" failed: "+Q);for(let Te=0;Te<o.length;Te++)o[Te].status=4,o[Te].abortReason=Q}fu(u,i)}},S)}(u,El(i),o)}else gs(i)&&ta(i,o=>{pc(u,o)})}function fu(u,i){const o=md(u,i),d=El(o);return function Fu(u,i,o){if(0===i.length)return;const d=[];let g=[];const S=i.filter(O=>0===O.status).map(O=>O.currentWriteId);for(let O=0;O<i.length;O++){const G=i[O],Q=Li(o,G.path);let Te,Ee=!1;if((0,se.hu)(null!==Q,"rerunTransactionsUnderNode_: relativePath should not be null."),4===G.status)Ee=!0,Te=G.abortReason,g=g.concat(hi(u.serverSyncTree_,G.currentWriteId,!0));else if(0===G.status)if(G.retryCount>=25)Ee=!0,Te="maxretry",g=g.concat(hi(u.serverSyncTree_,G.currentWriteId,!0));else{const qe=fc(u,G.path,S);G.currentInputSnapshot=qe;const _t=i[O].update(qe.val());if(void 0!==_t){Ou("transaction failed: Data returned ",_t,G.path);let Ze=Lt(_t);"object"==typeof _t&&null!=_t&&(0,se.r3)(_t,".priority")||(Ze=Ze.updatePriority(qe.getPriority()));const Tn=G.currentWriteId,Cr=Do(u),Vr=fi(Ze,qe,Cr);G.currentOutputSnapshotRaw=Ze,G.currentOutputSnapshotResolved=Vr,G.currentWriteId=qr(u),S.splice(S.indexOf(Tn),1),g=g.concat(wa(u.serverSyncTree_,G.path,Vr,G.currentWriteId,G.applyLocally)),g=g.concat(hi(u.serverSyncTree_,Tn,!0))}else Ee=!0,Te="nodata",g=g.concat(hi(u.serverSyncTree_,G.currentWriteId,!0))}hn(u.eventQueue_,o,g),g=[],Ee&&(i[O].status=2,setTimeout(i[O].unwatcher,Math.floor(0)),i[O].onComplete&&d.push("nodata"===Te?()=>i[O].onComplete(null,!1,i[O].currentInputSnapshot):()=>i[O].onComplete(new Error(Te),!1,null)))}Jd(u,u.transactionQueueTree_);for(let O=0;O<d.length;O++)br(d[O]);pc(u,u.transactionQueueTree_)}(u,Hc(u,o),d),d}function md(u,i){let o,d=u.transactionQueueTree_;for(o=Cn(i);null!==o&&void 0===Oa(d);)d=Hs(d,o),o=Cn(i=pr(i));return d}function Hc(u,i){const o=[];return Qd(u,i,o),o.sort((d,g)=>d.order-g.order),o}function Qd(u,i,o){const d=Oa(i);if(d)for(let g=0;g<d.length;g++)o.push(d[g]);ta(i,g=>{Qd(u,g,o)})}function Jd(u,i){const o=Oa(i);if(o){let d=0;for(let g=0;g<o.length;g++)2!==o[g].status&&(o[d]=o[g],d++);o.length=d,Bc(i,o.length>0?o:void 0)}ta(i,d=>{Jd(u,d)})}function yd(u,i){const o=El(md(u,i)),d=Hs(u.transactionQueueTree_,i);return function du(u,i,o){let d=o?u:u.parent;for(;null!==d;){if(i(d))return!0;d=d.parent}}(d,g=>{Wl(u,g)}),Wl(u,d),As(d,g=>{Wl(u,g)}),o}function Wl(u,i){const o=Oa(i);if(o){const d=[];let g=[],E=-1;for(let S=0;S<o.length;S++)3===o[S].status||(1===o[S].status?((0,se.hu)(E===S-1,"All SENT items should be at beginning of queue."),E=S,o[S].status=3,o[S].abortReason="set"):((0,se.hu)(0===o[S].status,"Unexpected transaction status in abort"),o[S].unwatcher(),g=g.concat(hi(u.serverSyncTree_,o[S].currentWriteId,!0)),o[S].onComplete&&d.push(o[S].onComplete.bind(null,new Error("set"),!1,null))));-1===E?Bc(i,void 0):o.length=E+1,hn(u.eventQueue_,El(i),g);for(let S=0;S<d.length;S++)br(d[S])}}const Xd=function(u,i){const o=eh(u),d=o.namespace;return"firebase.com"===o.domain&&An(o.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!d||"undefined"===d)&&"localhost"!==o.domain&&An("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),o.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&er("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new oe(o.host,o.secure,d,"ws"===o.scheme||"wss"===o.scheme,i,"",d!==o.subdomain),path:new nr(o.pathString)}},eh=function(u){let i="",o="",d="",g="",E="",S=!0,O="https",G=443;if("string"==typeof u){let Q=u.indexOf("//");Q>=0&&(O=u.substring(0,Q-1),u=u.substring(Q+2));let Ee=u.indexOf("/");-1===Ee&&(Ee=u.length);let Te=u.indexOf("?");-1===Te&&(Te=u.length),i=u.substring(0,Math.min(Ee,Te)),Ee<Te&&(g=function Gf(u){let i="";const o=u.split("/");for(let d=0;d<o.length;d++)if(o[d].length>0){let g=o[d];try{g=decodeURIComponent(g.replace(/\+/g," "))}catch{}i+="/"+g}return i}(u.substring(Ee,Te)));const qe=function gc(u){const i={};"?"===u.charAt(0)&&(u=u.substring(1));for(const o of u.split("&")){if(0===o.length)continue;const d=o.split("=");2===d.length?i[decodeURIComponent(d[0])]=decodeURIComponent(d[1]):er(`Invalid query segment '${o}' in query '${u}'`)}return i}(u.substring(Math.min(u.length,Te)));Q=i.indexOf(":"),Q>=0?(S="https"===O||"wss"===O,G=parseInt(i.substring(Q+1),10)):Q=i.length;const _t=i.slice(0,Q);if("localhost"===_t.toLowerCase())o="localhost";else if(_t.split(".").length<=2)o=_t;else{const Ze=i.indexOf(".");d=i.substring(0,Ze).toLowerCase(),o=i.substring(Ze+1),E=d}"ns"in qe&&(E=qe.ns)}return{host:i,port:G,domain:o,subdomain:d,secure:S,scheme:O,pathString:g,namespace:E}},_d="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",th=function(){let u=0;const i=[];return function(o){const d=o===u;let g;u=o;const E=new Array(8);for(g=7;g>=0;g--)E[g]=_d.charAt(o%64),o=Math.floor(o/64);(0,se.hu)(0===o,"Cannot push at time == 0");let S=E.join("");if(d){for(g=11;g>=0&&63===i[g];g--)i[g]=0;i[g]++}else for(g=0;g<12;g++)i[g]=Math.floor(64*Math.random());for(g=0;g<12;g++)S+=_d.charAt(i[g]);return(0,se.hu)(20===S.length,"nextPushId: Length should be 20."),S}}();class Lu{constructor(i,o,d,g){this.eventType=i,this.eventRegistration=o,this.snapshot=d,this.prevName=g}getPath(){const i=this.snapshot.ref;return"value"===this.eventType?i._path:i.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,se.Wl)(this.snapshot.exportVal())}}class jo{constructor(i,o,d){this.eventRegistration=i,this.error=o,this.path=d}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class rl{constructor(i,o){this.snapshotCallback=i,this.cancelCallback=o}onValue(i,o){this.snapshotCallback.call(null,i,o)}onCancel(i){return(0,se.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,i)}get hasCancelCallback(){return!!this.cancelCallback}matches(i){return this.snapshotCallback===i.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===i.snapshotCallback.userCallback&&this.snapshotCallback.context===i.snapshotCallback.context}}class mc{constructor(i,o){this._repo=i,this._path=o}cancel(){const i=new se.BH;return Yd(this._repo,this._path,i.wrapCallback(()=>{})),i.promise}remove(){be("OnDisconnect.remove",this._path);const i=new se.BH;return zh(this._repo,this._path,null,i.wrapCallback(()=>{})),i.promise}set(i){be("OnDisconnect.set",this._path),$s("OnDisconnect.set",i,this._path,!1);const o=new se.BH;return zh(this._repo,this._path,i,o.wrapCallback(()=>{})),o.promise}setWithPriority(i,o){be("OnDisconnect.setWithPriority",this._path),$s("OnDisconnect.setWithPriority",i,this._path,!1),R("OnDisconnect.setWithPriority",o,!1);const d=new se.BH;return function Bf(u,i,o,d,g){const E=Lt(o,d);u.server_.onDisconnectPut(i.toString(),E.val(!0),(S,O)=>{"ok"===S&&ya(u.onDisconnect_,i,E),Ca(0,g,S,O)})}(this._repo,this._path,i,o,d.wrapCallback(()=>{})),d.promise}update(i){be("OnDisconnect.update",this._path),qd("OnDisconnect.update",i,this._path,!1);const o=new se.BH;return function jp(u,i,o,d){if((0,se.xb)(o))return Fn("onDisconnect().update() called with empty data.  Don't do anything."),void Ca(0,d,"ok",void 0);u.server_.onDisconnectMerge(i.toString(),o,(g,E)=>{"ok"===g&&wn(o,(S,O)=>{const G=Lt(O);ya(u.onDisconnect_,Pr(i,S),G)}),Ca(0,d,g,E)})}(this._repo,this._path,i,o.wrapCallback(()=>{})),o.promise}}class lo{constructor(i,o,d,g){this._repo=i,this._path=o,this._queryParams=d,this._orderByCalled=g}get key(){return Gn(this._path)?null:ds(this._path)}get ref(){return new il(this._repo,this._path)}get _queryIdentifier(){const i=di(this._queryParams),o=cn(i);return"{}"===o?"default":o}get _queryObject(){return di(this._queryParams)}isEqual(i){if(!((i=(0,se.m9)(i))instanceof lo))return!1;const o=this._repo===i._repo,d=No(this._path,i._path);return o&&d&&this._queryIdentifier===i._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Wa(u){let i="";for(let o=u.pieceNum_;o<u.pieces_.length;o++)""!==u.pieces_[o]&&(i+="/"+encodeURIComponent(String(u.pieces_[o])));return i||"/"}(this._path)}}function nh(u,i){if(!0===u._orderByCalled)throw new Error(i+": You can't combine multiple orderBy calls.")}function Il(u){let i=null,o=null;if(u.hasStart()&&(i=u.getIndexStartValue()),u.hasEnd()&&(o=u.getIndexEndValue()),u.getIndex()===Ks){const d="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",g="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(u.hasStart()){if(u.getIndexStartName()!==Qe)throw new Error(d);if("string"!=typeof i)throw new Error(g)}if(u.hasEnd()){if(u.getIndexEndName()!==ge)throw new Error(d);if("string"!=typeof o)throw new Error(g)}}else if(u.getIndex()===Ar){if(null!=i&&!Gl(i)||null!=o&&!Gl(o))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,se.hu)(u.getIndex()instanceof _r||u.getIndex()===Gi,"unknown index type."),null!=i&&"object"==typeof i||null!=o&&"object"==typeof o)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Kl(u){if(u.hasStart()&&u.hasEnd()&&u.hasLimit()&&!u.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class il extends lo{constructor(i,o){super(i,o,new fa,!1)}get parent(){const i=mo(this._path);return null===i?null:new il(this._repo,i)}get root(){let i=this;for(;null!==i.parent;)i=i.parent;return i}}class Vu{constructor(i,o,d){this._node=i,this.ref=o,this._index=d}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(i){const o=new nr(i),d=Uu(this.ref,i);return new Vu(this._node.getChild(o),d,Ar)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(i){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(d,g)=>i(new Vu(g,Uu(this.ref,d),Ar)))}hasChild(i){const o=new nr(i);return!this._node.getChild(o).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Wh(u,i){return(u=(0,se.m9)(u))._checkNotDeleted("ref"),void 0!==i?Uu(u._root,i):u._root}function ql(u,i){(u=(0,se.m9)(u))._checkNotDeleted("refFromURL");const o=Xd(i,u._repo.repoInfo_.nodeAdmin);ze("refFromURL",o);const d=o.repoInfo;return!u._repo.repoInfo_.isCustomHost()&&d.host!==u._repo.repoInfo_.host&&An("refFromURL: Host name does not match the current database: (found "+d.host+" but expected "+u._repo.repoInfo_.host+")"),Wh(u,o.path.toString())}function Uu(u,i){return null===Cn((u=(0,se.m9)(u))._path)?(o=i,o&&(o=o.replace(/^\/*\.info(\/|$)/,"/")),Z("child","path",o,!1)):Z("child","path",i,!1),new il(u._repo,Pr(u._path,i));var o}function ih(u,i){u=(0,se.m9)(u),be("set",u._path),$s("set",i,u._path,!1);const o=new se.BH;return ku(u._repo,u._path,i,null,o.wrapCallback(()=>{})),o.promise}function $c(u,i){qd("update",i,u._path,!1);const o=new se.BH;return function fd(u,i,o,d){hc(u,"update",{path:i.toString(),value:o});let g=!0;const E=Do(u),S={};if(wn(o,(O,G)=>{g=!1,S[O]=is(Pr(i,O),Lt(G),u.serverSyncTree_,E)}),g)Fn("update() called with empty data.  Don't do anything."),Ca(0,d,"ok",void 0);else{const O=qr(u),G=function _l(u,i,o,d){!function ou(u,i,o,d){(0,se.hu)(d>u.lastWriteId,"Stacking an older merge on top of newer ones"),u.allWrites.push({path:i,children:o,writeId:d,visible:!0}),u.visibleWrites=io(u.visibleWrites,i,o),u.lastWriteId=d}(u.pendingWriteTree_,i,o,d);const g=Wn.fromObject(o);return Pa(u,new N({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},i,g))}(u.serverSyncTree_,i,S,O);Yt(u.eventQueue_,G),u.server_.merge(i.toString(),o,(Q,Ee)=>{const Te="ok"===Q;Te||er("update at "+i+" failed: "+Q);const qe=hi(u.serverSyncTree_,O,!Te),_t=qe.length>0?fu(u,i):i;hn(u.eventQueue_,_t,qe),Ca(0,d,Q,Ee)}),wn(o,Q=>{const Ee=yd(u,Pr(i,Q));fu(u,Ee)}),hn(u.eventQueue_,i,[])}}(u._repo,u._path,i,o.wrapCallback(()=>{})),o.promise}function sh(u){u=(0,se.m9)(u);const i=new rl(()=>{}),o=new oh(i);return function vi(u,i,o){const d=function Gh(u,i){const o=i._path;let d=null;u.syncPointTree_.foreachOnPath(o,(Q,Ee)=>{const Te=Li(Q,o);d=d||ut(Ee,Te)});let g=u.syncPointTree_.get(o);g?d=d||ut(g,dr()):(g=new Xo,u.syncPointTree_=u.syncPointTree_.set(o,g));const E=null!=d,S=E?new K(d,!0,!1):null;return function Bl(u){return Zn(u.viewCache_)}(B(g,i,Pl(u.pendingWriteTree_,i._path),E?S.getNode():V.EMPTY_NODE,E))}(u.serverSyncTree_,i);return null!=d?Promise.resolve(d):u.server_.get(i).then(g=>{const E=Lt(g).withIndex(i._queryParams.getIndex());let S;if(Lc(u.serverSyncTree_,i,o,!0),i._queryParams.loadsAllData())S=lu(u.serverSyncTree_,i._path,E);else{const O=Vc(u.serverSyncTree_,i);S=uu(u.serverSyncTree_,i._path,E,O)}return hn(u.eventQueue_,i._path,S),Fc(u.serverSyncTree_,i,o,null,!0),E},g=>(hc(u,"get for query "+(0,se.Wl)(i)+" failed: "+g),Promise.reject(new Error(g))))}(u._repo,u,o).then(d=>new Vu(d,new il(u._repo,u._path),u._queryParams.getIndex()))}class oh{constructor(i){this.callbackContext=i}respondsTo(i){return"value"===i}createEvent(i,o){const d=o._queryParams.getIndex();return new Lu("value",this,new Vu(i.snapshotNode,new il(o._repo,o._path),d))}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,null)}createCancelEvent(i,o){return this.callbackContext.hasCancelCallback?new jo(this,i,o):null}matches(i){return i instanceof oh&&(!i.callbackContext||!this.callbackContext||i.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class gr{constructor(i,o){this.eventType=i,this.callbackContext=o}respondsTo(i){let o="children_added"===i?"child_added":i;return o="children_removed"===o?"child_removed":o,this.eventType===o}createCancelEvent(i,o){return this.callbackContext.hasCancelCallback?new jo(this,i,o):null}createEvent(i,o){(0,se.hu)(null!=i.childName,"Child events should have a childName.");const d=Uu(new il(o._repo,o._path),i.childName),g=o._queryParams.getIndex();return new Lu(i.type,this,new Vu(i.snapshotNode,d,g),i.prevName)}getEventRunner(i){return"cancel"===i.getEventType()?()=>this.callbackContext.onCancel(i.error):()=>this.callbackContext.onValue(i.snapshot,i.prevName)}matches(i){return i instanceof gr&&this.eventType===i.eventType&&(!this.callbackContext||!i.callbackContext||this.callbackContext.matches(i.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Gc(u,i,o,d,g){let E;if("object"==typeof d&&(E=void 0,g=d),"function"==typeof d&&(E=d),g&&g.onlyOnce){const G=o,Q=(Ee,Te)=>{jf(u._repo,u,O),G(Ee,Te)};Q.userCallback=o.userCallback,Q.context=o.context,o=Q}const S=new rl(o,E||void 0),O="value"===i?new oh(S):new gr(i,S);return function gd(u,i,o){let d;d=".info"===Cn(i._path)?Lc(u.infoSyncTree_,i,o):Lc(u.serverSyncTree_,i,o),en(u.eventQueue_,i._path,d)}(u._repo,u,O),()=>jf(u._repo,u,O)}function zc(u,i,o,d){return Gc(u,"value",i,o,d)}function ah(u,i,o,d){return Gc(u,"child_added",i,o,d)}function lh(u,i,o,d){return Gc(u,"child_changed",i,o,d)}function yc(u,i,o,d){return Gc(u,"child_moved",i,o,d)}function Wc(u,i,o,d){return Gc(u,"child_removed",i,o,d)}function Ys(u,i,o){let d=null;const g=o?new rl(o):null;"value"===i?d=new oh(g):i&&(d=new gr(i,g)),jf(u._repo,u,d)}class Da{}class qh extends Da{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){$s("endAt",this._value,i._path,!0);const o=ma(i._queryParams,this._value,this._key);if(Kl(o),Il(o),i._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lo(i._repo,i._path,o,i._orderByCalled)}}class Bu extends Da{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){$s("endBefore",this._value,i._path,!1);const o=function Ya(u,i,o){let d;return d=ma(u,i,u.index_===Ks||o?o:Qe),d.endBeforeSet_=!0,d}(i._queryParams,this._value,this._key);if(Kl(o),Il(o),i._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new lo(i._repo,i._path,o,i._orderByCalled)}}class _c extends Da{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){$s("startAt",this._value,i._path,!0);const o=ga(i._queryParams,this._value,this._key);if(Kl(o),Il(o),i._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new lo(i._repo,i._path,o,i._orderByCalled)}}class ju extends Da{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){$s("startAfter",this._value,i._path,!1);const o=function Za(u,i,o){let d;return d=ga(u,i,u.index_===Ks||o?o:ge),d.startAfterSet_=!0,d}(i._queryParams,this._value,this._key);if(Kl(o),Il(o),i._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new lo(i._repo,i._path,o,i._orderByCalled)}}class Yh extends Da{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new lo(i._repo,i._path,function qa(u,i){const o=u.copy();return o.limitSet_=!0,o.limit_=i,o.viewFrom_="l",o}(i._queryParams,this._limit),i._orderByCalled)}}class $p extends Da{constructor(i){super(),this._limit=i}_apply(i){if(i._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new lo(i._repo,i._path,function pl(u,i){const o=u.copy();return o.limitSet_=!0,o.limit_=i,o.viewFrom_="r",o}(i._queryParams,this._limit),i._orderByCalled)}}class ss extends Da{constructor(i){super(),this._path=i}_apply(i){nh(i,"orderByChild");const o=new nr(this._path);if(Gn(o))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const d=new _r(o),g=Hr(i._queryParams,d);return Il(g),new lo(i._repo,i._path,g,!0)}}class wd extends Da{_apply(i){nh(i,"orderByKey");const o=Hr(i._queryParams,Ks);return Il(o),new lo(i._repo,i._path,o,!0)}}class om extends Da{_apply(i){nh(i,"orderByPriority");const o=Hr(i._queryParams,Ar);return Il(o),new lo(i._repo,i._path,o,!0)}}class Hu extends Da{_apply(i){nh(i,"orderByValue");const o=Hr(i._queryParams,Gi);return Il(o),new lo(i._repo,i._path,o,!0)}}class Id extends Da{constructor(i,o){super(),this._value=i,this._key=o}_apply(i){if($s("equalTo",this._value,i._path,!1),i._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(i._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new qh(this._value,this._key)._apply(new _c(this._value,this._key)._apply(i))}}function ol(u,...i){let o=(0,se.m9)(u);for(const d of i)o=d._apply(o);return o}(function A(u){(0,se.hu)(!js,"__referenceConstructor has already been defined"),js=u})(il),function Ti(u){(0,se.hu)(!Lr,"__referenceConstructor has already been defined"),Lr=u}(il);const Wf={};function C(u,i,o,d,g){let E=d||u.options.databaseURL;void 0===E&&(u.options.projectId||An("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Fn("Using default host for project ",u.options.projectId),E=`${u.options.projectId}-default-rtdb.firebaseio.com`);let G,Q,S=Xd(E,g),O=S.repoInfo;typeof process<"u"&&process.env&&(Q=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Q?(G=!0,E=`http://${Q}?ns=${O.namespace}`,S=Xd(E,g),O=S.repoInfo):G=!S.repoInfo.secure;const Ee=g&&G?new ti(ti.OWNER):new Jr(u.name,u.options,i);ze("Invalid Firebase Database URL",S),Gn(S.path)||An("Database URL must point to the root of a Firebase Database (not including a child path).");const Te=function y(u,i,o,d){let g=Wf[i.name];g||(g={},Wf[i.name]=g);let E=g[u.toURLString()];return E&&An("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),E=new ms(u,false,o,d),g[u.toURLString()]=E,E}(O,u,Ee,new jr(u.name,o));return new $(Te,u)}class ${constructor(i,o){this._repoInternal=i,this.app=o,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function pi(u,i,o){if(u.stats_=je(u.repoInfo_),u.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)u.server_=new Qa(u.repoInfo_,(d,g,E,S)=>{nl(u,d,g,E,S)},u.authTokenProvider_,u.appCheckProvider_),setTimeout(()=>zl(u,!0),0);else{if(typeof o<"u"&&null!==o){if("object"!=typeof o)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,se.Wl)(o)}catch(d){throw new Error("Invalid authOverride provided: "+d)}}u.persistentConnection_=new Ws(u.repoInfo_,i,(d,g,E,S)=>{nl(u,d,g,E,S)},d=>{zl(u,d)},d=>{!function Uf(u,i){wn(i,(o,d)=>{Zd(u,o,d)})}(u,d)},u.authTokenProvider_,u.appCheckProvider_,o),u.server_=u.persistentConnection_}u.authTokenProvider_.addTokenChangeListener(d=>{u.server_.refreshAuthToken(d)}),u.appCheckProvider_.addTokenChangeListener(d=>{u.server_.refreshAppCheckToken(d.token)}),u.statsReporter_=function St(u,i){const o=u.toString();return He[o]||(He[o]=i()),He[o]}(u.repoInfo_,()=>new ro(u.stats_,u.server_)),u.infoData_=new gl,u.infoSyncTree_=new rs({startListening:(d,g,E,S)=>{let O=[];const G=u.infoData_.getNode(d._path);return G.isEmpty()||(O=lu(u.infoSyncTree_,d._path,G),setTimeout(()=>{S("ok")},0)),O},stopListening:()=>{}}),Zd(u,"connected",!1),u.serverSyncTree_=new rs({startListening:(d,g,E,S)=>(u.server_.listen(d,E,g,(O,G)=>{const Q=S(O,G);hn(u.eventQueue_,d._path,Q)}),[]),stopListening:(d,g)=>{u.server_.unlisten(d,g)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new il(this._repo,dr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function m(u,i){const o=Wf[i];(!o||o[u.key]!==u)&&An(`Database ${i}(${u.repoInfo_}) has already been deleted.`),Hf(u),delete o[u.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(i){null===this._rootInternal&&An("Cannot call "+i+" on a deleted database.")}}function J(){xs.IS_TRANSPORT_INITIALIZED&&er("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function me(){J(),Fi.forceDisallow()}function Xe(){J(),Qi.forceDisallow(),Fi.forceAllow()}function os(u,i){kr(u,i)}const Jh={".sv":"timestamp"};class Cd{constructor(i,o){this.committed=i,this.snapshot=o}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Ws.prototype.simpleListen=function(u,i){this.sendRequest("q",{p:u},i)},Ws.prototype.echo=function(u,i){this.sendRequest("echo",{d:u},i)},function Va(u){gt(kn.SDK_VERSION),(0,kn._registerComponent)(new Dr.wA("database",(i,{instanceIdentifier:o})=>C(i.getProvider("app").getImmediate(),i.getProvider("auth-internal"),i.getProvider("app-check-internal"),o),"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(Me,"0.14.4",u),(0,kn.registerVersion)(Me,"0.14.4","esm2017")}();const Wp=new Ae.Yd("@firebase/database-compat"),dh=function(u){Wp.warn("FIREBASE WARNING: "+u)};class Sy{constructor(i){this._delegate=i}cancel(i){(0,se.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,se.Wj)("OnDisconnect.cancel","onComplete",i,!0);const o=this._delegate.cancel();return i&&o.then(()=>i(null),d=>i(d)),o}remove(i){(0,se.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,se.Wj)("OnDisconnect.remove","onComplete",i,!0);const o=this._delegate.remove();return i&&o.then(()=>i(null),d=>i(d)),o}set(i,o){(0,se.Dv)("OnDisconnect.set",1,2,arguments.length),(0,se.Wj)("OnDisconnect.set","onComplete",o,!0);const d=this._delegate.set(i);return o&&d.then(()=>o(null),g=>o(g)),d}setWithPriority(i,o,d){(0,se.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,se.Wj)("OnDisconnect.setWithPriority","onComplete",d,!0);const g=this._delegate.setWithPriority(i,o);return d&&g.then(()=>d(null),E=>d(E)),g}update(i,o){if((0,se.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(i)){const g={};for(let E=0;E<i.length;++E)g[""+E]=i[E];i=g,dh("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,se.Wj)("OnDisconnect.update","onComplete",o,!0);const d=this._delegate.update(i);return o&&d.then(()=>o(null),g=>o(g)),d}}class H_{constructor(i,o){this.committed=i,this.snapshot=o}toJSON(){return(0,se.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Ic{constructor(i,o){this._database=i,this._delegate=o}val(){return(0,se.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,se.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,se.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,se.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(i){return(0,se.Dv)("DataSnapshot.child",0,1,arguments.length),i=String(i),Z("DataSnapshot.child","path",i,!1),new Ic(this._database,this._delegate.child(i))}hasChild(i){return(0,se.Dv)("DataSnapshot.hasChild",1,1,arguments.length),Z("DataSnapshot.hasChild","path",i,!1),this._delegate.hasChild(i)}getPriority(){return(0,se.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(i){return(0,se.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,se.Wj)("DataSnapshot.forEach","action",i,!1),this._delegate.forEach(o=>i(new Ic(this._database,o)))}hasChildren(){return(0,se.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,se.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,se.Dv)("DataSnapshot.ref",0,0,arguments.length),new na(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class bo{constructor(i,o){this.database=i,this._delegate=o}on(i,o,d,g){var E;(0,se.Dv)("Query.on",2,4,arguments.length),(0,se.Wj)("Query.on","callback",o,!1);const S=bo.getCancelAndContextArgs_("Query.on",d,g),O=(Q,Ee)=>{o.call(S.context,new Ic(this.database,Q),Ee)};O.userCallback=o,O.context=S.context;const G=null===(E=S.cancel)||void 0===E?void 0:E.bind(S.context);switch(i){case"value":return zc(this._delegate,O,G),o;case"child_added":return ah(this._delegate,O,G),o;case"child_removed":return Wc(this._delegate,O,G),o;case"child_changed":return lh(this._delegate,O,G),o;case"child_moved":return yc(this._delegate,O,G),o;default:throw new Error((0,se.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(i,o,d){if((0,se.Dv)("Query.off",0,3,arguments.length),function(u,i,o){if(void 0!==i)switch(i){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,se.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,i),(0,se.Wj)("Query.off","callback",o,!0),(0,se.lb)("Query.off","context",d,!0),o){const g=()=>{};g.userCallback=o,g.context=d,Ys(this._delegate,i,g)}else Ys(this._delegate,i)}get(){return sh(this._delegate).then(i=>new Ic(this.database,i))}once(i,o,d,g){(0,se.Dv)("Query.once",1,4,arguments.length),(0,se.Wj)("Query.once","callback",o,!0);const E=bo.getCancelAndContextArgs_("Query.once",d,g),S=new se.BH,O=(Q,Ee)=>{const Te=new Ic(this.database,Q);o&&o.call(E.context,Te,Ee),S.resolve(Te)};O.userCallback=o,O.context=E.context;const G=Q=>{E.cancel&&E.cancel.call(E.context,Q),S.reject(Q)};switch(i){case"value":zc(this._delegate,O,G,{onlyOnce:!0});break;case"child_added":ah(this._delegate,O,G,{onlyOnce:!0});break;case"child_removed":Wc(this._delegate,O,G,{onlyOnce:!0});break;case"child_changed":lh(this._delegate,O,G,{onlyOnce:!0});break;case"child_moved":yc(this._delegate,O,G,{onlyOnce:!0});break;default:throw new Error((0,se.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return S.promise}limitToFirst(i){return(0,se.Dv)("Query.limitToFirst",1,1,arguments.length),new bo(this.database,ol(this._delegate,function Ed(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new Yh(u)}(i)))}limitToLast(i){return(0,se.Dv)("Query.limitToLast",1,1,arguments.length),new bo(this.database,ol(this._delegate,function Gp(u){if("number"!=typeof u||Math.floor(u)!==u||u<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new $p(u)}(i)))}orderByChild(i){return(0,se.Dv)("Query.orderByChild",1,1,arguments.length),new bo(this.database,ol(this._delegate,function Ho(u){if("$key"===u)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===u)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===u)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Z("orderByChild","path",u,!1),new ss(u)}(i)))}orderByKey(){return(0,se.Dv)("Query.orderByKey",0,0,arguments.length),new bo(this.database,ol(this._delegate,function Qh(){return new wd}()))}orderByPriority(){return(0,se.Dv)("Query.orderByPriority",0,0,arguments.length),new bo(this.database,ol(this._delegate,function Qs(){return new om}()))}orderByValue(){return(0,se.Dv)("Query.orderByValue",0,0,arguments.length),new bo(this.database,ol(this._delegate,function zf(){return new Hu}()))}startAt(i=null,o){return(0,se.Dv)("Query.startAt",0,2,arguments.length),new bo(this.database,ol(this._delegate,function Zh(u=null,i){return k("startAt","key",i,!0),new _c(u,i)}(i,o)))}startAfter(i=null,o){return(0,se.Dv)("Query.startAfter",0,2,arguments.length),new bo(this.database,ol(this._delegate,function Zl(u,i){return k("startAfter","key",i,!0),new ju(u,i)}(i,o)))}endAt(i=null,o){return(0,se.Dv)("Query.endAt",0,2,arguments.length),new bo(this.database,ol(this._delegate,function uh(u,i){return k("endAt","key",i,!0),new qh(u,i)}(i,o)))}endBefore(i=null,o){return(0,se.Dv)("Query.endBefore",0,2,arguments.length),new bo(this.database,ol(this._delegate,function vd(u,i){return k("endBefore","key",i,!0),new Bu(u,i)}(i,o)))}equalTo(i,o){return(0,se.Dv)("Query.equalTo",1,2,arguments.length),new bo(this.database,ol(this._delegate,function vc(u,i){return k("equalTo","key",i,!0),new Id(u,i)}(i,o)))}toString(){return(0,se.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,se.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(i){if((0,se.Dv)("Query.isEqual",1,1,arguments.length),!(i instanceof bo))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(i._delegate)}static getCancelAndContextArgs_(i,o,d){const g={cancel:void 0,context:void 0};if(o&&d)g.cancel=o,(0,se.Wj)(i,"cancel",g.cancel,!0),g.context=d,(0,se.lb)(i,"context",g.context,!0);else if(o)if("object"==typeof o&&null!==o)g.context=o;else{if("function"!=typeof o)throw new Error((0,se.gK)(i,"cancelOrContext")+" must either be a cancel callback or a context object.");g.cancel=o}return g}get ref(){return new na(this.database,new il(this._delegate._repo,this._delegate._path))}}class na extends bo{constructor(i,o){super(i,new lo(o._repo,o._path,new fa,!1)),this.database=i,this._delegate=o}getKey(){return(0,se.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(i){return(0,se.Dv)("Reference.child",1,1,arguments.length),"number"==typeof i&&(i=String(i)),new na(this.database,Uu(this._delegate,i))}getParent(){(0,se.Dv)("Reference.parent",0,0,arguments.length);const i=this._delegate.parent;return i?new na(this.database,i):null}getRoot(){return(0,se.Dv)("Reference.root",0,0,arguments.length),new na(this.database,this._delegate.root)}set(i,o){(0,se.Dv)("Reference.set",1,2,arguments.length),(0,se.Wj)("Reference.set","onComplete",o,!0);const d=ih(this._delegate,i);return o&&d.then(()=>o(null),g=>o(g)),d}update(i,o){if((0,se.Dv)("Reference.update",1,2,arguments.length),Array.isArray(i)){const g={};for(let E=0;E<i.length;++E)g[""+E]=i[E];i=g,dh("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}be("Reference.update",this._delegate._path),(0,se.Wj)("Reference.update","onComplete",o,!0);const d=$c(this._delegate,i);return o&&d.then(()=>o(null),g=>o(g)),d}setWithPriority(i,o,d){(0,se.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,se.Wj)("Reference.setWithPriority","onComplete",d,!0);const g=function Kh(u,i,o){if(be("setWithPriority",u._path),$s("setWithPriority",i,u._path,!1),R("setWithPriority",o,!1),".length"===u.key||".keys"===u.key)throw"setWithPriority failed: "+u.key+" is a read-only object.";const d=new se.BH;return ku(u._repo,u._path,i,o,d.wrapCallback(()=>{})),d.promise}(this._delegate,i,o);return d&&g.then(()=>d(null),E=>d(E)),g}remove(i){(0,se.Dv)("Reference.remove",0,1,arguments.length),(0,se.Wj)("Reference.remove","onComplete",i,!0);const o=function Cl(u){return be("remove",u._path),ih(u,null)}(this._delegate);return i&&o.then(()=>i(null),d=>i(d)),o}transaction(i,o,d){(0,se.Dv)("Reference.transaction",1,3,arguments.length),(0,se.Wj)("Reference.transaction","transactionUpdate",i,!1),(0,se.Wj)("Reference.transaction","onComplete",o,!0),function(u,i,o,d){if(void 0!==o&&"boolean"!=typeof o)throw new Error((0,se.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,d);const g=function Dd(u,i,o){var d;if(u=(0,se.m9)(u),be("Reference.transaction",u._path),".length"===u.key||".keys"===u.key)throw"Reference.transaction failed: "+u.key+" is a read-only object.";const g=null===(d=o?.applyLocally)||void 0===d||d,E=new se.BH,O=zc(u,()=>{});return function sm(u,i,o,d,g,E){hc(u,"transaction on "+i);const S={path:i,update:o,onComplete:d,status:null,order:fr(),applyLocally:E,retryCount:0,unwatcher:g,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},O=fc(u,i,void 0);S.currentInputSnapshot=O;const G=S.update(O.val());if(void 0===G)S.unwatcher(),S.currentOutputSnapshotRaw=null,S.currentOutputSnapshotResolved=null,S.onComplete&&S.onComplete(null,!1,S.currentInputSnapshot);else{Ou("transaction failed: Data returned ",G,S.path),S.status=0;const Q=Hs(u.transactionQueueTree_,i),Ee=Oa(Q)||[];let Te;Ee.push(S),Bc(Q,Ee),"object"==typeof G&&null!==G&&(0,se.r3)(G,".priority")?(Te=(0,se.DV)(G,".priority"),(0,se.hu)(Gl(Te),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Te=(xu(u.serverSyncTree_,i)||V.EMPTY_NODE).getPriority().val();const qe=Do(u),_t=Lt(G,Te),Ze=fi(_t,O,qe);S.currentOutputSnapshotRaw=_t,S.currentOutputSnapshotResolved=Ze,S.currentWriteId=qr(u);const Zt=wa(u.serverSyncTree_,i,Ze,S.currentWriteId,S.applyLocally);hn(u.eventQueue_,i,Zt),pc(u,u.transactionQueueTree_)}}(u._repo,u._path,i,(G,Q,Ee)=>{let Te=null;G?E.reject(G):(Te=new Vu(Ee,new il(u._repo,u._path),Ar),E.resolve(new Cd(Q,Te)))},O,g),E.promise}(this._delegate,i,{applyLocally:d}).then(E=>new H_(E.committed,new Ic(this.database,E.snapshot)));return o&&g.then(E=>o(null,E.committed,E.snapshot),E=>o(E,!1,null)),g}setPriority(i,o){(0,se.Dv)("Reference.setPriority",1,2,arguments.length),(0,se.Wj)("Reference.setPriority","onComplete",o,!0);const d=function sl(u,i){u=(0,se.m9)(u),be("setPriority",u._path),R("setPriority",i,!1);const o=new se.BH;return ku(u._repo,Pr(u._path,".priority"),i,null,o.wrapCallback(()=>{})),o.promise}(this._delegate,i);return o&&d.then(()=>o(null),g=>o(g)),d}push(i,o){(0,se.Dv)("Reference.push",0,2,arguments.length),(0,se.Wj)("Reference.push","onComplete",o,!0);const d=function rh(u,i){u=(0,se.m9)(u),be("push",u._path),$s("push",i,u._path,!0);const o=Co(u._repo),d=th(o),g=Uu(u,d),E=Uu(u,d);let S;return S=null!=i?ih(E,i).then(()=>E):Promise.resolve(E),g.then=S.then.bind(S),g.catch=S.then.bind(S,void 0),g}(this._delegate,i),g=d.then(S=>new na(this.database,S));o&&g.then(()=>o(null),S=>o(S));const E=new na(this.database,d);return E.then=g.then.bind(g),E.catch=g.catch.bind(g,void 0),E}onDisconnect(){return be("Reference.onDisconnect",this._delegate._path),new Sy(new mc(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class tf{constructor(i,o){this._delegate=i,this.app=o,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:me,forceLongPolling:Xe}}useEmulator(i,o,d={}){!function Qt(u,i,o,d={}){(u=(0,se.m9)(u))._checkNotDeleted("useEmulator"),u._instanceStarted&&An("Cannot call useEmulator() after instance has already been initialized.");const g=u._repoInternal;let E;if(g.repoInfo_.nodeAdmin)d.mockUserToken&&An('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),E=new ti(ti.OWNER);else if(d.mockUserToken){const S="string"==typeof d.mockUserToken?d.mockUserToken:(0,se.Sg)(d.mockUserToken,u.app.options.projectId);E=new ti(S)}!function Kf(u,i,o,d){u.repoInfo_=new oe(`${i}:${o}`,!1,u.repoInfo_.namespace,u.repoInfo_.webSocketOnly,u.repoInfo_.nodeAdmin,u.repoInfo_.persistenceKey,u.repoInfo_.includeNamespaceInQueryParams,!0),d&&(u.authTokenProvider_=d)}(g,i,o,E)}(this._delegate,i,o,d)}ref(i){if((0,se.Dv)("database.ref",0,1,arguments.length),i instanceof na){const o=ql(this._delegate,i.toString());return new na(this,o)}{const o=Wh(this._delegate,i);return new na(this,o)}}refFromURL(i){(0,se.Dv)("database.refFromURL",1,1,arguments.length);const d=ql(this._delegate,i);return new na(this,d)}goOffline(){return(0,se.Dv)("database.goOffline",0,0,arguments.length),function yn(u){(u=(0,se.m9)(u))._checkNotDeleted("goOffline"),Hf(u._repo)}(this._delegate)}goOnline(){return(0,se.Dv)("database.goOnline",0,0,arguments.length),function Dn(u){(u=(0,se.m9)(u))._checkNotDeleted("goOnline"),function $f(u){u.persistentConnection_&&u.persistentConnection_.resume(Bo)}(u._repo)}(this._delegate)}}tf.ServerValue={TIMESTAMP:function qf(){return Jh}(),increment:u=>function wc(u){return{".sv":{increment:u}}}(u)};var uo=Object.freeze({__proto__:null,initStandalone:function $_({app:u,url:i,version:o,customAuthImpl:d,namespace:g,nodeAdmin:E=!1}){gt(o);const S=new Dr.zt("auth-internal",new Dr.H0("database-standalone"));return S.setComponent(new Dr.wA("auth-internal",()=>d,"PRIVATE")),{instance:new tf(C(u,S,void 0,i,E),u),namespace:g}}});const lm=tf.ServerValue;!function G_(u){u.INTERNAL.registerComponent(new Dr.wA("database-compat",(i,{instanceIdentifier:o})=>{const d=i.getProvider("app-compat").getImmediate(),g=i.getProvider("database").getImmediate({identifier:o});return new tf(g,d)},"PUBLIC").setServiceProps({Reference:na,Query:bo,Database:tf,DataSnapshot:Ic,enableLogging:os,INTERNAL:uo,ServerValue:lm}).setMultipleInstances(!0)),u.registerVersion("@firebase/database-compat","0.3.4")}(Ht.Z);var $u=z(1205),al=z(6217),nf=z(9260);function Kp(u){return null==u}function cm(u){return"function"==typeof u.set}function qp(u,i){return cm(i)?i:u.ref(i)}function dm(u,i){if(function um(u){return"string"==typeof u}(u))return i.stringCase();if(cm(u))return i.firebaseCase();if(function rf(u){return"function"==typeof u.exportVal}(u))return i.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof u)}function hh(u,i,o="on",d=Se.z){return new Rt.y(g=>{let E=null;return E=u[o](i,(S,O)=>{d.schedule(()=>{g.next({snapshot:S,prevKey:O})}),"once"===o&&d.schedule(()=>g.complete())},S=>{d.schedule(()=>g.error(S))}),"on"===o?{unsubscribe(){null!=E&&u.off(i,E)}}:{unsubscribe(){}}}).pipe((0,$t.U)(g=>{const{snapshot:E,prevKey:S}=g;let O=null;return E.exists()&&(O=E.key),{type:i,payload:E,prevKey:S,key:O}}),(0,pt.B)())}function Yp(u,i){const o=u.length;for(let d=0;d<o;d++)if(u[d].payload.key===i)return d;return-1}function fm(u,i){const{payload:o,prevKey:d,key:g}=i,E=Yp(u,g),S=function hm(u,i){if(Kp(i))return 0;{const o=Yp(u,i);return-1===o?u.length:o+1}}(u,d);switch(i.type){case"value":if(i.payload&&i.payload.exists()){let O=null;i.payload.forEach(G=>{const Q={payload:G,type:"value",prevKey:O,key:G.key};return O=G.key,u=[...u,Q],!1})}return u;case"child_added":if(E>-1){const O=u[E-1];(O&&O.key||null)!==d&&(u=u.filter(G=>G.payload.key!==o.key)).splice(S,0,i)}else{if(null==d)return[i,...u];(u=u.slice()).splice(S,0,i)}return u;case"child_removed":return u.filter(O=>O.payload.key!==o.key);case"child_changed":return u.map(O=>O.payload.key===g?i:O);case"child_moved":if(E>-1){const O=u.splice(E,1)[0];return(u=u.slice()).splice(S,0,O),u}return u;default:return u}}function Zf(u){return(Kp(u)||0===u.length)&&(u=["child_added","child_removed","child_changed","child_moved"]),u}function qc(u,i,o){return function Zp(u,i,o){return hh(u,"value","once",o).pipe((0,dt.w)(d=>{const g=[(0,vt.of)(d)];return i.forEach(E=>g.push(hh(u,E,"on",o))),(0,ct.T)(...g).pipe((0,Ue.R)(fm,[]))}),(0,an.x)())}(u,i=Zf(i),o)}function Ay(u,i,o){const d=(i=Zf(i)).map(g=>hh(u,g,"on",o));return(0,ct.T)(...d)}function Xp(u,i){return function(d,g){return dm(d,{stringCase:()=>u.child(d)[i](g),firebaseCase:()=>d[i](g),snapshotCase:()=>d.ref[i](g)})}}function Gu(u){return function(o){return o?dm(o,{stringCase:()=>u.child(o).remove(),firebaseCase:()=>o.remove(),snapshotCase:()=>o.ref.remove()}):u.remove()}}function eg(u,i){return function(){return hh(u,"value","on",i)}}const Ry=new Y.OlP("angularfire2.realtimeDatabaseURL"),Zc=new Y.OlP("angularfire2.database.use-emulator");let gm=(()=>{class u{constructor(o,d,g,E,S,O,G,Q,Ee,Te,qe,_t,Ze,Zt,Tn){this.schedulers=O;const Cr=G,Vr=(0,pe.on)(o,S,d);Q&&(0,$u.nw)(Vr,S,Ee,qe,_t,Ze,Te,Zt),this.database=(0,pe.cc)(`${Vr.name}.database.${g}`,"AngularFireDatabase",Vr.name,()=>{const Zr=S.runOutsideAngular(()=>Vr.database(g||void 0));return Cr&&Zr.useEmulator(...Cr),Zr},[Cr])}list(o,d){const g=this.schedulers.ngZone.runOutsideAngular(()=>qp(this.database,o));let E=g;return d&&(E=d(g)),function pu(u,i){const o=i.schedulers.outsideAngular,d=i.schedulers.ngZone.run(()=>u.ref);return{query:u,update:Xp(d,"update"),set:Xp(d,"set"),push:g=>d.push(g),remove:Gu(d),snapshotChanges:g=>qc(u,g,o).pipe(Dt.iC),stateChanges:g=>Ay(u,g,o).pipe(Dt.iC),auditTrail:g=>function Qp(u,i,o){return function z_(u,i,o){return function Jp(u,i){return hh(u,"value","on",i).pipe((0,$t.U)(o=>{let d;return o.payload.forEach(g=>(d=g.key,!1)),{data:o,lastKeyToLoad:d}}))}(u,o).pipe(function Oe(...u){const i=(0,We.jO)(u);return(0,it.e)((o,d)=>{const g=u.length,E=new Array(g);let S=u.map(()=>!1),O=!1;for(let G=0;G<g;G++)(0,Fe.Xf)(u[G]).subscribe((0,De.x)(d,Q=>{E[G]=Q,!O&&!S[G]&&(S[G]=!0,(O=S.every(At.y))&&(S=null))},Et.Z));o.subscribe((0,De.x)(d,G=>{if(O){const Q=[G,...E];d.next(i?i(...Q):Q)}}))})}(i),(0,$t.U)(([g,E])=>{const S=g.lastKeyToLoad,O=E.map(G=>G.key);return{actions:E,lastKeyToLoad:S,loadedKeys:O}}),function Mt(u){return(0,it.e)((i,o)=>{let d=!1,g=0;i.subscribe((0,De.x)(o,E=>(d||(d=!u(E,g++)))&&o.next(E)))})}(g=>-1===g.loadedKeys.indexOf(g.lastKeyToLoad)),(0,$t.U)(g=>g.actions))}(u,Ay(u,i).pipe((0,Ue.R)((g,E)=>[...g,E],[])),o)}(u,g,o).pipe(Dt.iC),valueChanges:(g,E)=>qc(u,g,o).pipe((0,$t.U)(O=>O.map(G=>E&&E.idField?Object.assign(Object.assign({},G.payload.val()),{[E.idField]:G.key}):G.payload.val())),Dt.iC)}}(E,this)}object(o){return function pm(u,i){return{query:u,snapshotChanges:()=>eg(u,i.schedulers.outsideAngular)().pipe(Dt.iC),update:o=>u.ref.update(o),set:o=>u.ref.set(o),remove:()=>u.ref.remove(),valueChanges:()=>eg(u,i.schedulers.outsideAngular)().pipe(Dt.iC,(0,$t.U)(d=>d.payload.exists()?d.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>qp(this.database,o)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return u.\u0275fac=function(o){return new(o||u)(Y.LFG(pe.Dh),Y.LFG(pe.xv,8),Y.LFG(Ry,8),Y.LFG(Y.Lbi),Y.LFG(Y.R0b),Y.LFG(Dt.HU),Y.LFG(Zc,8),Y.LFG($u.zQ,8),Y.LFG($u.Qv,8),Y.LFG($u.L6,8),Y.LFG($u._Q,8),Y.LFG($u.rT,8),Y.LFG($u.lh,8),Y.LFG($u.f7,8),Y.LFG(al.nm,8))},u.\u0275prov=Y.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),sf=(()=>{class u{constructor(){nf.Z.registerVersion("angularfire",Dt.q4.full,"rtdb-compat")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=Y.oAB({type:u}),u.\u0275inj=Y.cJS({providers:[gm]}),u})();var Yf=z(8996);const bd="firebasestorage.googleapis.com",Td="storageBucket";class Rs extends se.ZR{constructor(i,o,d=0){super(ym(i),`Firebase Storage: ${o} (${ym(i)})`),this.status_=d,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Rs.prototype)}get status(){return this.status_}set status(i){this.status_=i}_codeEquals(i){return ym(i)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(i){this.customData.serverResponse=i,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var Wi=(()=>{return(u=Wi||(Wi={})).UNKNOWN="unknown",u.OBJECT_NOT_FOUND="object-not-found",u.BUCKET_NOT_FOUND="bucket-not-found",u.PROJECT_NOT_FOUND="project-not-found",u.QUOTA_EXCEEDED="quota-exceeded",u.UNAUTHENTICATED="unauthenticated",u.UNAUTHORIZED="unauthorized",u.UNAUTHORIZED_APP="unauthorized-app",u.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",u.INVALID_CHECKSUM="invalid-checksum",u.CANCELED="canceled",u.INVALID_EVENT_NAME="invalid-event-name",u.INVALID_URL="invalid-url",u.INVALID_DEFAULT_BUCKET="invalid-default-bucket",u.NO_DEFAULT_BUCKET="no-default-bucket",u.CANNOT_SLICE_BLOB="cannot-slice-blob",u.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",u.NO_DOWNLOAD_URL="no-download-url",u.INVALID_ARGUMENT="invalid-argument",u.INVALID_ARGUMENT_COUNT="invalid-argument-count",u.APP_DELETED="app-deleted",u.INVALID_ROOT_OPERATION="invalid-root-operation",u.INVALID_FORMAT="invalid-format",u.INTERNAL_ERROR="internal-error",u.UNSUPPORTED_ENVIRONMENT="unsupported-environment",Wi;var u})();function ym(u){return"storage/"+u}function ng(){return new Rs(Wi.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function ph(){return new Rs(Wi.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function _m(){return new Rs(Wi.CANCELED,"User canceled the upload/download.")}function vm(){return new Rs(Wi.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function gh(u){return new Rs(Wi.INVALID_ARGUMENT,u)}function rg(){return new Rs(Wi.APP_DELETED,"The Firebase app was deleted.")}function mh(u){return new Rs(Wi.INVALID_ROOT_OPERATION,"The operation '"+u+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ep(u,i){return new Rs(Wi.INVALID_FORMAT,"String does not match format '"+u+"': "+i)}function yh(u){throw new Rs(Wi.INTERNAL_ERROR,"Internal error: "+u)}class ra{constructor(i,o){this.bucket=i,this.path_=o}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const i=encodeURIComponent;return"/b/"+i(this.bucket)+"/o/"+i(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(i,o){let d;try{d=ra.makeFromUrl(i,o)}catch{return new ra(i,"")}if(""===d.path)return d;throw function W_(u){return new Rs(Wi.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+u+"'.")}(i)}static makeFromUrl(i,o){let d=null;const g="([A-Za-z0-9.\\-_]+)",O=new RegExp("^gs://"+g+"(/(.*))?$","i");function Q(Wr){Wr.path_=decodeURIComponent(Wr.path)}const Te=o.replace(/[.]/g,"\\."),Zr=[{regex:O,indices:{bucket:1,path:3},postModify:function E(Wr){"/"===Wr.path.charAt(Wr.path.length-1)&&(Wr.path_=Wr.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${Te}/v[A-Za-z0-9_]+/b/${g}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:Q},{regex:new RegExp(`^https?://${o===bd?"(?:storage.googleapis.com|storage.cloud.google.com)":o}/${g}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:Q}];for(let Wr=0;Wr<Zr.length;Wr++){const Ha=Zr[Wr],ei=Ha.regex.exec(i);if(ei){let $a=ei[Ha.indices.path];$a||($a=""),d=new ra(ei[Ha.indices.bucket],$a),Ha.postModify(d);break}}if(null==d)throw function xy(u){return new Rs(Wi.INVALID_URL,"Invalid URL '"+u+"'.")}(i);return d}}class Ny{constructor(i){this.promise_=Promise.reject(i)}getPromise(){return this.promise_}cancel(i=!1){}}function lf(u){return"string"==typeof u||u instanceof String}function tp(u){return Oy()&&u instanceof Blob}function Oy(){return typeof Blob<"u"&&!(0,se.UG)()}function Im(u,i,o,d){if(d<i)throw gh(`Invalid value for '${u}'. Expected ${i} or greater.`);if(d>o)throw gh(`Invalid value for '${u}'. Expected ${o} or less.`)}function Dl(u,i,o){let d=i;return null==o&&(d=`https://${i}`),`${o}://${d}/v0${u}`}function ig(u){const i=encodeURIComponent;let o="?";for(const d in u)u.hasOwnProperty(d)&&(o=o+(i(d)+"=")+i(u[d])+"&");return o=o.slice(0,-1),o}var Yl=(()=>{return(u=Yl||(Yl={}))[u.NO_ERROR=0]="NO_ERROR",u[u.NETWORK_ERROR=1]="NETWORK_ERROR",u[u.ABORT=2]="ABORT",Yl;var u})();function ky(u,i){const o=u>=500&&u<600,g=-1!==[408,429].indexOf(u),E=-1!==i.indexOf(u);return o||g||E}class Cm{constructor(i,o,d,g,E,S,O,G,Q,Ee,Te,qe=!0){this.url_=i,this.method_=o,this.headers_=d,this.body_=g,this.successCodes_=E,this.additionalRetryCodes_=S,this.callback_=O,this.errorCallback_=G,this.timeout_=Q,this.progressCallback_=Ee,this.connectionFactory_=Te,this.retry=qe,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_t,Ze)=>{this.resolve_=_t,this.reject_=Ze,this.start_()})}start_(){const o=(d,g)=>{const E=this.resolve_,S=this.reject_,O=g.connection;if(g.wasSuccessCode)try{const G=this.callback_(O,O.getResponse());!function Py(u){return void 0!==u}(G)?E():E(G)}catch(G){S(G)}else if(null!==O){const G=ng();G.serverResponse=O.getErrorText(),S(this.errorCallback_?this.errorCallback_(O,G):G)}else S(g.canceled?this.appDelete_?rg():_m():ph())};this.canceled_?o(0,new $o(!1,null,!0)):this.backoffId_=function Em(u,i,o){let d=1,g=null,E=null,S=!1,O=0;function G(){return 2===O}let Q=!1;function Ee(...Tn){Q||(Q=!0,i.apply(null,Tn))}function Te(Tn){g=setTimeout(()=>{g=null,u(_t,G())},Tn)}function qe(){E&&clearTimeout(E)}function _t(Tn,...Cr){if(Q)return void qe();if(Tn)return qe(),void Ee.call(null,Tn,...Cr);if(G()||S)return qe(),void Ee.call(null,Tn,...Cr);let Zr;d<64&&(d*=2),1===O?(O=2,Zr=0):Zr=1e3*(d+Math.random()),Te(Zr)}let Ze=!1;function Zt(Tn){Ze||(Ze=!0,qe(),!Q&&(null!==g?(Tn||(O=2),clearTimeout(g),Te(0)):Tn||(O=1)))}return Te(0),E=setTimeout(()=>{S=!0,Zt(!0)},o),Zt}((d,g)=>{if(g)return void d(!1,new $o(!1,null,!0));const E=this.connectionFactory_();this.pendingConnection_=E;const S=O=>{null!==this.progressCallback_&&this.progressCallback_(O.loaded,O.lengthComputable?O.total:-1)};null!==this.progressCallback_&&E.addUploadProgressListener(S),E.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&E.removeUploadProgressListener(S),this.pendingConnection_=null;const O=E.getErrorCode()===Yl.NO_ERROR,G=E.getStatus();if(!O||ky(G,this.additionalRetryCodes_)&&this.retry){const Ee=E.getErrorCode()===Yl.ABORT;return void d(!1,new $o(!1,null,Ee))}const Q=-1!==this.successCodes_.indexOf(G);d(!0,new $o(Q,E))})},o,this.timeout_)}getPromise(){return this.promise_}cancel(i){this.canceled_=!0,this.appDelete_=i||!1,null!==this.backoffId_&&function wm(u){u(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class $o{constructor(i,o,d){this.wasSuccessCode=i,this.connection=o,this.canceled=!!d}}function Fy(...u){const i=function _h(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==i){const o=new i;for(let d=0;d<u.length;d++)o.append(u[d]);return o.getBlob()}if(Oy())return new Blob(u);throw new Rs(Wi.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const ia={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class np{constructor(i,o){this.data=i,this.contentType=o||null}}function Dc(u,i){switch(u){case ia.RAW:return new np(bm(i));case ia.BASE64:case ia.BASE64URL:return new np(Rr(u,i));case ia.DATA_URL:return new np(function Sm(u){const i=new Tm(u);return i.base64?Rr(ia.BASE64,i.rest):function Z_(u){let i;try{i=decodeURIComponent(u)}catch{throw ep(ia.DATA_URL,"Malformed data URL.")}return bm(i)}(i.rest)}(i),function Ly(u){return new Tm(u).contentType}(i))}throw ng()}function bm(u){const i=[];for(let o=0;o<u.length;o++){let d=u.charCodeAt(o);d<=127?i.push(d):d<=2047?i.push(192|d>>6,128|63&d):55296==(64512&d)?o<u.length-1&&56320==(64512&u.charCodeAt(o+1))?(d=65536|(1023&d)<<10|1023&u.charCodeAt(++o),i.push(240|d>>18,128|d>>12&63,128|d>>6&63,128|63&d)):i.push(239,191,189):56320==(64512&d)?i.push(239,191,189):i.push(224|d>>12,128|d>>6&63,128|63&d)}return new Uint8Array(i)}function Rr(u,i){switch(u){case ia.BASE64:{const g=-1!==i.indexOf("-"),E=-1!==i.indexOf("_");if(g||E)throw ep(u,"Invalid character '"+(g?"-":"_")+"' found: is it base64url encoded?");break}case ia.BASE64URL:{const g=-1!==i.indexOf("+"),E=-1!==i.indexOf("/");if(g||E)throw ep(u,"Invalid character '"+(g?"+":"/")+"' found: is it base64 encoded?");i=i.replace(/-/g,"+").replace(/_/g,"/");break}}let o;try{o=function q_(u){if(typeof atob>"u")throw function Cc(u){return new Rs(Wi.UNSUPPORTED_ENVIRONMENT,`${u} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(u)}(i)}catch(g){throw g.message.includes("polyfill")?g:ep(u,"Invalid character found")}const d=new Uint8Array(o.length);for(let g=0;g<o.length;g++)d[g]=o.charCodeAt(g);return d}class Tm{constructor(i){this.base64=!1,this.contentType=null;const o=i.match(/^data:([^,]+)?,/);if(null===o)throw ep(ia.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const d=o[1]||null;null!=d&&(this.base64=function ag(u,i){return u.length>=i.length&&u.substring(u.length-i.length)===i}(d,";base64"),this.contentType=this.base64?d.substring(0,d.length-7):d),this.rest=i.substring(i.indexOf(",")+1)}}class zu{constructor(i,o){let d=0,g="";tp(i)?(this.data_=i,d=i.size,g=i.type):i instanceof ArrayBuffer?(o?this.data_=new Uint8Array(i):(this.data_=new Uint8Array(i.byteLength),this.data_.set(new Uint8Array(i))),d=this.data_.length):i instanceof Uint8Array&&(o?this.data_=i:(this.data_=new Uint8Array(i.length),this.data_.set(i)),d=i.length),this.size_=d,this.type_=g}size(){return this.size_}type(){return this.type_}slice(i,o){if(tp(this.data_)){const g=function vh(u,i,o){return u.webkitSlice?u.webkitSlice(i,o):u.mozSlice?u.mozSlice(i,o):u.slice?u.slice(i,o):null}(this.data_,i,o);return null===g?null:new zu(g)}{const d=new Uint8Array(this.data_.buffer,i,o-i);return new zu(d,!0)}}static getBlob(...i){if(Oy()){const o=i.map(d=>d instanceof zu?d.data_:d);return new zu(Fy.apply(null,o))}{const o=i.map(S=>lf(S)?Dc(ia.RAW,S).data:S.data_);let d=0;o.forEach(S=>{d+=S.byteLength});const g=new Uint8Array(d);let E=0;return o.forEach(S=>{for(let O=0;O<S.length;O++)g[E++]=S[O]}),new zu(g,!0)}}uploadData(){return this.data_}}function lg(u){let i;try{i=JSON.parse(u)}catch{return null}return function Xc(u){return"object"==typeof u&&!Array.isArray(u)}(i)?i:null}function Am(u){const i=u.lastIndexOf("/",u.length-2);return-1===i?u:u.slice(i+1)}function Eh(u,i){return i}class sa{constructor(i,o,d,g){this.server=i,this.local=o||i,this.writable=!!d,this.xform=g||Eh}}let uf=null;function Wu(){if(uf)return uf;const u=[];u.push(new sa("bucket")),u.push(new sa("generation")),u.push(new sa("metageneration")),u.push(new sa("name","fullPath",!0));const o=new sa("name");o.xform=function i(E,S){return function Rm(u){return!lf(u)||u.length<2?u:Am(u)}(S)},u.push(o);const g=new sa("size");return g.xform=function d(E,S){return void 0!==S?Number(S):S},u.push(g),u.push(new sa("timeCreated")),u.push(new sa("updated")),u.push(new sa("md5Hash",null,!0)),u.push(new sa("cacheControl",null,!0)),u.push(new sa("contentDisposition",null,!0)),u.push(new sa("contentEncoding",null,!0)),u.push(new sa("contentLanguage",null,!0)),u.push(new sa("contentType",null,!0)),u.push(new sa("metadata","customMetadata",!0)),uf=u,uf}function ug(u,i,o){const d=lg(i);return null===d?null:function Mm(u,i,o){const d={type:"file"},g=o.length;for(let E=0;E<g;E++){const S=o[E];d[S.local]=S.xform(d,i[S.server])}return function By(u,i){Object.defineProperty(u,"ref",{get:function o(){const E=new ra(u.bucket,u.fullPath);return i._makeStorageReference(E)}})}(d,u),d}(u,d,o)}function Go(u,i){const o={},d=i.length;for(let g=0;g<d;g++){const E=i[g];E.writable&&(o[E.server]=u[E.local])}return JSON.stringify(o)}const Y_="prefixes";class Ku{constructor(i,o,d,g){this.url=i,this.method=o,this.handler=d,this.timeout=g,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function bc(u){if(!u)throw ng()}function mu(u,i){return function o(d,g){const E=ug(u,g,i);return bc(null!==E),E}}function Tc(u){return function i(o,d){let g;return g=401===o.getStatus()?o.getErrorText().includes("Firebase App Check token is invalid")?function Sd(){return new Rs(Wi.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function fh(){return new Rs(Wi.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===o.getStatus()?function My(u){return new Rs(Wi.QUOTA_EXCEEDED,"Quota for bucket '"+u+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(u.bucket):403===o.getStatus()?function Xf(u){return new Rs(Wi.UNAUTHORIZED,"User does not have permission to access '"+u+"'.")}(u.path):d,g.status=o.getStatus(),g.serverResponse=d.serverResponse,g}}function wh(u){const i=Tc(u);return function o(d,g){let E=i(d,g);return 404===d.getStatus()&&(E=function Jf(u){return new Rs(Wi.OBJECT_NOT_FOUND,"Object '"+u+"' does not exist.")}(u.path)),E.serverResponse=g.serverResponse,E}}function rp(u,i,o){const g=Dl(i.fullServerUrl(),u.host,u._protocol),S=u.maxOperationRetryTime,O=new Ku(g,"GET",mu(u,o),S);return O.errorHandler=wh(i),O}function ip(u,i,o,d,g){const E={};E.prefix=i.isRoot?"":i.path+"/",o&&o.length>0&&(E.delimiter=o),d&&(E.pageToken=d),g&&(E.maxResults=g);const O=Dl(i.bucketOnlyServerUrl(),u.host,u._protocol),Q=u.maxOperationRetryTime,Ee=new Ku(O,"GET",function cg(u,i){return function o(d,g){const E=function jy(u,i,o){const d=lg(o);return null===d?null:function J_(u,i,o){const d={prefixes:[],items:[],nextPageToken:o.nextPageToken};if(o[Y_])for(const g of o[Y_]){const E=g.replace(/\/$/,""),S=u._makeStorageReference(new ra(i,E));d.prefixes.push(S)}if(o.items)for(const g of o.items){const E=u._makeStorageReference(new ra(i,g.name));d.items.push(E)}return d}(u,i,d)}(u,i,g);return bc(null!==E),E}}(u,i.bucket),Q);return Ee.urlParams=E,Ee.errorHandler=Tc(i),Ee}function Om(u,i,o){const d=Object.assign({},o);return d.fullPath=u.path,d.size=i.size(),d.contentType||(d.contentType=function Gy(u,i){return u&&u.contentType||i&&i.type()||"application/octet-stream"}(null,i)),d}class Ih{constructor(i,o,d,g){this.current=i,this.total=o,this.finalized=!!d,this.metadata=g||null}}function op(u,i){let o=null;try{o=u.getResponseHeader("X-Goog-Upload-Status")}catch{bc(!1)}return bc(!!o&&-1!==(i||["active"]).indexOf(o)),o}const qu={STATE_CHANGED:"state_changed"},co={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function cf(u){switch(u){case"running":case"pausing":case"canceling":return co.RUNNING;case"paused":return co.PAUSED;case"success":return co.SUCCESS;case"canceled":return co.CANCELED;default:return co.ERROR}}class Ch{constructor(i,o,d){if(function Jc(u){return"function"==typeof u}(i)||null!=o||null!=d)this.next=i,this.error=o??void 0,this.complete=d??void 0;else{const E=i;this.next=E.next,this.error=E.error,this.complete=E.complete}}}function ba(u){return(...i)=>{Promise.resolve().then(()=>u(...i))}}class Lm extends class zy{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Yl.NO_ERROR,this.sendPromise_=new Promise(i=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Yl.ABORT,i()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Yl.NETWORK_ERROR,i()}),this.xhr_.addEventListener("load",()=>{i()})})}send(i,o,d,g){if(this.sent_)throw yh("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(o,i,!0),void 0!==g)for(const E in g)g.hasOwnProperty(E)&&this.xhr_.setRequestHeader(E,g[E].toString());return void 0!==d?this.xhr_.send(d):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw yh("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw yh("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw yh("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw yh("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(i){return this.xhr_.getResponseHeader(i)}addUploadProgressListener(i){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",i)}removeUploadProgressListener(i){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",i)}}{initXhr(){this.xhr_.responseType="text"}}function ho(){return new Lm}class ap{constructor(i,o,d=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=i,this._blob=o,this._metadata=d,this._mappings=Wu(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=g=>{if(this._request=void 0,this._chunkMultiplier=1,g._codeEquals(Wi.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const E=this.isExponentialBackoffExpired();if(ky(g.status,[])){if(!E)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();g=ph()}this._error=g,this._transition("error")}},this._metadataErrorHandler=g=>{this._request=void 0,g._codeEquals(Wi.CANCELED)?this.completeTransitions_():(this._error=g,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((g,E)=>{this._resolve=g,this._reject=E,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const i=this._transferred;return o=>this._updateProgress(i+o)}_shouldDoResumable(i){return i.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(i){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([o,d])=>{switch(this._state){case"running":i(o,d);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((i,o)=>{const d=function X_(u,i,o,d,g){const E=i.bucketOnlyServerUrl(),S=Om(i,d,g),O={name:S.fullPath},G=Dl(E,u.host,u._protocol),Ee={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${d.size()}`,"X-Goog-Upload-Header-Content-Type":S.contentType,"Content-Type":"application/json; charset=utf-8"},Te=Go(S,o),Ze=new Ku(G,"POST",function _t(Zt){let Tn;op(Zt);try{Tn=Zt.getResponseHeader("X-Goog-Upload-URL")}catch{bc(!1)}return bc(lf(Tn)),Tn},u.maxUploadRetryTime);return Ze.urlParams=O,Ze.headers=Ee,Ze.body=Te,Ze.errorHandler=Tc(i),Ze}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(d,ho,i,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._uploadUrl=E,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const i=this._uploadUrl;this._resolveToken((o,d)=>{const g=function km(u,i,o,d){const G=new Ku(o,"POST",function E(Q){const Ee=op(Q,["active","final"]);let Te=null;try{Te=Q.getResponseHeader("X-Goog-Upload-Size-Received")}catch{bc(!1)}Te||bc(!1);const qe=Number(Te);return bc(!isNaN(qe)),new Ih(qe,d.size(),"final"===Ee)},u.maxUploadRetryTime);return G.headers={"X-Goog-Upload-Command":"query"},G.errorHandler=Tc(i),G}(this._ref.storage,this._ref._location,i,this._blob),E=this._ref.storage._makeRequest(g,ho,o,d);this._request=E,E.getPromise().then(S=>{this._request=void 0,this._updateProgress(S.current),this._needToFetchStatus=!1,S.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const i=262144*this._chunkMultiplier,o=new Ih(this._transferred,this._blob.size()),d=this._uploadUrl;this._resolveToken((g,E)=>{let S;try{S=function Bv(u,i,o,d,g,E,S,O){const G=new Ih(0,0);if(S?(G.current=S.current,G.total=S.total):(G.current=0,G.total=d.size()),d.size()!==G.total)throw function af(){return new Rs(Wi.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const Q=G.total-G.current;let Ee=Q;g>0&&(Ee=Math.min(Ee,g));const Te=G.current;let _t="";_t=0===Ee?"finalize":Q===Ee?"upload, finalize":"upload";const Ze={"X-Goog-Upload-Command":_t,"X-Goog-Upload-Offset":`${G.current}`},Zt=d.slice(Te,Te+Ee);if(null===Zt)throw vm();const Zr=new Ku(o,"POST",function Tn(Wr,Ha){const ei=op(Wr,["active","final"]),Wo=G.current+Ee,$a=d.size();let Ko;return Ko="final"===ei?mu(i,E)(Wr,Ha):null,new Ih(Wo,$a,"final"===ei,Ko)},i.maxUploadRetryTime);return Zr.headers=Ze,Zr.body=Zt.uploadData(),Zr.progressCallback=O||null,Zr.errorHandler=Tc(u),Zr}(this._ref._location,this._ref.storage,d,this._blob,i,this._mappings,o,this._makeProgressCallback())}catch(G){return this._error=G,void this._transition("error")}const O=this._ref.storage._makeRequest(S,ho,g,E,!1);this._request=O,O.getPromise().then(G=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(G.current),G.finalized?(this._metadata=G.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((i,o)=>{const d=rp(this._ref.storage,this._ref._location,this._mappings),g=this._ref.storage._makeRequest(d,ho,i,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((i,o)=>{const d=function dg(u,i,o,d,g){const E=i.bucketOnlyServerUrl(),S={"X-Goog-Upload-Protocol":"multipart"},G=function O(){let Zr="";for(let Wr=0;Wr<2;Wr++)Zr+=Math.random().toString().slice(2);return Zr}();S["Content-Type"]="multipart/related; boundary="+G;const Q=Om(i,d,g),Ee=Go(Q,o),_t=zu.getBlob("--"+G+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+Ee+"\r\n--"+G+"\r\nContent-Type: "+Q.contentType+"\r\n\r\n",d,"\r\n--"+G+"--");if(null===_t)throw vm();const Ze={name:Q.fullPath},Zt=Dl(E,u.host,u._protocol),Cr=u.maxUploadRetryTime,Vr=new Ku(Zt,"POST",mu(u,o),Cr);return Vr.urlParams=Ze,Vr.headers=S,Vr.body=_t.uploadData(),Vr.errorHandler=Tc(i),Vr}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),g=this._ref.storage._makeRequest(d,ho,i,o);this._request=g,g.getPromise().then(E=>{this._request=void 0,this._metadata=E,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(i){const o=this._transferred;this._transferred=i,this._transferred!==o&&this._notifyObservers()}_transition(i){if(this._state!==i)switch(i){case"canceling":case"pausing":this._state=i,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const o="paused"===this._state;this._state=i,o&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=i,this._notifyObservers();break;case"canceled":this._error=_m(),this._state=i,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const i=cf(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:i,metadata:this._metadata,task:this,ref:this._ref}}on(i,o,d,g){const E=new Ch(o||void 0,d||void 0,g||void 0);return this._addObserver(E),()=>{this._removeObserver(E)}}then(i,o){return this._promise.then(i,o)}catch(i){return this.then(null,i)}_addObserver(i){this._observers.push(i),this._notifyObserver(i)}_removeObserver(i){const o=this._observers.indexOf(i);-1!==o&&this._observers.splice(o,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(o=>{this._notifyObserver(o)})}_finishPromise(){if(void 0!==this._resolve){let i=!0;switch(cf(this._state)){case co.SUCCESS:ba(this._resolve.bind(null,this.snapshot))();break;case co.CANCELED:case co.ERROR:ba(this._reject.bind(null,this._error))();break;default:i=!1}i&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(i){switch(cf(this._state)){case co.RUNNING:case co.PAUSED:i.next&&ba(i.next.bind(i,this.snapshot))();break;case co.SUCCESS:i.complete&&ba(i.complete.bind(i))();break;default:i.error&&ba(i.error.bind(i,this._error))()}}resume(){const i="paused"===this._state||"pausing"===this._state;return i&&this._transition("running"),i}pause(){const i="running"===this._state;return i&&this._transition("pausing"),i}cancel(){const i="running"===this._state||"pausing"===this._state;return i&&this._transition("canceling"),i}}class ed{constructor(i,o){this._service=i,this._location=o instanceof ra?o:ra.makeFromUrl(o,i.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(i,o){return new ed(i,o)}get root(){const i=new ra(this._location.bucket,"");return this._newRef(this._service,i)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Am(this._location.path)}get storage(){return this._service}get parent(){const i=function Vy(u){if(0===u.length)return null;const i=u.lastIndexOf("/");return-1===i?"":u.slice(0,i)}(this._location.path);if(null===i)return null;const o=new ra(this._location.bucket,i);return new ed(this._service,o)}_throwIfRoot(i){if(""===this._location.path)throw mh(i)}}function Wy(u,i,o){return gg.apply(this,arguments)}function gg(){return(gg=(0,si.Z)(function*(u,i,o){const g=yield cp(u,{pageToken:o});i.prefixes.push(...g.prefixes),i.items.push(...g.items),null!=g.nextPageToken&&(yield Wy(u,i,g.nextPageToken))})).apply(this,arguments)}function cp(u,i){null!=i&&"number"==typeof i.maxResults&&Im("options.maxResults",1,1e3,i.maxResults);const o=i||{},d=ip(u.storage,u._location,"/",o.pageToken,o.maxResults);return u.storage.makeRequestWithTokens(d,ho)}function jv(u){u._throwIfRoot("getDownloadURL");const i=function Nm(u,i,o){const g=Dl(i.fullServerUrl(),u.host,u._protocol),S=u.maxOperationRetryTime,O=new Ku(g,"GET",function Hy(u,i){return function o(d,g){const E=ug(u,g,i);return bc(null!==E),function xm(u,i,o,d){const g=lg(i);if(null===g||!lf(g.downloadTokens))return null;const E=g.downloadTokens;if(0===E.length)return null;const S=encodeURIComponent;return E.split(",").map(Q=>{const Te=u.fullPath;return Dl("/b/"+S(u.bucket)+"/o/"+S(Te),o,d)+ig({alt:"media",token:Q})})[0]}(E,g,u.host,u._protocol)}}(u,o),S);return O.errorHandler=wh(i),O}(u.storage,u._location,Wu());return u.storage.makeRequestWithTokens(i,ho).then(o=>{if(null===o)throw function Qc(){return new Rs(Wi.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return o})}function nv(u,i){const o=function Uy(u,i){const o=i.split("/").filter(d=>d.length>0).join("/");return 0===u.length?o:u+"/"+o}(u._location.path,i),d=new ra(u._location.bucket,o);return new ed(u.storage,d)}function hf(u,i){if(u instanceof Zy){const o=u;if(null==o._bucket)throw function K_(){return new Rs(Wi.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Td+"' property when initializing the app?")}();const d=new ed(o,o._bucket);return null!=i?hf(d,i):d}return void 0!==i?nv(u,i):u}function hp(u,i){if(i&&function Bm(u){return/^[A-Za-z]+:\/\//.test(u)}(i)){if(u instanceof Zy)return function dp(u,i){return new ed(u,i)}(u,i);throw gh("To use ref(service, url), the first argument must be a Storage instance.")}return hf(u,i)}function qy(u,i){const o=i?.[Td];return null==o?null:ra.makeFromBucketSpec(o,u)}class Zy{constructor(i,o,d,g,E){this.app=i,this._authProvider=o,this._appCheckProvider=d,this._url=g,this._firebaseVersion=E,this._bucket=null,this._host=bd,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=g?ra.makeFromBucketSpec(g,this._host):qy(this._host,this.app.options)}get host(){return this._host}set host(i){this._host=i,this._bucket=null!=this._url?ra.makeFromBucketSpec(this._url,i):qy(i,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(i){Im("time",0,Number.POSITIVE_INFINITY,i),this._maxUploadRetryTime=i}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(i){Im("time",0,Number.POSITIVE_INFINITY,i),this._maxOperationRetryTime=i}_getAuthToken(){var i=this;return(0,si.Z)(function*(){if(i._overrideAuthToken)return i._overrideAuthToken;const o=i._authProvider.getImmediate({optional:!0});if(o){const d=yield o.getToken();if(null!==d)return d.accessToken}return null})()}_getAppCheckToken(){var i=this;return(0,si.Z)(function*(){const o=i._appCheckProvider.getImmediate({optional:!0});return o?(yield o.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(i=>i.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(i){return new ed(this,i)}_makeRequest(i,o,d,g,E=!0){if(this._deleted)return new Ny(rg());{const S=function Ad(u,i,o,d,g,E,S=!0){const O=ig(u.urlParams),G=u.url+O,Q=Object.assign({},u.headers);return function og(u,i){i&&(u["X-Firebase-GMPID"]=i)}(Q,i),function Dm(u,i){null!==i&&i.length>0&&(u.Authorization="Firebase "+i)}(Q,o),function sg(u,i){u["X-Firebase-Storage-Version"]="webjs/"+(i??"AppManager")}(Q,E),function gu(u,i){null!==i&&(u["X-Firebase-AppCheck"]=i)}(Q,d),new Cm(G,u.method,Q,u.body,u.successCodes,u.additionalRetryCodes,u.handler,u.errorHandler,u.timeout,u.progressCallback,g,S)}(i,this._appId,d,g,o,this._firebaseVersion,E);return this._requests.add(S),S.getPromise().then(()=>this._requests.delete(S),()=>this._requests.delete(S)),S}}makeRequestWithTokens(i,o){var d=this;return(0,si.Z)(function*(){const[g,E]=yield Promise.all([d._getAuthToken(),d._getAppCheckToken()]);return d._makeRequest(i,o,g,E).getPromise()})()}}const rv="@firebase/storage";function pf(u,i){return hp(u=(0,se.m9)(u),i)}function Jy(u,{instanceIdentifier:i}){const o=u.getProvider("app").getImmediate(),d=u.getProvider("auth-internal"),g=u.getProvider("app-check-internal");return new Zy(o,d,g,i,kn.SDK_VERSION)}!function zm(){(0,kn._registerComponent)(new Dr.wA("storage",Jy,"PUBLIC").setMultipleInstances(!0)),(0,kn.registerVersion)(rv,"0.11.2",""),(0,kn.registerVersion)(rv,"0.11.2","esm2017")}();class _g{constructor(i,o,d){this._delegate=i,this.task=o,this.ref=d}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class bh{constructor(i,o){this._delegate=i,this._ref=o,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new _g(this._delegate.snapshot,this,this._ref)}then(i,o){return this._delegate.then(d=>{if(i)return i(new _g(d,this,this._ref))},o)}on(i,o,d,g){let E;return o&&(E="function"==typeof o?S=>o(new _g(S,this,this._ref)):{next:o.next?S=>o.next(new _g(S,this,this._ref)):void 0,complete:o.complete||void 0,error:o.error||void 0}),this._delegate.on(i,E,d||void 0,g||void 0)}}class Sc{constructor(i,o){this._delegate=i,this._service=o}get prefixes(){return this._delegate.prefixes.map(i=>new Jl(i,this._service))}get items(){return this._delegate.items.map(i=>new Jl(i,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class Jl{constructor(i,o){this._delegate=i,this.storage=o}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(i){const o=function Gm(u,i){return nv(u,i)}(this._delegate,i);return new Jl(o,this.storage)}get root(){return new Jl(this._delegate.root,this.storage)}get parent(){const i=this._delegate.parent;return null==i?null:new Jl(i,this.storage)}put(i,o){return this._throwIfRoot("put"),new bh(function Yy(u,i,o){return function lp(u,i,o){return u._throwIfRoot("uploadBytesResumable"),new ap(u,new zu(i),o)}(u=(0,se.m9)(u),i,o)}(this._delegate,i,o),this)}putString(i,o=ia.RAW,d){this._throwIfRoot("putString");const g=Dc(o,i),E=Object.assign({},d);return null==E.contentType&&null!=g.contentType&&(E.contentType=g.contentType),new bh(new ap(this._delegate,new zu(g.data,!0),E),this)}listAll(){return function ff(u){return function tv(u){const i={prefixes:[],items:[]};return Wy(u,i).then(()=>i)}(u=(0,se.m9)(u))}(this._delegate).then(i=>new Sc(i,this.storage))}list(i){return function mg(u,i){return cp(u=(0,se.m9)(u),i)}(this._delegate,i||void 0).then(o=>new Sc(o,this.storage))}getMetadata(){return function Ql(u){return function Um(u){u._throwIfRoot("getMetadata");const i=rp(u.storage,u._location,Wu());return u.storage.makeRequestWithTokens(i,ho)}(u=(0,se.m9)(u))}(this._delegate)}updateMetadata(i){return function fp(u,i){return function Ky(u,i){u._throwIfRoot("updateMetadata");const o=function Pm(u,i,o,d){const E=Dl(i.fullServerUrl(),u.host,u._protocol),O=Go(o,d),Q=u.maxOperationRetryTime,Ee=new Ku(E,"PATCH",mu(u,d),Q);return Ee.headers={"Content-Type":"application/json; charset=utf-8"},Ee.body=O,Ee.errorHandler=wh(i),Ee}(u.storage,u._location,i,Wu());return u.storage.makeRequestWithTokens(o,ho)}(u=(0,se.m9)(u),i)}(this._delegate,i)}getDownloadURL(){return function pp(u){return jv(u=(0,se.m9)(u))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function $m(u){return function Ua(u){u._throwIfRoot("deleteObject");const i=function $y(u,i){const d=Dl(i.fullServerUrl(),u.host,u._protocol),O=new Ku(d,"DELETE",function S(G,Q){},u.maxOperationRetryTime);return O.successCodes=[200,204],O.errorHandler=wh(i),O}(u.storage,u._location);return u.storage.makeRequestWithTokens(i,ho)}(u=(0,se.m9)(u))}(this._delegate)}_throwIfRoot(i){if(""===this._delegate._location.path)throw mh(i)}}class Md{constructor(i,o){this.app=i,this._delegate=o}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(i){if(td(i))throw gh("ref() expected a child path but got a URL, use refFromURL instead.");return new Jl(pf(this._delegate,i),this)}refFromURL(i){if(!td(i))throw gh("refFromURL() expected a full URL but got a child path, use ref() instead.");try{ra.makeFromUrl(i,this._delegate.host)}catch{throw gh("refFromUrl() expected a valid full URL but got an invalid one.")}return new Jl(pf(this._delegate,i),this)}setMaxUploadRetryTime(i){this._delegate.maxUploadRetryTime=i}setMaxOperationRetryTime(i){this._delegate.maxOperationRetryTime=i}useEmulator(i,o,d={}){!function yg(u,i,o,d={}){!function Hv(u,i,o,d={}){u.host=`${i}:${o}`,u._protocol="http";const{mockUserToken:g}=d;g&&(u._overrideAuthToken="string"==typeof g?g:(0,se.Sg)(g,u.app.options.projectId))}(u,i,o,d)}(this._delegate,i,o,d)}}function td(u){return/^[A-Za-z]+:\/\//.test(u)}function vg(u,{instanceIdentifier:i}){const o=u.getProvider("app-compat").getImmediate(),d=u.getProvider("storage").getImmediate({identifier:i});return new Md(o,d)}function mf(u){const i=function t_(u){return new Rt.y(i=>{const o=S=>i.next(S);o(u.snapshot);const E=u.on("state_changed",o);return u.then(S=>{o(S),i.complete()},S=>{o(u.snapshot),(S=>{i.error(S)})(S)}),function(){E()}}).pipe(function tg(u,i=Se.z){return(0,it.e)((o,d)=>{let g=null,E=null,S=null;const O=()=>{if(g){g.unsubscribe(),g=null;const Q=E;E=null,d.next(Q)}};function G(){const Q=S+u,Ee=i.now();if(Ee<Q)return g=this.schedule(void 0,Q-Ee),void d.add(g);O()}o.subscribe((0,De.x)(d,Q=>{E=Q,S=i.now(),g||(g=i.schedule(G,u),d.add(g))},()=>{O(),d.complete()},void 0,()=>{E=g=null}))})}(0))}(u);return{task:u,then:u.then.bind(u),catch:u.catch.bind(u),pause:u.pause.bind(u),cancel:u.cancel.bind(u),resume:u.resume.bind(u),snapshotChanges:()=>i,percentageChanges:()=>i.pipe((0,$t.U)(o=>o.bytesTransferred/o.totalBytes*100))}}function wg(u){return{getDownloadURL:()=>(0,vt.of)(void 0).pipe(Dt.fc,(0,dt.w)(()=>u.getDownloadURL()),Dt.iC),getMetadata:()=>(0,vt.of)(void 0).pipe(Dt.fc,(0,dt.w)(()=>u.getMetadata()),Dt.iC),delete:()=>(0,Yf.D)(u.delete()),child:i=>wg(u.child(i)),updateMetadata:i=>(0,Yf.D)(u.updateMetadata(i)),put:(i,o)=>mf(u.put(i,o)),putString:(i,o,d)=>mf(u.putString(i,o,d)),list:i=>(0,Yf.D)(u.list(i)),listAll:()=>(0,Yf.D)(u.listAll())}}!function Eg(u){const i={TaskState:co,TaskEvent:qu,StringFormat:ia,Storage:Md,Reference:Jl};u.INTERNAL.registerComponent(new Dr.wA("storage-compat",vg,"PUBLIC").setServiceProps(i).setMultipleInstances(!0)),u.registerVersion("@firebase/storage-compat","0.3.2")}(Ht.Z);const n_=new Y.OlP("angularfire2.storageBucket"),sv=new Y.OlP("angularfire2.storage.maxUploadRetryTime"),Ig=new Y.OlP("angularfire2.storage.maxOperationRetryTime"),ov=new Y.OlP("angularfire2.storage.use-emulator");let Cg=(()=>{class u{constructor(o,d,g,E,S,O,G,Q,Ee,Te){const qe=(0,pe.on)(o,S,d);this.storage=(0,pe.cc)(`${qe.name}.storage.${g}`,"AngularFireStorage",qe.name,()=>{const _t=S.runOutsideAngular(()=>qe.storage(g||void 0)),Ze=Ee;return Ze&&_t.useEmulator(...Ze),G&&_t.setMaxUploadRetryTime(G),Q&&_t.setMaxOperationRetryTime(Q),_t},[G,Q])}ref(o){return wg(this.storage.ref(o))}refFromURL(o){return wg(this.storage.refFromURL(o))}upload(o,d,g){return wg(this.storage.ref(o)).put(d,g)}}return u.\u0275fac=function(o){return new(o||u)(Y.LFG(pe.Dh),Y.LFG(pe.xv,8),Y.LFG(n_,8),Y.LFG(Y.Lbi),Y.LFG(Y.R0b),Y.LFG(Dt.HU),Y.LFG(sv,8),Y.LFG(Ig,8),Y.LFG(ov,8),Y.LFG(al.nm,8))},u.\u0275prov=Y.Yz7({token:u,factory:u.\u0275fac,providedIn:"any"}),u})(),Wm=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=Y.oAB({type:u}),u.\u0275inj=Y.cJS({}),u})(),ll=(()=>{class u{constructor(){nf.Z.registerVersion("angularfire",Dt.q4.full,"gcs-compat")}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=Y.oAB({type:u}),u.\u0275inj=Y.cJS({providers:[Cg],imports:[Wm]}),u})();var Ki=z(7340);function xd(u){return new Y.vHH(3e3,!1)}function ty(){return typeof window<"u"&&typeof window.document<"u"}function Xl(){return typeof process<"u"&&"[object process]"==={}.toString.call(process)}function Zu(u){switch(u.length){case 0:return new Ki.ZN;case 1:return u[0];default:return new Ki.ZE(u)}}function Sh(u,i,o,d,g=new Map,E=new Map){const S=[],O=[];let G=-1,Q=null;if(d.forEach(Ee=>{const Te=Ee.get("offset"),qe=Te==G,_t=qe&&Q||new Map;Ee.forEach((Ze,Zt)=>{let Tn=Zt,Cr=Ze;if("offset"!==Zt)switch(Tn=i.normalizePropertyName(Tn,S),Cr){case Ki.k1:Cr=g.get(Zt);break;case Ki.l3:Cr=E.get(Zt);break;default:Cr=i.normalizeStyleValue(Zt,Tn,Cr,S)}_t.set(Tn,Cr)}),qe||O.push(_t),Q=_t,G=Te}),S.length)throw function Xm(u){return new Y.vHH(3502,!1)}();return O}function Ah(u,i,o,d){switch(i){case"start":u.onStart(()=>d(o&&_p(o,"start",u)));break;case"done":u.onDone(()=>d(o&&_p(o,"done",u)));break;case"destroy":u.onDestroy(()=>d(o&&_p(o,"destroy",u)))}}function _p(u,i,o){const E=vp(u.element,u.triggerName,u.fromState,u.toState,i||u.phaseName,o.totalTime??u.totalTime,!!o.disabled),S=u._data;return null!=S&&(E._data=S),E}function vp(u,i,o,d,g="",E=0,S){return{element:u,triggerName:i,fromState:o,toState:d,phaseName:g,totalTime:E,disabled:!!S}}function Ba(u,i,o){let d=u.get(i);return d||u.set(i,d=o),d}function Sg(u){const i=u.indexOf(":");return[u.substring(1,i),u.slice(i+1)]}let Ep=(u,i)=>!1,Yu=(u,i,o)=>[],ny=null;function Ag(u){const i=u.parentNode||u.host;return i===ny?null:i}(Xl()||typeof Element<"u")&&(ty()?(ny=(()=>document.documentElement)(),Ep=(u,i)=>{for(;i;){if(i===u)return!0;i=Ag(i)}return!1}):Ep=(u,i)=>u.contains(i),Yu=(u,i,o)=>{if(o)return Array.from(u.querySelectorAll(i));const d=u.querySelector(i);return d?[d]:[]});let ul=null,Rg=!1;const p_=Ep,Ef=Yu;let Mg=(()=>{class u{validateStyleProperty(o){return function fv(u){ul||(ul=function iy(){return typeof document<"u"?document.body:null}()||{},Rg=!!ul.style&&"WebkitAppearance"in ul.style);let i=!0;return ul.style&&!function f_(u){return"ebkit"==u.substring(1,6)}(u)&&(i=u in ul.style,!i&&Rg&&(i="Webkit"+u.charAt(0).toUpperCase()+u.slice(1)in ul.style)),i}(o)}matchesElement(o,d){return!1}containsElement(o,d){return p_(o,d)}getParentElement(o){return Ag(o)}query(o,d,g){return Ef(o,d,g)}computeStyle(o,d,g){return g||""}animate(o,d,g,E,S,O=[],G){return new Ki.ZN(g,E)}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275prov=Y.Yz7({token:u,factory:u.\u0275fac}),u})(),sy=(()=>{class u{}return u.NOOP=new Mg,u})();const Rh="ng-enter",_u="ng-leave",xg="ng-trigger",Pd=".ng-trigger",m_="ng-animating",wp=".ng-animating";function Qu(u){if("number"==typeof u)return u;const i=u.match(/^(-?[\.\d]+)(m?s)/);return!i||i.length<2?0:Ip(parseFloat(i[1]),i[2])}function Ip(u,i){return"s"===i?1e3*u:u}function cl(u,i,o){return u.hasOwnProperty("duration")?u:function Mh(u,i,o){let g,E=0,S="";if("string"==typeof u){const O=u.match(/^(-?[\.\d]+)(m?s)(?:\s+(-?[\.\d]+)(m?s))?(?:\s+([-a-z]+(?:\(.+?\))?))?$/i);if(null===O)return i.push(xd()),{duration:0,delay:0,easing:""};g=Ip(parseFloat(O[1]),O[2]);const G=O[3];null!=G&&(E=Ip(parseFloat(G),O[4]));const Q=O[5];Q&&(S=Q)}else g=u;if(!o){let O=!1,G=i.length;g<0&&(i.push(function Km(){return new Y.vHH(3100,!1)}()),O=!0),E<0&&(i.push(function Nd(){return new Y.vHH(3101,!1)}()),O=!0),O&&i.splice(G,0,xd())}return{duration:g,delay:E,easing:S}}(u,i,o)}function To(u,i={}){return Object.keys(u).forEach(o=>{i[o]=u[o]}),i}function vu(u){const i=new Map;return Object.keys(u).forEach(o=>{i.set(o,u[o])}),i}function Ju(u,i=new Map,o){if(o)for(let[d,g]of o)i.set(d,g);for(let[d,g]of u)i.set(d,g);return i}function Eu(u,i,o){return o?i+":"+o+";":""}function Od(u){let i="";for(let o=0;o<u.style.length;o++){const d=u.style.item(o);i+=Eu(0,d,u.style.getPropertyValue(d))}for(const o in u.style)u.style.hasOwnProperty(o)&&!o.startsWith("_")&&(i+=Eu(0,Og(o),u.style[o]));u.setAttribute("style",i)}function oa(u,i,o){u.style&&(i.forEach((d,g)=>{const E=Cp(g);o&&!o.has(g)&&o.set(g,u.style[E]),u.style[E]=d}),Xl()&&Od(u))}function wu(u,i){u.style&&(i.forEach((o,d)=>{const g=Cp(d);u.style[g]=""}),Xl()&&Od(u))}function Ac(u){return Array.isArray(u)?1==u.length?u[0]:(0,Ki.vP)(u):u}const kd=new RegExp("{{\\s*(.+?)\\s*}}","g");function Rc(u){let i=[];if("string"==typeof u){let o;for(;o=kd.exec(u);)i.push(o[1]);kd.lastIndex=0}return i}function Iu(u,i,o){const d=u.toString(),g=d.replace(kd,(E,S)=>{let O=i[S];return null==O&&(o.push(function i_(u){return new Y.vHH(3003,!1)}()),O=""),O.toString()});return g==d?u:g}function xh(u){const i=[];let o=u.next();for(;!o.done;)i.push(o.value),o=u.next();return i}const Pg=/-+([a-z0-9])/g;function Cp(u){return u.replace(Pg,(...i)=>i[1].toUpperCase())}function Og(u){return u.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function ja(u,i,o){switch(i.type){case 7:return u.visitTrigger(i,o);case 0:return u.visitState(i,o);case 1:return u.visitTransition(i,o);case 2:return u.visitSequence(i,o);case 3:return u.visitGroup(i,o);case 4:return u.visitAnimate(i,o);case 5:return u.visitKeyframes(i,o);case 6:return u.visitStyle(i,o);case 8:return u.visitReference(i,o);case 9:return u.visitAnimateChild(i,o);case 10:return u.visitAnimateRef(i,o);case 11:return u.visitQuery(i,o);case 12:return u.visitStagger(i,o);default:throw function yf(u){return new Y.vHH(3004,!1)}()}}function Fg(u,i){return window.getComputedStyle(u)[i]}function pv(u,i){const o=[];return"string"==typeof u?u.split(/\s*,\s*/).forEach(d=>function Tp(u,i,o){if(":"==u[0]){const G=function Lg(u,i){switch(u){case":enter":return"void => *";case":leave":return"* => void";case":increment":return(o,d)=>parseFloat(d)>parseFloat(o);case":decrement":return(o,d)=>parseFloat(d)<parseFloat(o);default:return i.push(function Jm(u){return new Y.vHH(3016,!1)}()),"* => *"}}(u,o);if("function"==typeof G)return void i.push(G);u=G}const d=u.match(/^(\*|[-\w]+)\s*(<?[=-]>)\s*(\*|[-\w]+)$/);if(null==d||d.length<4)return o.push(function uv(u){return new Y.vHH(3015,!1)}()),i;const g=d[1],E=d[2],S=d[3];i.push(Sp(g,S));"<"==E[0]&&!("*"==g&&"*"==S)&&i.push(Sp(S,g))}(d,o,i)):o.push(u),o}const Nh=new Set(["true","1"]),Vg=new Set(["false","0"]);function Sp(u,i){const o=Nh.has(u)||Vg.has(u),d=Nh.has(i)||Vg.has(i);return(g,E)=>{let S="*"==u||u==g,O="*"==i||i==E;return!S&&o&&"boolean"==typeof g&&(S=g?Nh.has(u):Vg.has(u)),!O&&d&&"boolean"==typeof E&&(O=E?Nh.has(i):Vg.has(i)),S&&O}}const dy=new RegExp("s*:selfs*,?","g");function Rp(u,i,o,d){return new Ug(u).build(i,o,d)}class Ug{constructor(i){this._driver=i}build(i,o,d){const g=new fy(o);return this._resetContextStyleTimingState(g),ja(this,Ac(i),g)}_resetContextStyleTimingState(i){i.currentQuerySelector="",i.collectedStyles=new Map,i.collectedStyles.set("",new Map),i.currentTime=0}visitTrigger(i,o){let d=o.queryCount=0,g=o.depCount=0;const E=[],S=[];return"@"==i.name.charAt(0)&&o.errors.push(function s_(){return new Y.vHH(3006,!1)}()),i.definitions.forEach(O=>{if(this._resetContextStyleTimingState(o),0==O.type){const G=O,Q=G.name;Q.toString().split(/\s*,\s*/).forEach(Ee=>{G.name=Ee,E.push(this.visitState(G,o))}),G.name=Q}else if(1==O.type){const G=this.visitTransition(O,o);d+=G.queryCount,g+=G.depCount,S.push(G)}else o.errors.push(function qm(){return new Y.vHH(3007,!1)}())}),{type:7,name:i.name,states:E,transitions:S,queryCount:d,depCount:g,options:null}}visitState(i,o){const d=this.visitStyle(i.styles,o),g=i.options&&i.options.params||null;if(d.containsDynamicStyles){const E=new Set,S=g||{};d.styles.forEach(O=>{O instanceof Map&&O.forEach(G=>{Rc(G).forEach(Q=>{S.hasOwnProperty(Q)||E.add(Q)})})}),E.size&&(xh(E.values()),o.errors.push(function Dg(u,i){return new Y.vHH(3008,!1)}()))}return{type:0,name:i.name,style:d,options:g?{params:g}:null}}visitTransition(i,o){o.queryCount=0,o.depCount=0;const d=ja(this,Ac(i.animation),o);return{type:1,matchers:pv(i.expr,o.errors),animation:d,queryCount:o.queryCount,depCount:o.depCount,options:nd(i.options)}}visitSequence(i,o){return{type:2,steps:i.steps.map(d=>ja(this,d,o)),options:nd(i.options)}}visitGroup(i,o){const d=o.currentTime;let g=0;const E=i.steps.map(S=>{o.currentTime=d;const O=ja(this,S,o);return g=Math.max(g,o.currentTime),O});return o.currentTime=g,{type:3,steps:E,options:nd(i.options)}}visitAnimate(i,o){const d=function ii(u,i){if(u.hasOwnProperty("duration"))return u;if("number"==typeof u)return xp(cl(u,i).duration,0,"");const o=u;if(o.split(/\s+/).some(E=>"{"==E.charAt(0)&&"{"==E.charAt(1))){const E=xp(0,0,"");return E.dynamic=!0,E.strValue=o,E}const g=cl(o,i);return xp(g.duration,g.delay,g.easing)}(i.timings,o.errors);o.currentAnimateTimings=d;let g,E=i.styles?i.styles:(0,Ki.oB)({});if(5==E.type)g=this.visitKeyframes(E,o);else{let S=i.styles,O=!1;if(!S){O=!0;const Q={};d.easing&&(Q.easing=d.easing),S=(0,Ki.oB)(Q)}o.currentTime+=d.duration+d.delay;const G=this.visitStyle(S,o);G.isEmptyStep=O,g=G}return o.currentAnimateTimings=null,{type:4,timings:d,style:g,options:null}}visitStyle(i,o){const d=this._makeStyleAst(i,o);return this._validateStyleAst(d,o),d}_makeStyleAst(i,o){const d=[],g=Array.isArray(i.styles)?i.styles:[i.styles];for(let O of g)"string"==typeof O?O===Ki.l3?d.push(O):o.errors.push(new Y.vHH(3002,!1)):d.push(vu(O));let E=!1,S=null;return d.forEach(O=>{if(O instanceof Map&&(O.has("easing")&&(S=O.get("easing"),O.delete("easing")),!E))for(let G of O.values())if(G.toString().indexOf("{{")>=0){E=!0;break}}),{type:6,styles:d,easing:S,offset:i.offset,containsDynamicStyles:E,options:null}}_validateStyleAst(i,o){const d=o.currentAnimateTimings;let g=o.currentTime,E=o.currentTime;d&&E>0&&(E-=d.duration+d.delay),i.styles.forEach(S=>{"string"!=typeof S&&S.forEach((O,G)=>{const Q=o.collectedStyles.get(o.currentQuerySelector),Ee=Q.get(G);let Te=!0;Ee&&(E!=g&&E>=Ee.startTime&&g<=Ee.endTime&&(o.errors.push(function a_(u,i,o,d,g){return new Y.vHH(3010,!1)}()),Te=!1),E=Ee.startTime),Te&&Q.set(G,{startTime:E,endTime:g}),o.options&&function wf(u,i,o){const d=i.params||{},g=Rc(u);g.length&&g.forEach(E=>{d.hasOwnProperty(E)||o.push(function Th(u){return new Y.vHH(3001,!1)}())})}(O,o.options,o.errors)})})}visitKeyframes(i,o){const d={type:5,styles:[],options:null};if(!o.currentAnimateTimings)return o.errors.push(function l_(){return new Y.vHH(3011,!1)}()),d;let E=0;const S=[];let O=!1,G=!1,Q=0;const Ee=i.steps.map(Cr=>{const Vr=this._makeStyleAst(Cr,o);let Zr=null!=Vr.offset?Vr.offset:function jg(u){if("string"==typeof u)return null;let i=null;if(Array.isArray(u))u.forEach(o=>{if(o instanceof Map&&o.has("offset")){const d=o;i=parseFloat(d.get("offset")),d.delete("offset")}});else if(u instanceof Map&&u.has("offset")){const o=u;i=parseFloat(o.get("offset")),o.delete("offset")}return i}(Vr.styles),Wr=0;return null!=Zr&&(E++,Wr=Vr.offset=Zr),G=G||Wr<0||Wr>1,O=O||Wr<Q,Q=Wr,S.push(Wr),Vr});G&&o.errors.push(function Ym(){return new Y.vHH(3012,!1)}()),O&&o.errors.push(function yu(){return new Y.vHH(3200,!1)}());const Te=i.steps.length;let qe=0;E>0&&E<Te?o.errors.push(function Qm(){return new Y.vHH(3202,!1)}()):0==E&&(qe=1/(Te-1));const _t=Te-1,Ze=o.currentTime,Zt=o.currentAnimateTimings,Tn=Zt.duration;return Ee.forEach((Cr,Vr)=>{const Zr=qe>0?Vr==_t?1:qe*Vr:S[Vr],Wr=Zr*Tn;o.currentTime=Ze+Zt.delay+Wr,Zt.duration=Wr,this._validateStyleAst(Cr,o),Cr.offset=Zr,d.styles.push(Cr)}),d}visitReference(i,o){return{type:8,animation:ja(this,Ac(i.animation),o),options:nd(i.options)}}visitAnimateChild(i,o){return o.depCount++,{type:9,options:nd(i.options)}}visitAnimateRef(i,o){return{type:10,animation:this.visitReference(i.animation,o),options:nd(i.options)}}visitQuery(i,o){const d=o.currentQuerySelector,g=i.options||{};o.queryCount++,o.currentQuery=i;const[E,S]=function hy(u){const i=!!u.split(/\s*,\s*/).find(o=>":self"==o);return i&&(u=u.replace(dy,"")),u=u.replace(/@\*/g,Pd).replace(/@\w+/g,o=>Pd+"-"+o.slice(1)).replace(/:animating/g,wp),[u,i]}(i.selector);o.currentQuerySelector=d.length?d+" "+E:E,Ba(o.collectedStyles,o.currentQuerySelector,new Map);const O=ja(this,Ac(i.animation),o);return o.currentQuery=null,o.currentQuerySelector=d,{type:11,selector:E,limit:g.limit||0,optional:!!g.optional,includeSelf:S,animation:O,originalSelector:i.selector,options:nd(i.options)}}visitStagger(i,o){o.currentQuery||o.errors.push(function u_(){return new Y.vHH(3013,!1)}());const d="full"===i.timings?{duration:0,delay:0,easing:"full"}:cl(i.timings,o.errors,!0);return{type:12,animation:ja(this,Ac(i.animation),o),timings:d,options:null}}}class fy{constructor(i){this.errors=i,this.queryCount=0,this.depCount=0,this.currentTransition=null,this.currentQuery=null,this.currentQuerySelector=null,this.currentAnimateTimings=null,this.currentTime=0,this.collectedStyles=new Map,this.options=null,this.unsupportedCSSPropertiesFound=new Set}}function nd(u){return u?(u=To(u)).params&&(u.params=function Bg(u){return u?To(u):null}(u.params)):u={},u}function xp(u,i,o){return{duration:u,delay:i,easing:o}}function Ld(u,i,o,d,g,E,S=null,O=!1){return{type:1,element:u,keyframes:i,preStyleProps:o,postStyleProps:d,duration:g,delay:E,totalTime:g+E,easing:S,subTimeline:O}}class Np{constructor(){this._map=new Map}get(i){return this._map.get(i)||[]}append(i,o){let d=this._map.get(i);d||this._map.set(i,d=[]),d.push(...o)}has(i){return this._map.has(i)}clear(){this._map.clear()}}const Xu=new RegExp(":enter","g"),__=new RegExp(":leave","g");function Ph(u,i,o,d,g,E=new Map,S=new Map,O,G,Q=[]){return(new py).buildKeyframes(u,i,o,d,g,E,S,O,G,Q)}class py{buildKeyframes(i,o,d,g,E,S,O,G,Q,Ee=[]){Q=Q||new Np;const Te=new $g(i,o,Q,g,E,Ee,[]);Te.options=G;const qe=G.delay?Qu(G.delay):0;Te.currentTimeline.delayNextStep(qe),Te.currentTimeline.setStyles([S],null,Te.errors,G),ja(this,d,Te);const _t=Te.timelines.filter(Ze=>Ze.containsAnimation());if(_t.length&&O.size){let Ze;for(let Zt=_t.length-1;Zt>=0;Zt--){const Tn=_t[Zt];if(Tn.element===o){Ze=Tn;break}}Ze&&!Ze.allowOnlyTimelineStyles()&&Ze.setStyles([O],null,Te.errors,G)}return _t.length?_t.map(Ze=>Ze.buildKeyframes()):[Ld(o,[],[],[],0,qe,"",!1)]}visitTrigger(i,o){}visitState(i,o){}visitTransition(i,o){}visitAnimateChild(i,o){const d=o.subInstructions.get(o.element);if(d){const g=o.createSubContext(i.options),E=o.currentTimeline.currentTime,S=this._visitSubInstructions(d,g,g.options);E!=S&&o.transformIntoNewTimeline(S)}o.previousNode=i}visitAnimateRef(i,o){const d=o.createSubContext(i.options);d.transformIntoNewTimeline(),this._applyAnimationRefDelays([i.options,i.animation.options],o,d),this.visitReference(i.animation,d),o.transformIntoNewTimeline(d.currentTimeline.currentTime),o.previousNode=i}_applyAnimationRefDelays(i,o,d){for(const g of i){const E=g?.delay;if(E){const S="number"==typeof E?E:Qu(Iu(E,g?.params??{},o.errors));d.delayNextStep(S)}}}_visitSubInstructions(i,o,d){let E=o.currentTimeline.currentTime;const S=null!=d.duration?Qu(d.duration):null,O=null!=d.delay?Qu(d.delay):null;return 0!==S&&i.forEach(G=>{const Q=o.appendInstructionToTimeline(G,S,O);E=Math.max(E,Q.duration+Q.delay)}),E}visitReference(i,o){o.updateOptions(i.options,!0),ja(this,i.animation,o),o.previousNode=i}visitSequence(i,o){const d=o.subContextCount;let g=o;const E=i.options;if(E&&(E.params||E.delay)&&(g=o.createSubContext(E),g.transformIntoNewTimeline(),null!=E.delay)){6==g.previousNode.type&&(g.currentTimeline.snapshotCurrentStyles(),g.previousNode=Oh);const S=Qu(E.delay);g.delayNextStep(S)}i.steps.length&&(i.steps.forEach(S=>ja(this,S,g)),g.currentTimeline.applyStylesToKeyframe(),g.subContextCount>d&&g.transformIntoNewTimeline()),o.previousNode=i}visitGroup(i,o){const d=[];let g=o.currentTimeline.currentTime;const E=i.options&&i.options.delay?Qu(i.options.delay):0;i.steps.forEach(S=>{const O=o.createSubContext(i.options);E&&O.delayNextStep(E),ja(this,S,O),g=Math.max(g,O.currentTimeline.currentTime),d.push(O.currentTimeline)}),d.forEach(S=>o.currentTimeline.mergeTimelineCollectedStyles(S)),o.transformIntoNewTimeline(g),o.previousNode=i}_visitTiming(i,o){if(i.dynamic){const d=i.strValue;return cl(o.params?Iu(d,o.params,o.errors):d,o.errors)}return{duration:i.duration,delay:i.delay,easing:i.easing}}visitAnimate(i,o){const d=o.currentAnimateTimings=this._visitTiming(i.timings,o),g=o.currentTimeline;d.delay&&(o.incrementTime(d.delay),g.snapshotCurrentStyles());const E=i.style;5==E.type?this.visitKeyframes(E,o):(o.incrementTime(d.duration),this.visitStyle(E,o),g.applyStylesToKeyframe()),o.currentAnimateTimings=null,o.previousNode=i}visitStyle(i,o){const d=o.currentTimeline,g=o.currentAnimateTimings;!g&&d.hasCurrentStyleProperties()&&d.forwardFrame();const E=g&&g.easing||i.easing;i.isEmptyStep?d.applyEmptyStep(E):d.setStyles(i.styles,E,o.errors,o.options),o.previousNode=i}visitKeyframes(i,o){const d=o.currentAnimateTimings,g=o.currentTimeline.duration,E=d.duration,O=o.createSubContext().currentTimeline;O.easing=d.easing,i.styles.forEach(G=>{O.forwardTime((G.offset||0)*E),O.setStyles(G.styles,G.easing,o.errors,o.options),O.applyStylesToKeyframe()}),o.currentTimeline.mergeTimelineCollectedStyles(O),o.transformIntoNewTimeline(g+E),o.previousNode=i}visitQuery(i,o){const d=o.currentTimeline.currentTime,g=i.options||{},E=g.delay?Qu(g.delay):0;E&&(6===o.previousNode.type||0==d&&o.currentTimeline.hasCurrentStyleProperties())&&(o.currentTimeline.snapshotCurrentStyles(),o.previousNode=Oh);let S=d;const O=o.invokeQuery(i.selector,i.originalSelector,i.limit,i.includeSelf,!!g.optional,o.errors);o.currentQueryTotal=O.length;let G=null;O.forEach((Q,Ee)=>{o.currentQueryIndex=Ee;const Te=o.createSubContext(i.options,Q);E&&Te.delayNextStep(E),Q===o.element&&(G=Te.currentTimeline),ja(this,i.animation,Te),Te.currentTimeline.applyStylesToKeyframe(),S=Math.max(S,Te.currentTimeline.currentTime)}),o.currentQueryIndex=0,o.currentQueryTotal=0,o.transformIntoNewTimeline(S),G&&(o.currentTimeline.mergeTimelineCollectedStyles(G),o.currentTimeline.snapshotCurrentStyles()),o.previousNode=i}visitStagger(i,o){const d=o.parentContext,g=o.currentTimeline,E=i.timings,S=Math.abs(E.duration),O=S*(o.currentQueryTotal-1);let G=S*o.currentQueryIndex;switch(E.duration<0?"reverse":E.easing){case"reverse":G=O-G;break;case"full":G=d.currentStaggerTime}const Ee=o.currentTimeline;G&&Ee.delayNextStep(G);const Te=Ee.currentTime;ja(this,i.animation,o),o.previousNode=i,d.currentStaggerTime=g.currentTime-Te+(g.startTime-d.currentTimeline.startTime)}}const Oh={};class $g{constructor(i,o,d,g,E,S,O,G){this._driver=i,this.element=o,this.subInstructions=d,this._enterClassName=g,this._leaveClassName=E,this.errors=S,this.timelines=O,this.parentContext=null,this.currentAnimateTimings=null,this.previousNode=Oh,this.subContextCount=0,this.options={},this.currentQueryIndex=0,this.currentQueryTotal=0,this.currentStaggerTime=0,this.currentTimeline=G||new kh(this._driver,o,0),O.push(this.currentTimeline)}get params(){return this.options.params}updateOptions(i,o){if(!i)return;const d=i;let g=this.options;null!=d.duration&&(g.duration=Qu(d.duration)),null!=d.delay&&(g.delay=Qu(d.delay));const E=d.params;if(E){let S=g.params;S||(S=this.options.params={}),Object.keys(E).forEach(O=>{(!o||!S.hasOwnProperty(O))&&(S[O]=Iu(E[O],S,this.errors))})}}_copyOptions(){const i={};if(this.options){const o=this.options.params;if(o){const d=i.params={};Object.keys(o).forEach(g=>{d[g]=o[g]})}}return i}createSubContext(i=null,o,d){const g=o||this.element,E=new $g(this._driver,g,this.subInstructions,this._enterClassName,this._leaveClassName,this.errors,this.timelines,this.currentTimeline.fork(g,d||0));return E.previousNode=this.previousNode,E.currentAnimateTimings=this.currentAnimateTimings,E.options=this._copyOptions(),E.updateOptions(i),E.currentQueryIndex=this.currentQueryIndex,E.currentQueryTotal=this.currentQueryTotal,E.parentContext=this,this.subContextCount++,E}transformIntoNewTimeline(i){return this.previousNode=Oh,this.currentTimeline=this.currentTimeline.fork(this.element,i),this.timelines.push(this.currentTimeline),this.currentTimeline}appendInstructionToTimeline(i,o,d){const g={duration:o??i.duration,delay:this.currentTimeline.currentTime+(d??0)+i.delay,easing:""},E=new v_(this._driver,i.element,i.keyframes,i.preStyleProps,i.postStyleProps,g,i.stretchStartingKeyframe);return this.timelines.push(E),g}incrementTime(i){this.currentTimeline.forwardTime(this.currentTimeline.duration+i)}delayNextStep(i){i>0&&this.currentTimeline.delayNextStep(i)}invokeQuery(i,o,d,g,E,S){let O=[];if(g&&O.push(this.element),i.length>0){i=(i=i.replace(Xu,"."+this._enterClassName)).replace(__,"."+this._leaveClassName);let Q=this._driver.query(this.element,i,1!=d);0!==d&&(Q=d<0?Q.slice(Q.length+d,Q.length):Q.slice(0,d)),O.push(...Q)}return!E&&0==O.length&&S.push(function lv(u){return new Y.vHH(3014,!1)}()),O}}class kh{constructor(i,o,d,g){this._driver=i,this.element=o,this.startTime=d,this._elementTimelineStylesLookup=g,this.duration=0,this._previousKeyframe=new Map,this._currentKeyframe=new Map,this._keyframes=new Map,this._styleSummary=new Map,this._localTimelineStyles=new Map,this._pendingStyles=new Map,this._backFill=new Map,this._currentEmptyStepKeyframe=null,this._elementTimelineStylesLookup||(this._elementTimelineStylesLookup=new Map),this._globalTimelineStyles=this._elementTimelineStylesLookup.get(o),this._globalTimelineStyles||(this._globalTimelineStyles=this._localTimelineStyles,this._elementTimelineStylesLookup.set(o,this._localTimelineStyles)),this._loadKeyframe()}containsAnimation(){switch(this._keyframes.size){case 0:return!1;case 1:return this.hasCurrentStyleProperties();default:return!0}}hasCurrentStyleProperties(){return this._currentKeyframe.size>0}get currentTime(){return this.startTime+this.duration}delayNextStep(i){const o=1===this._keyframes.size&&this._pendingStyles.size;this.duration||o?(this.forwardTime(this.currentTime+i),o&&this.snapshotCurrentStyles()):this.startTime+=i}fork(i,o){return this.applyStylesToKeyframe(),new kh(this._driver,i,o||this.currentTime,this._elementTimelineStylesLookup)}_loadKeyframe(){this._currentKeyframe&&(this._previousKeyframe=this._currentKeyframe),this._currentKeyframe=this._keyframes.get(this.duration),this._currentKeyframe||(this._currentKeyframe=new Map,this._keyframes.set(this.duration,this._currentKeyframe))}forwardFrame(){this.duration+=1,this._loadKeyframe()}forwardTime(i){this.applyStylesToKeyframe(),this.duration=i,this._loadKeyframe()}_updateStyle(i,o){this._localTimelineStyles.set(i,o),this._globalTimelineStyles.set(i,o),this._styleSummary.set(i,{time:this.currentTime,value:o})}allowOnlyTimelineStyles(){return this._currentEmptyStepKeyframe!==this._currentKeyframe}applyEmptyStep(i){i&&this._previousKeyframe.set("easing",i);for(let[o,d]of this._globalTimelineStyles)this._backFill.set(o,d||Ki.l3),this._currentKeyframe.set(o,Ki.l3);this._currentEmptyStepKeyframe=this._currentKeyframe}setStyles(i,o,d,g){o&&this._previousKeyframe.set("easing",o);const E=g&&g.params||{},S=function Os(u,i){const o=new Map;let d;return u.forEach(g=>{if("*"===g){d=d||i.keys();for(let E of d)o.set(E,Ki.l3)}else Ju(g,o)}),o}(i,this._globalTimelineStyles);for(let[O,G]of S){const Q=Iu(G,E,d);this._pendingStyles.set(O,Q),this._localTimelineStyles.has(O)||this._backFill.set(O,this._globalTimelineStyles.get(O)??Ki.l3),this._updateStyle(O,Q)}}applyStylesToKeyframe(){0!=this._pendingStyles.size&&(this._pendingStyles.forEach((i,o)=>{this._currentKeyframe.set(o,i)}),this._pendingStyles.clear(),this._localTimelineStyles.forEach((i,o)=>{this._currentKeyframe.has(o)||this._currentKeyframe.set(o,i)}))}snapshotCurrentStyles(){for(let[i,o]of this._localTimelineStyles)this._pendingStyles.set(i,o),this._updateStyle(i,o)}getFinalKeyframe(){return this._keyframes.get(this.duration)}get properties(){const i=[];for(let o in this._currentKeyframe)i.push(o);return i}mergeTimelineCollectedStyles(i){i._styleSummary.forEach((o,d)=>{const g=this._styleSummary.get(d);(!g||o.time>g.time)&&this._updateStyle(d,o.value)})}buildKeyframes(){this.applyStylesToKeyframe();const i=new Set,o=new Set,d=1===this._keyframes.size&&0===this.duration;let g=[];this._keyframes.forEach((O,G)=>{const Q=Ju(O,new Map,this._backFill);Q.forEach((Ee,Te)=>{Ee===Ki.k1?i.add(Te):Ee===Ki.l3&&o.add(Te)}),d||Q.set("offset",G/this.duration),g.push(Q)});const E=i.size?xh(i.values()):[],S=o.size?xh(o.values()):[];if(d){const O=g[0],G=new Map(O);O.set("offset",0),G.set("offset",1),g=[O,G]}return Ld(this.element,g,E,S,this.duration,this.startTime,this.easing,!1)}}class v_ extends kh{constructor(i,o,d,g,E,S,O=!1){super(i,o,S.delay),this.keyframes=d,this.preStyleProps=g,this.postStyleProps=E,this._stretchStartingKeyframe=O,this.timings={duration:S.duration,delay:S.delay,easing:S.easing}}containsAnimation(){return this.keyframes.length>1}buildKeyframes(){let i=this.keyframes,{delay:o,duration:d,easing:g}=this.timings;if(this._stretchStartingKeyframe&&o){const E=[],S=d+o,O=o/S,G=Ju(i[0]);G.set("offset",0),E.push(G);const Q=Ju(i[0]);Q.set("offset",gy(O)),E.push(Q);const Ee=i.length-1;for(let Te=1;Te<=Ee;Te++){let qe=Ju(i[Te]);const _t=qe.get("offset");qe.set("offset",gy((o+_t*d)/S)),E.push(qe)}d=S,o=0,g="",i=E}return Ld(this.element,i,this.preStyleProps,this.postStyleProps,d,o,g,!0)}}function gy(u,i=3){const o=Math.pow(10,i-1);return Math.round(u*o)/o}class E_{}const w_=new Set(["width","height","minWidth","minHeight","maxWidth","maxHeight","left","top","bottom","right","fontSize","outlineWidth","outlineOffset","paddingTop","paddingLeft","paddingBottom","paddingRight","marginTop","marginLeft","marginBottom","marginRight","borderRadius","borderWidth","borderTopWidth","borderLeftWidth","borderRightWidth","borderBottomWidth","textIndent","perspective"]);class zo extends E_{normalizePropertyName(i,o){return Cp(i)}normalizeStyleValue(i,o,d,g){let E="";const S=d.toString().trim();if(w_.has(o)&&0!==d&&"0"!==d)if("number"==typeof d)E="px";else{const O=d.match(/^[+-]?[\d\.]+([a-z]*)$/);O&&0==O[1].length&&g.push(function av(u,i){return new Y.vHH(3005,!1)}())}return S+E}}function my(u,i,o,d,g,E,S,O,G,Q,Ee,Te,qe){return{type:0,element:u,triggerName:i,isRemovalTransition:g,fromState:o,fromStyles:E,toState:d,toStyles:S,timelines:O,queriedElements:G,preStyleProps:Q,postStyleProps:Ee,totalTime:Te,errors:qe}}const Gg={};class I_{constructor(i,o,d){this._triggerName=i,this.ast=o,this._stateStyles=d}match(i,o,d,g){return function mv(u,i,o,d,g){return u.some(E=>E(i,o,d,g))}(this.ast.matchers,i,o,d,g)}buildStyles(i,o,d){let g=this._stateStyles.get("*");return void 0!==i&&(g=this._stateStyles.get(i?.toString())||g),g?g.buildStyles(o,d):new Map}build(i,o,d,g,E,S,O,G,Q,Ee){const Te=[],qe=this.ast.options&&this.ast.options.params||Gg,Ze=this.buildStyles(d,O&&O.params||Gg,Te),Zt=G&&G.params||Gg,Tn=this.buildStyles(g,Zt,Te),Cr=new Set,Vr=new Map,Zr=new Map,Wr="void"===g,Ha={params:C_(Zt,qe),delay:this.ast.options?.delay},ei=Ee?[]:Ph(i,o,this.ast.animation,E,S,Ze,Tn,Ha,Q,Te);let Wo=0;if(ei.forEach(Ko=>{Wo=Math.max(Ko.duration+Ko.delay,Wo)}),Te.length)return my(o,this._triggerName,d,g,Wr,Ze,Tn,[],[],Vr,Zr,Wo,Te);ei.forEach(Ko=>{const rc=Ko.element,k_=Ba(Vr,rc,new Set);Ko.preStyleProps.forEach(jd=>k_.add(jd));const Nf=Ba(Zr,rc,new Set);Ko.postStyleProps.forEach(jd=>Nf.add(jd)),rc!==o&&Cr.add(rc)});const $a=xh(Cr.values());return my(o,this._triggerName,d,g,Wr,Ze,Tn,ei,$a,Vr,Zr,Wo)}}function C_(u,i){const o=To(i);for(const d in u)u.hasOwnProperty(d)&&null!=u[d]&&(o[d]=u[d]);return o}class yv{constructor(i,o,d){this.styles=i,this.defaultParams=o,this.normalizer=d}buildStyles(i,o){const d=new Map,g=To(this.defaultParams);return Object.keys(i).forEach(E=>{const S=i[E];null!==S&&(g[E]=S)}),this.styles.styles.forEach(E=>{"string"!=typeof E&&E.forEach((S,O)=>{S&&(S=Iu(S,g,o));const G=this.normalizer.normalizePropertyName(O,o);S=this.normalizer.normalizeStyleValue(O,G,S,o),d.set(G,S)})}),d}}class _v{constructor(i,o,d){this.name=i,this.ast=o,this._normalizer=d,this.transitionFactories=[],this.states=new Map,o.states.forEach(g=>{this.states.set(g.name,new yv(g.style,g.options&&g.options.params||{},d))}),Fh(this.states,"true","1"),Fh(this.states,"false","0"),o.transitions.forEach(g=>{this.transitionFactories.push(new I_(i,g,this.states))}),this.fallbackTransition=function D_(u,i,o){return new I_(u,{type:1,animation:{type:2,steps:[],options:null},matchers:[(S,O)=>!0],options:null,queryCount:0,depCount:0},i)}(i,this.states)}get containsQueries(){return this.ast.queryCount>0}matchTransition(i,o,d,g){return this.transitionFactories.find(S=>S.match(i,o,d,g))||null}matchStyles(i,o,d){return this.fallbackTransition.buildStyles(i,o,d)}}function Fh(u,i,o){u.has(i)?u.has(o)||u.set(o,u.get(i)):u.has(o)&&u.set(i,u.get(o))}const vv=new Np;class ec{constructor(i,o,d){this.bodyNode=i,this._driver=o,this._normalizer=d,this._animations=new Map,this._playersById=new Map,this.players=[]}register(i,o){const d=[],E=Rp(this._driver,o,d,[]);if(d.length)throw function dv(u){return new Y.vHH(3503,!1)}();this._animations.set(i,E)}_buildPlayer(i,o,d){const g=i.element,E=Sh(0,this._normalizer,0,i.keyframes,o,d);return this._driver.animate(g,E,i.duration,i.delay,i.easing,[],!0)}create(i,o,d={}){const g=[],E=this._animations.get(i);let S;const O=new Map;if(E?(S=Ph(this._driver,o,E,Rh,_u,new Map,new Map,d,vv,g),S.forEach(Ee=>{const Te=Ba(O,Ee.element,new Map);Ee.postStyleProps.forEach(qe=>Te.set(qe,null))})):(g.push(function hv(){return new Y.vHH(3300,!1)}()),S=[]),g.length)throw function _f(u){return new Y.vHH(3504,!1)}();O.forEach((Ee,Te)=>{Ee.forEach((qe,_t)=>{Ee.set(_t,this._driver.computeStyle(Te,_t,Ki.l3))})});const Q=Zu(S.map(Ee=>{const Te=O.get(Ee.element);return this._buildPlayer(Ee,new Map,Te)}));return this._playersById.set(i,Q),Q.onDestroy(()=>this.destroy(i)),this.players.push(Q),Q}destroy(i){const o=this._getPlayer(i);o.destroy(),this._playersById.delete(i);const d=this.players.indexOf(o);d>=0&&this.players.splice(d,1)}_getPlayer(i){const o=this._playersById.get(i);if(!o)throw function mp(u){return new Y.vHH(3301,!1)}();return o}listen(i,o,d,g){const E=vp(o,"","","");return Ah(this._getPlayer(i),d,E,g),()=>{}}command(i,o,d,g){if("register"==d)return void this.register(i,g[0]);if("create"==d)return void this.create(i,o,g[0]||{});const E=this._getPlayer(i);switch(d){case"play":E.play();break;case"pause":E.pause();break;case"reset":E.reset();break;case"restart":E.restart();break;case"finish":E.finish();break;case"init":E.init();break;case"setPosition":E.setPosition(parseFloat(g[0]));break;case"destroy":this.destroy(i)}}}const rd="ng-animate-queued",tc="ng-animate-disabled",nc=[],eu={namespaceId:"",setForRemoval:!1,setForMove:!1,hasAnimation:!1,removedBeforeQueried:!1},Sl={namespaceId:"",setForMove:!1,setForRemoval:!1,hasAnimation:!1,removedBeforeQueried:!0},tu="__ng_removed";class Mc{constructor(i,o=""){this.namespaceId=o;const d=i&&i.hasOwnProperty("value");if(this.value=function wv(u){return u??null}(d?i.value:i),d){const E=To(i);delete E.value,this.options=E}else this.options={};this.options.params||(this.options.params={})}get params(){return this.options.params}absorbOptions(i){const o=i.params;if(o){const d=this.options.params;Object.keys(o).forEach(g=>{null==d[g]&&(d[g]=o[g])})}}}const Vd="void",Lh=new Mc(Vd);class S_{constructor(i,o,d){this.id=i,this.hostElement=o,this._engine=d,this.players=[],this._triggers=new Map,this._queue=[],this._elementListeners=new Map,this._hostClassName="ng-tns-"+i,nu(o,this._hostClassName)}listen(i,o,d,g){if(!this._triggers.has(o))throw function vf(u,i){return new Y.vHH(3302,!1)}();if(null==d||0==d.length)throw function Gv(u){return new Y.vHH(3303,!1)}();if(!function _y(u){return"start"==u||"done"==u}(d))throw function yp(u,i){return new Y.vHH(3400,!1)}();const E=Ba(this._elementListeners,i,[]),S={name:o,phase:d,callback:g};E.push(S);const O=Ba(this._engine.statesByElement,i,new Map);return O.has(o)||(nu(i,xg),nu(i,xg+"-"+o),O.set(o,Lh)),()=>{this._engine.afterFlush(()=>{const G=E.indexOf(S);G>=0&&E.splice(G,1),this._triggers.has(o)||O.delete(o)})}}register(i,o){return!this._triggers.has(i)&&(this._triggers.set(i,o),!0)}_getTrigger(i){const o=this._triggers.get(i);if(!o)throw function zv(u){return new Y.vHH(3401,!1)}();return o}trigger(i,o,d,g=!0){const E=this._getTrigger(o),S=new Pp(this.id,o,i);let O=this._engine.statesByElement.get(i);O||(nu(i,xg),nu(i,xg+"-"+o),this._engine.statesByElement.set(i,O=new Map));let G=O.get(o);const Q=new Mc(d,this.id);if(!(d&&d.hasOwnProperty("value"))&&G&&Q.absorbOptions(G.options),O.set(o,Q),G||(G=Lh),Q.value!==Vd&&G.value===Q.value){if(!function Sf(u,i){const o=Object.keys(u),d=Object.keys(i);if(o.length!=d.length)return!1;for(let g=0;g<o.length;g++){const E=o[g];if(!i.hasOwnProperty(E)||u[E]!==i[E])return!1}return!0}(G.params,Q.params)){const Zt=[],Tn=E.matchStyles(G.value,G.params,Zt),Cr=E.matchStyles(Q.value,Q.params,Zt);Zt.length?this._engine.reportError(Zt):this._engine.afterFlush(()=>{wu(i,Tn),oa(i,Cr)})}return}const qe=Ba(this._engine.playersByElement,i,[]);qe.forEach(Zt=>{Zt.namespaceId==this.id&&Zt.triggerName==o&&Zt.queued&&Zt.destroy()});let _t=E.matchTransition(G.value,Q.value,i,Q.params),Ze=!1;if(!_t){if(!g)return;_t=E.fallbackTransition,Ze=!0}return this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:o,transition:_t,fromState:G,toState:Q,player:S,isFallbackTransition:Ze}),Ze||(nu(i,rd),S.onStart(()=>{sd(i,rd)})),S.onDone(()=>{let Zt=this.players.indexOf(S);Zt>=0&&this.players.splice(Zt,1);const Tn=this._engine.playersByElement.get(i);if(Tn){let Cr=Tn.indexOf(S);Cr>=0&&Tn.splice(Cr,1)}}),this.players.push(S),qe.push(S),S}deregister(i){this._triggers.delete(i),this._engine.statesByElement.forEach(o=>o.delete(i)),this._elementListeners.forEach((o,d)=>{this._elementListeners.set(d,o.filter(g=>g.name!=i))})}clearElementCache(i){this._engine.statesByElement.delete(i),this._elementListeners.delete(i);const o=this._engine.playersByElement.get(i);o&&(o.forEach(d=>d.destroy()),this._engine.playersByElement.delete(i))}_signalRemovalForInnerTriggers(i,o){const d=this._engine.driver.query(i,Pd,!0);d.forEach(g=>{if(g[tu])return;const E=this._engine.fetchNamespacesByElement(g);E.size?E.forEach(S=>S.triggerLeaveAnimation(g,o,!1,!0)):this.clearElementCache(g)}),this._engine.afterFlushAnimationsDone(()=>d.forEach(g=>this.clearElementCache(g)))}triggerLeaveAnimation(i,o,d,g){const E=this._engine.statesByElement.get(i),S=new Map;if(E){const O=[];if(E.forEach((G,Q)=>{if(S.set(Q,G.value),this._triggers.has(Q)){const Ee=this.trigger(i,Q,Vd,g);Ee&&O.push(Ee)}}),O.length)return this._engine.markElementAsRemoved(this.id,i,!0,o,S),d&&Zu(O).onDone(()=>this._engine.processLeaveNode(i)),!0}return!1}prepareLeaveAnimationListeners(i){const o=this._elementListeners.get(i),d=this._engine.statesByElement.get(i);if(o&&d){const g=new Set;o.forEach(E=>{const S=E.name;if(g.has(S))return;g.add(S);const G=this._triggers.get(S).fallbackTransition,Q=d.get(S)||Lh,Ee=new Mc(Vd),Te=new Pp(this.id,S,i);this._engine.totalQueuedPlayers++,this._queue.push({element:i,triggerName:S,transition:G,fromState:Q,toState:Ee,player:Te,isFallbackTransition:!0})})}}removeNode(i,o){const d=this._engine;if(i.childElementCount&&this._signalRemovalForInnerTriggers(i,o),this.triggerLeaveAnimation(i,o,!0))return;let g=!1;if(d.totalAnimations){const E=d.players.length?d.playersByQueriedElement.get(i):[];if(E&&E.length)g=!0;else{let S=i;for(;S=S.parentNode;)if(d.statesByElement.get(S)){g=!0;break}}}if(this.prepareLeaveAnimationListeners(i),g)d.markElementAsRemoved(this.id,i,!1,o);else{const E=i[tu];(!E||E===eu)&&(d.afterFlush(()=>this.clearElementCache(i)),d.destroyInnerAnimations(i),d._onRemovalComplete(i,o))}}insertNode(i,o){nu(i,this._hostClassName)}drainQueuedTransitions(i){const o=[];return this._queue.forEach(d=>{const g=d.player;if(g.destroyed)return;const E=d.element,S=this._elementListeners.get(E);S&&S.forEach(O=>{if(O.name==d.triggerName){const G=vp(E,d.triggerName,d.fromState.value,d.toState.value);G._data=i,Ah(d.player,O.phase,G,O.callback)}}),g.markedForDestroy?this._engine.afterFlush(()=>{g.destroy()}):o.push(d)}),this._queue=[],o.sort((d,g)=>{const E=d.transition.ast.depCount,S=g.transition.ast.depCount;return 0==E||0==S?E-S:this._engine.driver.containsElement(d.element,g.element)?1:-1})}destroy(i){this.players.forEach(o=>o.destroy()),this._signalRemovalForInnerTriggers(this.hostElement,i)}elementContainsData(i){let o=!1;return this._elementListeners.has(i)&&(o=!0),o=!!this._queue.find(d=>d.element===i)||o,o}}class yy{constructor(i,o,d){this.bodyNode=i,this.driver=o,this._normalizer=d,this.players=[],this.newHostElements=new Map,this.playersByElement=new Map,this.playersByQueriedElement=new Map,this.statesByElement=new Map,this.disabledNodes=new Set,this.totalAnimations=0,this.totalQueuedPlayers=0,this._namespaceLookup={},this._namespaceList=[],this._flushFns=[],this._whenQuietFns=[],this.namespacesByHostElement=new Map,this.collectedEnterElements=[],this.collectedLeaveElements=[],this.onRemovalComplete=(g,E)=>{}}_onRemovalComplete(i,o){this.onRemovalComplete(i,o)}get queuedPlayers(){const i=[];return this._namespaceList.forEach(o=>{o.players.forEach(d=>{d.queued&&i.push(d)})}),i}createNamespace(i,o){const d=new S_(i,o,this);return this.bodyNode&&this.driver.containsElement(this.bodyNode,o)?this._balanceNamespaceList(d,o):(this.newHostElements.set(o,d),this.collectEnterElement(o)),this._namespaceLookup[i]=d}_balanceNamespaceList(i,o){const d=this._namespaceList,g=this.namespacesByHostElement;if(d.length-1>=0){let S=!1,O=this.driver.getParentElement(o);for(;O;){const G=g.get(O);if(G){const Q=d.indexOf(G);d.splice(Q+1,0,i),S=!0;break}O=this.driver.getParentElement(O)}S||d.unshift(i)}else d.push(i);return g.set(o,i),i}register(i,o){let d=this._namespaceLookup[i];return d||(d=this.createNamespace(i,o)),d}registerTrigger(i,o,d){let g=this._namespaceLookup[i];g&&g.register(o,d)&&this.totalAnimations++}destroy(i,o){if(!i)return;const d=this._fetchNamespace(i);this.afterFlush(()=>{this.namespacesByHostElement.delete(d.hostElement),delete this._namespaceLookup[i];const g=this._namespaceList.indexOf(d);g>=0&&this._namespaceList.splice(g,1)}),this.afterFlushAnimationsDone(()=>d.destroy(o))}_fetchNamespace(i){return this._namespaceLookup[i]}fetchNamespacesByElement(i){const o=new Set,d=this.statesByElement.get(i);if(d)for(let g of d.values())if(g.namespaceId){const E=this._fetchNamespace(g.namespaceId);E&&o.add(E)}return o}trigger(i,o,d,g){if(Vh(o)){const E=this._fetchNamespace(i);if(E)return E.trigger(o,d,g),!0}return!1}insertNode(i,o,d,g){if(!Vh(o))return;const E=o[tu];if(E&&E.setForRemoval){E.setForRemoval=!1,E.setForMove=!0;const S=this.collectedLeaveElements.indexOf(o);S>=0&&this.collectedLeaveElements.splice(S,1)}if(i){const S=this._fetchNamespace(i);S&&S.insertNode(o,d)}g&&this.collectEnterElement(o)}collectEnterElement(i){this.collectedEnterElements.push(i)}markElementAsDisabled(i,o){o?this.disabledNodes.has(i)||(this.disabledNodes.add(i),nu(i,tc)):this.disabledNodes.has(i)&&(this.disabledNodes.delete(i),sd(i,tc))}removeNode(i,o,d,g){if(Vh(o)){const E=i?this._fetchNamespace(i):null;if(E?E.removeNode(o,g):this.markElementAsRemoved(i,o,!1,g),d){const S=this.namespacesByHostElement.get(o);S&&S.id!==i&&S.removeNode(o,g)}}else this._onRemovalComplete(o,g)}markElementAsRemoved(i,o,d,g,E){this.collectedLeaveElements.push(o),o[tu]={namespaceId:i,setForRemoval:g,hasAnimation:d,removedBeforeQueried:!1,previousTriggersValues:E}}listen(i,o,d,g,E){return Vh(o)?this._fetchNamespace(i).listen(o,d,g,E):()=>{}}_buildInstruction(i,o,d,g,E){return i.transition.build(this.driver,i.element,i.fromState.value,i.toState.value,d,g,i.fromState.options,i.toState.options,o,E)}destroyInnerAnimations(i){let o=this.driver.query(i,Pd,!0);o.forEach(d=>this.destroyActiveAnimationsForElement(d)),0!=this.playersByQueriedElement.size&&(o=this.driver.query(i,wp,!0),o.forEach(d=>this.finishActiveQueriedAnimationOnElement(d)))}destroyActiveAnimationsForElement(i){const o=this.playersByElement.get(i);o&&o.forEach(d=>{d.queued?d.markedForDestroy=!0:d.destroy()})}finishActiveQueriedAnimationOnElement(i){const o=this.playersByQueriedElement.get(i);o&&o.forEach(d=>d.finish())}whenRenderingDone(){return new Promise(i=>{if(this.players.length)return Zu(this.players).onDone(()=>i());i()})}processLeaveNode(i){const o=i[tu];if(o&&o.setForRemoval){if(i[tu]=eu,o.namespaceId){this.destroyInnerAnimations(i);const d=this._fetchNamespace(o.namespaceId);d&&d.clearElementCache(i)}this._onRemovalComplete(i,o.setForRemoval)}i.classList?.contains(tc)&&this.markElementAsDisabled(i,!1),this.driver.query(i,".ng-animate-disabled",!0).forEach(d=>{this.markElementAsDisabled(d,!1)})}flush(i=-1){let o=[];if(this.newHostElements.size&&(this.newHostElements.forEach((d,g)=>this._balanceNamespaceList(d,g)),this.newHostElements.clear()),this.totalAnimations&&this.collectedEnterElements.length)for(let d=0;d<this.collectedEnterElements.length;d++)nu(this.collectedEnterElements[d],"ng-star-inserted");if(this._namespaceList.length&&(this.totalQueuedPlayers||this.collectedLeaveElements.length)){const d=[];try{o=this._flushAnimations(d,i)}finally{for(let g=0;g<d.length;g++)d[g]()}}else for(let d=0;d<this.collectedLeaveElements.length;d++)this.processLeaveNode(this.collectedLeaveElements[d]);if(this.totalQueuedPlayers=0,this.collectedEnterElements.length=0,this.collectedLeaveElements.length=0,this._flushFns.forEach(d=>d()),this._flushFns=[],this._whenQuietFns.length){const d=this._whenQuietFns;this._whenQuietFns=[],o.length?Zu(o).onDone(()=>{d.forEach(g=>g())}):d.forEach(g=>g())}}reportError(i){throw function bg(u){return new Y.vHH(3402,!1)}()}_flushAnimations(i,o){const d=new Np,g=[],E=new Map,S=[],O=new Map,G=new Map,Q=new Map,Ee=new Set;this.disabledNodes.forEach(Bn=>{Ee.add(Bn);const or=this.driver.query(Bn,".ng-animate-queued",!0);for(let ar=0;ar<or.length;ar++)Ee.add(or[ar])});const Te=this.bodyNode,qe=Array.from(this.statesByElement.keys()),_t=bf(qe,this.collectedEnterElements),Ze=new Map;let Zt=0;_t.forEach((Bn,or)=>{const ar=Rh+Zt++;Ze.set(or,ar),Bn.forEach(Mi=>nu(Mi,ar))});const Tn=[],Cr=new Set,Vr=new Set;for(let Bn=0;Bn<this.collectedLeaveElements.length;Bn++){const or=this.collectedLeaveElements[Bn],ar=or[tu];ar&&ar.setForRemoval&&(Tn.push(or),Cr.add(or),ar.hasAnimation?this.driver.query(or,".ng-star-inserted",!0).forEach(Mi=>Cr.add(Mi)):Vr.add(or))}const Zr=new Map,Wr=bf(qe,Array.from(Cr));Wr.forEach((Bn,or)=>{const ar=_u+Zt++;Zr.set(or,ar),Bn.forEach(Mi=>nu(Mi,ar))}),i.push(()=>{_t.forEach((Bn,or)=>{const ar=Ze.get(or);Bn.forEach(Mi=>sd(Mi,ar))}),Wr.forEach((Bn,or)=>{const ar=Zr.get(or);Bn.forEach(Mi=>sd(Mi,ar))}),Tn.forEach(Bn=>{this.processLeaveNode(Bn)})});const Ha=[],ei=[];for(let Bn=this._namespaceList.length-1;Bn>=0;Bn--)this._namespaceList[Bn].drainQueuedTransitions(o).forEach(ar=>{const Mi=ar.player,Ta=ar.element;if(Ha.push(Mi),this.collectedEnterElements.length){const as=Ta[tu];if(as&&as.setForMove){if(as.previousTriggersValues&&as.previousTriggersValues.has(ar.triggerName)){const ic=as.previousTriggersValues.get(ar.triggerName),Cu=this.statesByElement.get(ar.element);if(Cu&&Cu.has(ar.triggerName)){const em=Cu.get(ar.triggerName);em.value=ic,Cu.set(ar.triggerName,em)}}return void Mi.destroy()}}const xc=!Te||!this.driver.containsElement(Te,Ta),Ga=Zr.get(Ta),ad=Ze.get(Ta),Gs=this._buildInstruction(ar,d,ad,Ga,xc);if(Gs.errors&&Gs.errors.length)return void ei.push(Gs);if(xc)return Mi.onStart(()=>wu(Ta,Gs.fromStyles)),Mi.onDestroy(()=>oa(Ta,Gs.toStyles)),void g.push(Mi);if(ar.isFallbackTransition)return Mi.onStart(()=>wu(Ta,Gs.fromStyles)),Mi.onDestroy(()=>oa(Ta,Gs.toStyles)),void g.push(Mi);const Iy=[];Gs.timelines.forEach(as=>{as.stretchStartingKeyframe=!0,this.disabledNodes.has(as.element)||Iy.push(as)}),Gs.timelines=Iy,d.append(Ta,Gs.timelines),S.push({instruction:Gs,player:Mi,element:Ta}),Gs.queriedElements.forEach(as=>Ba(O,as,[]).push(Mi)),Gs.preStyleProps.forEach((as,ic)=>{if(as.size){let Cu=G.get(ic);Cu||G.set(ic,Cu=new Set),as.forEach((em,Cy)=>Cu.add(Cy))}}),Gs.postStyleProps.forEach((as,ic)=>{let Cu=Q.get(ic);Cu||Q.set(ic,Cu=new Set),as.forEach((em,Cy)=>Cu.add(Cy))})});if(ei.length){const Bn=[];ei.forEach(or=>{Bn.push(function Tg(u,i){return new Y.vHH(3505,!1)}())}),Ha.forEach(or=>or.destroy()),this.reportError(Bn)}const Wo=new Map,$a=new Map;S.forEach(Bn=>{const or=Bn.element;d.has(or)&&($a.set(or,or),this._beforeAnimationBuild(Bn.player.namespaceId,Bn.instruction,Wo))}),g.forEach(Bn=>{const or=Bn.element;this._getPreviousPlayers(or,!1,Bn.namespaceId,Bn.triggerName,null).forEach(Mi=>{Ba(Wo,or,[]).push(Mi),Mi.destroy()})});const Ko=Tn.filter(Bn=>Wg(Bn,G,Q)),rc=new Map;id(rc,this.driver,Vr,Q,Ki.l3).forEach(Bn=>{Wg(Bn,G,Q)&&Ko.push(Bn)});const Nf=new Map;_t.forEach((Bn,or)=>{id(Nf,this.driver,new Set(Bn),G,Ki.k1)}),Ko.forEach(Bn=>{const or=rc.get(Bn),ar=Nf.get(Bn);rc.set(Bn,new Map([...Array.from(or?.entries()??[]),...Array.from(ar?.entries()??[])]))});const jd=[],wy=[],F_={};S.forEach(Bn=>{const{element:or,player:ar,instruction:Mi}=Bn;if(d.has(or)){if(Ee.has(or))return ar.onDestroy(()=>oa(or,Mi.toStyles)),ar.disabled=!0,ar.overrideTotalTime(Mi.totalTime),void g.push(ar);let Ta=F_;if($a.size>1){let Ga=or;const ad=[];for(;Ga=Ga.parentNode;){const Gs=$a.get(Ga);if(Gs){Ta=Gs;break}ad.push(Ga)}ad.forEach(Gs=>$a.set(Gs,Ta))}const xc=this._buildAnimation(ar.namespaceId,Mi,Wo,E,Nf,rc);if(ar.setRealPlayer(xc),Ta===F_)jd.push(ar);else{const Ga=this.playersByElement.get(Ta);Ga&&Ga.length&&(ar.parentPlayer=Zu(Ga)),g.push(ar)}}else wu(or,Mi.fromStyles),ar.onDestroy(()=>oa(or,Mi.toStyles)),wy.push(ar),Ee.has(or)&&g.push(ar)}),wy.forEach(Bn=>{const or=E.get(Bn.element);if(or&&or.length){const ar=Zu(or);Bn.setRealPlayer(ar)}}),g.forEach(Bn=>{Bn.parentPlayer?Bn.syncPlayerEvents(Bn.parentPlayer):Bn.destroy()});for(let Bn=0;Bn<Tn.length;Bn++){const or=Tn[Bn],ar=or[tu];if(sd(or,_u),ar&&ar.hasAnimation)continue;let Mi=[];if(O.size){let xc=O.get(or);xc&&xc.length&&Mi.push(...xc);let Ga=this.driver.query(or,wp,!0);for(let ad=0;ad<Ga.length;ad++){let Gs=O.get(Ga[ad]);Gs&&Gs.length&&Mi.push(...Gs)}}const Ta=Mi.filter(xc=>!xc.destroyed);Ta.length?Tf(this,or,Ta):this.processLeaveNode(or)}return Tn.length=0,jd.forEach(Bn=>{this.players.push(Bn),Bn.onDone(()=>{Bn.destroy();const or=this.players.indexOf(Bn);this.players.splice(or,1)}),Bn.play()}),jd}elementContainsData(i,o){let d=!1;const g=o[tu];return g&&g.setForRemoval&&(d=!0),this.playersByElement.has(o)&&(d=!0),this.playersByQueriedElement.has(o)&&(d=!0),this.statesByElement.has(o)&&(d=!0),this._fetchNamespace(i).elementContainsData(o)||d}afterFlush(i){this._flushFns.push(i)}afterFlushAnimationsDone(i){this._whenQuietFns.push(i)}_getPreviousPlayers(i,o,d,g,E){let S=[];if(o){const O=this.playersByQueriedElement.get(i);O&&(S=O)}else{const O=this.playersByElement.get(i);if(O){const G=!E||E==Vd;O.forEach(Q=>{Q.queued||!G&&Q.triggerName!=g||S.push(Q)})}}return(d||g)&&(S=S.filter(O=>!(d&&d!=O.namespaceId||g&&g!=O.triggerName))),S}_beforeAnimationBuild(i,o,d){const E=o.element,S=o.isRemovalTransition?void 0:i,O=o.isRemovalTransition?void 0:o.triggerName;for(const G of o.timelines){const Q=G.element,Ee=Q!==E,Te=Ba(d,Q,[]);this._getPreviousPlayers(Q,Ee,S,O,o.toState).forEach(_t=>{const Ze=_t.getRealPlayer();Ze.beforeDestroy&&Ze.beforeDestroy(),_t.destroy(),Te.push(_t)})}wu(E,o.fromStyles)}_buildAnimation(i,o,d,g,E,S){const O=o.triggerName,G=o.element,Q=[],Ee=new Set,Te=new Set,qe=o.timelines.map(Ze=>{const Zt=Ze.element;Ee.add(Zt);const Tn=Zt[tu];if(Tn&&Tn.removedBeforeQueried)return new Ki.ZN(Ze.duration,Ze.delay);const Cr=Zt!==G,Vr=function vy(u){const i=[];return Ud(u,i),i}((d.get(Zt)||nc).map(Wo=>Wo.getRealPlayer())).filter(Wo=>!!Wo.element&&Wo.element===Zt),Zr=E.get(Zt),Wr=S.get(Zt),Ha=Sh(0,this._normalizer,0,Ze.keyframes,Zr,Wr),ei=this._buildPlayer(Ze,Ha,Vr);if(Ze.subTimeline&&g&&Te.add(Zt),Cr){const Wo=new Pp(i,O,Zt);Wo.setRealPlayer(ei),Q.push(Wo)}return ei});Q.forEach(Ze=>{Ba(this.playersByQueriedElement,Ze.element,[]).push(Ze),Ze.onDone(()=>function Op(u,i,o){let d=u.get(i);if(d){if(d.length){const g=d.indexOf(o);d.splice(g,1)}0==d.length&&u.delete(i)}return d}(this.playersByQueriedElement,Ze.element,Ze))}),Ee.forEach(Ze=>nu(Ze,m_));const _t=Zu(qe);return _t.onDestroy(()=>{Ee.forEach(Ze=>sd(Ze,m_)),oa(G,o.toStyles)}),Te.forEach(Ze=>{Ba(g,Ze,[]).push(_t)}),_t}_buildPlayer(i,o,d){return o.length>0?this.driver.animate(i.element,o,i.duration,i.delay,i.easing,d):new Ki.ZN(i.duration,i.delay)}}class Pp{constructor(i,o,d){this.namespaceId=i,this.triggerName=o,this.element=d,this._player=new Ki.ZN,this._containsRealPlayer=!1,this._queuedCallbacks=new Map,this.destroyed=!1,this.markedForDestroy=!1,this.disabled=!1,this.queued=!0,this.totalTime=0}setRealPlayer(i){this._containsRealPlayer||(this._player=i,this._queuedCallbacks.forEach((o,d)=>{o.forEach(g=>Ah(i,d,void 0,g))}),this._queuedCallbacks.clear(),this._containsRealPlayer=!0,this.overrideTotalTime(i.totalTime),this.queued=!1)}getRealPlayer(){return this._player}overrideTotalTime(i){this.totalTime=i}syncPlayerEvents(i){const o=this._player;o.triggerCallback&&i.onStart(()=>o.triggerCallback("start")),i.onDone(()=>this.finish()),i.onDestroy(()=>this.destroy())}_queueEvent(i,o){Ba(this._queuedCallbacks,i,[]).push(o)}onDone(i){this.queued&&this._queueEvent("done",i),this._player.onDone(i)}onStart(i){this.queued&&this._queueEvent("start",i),this._player.onStart(i)}onDestroy(i){this.queued&&this._queueEvent("destroy",i),this._player.onDestroy(i)}init(){this._player.init()}hasStarted(){return!this.queued&&this._player.hasStarted()}play(){!this.queued&&this._player.play()}pause(){!this.queued&&this._player.pause()}restart(){!this.queued&&this._player.restart()}finish(){this._player.finish()}destroy(){this.destroyed=!0,this._player.destroy()}reset(){!this.queued&&this._player.reset()}setPosition(i){this.queued||this._player.setPosition(i)}getPosition(){return this.queued?0:this._player.getPosition()}triggerCallback(i){const o=this._player;o.triggerCallback&&o.triggerCallback(i)}}function Vh(u){return u&&1===u.nodeType}function zg(u,i){const o=u.style.display;return u.style.display=i??"none",o}function id(u,i,o,d,g){const E=[];o.forEach(G=>E.push(zg(G)));const S=[];d.forEach((G,Q)=>{const Ee=new Map;G.forEach(Te=>{const qe=i.computeStyle(Q,Te,g);Ee.set(Te,qe),(!qe||0==qe.length)&&(Q[tu]=Sl,S.push(Q))}),u.set(Q,Ee)});let O=0;return o.forEach(G=>zg(G,E[O++])),S}function bf(u,i){const o=new Map;if(u.forEach(O=>o.set(O,[])),0==i.length)return o;const g=new Set(i),E=new Map;function S(O){if(!O)return 1;let G=E.get(O);if(G)return G;const Q=O.parentNode;return G=o.has(Q)?Q:g.has(Q)?1:S(Q),E.set(O,G),G}return i.forEach(O=>{const G=S(O);1!==G&&o.get(G).push(O)}),o}function nu(u,i){u.classList?.add(i)}function sd(u,i){u.classList?.remove(i)}function Tf(u,i,o){Zu(o).onDone(()=>u.processLeaveNode(i))}function Ud(u,i){for(let o=0;o<u.length;o++){const d=u[o];d instanceof Ki.ZE?Ud(d.players,i):i.push(d)}}function Wg(u,i,o){const d=o.get(u);if(!d)return!1;let g=i.get(u);return g?d.forEach(E=>g.add(E)):i.set(u,d),o.delete(u),!0}class od{constructor(i,o,d){this.bodyNode=i,this._driver=o,this._normalizer=d,this._triggerCache={},this.onRemovalComplete=(g,E)=>{},this._transitionEngine=new yy(i,o,d),this._timelineEngine=new ec(i,o,d),this._transitionEngine.onRemovalComplete=(g,E)=>this.onRemovalComplete(g,E)}registerTrigger(i,o,d,g,E){const S=i+"-"+g;let O=this._triggerCache[S];if(!O){const G=[],Ee=Rp(this._driver,E,G,[]);if(G.length)throw function cv(u,i){return new Y.vHH(3404,!1)}();O=function Df(u,i,o){return new _v(u,i,o)}(g,Ee,this._normalizer),this._triggerCache[S]=O}this._transitionEngine.registerTrigger(o,g,O)}register(i,o){this._transitionEngine.register(i,o)}destroy(i,o){this._transitionEngine.destroy(i,o)}onInsert(i,o,d,g){this._transitionEngine.insertNode(i,o,d,g)}onRemove(i,o,d,g){this._transitionEngine.removeNode(i,o,g||!1,d)}disableAnimations(i,o){this._transitionEngine.markElementAsDisabled(i,o)}process(i,o,d,g){if("@"==d.charAt(0)){const[E,S]=Sg(d);this._timelineEngine.command(E,o,S,g)}else this._transitionEngine.trigger(i,o,d,g)}listen(i,o,d,g,E){if("@"==d.charAt(0)){const[S,O]=Sg(d);return this._timelineEngine.listen(S,o,O,E)}return this._transitionEngine.listen(i,o,d,g,E)}flush(i=-1){this._transitionEngine.flush(i)}get players(){return this._transitionEngine.players.concat(this._timelineEngine.players)}whenRenderingDone(){return this._transitionEngine.whenRenderingDone()}}let kp=(()=>{class u{constructor(o,d,g){this._element=o,this._startStyles=d,this._endStyles=g,this._state=0;let E=u.initialStylesByElement.get(o);E||u.initialStylesByElement.set(o,E=new Map),this._initialStyles=E}start(){this._state<1&&(this._startStyles&&oa(this._element,this._startStyles,this._initialStyles),this._state=1)}finish(){this.start(),this._state<2&&(oa(this._element,this._initialStyles),this._endStyles&&(oa(this._element,this._endStyles),this._endStyles=null),this._state=1)}destroy(){this.finish(),this._state<3&&(u.initialStylesByElement.delete(this._element),this._startStyles&&(wu(this._element,this._startStyles),this._endStyles=null),this._endStyles&&(wu(this._element,this._endStyles),this._endStyles=null),oa(this._element,this._initialStyles),this._state=3)}}return u.initialStylesByElement=new WeakMap,u})();function Fp(u){let i=null;return u.forEach((o,d)=>{(function Kg(u){return"display"===u||"position"===u})(d)&&(i=i||new Map,i.set(d,o))}),i}class Uh{constructor(i,o,d,g){this.element=i,this.keyframes=o,this.options=d,this._specialStyles=g,this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._initialized=!1,this._finished=!1,this._started=!1,this._destroyed=!1,this._originalOnDoneFns=[],this._originalOnStartFns=[],this.time=0,this.parentPlayer=null,this.currentSnapshot=new Map,this._duration=d.duration,this._delay=d.delay||0,this.time=this._duration+this._delay}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(i=>i()),this._onDoneFns=[])}init(){this._buildPlayer(),this._preparePlayerBeforeStart()}_buildPlayer(){if(this._initialized)return;this._initialized=!0;const i=this.keyframes;this.domPlayer=this._triggerWebAnimation(this.element,i,this.options),this._finalKeyframe=i.length?i[i.length-1]:new Map,this.domPlayer.addEventListener("finish",()=>this._onFinish())}_preparePlayerBeforeStart(){this._delay?this._resetDomPlayerState():this.domPlayer.pause()}_convertKeyframesToObject(i){const o=[];return i.forEach(d=>{o.push(Object.fromEntries(d))}),o}_triggerWebAnimation(i,o,d){return i.animate(this._convertKeyframesToObject(o),d)}onStart(i){this._originalOnStartFns.push(i),this._onStartFns.push(i)}onDone(i){this._originalOnDoneFns.push(i),this._onDoneFns.push(i)}onDestroy(i){this._onDestroyFns.push(i)}play(){this._buildPlayer(),this.hasStarted()||(this._onStartFns.forEach(i=>i()),this._onStartFns=[],this._started=!0,this._specialStyles&&this._specialStyles.start()),this.domPlayer.play()}pause(){this.init(),this.domPlayer.pause()}finish(){this.init(),this._specialStyles&&this._specialStyles.finish(),this._onFinish(),this.domPlayer.finish()}reset(){this._resetDomPlayerState(),this._destroyed=!1,this._finished=!1,this._started=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}_resetDomPlayerState(){this.domPlayer&&this.domPlayer.cancel()}restart(){this.reset(),this.play()}hasStarted(){return this._started}destroy(){this._destroyed||(this._destroyed=!0,this._resetDomPlayerState(),this._onFinish(),this._specialStyles&&this._specialStyles.destroy(),this._onDestroyFns.forEach(i=>i()),this._onDestroyFns=[])}setPosition(i){void 0===this.domPlayer&&this.init(),this.domPlayer.currentTime=i*this.time}getPosition(){return this.domPlayer.currentTime/this.time}get totalTime(){return this._delay+this._duration}beforeDestroy(){const i=new Map;this.hasStarted()&&this._finalKeyframe.forEach((d,g)=>{"offset"!==g&&i.set(g,this._finished?d:Fg(this.element,g))}),this.currentSnapshot=i}triggerCallback(i){const o="start"===i?this._onStartFns:this._onDoneFns;o.forEach(d=>d()),o.length=0}}class Bd{validateStyleProperty(i){return!0}validateAnimatableStyleProperty(i){return!0}matchesElement(i,o){return!1}containsElement(i,o){return p_(i,o)}getParentElement(i){return Ag(i)}query(i,o,d){return Ef(i,o,d)}computeStyle(i,o,d){return window.getComputedStyle(i)[o]}animate(i,o,d,g,E,S=[]){const G={duration:d,delay:g,fill:0==g?"both":"forwards"};E&&(G.easing=E);const Q=new Map,Ee=S.filter(_t=>_t instanceof Uh);(function kg(u,i){return 0===u||0===i})(d,g)&&Ee.forEach(_t=>{_t.currentSnapshot.forEach((Ze,Zt)=>Q.set(Zt,Ze))});let Te=function Ng(u){return u.length?u[0]instanceof Map?u:u.map(i=>vu(i)):[]}(o).map(_t=>Ju(_t));Te=function Dp(u,i,o){if(o.size&&i.length){let d=i[0],g=[];if(o.forEach((E,S)=>{d.has(S)||g.push(S),d.set(S,E)}),g.length)for(let E=1;E<i.length;E++){let S=i[E];g.forEach(O=>S.set(O,Fg(u,O)))}}return i}(i,Te,Q);const qe=function A_(u,i){let o=null,d=null;return Array.isArray(i)&&i.length?(o=Fp(i[0]),i.length>1&&(d=Fp(i[i.length-1]))):i instanceof Map&&(o=Fp(i)),o||d?new kp(u,o,d):null}(i,Te);return new Uh(i,Te,G,qe)}}var Af=z(6895);let Iv=(()=>{class u extends Ki._j{constructor(o,d){super(),this._nextAnimationId=0,this._renderer=o.createRenderer(d.body,{id:"0",encapsulation:Y.ifc.None,styles:[],data:{animation:[]}})}build(o){const d=this._nextAnimationId.toString();this._nextAnimationId++;const g=Array.isArray(o)?(0,Ki.vP)(o):o;return Cv(this._renderer,null,d,"register",[g]),new Rf(d,this._renderer)}}return u.\u0275fac=function(o){return new(o||u)(Y.LFG(Y.FYo),Y.LFG(Af.K0))},u.\u0275prov=Y.Yz7({token:u,factory:u.\u0275fac}),u})();class Rf extends Ki.LC{constructor(i,o){super(),this._id=i,this._renderer=o}create(i,o){return new qv(this._id,i,o||{},this._renderer)}}class qv{constructor(i,o,d,g){this.id=i,this.element=o,this._renderer=g,this.parentPlayer=null,this._started=!1,this.totalTime=0,this._command("create",d)}_listen(i,o){return this._renderer.listen(this.element,`@@${this.id}:${i}`,o)}_command(i,...o){return Cv(this._renderer,this.element,this.id,i,o)}onDone(i){this._listen("done",i)}onStart(i){this._listen("start",i)}onDestroy(i){this._listen("destroy",i)}init(){this._command("init")}hasStarted(){return this._started}play(){this._command("play"),this._started=!0}pause(){this._command("pause")}restart(){this._command("restart")}finish(){this._command("finish")}destroy(){this._command("destroy")}reset(){this._command("reset"),this._started=!1}setPosition(i){this._command("setPosition",i)}getPosition(){return this._renderer.engine.players[+this.id]?.getPosition()??0}}function Cv(u,i,o,d,g){return u.setProperty(i,`@@${o}:${d}`,g)}const R_="@.disabled";let qg=(()=>{class u{constructor(o,d,g){this.delegate=o,this.engine=d,this._zone=g,this._currentId=0,this._microtaskId=1,this._animationCallbacksBuffer=[],this._rendererCache=new Map,this._cdRecurDepth=0,this.promise=Promise.resolve(0),d.onRemovalComplete=(E,S)=>{const O=S?.parentNode(E);O&&S.removeChild(O,E)}}createRenderer(o,d){const E=this.delegate.createRenderer(o,d);if(!(o&&d&&d.data&&d.data.animation)){let Ee=this._rendererCache.get(E);return Ee||(Ee=new M_("",E,this.engine,()=>this._rendererCache.delete(E)),this._rendererCache.set(E,Ee)),Ee}const S=d.id,O=d.id+"-"+this._currentId;this._currentId++,this.engine.register(O,o);const G=Ee=>{Array.isArray(Ee)?Ee.forEach(G):this.engine.registerTrigger(S,O,o,Ee.name,Ee)};return d.data.animation.forEach(G),new Dv(this,O,E,this.engine)}begin(){this._cdRecurDepth++,this.delegate.begin&&this.delegate.begin()}_scheduleCountTask(){this.promise.then(()=>{this._microtaskId++})}scheduleListenerCallback(o,d,g){o>=0&&o<this._microtaskId?this._zone.run(()=>d(g)):(0==this._animationCallbacksBuffer.length&&Promise.resolve(null).then(()=>{this._zone.run(()=>{this._animationCallbacksBuffer.forEach(E=>{const[S,O]=E;S(O)}),this._animationCallbacksBuffer=[]})}),this._animationCallbacksBuffer.push([d,g]))}end(){this._cdRecurDepth--,0==this._cdRecurDepth&&this._zone.runOutsideAngular(()=>{this._scheduleCountTask(),this.engine.flush(this._microtaskId)}),this.delegate.end&&this.delegate.end()}whenRenderingDone(){return this.engine.whenRenderingDone()}}return u.\u0275fac=function(o){return new(o||u)(Y.LFG(Y.FYo),Y.LFG(od),Y.LFG(Y.R0b))},u.\u0275prov=Y.Yz7({token:u,factory:u.\u0275fac}),u})();class M_{constructor(i,o,d,g){this.namespaceId=i,this.delegate=o,this.engine=d,this._onDestroy=g,this.destroyNode=this.delegate.destroyNode?E=>o.destroyNode(E):null}get data(){return this.delegate.data}destroy(){this.engine.destroy(this.namespaceId,this.delegate),this.delegate.destroy(),this._onDestroy?.()}createElement(i,o){return this.delegate.createElement(i,o)}createComment(i){return this.delegate.createComment(i)}createText(i){return this.delegate.createText(i)}appendChild(i,o){this.delegate.appendChild(i,o),this.engine.onInsert(this.namespaceId,o,i,!1)}insertBefore(i,o,d,g=!0){this.delegate.insertBefore(i,o,d),this.engine.onInsert(this.namespaceId,o,i,g)}removeChild(i,o,d){this.engine.onRemove(this.namespaceId,o,this.delegate,d)}selectRootElement(i,o){return this.delegate.selectRootElement(i,o)}parentNode(i){return this.delegate.parentNode(i)}nextSibling(i){return this.delegate.nextSibling(i)}setAttribute(i,o,d,g){this.delegate.setAttribute(i,o,d,g)}removeAttribute(i,o,d){this.delegate.removeAttribute(i,o,d)}addClass(i,o){this.delegate.addClass(i,o)}removeClass(i,o){this.delegate.removeClass(i,o)}setStyle(i,o,d,g){this.delegate.setStyle(i,o,d,g)}removeStyle(i,o,d){this.delegate.removeStyle(i,o,d)}setProperty(i,o,d){"@"==o.charAt(0)&&o==R_?this.disableAnimations(i,!!d):this.delegate.setProperty(i,o,d)}setValue(i,o){this.delegate.setValue(i,o)}listen(i,o,d){return this.delegate.listen(i,o,d)}disableAnimations(i,o){this.engine.disableAnimations(i,o)}}class Dv extends M_{constructor(i,o,d,g,E){super(o,d,g,E),this.factory=i,this.namespaceId=o}setProperty(i,o,d){"@"==o.charAt(0)?"."==o.charAt(1)&&o==R_?this.disableAnimations(i,d=void 0===d||!!d):this.engine.process(this.namespaceId,i,o.slice(1),d):this.delegate.setProperty(i,o,d)}listen(i,o,d){if("@"==o.charAt(0)){const g=function Zg(u){switch(u){case"body":return document.body;case"document":return document;case"window":return window;default:return u}}(i);let E=o.slice(1),S="";return"@"!=E.charAt(0)&&([E,S]=function bv(u){const i=u.indexOf(".");return[u.substring(0,i),u.slice(i+1)]}(E)),this.engine.listen(this.namespaceId,g,E,S,O=>{this.factory.scheduleListenerCallback(O._data||-1,d,O)})}return this.delegate.listen(i,o,d)}}const x_=[{provide:Ki._j,useClass:Iv},{provide:E_,useFactory:function Yg(){return new zo}},{provide:od,useClass:(()=>{class u extends od{constructor(o,d,g,E){super(o.body,d,g)}ngOnDestroy(){this.flush()}}return u.\u0275fac=function(o){return new(o||u)(Y.LFG(Af.K0),Y.LFG(sy),Y.LFG(E_),Y.LFG(Y.z2F))},u.\u0275prov=Y.Yz7({token:u,factory:u.\u0275fac}),u})()},{provide:Y.FYo,useFactory:function Sv(u,i,o){return new qg(u,i,o)},deps:[w.se,od,Y.R0b]}],Qg=[{provide:sy,useFactory:()=>new Bd},{provide:Y.QbO,useValue:"BrowserAnimations"},...x_],Jg=[{provide:sy,useClass:Mg},{provide:Y.QbO,useValue:"NoopAnimations"},...x_];let Ey=(()=>{class u{static withConfig(o){return{ngModule:u,providers:o.disableAnimations?Jg:Qg}}}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=Y.oAB({type:u}),u.\u0275inj=Y.cJS({providers:Qg,imports:[w.b2]}),u})(),Xg=(()=>{class u{}return u.\u0275fac=function(o){return new(o||u)},u.\u0275mod=Y.oAB({type:u,bootstrap:[Ve]}),u.\u0275inj=Y.cJS({imports:[w.b2.withServerTransition({appId:"Zaid"}),Ne,Ey,Ge.JF,Ye.u5,Ye.UX,pe.hO.initializeApp(ye.N.firebaseConfig),sf,ll]}),u})();function xf(){w.q6().bootstrapModule(Xg).catch(u=>console.error(u))}ye.N.production&&(0,Y.G48)(),"complete"===document.readyState?xf():document.addEventListener("DOMContentLoaded",xf)},6217:(rn,ot,z)=>{z.d(ot,{nm:()=>Fs});var w=z(4976);z(4650),z(259);var it=z(5861),De=z(6881),Fe=z(4859),At=z(2090),Et=z(1877);const We=new Map,Oe={activated:!1,tokenObservers:[]},Mt={initialized:!1,enabled:!1};function Dt(Le){return We.get(Le)||Object.assign({},Oe)}function Ht(){return Mt}class Ke{constructor(xe,Je,wt,Ft,On){if(this.operation=xe,this.retryPolicy=Je,this.getWaitDuration=wt,this.lowerBound=Ft,this.upperBound=On,this.pending=null,this.nextErrorWaitInterval=Ft,Ft>On)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(xe){var Je=this;return(0,it.Z)(function*(){Je.stop();try{Je.pending=new At.BH,yield function tt(Le){return new Promise(xe=>{setTimeout(xe,Le)})}(Je.getNextRun(xe)),Je.pending.resolve(),yield Je.pending.promise,Je.pending=new At.BH,yield Je.operation(),Je.pending.resolve(),yield Je.pending.promise,Je.process(!0).catch(()=>{})}catch(wt){Je.retryPolicy(wt)?Je.process(!1).catch(()=>{}):Je.stop()}})()}getNextRun(xe){if(xe)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const Je=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),Je}}}const et=new At.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function dn(Le){if(!Dt(Le).activated)throw et.create("use-before-activation",{appName:Le.name})}function Mn(Le,xe){return fr.apply(this,arguments)}function fr(){return(fr=(0,it.Z)(function*({url:Le,body:xe},Je){const wt={"Content-Type":"application/json"},Ft=Je.getImmediate({optional:!0});if(Ft){const Cn=yield Ft.getHeartbeatsHeader();Cn&&(wt["X-Firebase-Client"]=Cn)}const On={method:"POST",body:JSON.stringify(xe),headers:wt};let Ir,Tr;try{Ir=yield fetch(Le,On)}catch(Cn){throw et.create("fetch-network-error",{originalErrorMessage:Cn?.message})}if(200!==Ir.status)throw et.create("fetch-status-error",{httpStatus:Ir.status});try{Tr=yield Ir.json()}catch(Cn){throw et.create("fetch-parse-error",{originalErrorMessage:Cn?.message})}const Sr=Tr.ttl.match(/^([\d.]+)(s)$/);if(!Sr||!Sr[2]||isNaN(Number(Sr[1])))throw et.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${Tr.ttl}`});const nr=1e3*Number(Sr[1]),dr=Date.now();return{token:Tr.token,expireTimeMillis:dr+nr,issuedAtTimeMillis:dr}})).apply(this,arguments)}function Jt(Le,xe){const{projectId:Je,appId:wt,apiKey:Ft}=Le.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1/projects/${Je}/apps/${wt}:exchangeDebugToken?key=${Ft}`,body:{debug_token:xe}}}const Fn="firebase-app-check-store";let wr=null;function An(){return wr||(wr=new Promise((Le,xe)=>{try{const Je=indexedDB.open("firebase-app-check-database",1);Je.onsuccess=wt=>{Le(wt.target.result)},Je.onerror=wt=>{var Ft;xe(et.create("storage-open",{originalErrorMessage:null===(Ft=wt.target.error)||void 0===Ft?void 0:Ft.message}))},Je.onupgradeneeded=wt=>{0===wt.oldVersion&&wt.target.result.createObjectStore(Fn,{keyPath:"compositeKey"})}}catch(Je){xe(et.create("storage-open",{originalErrorMessage:Je?.message}))}}),wr)}function ge(){return(ge=(0,it.Z)(function*(Le,xe){const wt=(yield An()).transaction(Fn,"readwrite"),On=wt.objectStore(Fn).put({compositeKey:Le,value:xe});return new Promise((Ir,Tr)=>{On.onsuccess=Sr=>{Ir()},wt.onerror=Sr=>{var nr;Tr(et.create("storage-set",{originalErrorMessage:null===(nr=Sr.target.error)||void 0===nr?void 0:nr.message}))}})})).apply(this,arguments)}const cn=new Et.Yd("@firebase/app-check");function jt(Le,xe){return(0,At.hl)()?function us(Le,xe){return function Qe(Le,xe){return ge.apply(this,arguments)}(function mt(Le){return`${Le.options.appId}-${Le.name}`}(Le),xe)}(Le,xe).catch(Je=>{cn.warn(`Failed to write token to IndexedDB. Error: ${Je}`)}):Promise.resolve()}function Oi(){return Ht().enabled}function Vn(){return Un.apply(this,arguments)}function Un(){return(Un=(0,it.Z)(function*(){const Le=Ht();if(Le.enabled&&Le.token)return Le.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const $r={error:"UNKNOWN_ERROR"};function br(Le){return At.US.encodeString(JSON.stringify(Le),!1)}function qn(Le){return li.apply(this,arguments)}function li(){return(li=(0,it.Z)(function*(Le,xe=!1){const Je=Le.app;dn(Je);const wt=Dt(Je);let On,Ft=wt.token;if(Ft&&!$e(Ft)&&(wt.token=void 0,Ft=void 0),!Ft){const Sr=yield wt.cachedTokenPromise;Sr&&($e(Sr)?Ft=Sr:yield jt(Je,void 0))}if(!xe&&Ft&&$e(Ft))return{token:Ft.token};let Tr,Ir=!1;if(Oi()){wt.exchangeTokenPromise||(wt.exchangeTokenPromise=Mn(Jt(Je,yield Vn()),Le.heartbeatServiceProvider).finally(()=>{wt.exchangeTokenPromise=void 0}),Ir=!0);const Sr=yield wt.exchangeTokenPromise;return yield jt(Je,Sr),wt.token=Sr,{token:Sr.token}}try{wt.exchangeTokenPromise||(wt.exchangeTokenPromise=wt.provider.getToken().finally(()=>{wt.exchangeTokenPromise=void 0}),Ir=!0),Ft=yield Dt(Je).exchangeTokenPromise}catch(Sr){"appCheck/throttled"===Sr.code?cn.warn(Sr.message):cn.error(Sr),On=Sr}return Ft?On?Tr=$e(Ft)?{token:Ft.token,internalError:On}:Gt(On):(Tr={token:Ft.token},wt.token=Ft,yield jt(Je,Ft)):Tr=Gt(On),Ir&&rt(Je,Tr),Tr})).apply(this,arguments)}function Jr(){return(Jr=(0,it.Z)(function*(Le){const xe=Le.app;dn(xe);const{provider:Je}=Dt(xe);if(Oi()){const wt=yield Vn(),{token:Ft}=yield Mn(Jt(xe,wt),Le.heartbeatServiceProvider);return{token:Ft}}{const{token:wt}=yield Je.getToken();return{token:wt}}})).apply(this,arguments)}function _e(Le,xe){const Je=Dt(Le),wt=Je.tokenObservers.filter(Ft=>Ft.next!==xe);0===wt.length&&Je.tokenRefresher&&Je.tokenRefresher.isRunning()&&Je.tokenRefresher.stop(),Je.tokenObservers=wt}function fe(Le){const{app:xe}=Le,Je=Dt(xe);let wt=Je.tokenRefresher;wt||(wt=function ke(Le){const{app:xe}=Le;return new Ke((0,it.Z)(function*(){let wt;if(wt=Dt(xe).token?yield qn(Le,!0):yield qn(Le),wt.error)throw wt.error;if(wt.internalError)throw wt.internalError}),()=>!0,()=>{const Je=Dt(xe);if(Je.token){let wt=Je.token.issuedAtTimeMillis+.5*(Je.token.expireTimeMillis-Je.token.issuedAtTimeMillis)+3e5;return wt=Math.min(wt,Je.token.expireTimeMillis-3e5),Math.max(0,wt-Date.now())}return 0},3e4,96e4)}(Le),Je.tokenRefresher=wt),!wt.isRunning()&&Je.isTokenAutoRefreshEnabled&&wt.start()}function rt(Le,xe){const Je=Dt(Le).tokenObservers;for(const wt of Je)try{"EXTERNAL"===wt.type&&null!=xe.error?wt.error(xe.error):wt.next(xe)}catch{}}function $e(Le){return Le.expireTimeMillis-Date.now()>0}function Gt(Le){return{token:br($r),error:Le}}class vn{constructor(xe,Je){this.app=xe,this.heartbeatServiceProvider=Je}_delete(){const{tokenObservers:xe}=Dt(this.app);for(const Je of xe)_e(this.app,Je.next);return Promise.resolve()}}const Gr="app-check-internal";!function to(){(0,De._registerComponent)(new Fe.wA("app-check",Le=>function Ln(Le,xe){return new vn(Le,xe)}(Le.getProvider("app").getImmediate(),Le.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Le,xe,Je)=>{Le.getProvider(Gr).initialize()})),(0,De._registerComponent)(new Fe.wA(Gr,Le=>function mr(Le){return{getToken:xe=>qn(Le,xe),getLimitedUseToken:()=>function jr(Le){return Jr.apply(this,arguments)}(Le),addTokenListener:xe=>function ti(Le,xe,Je,wt){const{app:Ft}=Le,On=Dt(Ft);if(On.tokenObservers=[...On.tokenObservers,{next:Je,error:wt,type:xe}],On.token&&$e(On.token)){const Tr=On.token;Promise.resolve().then(()=>{Je({token:Tr.token}),fe(Le)}).catch(()=>{})}On.cachedTokenPromise.then(()=>fe(Le))}(Le,"INTERNAL",xe),removeTokenListener:xe=>_e(Le.app,xe)}}(Le.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,De.registerVersion)("@firebase/app-check","0.8.0")}();class Fs{constructor(){return(0,w.vb)("app-check")}}typeof window<"u"&&window},1205:(rn,ot,z)=>{z.d(ot,{zQ:()=>Dr,rT:()=>Mt,f7:()=>Kt,L6:()=>We,_Q:()=>Oe,lh:()=>Dt,Qv:()=>Et,nw:()=>Ht});var w=z(4650),Y=z(7579),X=z(9646),Re=z(9751),Ce=z(8996),Ne=z(6451),Ve=z(5363),Ge=z(3900),Ye=z(4004),ye=z(6063);class pe extends Y.x{constructor(se=1/0,Ae=1/0,Me=ye.l){super(),this._bufferSize=se,this._windowTime=Ae,this._timestampProvider=Me,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=Ae===1/0,this._bufferSize=Math.max(1,se),this._windowTime=Math.max(1,Ae)}next(se){const{isStopped:Ae,_buffer:Me,_infiniteTimeWindow:Ke,_timestampProvider:tt,_windowTime:gt}=this;Ae||(Me.push(se),!Ke&&Me.push(tt.now()+gt)),this._trimBuffer(),super.next(se)}_subscribe(se){this._throwIfClosed(),this._trimBuffer();const Ae=this._innerSubscribe(se),{_infiniteTimeWindow:Me,_buffer:Ke}=this,tt=Ke.slice();for(let gt=0;gt<tt.length&&!se.closed;gt+=Me?1:2)se.next(tt[gt]);return this._checkFinalizedStatuses(se),Ae}_trimBuffer(){const{_bufferSize:se,_timestampProvider:Ae,_buffer:Me,_infiniteTimeWindow:Ke}=this,tt=(Ke?1:2)*se;if(se<1/0&&tt<Me.length&&Me.splice(0,Me.length-tt),!Ke){const gt=Ae.now();let et=0;for(let zt=1;zt<Me.length&&Me[zt]<=gt;zt+=2)et=zt;et&&Me.splice(0,et+1)}}}var Se=z(3099);function Rt(kn,se,Ae){let Me,Ke=!1;return kn&&"object"==typeof kn?({bufferSize:Me=1/0,windowTime:se=1/0,refCount:Ke=!1,scheduler:Ae}=kn):Me=kn??1/0,(0,Se.B)({connector:()=>new pe(Me,se,Ae),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:Ke})}var vt=z(590),ct=z(576);function $t(kn,se){return(0,ct.m)(se)?(0,Ge.w)(()=>kn,se):(0,Ge.w)(()=>kn)}var pt=z(9468),dt=z(9300),Ue=z(4976),an=z(2011),it=z(6895),De=z(6217);z(9260);const Et=new w.OlP("angularfire2.auth.use-emulator"),We=new w.OlP("angularfire2.auth.settings"),Oe=new w.OlP("angularfire2.auth.tenant-id"),Mt=new w.OlP("angularfire2.auth.langugage-code"),Dt=new w.OlP("angularfire2.auth.use-device-language"),Kt=new w.OlP("angularfire.auth.persistence"),Ht=(kn,se,Ae,Me,Ke,tt,gt,et)=>(0,an.cc)(`${kn.name}.auth`,"AngularFireAuth",kn.name,()=>{const zt=se.runOutsideAngular(()=>kn.auth());if(Ae&&zt.useEmulator(...Ae),Me&&(zt.tenantId=Me),zt.languageCode=Ke,tt&&zt.useDeviceLanguage(),gt)for(const[dn,En]of Object.entries(gt))zt.settings[dn]=En;return et&&zt.setPersistence(et),zt},[Ae,Me,Ke,tt,gt,et]);let Dr=(()=>{class kn{constructor(Ae,Me,Ke,tt,gt,et,zt,dn,En,un,Mn,fr){const Hn=new Y.x,Xn=(0,X.of)(void 0).pipe((0,Ve.Q)(gt.outsideAngular),(0,Ge.w)(()=>tt.runOutsideAngular(()=>Promise.resolve().then(z.bind(z,2644)))),(0,Ye.U)(()=>(0,an.on)(Ae,tt,Me)),(0,Ye.U)(Jt=>Ht(Jt,tt,et,dn,En,un,zt,Mn)),Rt({bufferSize:1,refCount:!1}));if((0,it.PM)(Ke))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,X.of)(null);else{Xn.pipe((0,vt.P)()).subscribe();const cr=Xn.pipe((0,Ge.w)(Ut=>Ut.getRedirectResult().then(wr=>wr,()=>null)),Ue.iC,Rt({bufferSize:1,refCount:!1})),kr=Xn.pipe((0,Ge.w)(Ut=>new Re.y(wr=>({unsubscribe:tt.runOutsideAngular(()=>Ut.onAuthStateChanged(An=>wr.next(An),An=>wr.error(An),()=>wr.complete()))})))),Fn=Xn.pipe((0,Ge.w)(Ut=>new Re.y(wr=>({unsubscribe:tt.runOutsideAngular(()=>Ut.onIdTokenChanged(An=>wr.next(An),An=>wr.error(An),()=>wr.complete()))}))));this.authState=cr.pipe($t(kr),(0,pt.R)(gt.outsideAngular),(0,Ve.Q)(gt.insideAngular)),this.user=cr.pipe($t(Fn),(0,pt.R)(gt.outsideAngular),(0,Ve.Q)(gt.insideAngular)),this.idToken=this.user.pipe((0,Ge.w)(Ut=>Ut?(0,Ce.D)(Ut.getIdToken()):(0,X.of)(null))),this.idTokenResult=this.user.pipe((0,Ge.w)(Ut=>Ut?(0,Ce.D)(Ut.getIdTokenResult()):(0,X.of)(null))),this.credential=(0,Ne.T)(cr,Hn,this.authState.pipe((0,dt.h)(Ut=>!Ut))).pipe((0,Ye.U)(Ut=>Ut?.user?Ut:null),(0,pt.R)(gt.outsideAngular),(0,Ve.Q)(gt.insideAngular))}return(0,an.pX)(this,Xn,tt,{spy:{apply:(Jt,cr,kr)=>{(Jt.startsWith("signIn")||Jt.startsWith("createUser"))&&kr.then(Fn=>Hn.next(Fn))}}})}}return kn.\u0275fac=function(Ae){return new(Ae||kn)(w.LFG(an.Dh),w.LFG(an.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Ue.HU),w.LFG(Et,8),w.LFG(We,8),w.LFG(Oe,8),w.LFG(Mt,8),w.LFG(Dt,8),w.LFG(Kt,8),w.LFG(De.nm,8))},kn.\u0275prov=w.Yz7({token:kn,factory:kn.\u0275fac,providedIn:"any"}),kn})()},2011:(rn,ot,z)=>{z.d(ot,{Dh:()=>Ge,GT:()=>Ne,cc:()=>vt,hO:()=>Rt,on:()=>ye,pX:()=>Ce,xv:()=>Ye});var w=z(4650),Y=z(9260),X=z(4976);rn=z.hmd(rn);const Re=["ngOnDestroy"],Ce=(dt,Ue,an,it={})=>new Proxy(dt,{get:(De,Fe)=>an.runOutsideAngular(()=>{var At;if(dt[Fe])return!(null===(At=it?.spy)||void 0===At)&&At.get&&it.spy.get(Fe,dt[Fe]),dt[Fe];if(Re.indexOf(Fe)>-1)return()=>{};const Et=Ue.toPromise().then(We=>{const Oe=We&&We[Fe];return"function"==typeof Oe?Oe.bind(We):Oe&&Oe.then?Oe.then(Mt=>an.run(()=>Mt)):an.run(()=>Oe)});return new Proxy(()=>{},{get:(We,Oe)=>Et[Oe],apply:(We,Oe,Mt)=>Et.then(Dt=>{var Kt;const Ht=Dt&&Dt(...Mt);return!(null===(Kt=it?.spy)||void 0===Kt)&&Kt.apply&&it.spy.apply(Fe,Mt,Ht),Ht})})})}),Ne=(dt,Ue)=>{Ue.forEach(an=>{Object.getOwnPropertyNames(an.prototype||an).forEach(it=>{Object.defineProperty(dt.prototype,it,Object.getOwnPropertyDescriptor(an.prototype||an,it))})})};class Ve{constructor(Ue){return Ue}}const Ge=new w.OlP("angularfire2.app.options"),Ye=new w.OlP("angularfire2.app.name");function ye(dt,Ue,an){const De="object"==typeof an&&an||{};De.name=De.name||"string"==typeof an&&an||"[DEFAULT]";const At=Y.Z.apps.filter(Et=>Et&&Et.name===De.name)[0]||Ue.runOutsideAngular(()=>Y.Z.initializeApp(dt,De));try{JSON.stringify(dt)!==JSON.stringify(At.options)&&pe("error",`${At.name} Firebase App already initialized with different options${rn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ve(At)}const pe=(dt,...Ue)=>{(0,w.X6Q)()&&typeof console<"u"&&console[dt](...Ue)},Se={provide:Ve,useFactory:ye,deps:[Ge,w.R0b,[new w.FiY,Ye]]};let Rt=(()=>{class dt{constructor(an){Y.Z.registerVersion("angularfire",X.q4.full,"core"),Y.Z.registerVersion("angularfire",X.q4.full,"app-compat"),Y.Z.registerVersion("angular",w.q4F.full,an.toString())}static initializeApp(an,it){return{ngModule:dt,providers:[{provide:Ge,useValue:an},{provide:Ye,useValue:it}]}}}return dt.\u0275fac=function(an){return new(an||dt)(w.LFG(w.Lbi))},dt.\u0275mod=w.oAB({type:dt}),dt.\u0275inj=w.cJS({providers:[Se]}),dt})();function vt(dt,Ue,an,it,De){const[,Fe,At]=globalThis.\u0275AngularfireInstanceCache.find(Et=>Et[0]===dt)||[];if(Fe)return function ct(dt,Ue){try{return dt.toString()===Ue.toString()}catch{return dt===Ue}}(De,At)||(pt("error",`${Ue} was already initialized on the ${an} Firebase App with different settings.${$t?" You may need to reload as Firebase is not HMR aware.":""}`),pt("warn",{is:De,was:At})),Fe;{const Et=it();return globalThis.\u0275AngularfireInstanceCache.push([dt,Et,De]),Et}}const $t=!!rn.hot,pt=(dt,...Ue)=>{(0,w.X6Q)()&&typeof console<"u"&&console[dt](...Ue)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(rn,ot,z)=>{z.d(ot,{q4:()=>is,iC:()=>$s,fc:()=>Fa,HU:()=>hu,vb:()=>El,JM:()=>du});var w=z(4650),Y=z(259),X=z(5861),Re=z(6881),Ce=z(2090),Ne=z(4859),Ve=z(1877);let Ye,ye;const Rt=new WeakMap,vt=new WeakMap,ct=new WeakMap,$t=new WeakMap,pt=new WeakMap;let an={get(R,k,Z){if(R instanceof IDBTransaction){if("done"===k)return vt.get(R);if("objectStoreNames"===k)return R.objectStoreNames||ct.get(R);if("store"===k)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return At(R[k])},set:(R,k,Z)=>(R[k]=Z,!0),has:(R,k)=>R instanceof IDBTransaction&&("done"===k||"store"===k)||k in R};function Fe(R){return"function"==typeof R?function De(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Se(){return ye||(ye=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(R)?function(...k){return R.apply(Et(this),k),At(Rt.get(this))}:function(...k){return At(R.apply(Et(this),k))}:function(k,...Z){const ae=R.call(Et(this),k,...Z);return ct.set(ae,k.sort?k.sort():[k]),At(ae)}}(R):(R instanceof IDBTransaction&&function Ue(R){if(vt.has(R))return;const k=new Promise((Z,ae)=>{const be=()=>{R.removeEventListener("complete",ze),R.removeEventListener("error",yt),R.removeEventListener("abort",yt)},ze=()=>{Z(),be()},yt=()=>{ae(R.error||new DOMException("AbortError","AbortError")),be()};R.addEventListener("complete",ze),R.addEventListener("error",yt),R.addEventListener("abort",yt)});vt.set(R,k)}(R),((R,k)=>k.some(Z=>R instanceof Z))(R,function pe(){return Ye||(Ye=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(R,an):R)}function At(R){if(R instanceof IDBRequest)return function dt(R){const k=new Promise((Z,ae)=>{const be=()=>{R.removeEventListener("success",ze),R.removeEventListener("error",yt)},ze=()=>{Z(At(R.result)),be()},yt=()=>{ae(R.error),be()};R.addEventListener("success",ze),R.addEventListener("error",yt)});return k.then(Z=>{Z instanceof IDBCursor&&Rt.set(Z,R)}).catch(()=>{}),pt.set(k,R),k}(R);if($t.has(R))return $t.get(R);const k=Fe(R);return k!==R&&($t.set(R,k),pt.set(k,R)),k}const Et=R=>pt.get(R),Mt=["get","getKey","getAll","getAllKeys","count"],Dt=["put","add","delete","clear"],Kt=new Map;function Ht(R,k){if(!(R instanceof IDBDatabase)||k in R||"string"!=typeof k)return;if(Kt.get(k))return Kt.get(k);const Z=k.replace(/FromIndex$/,""),ae=k!==Z,be=Dt.includes(Z);if(!(Z in(ae?IDBIndex:IDBObjectStore).prototype)||!be&&!Mt.includes(Z))return;const ze=function(){var yt=(0,X.Z)(function*(Yt,...en){const hn=this.transaction(Yt,be?"readwrite":"readonly");let Pn=hn.store;return ae&&(Pn=Pn.index(en.shift())),(yield Promise.all([Pn[Z](...en),be&&hn.done]))[0]});return function(en){return yt.apply(this,arguments)}}();return Kt.set(k,ze),ze}!function it(R){an=R(an)}(R=>({...R,get:(k,Z,ae)=>Ht(k,Z)||R.get(k,Z,ae),has:(k,Z)=>!!Ht(k,Z)||R.has(k,Z)}));const Dr="@firebase/installations",se="w:0.6.4",Ae="FIS_v2",zt=new Ce.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function dn(R){return R instanceof Ce.ZR&&R.code.includes("request-failed")}function En({projectId:R}){return`https://firebaseinstallations.googleapis.com/v1/projects/${R}/installations`}function un(R){return{token:R.token,requestStatus:2,expiresIn:kr(R.expiresIn),creationTime:Date.now()}}function Mn(R,k){return fr.apply(this,arguments)}function fr(){return(fr=(0,X.Z)(function*(R,k){const ae=(yield k.json()).error;return zt.create("request-failed",{requestName:R,serverCode:ae.code,serverMessage:ae.message,serverStatus:ae.status})})).apply(this,arguments)}function Hn({apiKey:R}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R})}function Xn(R,{refreshToken:k}){const Z=Hn(R);return Z.append("Authorization",function Fn(R){return`${Ae} ${R}`}(k)),Z}function Jt(R){return cr.apply(this,arguments)}function cr(){return(cr=(0,X.Z)(function*(R){const k=yield R();return k.status>=500&&k.status<600?R():k})).apply(this,arguments)}function kr(R){return Number(R.replace("s","000"))}function Ut(R,k){return wr.apply(this,arguments)}function wr(){return(wr=(0,X.Z)(function*({appConfig:R,heartbeatServiceProvider:k},{fid:Z}){const ae=En(R),be=Hn(R),ze=k.getImmediate({optional:!0});if(ze){const hn=yield ze.getHeartbeatsHeader();hn&&be.append("x-firebase-client",hn)}const Yt={method:"POST",headers:be,body:JSON.stringify({fid:Z,authVersion:Ae,appId:R.appId,sdkVersion:se})},en=yield Jt(()=>fetch(ae,Yt));if(en.ok){const hn=yield en.json();return{fid:hn.fid||Z,registrationStatus:2,refreshToken:hn.refreshToken,authToken:un(hn.authToken)}}throw yield Mn("Create Installation",en)})).apply(this,arguments)}function An(R){return new Promise(k=>{setTimeout(k,R)})}const us=/^[cdef][\w-]{21}$/;function wi(){try{const R=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(R),R[0]=112+R[0]%16;const Z=function Qe(R){return function er(R){return btoa(String.fromCharCode(...R)).replace(/\+/g,"-").replace(/\//g,"_")}(R).substr(0,22)}(R);return us.test(Z)?Z:""}catch{return""}}function ge(R){return`${R.appName}!${R.appId}`}const he=new Map;function ht(R,k){const Z=ge(R);Rn(Z,k),function wn(R,k){const Z=function lr(){return!jt&&"BroadcastChannel"in self&&(jt=new BroadcastChannel("[Firebase] FID Change"),jt.onmessage=R=>{Rn(R.data.key,R.data.fid)}),jt}();Z&&Z.postMessage({key:R,fid:k}),function Qn(){0===he.size&&jt&&(jt.close(),jt=null)}()}(Z,k)}function Rn(R,k){const Z=he.get(R);if(Z)for(const ae of Z)ae(k)}let jt=null;const Un="firebase-installations-store";let Xt=null;function $r(){return Xt||(Xt=function We(R,k,{blocked:Z,upgrade:ae,blocking:be,terminated:ze}={}){const yt=indexedDB.open(R,k),Yt=At(yt);return ae&&yt.addEventListener("upgradeneeded",en=>{ae(At(yt.result),en.oldVersion,en.newVersion,At(yt.transaction))}),Z&&yt.addEventListener("blocked",()=>Z()),Yt.then(en=>{ze&&en.addEventListener("close",()=>ze()),be&&en.addEventListener("versionchange",()=>be())}).catch(()=>{}),Yt}("firebase-installations-database",1,{upgrade:(R,k)=>{0===k&&R.createObjectStore(Un)}})),Xt}function br(R,k){return qn.apply(this,arguments)}function qn(){return(qn=(0,X.Z)(function*(R,k){const Z=ge(R),be=(yield $r()).transaction(Un,"readwrite"),ze=be.objectStore(Un),yt=yield ze.get(Z);return yield ze.put(k,Z),yield be.done,(!yt||yt.fid!==k.fid)&&ht(R,k.fid),k})).apply(this,arguments)}function li(R){return jr.apply(this,arguments)}function jr(){return(jr=(0,X.Z)(function*(R){const k=ge(R),ae=(yield $r()).transaction(Un,"readwrite");yield ae.objectStore(Un).delete(k),yield ae.done})).apply(this,arguments)}function Jr(R,k){return ti.apply(this,arguments)}function ti(){return(ti=(0,X.Z)(function*(R,k){const Z=ge(R),be=(yield $r()).transaction(Un,"readwrite"),ze=be.objectStore(Un),yt=yield ze.get(Z),Yt=k(yt);return void 0===Yt?yield ze.delete(Z):yield ze.put(Yt,Z),yield be.done,Yt&&(!yt||yt.fid!==Yt.fid)&&ht(R,Yt.fid),Yt})).apply(this,arguments)}function _e(R){return fe.apply(this,arguments)}function fe(){return(fe=(0,X.Z)(function*(R){let k;const Z=yield Jr(R.appConfig,ae=>{const be=ke(ae),ze=rt(R,be);return k=ze.registrationPromise,ze.installationEntry});return""===Z.fid?{installationEntry:yield k}:{installationEntry:Z,registrationPromise:k}})).apply(this,arguments)}function ke(R){return de(R||{fid:wi(),registrationStatus:0})}function rt(R,k){if(0===k.registrationStatus){if(!navigator.onLine)return{installationEntry:k,registrationPromise:Promise.reject(zt.create("app-offline"))};const Z={fid:k.fid,registrationStatus:1,registrationTime:Date.now()},ae=function $e(R,k){return Gt.apply(this,arguments)}(R,Z);return{installationEntry:Z,registrationPromise:ae}}return 1===k.registrationStatus?{installationEntry:k,registrationPromise:vn(R)}:{installationEntry:k}}function Gt(){return(Gt=(0,X.Z)(function*(R,k){try{const Z=yield Ut(R,k);return br(R.appConfig,Z)}catch(Z){throw dn(Z)&&409===Z.customData.serverCode?yield li(R.appConfig):yield br(R.appConfig,{fid:k.fid,registrationStatus:0}),Z}})).apply(this,arguments)}function vn(R){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,X.Z)(function*(R){let k=yield mr(R.appConfig);for(;1===k.registrationStatus;)yield An(100),k=yield mr(R.appConfig);if(0===k.registrationStatus){const{installationEntry:Z,registrationPromise:ae}=yield _e(R);return ae||Z}return k})).apply(this,arguments)}function mr(R){return Jr(R,k=>{if(!k)throw zt.create("installation-not-found");return de(k)})}function de(R){return function ue(R){return 1===R.registrationStatus&&R.registrationTime+1e4<Date.now()}(R)?{fid:R.fid,registrationStatus:0}:R}function oe(R,k){return Be.apply(this,arguments)}function Be(){return(Be=(0,X.Z)(function*({appConfig:R,heartbeatServiceProvider:k},Z){const ae=Ct(R,Z),be=Xn(R,Z),ze=k.getImmediate({optional:!0});if(ze){const hn=yield ze.getHeartbeatsHeader();hn&&be.append("x-firebase-client",hn)}const Yt={method:"POST",headers:be,body:JSON.stringify({installation:{sdkVersion:se,appId:R.appId}})},en=yield Jt(()=>fetch(ae,Yt));if(en.ok)return un(yield en.json());throw yield Mn("Generate Auth Token",en)})).apply(this,arguments)}function Ct(R,{fid:k}){return`${En(R)}/${k}/authTokens:generate`}function sn(R){return xn.apply(this,arguments)}function xn(){return(xn=(0,X.Z)(function*(R,k=!1){let Z;const ae=yield Jr(R.appConfig,ze=>{if(!bn(ze))throw zt.create("not-registered");const yt=ze.authToken;if(!k&&yr(yt))return ze;if(1===yt.requestStatus)return Z=He(R,k),ze;{if(!navigator.onLine)throw zt.create("app-offline");const Yt=ur(ze);return Z=Pt(R,Yt),Yt}});return Z?yield Z:ae.authToken})).apply(this,arguments)}function He(R,k){return je.apply(this,arguments)}function je(){return(je=(0,X.Z)(function*(R,k){let Z=yield St(R.appConfig);for(;1===Z.authToken.requestStatus;)yield An(100),Z=yield St(R.appConfig);const ae=Z.authToken;return 0===ae.requestStatus?sn(R,k):ae})).apply(this,arguments)}function St(R){return Jr(R,k=>{if(!bn(k))throw zt.create("not-registered");return function Ii(R){return 1===R.requestStatus&&R.requestTime+1e4<Date.now()}(k.authToken)?Object.assign(Object.assign({},k),{authToken:{requestStatus:0}}):k})}function Pt(R,k){return In.apply(this,arguments)}function In(){return(In=(0,X.Z)(function*(R,k){try{const Z=yield oe(R,k),ae=Object.assign(Object.assign({},k),{authToken:Z});return yield br(R.appConfig,ae),Z}catch(Z){if(!dn(Z)||401!==Z.customData.serverCode&&404!==Z.customData.serverCode){const ae=Object.assign(Object.assign({},k),{authToken:{requestStatus:0}});yield br(R.appConfig,ae)}else yield li(R.appConfig);throw Z}})).apply(this,arguments)}function bn(R){return void 0!==R&&2===R.registrationStatus}function yr(R){return 2===R.requestStatus&&!function oi(R){const k=Date.now();return k<R.creationTime||R.creationTime+R.expiresIn<k+36e5}(R)}function ur(R){const k={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},R),{authToken:k})}function ki(){return(ki=(0,X.Z)(function*(R){const k=R,{installationEntry:Z,registrationPromise:ae}=yield _e(k);return ae?ae.catch(console.error):sn(k).catch(console.error),Z.fid})).apply(this,arguments)}function po(){return(po=(0,X.Z)(function*(R,k=!1){const Z=R;return yield xr(Z),(yield sn(Z,k)).token})).apply(this,arguments)}function xr(R){return _s.apply(this,arguments)}function _s(){return(_s=(0,X.Z)(function*(R){const{registrationPromise:k}=yield _e(R);k&&(yield k)})).apply(this,arguments)}function Xr(R){return zt.create("missing-app-config-values",{valueName:R})}const ui="installations",xs=R=>{const k=R.getProvider("app").getImmediate(),Z=function Fs(R){if(!R||!R.options)throw Xr("App Configuration");if(!R.name)throw Xr("App Name");const k=["projectId","apiKey","appId"];for(const Z of k)if(!R.options[Z])throw Xr(Z);return{appName:R.name,projectId:R.options.projectId,apiKey:R.options.apiKey,appId:R.options.appId}}(k);return{app:k,appConfig:Z,heartbeatServiceProvider:(0,Re._getProvider)(k,"heartbeat"),_delete:()=>Promise.resolve()}},Es=R=>{const k=R.getProvider("app").getImmediate(),Z=(0,Re._getProvider)(k,ui).getImmediate();return{getId:()=>function ji(R){return ki.apply(this,arguments)}(Z),getToken:be=>function eo(R){return po.apply(this,arguments)}(Z,be)}};(function Ai(){(0,Re._registerComponent)(new Ne.wA(ui,xs,"PUBLIC")),(0,Re._registerComponent)(new Ne.wA("installations-internal",Es,"PRIVATE"))})(),(0,Re.registerVersion)(Dr,"0.6.4"),(0,Re.registerVersion)(Dr,"0.6.4","esm2017");const ci="@firebase/remote-config",Yr=new Ce.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class ai{constructor(k,Z,ae,be){this.client=k,this.storage=Z,this.storageCache=ae,this.logger=be}isCachedDataFresh(k,Z){if(!Z)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const ae=Date.now()-Z,be=ae<=k;return this.logger.debug(`Config fetch cache check. Cache age millis: ${ae}. Cache max age millis (minimumFetchIntervalMillis setting): ${k}. Is cache hit: ${be}.`),be}fetch(k){var Z=this;return(0,X.Z)(function*(){const[ae,be]=yield Promise.all([Z.storage.getLastSuccessfulFetchTimestampMillis(),Z.storage.getLastSuccessfulFetchResponse()]);if(be&&Z.isCachedDataFresh(k.cacheMaxAgeMillis,ae))return be;k.eTag=be&&be.eTag;const ze=yield Z.client.fetch(k),yt=[Z.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===ze.status&&yt.push(Z.storage.setLastSuccessfulFetchResponse(ze)),yield Promise.all(yt),ze})()}}function mo(R=navigator){return R.languages&&R.languages[0]||R.language}class Pr{constructor(k,Z,ae,be,ze,yt){this.firebaseInstallations=k,this.sdkVersion=Z,this.namespace=ae,this.projectId=be,this.apiKey=ze,this.appId=yt}fetch(k){var Z=this;return(0,X.Z)(function*(){const[ae,be]=yield Promise.all([Z.firebaseInstallations.getId(),Z.firebaseInstallations.getToken()]),yt=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${Z.projectId}/namespaces/${Z.namespace}:fetch?key=${Z.apiKey}`,Yt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":k.eTag||"*"},en={sdk_version:Z.sdkVersion,app_instance_id:ae,app_instance_id_token:be,app_id:Z.appId,language_code:mo()},hn={method:"POST",headers:Yt,body:JSON.stringify(en)},Pn=fetch(yt,hn),sr=new Promise((Do,nl)=>{k.signal.addEventListener(()=>{const zl=new Error("The operation was aborted.");zl.name="AbortError",nl(zl)})});let Bo;try{yield Promise.race([Pn,sr]),Bo=yield Pn}catch(Do){let nl="fetch-client-network";throw"AbortError"===Do?.name&&(nl="fetch-timeout"),Yr.create(nl,{originalErrorMessage:Do?.message})}let zr=Bo.status;const ms=Bo.headers.get("ETag")||void 0;let pi,Co;if(200===Bo.status){let Do;try{Do=yield Bo.json()}catch(nl){throw Yr.create("fetch-client-parse",{originalErrorMessage:nl?.message})}pi=Do.entries,Co=Do.state}if("INSTANCE_STATE_UNSPECIFIED"===Co?zr=500:"NO_CHANGE"===Co?zr=304:("NO_TEMPLATE"===Co||"EMPTY_CONFIG"===Co)&&(pi={}),304!==zr&&200!==zr)throw Yr.create("fetch-status",{httpStatus:zr});return{status:zr,eTag:ms,config:pi}})()}}class xl{constructor(k,Z){this.client=k,this.storage=Z}fetch(k){var Z=this;return(0,X.Z)(function*(){const ae=(yield Z.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return Z.attemptFetch(k,ae)})()}attemptFetch(k,{throttleEndTimeMillis:Z,backoffCount:ae}){var be=this;return(0,X.Z)(function*(){yield function Gn(R,k){return new Promise((Z,ae)=>{const be=Math.max(k-Date.now(),0),ze=setTimeout(Z,be);R.addEventListener(()=>{clearTimeout(ze),ae(Yr.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}(k.signal,Z);try{const ze=yield be.client.fetch(k);return yield be.storage.deleteThrottleMetadata(),ze}catch(ze){if(!function Li(R){if(!(R instanceof Ce.ZR&&R.customData))return!1;const k=Number(R.customData.httpStatus);return 429===k||500===k||503===k||504===k}(ze))throw ze;const yt={throttleEndTimeMillis:Date.now()+(0,Ce.$s)(ae),backoffCount:ae+1};return yield be.storage.setThrottleMetadata(yt),be.attemptFetch(k,yt)}})()}}class hl{constructor(k,Z,ae,be,ze){this.app=k,this._client=Z,this._storageCache=ae,this._storage=be,this._logger=ze,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Ci(R,k){const Z=R.target.error||void 0;return Yr.create(k,{originalErrorMessage:Z&&Z?.message})}const Kr="app_namespace_store";class ni{constructor(k,Z,ae,be=function yo(){return new Promise((R,k)=>{try{const Z=indexedDB.open("firebase_remote_config",1);Z.onerror=ae=>{k(Ci(ae,"storage-open"))},Z.onsuccess=ae=>{R(ae.target.result)},Z.onupgradeneeded=ae=>{0===ae.oldVersion&&ae.target.result.createObjectStore(Kr,{keyPath:"compositeKey"})}}catch(Z){k(Yr.create("storage-open",{originalErrorMessage:Z?.message}))}})}()){this.appId=k,this.appName=Z,this.namespace=ae,this.openDbPromise=be}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(k){return this.set("last_fetch_status",k)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(k){return this.set("last_successful_fetch_timestamp_millis",k)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(k){return this.set("last_successful_fetch_response",k)}getActiveConfig(){return this.get("active_config")}setActiveConfig(k){return this.set("active_config",k)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(k){return this.set("active_config_etag",k)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(k){return this.set("throttle_metadata",k)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(k){var Z=this;return(0,X.Z)(function*(){const ae=yield Z.openDbPromise;return new Promise((be,ze)=>{const Yt=ae.transaction([Kr],"readonly").objectStore(Kr),en=Z.createCompositeKey(k);try{const hn=Yt.get(en);hn.onerror=Pn=>{ze(Ci(Pn,"storage-get"))},hn.onsuccess=Pn=>{const sr=Pn.target.result;be(sr?sr.value:void 0)}}catch(hn){ze(Yr.create("storage-get",{originalErrorMessage:hn?.message}))}})})()}set(k,Z){var ae=this;return(0,X.Z)(function*(){const be=yield ae.openDbPromise;return new Promise((ze,yt)=>{const en=be.transaction([Kr],"readwrite").objectStore(Kr),hn=ae.createCompositeKey(k);try{const Pn=en.put({compositeKey:hn,value:Z});Pn.onerror=sr=>{yt(Ci(sr,"storage-set"))},Pn.onsuccess=()=>{ze()}}catch(Pn){yt(Yr.create("storage-set",{originalErrorMessage:Pn?.message}))}})})()}delete(k){var Z=this;return(0,X.Z)(function*(){const ae=yield Z.openDbPromise;return new Promise((be,ze)=>{const Yt=ae.transaction([Kr],"readwrite").objectStore(Kr),en=Z.createCompositeKey(k);try{const hn=Yt.delete(en);hn.onerror=Pn=>{ze(Ci(Pn,"storage-delete"))},hn.onsuccess=()=>{be()}}catch(hn){ze(Yr.create("storage-delete",{originalErrorMessage:hn?.message}))}})})()}createCompositeKey(k){return[this.appId,this.appName,this.namespace,k].join()}}class mi{constructor(k){this.storage=k}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var k=this;return(0,X.Z)(function*(){const Z=k.storage.getLastFetchStatus(),ae=k.storage.getLastSuccessfulFetchTimestampMillis(),be=k.storage.getActiveConfig(),ze=yield Z;ze&&(k.lastFetchStatus=ze);const yt=yield ae;yt&&(k.lastSuccessfulFetchTimestampMillis=yt);const Yt=yield be;Yt&&(k.activeConfig=Yt)})()}setLastFetchStatus(k){return this.lastFetchStatus=k,this.storage.setLastFetchStatus(k)}setLastSuccessfulFetchTimestampMillis(k){return this.lastSuccessfulFetchTimestampMillis=k,this.storage.setLastSuccessfulFetchTimestampMillis(k)}setActiveConfig(k){return this.activeConfig=k,this.storage.setActiveConfig(k)}}function Vi(){return Us.apply(this,arguments)}function Us(){return(Us=(0,X.Z)(function*(){if(!(0,Ce.hl)())return!1;try{return yield(0,Ce.eu)()}catch{return!1}})).apply(this,arguments)}let Jn,yi;!function Ji(){(0,Re._registerComponent)(new Ne.wA("remote-config",function R(k,{instanceIdentifier:Z}){const ae=k.getProvider("app").getImmediate(),be=k.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw Yr.create("registration-window");if(!(0,Ce.hl)())throw Yr.create("indexed-db-unavailable");const{projectId:ze,apiKey:yt,appId:Yt}=ae.options;if(!ze)throw Yr.create("registration-project-id");if(!yt)throw Yr.create("registration-api-key");if(!Yt)throw Yr.create("registration-app-id");const en=new ni(Yt,ae.name,Z=Z||"firebase"),hn=new mi(en),Pn=new Ve.Yd(ci);Pn.logLevel=Ve.in.ERROR;const sr=new Pr(be,Re.SDK_VERSION,Z,ze,yt,Yt),Bo=new xl(sr,en),zr=new ai(Bo,en,hn,Pn),ms=new hl(ae,zr,hn,en,Pn);return function Ir(R){const k=(0,Ce.m9)(R);k._initializePromise||(k._initializePromise=k._storageCache.loadFromStorage().then(()=>{k._isInitializationComplete=!0}))}(ms),ms},"PUBLIC").setMultipleInstances(!0)),(0,Re.registerVersion)(ci,"0.4.4"),(0,Re.registerVersion)(ci,"0.4.4","esm2017")}();const Ks=new WeakMap,Hi=new WeakMap,$i=new WeakMap,Ui=new WeakMap,fn=new WeakMap;let la={get(R,k,Z){if(R instanceof IDBTransaction){if("done"===k)return Hi.get(R);if("objectStoreNames"===k)return R.objectStoreNames||$i.get(R);if("store"===k)return Z.objectStoreNames[1]?void 0:Z.objectStore(Z.objectStoreNames[0])}return Xi(R[k])},set:(R,k,Z)=>(R[k]=Z,!0),has:(R,k)=>R instanceof IDBTransaction&&("done"===k||"store"===k)||k in R};function ua(R){return"function"==typeof R?function ws(R){return R!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function hs(){return yi||(yi=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(R)?function(...k){return R.apply(Po(this),k),Xi(Ks.get(this))}:function(...k){return Xi(R.apply(Po(this),k))}:function(k,...Z){const ae=R.call(Po(this),k,...Z);return $i.set(ae,k.sort?k.sort():[k]),Xi(ae)}}(R):(R instanceof IDBTransaction&&function Aa(R){if(Hi.has(R))return;const k=new Promise((Z,ae)=>{const be=()=>{R.removeEventListener("complete",ze),R.removeEventListener("error",yt),R.removeEventListener("abort",yt)},ze=()=>{Z(),be()},yt=()=>{ae(R.error||new DOMException("AbortError","AbortError")),be()};R.addEventListener("complete",ze),R.addEventListener("error",yt),R.addEventListener("abort",yt)});Hi.set(R,k)}(R),((R,k)=>k.some(Z=>R instanceof Z))(R,function vo(){return Jn||(Jn=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(R,la):R)}function Xi(R){if(R instanceof IDBRequest)return function iu(R){const k=new Promise((Z,ae)=>{const be=()=>{R.removeEventListener("success",ze),R.removeEventListener("error",yt)},ze=()=>{Z(Xi(R.result)),be()},yt=()=>{ae(R.error),be()};R.addEventListener("success",ze),R.addEventListener("error",yt)});return k.then(Z=>{Z instanceof IDBCursor&&Ks.set(Z,R)}).catch(()=>{}),fn.set(k,R),k}(R);if(Ui.has(R))return Ui.get(R);const k=ua(R);return k!==R&&(Ui.set(R,k),fn.set(k,R)),k}const Po=R=>fn.get(R);function xt(R,k,{blocked:Z,upgrade:ae,blocking:be,terminated:ze}={}){const yt=indexedDB.open(R,k),Yt=Xi(yt);return ae&&yt.addEventListener("upgradeneeded",en=>{ae(Xi(yt.result),en.oldVersion,en.newVersion,Xi(yt.transaction))}),Z&&yt.addEventListener("blocked",()=>Z()),Yt.then(en=>{ze&&en.addEventListener("close",()=>ze()),be&&en.addEventListener("versionchange",()=>be())}).catch(()=>{}),Yt}function rr(R,{blocked:k}={}){const Z=indexedDB.deleteDatabase(R);return k&&Z.addEventListener("blocked",()=>k()),Xi(Z).then(()=>{})}const ca=["get","getKey","getAll","getAllKeys","count"],fl=["put","add","delete","clear"],Di=new Map;function Ar(R,k){if(!(R instanceof IDBDatabase)||k in R||"string"!=typeof k)return;if(Di.get(k))return Di.get(k);const Z=k.replace(/FromIndex$/,""),ae=k!==Z,be=fl.includes(Z);if(!(Z in(ae?IDBIndex:IDBObjectStore).prototype)||!be&&!ca.includes(Z))return;const ze=function(){var yt=(0,X.Z)(function*(Yt,...en){const hn=this.transaction(Yt,be?"readwrite":"readonly");let Pn=hn.store;return ae&&(Pn=Pn.index(en.shift())),(yield Promise.all([Pn[Z](...en),be&&hn.done]))[0]});return function(en){return yt.apply(this,arguments)}}();return Di.set(k,ze),ze}!function Ra(R){la=R(la)}(R=>({...R,get:(k,Z,ae)=>Ar(k,Z)||R.get(k,Z,ae),has:(k,Z)=>!!Ar(k,Z)||R.has(k,Z)}));const Ns="/firebase-messaging-sw.js",es="/firebase-cloud-messaging-push-scope",no="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Is="google.c.a.c_id",Fr="google.c.a.c_l",H="google.c.a.ts",V="google.c.a.e";var ne=(()=>{return(R=ne||(ne={})).PUSH_RECEIVED="push-received",R.NOTIFICATION_CLICKED="notification-clicked",ne;var R})();function lt(R){const k=new Uint8Array(R);return btoa(String.fromCharCode(...k)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Lt(R){const Z=(R+"=".repeat((4-R.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),ae=atob(Z),be=new Uint8Array(ae.length);for(let ze=0;ze<ae.length;++ze)be[ze]=ae.charCodeAt(ze);return be}const _r="fcm_token_details_db",Gi="fcm_token_object_Store";function Ps(R){return Ds.apply(this,arguments)}function Ds(){return Ds=(0,X.Z)(function*(R){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(ze=>ze.name).includes(_r))return null;let k=null;return(yield xt(_r,5,{upgrade:(ae=(0,X.Z)(function*(be,ze,yt,Yt){var en;if(ze<2||!be.objectStoreNames.contains(Gi))return;const hn=Yt.objectStore(Gi),Pn=yield hn.index("fcmSenderId").get(R);if(yield hn.clear(),Pn)if(2===ze){const sr=Pn;if(!sr.auth||!sr.p256dh||!sr.endpoint)return;k={token:sr.fcmToken,createTime:null!==(en=sr.createTime)&&void 0!==en?en:Date.now(),subscriptionOptions:{auth:sr.auth,p256dh:sr.p256dh,endpoint:sr.endpoint,swScope:sr.swScope,vapidKey:"string"==typeof sr.vapidKey?sr.vapidKey:lt(sr.vapidKey)}}}else if(3===ze){const sr=Pn;k={token:sr.fcmToken,createTime:sr.createTime,subscriptionOptions:{auth:lt(sr.auth),p256dh:lt(sr.p256dh),endpoint:sr.endpoint,swScope:sr.swScope,vapidKey:lt(sr.vapidKey)}}}else if(4===ze){const sr=Pn;k={token:sr.fcmToken,createTime:sr.createTime,subscriptionOptions:{auth:lt(sr.auth),p256dh:lt(sr.p256dh),endpoint:sr.endpoint,swScope:sr.swScope,vapidKey:lt(sr.vapidKey)}}}}),function(ze,yt,Yt,en){return ae.apply(this,arguments)})})).close(),yield rr(_r),yield rr("fcm_vapid_details_db"),yield rr("undefined"),Zi(k)?k:null;var ae}),Ds.apply(this,arguments)}function Zi(R){if(!R||!R.subscriptionOptions)return!1;const{subscriptionOptions:k}=R;return"number"==typeof R.createTime&&R.createTime>0&&"string"==typeof R.token&&R.token.length>0&&"string"==typeof k.auth&&k.auth.length>0&&"string"==typeof k.p256dh&&k.p256dh.length>0&&"string"==typeof k.endpoint&&k.endpoint.length>0&&"string"==typeof k.swScope&&k.swScope.length>0&&"string"==typeof k.vapidKey&&k.vapidKey.length>0}const fs="firebase-messaging-store";let da=null;function ha(){return da||(da=xt("firebase-messaging-database",1,{upgrade:(R,k)=>{0===k&&R.createObjectStore(fs)}})),da}function fa(R){return pa.apply(this,arguments)}function pa(){return(pa=(0,X.Z)(function*(R){const k=ma(R),ae=yield(yield ha()).transaction(fs).objectStore(fs).get(k);if(ae)return ae;{const be=yield Ps(R.appConfig.senderId);if(be)return yield qa(R,be),be}})).apply(this,arguments)}function qa(R,k){return pl.apply(this,arguments)}function pl(){return(pl=(0,X.Z)(function*(R,k){const Z=ma(R),be=(yield ha()).transaction(fs,"readwrite");return yield be.objectStore(fs).put(k,Z),yield be.done,k})).apply(this,arguments)}function ga(R){return Za.apply(this,arguments)}function Za(){return(Za=(0,X.Z)(function*(R){const k=ma(R),ae=(yield ha()).transaction(fs,"readwrite");yield ae.objectStore(fs).delete(k),yield ae.done})).apply(this,arguments)}function ma({appConfig:R}){return R.appId}const Hr=new Ce.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function ko(R,k){return di.apply(this,arguments)}function di(){return(di=(0,X.Z)(function*(R,k){const Z=yield qs(R),ae=Yo(k),be={method:"POST",headers:Z,body:JSON.stringify(ae)};let ze;try{ze=yield(yield fetch(Zo(R.appConfig),be)).json()}catch(yt){throw Hr.create("token-subscribe-failed",{errorInfo:yt?.toString()})}if(ze.error)throw Hr.create("token-subscribe-failed",{errorInfo:ze.error.message});if(!ze.token)throw Hr.create("token-subscribe-no-token");return ze.token})).apply(this,arguments)}function Qa(R,k){return gl.apply(this,arguments)}function gl(){return(gl=(0,X.Z)(function*(R,k){const Z=yield qs(R),ae=Yo(k.subscriptionOptions),be={method:"PATCH",headers:Z,body:JSON.stringify(ae)};let ze;try{ze=yield(yield fetch(`${Zo(R.appConfig)}/${k.token}`,be)).json()}catch(yt){throw Hr.create("token-update-failed",{errorInfo:yt?.toString()})}if(ze.error)throw Hr.create("token-update-failed",{errorInfo:ze.error.message});if(!ze.token)throw Hr.create("token-update-no-token");return ze.token})).apply(this,arguments)}function qo(R,k){return ya.apply(this,arguments)}function ya(){return(ya=(0,X.Z)(function*(R,k){const ae={method:"DELETE",headers:yield qs(R)};try{const ze=yield(yield fetch(`${Zo(R.appConfig)}/${k}`,ae)).json();if(ze.error)throw Hr.create("token-unsubscribe-failed",{errorInfo:ze.error.message})}catch(be){throw Hr.create("token-unsubscribe-failed",{errorInfo:be?.toString()})}})).apply(this,arguments)}function Zo({projectId:R}){return`https://fcmregistrations.googleapis.com/v1/projects/${R}/registrations`}function qs(R){return _a.apply(this,arguments)}function _a(){return(_a=(0,X.Z)(function*({appConfig:R,installations:k}){const Z=yield k.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":R.apiKey,"x-goog-firebase-installations-auth":`FIS ${Z}`})})).apply(this,arguments)}function Yo({p256dh:R,auth:k,endpoint:Z,vapidKey:ae}){const be={web:{endpoint:Z,auth:k,p256dh:R}};return ae!==no&&(be.web.applicationPubKey=ae),be}const va=6048e5;function Du(R){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,X.Z)(function*(R){const k=yield Ea(R.swRegistration,R.vapidKey),Z={vapidKey:R.vapidKey,swScope:R.swRegistration.scope,endpoint:k.endpoint,auth:lt(k.getKey("auth")),p256dh:lt(k.getKey("p256dh"))},ae=yield fa(R.firebaseDependencies);if(ae){if(N(ae.subscriptionOptions,Z))return Date.now()>=ae.createTime+va?xa(R,{token:ae.token,createTime:Date.now(),subscriptionOptions:Z}):ae.token;try{yield qo(R.firebaseDependencies,ae.token)}catch(be){console.warn(be)}return bu(R.firebaseDependencies,Z)}return bu(R.firebaseDependencies,Z)})).apply(this,arguments)}function ro(R){return zi.apply(this,arguments)}function zi(){return(zi=(0,X.Z)(function*(R){const k=yield fa(R.firebaseDependencies);k&&(yield qo(R.firebaseDependencies,k.token),yield ga(R.firebaseDependencies));const Z=yield R.swRegistration.pushManager.getSubscription();return!Z||Z.unsubscribe()})).apply(this,arguments)}function xa(R,k){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,X.Z)(function*(R,k){try{const Z=yield Qa(R.firebaseDependencies,k),ae=Object.assign(Object.assign({},k),{token:Z,createTime:Date.now()});return yield qa(R.firebaseDependencies,ae),Z}catch(Z){throw yield ro(R),Z}})).apply(this,arguments)}function bu(R,k){return Ri.apply(this,arguments)}function Ri(){return(Ri=(0,X.Z)(function*(R,k){const ae={token:yield ko(R,k),createTime:Date.now(),subscriptionOptions:k};return yield qa(R,ae),ae.token})).apply(this,arguments)}function Ea(R,k){return Or.apply(this,arguments)}function Or(){return(Or=(0,X.Z)(function*(R,k){return(yield R.pushManager.getSubscription())||R.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Lt(k)})})).apply(this,arguments)}function N(R,k){return k.vapidKey===R.vapidKey&&k.endpoint===R.endpoint&&k.auth===R.auth&&k.p256dh===R.p256dh}function K(R){const k={from:R.from,collapseKey:R.collapse_key,messageId:R.fcmMessageId};return function U(R,k){if(!k.notification)return;R.notification={};const Z=k.notification.title;Z&&(R.notification.title=Z);const ae=k.notification.body;ae&&(R.notification.body=ae);const be=k.notification.image;be&&(R.notification.image=be);const ze=k.notification.icon;ze&&(R.notification.icon=ze)}(k,R),function te(R,k){!k.data||(R.data=k.data)}(k,R),function Ie(R,k){var Z,ae,be,ze,yt;if(!(k.fcmOptions||null!==(Z=k.notification)&&void 0!==Z&&Z.click_action))return;R.fcmOptions={};const Yt=null!==(be=null===(ae=k.fcmOptions)||void 0===ae?void 0:ae.link)&&void 0!==be?be:null===(ze=k.notification)||void 0===ze?void 0:ze.click_action;Yt&&(R.fcmOptions.link=Yt);const en=null===(yt=k.fcmOptions)||void 0===yt?void 0:yt.analytics_label;en&&(R.fcmOptions.analyticsLabel=en)}(k,R),k}function ft(R){return"object"==typeof R&&!!R&&Is in R}function bt(R,k){const Z=[];for(let ae=0;ae<R.length;ae++)Z.push(R.charAt(ae)),ae<k.length&&Z.push(k.charAt(ae));return Z.join("")}function tr(R){return Hr.create("missing-app-config-values",{valueName:R})}bt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),bt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Yn{constructor(k,Z,ae){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const be=function mn(R){if(!R||!R.options)throw tr("App Configuration Object");if(!R.name)throw tr("App Name");const k=["projectId","apiKey","appId","messagingSenderId"],{options:Z}=R;for(const ae of k)if(!Z[ae])throw tr(ae);return{appName:R.name,projectId:Z.projectId,apiKey:Z.apiKey,appId:Z.appId,senderId:Z.messagingSenderId}}(k);this.firebaseDependencies={app:k,appConfig:be,installations:Z,analyticsProvider:ae}}_delete(){return Promise.resolve()}}function Zn(R){return zn.apply(this,arguments)}function zn(){return(zn=(0,X.Z)(function*(R){try{R.swRegistration=yield navigator.serviceWorker.register(Ns,{scope:es}),R.swRegistration.update().catch(()=>{})}catch(k){throw Hr.create("failed-service-worker-registration",{browserErrorMessage:k?.message})}})).apply(this,arguments)}function bi(R,k){return Nr.apply(this,arguments)}function Nr(){return(Nr=(0,X.Z)(function*(R,k){if(!k&&!R.swRegistration&&(yield Zn(R)),k||!R.swRegistration){if(!(k instanceof ServiceWorkerRegistration))throw Hr.create("invalid-sw-registration");R.swRegistration=k}})).apply(this,arguments)}function Wn(R,k){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,X.Z)(function*(R,k){k?R.vapidKey=k:R.vapidKey||(R.vapidKey=no)})).apply(this,arguments)}function io(){return(io=(0,X.Z)(function*(R,k){if(!navigator)throw Hr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Hr.create("permission-blocked");return yield Wn(R,k?.vapidKey),yield bi(R,k?.serviceWorkerRegistration),Du(R)})).apply(this,arguments)}function ts(R,k,Z){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,X.Z)(function*(R,k,Z){const ae=wo(k);(yield R.firebaseDependencies.analyticsProvider.get()).logEvent(ae,{message_id:Z[Is],message_name:Z[Fr],message_time:Z[H],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function wo(R){switch(R){case ne.NOTIFICATION_CLICKED:return"notification_open";case ne.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function so(){return(so=(0,X.Z)(function*(R,k){const Z=k.data;if(!Z.isFirebaseMessaging)return;R.onMessageHandler&&Z.messageType===ne.PUSH_RECEIVED&&("function"==typeof R.onMessageHandler?R.onMessageHandler(K(Z)):R.onMessageHandler.next(K(Z)));const ae=Z.data;ft(ae)&&"1"===ae[V]&&(yield ts(R,Z.messageType,ae))})).apply(this,arguments)}const Ja="@firebase/messaging",ml=R=>{const k=new Yn(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),R.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Z=>function Nl(R,k){return so.apply(this,arguments)}(k,Z)),k},Pl=R=>{const k=R.getProvider("messaging").getImmediate();return{getToken:ae=>function Bi(R,k){return io.apply(this,arguments)}(k,ae)}};function ou(){return ns.apply(this,arguments)}function ns(){return(ns=(0,X.Z)(function*(){try{yield(0,Ce.eu)()}catch{return!1}return typeof window<"u"&&(0,Ce.hl)()&&(0,Ce.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Xa(){(0,Re._registerComponent)(new Ne.wA("messaging",ml,"PUBLIC")),(0,Re._registerComponent)(new Ne.wA("messaging-internal",Pl,"PRIVATE")),(0,Re.registerVersion)(Ja,"0.12.4"),(0,Re.registerVersion)(Ja,"0.12.4","esm2017")}();const Ot="analytics",Sn="firebase_id",at="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Tt="https://www.googletagmanager.com/gtag/js",vr=new Ve.Yd("@firebase/analytics"),oo=new Ce.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function kl(R){if(!R.startsWith(Tt)){const k=oo.create("invalid-gtag-resource",{gtagURL:R});return vr.warn(k.message),""}return R}function el(R){return Promise.all(R.map(k=>k.catch(Z=>Z)))}function Su(R,k){const Z=function Fl(R,k){let Z;return window.trustedTypes&&(Z=window.trustedTypes.createPolicy(R,k)),Z}("firebase-js-sdk-policy",{createScriptURL:kl}),ae=document.createElement("script"),be=`${Tt}?l=${R}&id=${k}`;ae.src=Z?Z?.createScriptURL(be):be,ae.async=!0,document.head.appendChild(ae)}function ld(R,k,Z,ae,be,ze){return Au.apply(this,arguments)}function Au(){return(Au=(0,X.Z)(function*(R,k,Z,ae,be,ze){const yt=ae[be];try{if(yt)yield k[yt];else{const en=(yield el(Z)).find(hn=>hn.measurementId===be);en&&(yield k[en.appId])}}catch(Yt){vr.error(Yt)}R("config",be,ze)})).apply(this,arguments)}function Ll(R,k,Z,ae,be){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,X.Z)(function*(R,k,Z,ae,be){try{let ze=[];if(be&&be.send_to){let yt=be.send_to;Array.isArray(yt)||(yt=[yt]);const Yt=yield el(Z);for(const en of yt){const hn=Yt.find(sr=>sr.measurementId===en),Pn=hn&&k[hn.appId];if(!Pn){ze=[];break}ze.push(Pn)}}0===ze.length&&(ze=Object.values(k)),yield Promise.all(ze),R("event",ae,be||{})}catch(ze){vr.error(ze)}})).apply(this,arguments)}function Oc(R){const k=window.document.getElementsByTagName("script");for(const Z of Object.values(k))if(Z.src&&Z.src.includes(Tt)&&Z.src.includes(R))return Z;return null}const $n=new class Na{constructor(k={},Z=1e3){this.throttleMetadata=k,this.intervalMillis=Z}getThrottleMetadata(k){return this.throttleMetadata[k]}setThrottleMetadata(k,Z){this.throttleMetadata[k]=Z}deleteThrottleMetadata(k){delete this.throttleMetadata[k]}};function Mu(R){return new Headers({Accept:"application/json","x-goog-api-key":R})}function _i(R){return on.apply(this,arguments)}function on(){return(on=(0,X.Z)(function*(R){var k;const{appId:Z,apiKey:ae}=R,be={method:"GET",headers:Mu(ae)},ze=at.replace("{app-id}",Z),yt=yield fetch(ze,be);if(200!==yt.status&&304!==yt.status){let Yt="";try{const en=yield yt.json();null!==(k=en.error)&&void 0!==k&&k.message&&(Yt=en.error.message)}catch{}throw oo.create("config-fetch-failed",{httpStatus:yt.status,responseMessage:Yt})}return yt.json()})).apply(this,arguments)}function Ul(R){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,X.Z)(function*(R,k=$n,Z){const{appId:ae,apiKey:be,measurementId:ze}=R.options;if(!ae)throw oo.create("no-app-id");if(!be){if(ze)return{measurementId:ze,appId:ae};throw oo.create("no-api-key")}const yt=k.getThrottleMetadata(ae)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Yt=new Hl;return setTimeout((0,X.Z)(function*(){Yt.abort()}),void 0!==Z?Z:6e4),Bs({appId:ae,apiKey:be,measurementId:ze},yt,Yt,k)})).apply(this,arguments)}function Bs(R,k,Z){return ac.apply(this,arguments)}function ac(){return(ac=(0,X.Z)(function*(R,{throttleEndTimeMillis:k,backoffCount:Z},ae,be=$n){var ze;const{appId:yt,measurementId:Yt}=R;try{yield Bl(ae,k)}catch(en){if(Yt)return vr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yt} provided in the "measurementId" field in the local Firebase config. [${en?.message}]`),{appId:yt,measurementId:Yt};throw en}try{const en=yield _i(R);return be.deleteThrottleMetadata(yt),en}catch(en){const hn=en;if(!jl(hn)){if(be.deleteThrottleMetadata(yt),Yt)return vr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Yt} provided in the "measurementId" field in the local Firebase config. [${hn?.message}]`),{appId:yt,measurementId:Yt};throw en}const Pn=503===Number(null===(ze=hn?.customData)||void 0===ze?void 0:ze.httpStatus)?(0,Ce.$s)(Z,be.intervalMillis,30):(0,Ce.$s)(Z,be.intervalMillis),sr={throttleEndTimeMillis:Date.now()+Pn,backoffCount:Z+1};return be.setThrottleMetadata(yt,sr),vr.debug(`Calling attemptFetch again in ${Pn} millis`),Bs(R,sr,ae,be)}})).apply(this,arguments)}function Bl(R,k){return new Promise((Z,ae)=>{const be=Math.max(k-Date.now(),0),ze=setTimeout(Z,be);R.addEventListener(()=>{clearTimeout(ze),ae(oo.create("fetch-throttle",{throttleEndTimeMillis:k}))})})}function jl(R){if(!(R instanceof Ce.ZR&&R.customData))return!1;const k=Number(R.customData.httpStatus);return 429===k||500===k||503===k||504===k}class Hl{constructor(){this.listeners=[]}addEventListener(k){this.listeners.push(k)}abort(){this.listeners.forEach(k=>k())}}let lc,ce;function ao(){return(ao=(0,X.Z)(function*(R,k,Z,ae,be){if(be&&be.global)R("event",Z,ae);else{const ze=yield k;R("event",Z,Object.assign(Object.assign({},ae),{send_to:ze}))}})).apply(this,arguments)}function ve(R){ce=R}function ut(R){lc=R}function qt(){return Kn.apply(this,arguments)}function Kn(){return(Kn=(0,X.Z)(function*(){if(!(0,Ce.hl)())return vr.warn(oo.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Ce.eu)()}catch(R){return vr.warn(oo.create("indexeddb-unavailable",{errorInfo:R?.toString()}).message),!1}return!0})).apply(this,arguments)}function Er(){return(Er=(0,X.Z)(function*(R,k,Z,ae,be,ze,yt){var Yt;const en=Ul(R);en.then(zr=>{Z[zr.measurementId]=zr.appId,R.options.measurementId&&zr.measurementId!==R.options.measurementId&&vr.warn(`The measurement ID in the local Firebase config (${R.options.measurementId}) does not match the measurement ID fetched from the server (${zr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(zr=>vr.error(zr)),k.push(en);const hn=qt().then(zr=>{if(zr)return ae.getId()}),[Pn,sr]=yield Promise.all([en,hn]);Oc(ze)||Su(ze,Pn.measurementId),ce&&(be("consent","default",ce),ve(void 0)),be("js",new Date);const Bo=null!==(Yt=yt?.config)&&void 0!==Yt?Yt:{};return Bo.origin="firebase",Bo.update=!0,null!=sr&&(Bo[Sn]=sr),be("config",Pn.measurementId,Bo),lc&&(be("set",lc),ut(void 0)),Pn.measurementId})).apply(this,arguments)}class Lr{constructor(k){this.app=k}_delete(){return delete Ti[this.app.options.appId],Promise.resolve()}}let Ti={},ea=[];const Lo={};let _l,hi,rs="dataLayer",lu=!1;function cd(R,k,Z){!function $d(){const R=[];if((0,Ce.ru)()&&R.push("This is a browser extension environment."),(0,Ce.zI)()||R.push("Cookies are not available."),R.length>0){const k=R.map((ae,be)=>`(${be+1}) ${ae}`).join(" "),Z=oo.create("invalid-analytics-context",{errorInfo:k});vr.warn(Z.message)}}();const ae=R.options.appId;if(!ae)throw oo.create("no-app-id");if(!R.options.apiKey){if(!R.options.measurementId)throw oo.create("no-api-key");vr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${R.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Ti[ae])throw oo.create("already-exists",{id:ae});if(!lu){!function ri(R){let k=[];Array.isArray(window[R])?k=window[R]:window[R]=k}(rs);const{wrappedGtag:ze,gtagCore:yt}=function Vl(R,k,Z,ae,be){let ze=function(...yt){window[ae].push(arguments)};return window[be]&&"function"==typeof window[be]&&(ze=window[be]),window[be]=function ir(R,k,Z,ae){function ze(){return(ze=(0,X.Z)(function*(yt,...Yt){try{if("event"===yt){const[en,hn]=Yt;yield Ll(R,k,Z,en,hn)}else if("config"===yt){const[en,hn]=Yt;yield ld(R,k,Z,ae,en,hn)}else if("consent"===yt){const[en]=Yt;R("consent","update",en)}else if("get"===yt){const[en,hn,Pn]=Yt;R("get",en,hn,Pn)}else if("set"===yt){const[en]=Yt;R("set",en)}else R(yt,...Yt)}catch(en){vr.error(en)}})).apply(this,arguments)}return function be(yt){return ze.apply(this,arguments)}}(ze,R,k,Z),{gtagCore:ze,wrappedGtag:window[be]}}(Ti,ea,Lo,rs,"gtag");hi=ze,_l=yt,lu=!0}return Ti[ae]=function ln(R,k,Z,ae,be,ze,yt){return Er.apply(this,arguments)}(R,ea,Lo,k,_l,rs,Z),new Lr(R)}function Gd(){return Lc.apply(this,arguments)}function Lc(){return(Lc=(0,X.Z)(function*(){if((0,Ce.ru)()||!(0,Ce.zI)()||!(0,Ce.hl)())return!1;try{return yield(0,Ce.eu)()}catch{return!1}})).apply(this,arguments)}const cc="@firebase/analytics";!function Ff(){(0,Re._registerComponent)(new Ne.wA(Ot,(k,{options:Z})=>cd(k.getProvider("app").getImmediate(),k.getProvider("installations-internal").getImmediate(),Z),"PUBLIC")),(0,Re._registerComponent)(new Ne.wA("analytics-internal",function R(k){try{const Z=k.getProvider(Ot).getImmediate();return{logEvent:(ae,be,ze)=>function vl(R,k,Z,ae){R=(0,Ce.m9)(R),function kc(R,k,Z,ae,be){return ao.apply(this,arguments)}(hi,Ti[R.app.options.appId],k,Z,ae).catch(be=>vr.error(be))}(Z,ae,be,ze)}}catch(Z){throw oo.create("interop-component-reg-failed",{reason:Z})}},"PRIVATE")),(0,Re.registerVersion)(cc,"0.10.0"),(0,Re.registerVersion)(cc,"0.10.0","esm2017")}();var Ia=z(4408),Lf=z(7565);const Ss=new class hd extends Lf.v{}(class dc extends Ia.o{constructor(k,Z){super(k,Z),this.scheduler=k,this.work=Z}schedule(k,Z=0){return Z>0?super.schedule(k,Z):(this.delay=Z,this.state=k,this.scheduler.flush(this),this)}execute(k,Z){return Z>0||this.closed?super.execute(k,Z):this._execute(k,Z)}requestAsyncId(k,Z,ae=0){return null!=ae&&ae>0||null==ae&&this.delay>0?super.requestAsyncId(k,Z,ae):(k.flush(this),0)}});var $l=z(4986),Kd=z(8505),Si=z(5363),Pu=z(9468);const is=new w.GfV("7.4.1"),fi="__angularfire_symbol__analyticsIsSupportedValue",cu="__angularfire_symbol__analyticsIsSupported",tl="__angularfire_symbol__remoteConfigIsSupportedValue",Hs="__angularfire_symbol__remoteConfigIsSupported",Oa="__angularfire_symbol__messagingIsSupportedValue",Bc="__angularfire_symbol__messagingIsSupported";function du(R,k,Z){if(k){if(1===k.length)return k[0];const ze=k.filter(yt=>yt.app===Z);if(1===ze.length)return ze[0]}return Z.container.getProvider(R).getImmediate({optional:!0})}globalThis[cu]||(globalThis[cu]=Gd().then(R=>globalThis[fi]=R).catch(()=>globalThis[fi]=!1)),globalThis[Bc]||(globalThis[Bc]=ou().then(R=>globalThis[Oa]=R).catch(()=>globalThis[Oa]=!1)),globalThis[Hs]||(globalThis[Hs]=Vi().then(R=>globalThis[tl]=R).catch(()=>globalThis[tl]=!1));const El=(R,k)=>{const Z=k?[k]:(0,Y.C6)(),ae=[];return Z.forEach(be=>{be.container.getProvider(R).instances.forEach(yt=>{ae.includes(yt)||ae.push(yt)})}),ae};function ka(){}class jc{constructor(k,Z=Ss){this.zone=k,this.delegate=Z}now(){return this.delegate.now()}schedule(k,Z,ae){const be=this.zone;return this.delegate.schedule(function(yt){be.runGuarded(()=>{k.apply(this,[yt])})},Z,ae)}}class Bp{constructor(k){this.zone=k,this.task=null}call(k,Z){const ae=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",ka,{},ka,ka)),Z.pipe((0,Kd.b)({next:ae,complete:ae,error:ae})).subscribe(k).add(ae)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let hu=(()=>{class R{constructor(Z){this.ngZone=Z,this.outsideAngular=Z.runOutsideAngular(()=>new jc(Zone.current)),this.insideAngular=Z.run(()=>new jc(Zone.current,$l.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return R.\u0275fac=function(Z){return new(Z||R)(w.LFG(w.R0b))},R.\u0275prov=w.Yz7({token:R,factory:R.\u0275fac,providedIn:"root"}),R})();function Vo(){const R=globalThis.\u0275AngularFireScheduler;if(!R)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return R}function Fa(R){return R.pipe((0,Si.Q)(Vo().outsideAngular))}function $s(R){return Vo(),function Ou(R){return function(Z){return(Z=Z.lift(new Bp(R.ngZone))).pipe((0,Pu.R)(R.outsideAngular),(0,Si.Q)(R.insideAngular))}}(Vo())(R)}},2090:(rn,ot,z)=>{z.d(ot,{$s:()=>li,BH:()=>Fe,DV:()=>kr,Dv:()=>Rn,G6:()=>se,GJ:()=>Jt,L:()=>Ye,LL:()=>et,Pz:()=>De,Sg:()=>At,UG:()=>Oe,UI:()=>Ut,US:()=>Ne,Wj:()=>lr,Wl:()=>un,Yr:()=>kn,ZB:()=>Se,ZR:()=>gt,aH:()=>it,b$:()=>Kt,cI:()=>En,dS:()=>Oi,eu:()=>Me,g5:()=>X,gK:()=>wn,gQ:()=>Qe,h$:()=>Ge,hl:()=>Ae,hu:()=>Y,jU:()=>Mt,lb:()=>Qn,m9:()=>ti,ne:()=>ge,p$:()=>pe,pd:()=>wi,r3:()=>cr,ru:()=>Dt,tV:()=>ye,uI:()=>We,ug:()=>Vn,vZ:()=>wr,w1:()=>Dr,w9:()=>Xn,xO:()=>us,xb:()=>Fn,z$:()=>Et,zI:()=>Ke,zd:()=>xi});const Y=function(_e,fe){if(!_e)throw X(fe)},X=function(_e){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+_e)},Re=function(_e){const fe=[];let ke=0;for(let rt=0;rt<_e.length;rt++){let $e=_e.charCodeAt(rt);$e<128?fe[ke++]=$e:$e<2048?(fe[ke++]=$e>>6|192,fe[ke++]=63&$e|128):55296==(64512&$e)&&rt+1<_e.length&&56320==(64512&_e.charCodeAt(rt+1))?($e=65536+((1023&$e)<<10)+(1023&_e.charCodeAt(++rt)),fe[ke++]=$e>>18|240,fe[ke++]=$e>>12&63|128,fe[ke++]=$e>>6&63|128,fe[ke++]=63&$e|128):(fe[ke++]=$e>>12|224,fe[ke++]=$e>>6&63|128,fe[ke++]=63&$e|128)}return fe},Ne={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(_e,fe){if(!Array.isArray(_e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const ke=fe?this.byteToCharMapWebSafe_:this.byteToCharMap_,rt=[];for(let $e=0;$e<_e.length;$e+=3){const Gt=_e[$e],vn=$e+1<_e.length,Ln=vn?_e[$e+1]:0,mr=$e+2<_e.length,de=mr?_e[$e+2]:0;let Be=(15&Ln)<<2|de>>6,Ct=63&de;mr||(Ct=64,vn||(Be=64)),rt.push(ke[Gt>>2],ke[(3&Gt)<<4|Ln>>4],ke[Be],ke[Ct])}return rt.join("")},encodeString(_e,fe){return this.HAS_NATIVE_SUPPORT&&!fe?btoa(_e):this.encodeByteArray(Re(_e),fe)},decodeString(_e,fe){return this.HAS_NATIVE_SUPPORT&&!fe?atob(_e):function(_e){const fe=[];let ke=0,rt=0;for(;ke<_e.length;){const $e=_e[ke++];if($e<128)fe[rt++]=String.fromCharCode($e);else if($e>191&&$e<224){const Gt=_e[ke++];fe[rt++]=String.fromCharCode((31&$e)<<6|63&Gt)}else if($e>239&&$e<365){const mr=((7&$e)<<18|(63&_e[ke++])<<12|(63&_e[ke++])<<6|63&_e[ke++])-65536;fe[rt++]=String.fromCharCode(55296+(mr>>10)),fe[rt++]=String.fromCharCode(56320+(1023&mr))}else{const Gt=_e[ke++],vn=_e[ke++];fe[rt++]=String.fromCharCode((15&$e)<<12|(63&Gt)<<6|63&vn)}}return fe.join("")}(this.decodeStringToByteArray(_e,fe))},decodeStringToByteArray(_e,fe){this.init_();const ke=fe?this.charToByteMapWebSafe_:this.charToByteMap_,rt=[];for(let $e=0;$e<_e.length;){const Gt=ke[_e.charAt($e++)],Ln=$e<_e.length?ke[_e.charAt($e)]:0;++$e;const de=$e<_e.length?ke[_e.charAt($e)]:64;++$e;const oe=$e<_e.length?ke[_e.charAt($e)]:64;if(++$e,null==Gt||null==Ln||null==de||null==oe)throw new Ve;rt.push(Gt<<2|Ln>>4),64!==de&&(rt.push(Ln<<4&240|de>>2),64!==oe&&rt.push(de<<6&192|oe))}return rt},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let _e=0;_e<this.ENCODED_VALS.length;_e++)this.byteToCharMap_[_e]=this.ENCODED_VALS.charAt(_e),this.charToByteMap_[this.byteToCharMap_[_e]]=_e,this.byteToCharMapWebSafe_[_e]=this.ENCODED_VALS_WEBSAFE.charAt(_e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[_e]]=_e,_e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(_e)]=_e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(_e)]=_e)}}};class Ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ge=function(_e){const fe=Re(_e);return Ne.encodeByteArray(fe,!0)},Ye=function(_e){return Ge(_e).replace(/\./g,"")},ye=function(_e){try{return Ne.decodeString(_e,!0)}catch(fe){console.error("base64Decode failed: ",fe)}return null};function pe(_e){return Se(void 0,_e)}function Se(_e,fe){if(!(fe instanceof Object))return fe;switch(fe.constructor){case Date:return new Date(fe.getTime());case Object:void 0===_e&&(_e={});break;case Array:_e=[];break;default:return fe}for(const ke in fe)!fe.hasOwnProperty(ke)||!Rt(ke)||(_e[ke]=Se(_e[ke],fe[ke]));return _e}function Rt(_e){return"__proto__"!==_e}const dt=()=>{try{return function vt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const _e=process.env.__FIREBASE_DEFAULTS__;return _e?JSON.parse(_e):void 0})()||(()=>{if(typeof document>"u")return;let _e;try{_e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const fe=_e&&ye(_e[1]);return fe&&JSON.parse(fe)})()}catch(_e){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${_e}`)}},it=()=>{var _e;return null===(_e=dt())||void 0===_e?void 0:_e.config},De=_e=>{var fe;return null===(fe=dt())||void 0===fe?void 0:fe[`_${_e}`]};class Fe{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((fe,ke)=>{this.resolve=fe,this.reject=ke})}wrapCallback(fe){return(ke,rt)=>{ke?this.reject(ke):this.resolve(rt),"function"==typeof fe&&(this.promise.catch(()=>{}),1===fe.length?fe(ke):fe(ke,rt))}}}function At(_e,fe){if(_e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const rt=fe||"demo-project",$e=_e.iat||0,Gt=_e.sub||_e.user_id;if(!Gt)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const vn=Object.assign({iss:`https://securetoken.google.com/${rt}`,aud:rt,iat:$e,exp:$e+3600,auth_time:$e,sub:Gt,user_id:Gt,firebase:{sign_in_provider:"custom",identities:{}}},_e);return[Ye(JSON.stringify({alg:"none",type:"JWT"})),Ye(JSON.stringify(vn)),""].join(".")}function Et(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function We(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Et())}function Oe(){var _e;const fe=null===(_e=dt())||void 0===_e?void 0:_e.forceEnvironment;if("node"===fe)return!0;if("browser"===fe)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Mt(){return"object"==typeof self&&self.self===self}function Dt(){const _e="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof _e&&void 0!==_e.id}function Kt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Dr(){const _e=Et();return _e.indexOf("MSIE ")>=0||_e.indexOf("Trident/")>=0}function kn(){return!1}function se(){return!Oe()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ae(){try{return"object"==typeof indexedDB}catch{return!1}}function Me(){return new Promise((_e,fe)=>{try{let ke=!0;const rt="validate-browser-context-for-indexeddb-analytics-module",$e=self.indexedDB.open(rt);$e.onsuccess=()=>{$e.result.close(),ke||self.indexedDB.deleteDatabase(rt),_e(!0)},$e.onupgradeneeded=()=>{ke=!1},$e.onerror=()=>{var Gt;fe((null===(Gt=$e.error)||void 0===Gt?void 0:Gt.message)||"")}}catch(ke){fe(ke)}})}function Ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class gt extends Error{constructor(fe,ke,rt){super(ke),this.code=fe,this.customData=rt,this.name="FirebaseError",Object.setPrototypeOf(this,gt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,et.prototype.create)}}class et{constructor(fe,ke,rt){this.service=fe,this.serviceName=ke,this.errors=rt}create(fe,...ke){const rt=ke[0]||{},$e=`${this.service}/${fe}`,Gt=this.errors[fe],vn=Gt?function zt(_e,fe){return _e.replace(dn,(ke,rt)=>{const $e=fe[rt];return null!=$e?String($e):`<${rt}?>`})}(Gt,rt):"Error";return new gt($e,`${this.serviceName}: ${vn} (${$e}).`,rt)}}const dn=/\{\$([^}]+)}/g;function En(_e){return JSON.parse(_e)}function un(_e){return JSON.stringify(_e)}const Mn=function(_e){let fe={},ke={},rt={},$e="";try{const Gt=_e.split(".");fe=En(ye(Gt[0])||""),ke=En(ye(Gt[1])||""),$e=Gt[2],rt=ke.d||{},delete ke.d}catch{}return{header:fe,claims:ke,data:rt,signature:$e}},Xn=function(_e){const ke=Mn(_e).claims;return!!ke&&"object"==typeof ke&&ke.hasOwnProperty("iat")},Jt=function(_e){const fe=Mn(_e).claims;return"object"==typeof fe&&!0===fe.admin};function cr(_e,fe){return Object.prototype.hasOwnProperty.call(_e,fe)}function kr(_e,fe){if(Object.prototype.hasOwnProperty.call(_e,fe))return _e[fe]}function Fn(_e){for(const fe in _e)if(Object.prototype.hasOwnProperty.call(_e,fe))return!1;return!0}function Ut(_e,fe,ke){const rt={};for(const $e in _e)Object.prototype.hasOwnProperty.call(_e,$e)&&(rt[$e]=fe.call(ke,_e[$e],$e,_e));return rt}function wr(_e,fe){if(_e===fe)return!0;const ke=Object.keys(_e),rt=Object.keys(fe);for(const $e of ke){if(!rt.includes($e))return!1;const Gt=_e[$e],vn=fe[$e];if(An(Gt)&&An(vn)){if(!wr(Gt,vn))return!1}else if(Gt!==vn)return!1}for(const $e of rt)if(!ke.includes($e))return!1;return!0}function An(_e){return null!==_e&&"object"==typeof _e}function us(_e){const fe=[];for(const[ke,rt]of Object.entries(_e))Array.isArray(rt)?rt.forEach($e=>{fe.push(encodeURIComponent(ke)+"="+encodeURIComponent($e))}):fe.push(encodeURIComponent(ke)+"="+encodeURIComponent(rt));return fe.length?"&"+fe.join("&"):""}function xi(_e){const fe={};return _e.replace(/^\?/,"").split("&").forEach(rt=>{if(rt){const[$e,Gt]=rt.split("=");fe[decodeURIComponent($e)]=decodeURIComponent(Gt)}}),fe}function wi(_e){const fe=_e.indexOf("?");if(!fe)return"";const ke=_e.indexOf("#",fe);return _e.substring(fe,ke>0?ke:void 0)}class Qe{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let fe=1;fe<this.blockSize;++fe)this.pad_[fe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(fe,ke){ke||(ke=0);const rt=this.W_;if("string"==typeof fe)for(let oe=0;oe<16;oe++)rt[oe]=fe.charCodeAt(ke)<<24|fe.charCodeAt(ke+1)<<16|fe.charCodeAt(ke+2)<<8|fe.charCodeAt(ke+3),ke+=4;else for(let oe=0;oe<16;oe++)rt[oe]=fe[ke]<<24|fe[ke+1]<<16|fe[ke+2]<<8|fe[ke+3],ke+=4;for(let oe=16;oe<80;oe++){const Be=rt[oe-3]^rt[oe-8]^rt[oe-14]^rt[oe-16];rt[oe]=4294967295&(Be<<1|Be>>>31)}let de,ue,$e=this.chain_[0],Gt=this.chain_[1],vn=this.chain_[2],Ln=this.chain_[3],mr=this.chain_[4];for(let oe=0;oe<80;oe++){oe<40?oe<20?(de=Ln^Gt&(vn^Ln),ue=1518500249):(de=Gt^vn^Ln,ue=1859775393):oe<60?(de=Gt&vn|Ln&(Gt|vn),ue=2400959708):(de=Gt^vn^Ln,ue=3395469782);const Be=($e<<5|$e>>>27)+de+mr+ue+rt[oe]&4294967295;mr=Ln,Ln=vn,vn=4294967295&(Gt<<30|Gt>>>2),Gt=$e,$e=Be}this.chain_[0]=this.chain_[0]+$e&4294967295,this.chain_[1]=this.chain_[1]+Gt&4294967295,this.chain_[2]=this.chain_[2]+vn&4294967295,this.chain_[3]=this.chain_[3]+Ln&4294967295,this.chain_[4]=this.chain_[4]+mr&4294967295}update(fe,ke){if(null==fe)return;void 0===ke&&(ke=fe.length);const rt=ke-this.blockSize;let $e=0;const Gt=this.buf_;let vn=this.inbuf_;for(;$e<ke;){if(0===vn)for(;$e<=rt;)this.compress_(fe,$e),$e+=this.blockSize;if("string"==typeof fe){for(;$e<ke;)if(Gt[vn]=fe.charCodeAt($e),++vn,++$e,vn===this.blockSize){this.compress_(Gt),vn=0;break}}else for(;$e<ke;)if(Gt[vn]=fe[$e],++vn,++$e,vn===this.blockSize){this.compress_(Gt),vn=0;break}}this.inbuf_=vn,this.total_+=ke}digest(){const fe=[];let ke=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let $e=this.blockSize-1;$e>=56;$e--)this.buf_[$e]=255&ke,ke/=256;this.compress_(this.buf_);let rt=0;for(let $e=0;$e<5;$e++)for(let Gt=24;Gt>=0;Gt-=8)fe[rt]=this.chain_[$e]>>Gt&255,++rt;return fe}}function ge(_e,fe){const ke=new he(_e,fe);return ke.subscribe.bind(ke)}class he{constructor(fe,ke){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=ke,this.task.then(()=>{fe(this)}).catch(rt=>{this.error(rt)})}next(fe){this.forEachObserver(ke=>{ke.next(fe)})}error(fe){this.forEachObserver(ke=>{ke.error(fe)}),this.close(fe)}complete(){this.forEachObserver(fe=>{fe.complete()}),this.close()}subscribe(fe,ke,rt){let $e;if(void 0===fe&&void 0===ke&&void 0===rt)throw new Error("Missing Observer.");$e=function mt(_e,fe){if("object"!=typeof _e||null===_e)return!1;for(const ke of fe)if(ke in _e&&"function"==typeof _e[ke])return!0;return!1}(fe,["next","error","complete"])?fe:{next:fe,error:ke,complete:rt},void 0===$e.next&&($e.next=cn),void 0===$e.error&&($e.error=cn),void 0===$e.complete&&($e.complete=cn);const Gt=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?$e.error(this.finalError):$e.complete()}catch{}}),this.observers.push($e),Gt}unsubscribeOne(fe){void 0===this.observers||void 0===this.observers[fe]||(delete this.observers[fe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(fe){if(!this.finalized)for(let ke=0;ke<this.observers.length;ke++)this.sendOne(ke,fe)}sendOne(fe,ke){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[fe])try{ke(this.observers[fe])}catch(rt){typeof console<"u"&&console.error&&console.error(rt)}})}close(fe){this.finalized||(this.finalized=!0,void 0!==fe&&(this.finalError=fe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cn(){}const Rn=function(_e,fe,ke,rt){let $e;if(rt<fe?$e="at least "+fe:rt>ke&&($e=0===ke?"none":"no more than "+ke),$e)throw new Error(_e+" failed: Was called with "+rt+(1===rt?" argument.":" arguments.")+" Expects "+$e+".")};function wn(_e,fe){return`${_e} failed: ${fe} argument `}function lr(_e,fe,ke,rt){if((!rt||ke)&&"function"!=typeof ke)throw new Error(wn(_e,fe)+"must be a valid function.")}function Qn(_e,fe,ke,rt){if((!rt||ke)&&("object"!=typeof ke||null===ke))throw new Error(wn(_e,fe)+"must be a valid context object.")}const Oi=function(_e){const fe=[];let ke=0;for(let rt=0;rt<_e.length;rt++){let $e=_e.charCodeAt(rt);if($e>=55296&&$e<=56319){const Gt=$e-55296;rt++,Y(rt<_e.length,"Surrogate pair missing trail surrogate."),$e=65536+(Gt<<10)+(_e.charCodeAt(rt)-56320)}$e<128?fe[ke++]=$e:$e<2048?(fe[ke++]=$e>>6|192,fe[ke++]=63&$e|128):$e<65536?(fe[ke++]=$e>>12|224,fe[ke++]=$e>>6&63|128,fe[ke++]=63&$e|128):(fe[ke++]=$e>>18|240,fe[ke++]=$e>>12&63|128,fe[ke++]=$e>>6&63|128,fe[ke++]=63&$e|128)}return fe},Vn=function(_e){let fe=0;for(let ke=0;ke<_e.length;ke++){const rt=_e.charCodeAt(ke);rt<128?fe++:rt<2048?fe+=2:rt>=55296&&rt<=56319?(fe+=4,ke++):fe+=3}return fe};function li(_e,fe=1e3,ke=2){const rt=fe*Math.pow(ke,_e),$e=Math.round(.5*rt*(Math.random()-.5)*2);return Math.min(144e5,rt+$e)}function ti(_e){return _e&&_e._delegate?_e._delegate:_e}},9751:(rn,ot,z)=>{z.d(ot,{y:()=>Ge});var w=z(930),Y=z(727),X=z(8822),Re=z(9635),Ce=z(2416),Ne=z(576),Ve=z(2806);let Ge=(()=>{class Se{constructor(vt){vt&&(this._subscribe=vt)}lift(vt){const ct=new Se;return ct.source=this,ct.operator=vt,ct}subscribe(vt,ct,$t){const pt=function pe(Se){return Se&&Se instanceof w.Lv||function ye(Se){return Se&&(0,Ne.m)(Se.next)&&(0,Ne.m)(Se.error)&&(0,Ne.m)(Se.complete)}(Se)&&(0,Y.Nn)(Se)}(vt)?vt:new w.Hp(vt,ct,$t);return(0,Ve.x)(()=>{const{operator:dt,source:Ue}=this;pt.add(dt?dt.call(pt,Ue):Ue?this._subscribe(pt):this._trySubscribe(pt))}),pt}_trySubscribe(vt){try{return this._subscribe(vt)}catch(ct){vt.error(ct)}}forEach(vt,ct){return new(ct=Ye(ct))(($t,pt)=>{const dt=new w.Hp({next:Ue=>{try{vt(Ue)}catch(an){pt(an),dt.unsubscribe()}},error:pt,complete:$t});this.subscribe(dt)})}_subscribe(vt){var ct;return null===(ct=this.source)||void 0===ct?void 0:ct.subscribe(vt)}[X.L](){return this}pipe(...vt){return(0,Re.U)(vt)(this)}toPromise(vt){return new(vt=Ye(vt))((ct,$t)=>{let pt;this.subscribe(dt=>pt=dt,dt=>$t(dt),()=>ct(pt))})}}return Se.create=Rt=>new Se(Rt),Se})();function Ye(Se){var Rt;return null!==(Rt=Se??Ce.v.Promise)&&void 0!==Rt?Rt:Promise}},7579:(rn,ot,z)=>{z.d(ot,{x:()=>Ve});var w=z(9751),Y=z(727);const Re=(0,z(3888).d)(Ye=>function(){Ye(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ce=z(8737),Ne=z(2806);let Ve=(()=>{class Ye extends w.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(pe){const Se=new Ge(this,this);return Se.operator=pe,Se}_throwIfClosed(){if(this.closed)throw new Re}next(pe){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Se of this.currentObservers)Se.next(pe)}})}error(pe){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=pe;const{observers:Se}=this;for(;Se.length;)Se.shift().error(pe)}})}complete(){(0,Ne.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:pe}=this;for(;pe.length;)pe.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var pe;return(null===(pe=this.observers)||void 0===pe?void 0:pe.length)>0}_trySubscribe(pe){return this._throwIfClosed(),super._trySubscribe(pe)}_subscribe(pe){return this._throwIfClosed(),this._checkFinalizedStatuses(pe),this._innerSubscribe(pe)}_innerSubscribe(pe){const{hasError:Se,isStopped:Rt,observers:vt}=this;return Se||Rt?Y.Lc:(this.currentObservers=null,vt.push(pe),new Y.w0(()=>{this.currentObservers=null,(0,Ce.P)(vt,pe)}))}_checkFinalizedStatuses(pe){const{hasError:Se,thrownError:Rt,isStopped:vt}=this;Se?pe.error(Rt):vt&&pe.complete()}asObservable(){const pe=new w.y;return pe.source=this,pe}}return Ye.create=(ye,pe)=>new Ge(ye,pe),Ye})();class Ge extends Ve{constructor(ye,pe){super(),this.destination=ye,this.source=pe}next(ye){var pe,Se;null===(Se=null===(pe=this.destination)||void 0===pe?void 0:pe.next)||void 0===Se||Se.call(pe,ye)}error(ye){var pe,Se;null===(Se=null===(pe=this.destination)||void 0===pe?void 0:pe.error)||void 0===Se||Se.call(pe,ye)}complete(){var ye,pe;null===(pe=null===(ye=this.destination)||void 0===ye?void 0:ye.complete)||void 0===pe||pe.call(ye)}_subscribe(ye){var pe,Se;return null!==(Se=null===(pe=this.source)||void 0===pe?void 0:pe.subscribe(ye))&&void 0!==Se?Se:Y.Lc}}},930:(rn,ot,z)=>{z.d(ot,{Hp:()=>$t,Lv:()=>Se});var w=z(576),Y=z(727),X=z(2416),Re=z(7849),Ce=z(5032);const Ne=Ye("C",void 0,void 0);function Ye(it,De,Fe){return{kind:it,value:De,error:Fe}}var ye=z(3410),pe=z(2806);class Se extends Y.w0{constructor(De){super(),this.isStopped=!1,De?(this.destination=De,(0,Y.Nn)(De)&&De.add(this)):this.destination=an}static create(De,Fe,At){return new $t(De,Fe,At)}next(De){this.isStopped?Ue(function Ge(it){return Ye("N",it,void 0)}(De),this):this._next(De)}error(De){this.isStopped?Ue(function Ve(it){return Ye("E",void 0,it)}(De),this):(this.isStopped=!0,this._error(De))}complete(){this.isStopped?Ue(Ne,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(De){this.destination.next(De)}_error(De){try{this.destination.error(De)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Rt=Function.prototype.bind;function vt(it,De){return Rt.call(it,De)}class ct{constructor(De){this.partialObserver=De}next(De){const{partialObserver:Fe}=this;if(Fe.next)try{Fe.next(De)}catch(At){pt(At)}}error(De){const{partialObserver:Fe}=this;if(Fe.error)try{Fe.error(De)}catch(At){pt(At)}else pt(De)}complete(){const{partialObserver:De}=this;if(De.complete)try{De.complete()}catch(Fe){pt(Fe)}}}class $t extends Se{constructor(De,Fe,At){let Et;if(super(),(0,w.m)(De)||!De)Et={next:De??void 0,error:Fe??void 0,complete:At??void 0};else{let We;this&&X.v.useDeprecatedNextContext?(We=Object.create(De),We.unsubscribe=()=>this.unsubscribe(),Et={next:De.next&&vt(De.next,We),error:De.error&&vt(De.error,We),complete:De.complete&&vt(De.complete,We)}):Et=De}this.destination=new ct(Et)}}function pt(it){X.v.useDeprecatedSynchronousErrorHandling?(0,pe.O)(it):(0,Re.h)(it)}function Ue(it,De){const{onStoppedNotification:Fe}=X.v;Fe&&ye.z.setTimeout(()=>Fe(it,De))}const an={closed:!0,next:Ce.Z,error:function dt(it){throw it},complete:Ce.Z}},727:(rn,ot,z)=>{z.d(ot,{Lc:()=>Ne,w0:()=>Ce,Nn:()=>Ve});var w=z(576);const X=(0,z(3888).d)(Ye=>function(pe){Ye(this),this.message=pe?`${pe.length} errors occurred during unsubscription:\n${pe.map((Se,Rt)=>`${Rt+1}) ${Se.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=pe});var Re=z(8737);class Ce{constructor(ye){this.initialTeardown=ye,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ye;if(!this.closed){this.closed=!0;const{_parentage:pe}=this;if(pe)if(this._parentage=null,Array.isArray(pe))for(const vt of pe)vt.remove(this);else pe.remove(this);const{initialTeardown:Se}=this;if((0,w.m)(Se))try{Se()}catch(vt){ye=vt instanceof X?vt.errors:[vt]}const{_finalizers:Rt}=this;if(Rt){this._finalizers=null;for(const vt of Rt)try{Ge(vt)}catch(ct){ye=ye??[],ct instanceof X?ye=[...ye,...ct.errors]:ye.push(ct)}}if(ye)throw new X(ye)}}add(ye){var pe;if(ye&&ye!==this)if(this.closed)Ge(ye);else{if(ye instanceof Ce){if(ye.closed||ye._hasParent(this))return;ye._addParent(this)}(this._finalizers=null!==(pe=this._finalizers)&&void 0!==pe?pe:[]).push(ye)}}_hasParent(ye){const{_parentage:pe}=this;return pe===ye||Array.isArray(pe)&&pe.includes(ye)}_addParent(ye){const{_parentage:pe}=this;this._parentage=Array.isArray(pe)?(pe.push(ye),pe):pe?[pe,ye]:ye}_removeParent(ye){const{_parentage:pe}=this;pe===ye?this._parentage=null:Array.isArray(pe)&&(0,Re.P)(pe,ye)}remove(ye){const{_finalizers:pe}=this;pe&&(0,Re.P)(pe,ye),ye instanceof Ce&&ye._removeParent(this)}}Ce.EMPTY=(()=>{const Ye=new Ce;return Ye.closed=!0,Ye})();const Ne=Ce.EMPTY;function Ve(Ye){return Ye instanceof Ce||Ye&&"closed"in Ye&&(0,w.m)(Ye.remove)&&(0,w.m)(Ye.add)&&(0,w.m)(Ye.unsubscribe)}function Ge(Ye){(0,w.m)(Ye)?Ye():Ye.unsubscribe()}},2416:(rn,ot,z)=>{z.d(ot,{v:()=>w});const w={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(rn,ot,z)=>{z.d(ot,{z:()=>Ce});var w=z(8189),X=z(7669),Re=z(8996);function Ce(...Ne){return function Y(){return(0,w.J)(1)}()((0,Re.D)(Ne,(0,X.yG)(Ne)))}},515:(rn,ot,z)=>{z.d(ot,{E:()=>Y});const Y=new(z(9751).y)(Ce=>Ce.complete())},8996:(rn,ot,z)=>{z.d(ot,{D:()=>De});var w=z(8421),Y=z(5363),X=z(9468),Ne=z(9751),Ge=z(2202),Ye=z(576),ye=z(9672);function Se(Fe,At){if(!Fe)throw new Error("Iterable cannot be null");return new Ne.y(Et=>{(0,ye.f)(Et,At,()=>{const We=Fe[Symbol.asyncIterator]();(0,ye.f)(Et,At,()=>{We.next().then(Oe=>{Oe.done?Et.complete():Et.next(Oe.value)})},0,!0)})})}var Rt=z(3670),vt=z(8239),ct=z(1144),$t=z(6495),pt=z(2206),dt=z(4532),Ue=z(3260);function De(Fe,At){return At?function it(Fe,At){if(null!=Fe){if((0,Rt.c)(Fe))return function Re(Fe,At){return(0,w.Xf)(Fe).pipe((0,X.R)(At),(0,Y.Q)(At))}(Fe,At);if((0,ct.z)(Fe))return function Ve(Fe,At){return new Ne.y(Et=>{let We=0;return At.schedule(function(){We===Fe.length?Et.complete():(Et.next(Fe[We++]),Et.closed||this.schedule())})})}(Fe,At);if((0,vt.t)(Fe))return function Ce(Fe,At){return(0,w.Xf)(Fe).pipe((0,X.R)(At),(0,Y.Q)(At))}(Fe,At);if((0,pt.D)(Fe))return Se(Fe,At);if((0,$t.T)(Fe))return function pe(Fe,At){return new Ne.y(Et=>{let We;return(0,ye.f)(Et,At,()=>{We=Fe[Ge.h](),(0,ye.f)(Et,At,()=>{let Oe,Mt;try{({value:Oe,done:Mt}=We.next())}catch(Dt){return void Et.error(Dt)}Mt?Et.complete():Et.next(Oe)},0,!0)}),()=>(0,Ye.m)(We?.return)&&We.return()})}(Fe,At);if((0,Ue.L)(Fe))return function an(Fe,At){return Se((0,Ue.Q)(Fe),At)}(Fe,At)}throw(0,dt.z)(Fe)}(Fe,At):(0,w.Xf)(Fe)}},8421:(rn,ot,z)=>{z.d(ot,{Xf:()=>Rt});var w=z(7582),Y=z(1144),X=z(8239),Re=z(9751),Ce=z(3670),Ne=z(2206),Ve=z(4532),Ge=z(6495),Ye=z(3260),ye=z(576),pe=z(7849),Se=z(8822);function Rt(it){if(it instanceof Re.y)return it;if(null!=it){if((0,Ce.c)(it))return function vt(it){return new Re.y(De=>{const Fe=it[Se.L]();if((0,ye.m)(Fe.subscribe))return Fe.subscribe(De);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(it);if((0,Y.z)(it))return function ct(it){return new Re.y(De=>{for(let Fe=0;Fe<it.length&&!De.closed;Fe++)De.next(it[Fe]);De.complete()})}(it);if((0,X.t)(it))return function $t(it){return new Re.y(De=>{it.then(Fe=>{De.closed||(De.next(Fe),De.complete())},Fe=>De.error(Fe)).then(null,pe.h)})}(it);if((0,Ne.D)(it))return dt(it);if((0,Ge.T)(it))return function pt(it){return new Re.y(De=>{for(const Fe of it)if(De.next(Fe),De.closed)return;De.complete()})}(it);if((0,Ye.L)(it))return function Ue(it){return dt((0,Ye.Q)(it))}(it)}throw(0,Ve.z)(it)}function dt(it){return new Re.y(De=>{(function an(it,De){var Fe,At,Et,We;return(0,w.mG)(this,void 0,void 0,function*(){try{for(Fe=(0,w.KL)(it);!(At=yield Fe.next()).done;)if(De.next(At.value),De.closed)return}catch(Oe){Et={error:Oe}}finally{try{At&&!At.done&&(We=Fe.return)&&(yield We.call(Fe))}finally{if(Et)throw Et.error}}De.complete()})})(it,De).catch(Fe=>De.error(Fe))})}},6451:(rn,ot,z)=>{z.d(ot,{T:()=>Ne});var w=z(8189),Y=z(8421),X=z(515),Re=z(7669),Ce=z(8996);function Ne(...Ve){const Ge=(0,Re.yG)(Ve),Ye=(0,Re._6)(Ve,1/0),ye=Ve;return ye.length?1===ye.length?(0,Y.Xf)(ye[0]):(0,w.J)(Ye)((0,Ce.D)(ye,Ge)):X.E}},9646:(rn,ot,z)=>{z.d(ot,{of:()=>X});var w=z(7669),Y=z(8996);function X(...Re){const Ce=(0,w.yG)(Re);return(0,Y.D)(Re,Ce)}},5403:(rn,ot,z)=>{z.d(ot,{x:()=>Y});var w=z(930);function Y(Re,Ce,Ne,Ve,Ge){return new X(Re,Ce,Ne,Ve,Ge)}class X extends w.Lv{constructor(Ce,Ne,Ve,Ge,Ye,ye){super(Ce),this.onFinalize=Ye,this.shouldUnsubscribe=ye,this._next=Ne?function(pe){try{Ne(pe)}catch(Se){Ce.error(Se)}}:super._next,this._error=Ge?function(pe){try{Ge(pe)}catch(Se){Ce.error(Se)}finally{this.unsubscribe()}}:super._error,this._complete=Ve?function(){try{Ve()}catch(pe){Ce.error(pe)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var Ce;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Ne}=this;super.unsubscribe(),!Ne&&(null===(Ce=this.onFinalize)||void 0===Ce||Ce.call(this))}}}},4351:(rn,ot,z)=>{z.d(ot,{b:()=>X});var w=z(5577),Y=z(576);function X(Re,Ce){return(0,Y.m)(Ce)?(0,w.z)(Re,Ce,1):(0,w.z)(Re,1)}},6590:(rn,ot,z)=>{z.d(ot,{d:()=>X});var w=z(4482),Y=z(5403);function X(Re){return(0,w.e)((Ce,Ne)=>{let Ve=!1;Ce.subscribe((0,Y.x)(Ne,Ge=>{Ve=!0,Ne.next(Ge)},()=>{Ve||Ne.next(Re),Ne.complete()}))})}},1884:(rn,ot,z)=>{z.d(ot,{x:()=>Re});var w=z(4671),Y=z(4482),X=z(5403);function Re(Ne,Ve=w.y){return Ne=Ne??Ce,(0,Y.e)((Ge,Ye)=>{let ye,pe=!0;Ge.subscribe((0,X.x)(Ye,Se=>{const Rt=Ve(Se);(pe||!Ne(ye,Rt))&&(pe=!1,ye=Rt,Ye.next(Se))}))})}function Ce(Ne,Ve){return Ne===Ve}},9300:(rn,ot,z)=>{z.d(ot,{h:()=>X});var w=z(4482),Y=z(5403);function X(Re,Ce){return(0,w.e)((Ne,Ve)=>{let Ge=0;Ne.subscribe((0,Y.x)(Ve,Ye=>Re.call(Ce,Ye,Ge++)&&Ve.next(Ye)))})}},590:(rn,ot,z)=>{z.d(ot,{P:()=>Ve});var w=z(6805),Y=z(9300),X=z(5698),Re=z(6590),Ce=z(8068),Ne=z(4671);function Ve(Ge,Ye){const ye=arguments.length>=2;return pe=>pe.pipe(Ge?(0,Y.h)((Se,Rt)=>Ge(Se,Rt,pe)):Ne.y,(0,X.q)(1),ye?(0,Re.d)(Ye):(0,Ce.T)(()=>new w.K))}},4004:(rn,ot,z)=>{z.d(ot,{U:()=>X});var w=z(4482),Y=z(5403);function X(Re,Ce){return(0,w.e)((Ne,Ve)=>{let Ge=0;Ne.subscribe((0,Y.x)(Ve,Ye=>{Ve.next(Re.call(Ce,Ye,Ge++))}))})}},8189:(rn,ot,z)=>{z.d(ot,{J:()=>X});var w=z(5577),Y=z(4671);function X(Re=1/0){return(0,w.z)(Y.y,Re)}},5577:(rn,ot,z)=>{z.d(ot,{z:()=>Ge});var w=z(4004),Y=z(8421),X=z(4482),Re=z(9672),Ce=z(5403),Ve=z(576);function Ge(Ye,ye,pe=1/0){return(0,Ve.m)(ye)?Ge((Se,Rt)=>(0,w.U)((vt,ct)=>ye(Se,vt,Rt,ct))((0,Y.Xf)(Ye(Se,Rt))),pe):("number"==typeof ye&&(pe=ye),(0,X.e)((Se,Rt)=>function Ne(Ye,ye,pe,Se,Rt,vt,ct,$t){const pt=[];let dt=0,Ue=0,an=!1;const it=()=>{an&&!pt.length&&!dt&&ye.complete()},De=At=>dt<Se?Fe(At):pt.push(At),Fe=At=>{vt&&ye.next(At),dt++;let Et=!1;(0,Y.Xf)(pe(At,Ue++)).subscribe((0,Ce.x)(ye,We=>{Rt?.(We),vt?De(We):ye.next(We)},()=>{Et=!0},void 0,()=>{if(Et)try{for(dt--;pt.length&&dt<Se;){const We=pt.shift();ct?(0,Re.f)(ye,ct,()=>Fe(We)):Fe(We)}it()}catch(We){ye.error(We)}}))};return Ye.subscribe((0,Ce.x)(ye,De,()=>{an=!0,it()})),()=>{$t?.()}}(Se,Rt,Ye,pe)))}},5363:(rn,ot,z)=>{z.d(ot,{Q:()=>Re});var w=z(9672),Y=z(4482),X=z(5403);function Re(Ce,Ne=0){return(0,Y.e)((Ve,Ge)=>{Ve.subscribe((0,X.x)(Ge,Ye=>(0,w.f)(Ge,Ce,()=>Ge.next(Ye),Ne),()=>(0,w.f)(Ge,Ce,()=>Ge.complete(),Ne),Ye=>(0,w.f)(Ge,Ce,()=>Ge.error(Ye),Ne)))})}},5026:(rn,ot,z)=>{z.d(ot,{R:()=>Re});var w=z(4482),Y=z(5403);function X(Ce,Ne,Ve,Ge,Ye){return(ye,pe)=>{let Se=Ve,Rt=Ne,vt=0;ye.subscribe((0,Y.x)(pe,ct=>{const $t=vt++;Rt=Se?Ce(Rt,ct,$t):(Se=!0,ct),Ge&&pe.next(Rt)},Ye&&(()=>{Se&&pe.next(Rt),pe.complete()})))}}function Re(Ce,Ne){return(0,w.e)(X(Ce,Ne,arguments.length>=2,!0))}},3099:(rn,ot,z)=>{z.d(ot,{B:()=>Ce});var w=z(8421),Y=z(7579),X=z(930),Re=z(4482);function Ce(Ve={}){const{connector:Ge=(()=>new Y.x),resetOnError:Ye=!0,resetOnComplete:ye=!0,resetOnRefCountZero:pe=!0}=Ve;return Se=>{let Rt,vt,ct,$t=0,pt=!1,dt=!1;const Ue=()=>{vt?.unsubscribe(),vt=void 0},an=()=>{Ue(),Rt=ct=void 0,pt=dt=!1},it=()=>{const De=Rt;an(),De?.unsubscribe()};return(0,Re.e)((De,Fe)=>{$t++,!dt&&!pt&&Ue();const At=ct=ct??Ge();Fe.add(()=>{$t--,0===$t&&!dt&&!pt&&(vt=Ne(it,pe))}),At.subscribe(Fe),!Rt&&$t>0&&(Rt=new X.Hp({next:Et=>At.next(Et),error:Et=>{dt=!0,Ue(),vt=Ne(an,Ye,Et),At.error(Et)},complete:()=>{pt=!0,Ue(),vt=Ne(an,ye),At.complete()}}),(0,w.Xf)(De).subscribe(Rt))})(Se)}}function Ne(Ve,Ge,...Ye){if(!0===Ge)return void Ve();if(!1===Ge)return;const ye=new X.Hp({next:()=>{ye.unsubscribe(),Ve()}});return Ge(...Ye).subscribe(ye)}},8675:(rn,ot,z)=>{z.d(ot,{O:()=>Re});var w=z(7272),Y=z(7669),X=z(4482);function Re(...Ce){const Ne=(0,Y.yG)(Ce);return(0,X.e)((Ve,Ge)=>{(Ne?(0,w.z)(Ce,Ve,Ne):(0,w.z)(Ce,Ve)).subscribe(Ge)})}},9468:(rn,ot,z)=>{z.d(ot,{R:()=>Y});var w=z(4482);function Y(X,Re=0){return(0,w.e)((Ce,Ne)=>{Ne.add(X.schedule(()=>Ce.subscribe(Ne),Re))})}},3900:(rn,ot,z)=>{z.d(ot,{w:()=>Re});var w=z(8421),Y=z(4482),X=z(5403);function Re(Ce,Ne){return(0,Y.e)((Ve,Ge)=>{let Ye=null,ye=0,pe=!1;const Se=()=>pe&&!Ye&&Ge.complete();Ve.subscribe((0,X.x)(Ge,Rt=>{Ye?.unsubscribe();let vt=0;const ct=ye++;(0,w.Xf)(Ce(Rt,ct)).subscribe(Ye=(0,X.x)(Ge,$t=>Ge.next(Ne?Ne(Rt,$t,ct,vt++):$t),()=>{Ye=null,Se()}))},()=>{pe=!0,Se()}))})}},5698:(rn,ot,z)=>{z.d(ot,{q:()=>Re});var w=z(515),Y=z(4482),X=z(5403);function Re(Ce){return Ce<=0?()=>w.E:(0,Y.e)((Ne,Ve)=>{let Ge=0;Ne.subscribe((0,X.x)(Ve,Ye=>{++Ge<=Ce&&(Ve.next(Ye),Ce<=Ge&&Ve.complete())}))})}},8505:(rn,ot,z)=>{z.d(ot,{b:()=>Ce});var w=z(576),Y=z(4482),X=z(5403),Re=z(4671);function Ce(Ne,Ve,Ge){const Ye=(0,w.m)(Ne)||Ve||Ge?{next:Ne,error:Ve,complete:Ge}:Ne;return Ye?(0,Y.e)((ye,pe)=>{var Se;null===(Se=Ye.subscribe)||void 0===Se||Se.call(Ye);let Rt=!0;ye.subscribe((0,X.x)(pe,vt=>{var ct;null===(ct=Ye.next)||void 0===ct||ct.call(Ye,vt),pe.next(vt)},()=>{var vt;Rt=!1,null===(vt=Ye.complete)||void 0===vt||vt.call(Ye),pe.complete()},vt=>{var ct;Rt=!1,null===(ct=Ye.error)||void 0===ct||ct.call(Ye,vt),pe.error(vt)},()=>{var vt,ct;Rt&&(null===(vt=Ye.unsubscribe)||void 0===vt||vt.call(Ye)),null===(ct=Ye.finalize)||void 0===ct||ct.call(Ye)}))}):Re.y}},8068:(rn,ot,z)=>{z.d(ot,{T:()=>Re});var w=z(6805),Y=z(4482),X=z(5403);function Re(Ne=Ce){return(0,Y.e)((Ve,Ge)=>{let Ye=!1;Ve.subscribe((0,X.x)(Ge,ye=>{Ye=!0,Ge.next(ye)},()=>Ye?Ge.complete():Ge.error(Ne())))})}function Ce(){return new w.K}},4408:(rn,ot,z)=>{z.d(ot,{o:()=>Ce});var w=z(727);class Y extends w.w0{constructor(Ve,Ge){super()}schedule(Ve,Ge=0){return this}}const X={setInterval(Ne,Ve,...Ge){const{delegate:Ye}=X;return Ye?.setInterval?Ye.setInterval(Ne,Ve,...Ge):setInterval(Ne,Ve,...Ge)},clearInterval(Ne){const{delegate:Ve}=X;return(Ve?.clearInterval||clearInterval)(Ne)},delegate:void 0};var Re=z(8737);class Ce extends Y{constructor(Ve,Ge){super(Ve,Ge),this.scheduler=Ve,this.work=Ge,this.pending=!1}schedule(Ve,Ge=0){var Ye;if(this.closed)return this;this.state=Ve;const ye=this.id,pe=this.scheduler;return null!=ye&&(this.id=this.recycleAsyncId(pe,ye,Ge)),this.pending=!0,this.delay=Ge,this.id=null!==(Ye=this.id)&&void 0!==Ye?Ye:this.requestAsyncId(pe,this.id,Ge),this}requestAsyncId(Ve,Ge,Ye=0){return X.setInterval(Ve.flush.bind(Ve,this),Ye)}recycleAsyncId(Ve,Ge,Ye=0){if(null!=Ye&&this.delay===Ye&&!1===this.pending)return Ge;null!=Ge&&X.clearInterval(Ge)}execute(Ve,Ge){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Ye=this._execute(Ve,Ge);if(Ye)return Ye;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ve,Ge){let ye,Ye=!1;try{this.work(Ve)}catch(pe){Ye=!0,ye=pe||new Error("Scheduled action threw falsy error")}if(Ye)return this.unsubscribe(),ye}unsubscribe(){if(!this.closed){const{id:Ve,scheduler:Ge}=this,{actions:Ye}=Ge;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Re.P)(Ye,this),null!=Ve&&(this.id=this.recycleAsyncId(Ge,Ve,null)),this.delay=null,super.unsubscribe()}}}},7565:(rn,ot,z)=>{z.d(ot,{v:()=>X});var w=z(6063);class Y{constructor(Ce,Ne=Y.now){this.schedulerActionCtor=Ce,this.now=Ne}schedule(Ce,Ne=0,Ve){return new this.schedulerActionCtor(this,Ce).schedule(Ve,Ne)}}Y.now=w.l.now;class X extends Y{constructor(Ce,Ne=Y.now){super(Ce,Ne),this.actions=[],this._active=!1}flush(Ce){const{actions:Ne}=this;if(this._active)return void Ne.push(Ce);let Ve;this._active=!0;do{if(Ve=Ce.execute(Ce.state,Ce.delay))break}while(Ce=Ne.shift());if(this._active=!1,Ve){for(;Ce=Ne.shift();)Ce.unsubscribe();throw Ve}}}},4986:(rn,ot,z)=>{z.d(ot,{z:()=>X});var w=z(4408);const X=new(z(7565).v)(w.o)},6063:(rn,ot,z)=>{z.d(ot,{l:()=>w});const w={now:()=>(w.delegate||Date).now(),delegate:void 0}},3410:(rn,ot,z)=>{z.d(ot,{z:()=>w});const w={setTimeout(Y,X,...Re){const{delegate:Ce}=w;return Ce?.setTimeout?Ce.setTimeout(Y,X,...Re):setTimeout(Y,X,...Re)},clearTimeout(Y){const{delegate:X}=w;return(X?.clearTimeout||clearTimeout)(Y)},delegate:void 0}},2202:(rn,ot,z)=>{z.d(ot,{h:()=>Y});const Y=function w(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rn,ot,z)=>{z.d(ot,{L:()=>w});const w="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(rn,ot,z)=>{z.d(ot,{K:()=>Y});const Y=(0,z(3888).d)(X=>function(){X(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(rn,ot,z)=>{z.d(ot,{_6:()=>Ne,jO:()=>Re,yG:()=>Ce});var w=z(576);function X(Ve){return Ve[Ve.length-1]}function Re(Ve){return(0,w.m)(X(Ve))?Ve.pop():void 0}function Ce(Ve){return function Y(Ve){return Ve&&(0,w.m)(Ve.schedule)}(X(Ve))?Ve.pop():void 0}function Ne(Ve,Ge){return"number"==typeof X(Ve)?Ve.pop():Ge}},4742:(rn,ot,z)=>{z.d(ot,{D:()=>Ce});const{isArray:w}=Array,{getPrototypeOf:Y,prototype:X,keys:Re}=Object;function Ce(Ve){if(1===Ve.length){const Ge=Ve[0];if(w(Ge))return{args:Ge,keys:null};if(function Ne(Ve){return Ve&&"object"==typeof Ve&&Y(Ve)===X}(Ge)){const Ye=Re(Ge);return{args:Ye.map(ye=>Ge[ye]),keys:Ye}}}return{args:Ve,keys:null}}},8737:(rn,ot,z)=>{function w(Y,X){if(Y){const Re=Y.indexOf(X);0<=Re&&Y.splice(Re,1)}}z.d(ot,{P:()=>w})},3888:(rn,ot,z)=>{function w(Y){const Re=Y(Ce=>{Error.call(Ce),Ce.stack=(new Error).stack});return Re.prototype=Object.create(Error.prototype),Re.prototype.constructor=Re,Re}z.d(ot,{d:()=>w})},1810:(rn,ot,z)=>{function w(Y,X){return Y.reduce((Re,Ce,Ne)=>(Re[Ce]=X[Ne],Re),{})}z.d(ot,{n:()=>w})},2806:(rn,ot,z)=>{z.d(ot,{O:()=>Re,x:()=>X});var w=z(2416);let Y=null;function X(Ce){if(w.v.useDeprecatedSynchronousErrorHandling){const Ne=!Y;if(Ne&&(Y={errorThrown:!1,error:null}),Ce(),Ne){const{errorThrown:Ve,error:Ge}=Y;if(Y=null,Ve)throw Ge}}else Ce()}function Re(Ce){w.v.useDeprecatedSynchronousErrorHandling&&Y&&(Y.errorThrown=!0,Y.error=Ce)}},9672:(rn,ot,z)=>{function w(Y,X,Re,Ce=0,Ne=!1){const Ve=X.schedule(function(){Re(),Ne?Y.add(this.schedule(null,Ce)):this.unsubscribe()},Ce);if(Y.add(Ve),!Ne)return Ve}z.d(ot,{f:()=>w})},4671:(rn,ot,z)=>{function w(Y){return Y}z.d(ot,{y:()=>w})},1144:(rn,ot,z)=>{z.d(ot,{z:()=>w});const w=Y=>Y&&"number"==typeof Y.length&&"function"!=typeof Y},2206:(rn,ot,z)=>{z.d(ot,{D:()=>Y});var w=z(576);function Y(X){return Symbol.asyncIterator&&(0,w.m)(X?.[Symbol.asyncIterator])}},576:(rn,ot,z)=>{function w(Y){return"function"==typeof Y}z.d(ot,{m:()=>w})},3670:(rn,ot,z)=>{z.d(ot,{c:()=>X});var w=z(8822),Y=z(576);function X(Re){return(0,Y.m)(Re[w.L])}},6495:(rn,ot,z)=>{z.d(ot,{T:()=>X});var w=z(2202),Y=z(576);function X(Re){return(0,Y.m)(Re?.[w.h])}},8239:(rn,ot,z)=>{z.d(ot,{t:()=>Y});var w=z(576);function Y(X){return(0,w.m)(X?.then)}},3260:(rn,ot,z)=>{z.d(ot,{L:()=>Re,Q:()=>X});var w=z(7582),Y=z(576);function X(Ce){return(0,w.FC)(this,arguments,function*(){const Ve=Ce.getReader();try{for(;;){const{value:Ge,done:Ye}=yield(0,w.qq)(Ve.read());if(Ye)return yield(0,w.qq)(void 0);yield yield(0,w.qq)(Ge)}}finally{Ve.releaseLock()}})}function Re(Ce){return(0,Y.m)(Ce?.getReader)}},4482:(rn,ot,z)=>{z.d(ot,{A:()=>Y,e:()=>X});var w=z(576);function Y(Re){return(0,w.m)(Re?.lift)}function X(Re){return Ce=>{if(Y(Ce))return Ce.lift(function(Ne){try{return Re(Ne,this)}catch(Ve){this.error(Ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(rn,ot,z)=>{z.d(ot,{Z:()=>Re});var w=z(4004);const{isArray:Y}=Array;function Re(Ce){return(0,w.U)(Ne=>function X(Ce,Ne){return Y(Ne)?Ce(...Ne):Ce(Ne)}(Ce,Ne))}},5032:(rn,ot,z)=>{function w(){}z.d(ot,{Z:()=>w})},9635:(rn,ot,z)=>{z.d(ot,{U:()=>X,z:()=>Y});var w=z(4671);function Y(...Re){return X(Re)}function X(Re){return 0===Re.length?w.y:1===Re.length?Re[0]:function(Ne){return Re.reduce((Ve,Ge)=>Ge(Ve),Ne)}}},7849:(rn,ot,z)=>{z.d(ot,{h:()=>X});var w=z(2416),Y=z(3410);function X(Re){Y.z.setTimeout(()=>{const{onUnhandledError:Ce}=w.v;if(!Ce)throw Re;Ce(Re)})}},4532:(rn,ot,z)=>{function w(Y){return new TypeError(`You provided ${null!==Y&&"object"==typeof Y?"an invalid object":`'${Y}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}z.d(ot,{z:()=>w})},7340:(rn,ot,z)=>{z.d(ot,{LC:()=>Y,SB:()=>Ye,X$:()=>Re,ZE:()=>Ue,ZN:()=>dt,_7:()=>vt,_j:()=>w,eR:()=>pe,jt:()=>Ce,k1:()=>an,l3:()=>X,oB:()=>Ge,oQ:()=>Se,vP:()=>Ve});class w{}class Y{}const X="*";function Re(it,De){return{type:7,name:it,definitions:De,options:{}}}function Ce(it,De=null){return{type:4,styles:De,timings:it}}function Ve(it,De=null){return{type:2,steps:it,options:De}}function Ge(it){return{type:6,styles:it,offset:null}}function Ye(it,De,Fe){return{type:0,name:it,styles:De,options:Fe}}function pe(it,De,Fe=null){return{type:1,expr:it,animation:De,options:Fe}}function Se(it,De=null){return{type:8,animation:it,options:De}}function vt(it,De=null){return{type:10,animation:it,options:De}}function pt(it){Promise.resolve().then(it)}class dt{constructor(De=0,Fe=0){this._onDoneFns=[],this._onStartFns=[],this._onDestroyFns=[],this._originalOnDoneFns=[],this._originalOnStartFns=[],this._started=!1,this._destroyed=!1,this._finished=!1,this._position=0,this.parentPlayer=null,this.totalTime=De+Fe}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(De=>De()),this._onDoneFns=[])}onStart(De){this._originalOnStartFns.push(De),this._onStartFns.push(De)}onDone(De){this._originalOnDoneFns.push(De),this._onDoneFns.push(De)}onDestroy(De){this._onDestroyFns.push(De)}hasStarted(){return this._started}init(){}play(){this.hasStarted()||(this._onStart(),this.triggerMicrotask()),this._started=!0}triggerMicrotask(){pt(()=>this._onFinish())}_onStart(){this._onStartFns.forEach(De=>De()),this._onStartFns=[]}pause(){}restart(){}finish(){this._onFinish()}destroy(){this._destroyed||(this._destroyed=!0,this.hasStarted()||this._onStart(),this.finish(),this._onDestroyFns.forEach(De=>De()),this._onDestroyFns=[])}reset(){this._started=!1,this._finished=!1,this._onStartFns=this._originalOnStartFns,this._onDoneFns=this._originalOnDoneFns}setPosition(De){this._position=this.totalTime?De*this.totalTime:1}getPosition(){return this.totalTime?this._position/this.totalTime:1}triggerCallback(De){const Fe="start"==De?this._onStartFns:this._onDoneFns;Fe.forEach(At=>At()),Fe.length=0}}class Ue{constructor(De){this._onDoneFns=[],this._onStartFns=[],this._finished=!1,this._started=!1,this._destroyed=!1,this._onDestroyFns=[],this.parentPlayer=null,this.totalTime=0,this.players=De;let Fe=0,At=0,Et=0;const We=this.players.length;0==We?pt(()=>this._onFinish()):this.players.forEach(Oe=>{Oe.onDone(()=>{++Fe==We&&this._onFinish()}),Oe.onDestroy(()=>{++At==We&&this._onDestroy()}),Oe.onStart(()=>{++Et==We&&this._onStart()})}),this.totalTime=this.players.reduce((Oe,Mt)=>Math.max(Oe,Mt.totalTime),0)}_onFinish(){this._finished||(this._finished=!0,this._onDoneFns.forEach(De=>De()),this._onDoneFns=[])}init(){this.players.forEach(De=>De.init())}onStart(De){this._onStartFns.push(De)}_onStart(){this.hasStarted()||(this._started=!0,this._onStartFns.forEach(De=>De()),this._onStartFns=[])}onDone(De){this._onDoneFns.push(De)}onDestroy(De){this._onDestroyFns.push(De)}hasStarted(){return this._started}play(){this.parentPlayer||this.init(),this._onStart(),this.players.forEach(De=>De.play())}pause(){this.players.forEach(De=>De.pause())}restart(){this.players.forEach(De=>De.restart())}finish(){this._onFinish(),this.players.forEach(De=>De.finish())}destroy(){this._onDestroy()}_onDestroy(){this._destroyed||(this._destroyed=!0,this._onFinish(),this.players.forEach(De=>De.destroy()),this._onDestroyFns.forEach(De=>De()),this._onDestroyFns=[])}reset(){this.players.forEach(De=>De.reset()),this._destroyed=!1,this._finished=!1,this._started=!1}setPosition(De){const Fe=De*this.totalTime;this.players.forEach(At=>{const Et=At.totalTime?Math.min(1,Fe/At.totalTime):1;At.setPosition(Et)})}getPosition(){const De=this.players.reduce((Fe,At)=>null===Fe||At.totalTime>Fe.totalTime?At:Fe,null);return null!=De?De.getPosition():0}beforeDestroy(){this.players.forEach(De=>{De.beforeDestroy&&De.beforeDestroy()})}triggerCallback(De){const Fe="start"==De?this._onStartFns:this._onDoneFns;Fe.forEach(At=>At()),Fe.length=0}}const an="!"},6895:(rn,ot,z)=>{z.d(ot,{Do:()=>an,ED:()=>Es,EM:()=>Ji,HT:()=>Ce,JF:()=>Ws,K0:()=>Ve,Mx:()=>po,O5:()=>gi,PC:()=>Ls,PM:()=>zs,RF:()=>Qi,S$:()=>pt,V_:()=>ye,Ye:()=>it,b0:()=>Ue,bD:()=>qi,ez:()=>No,mk:()=>xr,n9:()=>xs,q:()=>X,sg:()=>Gr,tP:()=>Mo,uU:()=>Tr,w_:()=>Ne});var w=z(4650);let Y=null;function X(){return Y}function Ce(N){Y||(Y=N)}class Ne{}const Ve=new w.OlP("DocumentToken");let Ge=(()=>{class N{historyGo(U){throw new Error("Not implemented")}}return N.\u0275fac=function(U){return new(U||N)},N.\u0275prov=w.Yz7({token:N,factory:function(){return function Ye(){return(0,w.LFG)(pe)}()},providedIn:"platform"}),N})();const ye=new w.OlP("Location Initialized");let pe=(()=>{class N extends Ge{constructor(U){super(),this._doc=U,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return X().getBaseHref(this._doc)}onPopState(U){const te=X().getGlobalEventTarget(this._doc,"window");return te.addEventListener("popstate",U,!1),()=>te.removeEventListener("popstate",U)}onHashChange(U){const te=X().getGlobalEventTarget(this._doc,"window");return te.addEventListener("hashchange",U,!1),()=>te.removeEventListener("hashchange",U)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(U){this.location.pathname=U}pushState(U,te,Ie){Se()?this._history.pushState(U,te,Ie):this.location.hash=Ie}replaceState(U,te,Ie){Se()?this._history.replaceState(U,te,Ie):this.location.hash=Ie}forward(){this._history.forward()}back(){this._history.back()}historyGo(U=0){this._history.go(U)}getState(){return this._history.state}}return N.\u0275fac=function(U){return new(U||N)(w.LFG(Ve))},N.\u0275prov=w.Yz7({token:N,factory:function(){return function Rt(){return new pe((0,w.LFG)(Ve))}()},providedIn:"platform"}),N})();function Se(){return!!window.history.pushState}function vt(N,K){if(0==N.length)return K;if(0==K.length)return N;let U=0;return N.endsWith("/")&&U++,K.startsWith("/")&&U++,2==U?N+K.substring(1):1==U?N+K:N+"/"+K}function ct(N){const K=N.match(/#|\?|$/),U=K&&K.index||N.length;return N.slice(0,U-("/"===N[U-1]?1:0))+N.slice(U)}function $t(N){return N&&"?"!==N[0]?"?"+N:N}let pt=(()=>{class N{historyGo(U){throw new Error("Not implemented")}}return N.\u0275fac=function(U){return new(U||N)},N.\u0275prov=w.Yz7({token:N,factory:function(){return(0,w.f3M)(Ue)},providedIn:"root"}),N})();const dt=new w.OlP("appBaseHref");let Ue=(()=>{class N extends pt{constructor(U,te){super(),this._platformLocation=U,this._removeListenerFns=[],this._baseHref=te??this._platformLocation.getBaseHrefFromDOM()??(0,w.f3M)(Ve).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}prepareExternalUrl(U){return vt(this._baseHref,U)}path(U=!1){const te=this._platformLocation.pathname+$t(this._platformLocation.search),Ie=this._platformLocation.hash;return Ie&&U?`${te}${Ie}`:te}pushState(U,te,Ie,ft){const bt=this.prepareExternalUrl(Ie+$t(ft));this._platformLocation.pushState(U,te,bt)}replaceState(U,te,Ie,ft){const bt=this.prepareExternalUrl(Ie+$t(ft));this._platformLocation.replaceState(U,te,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return N.\u0275fac=function(U){return new(U||N)(w.LFG(Ge),w.LFG(dt,8))},N.\u0275prov=w.Yz7({token:N,factory:N.\u0275fac,providedIn:"root"}),N})(),an=(()=>{class N extends pt{constructor(U,te){super(),this._platformLocation=U,this._baseHref="",this._removeListenerFns=[],null!=te&&(this._baseHref=te)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(U){this._removeListenerFns.push(this._platformLocation.onPopState(U),this._platformLocation.onHashChange(U))}getBaseHref(){return this._baseHref}path(U=!1){let te=this._platformLocation.hash;return null==te&&(te="#"),te.length>0?te.substring(1):te}prepareExternalUrl(U){const te=vt(this._baseHref,U);return te.length>0?"#"+te:te}pushState(U,te,Ie,ft){let bt=this.prepareExternalUrl(Ie+$t(ft));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.pushState(U,te,bt)}replaceState(U,te,Ie,ft){let bt=this.prepareExternalUrl(Ie+$t(ft));0==bt.length&&(bt=this._platformLocation.pathname),this._platformLocation.replaceState(U,te,bt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(U=0){this._platformLocation.historyGo?.(U)}}return N.\u0275fac=function(U){return new(U||N)(w.LFG(Ge),w.LFG(dt,8))},N.\u0275prov=w.Yz7({token:N,factory:N.\u0275fac}),N})(),it=(()=>{class N{constructor(U){this._subject=new w.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=U;const te=this._locationStrategy.getBaseHref();this._baseHref=ct(At(te)),this._locationStrategy.onPopState(Ie=>{this._subject.emit({url:this.path(!0),pop:!0,state:Ie.state,type:Ie.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(U=!1){return this.normalize(this._locationStrategy.path(U))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(U,te=""){return this.path()==this.normalize(U+$t(te))}normalize(U){return N.stripTrailingSlash(function Fe(N,K){return N&&K.startsWith(N)?K.substring(N.length):K}(this._baseHref,At(U)))}prepareExternalUrl(U){return U&&"/"!==U[0]&&(U="/"+U),this._locationStrategy.prepareExternalUrl(U)}go(U,te="",Ie=null){this._locationStrategy.pushState(Ie,"",U,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+$t(te)),Ie)}replaceState(U,te="",Ie=null){this._locationStrategy.replaceState(Ie,"",U,te),this._notifyUrlChangeListeners(this.prepareExternalUrl(U+$t(te)),Ie)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(U=0){this._locationStrategy.historyGo?.(U)}onUrlChange(U){return this._urlChangeListeners.push(U),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(te=>{this._notifyUrlChangeListeners(te.url,te.state)})),()=>{const te=this._urlChangeListeners.indexOf(U);this._urlChangeListeners.splice(te,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(U="",te){this._urlChangeListeners.forEach(Ie=>Ie(U,te))}subscribe(U,te,Ie){return this._subject.subscribe({next:U,error:te,complete:Ie})}}return N.normalizeQueryParams=$t,N.joinWithSlash=vt,N.stripTrailingSlash=ct,N.\u0275fac=function(U){return new(U||N)(w.LFG(pt))},N.\u0275prov=w.Yz7({token:N,factory:function(){return function De(){return new it((0,w.LFG)(pt))}()},providedIn:"root"}),N})();function At(N){return N.replace(/\/index.html$/,"")}var Mt=(()=>((Mt=Mt||{})[Mt.Format=0]="Format",Mt[Mt.Standalone=1]="Standalone",Mt))(),Dt=(()=>((Dt=Dt||{})[Dt.Narrow=0]="Narrow",Dt[Dt.Abbreviated=1]="Abbreviated",Dt[Dt.Wide=2]="Wide",Dt[Dt.Short=3]="Short",Dt))(),Kt=(()=>((Kt=Kt||{})[Kt.Short=0]="Short",Kt[Kt.Medium=1]="Medium",Kt[Kt.Long=2]="Long",Kt[Kt.Full=3]="Full",Kt))(),Ht=(()=>((Ht=Ht||{})[Ht.Decimal=0]="Decimal",Ht[Ht.Group=1]="Group",Ht[Ht.List=2]="List",Ht[Ht.PercentSign=3]="PercentSign",Ht[Ht.PlusSign=4]="PlusSign",Ht[Ht.MinusSign=5]="MinusSign",Ht[Ht.Exponential=6]="Exponential",Ht[Ht.SuperscriptingExponent=7]="SuperscriptingExponent",Ht[Ht.PerMille=8]="PerMille",Ht[Ht.Infinity=9]="Infinity",Ht[Ht.NaN=10]="NaN",Ht[Ht.TimeSeparator=11]="TimeSeparator",Ht[Ht.CurrencyDecimal=12]="CurrencyDecimal",Ht[Ht.CurrencyGroup=13]="CurrencyGroup",Ht))();function gt(N,K){return Ut((0,w.cg1)(N)[w.wAp.DateFormat],K)}function et(N,K){return Ut((0,w.cg1)(N)[w.wAp.TimeFormat],K)}function zt(N,K){return Ut((0,w.cg1)(N)[w.wAp.DateTimeFormat],K)}function dn(N,K){const U=(0,w.cg1)(N),te=U[w.wAp.NumberSymbols][K];if(typeof te>"u"){if(K===Ht.CurrencyDecimal)return U[w.wAp.NumberSymbols][Ht.Decimal];if(K===Ht.CurrencyGroup)return U[w.wAp.NumberSymbols][Ht.Group]}return te}function Jt(N){if(!N[w.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${N[w.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function Ut(N,K){for(let U=K;U>-1;U--)if(typeof N[U]<"u")return N[U];throw new Error("Locale data API: locale data undefined")}function wr(N){const[K,U]=N.split(":");return{hours:+K,minutes:+U}}const xi=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,wi={},Qe=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var ge=(()=>((ge=ge||{})[ge.Short=0]="Short",ge[ge.ShortGMT=1]="ShortGMT",ge[ge.Long=2]="Long",ge[ge.Extended=3]="Extended",ge))(),he=(()=>((he=he||{})[he.FullYear=0]="FullYear",he[he.Month=1]="Month",he[he.Date=2]="Date",he[he.Hours=3]="Hours",he[he.Minutes=4]="Minutes",he[he.Seconds=5]="Seconds",he[he.FractionalSeconds=6]="FractionalSeconds",he[he.Day=7]="Day",he))(),ht=(()=>((ht=ht||{})[ht.DayPeriods=0]="DayPeriods",ht[ht.Days=1]="Days",ht[ht.Months=2]="Months",ht[ht.Eras=3]="Eras",ht))();function mt(N,K,U,te){let Ie=function $e(N){if(vn(N))return N;if("number"==typeof N&&!isNaN(N))return new Date(N);if("string"==typeof N){if(N=N.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(N)){const[Ie,ft=1,bt=1]=N.split("-").map(mn=>+mn);return cn(Ie,ft-1,bt)}const U=parseFloat(N);if(!isNaN(N-U))return new Date(U);let te;if(te=N.match(xi))return function Gt(N){const K=new Date(0);let U=0,te=0;const Ie=N[8]?K.setUTCFullYear:K.setFullYear,ft=N[8]?K.setUTCHours:K.setHours;N[9]&&(U=Number(N[9]+N[10]),te=Number(N[9]+N[11])),Ie.call(K,Number(N[1]),Number(N[2])-1,Number(N[3]));const bt=Number(N[4]||0)-U,mn=Number(N[5]||0)-te,tr=Number(N[6]||0),Yn=Math.floor(1e3*parseFloat("0."+(N[7]||0)));return ft.call(K,bt,mn,tr,Yn),K}(te)}const K=new Date(N);if(!vn(K))throw new Error(`Unable to convert "${N}" into a date`);return K}(N);K=Rn(U,K)||K;let mn,bt=[];for(;K;){if(mn=Qe.exec(K),!mn){bt.push(K);break}{bt=bt.concat(mn.slice(1));const Zn=bt.pop();if(!Zn)break;K=Zn}}let tr=Ie.getTimezoneOffset();te&&(tr=fe(te,tr),Ie=function rt(N,K,U){const te=U?-1:1,Ie=N.getTimezoneOffset();return function ke(N,K){return(N=new Date(N.getTime())).setMinutes(N.getMinutes()+K),N}(N,te*(fe(K,Ie)-Ie))}(Ie,te,!0));let Yn="";return bt.forEach(Zn=>{const zn=function _e(N){if(ti[N])return ti[N];let K;switch(N){case"G":case"GG":case"GGG":K=Vn(ht.Eras,Dt.Abbreviated);break;case"GGGG":K=Vn(ht.Eras,Dt.Wide);break;case"GGGGG":K=Vn(ht.Eras,Dt.Narrow);break;case"y":K=Qn(he.FullYear,1,0,!1,!0);break;case"yy":K=Qn(he.FullYear,2,0,!0,!0);break;case"yyy":K=Qn(he.FullYear,3,0,!1,!0);break;case"yyyy":K=Qn(he.FullYear,4,0,!1,!0);break;case"Y":K=Jr(1);break;case"YY":K=Jr(2,!0);break;case"YYY":K=Jr(3);break;case"YYYY":K=Jr(4);break;case"M":case"L":K=Qn(he.Month,1,1);break;case"MM":case"LL":K=Qn(he.Month,2,1);break;case"MMM":K=Vn(ht.Months,Dt.Abbreviated);break;case"MMMM":K=Vn(ht.Months,Dt.Wide);break;case"MMMMM":K=Vn(ht.Months,Dt.Narrow);break;case"LLL":K=Vn(ht.Months,Dt.Abbreviated,Mt.Standalone);break;case"LLLL":K=Vn(ht.Months,Dt.Wide,Mt.Standalone);break;case"LLLLL":K=Vn(ht.Months,Dt.Narrow,Mt.Standalone);break;case"w":K=jr(1);break;case"ww":K=jr(2);break;case"W":K=jr(1,!0);break;case"d":K=Qn(he.Date,1);break;case"dd":K=Qn(he.Date,2);break;case"c":case"cc":K=Qn(he.Day,1);break;case"ccc":K=Vn(ht.Days,Dt.Abbreviated,Mt.Standalone);break;case"cccc":K=Vn(ht.Days,Dt.Wide,Mt.Standalone);break;case"ccccc":K=Vn(ht.Days,Dt.Narrow,Mt.Standalone);break;case"cccccc":K=Vn(ht.Days,Dt.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":K=Vn(ht.Days,Dt.Abbreviated);break;case"EEEE":K=Vn(ht.Days,Dt.Wide);break;case"EEEEE":K=Vn(ht.Days,Dt.Narrow);break;case"EEEEEE":K=Vn(ht.Days,Dt.Short);break;case"a":case"aa":case"aaa":K=Vn(ht.DayPeriods,Dt.Abbreviated);break;case"aaaa":K=Vn(ht.DayPeriods,Dt.Wide);break;case"aaaaa":K=Vn(ht.DayPeriods,Dt.Narrow);break;case"b":case"bb":case"bbb":K=Vn(ht.DayPeriods,Dt.Abbreviated,Mt.Standalone,!0);break;case"bbbb":K=Vn(ht.DayPeriods,Dt.Wide,Mt.Standalone,!0);break;case"bbbbb":K=Vn(ht.DayPeriods,Dt.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":K=Vn(ht.DayPeriods,Dt.Abbreviated,Mt.Format,!0);break;case"BBBB":K=Vn(ht.DayPeriods,Dt.Wide,Mt.Format,!0);break;case"BBBBB":K=Vn(ht.DayPeriods,Dt.Narrow,Mt.Format,!0);break;case"h":K=Qn(he.Hours,1,-12);break;case"hh":K=Qn(he.Hours,2,-12);break;case"H":K=Qn(he.Hours,1);break;case"HH":K=Qn(he.Hours,2);break;case"m":K=Qn(he.Minutes,1);break;case"mm":K=Qn(he.Minutes,2);break;case"s":K=Qn(he.Seconds,1);break;case"ss":K=Qn(he.Seconds,2);break;case"S":K=Qn(he.FractionalSeconds,1);break;case"SS":K=Qn(he.FractionalSeconds,2);break;case"SSS":K=Qn(he.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":K=Xt(ge.Short);break;case"ZZZZZ":K=Xt(ge.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":K=Xt(ge.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":K=Xt(ge.Long);break;default:return null}return ti[N]=K,K}(Zn);Yn+=zn?zn(Ie,U,tr):"''"===Zn?"'":Zn.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Yn}function cn(N,K,U){const te=new Date(0);return te.setFullYear(N,K,U),te.setHours(0,0,0),te}function Rn(N,K){const U=function si(N){return(0,w.cg1)(N)[w.wAp.LocaleId]}(N);if(wi[U]=wi[U]||{},wi[U][K])return wi[U][K];let te="";switch(K){case"shortDate":te=gt(N,Kt.Short);break;case"mediumDate":te=gt(N,Kt.Medium);break;case"longDate":te=gt(N,Kt.Long);break;case"fullDate":te=gt(N,Kt.Full);break;case"shortTime":te=et(N,Kt.Short);break;case"mediumTime":te=et(N,Kt.Medium);break;case"longTime":te=et(N,Kt.Long);break;case"fullTime":te=et(N,Kt.Full);break;case"short":const Ie=Rn(N,"shortTime"),ft=Rn(N,"shortDate");te=wn(zt(N,Kt.Short),[Ie,ft]);break;case"medium":const bt=Rn(N,"mediumTime"),mn=Rn(N,"mediumDate");te=wn(zt(N,Kt.Medium),[bt,mn]);break;case"long":const tr=Rn(N,"longTime"),Yn=Rn(N,"longDate");te=wn(zt(N,Kt.Long),[tr,Yn]);break;case"full":const Zn=Rn(N,"fullTime"),zn=Rn(N,"fullDate");te=wn(zt(N,Kt.Full),[Zn,zn])}return te&&(wi[U][K]=te),te}function wn(N,K){return K&&(N=N.replace(/\{([^}]+)}/g,function(U,te){return null!=K&&te in K?K[te]:U})),N}function jt(N,K,U="-",te,Ie){let ft="";(N<0||Ie&&N<=0)&&(Ie?N=1-N:(N=-N,ft=U));let bt=String(N);for(;bt.length<K;)bt="0"+bt;return te&&(bt=bt.slice(bt.length-K)),ft+bt}function Qn(N,K,U=0,te=!1,Ie=!1){return function(ft,bt){let mn=function Oi(N,K){switch(N){case he.FullYear:return K.getFullYear();case he.Month:return K.getMonth();case he.Date:return K.getDate();case he.Hours:return K.getHours();case he.Minutes:return K.getMinutes();case he.Seconds:return K.getSeconds();case he.FractionalSeconds:return K.getMilliseconds();case he.Day:return K.getDay();default:throw new Error(`Unknown DateType value "${N}".`)}}(N,ft);if((U>0||mn>-U)&&(mn+=U),N===he.Hours)0===mn&&-12===U&&(mn=12);else if(N===he.FractionalSeconds)return function lr(N,K){return jt(N,3).substring(0,K)}(mn,K);const tr=dn(bt,Ht.MinusSign);return jt(mn,K,tr,te,Ie)}}function Vn(N,K,U=Mt.Format,te=!1){return function(Ie,ft){return function Un(N,K,U,te,Ie,ft){switch(U){case ht.Months:return function Ae(N,K,U){const te=(0,w.cg1)(N),ft=Ut([te[w.wAp.MonthsFormat],te[w.wAp.MonthsStandalone]],K);return Ut(ft,U)}(K,Ie,te)[N.getMonth()];case ht.Days:return function se(N,K,U){const te=(0,w.cg1)(N),ft=Ut([te[w.wAp.DaysFormat],te[w.wAp.DaysStandalone]],K);return Ut(ft,U)}(K,Ie,te)[N.getDay()];case ht.DayPeriods:const bt=N.getHours(),mn=N.getMinutes();if(ft){const Yn=function cr(N){const K=(0,w.cg1)(N);return Jt(K),(K[w.wAp.ExtraData][2]||[]).map(te=>"string"==typeof te?wr(te):[wr(te[0]),wr(te[1])])}(K),Zn=function kr(N,K,U){const te=(0,w.cg1)(N);Jt(te);const ft=Ut([te[w.wAp.ExtraData][0],te[w.wAp.ExtraData][1]],K)||[];return Ut(ft,U)||[]}(K,Ie,te),zn=Yn.findIndex(bi=>{if(Array.isArray(bi)){const[Nr,Wn]=bi,Ni=bt>=Nr.hours&&mn>=Nr.minutes,Bi=bt<Wn.hours||bt===Wn.hours&&mn<Wn.minutes;if(Nr.hours<Wn.hours){if(Ni&&Bi)return!0}else if(Ni||Bi)return!0}else if(bi.hours===bt&&bi.minutes===mn)return!0;return!1});if(-1!==zn)return Zn[zn]}return function kn(N,K,U){const te=(0,w.cg1)(N),ft=Ut([te[w.wAp.DayPeriodsFormat],te[w.wAp.DayPeriodsStandalone]],K);return Ut(ft,U)}(K,Ie,te)[bt<12?0:1];case ht.Eras:return function Me(N,K){return Ut((0,w.cg1)(N)[w.wAp.Eras],K)}(K,te)[N.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${U}`)}}(Ie,ft,N,K,U,te)}}function Xt(N){return function(K,U,te){const Ie=-1*te,ft=dn(U,Ht.MinusSign),bt=Ie>0?Math.floor(Ie/60):Math.ceil(Ie/60);switch(N){case ge.Short:return(Ie>=0?"+":"")+jt(bt,2,ft)+jt(Math.abs(Ie%60),2,ft);case ge.ShortGMT:return"GMT"+(Ie>=0?"+":"")+jt(bt,1,ft);case ge.Long:return"GMT"+(Ie>=0?"+":"")+jt(bt,2,ft)+":"+jt(Math.abs(Ie%60),2,ft);case ge.Extended:return 0===te?"Z":(Ie>=0?"+":"")+jt(bt,2,ft)+":"+jt(Math.abs(Ie%60),2,ft);default:throw new Error(`Unknown zone width "${N}"`)}}}function li(N){return cn(N.getFullYear(),N.getMonth(),N.getDate()+(4-N.getDay()))}function jr(N,K=!1){return function(U,te){let Ie;if(K){const ft=new Date(U.getFullYear(),U.getMonth(),1).getDay()-1,bt=U.getDate();Ie=1+Math.floor((bt+ft)/7)}else{const ft=li(U),bt=function qn(N){const K=cn(N,0,1).getDay();return cn(N,0,1+(K<=4?4:11)-K)}(ft.getFullYear()),mn=ft.getTime()-bt.getTime();Ie=1+Math.round(mn/6048e5)}return jt(Ie,N,dn(te,Ht.MinusSign))}}function Jr(N,K=!1){return function(U,te){return jt(li(U).getFullYear(),N,dn(te,Ht.MinusSign),K)}}const ti={};function fe(N,K){N=N.replace(/:/g,"");const U=Date.parse("Jan 01, 1970 00:00:00 "+N)/6e4;return isNaN(U)?K:U}function vn(N){return N instanceof Date&&!isNaN(N.valueOf())}function po(N,K){K=encodeURIComponent(K);for(const U of N.split(";")){const te=U.indexOf("="),[Ie,ft]=-1==te?[U,""]:[U.slice(0,te),U.slice(te+1)];if(Ie.trim()===K)return decodeURIComponent(ft)}return null}let xr=(()=>{class N{constructor(U,te,Ie,ft){this._iterableDiffers=U,this._keyValueDiffers=te,this._ngEl=Ie,this._renderer=ft,this._iterableDiffer=null,this._keyValueDiffer=null,this._initialClasses=[],this._rawClass=null}set klass(U){this._removeClasses(this._initialClasses),this._initialClasses="string"==typeof U?U.split(/\s+/):[],this._applyClasses(this._initialClasses),this._applyClasses(this._rawClass)}set ngClass(U){this._removeClasses(this._rawClass),this._applyClasses(this._initialClasses),this._iterableDiffer=null,this._keyValueDiffer=null,this._rawClass="string"==typeof U?U.split(/\s+/):U,this._rawClass&&((0,w.sIi)(this._rawClass)?this._iterableDiffer=this._iterableDiffers.find(this._rawClass).create():this._keyValueDiffer=this._keyValueDiffers.find(this._rawClass).create())}ngDoCheck(){if(this._iterableDiffer){const U=this._iterableDiffer.diff(this._rawClass);U&&this._applyIterableChanges(U)}else if(this._keyValueDiffer){const U=this._keyValueDiffer.diff(this._rawClass);U&&this._applyKeyValueChanges(U)}}_applyKeyValueChanges(U){U.forEachAddedItem(te=>this._toggleClass(te.key,te.currentValue)),U.forEachChangedItem(te=>this._toggleClass(te.key,te.currentValue)),U.forEachRemovedItem(te=>{te.previousValue&&this._toggleClass(te.key,!1)})}_applyIterableChanges(U){U.forEachAddedItem(te=>{if("string"!=typeof te.item)throw new Error(`NgClass can only toggle CSS classes expressed as strings, got ${(0,w.AaK)(te.item)}`);this._toggleClass(te.item,!0)}),U.forEachRemovedItem(te=>this._toggleClass(te.item,!1))}_applyClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(te=>this._toggleClass(te,!0)):Object.keys(U).forEach(te=>this._toggleClass(te,!!U[te])))}_removeClasses(U){U&&(Array.isArray(U)||U instanceof Set?U.forEach(te=>this._toggleClass(te,!1)):Object.keys(U).forEach(te=>this._toggleClass(te,!1)))}_toggleClass(U,te){(U=U.trim())&&U.split(/\s+/g).forEach(Ie=>{te?this._renderer.addClass(this._ngEl.nativeElement,Ie):this._renderer.removeClass(this._ngEl.nativeElement,Ie)})}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.ZZ4),w.Y36(w.aQg),w.Y36(w.SBq),w.Y36(w.Qsj))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngClass",""]],inputs:{klass:["class","klass"],ngClass:"ngClass"},standalone:!0}),N})();class Ao{constructor(K,U,te,Ie){this.$implicit=K,this.ngForOf=U,this.index=te,this.count=Ie}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gr=(()=>{class N{constructor(U,te,Ie){this._viewContainer=U,this._template=te,this._differs=Ie,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(U){this._ngForOf=U,this._ngForOfDirty=!0}set ngForTrackBy(U){this._trackByFn=U}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(U){U&&(this._template=U)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const U=this._ngForOf;!this._differ&&U&&(this._differ=this._differs.find(U).create(this.ngForTrackBy))}if(this._differ){const U=this._differ.diff(this._ngForOf);U&&this._applyChanges(U)}}_applyChanges(U){const te=this._viewContainer;U.forEachOperation((Ie,ft,bt)=>{if(null==Ie.previousIndex)te.createEmbeddedView(this._template,new Ao(Ie.item,this._ngForOf,-1,-1),null===bt?void 0:bt);else if(null==bt)te.remove(null===ft?void 0:ft);else if(null!==ft){const mn=te.get(ft);te.move(mn,bt),to(mn,Ie)}});for(let Ie=0,ft=te.length;Ie<ft;Ie++){const mn=te.get(Ie).context;mn.index=Ie,mn.count=ft,mn.ngForOf=this._ngForOf}U.forEachIdentityChange(Ie=>{to(te.get(Ie.currentIndex),Ie)})}static ngTemplateContextGuard(U,te){return!0}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(w.ZZ4))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),N})();function to(N,K){N.context.$implicit=K.item}let gi=(()=>{class N{constructor(U,te){this._viewContainer=U,this._context=new Fs,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=te}set ngIf(U){this._context.$implicit=this._context.ngIf=U,this._updateView()}set ngIfThen(U){Xr("ngIfThen",U),this._thenTemplateRef=U,this._thenViewRef=null,this._updateView()}set ngIfElse(U){Xr("ngIfElse",U),this._elseTemplateRef=U,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(U,te){return!0}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.s_b),w.Y36(w.Rgc))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),N})();class Fs{constructor(){this.$implicit=null,this.ngIf=null}}function Xr(N,K){if(K&&!K.createEmbeddedView)throw new Error(`${N} must be a TemplateRef, but received '${(0,w.AaK)(K)}'.`)}class ui{constructor(K,U){this._viewContainerRef=K,this._templateRef=U,this._created=!1}create(){this._created=!0,this._viewContainerRef.createEmbeddedView(this._templateRef)}destroy(){this._created=!1,this._viewContainerRef.clear()}enforceState(K){K&&!this._created?this.create():!K&&this._created&&this.destroy()}}let Qi=(()=>{class N{constructor(){this._defaultUsed=!1,this._caseCount=0,this._lastCaseCheckIndex=0,this._lastCasesMatched=!1}set ngSwitch(U){this._ngSwitch=U,0===this._caseCount&&this._updateDefaultCases(!0)}_addCase(){return this._caseCount++}_addDefault(U){this._defaultViews||(this._defaultViews=[]),this._defaultViews.push(U)}_matchCase(U){const te=U==this._ngSwitch;return this._lastCasesMatched=this._lastCasesMatched||te,this._lastCaseCheckIndex++,this._lastCaseCheckIndex===this._caseCount&&(this._updateDefaultCases(!this._lastCasesMatched),this._lastCaseCheckIndex=0,this._lastCasesMatched=!1),te}_updateDefaultCases(U){if(this._defaultViews&&U!==this._defaultUsed){this._defaultUsed=U;for(let te=0;te<this._defaultViews.length;te++)this._defaultViews[te].enforceState(U)}}}return N.\u0275fac=function(U){return new(U||N)},N.\u0275dir=w.lG2({type:N,selectors:[["","ngSwitch",""]],inputs:{ngSwitch:"ngSwitch"},standalone:!0}),N})(),xs=(()=>{class N{constructor(U,te,Ie){this.ngSwitch=Ie,Ie._addCase(),this._view=new ui(U,te)}ngDoCheck(){this._view.enforceState(this.ngSwitch._matchCase(this.ngSwitchCase))}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(Qi,9))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngSwitchCase",""]],inputs:{ngSwitchCase:"ngSwitchCase"},standalone:!0}),N})(),Es=(()=>{class N{constructor(U,te,Ie){Ie._addDefault(new ui(U,te))}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.s_b),w.Y36(w.Rgc),w.Y36(Qi,9))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngSwitchDefault",""]],standalone:!0}),N})(),Ls=(()=>{class N{constructor(U,te,Ie){this._ngEl=U,this._differs=te,this._renderer=Ie,this._ngStyle=null,this._differ=null}set ngStyle(U){this._ngStyle=U,!this._differ&&U&&(this._differ=this._differs.find(U).create())}ngDoCheck(){if(this._differ){const U=this._differ.diff(this._ngStyle);U&&this._applyChanges(U)}}_setStyle(U,te){const[Ie,ft]=U.split("."),bt=-1===Ie.indexOf("-")?void 0:w.JOm.DashCase;null!=te?this._renderer.setStyle(this._ngEl.nativeElement,Ie,ft?`${te}${ft}`:te,bt):this._renderer.removeStyle(this._ngEl.nativeElement,Ie,bt)}_applyChanges(U){U.forEachRemovedItem(te=>this._setStyle(te.key,null)),U.forEachAddedItem(te=>this._setStyle(te.key,te.currentValue)),U.forEachChangedItem(te=>this._setStyle(te.key,te.currentValue))}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.SBq),w.Y36(w.aQg),w.Y36(w.Qsj))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngStyle",""]],inputs:{ngStyle:"ngStyle"},standalone:!0}),N})(),Mo=(()=>{class N{constructor(U){this._viewContainerRef=U,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(U){if(U.ngTemplateOutlet||U.ngTemplateOutletInjector){const te=this._viewContainerRef;if(this._viewRef&&te.remove(te.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:Ie,ngTemplateOutletContext:ft,ngTemplateOutletInjector:bt}=this;this._viewRef=te.createEmbeddedView(Ie,ft,bt?{injector:bt}:void 0)}else this._viewRef=null}else this._viewRef&&U.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.s_b))},N.\u0275dir=w.lG2({type:N,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[w.TTD]}),N})();const Ir=new w.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Tr=(()=>{class N{constructor(U,te){this.locale=U,this.defaultTimezone=te}transform(U,te="mediumDate",Ie,ft){if(null==U||""===U||U!=U)return null;try{return mt(U,te,ft||this.locale,Ie??this.defaultTimezone??void 0)}catch(bt){throw function Yr(N,K){return new w.vHH(2100,!1)}()}}}return N.\u0275fac=function(U){return new(U||N)(w.Y36(w.soG,16),w.Y36(Ir,24))},N.\u0275pipe=w.Yjl({name:"date",type:N,pure:!0,standalone:!0}),N})(),No=(()=>{class N{}return N.\u0275fac=function(U){return new(U||N)},N.\u0275mod=w.oAB({type:N}),N.\u0275inj=w.cJS({}),N})();const qi="browser";function zs(N){return"server"===N}let Ji=(()=>{class N{}return N.\u0275prov=(0,w.Yz7)({token:N,providedIn:"root",factory:()=>new _o((0,w.LFG)(Ve),window)}),N})();class _o{constructor(K,U){this.document=K,this.window=U,this.offset=()=>[0,0]}setOffset(K){this.offset=Array.isArray(K)?()=>K:K}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(K){this.supportsScrolling()&&this.window.scrollTo(K[0],K[1])}scrollToAnchor(K){if(!this.supportsScrolling())return;const U=function Vi(N,K){const U=N.getElementById(K)||N.getElementsByName(K)[0];if(U)return U;if("function"==typeof N.createTreeWalker&&N.body&&(N.body.createShadowRoot||N.body.attachShadow)){const te=N.createTreeWalker(N.body,NodeFilter.SHOW_ELEMENT);let Ie=te.currentNode;for(;Ie;){const ft=Ie.shadowRoot;if(ft){const bt=ft.getElementById(K)||ft.querySelector(`[name="${K}"]`);if(bt)return bt}Ie=te.nextNode()}}return null}(this.document,K);U&&(this.scrollToElement(U),U.focus())}setHistoryScrollRestoration(K){if(this.supportScrollRestoration()){const U=this.window.history;U&&U.scrollRestoration&&(U.scrollRestoration=K)}}scrollToElement(K){const U=K.getBoundingClientRect(),te=U.left+this.window.pageXOffset,Ie=U.top+this.window.pageYOffset,ft=this.offset();this.window.scrollTo(te-ft[0],Ie-ft[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const K=Vs(this.window.history)||Vs(Object.getPrototypeOf(this.window.history));return!(!K||!K.writable&&!K.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Vs(N){return Object.getOwnPropertyDescriptor(N,"scrollRestoration")}class Ws{}},529:(rn,ot,z)=>{z.d(ot,{JF:()=>us,WM:()=>ye,eN:()=>si});var w=z(6895),Y=z(4650),X=z(9646),Re=z(9751),Ce=z(4351),Ne=z(9300),Ve=z(4004);class Ge{}class Ye{}class ye{constructor(ge){this.normalizedNames=new Map,this.lazyUpdate=null,ge?this.lazyInit="string"==typeof ge?()=>{this.headers=new Map,ge.split("\n").forEach(he=>{const ht=he.indexOf(":");if(ht>0){const mt=he.slice(0,ht),cn=mt.toLowerCase(),Rn=he.slice(ht+1).trim();this.maybeSetNormalizedName(mt,cn),this.headers.has(cn)?this.headers.get(cn).push(Rn):this.headers.set(cn,[Rn])}})}:()=>{this.headers=new Map,Object.keys(ge).forEach(he=>{let ht=ge[he];const mt=he.toLowerCase();"string"==typeof ht&&(ht=[ht]),ht.length>0&&(this.headers.set(mt,ht),this.maybeSetNormalizedName(he,mt))})}:this.headers=new Map}has(ge){return this.init(),this.headers.has(ge.toLowerCase())}get(ge){this.init();const he=this.headers.get(ge.toLowerCase());return he&&he.length>0?he[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(ge){return this.init(),this.headers.get(ge.toLowerCase())||null}append(ge,he){return this.clone({name:ge,value:he,op:"a"})}set(ge,he){return this.clone({name:ge,value:he,op:"s"})}delete(ge,he){return this.clone({name:ge,value:he,op:"d"})}maybeSetNormalizedName(ge,he){this.normalizedNames.has(he)||this.normalizedNames.set(he,ge)}init(){this.lazyInit&&(this.lazyInit instanceof ye?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(ge=>this.applyUpdate(ge)),this.lazyUpdate=null))}copyFrom(ge){ge.init(),Array.from(ge.headers.keys()).forEach(he=>{this.headers.set(he,ge.headers.get(he)),this.normalizedNames.set(he,ge.normalizedNames.get(he))})}clone(ge){const he=new ye;return he.lazyInit=this.lazyInit&&this.lazyInit instanceof ye?this.lazyInit:this,he.lazyUpdate=(this.lazyUpdate||[]).concat([ge]),he}applyUpdate(ge){const he=ge.name.toLowerCase();switch(ge.op){case"a":case"s":let ht=ge.value;if("string"==typeof ht&&(ht=[ht]),0===ht.length)return;this.maybeSetNormalizedName(ge.name,he);const mt=("a"===ge.op?this.headers.get(he):void 0)||[];mt.push(...ht),this.headers.set(he,mt);break;case"d":const cn=ge.value;if(cn){let Rn=this.headers.get(he);if(!Rn)return;Rn=Rn.filter(wn=>-1===cn.indexOf(wn)),0===Rn.length?(this.headers.delete(he),this.normalizedNames.delete(he)):this.headers.set(he,Rn)}else this.headers.delete(he),this.normalizedNames.delete(he)}}forEach(ge){this.init(),Array.from(this.normalizedNames.keys()).forEach(he=>ge(this.normalizedNames.get(he),this.headers.get(he)))}}class Se{encodeKey(ge){return $t(ge)}encodeValue(ge){return $t(ge)}decodeKey(ge){return decodeURIComponent(ge)}decodeValue(ge){return decodeURIComponent(ge)}}const vt=/%(\d[a-f0-9])/gi,ct={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function $t(Qe){return encodeURIComponent(Qe).replace(vt,(ge,he)=>ct[he]??ge)}function pt(Qe){return`${Qe}`}class dt{constructor(ge={}){if(this.updates=null,this.cloneFrom=null,this.encoder=ge.encoder||new Se,ge.fromString){if(ge.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function Rt(Qe,ge){const he=new Map;return Qe.length>0&&Qe.replace(/^\?/,"").split("&").forEach(mt=>{const cn=mt.indexOf("="),[Rn,wn]=-1==cn?[ge.decodeKey(mt),""]:[ge.decodeKey(mt.slice(0,cn)),ge.decodeValue(mt.slice(cn+1))],jt=he.get(Rn)||[];jt.push(wn),he.set(Rn,jt)}),he}(ge.fromString,this.encoder)}else ge.fromObject?(this.map=new Map,Object.keys(ge.fromObject).forEach(he=>{const ht=ge.fromObject[he],mt=Array.isArray(ht)?ht.map(pt):[pt(ht)];this.map.set(he,mt)})):this.map=null}has(ge){return this.init(),this.map.has(ge)}get(ge){this.init();const he=this.map.get(ge);return he?he[0]:null}getAll(ge){return this.init(),this.map.get(ge)||null}keys(){return this.init(),Array.from(this.map.keys())}append(ge,he){return this.clone({param:ge,value:he,op:"a"})}appendAll(ge){const he=[];return Object.keys(ge).forEach(ht=>{const mt=ge[ht];Array.isArray(mt)?mt.forEach(cn=>{he.push({param:ht,value:cn,op:"a"})}):he.push({param:ht,value:mt,op:"a"})}),this.clone(he)}set(ge,he){return this.clone({param:ge,value:he,op:"s"})}delete(ge,he){return this.clone({param:ge,value:he,op:"d"})}toString(){return this.init(),this.keys().map(ge=>{const he=this.encoder.encodeKey(ge);return this.map.get(ge).map(ht=>he+"="+this.encoder.encodeValue(ht)).join("&")}).filter(ge=>""!==ge).join("&")}clone(ge){const he=new dt({encoder:this.encoder});return he.cloneFrom=this.cloneFrom||this,he.updates=(this.updates||[]).concat(ge),he}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(ge=>this.map.set(ge,this.cloneFrom.map.get(ge))),this.updates.forEach(ge=>{switch(ge.op){case"a":case"s":const he=("a"===ge.op?this.map.get(ge.param):void 0)||[];he.push(pt(ge.value)),this.map.set(ge.param,he);break;case"d":if(void 0===ge.value){this.map.delete(ge.param);break}{let ht=this.map.get(ge.param)||[];const mt=ht.indexOf(pt(ge.value));-1!==mt&&ht.splice(mt,1),ht.length>0?this.map.set(ge.param,ht):this.map.delete(ge.param)}}}),this.cloneFrom=this.updates=null)}}class an{constructor(){this.map=new Map}set(ge,he){return this.map.set(ge,he),this}get(ge){return this.map.has(ge)||this.map.set(ge,ge.defaultValue()),this.map.get(ge)}delete(ge){return this.map.delete(ge),this}has(ge){return this.map.has(ge)}keys(){return this.map.keys()}}function De(Qe){return typeof ArrayBuffer<"u"&&Qe instanceof ArrayBuffer}function Fe(Qe){return typeof Blob<"u"&&Qe instanceof Blob}function At(Qe){return typeof FormData<"u"&&Qe instanceof FormData}class We{constructor(ge,he,ht,mt){let cn;if(this.url=he,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=ge.toUpperCase(),function it(Qe){switch(Qe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||mt?(this.body=void 0!==ht?ht:null,cn=mt):cn=ht,cn&&(this.reportProgress=!!cn.reportProgress,this.withCredentials=!!cn.withCredentials,cn.responseType&&(this.responseType=cn.responseType),cn.headers&&(this.headers=cn.headers),cn.context&&(this.context=cn.context),cn.params&&(this.params=cn.params)),this.headers||(this.headers=new ye),this.context||(this.context=new an),this.params){const Rn=this.params.toString();if(0===Rn.length)this.urlWithParams=he;else{const wn=he.indexOf("?");this.urlWithParams=he+(-1===wn?"?":wn<he.length-1?"&":"")+Rn}}else this.params=new dt,this.urlWithParams=he}serializeBody(){return null===this.body?null:De(this.body)||Fe(this.body)||At(this.body)||function Et(Qe){return typeof URLSearchParams<"u"&&Qe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof dt?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||At(this.body)?null:Fe(this.body)?this.body.type||null:De(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof dt?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(ge={}){const he=ge.method||this.method,ht=ge.url||this.url,mt=ge.responseType||this.responseType,cn=void 0!==ge.body?ge.body:this.body,Rn=void 0!==ge.withCredentials?ge.withCredentials:this.withCredentials,wn=void 0!==ge.reportProgress?ge.reportProgress:this.reportProgress;let jt=ge.headers||this.headers,lr=ge.params||this.params;const Qn=ge.context??this.context;return void 0!==ge.setHeaders&&(jt=Object.keys(ge.setHeaders).reduce((Oi,Vn)=>Oi.set(Vn,ge.setHeaders[Vn]),jt)),ge.setParams&&(lr=Object.keys(ge.setParams).reduce((Oi,Vn)=>Oi.set(Vn,ge.setParams[Vn]),lr)),new We(he,ht,cn,{params:lr,headers:jt,context:Qn,reportProgress:wn,responseType:mt,withCredentials:Rn})}}var Oe=(()=>((Oe=Oe||{})[Oe.Sent=0]="Sent",Oe[Oe.UploadProgress=1]="UploadProgress",Oe[Oe.ResponseHeader=2]="ResponseHeader",Oe[Oe.DownloadProgress=3]="DownloadProgress",Oe[Oe.Response=4]="Response",Oe[Oe.User=5]="User",Oe))();class Mt{constructor(ge,he=200,ht="OK"){this.headers=ge.headers||new ye,this.status=void 0!==ge.status?ge.status:he,this.statusText=ge.statusText||ht,this.url=ge.url||null,this.ok=this.status>=200&&this.status<300}}class Dt extends Mt{constructor(ge={}){super(ge),this.type=Oe.ResponseHeader}clone(ge={}){return new Dt({headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class Kt extends Mt{constructor(ge={}){super(ge),this.type=Oe.Response,this.body=void 0!==ge.body?ge.body:null}clone(ge={}){return new Kt({body:void 0!==ge.body?ge.body:this.body,headers:ge.headers||this.headers,status:void 0!==ge.status?ge.status:this.status,statusText:ge.statusText||this.statusText,url:ge.url||this.url||void 0})}}class Ht extends Mt{constructor(ge){super(ge,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${ge.url||"(unknown url)"}`:`Http failure response for ${ge.url||"(unknown url)"}: ${ge.status} ${ge.statusText}`,this.error=ge.error||null}}function Dr(Qe,ge){return{body:ge,headers:Qe.headers,context:Qe.context,observe:Qe.observe,params:Qe.params,reportProgress:Qe.reportProgress,responseType:Qe.responseType,withCredentials:Qe.withCredentials}}let si=(()=>{class Qe{constructor(he){this.handler=he}request(he,ht,mt={}){let cn;if(he instanceof We)cn=he;else{let jt,lr;jt=mt.headers instanceof ye?mt.headers:new ye(mt.headers),mt.params&&(lr=mt.params instanceof dt?mt.params:new dt({fromObject:mt.params})),cn=new We(he,ht,void 0!==mt.body?mt.body:null,{headers:jt,context:mt.context,params:lr,reportProgress:mt.reportProgress,responseType:mt.responseType||"json",withCredentials:mt.withCredentials})}const Rn=(0,X.of)(cn).pipe((0,Ce.b)(jt=>this.handler.handle(jt)));if(he instanceof We||"events"===mt.observe)return Rn;const wn=Rn.pipe((0,Ne.h)(jt=>jt instanceof Kt));switch(mt.observe||"body"){case"body":switch(cn.responseType){case"arraybuffer":return wn.pipe((0,Ve.U)(jt=>{if(null!==jt.body&&!(jt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return jt.body}));case"blob":return wn.pipe((0,Ve.U)(jt=>{if(null!==jt.body&&!(jt.body instanceof Blob))throw new Error("Response is not a Blob.");return jt.body}));case"text":return wn.pipe((0,Ve.U)(jt=>{if(null!==jt.body&&"string"!=typeof jt.body)throw new Error("Response is not a string.");return jt.body}));default:return wn.pipe((0,Ve.U)(jt=>jt.body))}case"response":return wn;default:throw new Error(`Unreachable: unhandled observe type ${mt.observe}}`)}}delete(he,ht={}){return this.request("DELETE",he,ht)}get(he,ht={}){return this.request("GET",he,ht)}head(he,ht={}){return this.request("HEAD",he,ht)}jsonp(he,ht){return this.request("JSONP",he,{params:(new dt).append(ht,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(he,ht={}){return this.request("OPTIONS",he,ht)}patch(he,ht,mt={}){return this.request("PATCH",he,Dr(mt,ht))}post(he,ht,mt={}){return this.request("POST",he,Dr(mt,ht))}put(he,ht,mt={}){return this.request("PUT",he,Dr(mt,ht))}}return Qe.\u0275fac=function(he){return new(he||Qe)(Y.LFG(Ge))},Qe.\u0275prov=Y.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();class kn{constructor(ge,he){this.next=ge,this.interceptor=he}handle(ge){return this.interceptor.intercept(ge,this.next)}}const se=new Y.OlP("HTTP_INTERCEPTORS");let Ae=(()=>{class Qe{intercept(he,ht){return ht.handle(he)}}return Qe.\u0275fac=function(he){return new(he||Qe)},Qe.\u0275prov=Y.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const Mn=/^\)\]\}',?\n/;let Hn=(()=>{class Qe{constructor(he){this.xhrFactory=he}handle(he){if("JSONP"===he.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new Re.y(ht=>{const mt=this.xhrFactory.build();if(mt.open(he.method,he.urlWithParams),he.withCredentials&&(mt.withCredentials=!0),he.headers.forEach((Un,Xt)=>mt.setRequestHeader(Un,Xt.join(","))),he.headers.has("Accept")||mt.setRequestHeader("Accept","application/json, text/plain, */*"),!he.headers.has("Content-Type")){const Un=he.detectContentTypeHeader();null!==Un&&mt.setRequestHeader("Content-Type",Un)}if(he.responseType){const Un=he.responseType.toLowerCase();mt.responseType="json"!==Un?Un:"text"}const cn=he.serializeBody();let Rn=null;const wn=()=>{if(null!==Rn)return Rn;const Un=mt.statusText||"OK",Xt=new ye(mt.getAllResponseHeaders()),$r=function fr(Qe){return"responseURL"in Qe&&Qe.responseURL?Qe.responseURL:/^X-Request-URL:/m.test(Qe.getAllResponseHeaders())?Qe.getResponseHeader("X-Request-URL"):null}(mt)||he.url;return Rn=new Dt({headers:Xt,status:mt.status,statusText:Un,url:$r}),Rn},jt=()=>{let{headers:Un,status:Xt,statusText:$r,url:br}=wn(),qn=null;204!==Xt&&(qn=typeof mt.response>"u"?mt.responseText:mt.response),0===Xt&&(Xt=qn?200:0);let li=Xt>=200&&Xt<300;if("json"===he.responseType&&"string"==typeof qn){const jr=qn;qn=qn.replace(Mn,"");try{qn=""!==qn?JSON.parse(qn):null}catch(Jr){qn=jr,li&&(li=!1,qn={error:Jr,text:qn})}}li?(ht.next(new Kt({body:qn,headers:Un,status:Xt,statusText:$r,url:br||void 0})),ht.complete()):ht.error(new Ht({error:qn,headers:Un,status:Xt,statusText:$r,url:br||void 0}))},lr=Un=>{const{url:Xt}=wn(),$r=new Ht({error:Un,status:mt.status||0,statusText:mt.statusText||"Unknown Error",url:Xt||void 0});ht.error($r)};let Qn=!1;const Oi=Un=>{Qn||(ht.next(wn()),Qn=!0);let Xt={type:Oe.DownloadProgress,loaded:Un.loaded};Un.lengthComputable&&(Xt.total=Un.total),"text"===he.responseType&&!!mt.responseText&&(Xt.partialText=mt.responseText),ht.next(Xt)},Vn=Un=>{let Xt={type:Oe.UploadProgress,loaded:Un.loaded};Un.lengthComputable&&(Xt.total=Un.total),ht.next(Xt)};return mt.addEventListener("load",jt),mt.addEventListener("error",lr),mt.addEventListener("timeout",lr),mt.addEventListener("abort",lr),he.reportProgress&&(mt.addEventListener("progress",Oi),null!==cn&&mt.upload&&mt.upload.addEventListener("progress",Vn)),mt.send(cn),ht.next({type:Oe.Sent}),()=>{mt.removeEventListener("error",lr),mt.removeEventListener("abort",lr),mt.removeEventListener("load",jt),mt.removeEventListener("timeout",lr),he.reportProgress&&(mt.removeEventListener("progress",Oi),null!==cn&&mt.upload&&mt.upload.removeEventListener("progress",Vn)),mt.readyState!==mt.DONE&&mt.abort()}})}}return Qe.\u0275fac=function(he){return new(he||Qe)(Y.LFG(w.JF))},Qe.\u0275prov=Y.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})();const Xn=new Y.OlP("XSRF_COOKIE_NAME"),Jt=new Y.OlP("XSRF_HEADER_NAME");class cr{}let kr=(()=>{class Qe{constructor(he,ht,mt){this.doc=he,this.platform=ht,this.cookieName=mt,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const he=this.doc.cookie||"";return he!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,w.Mx)(he,this.cookieName),this.lastCookieString=he),this.lastToken}}return Qe.\u0275fac=function(he){return new(he||Qe)(Y.LFG(w.K0),Y.LFG(Y.Lbi),Y.LFG(Xn))},Qe.\u0275prov=Y.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),Fn=(()=>{class Qe{constructor(he,ht){this.tokenService=he,this.headerName=ht}intercept(he,ht){const mt=he.url.toLowerCase();if("GET"===he.method||"HEAD"===he.method||mt.startsWith("http://")||mt.startsWith("https://"))return ht.handle(he);const cn=this.tokenService.getToken();return null!==cn&&!he.headers.has(this.headerName)&&(he=he.clone({headers:he.headers.set(this.headerName,cn)})),ht.handle(he)}}return Qe.\u0275fac=function(he){return new(he||Qe)(Y.LFG(cr),Y.LFG(Jt))},Qe.\u0275prov=Y.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),Ut=(()=>{class Qe{constructor(he,ht){this.backend=he,this.injector=ht,this.chain=null}handle(he){if(null===this.chain){const ht=this.injector.get(se,[]);this.chain=ht.reduceRight((mt,cn)=>new kn(mt,cn),this.backend)}return this.chain.handle(he)}}return Qe.\u0275fac=function(he){return new(he||Qe)(Y.LFG(Ye),Y.LFG(Y.zs3))},Qe.\u0275prov=Y.Yz7({token:Qe,factory:Qe.\u0275fac}),Qe})(),er=(()=>{class Qe{static disable(){return{ngModule:Qe,providers:[{provide:Fn,useClass:Ae}]}}static withOptions(he={}){return{ngModule:Qe,providers:[he.cookieName?{provide:Xn,useValue:he.cookieName}:[],he.headerName?{provide:Jt,useValue:he.headerName}:[]]}}}return Qe.\u0275fac=function(he){return new(he||Qe)},Qe.\u0275mod=Y.oAB({type:Qe}),Qe.\u0275inj=Y.cJS({providers:[Fn,{provide:se,useExisting:Fn,multi:!0},{provide:cr,useClass:kr},{provide:Xn,useValue:"XSRF-TOKEN"},{provide:Jt,useValue:"X-XSRF-TOKEN"}]}),Qe})(),us=(()=>{class Qe{}return Qe.\u0275fac=function(he){return new(he||Qe)},Qe.\u0275mod=Y.oAB({type:Qe}),Qe.\u0275inj=Y.cJS({providers:[si,{provide:Ge,useClass:Ut},Hn,{provide:Ye,useExisting:Hn}],imports:[er.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),Qe})()},4650:(rn,ot,z)=>{z.d(ot,{$8M:()=>at,$Z:()=>co,AFp:()=>Dw,ALo:()=>G0,AaK:()=>Ge,Akn:()=>Tl,AsE:()=>Sf,BQk:()=>Ap,CHM:()=>ca,CRH:()=>ew,CZH:()=>EE,CqO:()=>hy,D6c:()=>kC,DdM:()=>M0,EJc:()=>YI,EpF:()=>Rp,F$t:()=>ys,F4k:()=>Ug,FYo:()=>_m,FiY:()=>Pa,G48:()=>yC,Gf:()=>J0,GfV:()=>vm,GkF:()=>dy,Gpc:()=>pe,HTZ:()=>F0,Hh0:()=>L0,Hsn:()=>aa,JOm:()=>Uo,KtG:()=>fl,LFG:()=>Yi,LSH:()=>Ic,Lbi:()=>WI,Lck:()=>j,MAs:()=>cy,MMx:()=>It,NdJ:()=>Bg,OlP:()=>ri,Oqu:()=>vy,PXZ:()=>dC,Q6J:()=>y_,QGY:()=>Mp,QP$:()=>vn,QbO:()=>KI,Qsj:()=>xy,R0b:()=>Hd,RDi:()=>_c,Rgc:()=>Vv,SBq:()=>Sd,Sil:()=>JI,Suo:()=>X0,TTD:()=>ai,TgZ:()=>Tp,Tol:()=>T_,Udp:()=>b_,VKq:()=>x0,W1O:()=>iw,WLB:()=>N0,X6Q:()=>mC,XFs:()=>Ut,Xpm:()=>br,Xts:()=>nf,Y36:()=>qu,YKP:()=>M,YNc:()=>uy,Yjl:()=>ke,Yz7:()=>et,Z0I:()=>un,ZZ4:()=>g0,_Bn:()=>f,_UZ:()=>Nh,_Vd:()=>Jf,_c5:()=>PC,_uU:()=>Tf,aQg:()=>m0,c2e:()=>qI,cJS:()=>dn,cg1:()=>Q,dDg:()=>aC,dqk:()=>mt,eFA:()=>Lw,ekj:()=>tc,eoX:()=>Ow,f3M:()=>cd,g9A:()=>Tw,h0i:()=>v,hGG:()=>OC,hij:()=>Ud,iGM:()=>Q0,ifc:()=>ht,ip1:()=>Cw,jDz:()=>pn,kEZ:()=>P0,kL8:()=>Te,l5B:()=>O0,lG2:()=>fe,lqb:()=>pu,lri:()=>Nw,n5z:()=>Ot,oAB:()=>Jr,oJD:()=>Sy,oxw:()=>Ld,q4F:()=>af,qLn:()=>mh,qOj:()=>iy,qZA:()=>Lg,qbA:()=>k0,rFY:()=>V0,rWj:()=>Pw,sBO:()=>_C,sIi:()=>Pd,s_b:()=>yE,soG:()=>wE,tb:()=>Sw,tp0:()=>Nu,uIk:()=>Ju,vHH:()=>ct,vpe:()=>kf,wAp:()=>Ze,xi3:()=>z0,xp6:()=>Tm,ynx:()=>Sp,z2F:()=>IE,zSh:()=>Qp,zs3:()=>Wu});var w=z(7579),Y=z(727),X=z(9751),Re=z(6451),Ce=z(3099);function Ne(n){for(let s in n)if(n[s]===Ne)return s;throw Error("Could not find renamed property on target object.")}function Ve(n,s){for(const l in s)s.hasOwnProperty(l)&&!n.hasOwnProperty(l)&&(n[l]=s[l])}function Ge(n){if("string"==typeof n)return n;if(Array.isArray(n))return"["+n.map(Ge).join(", ")+"]";if(null==n)return""+n;if(n.overriddenName)return`${n.overriddenName}`;if(n.name)return`${n.name}`;const s=n.toString();if(null==s)return""+s;const l=s.indexOf("\n");return-1===l?s:s.substring(0,l)}function Ye(n,s){return null==n||""===n?null===s?"":s:null==s||""===s?n:n+" "+s}const ye=Ne({__forward_ref__:Ne});function pe(n){return n.__forward_ref__=pe,n.toString=function(){return Ge(this())},n}function Se(n){return Rt(n)?n():n}function Rt(n){return"function"==typeof n&&n.hasOwnProperty(ye)&&n.__forward_ref__===pe}class ct extends Error{constructor(s,l){super(function $t(n,s){return`NG0${Math.abs(n)}${s?": "+s.trim():""}`}(s,l)),this.code=s}}function pt(n){return"string"==typeof n?n:null==n?"":String(n)}function De(n,s){throw new ct(-201,!1)}function Ae(n,s){null==n&&function Me(n,s,l,h){throw new Error(`ASSERTION ERROR: ${n}`+(null==h?"":` [Expected=> ${l} ${h} ${s} <=Actual]`))}(s,n,null,"!=")}function et(n){return{token:n.token,providedIn:n.providedIn||null,factory:n.factory,value:void 0}}function dn(n){return{providers:n.providers||[],imports:n.imports||[]}}function En(n){return Mn(n,Jt)||Mn(n,kr)}function un(n){return null!==En(n)}function Mn(n,s){return n.hasOwnProperty(s)?n[s]:null}function Xn(n){return n&&(n.hasOwnProperty(cr)||n.hasOwnProperty(Fn))?n[cr]:null}const Jt=Ne({\u0275prov:Ne}),cr=Ne({\u0275inj:Ne}),kr=Ne({ngInjectableDef:Ne}),Fn=Ne({ngInjectorDef:Ne});var Ut=(()=>((Ut=Ut||{})[Ut.Default=0]="Default",Ut[Ut.Host=1]="Host",Ut[Ut.Self=2]="Self",Ut[Ut.SkipSelf=4]="SkipSelf",Ut[Ut.Optional=8]="Optional",Ut))();let wr;function er(n){const s=wr;return wr=n,s}function us(n,s,l){const h=En(n);return h&&"root"==h.providedIn?void 0===h.value?h.value=h.factory():h.value:l&Ut.Optional?null:void 0!==s?s:void De(Ge(n))}function wi(n){return{toString:n}.toString()}var Qe=(()=>((Qe=Qe||{})[Qe.OnPush=0]="OnPush",Qe[Qe.Default=1]="Default",Qe))(),ht=(()=>{return(n=ht||(ht={}))[n.Emulated=0]="Emulated",n[n.None=2]="None",n[n.ShadowDom=3]="ShadowDom",ht;var n})();const mt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),wn={},jt=[],lr=Ne({\u0275cmp:Ne}),Qn=Ne({\u0275dir:Ne}),Oi=Ne({\u0275pipe:Ne}),Vn=Ne({\u0275mod:Ne}),Un=Ne({\u0275fac:Ne}),Xt=Ne({__NG_ELEMENT_ID__:Ne});let $r=0;function br(n){return wi(()=>{const l=!0===n.standalone,h={},p={type:n.type,providersResolver:null,decls:n.decls,vars:n.vars,factory:null,template:n.template||null,consts:n.consts||null,ngContentSelectors:n.ngContentSelectors,hostBindings:n.hostBindings||null,hostVars:n.hostVars||0,hostAttrs:n.hostAttrs||null,contentQueries:n.contentQueries||null,declaredInputs:h,inputs:null,outputs:null,exportAs:n.exportAs||null,onPush:n.changeDetection===Qe.OnPush,directiveDefs:null,pipeDefs:null,standalone:l,dependencies:l&&n.dependencies||null,getStandaloneInjector:null,selectors:n.selectors||jt,viewQuery:n.viewQuery||null,features:n.features||null,data:n.data||{},encapsulation:n.encapsulation||ht.Emulated,id:"c"+$r++,styles:n.styles||jt,_:null,setInput:null,schemas:n.schemas||null,tView:null},_=n.dependencies,D=n.features;return p.inputs=_e(n.inputs,h),p.outputs=_e(n.outputs),D&&D.forEach(x=>x(p)),p.directiveDefs=_?()=>("function"==typeof _?_():_).map(li).filter(jr):null,p.pipeDefs=_?()=>("function"==typeof _?_():_).map(Gt).filter(jr):null,p})}function li(n){return rt(n)||$e(n)}function jr(n){return null!==n}function Jr(n){return wi(()=>({type:n.type,bootstrap:n.bootstrap||jt,declarations:n.declarations||jt,imports:n.imports||jt,exports:n.exports||jt,transitiveCompileScopes:null,schemas:n.schemas||null,id:n.id||null}))}function _e(n,s){if(null==n)return wn;const l={};for(const h in n)if(n.hasOwnProperty(h)){let p=n[h],_=p;Array.isArray(p)&&(_=p[1],p=p[0]),l[p]=h,s&&(s[p]=_)}return l}const fe=br;function ke(n){return{type:n.type,name:n.name,factory:null,pure:!1!==n.pure,standalone:!0===n.standalone,onDestroy:n.type.prototype.ngOnDestroy||null}}function rt(n){return n[lr]||null}function $e(n){return n[Qn]||null}function Gt(n){return n[Oi]||null}function vn(n){const s=rt(n)||$e(n)||Gt(n);return null!==s&&s.standalone}function Ln(n,s){const l=n[Vn]||null;if(!l&&!0===s)throw new Error(`Type ${Ge(n)} does not have '\u0275mod' property.`);return l}function Xr(n){return Array.isArray(n)&&"object"==typeof n[1]}function ui(n){return Array.isArray(n)&&!0===n[1]}function Qi(n){return 0!=(8&n.flags)}function xs(n){return 2==(2&n.flags)}function Es(n){return 1==(1&n.flags)}function Ai(n){return null!==n.template}function ci(n){return 0!=(256&n[2])}function ds(n,s){return n.hasOwnProperty(Un)?n[Un]:null}class Wa{constructor(s,l,h){this.previousValue=s,this.currentValue=l,this.firstChange=h}isFirstChange(){return this.firstChange}}function ai(){return mo}function mo(n){return n.type.prototype.ngOnChanges&&(n.setInput=Gn),Pr}function Pr(){const n=xl(this),s=n?.current;if(s){const l=n.previous;if(l===wn)n.previous=s;else for(let h in s)l[h]=s[h];n.current=null,this.ngOnChanges(s)}}function Gn(n,s,l,h){const p=xl(n)||function No(n,s){return n[Li]=s}(n,{previous:wn,current:null}),_=p.current||(p.current={}),D=p.previous,x=this.declaredInputs[l],F=D[x];_[x]=new Wa(F&&F.currentValue,s,D===wn),n[h]=s}ai.ngInherit=!0;const Li="__ngSimpleChanges__";function xl(n){return n[Li]||null}function mi(n){for(;Array.isArray(n);)n=n[0];return n}function Vs(n,s){return mi(s[n])}function Vi(n,s){return mi(s[n.index])}function Ws(n,s){return n.data[s]}function Jn(n,s){return n[s]}function yi(n,s){const l=s[n];return Xr(l)?l:l[0]}function hs(n){return 64==(64&n[2])}function Hi(n,s){return null==s?null:n[s]}function $i(n){n[18]=0}function Ui(n,s){n[5]+=s;let l=n,h=n[3];for(;null!==h&&(1===s&&1===l[5]||-1===s&&0===l[5]);)h[5]+=s,l=h,h=h[3]}const fn={lFrame:qa(null),bindingsEnabled:!0};function ua(){return fn.bindingsEnabled}function xt(){return fn.lFrame.lView}function rr(){return fn.lFrame.tView}function ca(n){return fn.lFrame.contextLView=n,n[8]}function fl(n){return fn.lFrame.contextLView=null,n}function Di(){let n=Ar();for(;null!==n&&64===n.type;)n=n.parent;return n}function Ar(){return fn.lFrame.currentTNode}function es(n,s){const l=fn.lFrame;l.currentTNode=n,l.isParent=s}function no(){return fn.lFrame.isParent}function Oo(){fn.lFrame.isParent=!1}function L(){const n=fn.lFrame;let s=n.bindingRootIndex;return-1===s&&(s=n.bindingRootIndex=n.tView.bindingStartIndex),s}function Lt(){return fn.lFrame.bindingIndex++}function _r(n){const s=fn.lFrame,l=s.bindingIndex;return s.bindingIndex=s.bindingIndex+n,l}function Ps(n,s){const l=fn.lFrame;l.bindingIndex=l.bindingRootIndex=n,Zi(s)}function Zi(n){fn.lFrame.currentDirectiveIndex=n}function su(){return fn.lFrame.currentQueryIndex}function fs(n){fn.lFrame.currentQueryIndex=n}function da(n){const s=n[1];return 2===s.type?s.declTNode:1===s.type?n[6]:null}function ha(n,s,l){if(l&Ut.SkipSelf){let p=s,_=n;for(;!(p=p.parent,null!==p||l&Ut.Host||(p=da(_),null===p||(_=_[15],10&p.type))););if(null===p)return!1;s=p,n=_}const h=fn.lFrame=pa();return h.currentTNode=s,h.lView=n,!0}function fa(n){const s=pa(),l=n[1];fn.lFrame=s,s.currentTNode=l.firstChild,s.lView=n,s.tView=l,s.contextLView=n,s.bindingIndex=l.bindingStartIndex,s.inI18n=!1}function pa(){const n=fn.lFrame,s=null===n?null:n.child;return null===s?qa(n):s}function qa(n){const s={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:n,child:null,inI18n:!1};return null!==n&&(n.child=s),s}function pl(){const n=fn.lFrame;return fn.lFrame=n.parent,n.currentTNode=null,n.lView=null,n}const ga=pl;function Za(){const n=pl();n.isParent=!0,n.tView=null,n.selectedIndex=-1,n.contextLView=null,n.elementDepthCount=0,n.currentDirectiveIndex=-1,n.currentNamespace=null,n.bindingRootIndex=-1,n.bindingIndex=-1,n.currentQueryIndex=0}function Hr(){return fn.lFrame.selectedIndex}function ko(n){fn.lFrame.selectedIndex=n}function di(){const n=fn.lFrame;return Ws(n.tView,n.selectedIndex)}function _a(n,s){for(let l=s.directiveStart,h=s.directiveEnd;l<h;l++){const _=n.data[l].type.prototype,{ngAfterContentInit:D,ngAfterContentChecked:x,ngAfterViewInit:F,ngAfterViewChecked:W,ngOnDestroy:re}=_;D&&(n.contentHooks||(n.contentHooks=[])).push(-l,D),x&&((n.contentHooks||(n.contentHooks=[])).push(l,x),(n.contentCheckHooks||(n.contentCheckHooks=[])).push(l,x)),F&&(n.viewHooks||(n.viewHooks=[])).push(-l,F),W&&((n.viewHooks||(n.viewHooks=[])).push(l,W),(n.viewCheckHooks||(n.viewCheckHooks=[])).push(l,W)),null!=re&&(n.destroyHooks||(n.destroyHooks=[])).push(l,re)}}function Yo(n,s,l){Ma(n,s,3,l)}function va(n,s,l,h){(3&n[2])===l&&Ma(n,s,l,h)}function Du(n,s){let l=n[2];(3&l)===s&&(l&=2047,l+=1,n[2]=l)}function Ma(n,s,l,h){const _=h??-1,D=s.length-1;let x=0;for(let F=void 0!==h?65535&n[18]:0;F<D;F++)if("number"==typeof s[F+1]){if(x=s[F],null!=h&&x>=h)break}else s[F]<0&&(n[18]+=65536),(x<_||-1==_)&&(ro(n,l,s,F),n[18]=(4294901760&n[18])+F+2),F++}function ro(n,s,l,h){const p=l[h]<0,_=l[h+1],x=n[p?-l[h]:l[h]];if(p){if(n[2]>>11<n[18]>>16&&(3&n[2])===s){n[2]+=2048;try{_.call(x)}finally{}}}else try{_.call(x)}finally{}}class xa{constructor(s,l,h){this.factory=s,this.resolving=!1,this.canSeeViewProviders=l,this.injectImpl=h}}function te(n,s,l){let h=0;for(;h<l.length;){const p=l[h];if("number"==typeof p){if(0!==p)break;h++;const _=l[h++],D=l[h++],x=l[h++];n.setAttribute(s,D,x,_)}else{const _=p,D=l[++h];ft(_)?n.setProperty(s,_,D):n.setAttribute(s,_,D),h++}}return h}function Ie(n){return 3===n||4===n||6===n}function ft(n){return 64===n.charCodeAt(0)}function bt(n,s){if(null!==s&&0!==s.length)if(null===n||0===n.length)n=s.slice();else{let l=-1;for(let h=0;h<s.length;h++){const p=s[h];"number"==typeof p?l=p:0===l||mn(n,l,p,null,-1===l||2===l?s[++h]:null)}}return n}function mn(n,s,l,h,p){let _=0,D=n.length;if(-1===s)D=-1;else for(;_<n.length;){const x=n[_++];if("number"==typeof x){if(x===s){D=-1;break}if(x>s){D=_-1;break}}}for(;_<n.length;){const x=n[_];if("number"==typeof x)break;if(x===l){if(null===h)return void(null!==p&&(n[_+1]=p));if(h===n[_+1])return void(n[_+2]=p)}_++,null!==h&&_++,null!==p&&_++}-1!==D&&(n.splice(D,0,s),_=D+1),n.splice(_++,0,l),null!==h&&n.splice(_++,0,h),null!==p&&n.splice(_++,0,p)}function tr(n){return-1!==n}function Yn(n){return 32767&n}function zn(n,s){let l=function Zn(n){return n>>16}(n),h=s;for(;l>0;)h=h[15],l--;return h}let bi=!0;function Nr(n){const s=bi;return bi=n,s}let io=0;const ts={};function wo(n,s){const l=so(n,s);if(-1!==l)return l;const h=s[1];h.firstCreatePass&&(n.injectorIndex=s.length,Nl(h.data,n),Nl(s,null),Nl(h.blueprint,null));const p=Ja(n,s),_=n.injectorIndex;if(tr(p)){const D=Yn(p),x=zn(p,s),F=x[1].data;for(let W=0;W<8;W++)s[_+W]=x[D+W]|F[D+W]}return s[_+8]=p,_}function Nl(n,s){n.push(0,0,0,0,0,0,0,0,s)}function so(n,s){return-1===n.injectorIndex||n.parent&&n.parent.injectorIndex===n.injectorIndex||null===s[n.injectorIndex+8]?-1:n.injectorIndex}function Ja(n,s){if(n.parent&&-1!==n.parent.injectorIndex)return n.parent.injectorIndex;let l=0,h=null,p=s;for(;null!==p;){if(h=nn(p),null===h)return-1;if(l++,p=p[15],-1!==h.injectorIndex)return h.injectorIndex|l<<16}return-1}function Fo(n,s,l){!function Qo(n,s,l){let h;"string"==typeof l?h=l.charCodeAt(0)||0:l.hasOwnProperty(Xt)&&(h=l[Xt]),null==h&&(h=l[Xt]=io++);const p=255&h;s.data[n+(p>>5)]|=1<<p}(n,s,l)}function Pl(n,s,l){if(l&Ut.Optional||void 0!==n)return n;De()}function Xa(n,s,l,h){if(l&Ut.Optional&&void 0===h&&(h=null),0==(l&(Ut.Self|Ut.Host))){const p=n[9],_=er(void 0);try{return p?p.get(s,h,l&Ut.Optional):us(s,h,l&Ut.Optional)}finally{er(_)}}return Pl(h,0,l)}function ou(n,s,l,h=Ut.Default,p){if(null!==n){if(1024&s[2]){const D=function oc(n,s,l,h,p){let _=n,D=s;for(;null!==_&&null!==D&&1024&D[2]&&!(256&D[2]);){const x=ns(_,D,l,h|Ut.Self,ts);if(x!==ts)return x;let F=_.parent;if(!F){const W=D[21];if(W){const re=W.get(l,ts,h);if(re!==ts)return re}F=nn(D),D=D[15]}_=F}return p}(n,s,l,h,ts);if(D!==ts)return D}const _=ns(n,s,l,h,ts);if(_!==ts)return _}return Xa(s,l,h,p)}function ns(n,s,l,h,p){const _=function Ol(n){if("string"==typeof n)return n.charCodeAt(0)||0;const s=n.hasOwnProperty(Xt)?n[Xt]:void 0;return"number"==typeof s?s>=0?255&s:Pc:s}(l);if("function"==typeof _){if(!ha(s,n,h))return h&Ut.Host?Pl(p,0,h):Xa(s,l,h,p);try{const D=_(h);if(null!=D||h&Ut.Optional)return D;De()}finally{ga()}}else if("number"==typeof _){let D=null,x=so(n,s),F=-1,W=h&Ut.Host?s[16][6]:null;for((-1===x||h&Ut.SkipSelf)&&(F=-1===x?Ja(n,s):s[x+8],-1!==F&&Pi(h,!1)?(D=s[1],x=Yn(F),s=zn(F,s)):x=-1);-1!==x;){const re=s[1];if(Vt(_,x,re.data)){const le=Tu(x,s,l,D,h,W);if(le!==ts)return le}F=s[x+8],-1!==F&&Pi(h,s[1].data[x+8]===W)&&Vt(_,x,s)?(D=re,x=Yn(F),s=zn(F,s)):x=-1}}return p}function Tu(n,s,l,h,p,_){const D=s[1],x=D.data[n+8],re=bs(x,D,l,null==h?xs(x)&&bi:h!=D&&0!=(3&x.type),p&Ut.Host&&_===x);return null!==re?au(s,D,re,x):ts}function bs(n,s,l,h,p){const _=n.providerIndexes,D=s.data,x=1048575&_,F=n.directiveStart,re=_>>20,Pe=p?x+re:n.directiveEnd;for(let st=h?x:x+re;st<Pe;st++){const Nt=D[st];if(st<F&&l===Nt||st>=F&&Nt.type===l)return st}if(p){const st=D[F];if(st&&Ai(st)&&st.type===l)return F}return null}function au(n,s,l,h){let p=n[l];const _=s.data;if(function Zs(n){return n instanceof xa}(p)){const D=p;D.resolving&&function Ue(n,s){const l=s?`. Dependency path: ${s.join(" > ")} > ${n}`:"";throw new ct(-200,`Circular dependency in DI detected for ${n}${l}`)}(function dt(n){return"function"==typeof n?n.name||n.toString():"object"==typeof n&&null!=n&&"function"==typeof n.type?n.type.name||n.type.toString():pt(n)}(_[l]));const x=Nr(D.canSeeViewProviders);D.resolving=!0;const F=D.injectImpl?er(D.injectImpl):null;ha(n,h,Ut.Default);try{p=n[l]=D.factory(void 0,_,n,h),s.firstCreatePass&&l>=h.directiveStart&&function qs(n,s,l){const{ngOnChanges:h,ngOnInit:p,ngDoCheck:_}=s.type.prototype;if(h){const D=mo(s);(l.preOrderHooks||(l.preOrderHooks=[])).push(n,D),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,D)}p&&(l.preOrderHooks||(l.preOrderHooks=[])).push(0-n,p),_&&((l.preOrderHooks||(l.preOrderHooks=[])).push(n,_),(l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(n,_))}(l,_[l],s)}finally{null!==F&&er(F),Nr(x),D.resolving=!1,ga()}}return p}function Vt(n,s,l){return!!(l[s+(n>>5)]&1<<n)}function Pi(n,s){return!(n&Ut.Self||n&Ut.Host&&s)}class ps{constructor(s,l){this._tNode=s,this._lView=l}get(s,l,h){return ou(this._tNode,this._lView,s,h,l)}}function Pc(){return new ps(Di(),xt())}function Ot(n){return wi(()=>{const s=n.prototype.constructor,l=s[Un]||Sn(s),h=Object.prototype;let p=Object.getPrototypeOf(n.prototype).constructor;for(;p&&p!==h;){const _=p[Un]||Sn(p);if(_&&_!==l)return _;p=Object.getPrototypeOf(p)}return _=>new _})}function Sn(n){return Rt(n)?()=>{const s=Sn(Se(n));return s&&s()}:ds(n)}function nn(n){const s=n[1],l=s.type;return 2===l?s.declTNode:1===l?n[6]:null}function at(n){return function ml(n,s){if("class"===s)return n.classes;if("style"===s)return n.styles;const l=n.attrs;if(l){const h=l.length;let p=0;for(;p<h;){const _=l[p];if(Ie(_))break;if(0===_)p+=2;else if("number"==typeof _)for(p++;p<h&&"string"==typeof l[p];)p++;else{if(_===s)return l[p+1];p+=2}}}return null}(Di(),n)}const vr="__parameters__";function el(n,s,l){return wi(()=>{const h=function kl(n){return function(...l){if(n){const h=n(...l);for(const p in h)this[p]=h[p]}}}(s);function p(..._){if(this instanceof p)return h.apply(this,_),this;const D=new p(..._);return x.annotation=D,x;function x(F,W,re){const le=F.hasOwnProperty(vr)?F[vr]:Object.defineProperty(F,vr,{value:[]})[vr];for(;le.length<=re;)le.push(null);return(le[re]=le[re]||[]).push(D),F}}return l&&(p.prototype=Object.create(l.prototype)),p.prototype.ngMetadataName=n,p.annotationCls=p,p})}class ri{constructor(s,l){this._desc=s,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof l?this.__NG_ELEMENT_ID__=l:void 0!==l&&(this.\u0275prov=et({token:this,providedIn:l.providedIn||"root",factory:l.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Ts(n,s){void 0===s&&(s=n);for(let l=0;l<n.length;l++){let h=n[l];Array.isArray(h)?(s===n&&(s=n.slice(0,l)),Ts(h,s)):s!==n&&s.push(h)}return s}function Bs(n,s){n.forEach(l=>Array.isArray(l)?Bs(l,s):s(l))}function ac(n,s,l){s>=n.length?n.push(l):n.splice(s,0,l)}function Bl(n,s){return s>=n.length-1?n.pop():n.splice(s,1)[0]}function jl(n,s){const l=[];for(let h=0;h<n;h++)l.push(s);return l}function js(n,s,l){let h=A(n,s);return h>=0?n[1|h]=l:(h=~h,function kc(n,s,l,h){let p=n.length;if(p==s)n.push(l,h);else if(1===p)n.push(h,n[0]),n[0]=l;else{for(p--,n.push(n[p-1],n[p]);p>s;)n[p]=n[p-2],p--;n[s]=l,n[s+1]=h}}(n,h,s,l)),h}function Xo(n,s){const l=A(n,s);if(l>=0)return n[1|l]}function A(n,s){return function b(n,s,l){let h=0,p=n.length>>l;for(;p!==h;){const _=h+(p-h>>1),D=n[_<<l];if(s===D)return _<<l;D>s?p=_:h=_+1}return~(p<<l)}(n,s,1)}const Er={},Lr="__NG_DI_FLAG__",Ti="ngTempTokenPath",Lo=/\n/gm,wa="__source";let _l;function hi(n){const s=_l;return _l=n,s}function lu(n,s=Ut.Default){if(void 0===_l)throw new ct(-203,!1);return null===_l?us(n,void 0,s):_l.get(n,s&Ut.Optional?null:void 0,s)}function Yi(n,s=Ut.Default){return(function An(){return wr}()||lu)(Se(n),s)}function cd(n,s=Ut.Default){return"number"!=typeof s&&(s=0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)),Yi(n,s)}function Fc(n){const s=[];for(let l=0;l<n.length;l++){const h=Se(n[l]);if(Array.isArray(h)){if(0===h.length)throw new ct(900,!1);let p,_=Ut.Default;for(let D=0;D<h.length;D++){const x=h[D],F=Gd(x);"number"==typeof F?-1===F?p=x.token:_|=F:p=x}s.push(Yi(p,_))}else s.push(Yi(h))}return s}function uu(n,s){return n[Lr]=s,n.prototype[Lr]=s,n}function Gd(n){return n[Lr]}const Pa=uu(el("Optional"),8),Nu=uu(el("SkipSelf"),4);var Uo=(()=>((Uo=Uo||{})[Uo.Important=1]="Important",Uo[Uo.DashCase=2]="DashCase",Uo))();const ae=new Map;let be=0;const zr="__ngContext__";function ms(n,s){Xr(s)?(n[zr]=s[20],function yt(n){ae.set(n[20],n)}(s)):n[zr]=s}function Yd(n,s){return undefined(n,s)}function gd(n){const s=n[3];return ui(s)?s[3]:s}function $f(n){return Ca(n[13])}function hc(n){return Ca(n[4])}function Ca(n){for(;null!==n&&!ui(n);)n=n[4];return n}function fc(n,s,l,h,p){if(null!=h){let _,D=!1;ui(h)?_=h:Xr(h)&&(D=!0,h=h[0]);const x=mi(h);0===n&&null!==l?null==p?mc(s,l,x):rl(s,l,x,p||null,!0):1===n&&null!==l?rl(s,l,x,p||null,!0):2===n?function Kh(n,s,l){const h=Kl(n,s);h&&function nh(n,s,l,h){n.removeChild(s,l,h)}(n,h,s,l)}(s,x,D):3===n&&s.destroyNode(x),null!=_&&function Gc(n,s,l,h,p){const _=l[7];_!==mi(l)&&fc(s,n,h,_,p);for(let x=10;x<l.length;x++){const F=l[x];sh(F[1],F,n,s,h,_)}}(s,n,_,l,p)}}function Fu(n,s,l){return n.createElement(s,l)}function Gf(n,s){const l=n[9],h=l.indexOf(s),p=s[3];512&s[2]&&(s[2]&=-513,Ui(p,-1)),l.splice(h,1)}function gc(n,s){if(n.length<=10)return;const l=10+s,h=n[l];if(h){const p=h[17];null!==p&&p!==n&&Gf(p,h),s>0&&(n[l-1][4]=h[4]);const _=Bl(n,10+s);!function md(n,s){sh(n,s,s[11],2,null,null),s[0]=null,s[6]=null}(h[1],h);const D=_[19];null!==D&&D.detachView(_[1]),h[3]=null,h[4]=null,h[2]&=-65}return h}function Xd(n,s){if(!(128&s[2])){const l=s[11];l.destroyNode&&sh(n,s,l,3,null,null),function Jd(n){let s=n[13];if(!s)return eh(n[1],n);for(;s;){let l=null;if(Xr(s))l=s[13];else{const h=s[10];h&&(l=h)}if(!l){for(;s&&!s[4]&&s!==n;)Xr(s)&&eh(s[1],s),s=s[3];null===s&&(s=n),Xr(s)&&eh(s[1],s),l=s&&s[4]}s=l}}(s)}}function eh(n,s){if(!(128&s[2])){s[2]&=-65,s[2]|=128,function th(n,s){let l;if(null!=n&&null!=(l=n.destroyHooks))for(let h=0;h<l.length;h+=2){const p=s[l[h]];if(!(p instanceof xa)){const _=l[h+1];if(Array.isArray(_))for(let D=0;D<_.length;D+=2){const x=p[_[D]],F=_[D+1];try{F.call(x)}finally{}}else try{_.call(p)}finally{}}}}(n,s),function _d(n,s){const l=n.cleanup,h=s[7];let p=-1;if(null!==l)for(let _=0;_<l.length-1;_+=2)if("string"==typeof l[_]){const D=l[_+1],x="function"==typeof D?D(s):mi(s[D]),F=h[p=l[_+2]],W=l[_+3];"boolean"==typeof W?x.removeEventListener(l[_],F,W):W>=0?h[p=W]():h[p=-W].unsubscribe(),_+=2}else{const D=h[p=l[_+1]];l[_].call(D)}if(null!==h){for(let _=p+1;_<h.length;_++)(0,h[_])();s[7]=null}}(n,s),1===s[1].type&&s[11].destroy();const l=s[17];if(null!==l&&ui(s[3])){l!==s[3]&&Gf(l,s);const h=s[19];null!==h&&h.detachView(n)}!function en(n){ae.delete(n[20])}(s)}}function Lu(n,s,l){return function jo(n,s,l){let h=s;for(;null!==h&&40&h.type;)h=(s=h).parent;if(null===h)return l[0];if(2&h.flags){const p=n.data[h.directiveStart].encapsulation;if(p===ht.None||p===ht.Emulated)return null}return Vi(h,l)}(n,s.parent,l)}function rl(n,s,l,h,p){n.insertBefore(s,l,h,p)}function mc(n,s,l){n.appendChild(s,l)}function lo(n,s,l,h,p){null!==h?rl(n,s,l,h,p):mc(n,s,l)}function Kl(n,s){return n.parentNode(s)}function Vu(n,s,l){return ql(n,s,l)}let yc,vd,ju,ql=function Wh(n,s,l){return 40&n.type?Vi(n,l):null};function rh(n,s,l,h){const p=Lu(n,h,s),_=s[11],x=Vu(h.parent||s[6],h,s);if(null!=p)if(Array.isArray(l))for(let F=0;F<l.length;F++)lo(_,p,l[F],x,!1);else lo(_,p,l,x,!1)}function Cl(n,s){if(null!==s){const l=s.type;if(3&l)return Vi(s,n);if(4&l)return sl(-1,n[s.index]);if(8&l){const h=s.child;if(null!==h)return Cl(n,h);{const p=n[s.index];return ui(p)?sl(-1,p):mi(p)}}if(32&l)return Yd(s,n)()||mi(n[s.index]);{const h=ih(n,s);return null!==h?Array.isArray(h)?h[0]:Cl(gd(n[16]),h):Cl(n,s.next)}}return null}function ih(n,s){return null!==s?n[16][6].projection[s.projection]:null}function sl(n,s){const l=10+n+1;if(l<s.length){const h=s[l],p=h[1].firstChild;if(null!==p)return Cl(h,p)}return s[7]}function $c(n,s,l,h,p,_,D){for(;null!=l;){const x=h[l.index],F=l.type;if(D&&0===s&&(x&&ms(mi(x),h),l.flags|=4),64!=(64&l.flags))if(8&F)$c(n,s,l.child,h,p,_,!1),fc(s,n,p,x,_);else if(32&F){const W=Yd(l,h);let re;for(;re=W();)fc(s,n,p,re,_);fc(s,n,p,x,_)}else 16&F?gr(n,s,h,l,p,_):fc(s,n,p,x,_);l=D?l.projectionNext:l.next}}function sh(n,s,l,h,p,_){$c(l,h,n.firstChild,s,p,_,!1)}function gr(n,s,l,h,p,_){const D=l[16],F=D[6].projection[h.projection];if(Array.isArray(F))for(let W=0;W<F.length;W++)fc(s,n,p,F[W],_);else $c(n,s,F,D[3],p,_,!0)}function ah(n,s,l){n.setAttribute(s,"style",l)}function lh(n,s,l){""===l?n.removeAttribute(s,"class"):n.setAttribute(s,"class",l)}function Ys(n){return function Wc(){if(void 0===yc&&(yc=null,mt.trustedTypes))try{yc=mt.trustedTypes.createPolicy("angular",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return yc}()?.createHTML(n)||n}function _c(n){vd=n}function Yh(n){return function Zl(){if(void 0===ju&&(ju=null,mt.trustedTypes))try{ju=mt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:n=>n,createScript:n=>n,createScriptURL:n=>n})}catch{}return ju}()?.createHTML(n)||n}class Gp{constructor(s){this.changingThisBreaksApplicationSecurity=s}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Qs(n){return n instanceof Gp?n.changingThisBreaksApplicationSecurity:n}function Hu(n,s){const l=function zf(n){return n instanceof Gp&&n.getTypeName()||null}(n);if(null!=l&&l!==s){if("ResourceURL"===l&&"URL"===s)return!0;throw new Error(`Required a safe ${s}, got a ${l} (see https://g.co/ng/security#xss)`)}return l===s}class Kf{constructor(s){this.inertDocumentHelper=s}getInertBodyElement(s){s="<body><remove></remove>"+s;try{const l=(new window.DOMParser).parseFromString(Ys(s),"text/html").body;return null===l?this.inertDocumentHelper.getInertBodyElement(s):(l.removeChild(l.firstChild),l)}catch{return null}}}class C{constructor(s){if(this.defaultDoc=s,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const l=this.inertDocument.createElement("html");this.inertDocument.appendChild(l);const h=this.inertDocument.createElement("body");l.appendChild(h)}}getInertBodyElement(s){const l=this.inertDocument.createElement("template");if("content"in l)return l.innerHTML=Ys(s),l;const h=this.inertDocument.createElement("body");return h.innerHTML=Ys(s),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(h),h}stripCustomNsAttrs(s){const l=s.attributes;for(let p=l.length-1;0<p;p--){const D=l.item(p).name;("xmlns:ns1"===D||0===D.indexOf("ns1:"))&&s.removeAttribute(D)}let h=s.firstChild;for(;h;)h.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(h),h=h.nextSibling}}const y=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function T(n){return(n=String(n)).match(y)?n:"unsafe:"+n}function $(n){const s={};for(const l of n.split(","))s[l]=!0;return s}function J(...n){const s={};for(const l of n)for(const h in l)l.hasOwnProperty(h)&&(s[h]=!0);return s}const me=$("area,br,col,hr,img,wbr"),Xe=$("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),kt=$("rp,rt"),os=J(me,J(Xe,$("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),J(kt,$("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),J(kt,Xe)),Va=$("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),wc=J(Va,$("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),$("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Cd=$("script,style,template");class Dd{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(s){let l=s.firstChild,h=!0;for(;l;)if(l.nodeType===Node.ELEMENT_NODE?h=this.startElement(l):l.nodeType===Node.TEXT_NODE?this.chars(l.nodeValue):this.sanitizedSomething=!0,h&&l.firstChild)l=l.firstChild;else for(;l;){l.nodeType===Node.ELEMENT_NODE&&this.endElement(l);let p=this.checkClobberedElement(l,l.nextSibling);if(p){l=p;break}l=this.checkClobberedElement(l,l.parentNode)}return this.buf.join("")}startElement(s){const l=s.nodeName.toLowerCase();if(!os.hasOwnProperty(l))return this.sanitizedSomething=!0,!Cd.hasOwnProperty(l);this.buf.push("<"),this.buf.push(l);const h=s.attributes;for(let p=0;p<h.length;p++){const _=h.item(p),D=_.name,x=D.toLowerCase();if(!wc.hasOwnProperty(x)){this.sanitizedSomething=!0;continue}let F=_.value;Va[x]&&(F=T(F)),this.buf.push(" ",D,'="',Xh(F),'"')}return this.buf.push(">"),!0}endElement(s){const l=s.nodeName.toLowerCase();os.hasOwnProperty(l)&&!me.hasOwnProperty(l)&&(this.buf.push("</"),this.buf.push(l),this.buf.push(">"))}chars(s){this.buf.push(Xh(s))}checkClobberedElement(s,l){if(l&&(s.compareDocumentPosition(l)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${s.outerHTML}`);return l}}const ch=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,zp=/([^\#-~ |!])/g;function Xh(n){return n.replace(/&/g,"&amp;").replace(ch,function(s){return"&#"+(1024*(s.charCodeAt(0)-55296)+(s.charCodeAt(1)-56320)+65536)+";"}).replace(zp,function(s){return"&#"+s.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Kc;function dh(n){return"content"in n&&function ef(n){return n.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===n.nodeName}(n)?n.content:null}var Js=(()=>((Js=Js||{})[Js.NONE=0]="NONE",Js[Js.HTML=1]="HTML",Js[Js.STYLE=2]="STYLE",Js[Js.SCRIPT=3]="SCRIPT",Js[Js.URL=4]="URL",Js[Js.RESOURCE_URL=5]="RESOURCE_URL",Js))();function Sy(n){const s=al();return s?Yh(s.sanitize(Js.HTML,n)||""):Hu(n,"HTML")?Yh(Qs(n)):function Wp(n,s){let l=null;try{Kc=Kc||function Ec(n){const s=new C(n);return function m(){try{return!!(new window.DOMParser).parseFromString(Ys(""),"text/html")}catch{return!1}}()?new Kf(s):s}(n);let h=s?String(s):"";l=Kc.getInertBodyElement(h);let p=5,_=h;do{if(0===p)throw new Error("Failed to sanitize html because the input is unstable");p--,h=_,_=l.innerHTML,l=Kc.getInertBodyElement(h)}while(h!==_);return Ys((new Dd).sanitizeChildren(dh(l)||l))}finally{if(l){const h=dh(l)||l;for(;h.firstChild;)h.removeChild(h.firstChild)}}}(function Zh(){return void 0!==vd?vd:typeof document<"u"?document:void 0}(),pt(n))}function Ic(n){const s=al();return s?s.sanitize(Js.URL,n)||"":Hu(n,"URL")?Qs(n):T(pt(n))}function al(){const n=xt();return n&&n[12]}const nf=new ri("ENVIRONMENT_INITIALIZER"),um=new ri("INJECTOR",-1),rf=new ri("INJECTOR_DEF_TYPES");class Kp{get(s,l=Er){if(l===Er){const h=new Error(`NullInjectorError: No provider for ${Ge(s)}!`);throw h.name="NullInjectorError",h}return l}}function cm(...n){return{\u0275providers:qp(0,n)}}function qp(n,...s){const l=[],h=new Set;let p;return Bs(s,_=>{const D=_;hh(D,l,[],h)&&(p||(p=[]),p.push(D))}),void 0!==p&&dm(p,l),l}function dm(n,s){for(let l=0;l<n.length;l++){const{providers:p}=n[l];Bs(p,_=>{s.push(_)})}}function hh(n,s,l,h){if(!(n=Se(n)))return!1;let p=null,_=Xn(n);const D=!_&&rt(n);if(_||D){if(D&&!D.standalone)return!1;p=n}else{const F=n.ngModule;if(_=Xn(F),!_)return!1;p=F}const x=h.has(p);if(D){if(x)return!1;if(h.add(p),D.dependencies){const F="function"==typeof D.dependencies?D.dependencies():D.dependencies;for(const W of F)hh(W,s,l,h)}}else{if(!_)return!1;{if(null!=_.imports&&!x){let W;h.add(p);try{Bs(_.imports,re=>{hh(re,s,l,h)&&(W||(W=[]),W.push(re))})}finally{}void 0!==W&&dm(W,s)}if(!x){const W=ds(p)||(()=>new p);s.push({provide:p,useFactory:W,deps:jt},{provide:rf,useValue:p,multi:!0},{provide:nf,useValue:()=>Yi(p),multi:!0})}const F=_.providers;null==F||x||Bs(F,re=>{s.push(re)})}}return p!==n&&void 0!==n.providers}const Yp=Ne({provide:String,useValue:Ne});function hm(n){return null!==n&&"object"==typeof n&&Yp in n}function qc(n){return"function"==typeof n}const Qp=new ri("Set Injector scope."),Jp={},z_={};let Xp;function Gu(){return void 0===Xp&&(Xp=new Kp),Xp}class pu{}class eg extends pu{constructor(s,l,h,p){super(),this.parent=l,this.source=h,this.scopes=p,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Yc(s,D=>this.processProvider(D)),this.records.set(um,sf(void 0,this)),p.has("environment")&&this.records.set(pu,sf(void 0,this));const _=this.records.get(Qp);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(rf.multi,jt,Ut.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const s of this._ngOnDestroyHooks)s.ngOnDestroy();for(const s of this._onDestroyHooks)s()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(s){this._onDestroyHooks.push(s)}runInContext(s){this.assertNotDestroyed();const l=hi(this),h=er(void 0);try{return s()}finally{hi(l),er(h)}}get(s,l=Er,h=Ut.Default){this.assertNotDestroyed();const p=hi(this),_=er(void 0);try{if(!(h&Ut.SkipSelf)){let x=this.records.get(s);if(void 0===x){const F=function bd(n){return"function"==typeof n||"object"==typeof n&&n instanceof ri}(s)&&En(s);x=F&&this.injectableDefInScope(F)?sf(pm(s),Jp):null,this.records.set(s,x)}if(null!=x)return this.hydrate(s,x)}return(h&Ut.Self?Gu():this.parent).get(s,l=h&Ut.Optional&&l===Er?null:l)}catch(D){if("NullInjectorError"===D.name){if((D[Ti]=D[Ti]||[]).unshift(Ge(s)),p)throw D;return function Lc(n,s,l,h){const p=n[Ti];throw s[wa]&&p.unshift(s[wa]),n.message=function xu(n,s,l,h=null){n=n&&"\n"===n.charAt(0)&&"\u0275"==n.charAt(1)?n.slice(2):n;let p=Ge(s);if(Array.isArray(s))p=s.map(Ge).join(" -> ");else if("object"==typeof s){let _=[];for(let D in s)if(s.hasOwnProperty(D)){let x=s[D];_.push(D+":"+("string"==typeof x?JSON.stringify(x):Ge(x)))}p=`{${_.join(", ")}}`}return`${l}${h?"("+h+")":""}[${p}]: ${n.replace(Lo,"\n  ")}`}("\n"+n.message,p,l,h),n.ngTokenPath=p,n[Ti]=null,n}(D,s,"R3InjectorError",this.source)}throw D}finally{er(_),hi(p)}}resolveInjectorInitializers(){const s=hi(this),l=er(void 0);try{const h=this.get(nf.multi,jt,Ut.Self);for(const p of h)p()}finally{hi(s),er(l)}}toString(){const s=[],l=this.records;for(const h of l.keys())s.push(Ge(h));return`R3Injector[${s.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new ct(205,!1)}processProvider(s){let l=qc(s=Se(s))?s:Se(s&&s.provide);const h=function Zc(n){return hm(n)?sf(void 0,n.useValue):sf(gm(n),Jp)}(s);if(qc(s)||!0!==s.multi)this.records.get(l);else{let p=this.records.get(l);p||(p=sf(void 0,Jp,!0),p.factory=()=>Fc(p.multi),this.records.set(l,p)),l=s,p.multi.push(s)}this.records.set(l,h)}hydrate(s,l){return l.value===Jp&&(l.value=z_,l.value=l.factory()),"object"==typeof l.value&&l.value&&function tg(n){return null!==n&&"object"==typeof n&&"function"==typeof n.ngOnDestroy}(l.value)&&this._ngOnDestroyHooks.add(l.value),l.value}injectableDefInScope(s){if(!s.providedIn)return!1;const l=Se(s.providedIn);return"string"==typeof l?"any"===l||this.scopes.has(l):this.injectorDefTypes.has(l)}}function pm(n){const s=En(n),l=null!==s?s.factory:ds(n);if(null!==l)return l;if(n instanceof ri)throw new ct(204,!1);if(n instanceof Function)return function Ry(n){const s=n.length;if(s>0)throw jl(s,"?"),new ct(204,!1);const l=function fr(n){const s=n&&(n[Jt]||n[kr]);if(s){const l=function Hn(n){if(n.hasOwnProperty("name"))return n.name;const s=(""+n).match(/^function\s*([^\s(]+)/);return null===s?"":s[1]}(n);return console.warn(`DEPRECATED: DI is instantiating a token "${l}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${l}" class.`),s}return null}(n);return null!==l?()=>l.factory(n):()=>new n}(n);throw new ct(204,!1)}function gm(n,s,l){let h;if(qc(n)){const p=Se(n);return ds(p)||pm(p)}if(hm(n))h=()=>Se(n.useValue);else if(function Zf(n){return!(!n||!n.useFactory)}(n))h=()=>n.useFactory(...Fc(n.deps||[]));else if(function fm(n){return!(!n||!n.useExisting)}(n))h=()=>Yi(Se(n.useExisting));else{const p=Se(n&&(n.useClass||n.provide));if(!function Yf(n){return!!n.deps}(n))return ds(p)||pm(p);h=()=>new p(...Fc(n.deps))}return h}function sf(n,s,l=!1){return{factory:n,value:s,multi:l?[]:void 0}}function Td(n){return!!n.\u0275providers}function Yc(n,s){for(const l of n)Array.isArray(l)?Yc(l,s):Td(l)?Yc(l.\u0275providers,s):s(l)}class mm{}class ng{resolveComponentFactory(s){throw function Rs(n){const s=Error(`No component factory found for ${Ge(n)}. Did you add it to @NgModule.entryComponents?`);return s.ngComponent=n,s}(s)}}let Jf=(()=>{class n{}return n.NULL=new ng,n})();function My(){return fh(Di(),xt())}function fh(n,s){return new Sd(Vi(n,s))}let Sd=(()=>{class n{constructor(l){this.nativeElement=l}}return n.__NG_ELEMENT_ID__=My,n})();function Xf(n){return n instanceof Sd?n.nativeElement:n}class _m{}let xy=(()=>{class n{}return n.__NG_ELEMENT_ID__=()=>function W_(){const n=xt(),l=yi(Di().index,n);return(Xr(l)?l:n)[11]}(),n})(),K_=(()=>{class n{}return n.\u0275prov=et({token:n,providedIn:"root",factory:()=>null}),n})();class vm{constructor(s){this.full=s,this.major=s.split(".")[0],this.minor=s.split(".")[1],this.patch=s.split(".").slice(2).join(".")}}const af=new vm("14.3.0"),Qc={};function rg(n){return n.ngOriginalError}class mh{constructor(){this._console=console}handleError(s){const l=this._findOriginalError(s);this._console.error("ERROR",s),l&&this._console.error("ORIGINAL ERROR",l)}_findOriginalError(s){let l=s&&rg(s);for(;l&&rg(l);)l=rg(l);return l||null}}function Xc(n){return n instanceof Function?n():n}function Yl(n,s,l){let h=n.length;for(;;){const p=n.indexOf(s,l);if(-1===p)return p;if(0===p||n.charCodeAt(p-1)<=32){const _=s.length;if(p+_===h||n.charCodeAt(p+_)<=32)return p}l=p+1}}const Cm="ng-template";function $o(n,s,l){let h=0;for(;h<n.length;){let p=n[h++];if(l&&"class"===p){if(p=n[h],-1!==Yl(p.toLowerCase(),s,0))return!0}else if(1===p){for(;h<n.length&&"string"==typeof(p=n[h++]);)if(p.toLowerCase()===s)return!0;return!1}}return!1}function Dm(n){return 4===n.type&&n.value!==Cm}function sg(n,s,l){return s===(4!==n.type||l?n.value:Cm)}function og(n,s,l){let h=4;const p=n.attrs||[],_=function vh(n){for(let s=0;s<n.length;s++)if(Ie(n[s]))return s;return n.length}(p);let D=!1;for(let x=0;x<s.length;x++){const F=s[x];if("number"!=typeof F){if(!D)if(4&h){if(h=2|1&h,""!==F&&!sg(n,F,l)||""===F&&1===s.length){if(gu(h))return!1;D=!0}}else{const W=8&h?F:s[++x];if(8&h&&null!==n.attrs){if(!$o(n.attrs,W,l)){if(gu(h))return!1;D=!0}continue}const le=Ad(8&h?"class":F,p,Dm(n),l);if(-1===le){if(gu(h))return!1;D=!0;continue}if(""!==W){let Pe;Pe=le>_?"":p[le+1].toLowerCase();const st=8&h?Pe:null;if(st&&-1!==Yl(st,W,0)||2&h&&W!==Pe){if(gu(h))return!1;D=!0}}}}else{if(!D&&!gu(h)&&!gu(F))return!1;if(D&&gu(F))continue;D=!1,h=F|1&h}}return gu(h)||D}function gu(n){return 0==(1&n)}function Ad(n,s,l,h){if(null===s)return-1;let p=0;if(h||!l){let _=!1;for(;p<s.length;){const D=s[p];if(D===n)return p;if(3===D||6===D)_=!0;else{if(1===D||2===D){let x=s[++p];for(;"string"==typeof x;)x=s[++p];continue}if(4===D)break;if(0===D){p+=4;continue}}p+=_?1:2}return-1}return function q_(n,s){let l=n.indexOf(4);if(l>-1)for(l++;l<n.length;){const h=n[l];if("number"==typeof h)return-1;if(h===s)return l;l++}return-1}(s,n)}function _h(n,s,l=!1){for(let h=0;h<s.length;h++)if(og(n,s[h],l))return!0;return!1}function ia(n,s){e:for(let l=0;l<s.length;l++){const h=s[l];if(n.length===h.length){for(let p=0;p<n.length;p++)if(n[p]!==h[p])continue e;return!0}}return!1}function np(n,s){return n?":not("+s.trim()+")":s}function Dc(n){let s=n[0],l=1,h=2,p="",_=!1;for(;l<n.length;){let D=n[l];if("string"==typeof D)if(2&h){const x=n[++l];p+="["+D+(x.length>0?'="'+x+'"':"")+"]"}else 8&h?p+="."+D:4&h&&(p+=" "+D);else""!==p&&!gu(D)&&(s+=np(_,p),p=""),h=D,_=_||!gu(h);l++}return""!==p&&(s+=np(_,p)),s}const Rr={};function Tm(n){Sm(rr(),xt(),Hr()+n,!1)}function Sm(n,s,l,h){if(!h)if(3==(3&s[2])){const _=n.preOrderCheckHooks;null!==_&&Yo(s,_,l)}else{const _=n.preOrderHooks;null!==_&&va(s,_,0,l)}ko(l)}function uf(n,s=null,l=null,h){const p=Rm(n,s,l,h);return p.resolveInjectorInitializers(),p}function Rm(n,s=null,l=null,h,p=new Set){const _=[l||jt,cm(n)];return h=h||("object"==typeof n?void 0:Ge(n)),new eg(_,s||Gu(),h||null,p)}let Wu=(()=>{class n{static create(l,h){if(Array.isArray(l))return uf({name:""},h,l,"");{const p=l.name??"";return uf({name:p},l.parent,l.providers,p)}}}return n.THROW_IF_NOT_FOUND=Er,n.NULL=new Kp,n.\u0275prov=et({token:n,providedIn:"any",factory:()=>Yi(um)}),n.__NG_ELEMENT_ID__=-1,n})();function qu(n,s=Ut.Default){const l=xt();return null===l?Yi(n,s):ou(Di(),l,Se(n),s)}function co(){throw new Error("invalid")}function Ch(n,s){return n<<17|s<<2}function ba(n){return n>>17&32767}function Lm(n){return 2|n}function ho(n){return(131068&n)>>2}function Vm(n,s){return-131069&n|s<<2}function pg(n){return 1|n}function Jy(n,s){const l=n.contentQueries;if(null!==l)for(let h=0;h<l.length;h+=2){const p=l[h],_=l[h+1];if(-1!==_){const D=n.data[_];fs(p),D.contentQueries(2,s[_],_)}}}function bh(n,s,l,h,p,_,D,x,F,W,re){const le=s.blueprint.slice();return le[0]=p,le[2]=76|h,(null!==re||n&&1024&n[2])&&(le[2]|=1024),$i(le),le[3]=le[15]=n,le[8]=l,le[10]=D||n&&n[10],le[11]=x||n&&n[11],le[12]=F||n&&n[12]||null,le[9]=W||n&&n[9]||null,le[6]=_,le[20]=function ze(){return be++}(),le[21]=re,le[16]=2==s.type?n[16]:le,le}function Sc(n,s,l,h,p){let _=n.data[s];if(null===_)_=function Jl(n,s,l,h,p){const _=Ar(),D=no(),F=n.data[s]=function ov(n,s,l,h,p,_){return{type:l,index:h,insertBeforeIndex:null,injectorIndex:s?s.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:p,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:s,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,D?_:_&&_.parent,l,s,h,p);return null===n.firstChild&&(n.firstChild=F),null!==_&&(D?null==_.child&&null!==F.parent&&(_.child=F):null===_.next&&(_.next=F)),F}(n,s,l,h,p),function Cs(){return fn.lFrame.inI18n}()&&(_.flags|=64);else if(64&_.type){_.type=l,_.value=h,_.attrs=p;const D=function Ns(){const n=fn.lFrame,s=n.currentTNode;return n.isParent?s:s.parent}();_.injectorIndex=null===D?-1:D.injectorIndex}return es(_,!0),_}function Md(n,s,l,h){if(0===l)return-1;const p=s.length;for(let _=0;_<l;_++)s.push(h),n.blueprint.push(h),n.data.push(null);return p}function td(n,s,l){fa(s);try{const h=n.viewQuery;null!==h&&yp(1,h,l);const p=n.template;null!==p&&Xy(n,s,p,1,l),n.firstCreatePass&&(n.firstCreatePass=!1),n.staticContentQueries&&Jy(n,s),n.staticViewQueries&&yp(2,n.viewQuery,l);const _=n.components;null!==_&&function _g(n,s){for(let l=0;l<s.length;l++)dv(n,s[l])}(s,_)}catch(h){throw n.firstCreatePass&&(n.incompleteFirstPass=!0,n.firstCreatePass=!1),h}finally{s[2]&=-5,Za()}}function gf(n,s,l,h){const p=s[2];if(128!=(128&p)){fa(s);try{$i(s),function lt(n){return fn.lFrame.bindingIndex=n}(n.bindingStartIndex),null!==l&&Xy(n,s,l,2,h);const D=3==(3&p);if(D){const W=n.preOrderCheckHooks;null!==W&&Yo(s,W,null)}else{const W=n.preOrderHooks;null!==W&&va(s,W,0,null),Du(s,0)}if(function d_(n){for(let s=$f(n);null!==s;s=hc(s)){if(!s[2])continue;const l=s[9];for(let h=0;h<l.length;h++){const p=l[h],_=p[3];0==(512&p[2])&&Ui(_,1),p[2]|=512}}}(s),function c_(n){for(let s=$f(n);null!==s;s=hc(s))for(let l=10;l<s.length;l++){const h=s[l],p=h[1];hs(h)&&gf(p,h,p.template,h[8])}}(s),null!==n.contentQueries&&Jy(n,s),D){const W=n.contentCheckHooks;null!==W&&Yo(s,W)}else{const W=n.contentHooks;null!==W&&va(s,W,1),Du(s,1)}!function Qy(n,s){const l=n.hostBindingOpCodes;if(null!==l)try{for(let h=0;h<l.length;h++){const p=l[h];if(p<0)ko(~p);else{const _=p,D=l[++h],x=l[++h];Ps(D,_),x(2,s[_])}}}finally{ko(-1)}}(n,s);const x=n.components;null!==x&&function zm(n,s){for(let l=0;l<s.length;l++)cv(n,s[l])}(s,x);const F=n.viewQuery;if(null!==F&&yp(2,F,h),D){const W=n.viewCheckHooks;null!==W&&Yo(s,W)}else{const W=n.viewHooks;null!==W&&va(s,W,2),Du(s,2)}!0===n.firstUpdatePass&&(n.firstUpdatePass=!1),s[2]&=-41,512&s[2]&&(s[2]&=-513,Ui(s[3],-1))}finally{Za()}}}function Xy(n,s,l,h,p){const _=Hr(),D=2&h;try{ko(-1),D&&s.length>22&&Sm(n,s,22,!1),l(h,p)}finally{ko(_)}}function e_(n,s,l){if(Qi(s)){const p=s.directiveEnd;for(let _=s.directiveStart;_<p;_++){const D=n.data[_];D.contentQueries&&D.contentQueries(1,l[_],_)}}}function vg(n,s,l){!ua()||(function yf(n,s,l,h){const p=l.directiveStart,_=l.directiveEnd;n.firstCreatePass||wo(l,s),ms(h,s);const D=l.initialInputs;for(let x=p;x<_;x++){const F=n.data[x],W=Ai(F);W&&Ym(s,l,F);const re=au(s,n,x,l);ms(re,s),null!==D&&u_(0,x-p,re,F,0,D),W&&(yi(l.index,s)[8]=re)}}(n,s,l,Vi(l,s)),128==(128&l.flags)&&function av(n,s,l){const h=l.directiveStart,p=l.directiveEnd,_=l.index,D=function Ds(){return fn.lFrame.currentDirectiveIndex}();try{ko(_);for(let x=h;x<p;x++){const F=n.data[x],W=s[x];Zi(x),(null!==F.hostBindings||0!==F.hostVars||null!==F.hostAttrs)&&s_(F,W)}}finally{ko(-1),Zi(D)}}(n,s,l))}function Eg(n,s,l=Vi){const h=s.localNames;if(null!==h){let p=s.index+1;for(let _=0;_<h.length;_+=2){const D=h[_+1],x=-1===D?l(s,n):n[D];n[p++]=x}}}function t_(n){const s=n.tView;return null===s||s.incompleteFirstPass?n.tView=mf(1,null,n.template,n.decls,n.vars,n.directiveDefs,n.pipeDefs,n.viewQuery,n.schemas,n.consts):s}function mf(n,s,l,h,p,_,D,x,F,W){const re=22+h,le=re+p,Pe=function wg(n,s){const l=[];for(let h=0;h<s;h++)l.push(h<n?null:Rr);return l}(re,le),st="function"==typeof W?W():W;return Pe[1]={type:n,blueprint:Pe,template:l,queries:null,viewQuery:x,declTNode:s,data:Pe.slice().fill(null,re),bindingStartIndex:re,expandoStartIndex:le,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof D?D():D,firstChild:null,schemas:F,consts:st,incompleteFirstPass:!1}}function Ig(n,s,l,h){const p=bg(s);null===l?p.push(h):(p.push(l),n.firstCreatePass&&h_(n).push(h,p.length-1))}function Cg(n,s,l){for(let h in n)if(n.hasOwnProperty(h)){const p=n[h];(l=null===l?{}:l).hasOwnProperty(h)?l[h].push(s,p):l[h]=[s,p]}return l}function r_(n,s){const h=s.directiveEnd,p=n.data,_=s.attrs,D=[];let x=null,F=null;for(let W=s.directiveStart;W<h;W++){const re=p[W],le=re.inputs,Pe=null===_||Dm(s)?null:lv(le,_);D.push(Pe),x=Cg(le,W,x),F=Cg(re.outputs,W,F)}null!==x&&(x.hasOwnProperty("class")&&(s.flags|=16),x.hasOwnProperty("style")&&(s.flags|=32)),s.initialInputs=D,s.inputs=x,s.outputs=F}function Ki(n,s){const l=yi(s,n);16&l[2]||(l[2]|=32)}function Nd(n,s,l,h){let p=!1;if(ua()){const _=function qm(n,s,l){const h=n.directiveRegistry;let p=null;if(h)for(let _=0;_<h.length;_++){const D=h[_];_h(l,D.selectors,!1)&&(p||(p=[]),Fo(wo(l,s),n,D.type),Ai(D)?(Dg(n,l),p.unshift(D)):p.push(D))}return p}(n,s,l),D=null===h?null:{"":-1};if(null!==_){p=!0,a_(l,n.data.length,_.length);for(let re=0;re<_.length;re++){const le=_[re];le.providersResolver&&le.providersResolver(le)}let x=!1,F=!1,W=Md(n,s,_.length,null);for(let re=0;re<_.length;re++){const le=_[re];l.mergedAttrs=bt(l.mergedAttrs,le.hostAttrs),l_(n,l,s,W,le),o_(W,le,D),null!==le.contentQueries&&(l.flags|=8),(null!==le.hostBindings||null!==le.hostAttrs||0!==le.hostVars)&&(l.flags|=128);const Pe=le.type.prototype;!x&&(Pe.ngOnChanges||Pe.ngOnInit||Pe.ngDoCheck)&&((n.preOrderHooks||(n.preOrderHooks=[])).push(l.index),x=!0),!F&&(Pe.ngOnChanges||Pe.ngDoCheck)&&((n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(l.index),F=!0),W++}r_(n,l)}D&&function Zm(n,s,l){if(s){const h=n.localNames=[];for(let p=0;p<s.length;p+=2){const _=l[s[p+1]];if(null==_)throw new ct(-301,!1);h.push(s[p],_)}}}(l,h,D)}return l.mergedAttrs=bt(l.mergedAttrs,l.attrs),p}function Th(n,s,l,h,p,_){const D=_.hostBindings;if(D){let x=n.hostBindingOpCodes;null===x&&(x=n.hostBindingOpCodes=[]);const F=~s.index;(function i_(n){let s=n.length;for(;s>0;){const l=n[--s];if("number"==typeof l&&l<0)return l}return 0})(x)!=F&&x.push(F),x.push(h,p,D)}}function s_(n,s){null!==n.hostBindings&&n.hostBindings(1,s)}function Dg(n,s){s.flags|=2,(n.components||(n.components=[])).push(s.index)}function o_(n,s,l){if(l){if(s.exportAs)for(let h=0;h<s.exportAs.length;h++)l[s.exportAs[h]]=n;Ai(s)&&(l[""]=n)}}function a_(n,s,l){n.flags|=1,n.directiveStart=s,n.directiveEnd=s+l,n.providerIndexes=s}function l_(n,s,l,h,p){n.data[h]=p;const _=p.factory||(p.factory=ds(p.type)),D=new xa(_,Ai(p),qu);n.blueprint[h]=D,l[h]=D,Th(n,s,0,h,Md(n,l,p.hostVars,Rr),p)}function Ym(n,s,l){const h=Vi(s,n),p=t_(l),_=n[10],D=_f(n,bh(n,p,null,l.onPush?32:16,h,s,_,_.createRenderer(h,l),null,null,null));n[s.index]=D}function yu(n,s,l,h,p,_){const D=Vi(n,s);!function Qm(n,s,l,h,p,_,D){if(null==_)n.removeAttribute(s,p,l);else{const x=null==D?pt(_):D(_,h||"",p);n.setAttribute(s,p,x,l)}}(s[11],D,_,n.value,l,h,p)}function u_(n,s,l,h,p,_){const D=_[s];if(null!==D){const x=h.setInput;for(let F=0;F<D.length;){const W=D[F++],re=D[F++],le=D[F++];null!==x?h.setInput(l,le,W,re):l[re]=le}}}function lv(n,s){let l=null,h=0;for(;h<s.length;){const p=s[h];if(0!==p)if(5!==p){if("number"==typeof p)break;n.hasOwnProperty(p)&&(null===l&&(l=[]),l.push(p,n[p],s[h+1])),h+=2}else h+=2;else h+=4}return l}function Jm(n,s,l,h){return new Array(n,!0,!1,s,null,0,h,l,null,null)}function cv(n,s){const l=yi(s,n);if(hs(l)){const h=l[1];48&l[2]?gf(h,l,h.template,l[8]):l[5]>0&&Xm(l)}}function Xm(n){for(let h=$f(n);null!==h;h=hc(h))for(let p=10;p<h.length;p++){const _=h[p];if(hs(_))if(512&_[2]){const D=_[1];gf(D,_,D.template,_[8])}else _[5]>0&&Xm(_)}const l=n[1].components;if(null!==l)for(let h=0;h<l.length;h++){const p=yi(l[h],n);hs(p)&&p[5]>0&&Xm(p)}}function dv(n,s){const l=yi(s,n),h=l[1];(function hv(n,s){for(let l=s.length;l<n.blueprint.length;l++)s.push(n.blueprint[l])})(h,l),td(h,l,l[8])}function _f(n,s){return n[13]?n[14][4]=s:n[13]=s,n[14]=s,s}function mp(n){for(;n;){n[2]|=32;const s=gd(n);if(ci(n)&&!s)return n;n=s}return null}function vf(n,s,l,h=!0){const p=s[10];p.begin&&p.begin();try{gf(n,s,n.template,l)}catch(D){throw h&&ey(s,D),D}finally{p.end&&p.end()}}function yp(n,s,l){fs(0),s(n,l)}function bg(n){return n[7]||(n[7]=[])}function h_(n){return n.cleanup||(n.cleanup=[])}function ey(n,s){const l=n[9],h=l?l.get(mh,null):null;h&&h.handleError(s)}function ty(n,s,l,h,p){for(let _=0;_<l.length;){const D=l[_++],x=l[_++],F=s[D],W=n.data[D];null!==W.setInput?W.setInput(F,p,h,x):F[x]=p}}function Xl(n,s,l){const h=Vs(s,n);!function Hp(n,s,l){n.setValue(s,l)}(n[11],h,l)}function Zu(n,s,l){let h=l?n.styles:null,p=l?n.classes:null,_=0;if(null!==s)for(let D=0;D<s.length;D++){const x=s[D];"number"==typeof x?_=x:1==_?p=Ye(p,x):2==_&&(h=Ye(h,x+": "+s[++D]+";"))}l?n.styles=h:n.stylesWithoutHost=h,l?n.classes=p:n.classesWithoutHost=p}function Sh(n,s,l,h,p=!1){for(;null!==l;){const _=s[l.index];if(null!==_&&h.push(mi(_)),ui(_))for(let x=10;x<_.length;x++){const F=_[x],W=F[1].firstChild;null!==W&&Sh(F[1],F,W,h)}const D=l.type;if(8&D)Sh(n,s,l.child,h);else if(32&D){const x=Yd(l,s);let F;for(;F=x();)h.push(F)}else if(16&D){const x=ih(s,l);if(Array.isArray(x))h.push(...x);else{const F=gd(s[16]);Sh(F[1],F,x,h,!0)}}l=p?l.projectionNext:l.next}return h}class Ah{constructor(s,l){this._lView=s,this._cdRefInjectingView=l,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const s=this._lView,l=s[1];return Sh(l,s,l.firstChild,[])}get context(){return this._lView[8]}set context(s){this._lView[8]=s}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const s=this._lView[3];if(ui(s)){const l=s[8],h=l?l.indexOf(this):-1;h>-1&&(gc(s,h),Bl(l,h))}this._attachedToViewContainer=!1}Xd(this._lView[1],this._lView)}onDestroy(s){Ig(this._lView[1],this._lView,null,s)}markForCheck(){mp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){vf(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new ct(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Qd(n,s){sh(n,s,s[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(s){if(this._attachedToViewContainer)throw new ct(902,!1);this._appRef=s}}class _p extends Ah{constructor(s){super(s),this._view=s}detectChanges(){const s=this._view;vf(s[1],s,s[8],!1)}checkNoChanges(){}get context(){return null}}class vp extends Jf{constructor(s){super(),this.ngModule=s}resolveComponentFactory(s){const l=rt(s);return new Yu(l,this.ngModule)}}function Ba(n){const s=[];for(let l in n)n.hasOwnProperty(l)&&s.push({propName:n[l],templateName:l});return s}class Ep{constructor(s,l){this.injector=s,this.parentInjector=l}get(s,l,h){const p=this.injector.get(s,Qc,h);return p!==Qc||l===Qc?p:this.parentInjector.get(s,l,h)}}class Yu extends mm{constructor(s,l){super(),this.componentDef=s,this.ngModule=l,this.componentType=s.type,this.selector=function bm(n){return n.map(Dc).join(",")}(s.selectors),this.ngContentSelectors=s.ngContentSelectors?s.ngContentSelectors:[],this.isBoundToModule=!!l}get inputs(){return Ba(this.componentDef.inputs)}get outputs(){return Ba(this.componentDef.outputs)}create(s,l,h,p){let _=(p=p||this.ngModule)instanceof pu?p:p?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const D=_?new Ep(s,_):s,x=D.get(_m,null);if(null===x)throw new ct(407,!1);const F=D.get(K_,null),W=x.createRenderer(null,this.componentDef),re=this.componentDef.selectors[0][0]||"div",le=h?function sv(n,s,l){return n.selectRootElement(s,l===ht.ShadowDom)}(W,h,this.componentDef.encapsulation):Fu(W,re,function Sg(n){const s=n.toLowerCase();return"svg"===s?"svg":"math"===s?"math":null}(re)),Pe=this.componentDef.onPush?288:272,st=mf(0,null,null,1,0,null,null,null,null,null),Nt=bh(null,st,null,Pe,null,null,x,W,F,D,null);let tn,gn;fa(Nt);try{const jn=function ul(n,s,l,h,p,_){const D=l[1];l[22]=n;const F=Sc(D,22,2,"#host",null),W=F.mergedAttrs=s.hostAttrs;null!==W&&(Zu(F,W,!0),null!==n&&(te(p,n,W),null!==F.classes&&lh(p,n,F.classes),null!==F.styles&&ah(p,n,F.styles)));const re=h.createRenderer(n,s),le=bh(l,t_(s),null,s.onPush?32:16,l[22],F,h,re,_||null,null,null);return D.firstCreatePass&&(Fo(wo(F,l),D,s.type),Dg(D,F),a_(F,l.length,1)),_f(l,le),l[22]=le}(le,this.componentDef,Nt,x,W);if(le)if(h)te(W,le,["ng-version",af.full]);else{const{attrs:hr,classes:Bt}=function Z_(n){const s=[],l=[];let h=1,p=2;for(;h<n.length;){let _=n[h];if("string"==typeof _)2===p?""!==_&&s.push(_,n[++h]):8===p&&l.push(_);else{if(!gu(p))break;p=_}h++}return{attrs:s,classes:l}}(this.componentDef.selectors[0]);hr&&te(W,le,hr),Bt&&Bt.length>0&&lh(W,le,Bt.join(" "))}if(gn=Ws(st,22),void 0!==l){const hr=gn.projection=[];for(let Bt=0;Bt<this.ngContentSelectors.length;Bt++){const Mr=l[Bt];hr.push(null!=Mr?Array.from(Mr):null)}}tn=function Rg(n,s,l,h){const p=l[1],_=function Km(n,s,l){const h=Di();n.firstCreatePass&&(l.providersResolver&&l.providersResolver(l),l_(n,h,s,Md(n,s,1,null),l),r_(n,h));const p=au(s,n,h.directiveStart,h);ms(p,s);const _=Vi(h,s);return _&&ms(_,s),p}(p,l,s);if(n[8]=l[8]=_,null!==h)for(const x of h)x(_,s);if(s.contentQueries){const x=Di();s.contentQueries(1,_,x.directiveStart)}const D=Di();return!p.firstCreatePass||null===s.hostBindings&&null===s.hostAttrs||(ko(D.index),Th(l[1],D,0,D.directiveStart,D.directiveEnd,s),s_(s,_)),_}(jn,this.componentDef,Nt,[fv]),td(st,Nt,null)}finally{Za()}return new Wv(this.componentType,tn,fh(gn,Nt),Nt,gn)}}class Wv extends class Qf{}{constructor(s,l,h,p,_){super(),this.location=h,this._rootLView=p,this._tNode=_,this.instance=l,this.hostView=this.changeDetectorRef=new _p(p),this.componentType=s}setInput(s,l){const h=this._tNode.inputs;let p;if(null!==h&&(p=h[s])){const _=this._rootLView;ty(_[1],_,p,s,l),Ki(_,this._tNode.index)}}get injector(){return new ps(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(s){this.hostView.onDestroy(s)}}function fv(){const n=Di();_a(xt()[1],n)}function iy(n){let s=function ry(n){return Object.getPrototypeOf(n.prototype).constructor}(n.type),l=!0;const h=[n];for(;s;){let p;if(Ai(n))p=s.\u0275cmp||s.\u0275dir;else{if(s.\u0275cmp)throw new ct(903,!1);p=s.\u0275dir}if(p){if(l){h.push(p);const D=n;D.inputs=Ef(n.inputs),D.declaredInputs=Ef(n.declaredInputs),D.outputs=Ef(n.outputs);const x=p.hostBindings;x&&sy(n,x);const F=p.viewQuery,W=p.contentQueries;if(F&&Kv(n,F),W&&Mg(n,W),Ve(n.inputs,p.inputs),Ve(n.declaredInputs,p.declaredInputs),Ve(n.outputs,p.outputs),Ai(p)&&p.data.animation){const re=n.data;re.animation=(re.animation||[]).concat(p.data.animation)}}const _=p.features;if(_)for(let D=0;D<_.length;D++){const x=_[D];x&&x.ngInherit&&x(n),x===iy&&(l=!1)}}s=Object.getPrototypeOf(s)}!function p_(n){let s=0,l=null;for(let h=n.length-1;h>=0;h--){const p=n[h];p.hostVars=s+=p.hostVars,p.hostAttrs=bt(p.hostAttrs,l=bt(l,p.hostAttrs))}}(h)}function Ef(n){return n===wn?{}:n===jt?[]:n}function Kv(n,s){const l=n.viewQuery;n.viewQuery=l?(h,p)=>{s(h,p),l(h,p)}:s}function Mg(n,s){const l=n.contentQueries;n.contentQueries=l?(h,p,_)=>{s(h,p,_),l(h,p,_)}:s}function sy(n,s){const l=n.hostBindings;n.hostBindings=l?(h,p)=>{s(h,p),l(h,p)}:s}let Rh=null;function _u(){if(!Rh){const n=mt.Symbol;if(n&&n.iterator)Rh=n.iterator;else{const s=Object.getOwnPropertyNames(Map.prototype);for(let l=0;l<s.length;++l){const h=s[l];"entries"!==h&&"size"!==h&&Map.prototype[h]===Map.prototype.entries&&(Rh=h)}}}return Rh}function Pd(n){return!!Qu(n)&&(Array.isArray(n)||!(n instanceof Map)&&_u()in n)}function Qu(n){return null!==n&&("function"==typeof n||"object"==typeof n)}function cl(n,s,l){return n[s]=l}function Mh(n,s){return n[s]}function To(n,s,l){return!Object.is(n[s],l)&&(n[s]=l,!0)}function vu(n,s,l,h){const p=To(n,s,l);return To(n,s+1,h)||p}function Ng(n,s,l,h,p){const _=vu(n,s,l,h);return To(n,s+2,p)||_}function dl(n,s,l,h,p,_){const D=vu(n,s,l,h);return vu(n,s+2,p,_)||D}function Ju(n,s,l,h){const p=xt();return To(p,Lt(),s)&&(rr(),yu(di(),p,n,s,l,h)),Ju}function oa(n,s,l,h,p,_){const x=vu(n,function ne(){return fn.lFrame.bindingIndex}(),l,p);return _r(2),x?s+pt(l)+h+pt(p)+_:Rr}function uy(n,s,l,h,p,_,D,x){const F=xt(),W=rr(),re=n+22,le=W.firstCreatePass?function ly(n,s,l,h,p,_,D,x,F){const W=s.consts,re=Sc(s,n,4,D||null,Hi(W,x));Nd(s,l,re,Hi(W,F)),_a(s,re);const le=re.tViews=mf(2,re,h,p,_,s.directiveRegistry,s.pipeRegistry,null,s.schemas,W);return null!==s.queries&&(s.queries.template(s,re),le.queries=s.queries.embeddedTView(re)),re}(re,W,F,s,l,h,p,_,D):W.data[re];es(le,!1);const Pe=F[11].createComment("");rh(W,F,Pe,le),ms(Pe,F),_f(F,F[re]=Jm(Pe,F,Pe,le)),Es(le)&&vg(W,F,le),null!=D&&Eg(F,le,x)}function cy(n){return Jn(function Fr(){return fn.lFrame.contextLView}(),22+n)}function y_(n,s,l){const h=xt();return To(h,Lt(),s)&&function ll(n,s,l,h,p,_,D,x){const F=Vi(s,l);let re,W=s.inputs;!x&&null!=W&&(re=W[h])?(ty(n,l,re,h,p),xs(s)&&Ki(l,s.index)):3&s.type&&(h=function Wm(n){return"class"===n?"className":"for"===n?"htmlFor":"formaction"===n?"formAction":"innerHtml"===n?"innerHTML":"readonly"===n?"readOnly":"tabindex"===n?"tabIndex":n}(h),p=null!=D?D(p,s.value||"",h):p,_.setProperty(F,h,p))}(rr(),di(),h,n,s,h[11],l,!1),y_}function Cf(n,s,l,h,p){const D=p?"class":"style";ty(n,l,s.inputs[D],D,h)}function Tp(n,s,l,h){const p=xt(),_=rr(),D=22+n,x=p[11],F=p[D]=Fu(x,s,function Zo(){return fn.lFrame.currentNamespace}()),W=_.firstCreatePass?function pv(n,s,l,h,p,_,D){const x=s.consts,W=Sc(s,n,2,p,Hi(x,_));return Nd(s,l,W,Hi(x,D)),null!==W.attrs&&Zu(W,W.attrs,!1),null!==W.mergedAttrs&&Zu(W,W.mergedAttrs,!0),null!==s.queries&&s.queries.elementStart(s,W),W}(D,_,p,0,s,l,h):_.data[D];es(W,!0);const re=W.mergedAttrs;null!==re&&te(x,F,re);const le=W.classes;null!==le&&lh(x,F,le);const Pe=W.styles;return null!==Pe&&ah(x,F,Pe),64!=(64&W.flags)&&rh(_,p,F,W),0===function la(){return fn.lFrame.elementDepthCount}()&&ms(F,p),function Ra(){fn.lFrame.elementDepthCount++}(),Es(W)&&(vg(_,p,W),e_(_,W,p)),null!==h&&Eg(p,W),Tp}function Lg(){let n=Di();no()?Oo():(n=n.parent,es(n,!1));const s=n;!function ws(){fn.lFrame.elementDepthCount--}();const l=rr();return l.firstCreatePass&&(_a(l,n),Qi(n)&&l.queries.elementEnd(n)),null!=s.classesWithoutHost&&function Or(n){return 0!=(16&n.flags)}(s)&&Cf(l,s,xt(),s.classesWithoutHost,!0),null!=s.stylesWithoutHost&&function N(n){return 0!=(32&n.flags)}(s)&&Cf(l,s,xt(),s.stylesWithoutHost,!1),Lg}function Nh(n,s,l,h){return Tp(n,s,l,h),Lg(),Nh}function Sp(n,s,l){const h=xt(),p=rr(),_=n+22,D=p.firstCreatePass?function Vg(n,s,l,h,p){const _=s.consts,D=Hi(_,h),x=Sc(s,n,8,"ng-container",D);return null!==D&&Zu(x,D,!0),Nd(s,l,x,Hi(_,p)),null!==s.queries&&s.queries.elementStart(s,x),x}(_,p,h,s,l):p.data[_];es(D,!0);const x=h[_]=h[11].createComment("");return rh(p,h,x,D),ms(x,h),Es(D)&&(vg(p,h,D),e_(p,D,h)),null!=l&&Eg(h,D),Sp}function Ap(){let n=Di();const s=rr();return no()?Oo():(n=n.parent,es(n,!1)),s.firstCreatePass&&(_a(s,n),Qi(n)&&s.queries.elementEnd(n)),Ap}function dy(n,s,l){return Sp(n,s,l),Ap(),dy}function Rp(){return xt()}function Mp(n){return!!n&&"function"==typeof n.then}function Ug(n){return!!n&&"function"==typeof n.subscribe}const hy=Ug;function Bg(n,s,l,h){const p=xt(),_=rr(),D=Di();return function ii(n,s,l,h,p,_,D,x){const F=Es(h),re=n.firstCreatePass&&h_(n),le=s[8],Pe=bg(s);let st=!0;if(3&h.type||x){const gn=Vi(h,s),jn=x?x(gn):gn,hr=Pe.length,Bt=x?ls=>x(mi(ls[h.index])):h.index;let Mr=null;if(!x&&F&&(Mr=function jg(n,s,l,h){const p=n.cleanup;if(null!=p)for(let _=0;_<p.length-1;_+=2){const D=p[_];if(D===l&&p[_+1]===h){const x=s[7],F=p[_+2];return x.length>F?x[F]:null}"string"==typeof D&&(_+=2)}return null}(n,s,p,h.index)),null!==Mr)(Mr.__ngLastListenerFn__||Mr).__ngNextListenerFn__=_,Mr.__ngLastListenerFn__=_,st=!1;else{_=xp(h,s,le,_,!1);const ls=l.listen(jn,p,_);Pe.push(_,ls),re&&re.push(p,Bt,hr,hr+1)}}else _=xp(h,s,le,_,!1);const Nt=h.outputs;let tn;if(st&&null!==Nt&&(tn=Nt[p])){const gn=tn.length;if(gn)for(let jn=0;jn<gn;jn+=2){const So=s[tn[jn]][tn[jn+1]].subscribe(_),Ty=Pe.length;Pe.push(_,So),re&&re.push(p,h.index,Ty,-(Ty+1))}}}(_,p,p[11],D,n,s,0,h),Bg}function nd(n,s,l,h){try{return!1!==l(h)}catch(p){return ey(n,p),!1}}function xp(n,s,l,h,p){return function _(D){if(D===Function)return h;mp(2&n.flags?yi(n.index,s):s);let F=nd(s,0,h,D),W=_.__ngNextListenerFn__;for(;W;)F=nd(s,0,W,D)&&F,W=W.__ngNextListenerFn__;return p&&!1===F&&(D.preventDefault(),D.returnValue=!1),F}}function Ld(n=1){return function ma(n){return(fn.lFrame.contextLView=function Ya(n,s){for(;n>0;)s=s[15],n--;return s}(n,fn.lFrame.contextLView))[8]}(n)}function Np(n,s){let l=null;const h=function Fy(n){const s=n.attrs;if(null!=s){const l=s.indexOf(5);if(0==(1&l))return s[l+1]}return null}(n);for(let p=0;p<s.length;p++){const _=s[p];if("*"!==_){if(null===h?_h(n,_,!0):ia(h,_))return p}else l=p}return l}function ys(n){const s=xt()[16][6];if(!s.projection){const h=s.projection=jl(n?n.length:1,null),p=h.slice();let _=s.child;for(;null!==_;){const D=n?Np(_,n):0;null!==D&&(p[D]?p[D].projectionNext=_:h[D]=_,p[D]=_),_=_.next}}}function aa(n,s=0,l){const h=xt(),p=rr(),_=Sc(p,22+n,16,null,l||null);null===_.projection&&(_.projection=s),Oo(),64!=(64&_.flags)&&function oh(n,s,l){gr(s[11],0,s,l,Lu(n,l,s),Vu(l.parent||s[6],l,s))}(p,h,_)}function fo(n,s,l,h,p){const _=n[l+1],D=null===s;let x=h?ba(_):ho(_),F=!1;for(;0!==x&&(!1===F||D);){const re=n[x+1];w_(n[x],s)&&(F=!0,n[x+1]=h?pg(re):Lm(re)),x=h?ba(re):ho(re)}F&&(n[l+1]=h?Lm(_):pg(_))}function w_(n,s){return null===n||null==s||(Array.isArray(n)?n[1]:n)===s||!(!Array.isArray(n)||"string"!=typeof s)&&A(n,s)>=0}const zo={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function my(n){return n.substring(zo.key,zo.keyEnd)}function Gg(n){return n.substring(zo.value,zo.valueEnd)}function gv(n,s){const l=zo.textEnd;return l===s?-1:(s=zo.keyEnd=function _v(n,s,l){for(;s<l&&n.charCodeAt(s)>32;)s++;return s}(n,zo.key=s,l),Df(n,s,l))}function C_(n,s){const l=zo.textEnd;let h=zo.key=Df(n,s,l);return l===h?-1:(h=zo.keyEnd=function D_(n,s,l){let h;for(;s<l&&(45===(h=n.charCodeAt(s))||95===h||(-33&h)>=65&&(-33&h)<=90||h>=48&&h<=57);)s++;return s}(n,h,l),h=Fh(n,h,l),h=zo.value=Df(n,h,l),h=zo.valueEnd=function vv(n,s,l){let h=-1,p=-1,_=-1,D=s,x=D;for(;D<l;){const F=n.charCodeAt(D++);if(59===F)return x;34===F||39===F?x=D=ec(n,F,D,l):s===D-4&&85===_&&82===p&&76===h&&40===F?x=D=ec(n,41,D,l):F>32&&(x=D),_=p,p=h,h=-33&F}return x}(n,h,l),Fh(n,h,l))}function yv(n){zo.key=0,zo.keyEnd=0,zo.value=0,zo.valueEnd=0,zo.textEnd=n.length}function Df(n,s,l){for(;s<l&&n.charCodeAt(s)<=32;)s++;return s}function Fh(n,s,l,h){return(s=Df(n,s,l))<l&&s++,s}function ec(n,s,l,h){let p=-1,_=l;for(;_<h;){const D=n.charCodeAt(_++);if(D==s&&92!==p)return _;p=92==D&&92===p?0:D}throw new Error}function b_(n,s,l){return eu(n,s,l,!1),b_}function tc(n,s){return eu(n,s,null,!0),tc}function Tl(n){Sl(Vh,Ev,n,!1)}function Ev(n,s){for(let l=function mv(n){return yv(n),C_(n,Df(n,0,zo.textEnd))}(s);l>=0;l=C_(s,l))Vh(n,my(s),Gg(s))}function T_(n){Sl(js,nc,n,!0)}function nc(n,s){for(let l=function I_(n){return yv(n),gv(n,Df(n,0,zo.textEnd))}(s);l>=0;l=gv(s,l))js(n,my(s),!0)}function eu(n,s,l,h){const p=xt(),_=rr(),D=_r(2);_.firstUpdatePass&&Mc(_,n,D,h),s!==Rr&&To(p,D,s)&&zg(_,_.data[Hr()],p,p[11],n,p[D+1]=function nu(n,s){return null==n||("string"==typeof s?n+=s:"object"==typeof n&&(n=Ge(Qs(n)))),n}(s,l),h,D)}function Sl(n,s,l,h){const p=rr(),_=_r(2);p.firstUpdatePass&&Mc(p,null,_,h);const D=xt();if(l!==Rr&&To(D,_,l)){const x=p.data[Hr()];if(sd(x,h)&&!tu(p,_)){let F=h?x.classesWithoutHost:x.stylesWithoutHost;null!==F&&(l=Ye(F,l||"")),Cf(p,x,D,l,h)}else!function _y(n,s,l,h,p,_,D,x){p===Rr&&(p=jt);let F=0,W=0,re=0<p.length?p[0]:null,le=0<_.length?_[0]:null;for(;null!==re||null!==le;){const Pe=F<p.length?p[F+1]:void 0,st=W<_.length?_[W+1]:void 0;let tn,Nt=null;re===le?(F+=2,W+=2,Pe!==st&&(Nt=le,tn=st)):null===le||null!==re&&re<le?(F+=2,Nt=re):(W+=2,Nt=le,tn=st),null!==Nt&&zg(n,s,l,h,Nt,tn,D,x),re=F<p.length?p[F]:null,le=W<_.length?_[W]:null}}(p,x,D,D[11],D[_+1],D[_+1]=function wv(n,s,l){if(null==l||""===l)return jt;const h=[],p=Qs(l);if(Array.isArray(p))for(let _=0;_<p.length;_++)n(h,p[_],!0);else if("object"==typeof p)for(const _ in p)p.hasOwnProperty(_)&&n(h,_,p[_]);else"string"==typeof p&&s(h,p);return h}(n,s,l),h,_)}}function tu(n,s){return s>=n.expandoStartIndex}function Mc(n,s,l,h){const p=n.data;if(null===p[l+1]){const _=p[Hr()],D=tu(n,l);sd(_,h)&&null===s&&!D&&(s=!1),s=function Vd(n,s,l,h){const p=function Eo(n){const s=fn.lFrame.currentDirectiveIndex;return-1===s?null:n[s]}(n);let _=h?s.residualClasses:s.residualStyles;if(null===p)0===(h?s.classBindings:s.styleBindings)&&(l=Op(l=Pp(null,n,s,l,h),s.attrs,h),_=null);else{const D=s.directiveStylingLast;if(-1===D||n[D]!==p)if(l=Pp(p,n,s,l,h),null===_){let F=function Lh(n,s,l){const h=l?s.classBindings:s.styleBindings;if(0!==ho(h))return n[ba(h)]}(n,s,h);void 0!==F&&Array.isArray(F)&&(F=Pp(null,n,s,F[1],h),F=Op(F,s.attrs,h),function S_(n,s,l,h){n[ba(l?s.classBindings:s.styleBindings)]=h}(n,s,h,F))}else _=function yy(n,s,l){let h;const p=s.directiveEnd;for(let _=1+s.directiveStylingLast;_<p;_++)h=Op(h,n[_].hostAttrs,l);return Op(h,s.attrs,l)}(n,s,h)}return void 0!==_&&(h?s.residualClasses=_:s.residualStyles=_),l}(p,_,s,h),function AE(n,s,l,h,p,_){let D=_?s.classBindings:s.styleBindings,x=ba(D),F=ho(D);n[h]=l;let re,W=!1;if(Array.isArray(l)){const le=l;re=le[1],(null===re||A(le,re)>0)&&(W=!0)}else re=l;if(p)if(0!==F){const Pe=ba(n[x+1]);n[h+1]=Ch(Pe,x),0!==Pe&&(n[Pe+1]=Vm(n[Pe+1],h)),n[x+1]=function zy(n,s){return 131071&n|s<<17}(n[x+1],h)}else n[h+1]=Ch(x,0),0!==x&&(n[x+1]=Vm(n[x+1],h)),x=h;else n[h+1]=Ch(F,0),0===x?x=h:n[F+1]=Vm(n[F+1],h),F=h;W&&(n[h+1]=Lm(n[h+1])),fo(n,re,h,!0),fo(n,re,h,!1),function E_(n,s,l,h,p){const _=p?n.residualClasses:n.residualStyles;null!=_&&"string"==typeof s&&A(_,s)>=0&&(l[h+1]=pg(l[h+1]))}(s,re,n,h,_),D=Ch(x,F),_?s.classBindings=D:s.styleBindings=D}(p,_,s,l,D,h)}}function Pp(n,s,l,h,p){let _=null;const D=l.directiveEnd;let x=l.directiveStylingLast;for(-1===x?x=l.directiveStart:x++;x<D&&(_=s[x],h=Op(h,_.hostAttrs,p),_!==n);)x++;return null!==n&&(l.directiveStylingLast=x),h}function Op(n,s,l){const h=l?1:2;let p=-1;if(null!==s)for(let _=0;_<s.length;_++){const D=s[_];"number"==typeof D?p=D:p===h&&(Array.isArray(n)||(n=void 0===n?[]:["",n]),js(n,D,!!l||s[++_]))}return void 0===n?null:n}function Vh(n,s,l){js(n,s,Qs(l))}function zg(n,s,l,h,p,_,D,x){if(!(3&s.type))return;const F=n.data,W=F[x+1];bf(function fg(n){return 1==(1&n)}(W)?id(F,s,l,p,ho(W),D):void 0)||(bf(_)||function hg(n){return 2==(2&n)}(W)&&(_=id(F,null,l,p,x,D)),function zc(n,s,l,h,p){if(s)p?n.addClass(l,h):n.removeClass(l,h);else{let _=-1===h.indexOf("-")?void 0:Uo.DashCase;null==p?n.removeStyle(l,h,_):("string"==typeof p&&p.endsWith("!important")&&(p=p.slice(0,-10),_|=Uo.Important),n.setStyle(l,h,p,_))}}(h,D,Vs(Hr(),l),p,_))}function id(n,s,l,h,p,_){const D=null===s;let x;for(;p>0;){const F=n[p],W=Array.isArray(F),re=W?F[1]:F,le=null===re;let Pe=l[p+1];Pe===Rr&&(Pe=le?jt:void 0);let st=le?Xo(Pe,h):re===h?Pe:void 0;if(W&&!bf(st)&&(st=Xo(F,h)),bf(st)&&(x=st,D))return x;const Nt=n[p+1];p=D?ba(Nt):ho(Nt)}if(null!==s){let F=_?s.residualClasses:s.residualStyles;null!=F&&(x=Xo(F,h))}return x}function bf(n){return void 0!==n}function sd(n,s){return 0!=(n.flags&(s?16:32))}function Tf(n,s=""){const l=xt(),h=rr(),p=n+22,_=h.firstCreatePass?Sc(h,p,1,s,null):h.data[p],D=l[p]=function pc(n,s){return n.createText(s)}(l[11],s);rh(h,l,D,_),es(_,!1)}function vy(n){return Ud("",n,""),vy}function Ud(n,s,l){const h=xt(),p=function Od(n,s,l,h){return To(n,Lt(),l)?s+pt(l)+h:Rr}(h,n,s,l);return p!==Rr&&Xl(h,Hr(),p),Ud}function Sf(n,s,l,h,p){const _=xt(),D=oa(_,n,s,l,h,p);return D!==Rr&&Xl(_,Hr(),D),Sf}const g=void 0;var S=["en",[["a","p"],["AM","PM"],g],[["AM","PM"],g,g],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],g,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],g,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",g,"{1} 'at' {0}",g],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function E(n){const l=Math.floor(Math.abs(n)),h=n.toString().replace(/^[^.]*\.?/,"").length;return 1===l&&0===h?1:5}];let O={};function Q(n){const s=function Zt(n){return n.toLowerCase().replace(/_/g,"-")}(n);let l=qe(s);if(l)return l;const h=s.split("-")[0];if(l=qe(h),l)return l;if("en"===h)return S;throw new ct(701,!1)}function Te(n){return Q(n)[Ze.PluralCase]}function qe(n){return n in O||(O[n]=mt.ng&&mt.ng.common&&mt.ng.common.locales&&mt.ng.common.locales[n]),O[n]}var Ze=(()=>((Ze=Ze||{})[Ze.LocaleId=0]="LocaleId",Ze[Ze.DayPeriodsFormat=1]="DayPeriodsFormat",Ze[Ze.DayPeriodsStandalone=2]="DayPeriodsStandalone",Ze[Ze.DaysFormat=3]="DaysFormat",Ze[Ze.DaysStandalone=4]="DaysStandalone",Ze[Ze.MonthsFormat=5]="MonthsFormat",Ze[Ze.MonthsStandalone=6]="MonthsStandalone",Ze[Ze.Eras=7]="Eras",Ze[Ze.FirstDayOfWeek=8]="FirstDayOfWeek",Ze[Ze.WeekendRange=9]="WeekendRange",Ze[Ze.DateFormat=10]="DateFormat",Ze[Ze.TimeFormat=11]="TimeFormat",Ze[Ze.DateTimeFormat=12]="DateTimeFormat",Ze[Ze.NumberSymbols=13]="NumberSymbols",Ze[Ze.NumberFormats=14]="NumberFormats",Ze[Ze.CurrencyCode=15]="CurrencyCode",Ze[Ze.CurrencySymbol=16]="CurrencySymbol",Ze[Ze.CurrencyName=17]="CurrencyName",Ze[Ze.Currencies=18]="Currencies",Ze[Ze.Directionality=19]="Directionality",Ze[Ze.PluralCase=20]="PluralCase",Ze[Ze.ExtraData=21]="ExtraData",Ze))();const Vr="en-US";let $a=Vr;function pE(n,s,l,h,p){if(n=Se(n),Array.isArray(n))for(let _=0;_<n.length;_++)pE(n[_],s,l,h,p);else{const _=rr(),D=xt();let x=qc(n)?n:Se(n.provide),F=gm(n);const W=Di(),re=1048575&W.providerIndexes,le=W.directiveStart,Pe=W.providerIndexes>>20;if(qc(n)||!n.multi){const st=new xa(F,p,qu),Nt=r(x,s,p?re:re+Pe,le);-1===Nt?(Fo(wo(W,D),_,x),Ov(_,n,s.length),s.push(x),W.directiveStart++,W.directiveEnd++,p&&(W.providerIndexes+=1048576),l.push(st),D.push(st)):(l[Nt]=st,D[Nt]=st)}else{const st=r(x,s,re+Pe,le),Nt=r(x,s,re,re+Pe),tn=st>=0&&l[st],gn=Nt>=0&&l[Nt];if(p&&!gn||!p&&!tn){Fo(wo(W,D),_,x);const jn=function c(n,s,l,h,p){const _=new xa(n,l,qu);return _.multi=[],_.index=s,_.componentProviders=0,gE(_,p,h&&!l),_}(p?t:e,l.length,p,h,F);!p&&gn&&(l[Nt].providerFactory=jn),Ov(_,n,s.length,0),s.push(x),W.directiveStart++,W.directiveEnd++,p&&(W.providerIndexes+=1048576),l.push(jn),D.push(jn)}else Ov(_,n,st>-1?st:Nt,gE(l[p?Nt:st],F,!p&&h));!p&&h&&gn&&l[Nt].componentProviders++}}}function Ov(n,s,l,h){const p=qc(s),_=function Ay(n){return!!n.useClass}(s);if(p||_){const F=(_?Se(s.useClass):s).prototype.ngOnDestroy;if(F){const W=n.destroyHooks||(n.destroyHooks=[]);if(!p&&s.multi){const re=W.indexOf(l);-1===re?W.push(l,[h,F]):W[re+1].push(h,F)}else W.push(l,F)}}}function gE(n,s,l){return l&&n.componentProviders++,n.multi.push(s)-1}function r(n,s,l,h){for(let p=l;p<h;p++)if(s[p]===n)return p;return-1}function e(n,s,l,h){return a(this.multi,[])}function t(n,s,l,h){const p=this.multi;let _;if(this.providerFactory){const D=this.providerFactory.componentProviders,x=au(l,l[1],this.providerFactory.index,h);_=x.slice(0,D),a(p,_);for(let F=D;F<x.length;F++)_.push(x[F])}else _=[],a(p,_);return _}function a(n,s){for(let l=0;l<n.length;l++)s.push((0,n[l])());return s}function f(n,s=[]){return l=>{l.providersResolver=(h,p)=>function GE(n,s,l){const h=rr();if(h.firstCreatePass){const p=Ai(n);pE(l,h.data,h.blueprint,p,!0),pE(s,h.data,h.blueprint,p,!1)}}(h,p?p(n):n,s)}}class v{}class M{}function j(n,s){return new ie(n,s??null)}class ie extends v{constructor(s,l){super(),this._parent=l,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new vp(this);const h=Ln(s);this._bootstrapComponents=Xc(h.bootstrap),this._r3Injector=Rm(s,l,[{provide:v,useValue:this},{provide:Jf,useValue:this.componentFactoryResolver}],Ge(s),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(s)}get injector(){return this._r3Injector}destroy(){const s=this._r3Injector;!s.destroyed&&s.destroy(),this.destroyCbs.forEach(l=>l()),this.destroyCbs=null}onDestroy(s){this.destroyCbs.push(s)}}class we extends M{constructor(s){super(),this.moduleType=s}create(s){return new ie(this.moduleType,s)}}class nt extends v{constructor(s,l,h){super(),this.componentFactoryResolver=new vp(this),this.instance=null;const p=new eg([...s,{provide:v,useValue:this},{provide:Jf,useValue:this.componentFactoryResolver}],l||Gu(),h,new Set(["environment"]));this.injector=p,p.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(s){this.injector.onDestroy(s)}}function It(n,s,l=null){return new nt(n,s,l).injector}let Wt=(()=>{class n{constructor(l){this._injector=l,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(l){if(!l.standalone)return null;if(!this.cachedInjectors.has(l.id)){const h=qp(0,l.type),p=h.length>0?It([h],this._injector,`Standalone[${l.type.name}]`):null;this.cachedInjectors.set(l.id,p)}return this.cachedInjectors.get(l.id)}ngOnDestroy(){try{for(const l of this.cachedInjectors.values())null!==l&&l.destroy()}finally{this.cachedInjectors.clear()}}}return n.\u0275prov=et({token:n,providedIn:"environment",factory:()=>new n(Yi(pu))}),n})();function pn(n){n.getStandaloneInjector=s=>s.get(Wt).getOrCreateStandaloneInjector(n)}function M0(n,s,l){const h=L()+n,p=xt();return p[h]===Rr?cl(p,h,l?s.call(l):s()):Mh(p,h)}function x0(n,s,l,h){return function U0(n,s,l,h,p,_){const D=s+l;return To(n,D,p)?cl(n,D+1,_?h.call(_,p):h(p)):Fv(n,D+1)}(xt(),L(),n,s,l,h)}function N0(n,s,l,h,p){return B0(xt(),L(),n,s,l,h,p)}function P0(n,s,l,h,p,_){return function j0(n,s,l,h,p,_,D,x){const F=s+l;return Ng(n,F,p,_,D)?cl(n,F+3,x?h.call(x,p,_,D):h(p,_,D)):Fv(n,F+3)}(xt(),L(),n,s,l,h,p,_)}function O0(n,s,l,h,p,_,D){return function H0(n,s,l,h,p,_,D,x,F){const W=s+l;return dl(n,W,p,_,D,x)?cl(n,W+4,F?h.call(F,p,_,D,x):h(p,_,D,x)):Fv(n,W+4)}(xt(),L(),n,s,l,h,p,_,D)}function k0(n,s,l,h,p,_,D,x){const F=L()+n,W=xt(),re=dl(W,F,l,h,p,_);return To(W,F+4,D)||re?cl(W,F+5,x?s.call(x,l,h,p,_,D):s(l,h,p,_,D)):Mh(W,F+5)}function F0(n,s,l,h,p,_,D,x,F){const W=L()+n,re=xt(),le=dl(re,W,l,h,p,_);return vu(re,W+4,D,x)||le?cl(re,W+6,F?s.call(F,l,h,p,_,D,x):s(l,h,p,_,D,x)):Mh(re,W+6)}function L0(n,s,l,h,p,_,D,x,F,W){const re=L()+n,le=xt();let Pe=dl(le,re,l,h,p,_);return Ng(le,re+4,D,x,F)||Pe?cl(le,re+7,W?s.call(W,l,h,p,_,D,x,F):s(l,h,p,_,D,x,F)):Mh(le,re+7)}function V0(n,s,l,h){return function $0(n,s,l,h,p,_){let D=s+l,x=!1;for(let F=0;F<p.length;F++)To(n,D++,p[F])&&(x=!0);return x?cl(n,D,h.apply(_,p)):Fv(n,D)}(xt(),L(),n,s,l,h)}function Fv(n,s){const l=n[s];return l===Rr?void 0:l}function B0(n,s,l,h,p,_,D){const x=s+l;return vu(n,x,p,_)?cl(n,x+2,D?h.call(D,p,_):h(p,_)):Fv(n,x+2)}function G0(n,s){const l=rr();let h;const p=n+22;l.firstCreatePass?(h=function aI(n,s){if(s)for(let l=s.length-1;l>=0;l--){const h=s[l];if(n===h.name)return h}}(s,l.pipeRegistry),l.data[p]=h,h.onDestroy&&(l.destroyHooks||(l.destroyHooks=[])).push(p,h.onDestroy)):h=l.data[p];const _=h.factory||(h.factory=ds(h.type)),D=er(qu);try{const x=Nr(!1),F=_();return Nr(x),function If(n,s,l,h){l>=n.data.length&&(n.data[l]=null,n.blueprint[l]=null),s[l]=h}(l,xt(),p,F),F}finally{er(D)}}function z0(n,s,l,h){const p=n+22,_=xt(),D=Jn(_,p);return function Lv(n,s){return n[1].data[s].pure}(_,p)?B0(_,L(),s,D.transform,l,h,D):D.transform(l,h)}function zE(n){return s=>{setTimeout(n,void 0,s)}}const kf=class hI extends w.x{constructor(s=!1){super(),this.__isAsync=s}emit(s){super.next(s)}subscribe(s,l,h){let p=s,_=l||(()=>null),D=h;if(s&&"object"==typeof s){const F=s;p=F.next?.bind(F),_=F.error?.bind(F),D=F.complete?.bind(F)}this.__isAsync&&(_=zE(_),p&&(p=zE(p)),D&&(D=zE(D)));const x=super.subscribe({next:p,error:_,complete:D});return s instanceof Y.w0&&s.add(x),x}};function fI(){return this._results[_u()]()}class WE{constructor(s=!1){this._emitDistinctChangesOnly=s,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const l=_u(),h=WE.prototype;h[l]||(h[l]=fI)}get changes(){return this._changes||(this._changes=new kf)}get(s){return this._results[s]}map(s){return this._results.map(s)}filter(s){return this._results.filter(s)}find(s){return this._results.find(s)}reduce(s,l){return this._results.reduce(s,l)}forEach(s){this._results.forEach(s)}some(s){return this._results.some(s)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(s,l){const h=this;h.dirty=!1;const p=Ts(s);(this._changesDetected=!function Ul(n,s,l){if(n.length!==s.length)return!1;for(let h=0;h<n.length;h++){let p=n[h],_=s[h];if(l&&(p=l(p),_=l(_)),_!==p)return!1}return!0}(h._results,p,l))&&(h._results=p,h.length=p.length,h.last=p[this.length-1],h.first=p[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Vv=(()=>{class n{}return n.__NG_ELEMENT_ID__=mI,n})();const pI=Vv,gI=class extends pI{constructor(s,l,h){super(),this._declarationLView=s,this._declarationTContainer=l,this.elementRef=h}createEmbeddedView(s,l){const h=this._declarationTContainer.tViews,p=bh(this._declarationLView,h,s,16,null,h.declTNode,null,null,null,null,l||null);p[17]=this._declarationLView[this._declarationTContainer.index];const D=this._declarationLView[19];return null!==D&&(p[19]=D.createEmbeddedView(h)),td(h,p,s),new Ah(p)}};function mI(){return mE(Di(),xt())}function mE(n,s){return 4&n.type?new gI(s,n,fh(n,s)):null}let yE=(()=>{class n{}return n.__NG_ELEMENT_ID__=yI,n})();function yI(){return q0(Di(),xt())}const _I=yE,W0=class extends _I{constructor(s,l,h){super(),this._lContainer=s,this._hostTNode=l,this._hostLView=h}get element(){return fh(this._hostTNode,this._hostLView)}get injector(){return new ps(this._hostTNode,this._hostLView)}get parentInjector(){const s=Ja(this._hostTNode,this._hostLView);if(tr(s)){const l=zn(s,this._hostLView),h=Yn(s);return new ps(l[1].data[h+8],l)}return new ps(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(s){const l=K0(this._lContainer);return null!==l&&l[s]||null}get length(){return this._lContainer.length-10}createEmbeddedView(s,l,h){let p,_;"number"==typeof h?p=h:null!=h&&(p=h.index,_=h.injector);const D=s.createEmbeddedView(l||{},_);return this.insert(D,p),D}createComponent(s,l,h,p,_){const D=s&&!function _i(n){return"function"==typeof n}(s);let x;if(D)x=l;else{const le=l||{};x=le.index,h=le.injector,p=le.projectableNodes,_=le.environmentInjector||le.ngModuleRef}const F=D?s:new Yu(rt(s)),W=h||this.parentInjector;if(!_&&null==F.ngModule){const Pe=(D?W:this.parentInjector).get(pu,null);Pe&&(_=Pe)}const re=F.create(W,p,void 0,_);return this.insert(re.hostView,x),re}insert(s,l){const h=s._lView,p=h[1];if(function Ks(n){return ui(n[3])}(h)){const re=this.indexOf(s);if(-1!==re)this.detach(re);else{const le=h[3],Pe=new W0(le,le[6],le[3]);Pe.detach(Pe.indexOf(s))}}const _=this._adjustIndex(l),D=this._lContainer;!function yd(n,s,l,h){const p=10+h,_=l.length;h>0&&(l[p-1][4]=s),h<_-10?(s[4]=l[p],ac(l,10+h,s)):(l.push(s),s[4]=null),s[3]=l;const D=s[17];null!==D&&l!==D&&function Wl(n,s){const l=n[9];s[16]!==s[3][3][16]&&(n[2]=!0),null===l?n[9]=[s]:l.push(s)}(D,s);const x=s[19];null!==x&&x.insertView(n),s[2]|=64}(p,h,D,_);const x=sl(_,D),F=h[11],W=Kl(F,D[7]);return null!==W&&function Hc(n,s,l,h,p,_){h[0]=p,h[6]=s,sh(n,h,l,1,p,_)}(p,D[6],F,h,W,x),s.attachToViewContainerRef(),ac(KE(D),_,s),s}move(s,l){return this.insert(s,l)}indexOf(s){const l=K0(this._lContainer);return null!==l?l.indexOf(s):-1}remove(s){const l=this._adjustIndex(s,-1),h=gc(this._lContainer,l);h&&(Bl(KE(this._lContainer),l),Xd(h[1],h))}detach(s){const l=this._adjustIndex(s,-1),h=gc(this._lContainer,l);return h&&null!=Bl(KE(this._lContainer),l)?new Ah(h):null}_adjustIndex(s,l=0){return s??this.length+l}};function K0(n){return n[8]}function KE(n){return n[8]||(n[8]=[])}function q0(n,s){let l;const h=s[n.index];if(ui(h))l=h;else{let p;if(8&n.type)p=mi(h);else{const _=s[11];p=_.createComment("");const D=Vi(n,s);rl(_,Kl(_,D),p,function il(n,s){return n.nextSibling(s)}(_,D),!1)}s[n.index]=l=Jm(h,s,p,n),_f(s,l)}return new W0(l,n,s)}class qE{constructor(s){this.queryList=s,this.matches=null}clone(){return new qE(this.queryList)}setDirty(){this.queryList.setDirty()}}class ZE{constructor(s=[]){this.queries=s}createEmbeddedView(s){const l=s.queries;if(null!==l){const h=null!==s.contentQueries?s.contentQueries[0]:l.length,p=[];for(let _=0;_<h;_++){const D=l.getByIndex(_);p.push(this.queries[D.indexInDeclarationView].clone())}return new ZE(p)}return null}insertView(s){this.dirtyQueriesWithMatches(s)}detachView(s){this.dirtyQueriesWithMatches(s)}dirtyQueriesWithMatches(s){for(let l=0;l<this.queries.length;l++)null!==rw(s,l).matches&&this.queries[l].setDirty()}}class Z0{constructor(s,l,h=null){this.predicate=s,this.flags=l,this.read=h}}class YE{constructor(s=[]){this.queries=s}elementStart(s,l){for(let h=0;h<this.queries.length;h++)this.queries[h].elementStart(s,l)}elementEnd(s){for(let l=0;l<this.queries.length;l++)this.queries[l].elementEnd(s)}embeddedTView(s){let l=null;for(let h=0;h<this.length;h++){const p=null!==l?l.length:0,_=this.getByIndex(h).embeddedTView(s,p);_&&(_.indexInDeclarationView=h,null!==l?l.push(_):l=[_])}return null!==l?new YE(l):null}template(s,l){for(let h=0;h<this.queries.length;h++)this.queries[h].template(s,l)}getByIndex(s){return this.queries[s]}get length(){return this.queries.length}track(s){this.queries.push(s)}}class QE{constructor(s,l=-1){this.metadata=s,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=l}elementStart(s,l){this.isApplyingToNode(l)&&this.matchTNode(s,l)}elementEnd(s){this._declarationNodeIndex===s.index&&(this._appliesToNextNode=!1)}template(s,l){this.elementStart(s,l)}embeddedTView(s,l){return this.isApplyingToNode(s)?(this.crossesNgTemplate=!0,this.addMatch(-s.index,l),new QE(this.metadata)):null}isApplyingToNode(s){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const l=this._declarationNodeIndex;let h=s.parent;for(;null!==h&&8&h.type&&h.index!==l;)h=h.parent;return l===(null!==h?h.index:-1)}return this._appliesToNextNode}matchTNode(s,l){const h=this.metadata.predicate;if(Array.isArray(h))for(let p=0;p<h.length;p++){const _=h[p];this.matchTNodeWithReadOption(s,l,wI(l,_)),this.matchTNodeWithReadOption(s,l,bs(l,s,_,!1,!1))}else h===Vv?4&l.type&&this.matchTNodeWithReadOption(s,l,-1):this.matchTNodeWithReadOption(s,l,bs(l,s,h,!1,!1))}matchTNodeWithReadOption(s,l,h){if(null!==h){const p=this.metadata.read;if(null!==p)if(p===Sd||p===yE||p===Vv&&4&l.type)this.addMatch(l.index,-2);else{const _=bs(l,s,p,!1,!1);null!==_&&this.addMatch(l.index,_)}else this.addMatch(l.index,h)}}addMatch(s,l){null===this.matches?this.matches=[s,l]:this.matches.push(s,l)}}function wI(n,s){const l=n.localNames;if(null!==l)for(let h=0;h<l.length;h+=2)if(l[h]===s)return l[h+1];return null}function CI(n,s,l,h){return-1===l?function II(n,s){return 11&n.type?fh(n,s):4&n.type?mE(n,s):null}(s,n):-2===l?function DI(n,s,l){return l===Sd?fh(s,n):l===Vv?mE(s,n):l===yE?q0(s,n):void 0}(n,s,h):au(n,n[1],l,s)}function Y0(n,s,l,h){const p=s[19].queries[h];if(null===p.matches){const _=n.data,D=l.matches,x=[];for(let F=0;F<D.length;F+=2){const W=D[F];x.push(W<0?null:CI(s,_[W],D[F+1],l.metadata.read))}p.matches=x}return p.matches}function JE(n,s,l,h){const p=n.queries.getByIndex(l),_=p.matches;if(null!==_){const D=Y0(n,s,p,l);for(let x=0;x<_.length;x+=2){const F=_[x];if(F>0)h.push(D[x/2]);else{const W=_[x+1],re=s[-F];for(let le=10;le<re.length;le++){const Pe=re[le];Pe[17]===Pe[3]&&JE(Pe[1],Pe,W,h)}if(null!==re[9]){const le=re[9];for(let Pe=0;Pe<le.length;Pe++){const st=le[Pe];JE(st[1],st,W,h)}}}}}return h}function Q0(n){const s=xt(),l=rr(),h=su();fs(h+1);const p=rw(l,h);if(n.dirty&&function vo(n){return 4==(4&n[2])}(s)===(2==(2&p.metadata.flags))){if(null===p.matches)n.reset([]);else{const _=p.crossesNgTemplate?JE(l,s,h,[]):Y0(l,s,p,h);n.reset(_,Xf),n.notifyOnChanges()}return!0}return!1}function J0(n,s,l){const h=rr();h.firstCreatePass&&(nw(h,new Z0(n,s,l),-1),2==(2&s)&&(h.staticViewQueries=!0)),tw(h,xt(),s)}function X0(n,s,l,h){const p=rr();if(p.firstCreatePass){const _=Di();nw(p,new Z0(s,l,h),_.index),function TI(n,s){const l=n.contentQueries||(n.contentQueries=[]);s!==(l.length?l[l.length-1]:-1)&&l.push(n.queries.length-1,s)}(p,n),2==(2&l)&&(p.staticContentQueries=!0)}tw(p,xt(),l)}function ew(){return function bI(n,s){return n[19].queries[s].queryList}(xt(),su())}function tw(n,s,l){const h=new WE(4==(4&l));Ig(n,s,h,h.destroy),null===s[19]&&(s[19]=new ZE),s[19].queries.push(new qE(h))}function nw(n,s,l){null===n.queries&&(n.queries=new YE),n.queries.track(new QE(s,l))}function rw(n,s){return n.queries.getByIndex(s)}function iw(n,s){return mE(n,s)}function vE(...n){}const Cw=new ri("Application Initializer");let EE=(()=>{class n{constructor(l){this.appInits=l,this.resolve=vE,this.reject=vE,this.initialized=!1,this.done=!1,this.donePromise=new Promise((h,p)=>{this.resolve=h,this.reject=p})}runInitializers(){if(this.initialized)return;const l=[],h=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let p=0;p<this.appInits.length;p++){const _=this.appInits[p]();if(Mp(_))l.push(_);else if(hy(_)){const D=new Promise((x,F)=>{_.subscribe({complete:x,error:F})});l.push(D)}}Promise.all(l).then(()=>{h()}).catch(p=>{this.reject(p)}),0===l.length&&h(),this.initialized=!0}}return n.\u0275fac=function(l){return new(l||n)(Yi(Cw,8))},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dw=new ri("AppId",{providedIn:"root",factory:function bw(){return`${r0()}${r0()}${r0()}`}});function r0(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const Tw=new ri("Platform Initializer"),WI=new ri("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Sw=new ri("appBootstrapListener"),KI=new ri("AnimationModuleType");let qI=(()=>{class n{log(l){console.log(l)}warn(l){console.warn(l)}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();const wE=new ri("LocaleId",{providedIn:"root",factory:()=>cd(wE,Ut.Optional|Ut.SkipSelf)||function ZI(){return typeof $localize<"u"&&$localize.locale||Vr}()}),YI=new ri("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class QI{constructor(s,l){this.ngModuleFactory=s,this.componentFactories=l}}let JI=(()=>{class n{compileModuleSync(l){return new we(l)}compileModuleAsync(l){return Promise.resolve(this.compileModuleSync(l))}compileModuleAndAllComponentsSync(l){const h=this.compileModuleSync(l),_=Xc(Ln(l).declarations).reduce((D,x)=>{const F=rt(x);return F&&D.push(new Yu(F)),D},[]);return new QI(h,_)}compileModuleAndAllComponentsAsync(l){return Promise.resolve(this.compileModuleAndAllComponentsSync(l))}clearCache(){}clearCacheFor(l){}getModuleId(l){}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const tC=(()=>Promise.resolve(0))();function s0(n){typeof Zone>"u"?tC.then(()=>{n&&n.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",n)}class Hd{constructor({enableLongStackTrace:s=!1,shouldCoalesceEventChangeDetection:l=!1,shouldCoalesceRunChangeDetection:h=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new kf(!1),this.onMicrotaskEmpty=new kf(!1),this.onStable=new kf(!1),this.onError=new kf(!1),typeof Zone>"u")throw new ct(908,!1);Zone.assertZonePatched();const p=this;if(p._nesting=0,p._outer=p._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const _=Zone.AsyncStackTaggingZoneSpec;p._inner=p._inner.fork(new _("Angular"))}Zone.TaskTrackingZoneSpec&&(p._inner=p._inner.fork(new Zone.TaskTrackingZoneSpec)),s&&Zone.longStackTraceZoneSpec&&(p._inner=p._inner.fork(Zone.longStackTraceZoneSpec)),p.shouldCoalesceEventChangeDetection=!h&&l,p.shouldCoalesceRunChangeDetection=h,p.lastRequestAnimationFrameId=-1,p.nativeRequestAnimationFrame=function nC(){let n=mt.requestAnimationFrame,s=mt.cancelAnimationFrame;if(typeof Zone<"u"&&n&&s){const l=n[Zone.__symbol__("OriginalDelegate")];l&&(n=l);const h=s[Zone.__symbol__("OriginalDelegate")];h&&(s=h)}return{nativeRequestAnimationFrame:n,nativeCancelAnimationFrame:s}}().nativeRequestAnimationFrame,function sC(n){const s=()=>{!function iC(n){n.isCheckStableRunning||-1!==n.lastRequestAnimationFrameId||(n.lastRequestAnimationFrameId=n.nativeRequestAnimationFrame.call(mt,()=>{n.fakeTopEventTask||(n.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{n.lastRequestAnimationFrameId=-1,a0(n),n.isCheckStableRunning=!0,o0(n),n.isCheckStableRunning=!1},void 0,()=>{},()=>{})),n.fakeTopEventTask.invoke()}),a0(n))}(n)};n._inner=n._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(l,h,p,_,D,x)=>{try{return Mw(n),l.invokeTask(p,_,D,x)}finally{(n.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||n.shouldCoalesceRunChangeDetection)&&s(),xw(n)}},onInvoke:(l,h,p,_,D,x,F)=>{try{return Mw(n),l.invoke(p,_,D,x,F)}finally{n.shouldCoalesceRunChangeDetection&&s(),xw(n)}},onHasTask:(l,h,p,_)=>{l.hasTask(p,_),h===p&&("microTask"==_.change?(n._hasPendingMicrotasks=_.microTask,a0(n),o0(n)):"macroTask"==_.change&&(n.hasPendingMacrotasks=_.macroTask))},onHandleError:(l,h,p,_)=>(l.handleError(p,_),n.runOutsideAngular(()=>n.onError.emit(_)),!1)})}(p)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Hd.isInAngularZone())throw new ct(909,!1)}static assertNotInAngularZone(){if(Hd.isInAngularZone())throw new ct(909,!1)}run(s,l,h){return this._inner.run(s,l,h)}runTask(s,l,h,p){const _=this._inner,D=_.scheduleEventTask("NgZoneEvent: "+p,s,rC,vE,vE);try{return _.runTask(D,l,h)}finally{_.cancelTask(D)}}runGuarded(s,l,h){return this._inner.runGuarded(s,l,h)}runOutsideAngular(s){return this._outer.run(s)}}const rC={};function o0(n){if(0==n._nesting&&!n.hasPendingMicrotasks&&!n.isStable)try{n._nesting++,n.onMicrotaskEmpty.emit(null)}finally{if(n._nesting--,!n.hasPendingMicrotasks)try{n.runOutsideAngular(()=>n.onStable.emit(null))}finally{n.isStable=!0}}}function a0(n){n.hasPendingMicrotasks=!!(n._hasPendingMicrotasks||(n.shouldCoalesceEventChangeDetection||n.shouldCoalesceRunChangeDetection)&&-1!==n.lastRequestAnimationFrameId)}function Mw(n){n._nesting++,n.isStable&&(n.isStable=!1,n.onUnstable.emit(null))}function xw(n){n._nesting--,o0(n)}class oC{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new kf,this.onMicrotaskEmpty=new kf,this.onStable=new kf,this.onError=new kf}run(s,l,h){return s.apply(l,h)}runGuarded(s,l,h){return s.apply(l,h)}runOutsideAngular(s){return s()}runTask(s,l,h,p){return s.apply(l,h)}}const Nw=new ri(""),Pw=new ri("");let l0,aC=(()=>{class n{constructor(l,h,p){this._ngZone=l,this.registry=h,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,l0||(function lC(n){l0=n}(p),p.addToWindow(h)),this._watchAngularEvents(),l.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Hd.assertNotInAngularZone(),s0(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())s0(()=>{for(;0!==this._callbacks.length;){let l=this._callbacks.pop();clearTimeout(l.timeoutId),l.doneCb(this._didWork)}this._didWork=!1});else{let l=this.getPendingTasks();this._callbacks=this._callbacks.filter(h=>!h.updateCb||!h.updateCb(l)||(clearTimeout(h.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(l=>({source:l.source,creationLocation:l.creationLocation,data:l.data})):[]}addCallback(l,h,p){let _=-1;h&&h>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(D=>D.timeoutId!==_),l(this._didWork,this.getPendingTasks())},h)),this._callbacks.push({doneCb:l,timeoutId:_,updateCb:p})}whenStable(l,h,p){if(p&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(l,h,p),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(l){this.registry.registerApplication(l,this)}unregisterApplication(l){this.registry.unregisterApplication(l)}findProviders(l,h,p){return[]}}return n.\u0275fac=function(l){return new(l||n)(Yi(Hd),Yi(Ow),Yi(Pw))},n.\u0275prov=et({token:n,factory:n.\u0275fac}),n})(),Ow=(()=>{class n{constructor(){this._applications=new Map}registerApplication(l,h){this._applications.set(l,h)}unregisterApplication(l){this._applications.delete(l)}unregisterAllApplications(){this._applications.clear()}getTestability(l){return this._applications.get(l)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(l,h=!0){return l0?.findTestabilityInTree(this,l,h)??null}}return n.\u0275fac=function(l){return new(l||n)},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})(),im=null;const kw=new ri("AllowMultipleToken"),u0=new ri("PlatformDestroyListeners");class dC{constructor(s,l){this.name=s,this.token=l}}function Lw(n,s,l=[]){const h=`Platform: ${s}`,p=new ri(h);return(_=[])=>{let D=c0();if(!D||D.injector.get(kw,!1)){const x=[...l,..._,{provide:p,useValue:!0}];n?n(x):function hC(n){if(im&&!im.get(kw,!1))throw new ct(400,!1);im=n;const s=n.get(Uw);(function Fw(n){const s=n.get(Tw,null);s&&s.forEach(l=>l())})(n)}(function Vw(n=[],s){return Wu.create({name:s,providers:[{provide:Qp,useValue:"platform"},{provide:u0,useValue:new Set([()=>im=null])},...n]})}(x,h))}return function pC(n){const s=c0();if(!s)throw new ct(401,!1);return s}()}}function c0(){return im?.get(Uw)??null}let Uw=(()=>{class n{constructor(l){this._injector=l,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(l,h){const p=function jw(n,s){let l;return l="noop"===n?new oC:("zone.js"===n?void 0:n)||new Hd(s),l}(h?.ngZone,function Bw(n){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!n||!n.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!n||!n.ngZoneRunCoalescing)||!1}}(h)),_=[{provide:Hd,useValue:p}];return p.run(()=>{const D=Wu.create({providers:_,parent:this.injector,name:l.moduleType.name}),x=l.create(D),F=x.injector.get(mh,null);if(!F)throw new ct(402,!1);return p.runOutsideAngular(()=>{const W=p.onError.subscribe({next:re=>{F.handleError(re)}});x.onDestroy(()=>{CE(this._modules,x),W.unsubscribe()})}),function Hw(n,s,l){try{const h=l();return Mp(h)?h.catch(p=>{throw s.runOutsideAngular(()=>n.handleError(p)),p}):h}catch(h){throw s.runOutsideAngular(()=>n.handleError(h)),h}}(F,p,()=>{const W=x.injector.get(EE);return W.runInitializers(),W.donePromise.then(()=>(function Ko(n){Ae(n,"Expected localeId to be defined"),"string"==typeof n&&($a=n.toLowerCase().replace(/_/g,"-"))}(x.injector.get(wE,Vr)||Vr),this._moduleDoBootstrap(x),x))})})}bootstrapModule(l,h=[]){const p=$w({},h);return function uC(n,s,l){const h=new we(l);return Promise.resolve(h)}(0,0,l).then(_=>this.bootstrapModuleFactory(_,p))}_moduleDoBootstrap(l){const h=l.injector.get(IE);if(l._bootstrapComponents.length>0)l._bootstrapComponents.forEach(p=>h.bootstrap(p));else{if(!l.instance.ngDoBootstrap)throw new ct(403,!1);l.instance.ngDoBootstrap(h)}this._modules.push(l)}onDestroy(l){this._destroyListeners.push(l)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new ct(404,!1);this._modules.slice().forEach(h=>h.destroy()),this._destroyListeners.forEach(h=>h());const l=this._injector.get(u0,null);l&&(l.forEach(h=>h()),l.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return n.\u0275fac=function(l){return new(l||n)(Yi(Wu))},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"platform"}),n})();function $w(n,s){return Array.isArray(s)?s.reduce($w,n):{...n,...s}}let IE=(()=>{class n{constructor(l,h,p){this._zone=l,this._injector=h,this._exceptionHandler=p,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new X.y(x=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{x.next(this._stable),x.complete()})}),D=new X.y(x=>{let F;this._zone.runOutsideAngular(()=>{F=this._zone.onStable.subscribe(()=>{Hd.assertNotInAngularZone(),s0(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,x.next(!0))})})});const W=this._zone.onUnstable.subscribe(()=>{Hd.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{x.next(!1)}))});return()=>{F.unsubscribe(),W.unsubscribe()}});this.isStable=(0,Re.T)(_,D.pipe((0,Ce.B)()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(l,h){const p=l instanceof mm;if(!this._injector.get(EE).done)throw!p&&vn(l),new ct(405,false);let D;D=p?l:this._injector.get(Jf).resolveComponentFactory(l),this.componentTypes.push(D.componentType);const x=function cC(n){return n.isBoundToModule}(D)?void 0:this._injector.get(v),W=D.create(Wu.NULL,[],h||D.selector,x),re=W.location.nativeElement,le=W.injector.get(Nw,null);return le?.registerApplication(re),W.onDestroy(()=>{this.detachView(W.hostView),CE(this.components,W),le?.unregisterApplication(re)}),this._loadComponent(W),W}tick(){if(this._runningTick)throw new ct(101,!1);try{this._runningTick=!0;for(let l of this._views)l.detectChanges()}catch(l){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(l))}finally{this._runningTick=!1}}attachView(l){const h=l;this._views.push(h),h.attachToAppRef(this)}detachView(l){const h=l;CE(this._views,h),h.detachFromAppRef()}_loadComponent(l){this.attachView(l.hostView),this.tick(),this.components.push(l),this._injector.get(Sw,[]).concat(this._bootstrapListeners).forEach(p=>p(l))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(l=>l()),this._views.slice().forEach(l=>l.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(l){return this._destroyListeners.push(l),()=>CE(this._destroyListeners,l)}destroy(){if(this._destroyed)throw new ct(406,!1);const l=this._injector;l.destroy&&!l.destroyed&&l.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return n.\u0275fac=function(l){return new(l||n)(Yi(Hd),Yi(pu),Yi(mh))},n.\u0275prov=et({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function CE(n,s){const l=n.indexOf(s);l>-1&&n.splice(l,1)}let zw=!0,Ww=!1;function mC(){return Ww=!0,zw}function yC(){if(Ww)throw new Error("Cannot enable prod mode after platform setup.");zw=!1}let _C=(()=>{class n{}return n.__NG_ELEMENT_ID__=vC,n})();function vC(n){return function EC(n,s,l){if(xs(n)&&!l){const h=yi(n.index,s);return new Ah(h,h)}return 47&n.type?new Ah(s[16],s):null}(Di(),xt(),16==(16&n))}class Yw{constructor(){}supports(s){return Pd(s)}create(s){return new TC(s)}}const bC=(n,s)=>s;class TC{constructor(s){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=s||bC}forEachItem(s){let l;for(l=this._itHead;null!==l;l=l._next)s(l)}forEachOperation(s){let l=this._itHead,h=this._removalsHead,p=0,_=null;for(;l||h;){const D=!h||l&&l.currentIndex<Jw(h,p,_)?l:h,x=Jw(D,p,_),F=D.currentIndex;if(D===h)p--,h=h._nextRemoved;else if(l=l._next,null==D.previousIndex)p++;else{_||(_=[]);const W=x-p,re=F-p;if(W!=re){for(let Pe=0;Pe<W;Pe++){const st=Pe<_.length?_[Pe]:_[Pe]=0,Nt=st+Pe;re<=Nt&&Nt<W&&(_[Pe]=st+1)}_[D.previousIndex]=re-W}}x!==F&&s(D,x,F)}}forEachPreviousItem(s){let l;for(l=this._previousItHead;null!==l;l=l._nextPrevious)s(l)}forEachAddedItem(s){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)s(l)}forEachMovedItem(s){let l;for(l=this._movesHead;null!==l;l=l._nextMoved)s(l)}forEachRemovedItem(s){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)s(l)}forEachIdentityChange(s){let l;for(l=this._identityChangesHead;null!==l;l=l._nextIdentityChange)s(l)}diff(s){if(null==s&&(s=[]),!Pd(s))throw new ct(900,!1);return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let p,_,D,l=this._itHead,h=!1;if(Array.isArray(s)){this.length=s.length;for(let x=0;x<this.length;x++)_=s[x],D=this._trackByFn(x,_),null!==l&&Object.is(l.trackById,D)?(h&&(l=this._verifyReinsertion(l,_,D,x)),Object.is(l.item,_)||this._addIdentityChange(l,_)):(l=this._mismatch(l,_,D,x),h=!0),l=l._next}else p=0,function wp(n,s){if(Array.isArray(n))for(let l=0;l<n.length;l++)s(n[l]);else{const l=n[_u()]();let h;for(;!(h=l.next()).done;)s(h.value)}}(s,x=>{D=this._trackByFn(p,x),null!==l&&Object.is(l.trackById,D)?(h&&(l=this._verifyReinsertion(l,x,D,p)),Object.is(l.item,x)||this._addIdentityChange(l,x)):(l=this._mismatch(l,x,D,p),h=!0),l=l._next,p++}),this.length=p;return this._truncate(l),this.collection=s,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let s;for(s=this._previousItHead=this._itHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._additionsHead;null!==s;s=s._nextAdded)s.previousIndex=s.currentIndex;for(this._additionsHead=this._additionsTail=null,s=this._movesHead;null!==s;s=s._nextMoved)s.previousIndex=s.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(s,l,h,p){let _;return null===s?_=this._itTail:(_=s._prev,this._remove(s)),null!==(s=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null))?(Object.is(s.item,l)||this._addIdentityChange(s,l),this._reinsertAfter(s,_,p)):null!==(s=null===this._linkedRecords?null:this._linkedRecords.get(h,p))?(Object.is(s.item,l)||this._addIdentityChange(s,l),this._moveAfter(s,_,p)):s=this._addAfter(new SC(l,h),_,p),s}_verifyReinsertion(s,l,h,p){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(h,null);return null!==_?s=this._reinsertAfter(_,s._prev,p):s.currentIndex!=p&&(s.currentIndex=p,this._addToMoves(s,p)),s}_truncate(s){for(;null!==s;){const l=s._next;this._addToRemovals(this._unlink(s)),s=l}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(s,l,h){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(s);const p=s._prevRemoved,_=s._nextRemoved;return null===p?this._removalsHead=_:p._nextRemoved=_,null===_?this._removalsTail=p:_._prevRemoved=p,this._insertAfter(s,l,h),this._addToMoves(s,h),s}_moveAfter(s,l,h){return this._unlink(s),this._insertAfter(s,l,h),this._addToMoves(s,h),s}_addAfter(s,l,h){return this._insertAfter(s,l,h),this._additionsTail=null===this._additionsTail?this._additionsHead=s:this._additionsTail._nextAdded=s,s}_insertAfter(s,l,h){const p=null===l?this._itHead:l._next;return s._next=p,s._prev=l,null===p?this._itTail=s:p._prev=s,null===l?this._itHead=s:l._next=s,null===this._linkedRecords&&(this._linkedRecords=new Qw),this._linkedRecords.put(s),s.currentIndex=h,s}_remove(s){return this._addToRemovals(this._unlink(s))}_unlink(s){null!==this._linkedRecords&&this._linkedRecords.remove(s);const l=s._prev,h=s._next;return null===l?this._itHead=h:l._next=h,null===h?this._itTail=l:h._prev=l,s}_addToMoves(s,l){return s.previousIndex===l||(this._movesTail=null===this._movesTail?this._movesHead=s:this._movesTail._nextMoved=s),s}_addToRemovals(s){return null===this._unlinkedRecords&&(this._unlinkedRecords=new Qw),this._unlinkedRecords.put(s),s.currentIndex=null,s._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=s,s._prevRemoved=null):(s._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=s),s}_addIdentityChange(s,l){return s.item=l,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=s:this._identityChangesTail._nextIdentityChange=s,s}}class SC{constructor(s,l){this.item=s,this.trackById=l,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class AC{constructor(){this._head=null,this._tail=null}add(s){null===this._head?(this._head=this._tail=s,s._nextDup=null,s._prevDup=null):(this._tail._nextDup=s,s._prevDup=this._tail,s._nextDup=null,this._tail=s)}get(s,l){let h;for(h=this._head;null!==h;h=h._nextDup)if((null===l||l<=h.currentIndex)&&Object.is(h.trackById,s))return h;return null}remove(s){const l=s._prevDup,h=s._nextDup;return null===l?this._head=h:l._nextDup=h,null===h?this._tail=l:h._prevDup=l,null===this._head}}class Qw{constructor(){this.map=new Map}put(s){const l=s.trackById;let h=this.map.get(l);h||(h=new AC,this.map.set(l,h)),h.add(s)}get(s,l){const p=this.map.get(s);return p?p.get(s,l):null}remove(s){const l=s.trackById;return this.map.get(l).remove(s)&&this.map.delete(l),s}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Jw(n,s,l){const h=n.previousIndex;if(null===h)return h;let p=0;return l&&h<l.length&&(p=l[h]),h+s+p}class Xw{constructor(){}supports(s){return s instanceof Map||Qu(s)}create(){return new RC}}class RC{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(s){let l;for(l=this._mapHead;null!==l;l=l._next)s(l)}forEachPreviousItem(s){let l;for(l=this._previousMapHead;null!==l;l=l._nextPrevious)s(l)}forEachChangedItem(s){let l;for(l=this._changesHead;null!==l;l=l._nextChanged)s(l)}forEachAddedItem(s){let l;for(l=this._additionsHead;null!==l;l=l._nextAdded)s(l)}forEachRemovedItem(s){let l;for(l=this._removalsHead;null!==l;l=l._nextRemoved)s(l)}diff(s){if(s){if(!(s instanceof Map||Qu(s)))throw new ct(900,!1)}else s=new Map;return this.check(s)?this:null}onDestroy(){}check(s){this._reset();let l=this._mapHead;if(this._appendAfter=null,this._forEach(s,(h,p)=>{if(l&&l.key===p)this._maybeAddToChanges(l,h),this._appendAfter=l,l=l._next;else{const _=this._getOrCreateRecordForKey(p,h);l=this._insertBeforeOrAppend(l,_)}}),l){l._prev&&(l._prev._next=null),this._removalsHead=l;for(let h=l;null!==h;h=h._nextRemoved)h===this._mapHead&&(this._mapHead=null),this._records.delete(h.key),h._nextRemoved=h._next,h.previousValue=h.currentValue,h.currentValue=null,h._prev=null,h._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(s,l){if(s){const h=s._prev;return l._next=s,l._prev=h,s._prev=l,h&&(h._next=l),s===this._mapHead&&(this._mapHead=l),this._appendAfter=s,s}return this._appendAfter?(this._appendAfter._next=l,l._prev=this._appendAfter):this._mapHead=l,this._appendAfter=l,null}_getOrCreateRecordForKey(s,l){if(this._records.has(s)){const p=this._records.get(s);this._maybeAddToChanges(p,l);const _=p._prev,D=p._next;return _&&(_._next=D),D&&(D._prev=_),p._next=null,p._prev=null,p}const h=new MC(s);return this._records.set(s,h),h.currentValue=l,this._addToAdditions(h),h}_reset(){if(this.isDirty){let s;for(this._previousMapHead=this._mapHead,s=this._previousMapHead;null!==s;s=s._next)s._nextPrevious=s._next;for(s=this._changesHead;null!==s;s=s._nextChanged)s.previousValue=s.currentValue;for(s=this._additionsHead;null!=s;s=s._nextAdded)s.previousValue=s.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(s,l){Object.is(l,s.currentValue)||(s.previousValue=s.currentValue,s.currentValue=l,this._addToChanges(s))}_addToAdditions(s){null===this._additionsHead?this._additionsHead=this._additionsTail=s:(this._additionsTail._nextAdded=s,this._additionsTail=s)}_addToChanges(s){null===this._changesHead?this._changesHead=this._changesTail=s:(this._changesTail._nextChanged=s,this._changesTail=s)}_forEach(s,l){s instanceof Map?s.forEach(l):Object.keys(s).forEach(h=>l(s[h],h))}}class MC{constructor(s){this.key=s,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function eI(){return new g0([new Yw])}let g0=(()=>{class n{constructor(l){this.factories=l}static create(l,h){if(null!=h){const p=h.factories.slice();l=l.concat(p)}return new n(l)}static extend(l){return{provide:n,useFactory:h=>n.create(l,h||eI()),deps:[[n,new Nu,new Pa]]}}find(l){const h=this.factories.find(p=>p.supports(l));if(null!=h)return h;throw new ct(901,!1)}}return n.\u0275prov=et({token:n,providedIn:"root",factory:eI}),n})();function tI(){return new m0([new Xw])}let m0=(()=>{class n{constructor(l){this.factories=l}static create(l,h){if(h){const p=h.factories.slice();l=l.concat(p)}return new n(l)}static extend(l){return{provide:n,useFactory:h=>n.create(l,h||tI()),deps:[[n,new Nu,new Pa]]}}find(l){const h=this.factories.find(p=>p.supports(l));if(h)return h;throw new ct(901,!1)}}return n.\u0275prov=et({token:n,providedIn:"root",factory:tI}),n})();const PC=Lw(null,"core",[]);let OC=(()=>{class n{constructor(l){}}return n.\u0275fac=function(l){return new(l||n)(Yi(IE))},n.\u0275mod=Jr({type:n}),n.\u0275inj=dn({}),n})();function kC(n){return"boolean"==typeof n?n:null!=n&&"false"!==n}},433:(rn,ot,z)=>{z.d(ot,{Fj:()=>it,qu:()=>no,u:()=>No,sg:()=>Wa,u5:()=>ca,JU:()=>ct,JJ:()=>Qe,JL:()=>ge,F:()=>Xr,On:()=>Le,YN:()=>Ka,wV:()=>wt,UX:()=>fl,Q7:()=>Hi,EJ:()=>Kr,kI:()=>Mt,_Y:()=>xe,Kr:()=>_o});var w=z(4650),Y=z(6895),X=z(8996),Re=z(9751),Ce=z(4742),Ne=z(8421),Ve=z(7669),Ge=z(5403),Ye=z(3268),ye=z(1810),Se=z(4004);let Rt=(()=>{class H{constructor(L,ne){this._renderer=L,this._elementRef=ne,this.onChange=lt=>{},this.onTouched=()=>{}}setProperty(L,ne){this._renderer.setProperty(this._elementRef.nativeElement,L,ne)}registerOnTouched(L){this.onTouched=L}registerOnChange(L){this.onChange=L}setDisabledState(L){this.setProperty("disabled",L)}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(w.Qsj),w.Y36(w.SBq))},H.\u0275dir=w.lG2({type:H}),H})(),vt=(()=>{class H extends Rt{}return H.\u0275fac=function(){let V;return function(ne){return(V||(V=w.n5z(H)))(ne||H)}}(),H.\u0275dir=w.lG2({type:H,features:[w.qOj]}),H})();const ct=new w.OlP("NgValueAccessor"),dt={provide:ct,useExisting:(0,w.Gpc)(()=>it),multi:!0},an=new w.OlP("CompositionEventMode");let it=(()=>{class H extends Rt{constructor(L,ne,lt){super(L,ne),this._compositionMode=lt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ue(){const H=(0,Y.q)()?(0,Y.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(L){this.setProperty("value",L??"")}_handleInput(L){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(L)}_compositionStart(){this._composing=!0}_compositionEnd(L){this._composing=!1,this._compositionMode&&this.onChange(L)}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(an,8))},H.\u0275dir=w.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(L,ne){1&L&&w.NdJ("input",function(Lt){return ne._handleInput(Lt.target.value)})("blur",function(){return ne.onTouched()})("compositionstart",function(){return ne._compositionStart()})("compositionend",function(Lt){return ne._compositionEnd(Lt.target.value)})},features:[w._Bn([dt]),w.qOj]}),H})();function Fe(H){return null==H||("string"==typeof H||Array.isArray(H))&&0===H.length}function At(H){return null!=H&&"number"==typeof H.length}const Et=new w.OlP("NgValidators"),We=new w.OlP("NgAsyncValidators"),Oe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Mt{static min(V){return function Dt(H){return V=>{if(Fe(V.value)||Fe(H))return null;const L=parseFloat(V.value);return!isNaN(L)&&L<H?{min:{min:H,actual:V.value}}:null}}(V)}static max(V){return function Kt(H){return V=>{if(Fe(V.value)||Fe(H))return null;const L=parseFloat(V.value);return!isNaN(L)&&L>H?{max:{max:H,actual:V.value}}:null}}(V)}static required(V){return Ht(V)}static requiredTrue(V){return function Dr(H){return!0===H.value?null:{required:!0}}(V)}static email(V){return function si(H){return Fe(H.value)||Oe.test(H.value)?null:{email:!0}}(V)}static minLength(V){return function kn(H){return V=>Fe(V.value)||!At(V.value)?null:V.value.length<H?{minlength:{requiredLength:H,actualLength:V.value.length}}:null}(V)}static maxLength(V){return function se(H){return V=>At(V.value)&&V.value.length>H?{maxlength:{requiredLength:H,actualLength:V.value.length}}:null}(V)}static pattern(V){return function Ae(H){if(!H)return Me;let V,L;return"string"==typeof H?(L="","^"!==H.charAt(0)&&(L+="^"),L+=H,"$"!==H.charAt(H.length-1)&&(L+="$"),V=new RegExp(L)):(L=H.toString(),V=H),ne=>{if(Fe(ne.value))return null;const lt=ne.value;return V.test(lt)?null:{pattern:{requiredPattern:L,actualValue:lt}}}}(V)}static nullValidator(V){return null}static compose(V){return En(V)}static composeAsync(V){return Mn(V)}}function Ht(H){return Fe(H.value)?{required:!0}:null}function Me(H){return null}function Ke(H){return null!=H}function tt(H){return(0,w.QGY)(H)?(0,X.D)(H):H}function gt(H){let V={};return H.forEach(L=>{V=null!=L?{...V,...L}:V}),0===Object.keys(V).length?null:V}function et(H,V){return V.map(L=>L(H))}function dn(H){return H.map(V=>function zt(H){return!H.validate}(V)?V:L=>V.validate(L))}function En(H){if(!H)return null;const V=H.filter(Ke);return 0==V.length?null:function(L){return gt(et(L,V))}}function un(H){return null!=H?En(dn(H)):null}function Mn(H){if(!H)return null;const V=H.filter(Ke);return 0==V.length?null:function(L){return function pe(...H){const V=(0,Ve.jO)(H),{args:L,keys:ne}=(0,Ce.D)(H),lt=new Re.y(Lt=>{const{length:_r}=L;if(!_r)return void Lt.complete();const Cs=new Array(_r);let Gi=_r,Ps=_r;for(let Ds=0;Ds<_r;Ds++){let Zi=!1;(0,Ne.Xf)(L[Ds]).subscribe((0,Ge.x)(Lt,Eo=>{Zi||(Zi=!0,Ps--),Cs[Ds]=Eo},()=>Gi--,void 0,()=>{(!Gi||!Zi)&&(Ps||Lt.next(ne?(0,ye.n)(ne,Cs):Cs),Lt.complete())}))}});return V?lt.pipe((0,Ye.Z)(V)):lt}(et(L,V).map(tt)).pipe((0,Se.U)(gt))}}function fr(H){return null!=H?Mn(dn(H)):null}function Hn(H,V){return null===H?[V]:Array.isArray(H)?[...H,V]:[H,V]}function Xn(H){return H._rawValidators}function Jt(H){return H._rawAsyncValidators}function cr(H){return H?Array.isArray(H)?H:[H]:[]}function kr(H,V){return Array.isArray(H)?H.includes(V):H===V}function Fn(H,V){const L=cr(V);return cr(H).forEach(lt=>{kr(L,lt)||L.push(lt)}),L}function Ut(H,V){return cr(V).filter(L=>!kr(H,L))}class wr{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(V){this._rawValidators=V||[],this._composedValidatorFn=un(this._rawValidators)}_setAsyncValidators(V){this._rawAsyncValidators=V||[],this._composedAsyncValidatorFn=fr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(V){this._onDestroyCallbacks.push(V)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(V=>V()),this._onDestroyCallbacks=[]}reset(V){this.control&&this.control.reset(V)}hasError(V,L){return!!this.control&&this.control.hasError(V,L)}getError(V,L){return this.control?this.control.getError(V,L):null}}class An extends wr{get formDirective(){return null}get path(){return null}}class er extends wr{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class us{constructor(V){this._cd=V}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Qe=(()=>{class H extends us{constructor(L){super(L)}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(er,2))},H.\u0275dir=w.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(L,ne){2&L&&w.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)},features:[w.qOj]}),H})(),ge=(()=>{class H extends us{constructor(L){super(L)}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(An,10))},H.\u0275dir=w.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(L,ne){2&L&&w.ekj("ng-untouched",ne.isUntouched)("ng-touched",ne.isTouched)("ng-pristine",ne.isPristine)("ng-dirty",ne.isDirty)("ng-valid",ne.isValid)("ng-invalid",ne.isInvalid)("ng-pending",ne.isPending)("ng-submitted",ne.isSubmitted)},features:[w.qOj]}),H})();const Jr="VALID",ti="INVALID",_e="PENDING",fe="DISABLED";function ke(H){return(vn(H)?H.validators:H)||null}function rt(H){return Array.isArray(H)?un(H):H||null}function $e(H,V){return(vn(V)?V.asyncValidators:H)||null}function Gt(H){return Array.isArray(H)?fr(H):H||null}function vn(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}function Ln(H,V,L){const ne=H.controls;if(!(V?Object.keys(ne):ne).length)throw new w.vHH(1e3,"");if(!ne[L])throw new w.vHH(1001,"")}function mr(H,V,L){H._forEachChild((ne,lt)=>{if(void 0===L[lt])throw new w.vHH(1002,"")})}class de{constructor(V,L){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=V,this._rawAsyncValidators=L,this._composedValidatorFn=rt(this._rawValidators),this._composedAsyncValidatorFn=Gt(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(V){this._rawValidators=this._composedValidatorFn=V}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(V){this._rawAsyncValidators=this._composedAsyncValidatorFn=V}get parent(){return this._parent}get valid(){return this.status===Jr}get invalid(){return this.status===ti}get pending(){return this.status==_e}get disabled(){return this.status===fe}get enabled(){return this.status!==fe}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(V){this._rawValidators=V,this._composedValidatorFn=rt(V)}setAsyncValidators(V){this._rawAsyncValidators=V,this._composedAsyncValidatorFn=Gt(V)}addValidators(V){this.setValidators(Fn(V,this._rawValidators))}addAsyncValidators(V){this.setAsyncValidators(Fn(V,this._rawAsyncValidators))}removeValidators(V){this.setValidators(Ut(V,this._rawValidators))}removeAsyncValidators(V){this.setAsyncValidators(Ut(V,this._rawAsyncValidators))}hasValidator(V){return kr(this._rawValidators,V)}hasAsyncValidator(V){return kr(this._rawAsyncValidators,V)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(V={}){this.touched=!0,this._parent&&!V.onlySelf&&this._parent.markAsTouched(V)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(V=>V.markAllAsTouched())}markAsUntouched(V={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(L=>{L.markAsUntouched({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}markAsDirty(V={}){this.pristine=!1,this._parent&&!V.onlySelf&&this._parent.markAsDirty(V)}markAsPristine(V={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(L=>{L.markAsPristine({onlySelf:!0})}),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}markAsPending(V={}){this.status=_e,!1!==V.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!V.onlySelf&&this._parent.markAsPending(V)}disable(V={}){const L=this._parentMarkedDirty(V.onlySelf);this.status=fe,this.errors=null,this._forEachChild(ne=>{ne.disable({...V,onlySelf:!0})}),this._updateValue(),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...V,skipPristineCheck:L}),this._onDisabledChange.forEach(ne=>ne(!0))}enable(V={}){const L=this._parentMarkedDirty(V.onlySelf);this.status=Jr,this._forEachChild(ne=>{ne.enable({...V,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent}),this._updateAncestors({...V,skipPristineCheck:L}),this._onDisabledChange.forEach(ne=>ne(!1))}_updateAncestors(V){this._parent&&!V.onlySelf&&(this._parent.updateValueAndValidity(V),V.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(V){this._parent=V}getRawValue(){return this.value}updateValueAndValidity(V={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Jr||this.status===_e)&&this._runAsyncValidator(V.emitEvent)),!1!==V.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!V.onlySelf&&this._parent.updateValueAndValidity(V)}_updateTreeValidity(V={emitEvent:!0}){this._forEachChild(L=>L._updateTreeValidity(V)),this.updateValueAndValidity({onlySelf:!0,emitEvent:V.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?fe:Jr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(V){if(this.asyncValidator){this.status=_e,this._hasOwnPendingAsyncValidator=!0;const L=tt(this.asyncValidator(this));this._asyncValidationSubscription=L.subscribe(ne=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(ne,{emitEvent:V})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(V,L={}){this.errors=V,this._updateControlsErrors(!1!==L.emitEvent)}get(V){let L=V;return null==L||(Array.isArray(L)||(L=L.split(".")),0===L.length)?null:L.reduce((ne,lt)=>ne&&ne._find(lt),this)}getError(V,L){const ne=L?this.get(L):this;return ne&&ne.errors?ne.errors[V]:null}hasError(V,L){return!!this.getError(V,L)}get root(){let V=this;for(;V._parent;)V=V._parent;return V}_updateControlsErrors(V){this.status=this._calculateStatus(),V&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(V)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?fe:this.errors?ti:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(_e)?_e:this._anyControlsHaveStatus(ti)?ti:Jr}_anyControlsHaveStatus(V){return this._anyControls(L=>L.status===V)}_anyControlsDirty(){return this._anyControls(V=>V.dirty)}_anyControlsTouched(){return this._anyControls(V=>V.touched)}_updatePristine(V={}){this.pristine=!this._anyControlsDirty(),this._parent&&!V.onlySelf&&this._parent._updatePristine(V)}_updateTouched(V={}){this.touched=this._anyControlsTouched(),this._parent&&!V.onlySelf&&this._parent._updateTouched(V)}_registerOnCollectionChange(V){this._onCollectionChange=V}_setUpdateStrategy(V){vn(V)&&null!=V.updateOn&&(this._updateOn=V.updateOn)}_parentMarkedDirty(V){return!V&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(V){return null}}class ue extends de{constructor(V,L,ne){super(ke(L),$e(ne,L)),this.controls=V,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(V,L){return this.controls[V]?this.controls[V]:(this.controls[V]=L,L.setParent(this),L._registerOnCollectionChange(this._onCollectionChange),L)}addControl(V,L,ne={}){this.registerControl(V,L),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}removeControl(V,L={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}setControl(V,L,ne={}){this.controls[V]&&this.controls[V]._registerOnCollectionChange(()=>{}),delete this.controls[V],L&&this.registerControl(V,L),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}contains(V){return this.controls.hasOwnProperty(V)&&this.controls[V].enabled}setValue(V,L={}){mr(this,0,V),Object.keys(V).forEach(ne=>{Ln(this,!0,ne),this.controls[ne].setValue(V[ne],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(V,L={}){null!=V&&(Object.keys(V).forEach(ne=>{const lt=this.controls[ne];lt&&lt.patchValue(V[ne],{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(V={},L={}){this._forEachChild((ne,lt)=>{ne.reset(V[lt],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this._reduceChildren({},(V,L,ne)=>(V[ne]=L.getRawValue(),V))}_syncPendingControls(){let V=this._reduceChildren(!1,(L,ne)=>!!ne._syncPendingControls()||L);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){Object.keys(this.controls).forEach(L=>{const ne=this.controls[L];ne&&V(ne,L)})}_setUpControls(){this._forEachChild(V=>{V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(V){for(const[L,ne]of Object.entries(this.controls))if(this.contains(L)&&V(ne))return!0;return!1}_reduceValue(){return this._reduceChildren({},(L,ne,lt)=>((ne.enabled||this.disabled)&&(L[lt]=ne.value),L))}_reduceChildren(V,L){let ne=V;return this._forEachChild((lt,Lt)=>{ne=L(ne,lt,Lt)}),ne}_allControlsDisabled(){for(const V of Object.keys(this.controls))if(this.controls[V].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(V){return this.controls.hasOwnProperty(V)?this.controls[V]:null}}class Ct extends ue{}function xn(H,V){return[...V.path,H]}function He(H,V){In(H,V),V.valueAccessor.writeValue(H.value),H.disabled&&V.valueAccessor.setDisabledState?.(!0),function yr(H,V){V.valueAccessor.registerOnChange(L=>{H._pendingValue=L,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&ur(H,V)})}(H,V),function Ii(H,V){const L=(ne,lt)=>{V.valueAccessor.writeValue(ne),lt&&V.viewToModelUpdate(ne)};H.registerOnChange(L),V._registerOnDestroy(()=>{H._unregisterOnChange(L)})}(H,V),function oi(H,V){V.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&ur(H,V),"submit"!==H.updateOn&&H.markAsTouched()})}(H,V),function Pt(H,V){if(V.valueAccessor.setDisabledState){const L=ne=>{V.valueAccessor.setDisabledState(ne)};H.registerOnDisabledChange(L),V._registerOnDestroy(()=>{H._unregisterOnDisabledChange(L)})}}(H,V)}function je(H,V,L=!0){const ne=()=>{};V.valueAccessor&&(V.valueAccessor.registerOnChange(ne),V.valueAccessor.registerOnTouched(ne)),bn(H,V),H&&(V._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function St(H,V){H.forEach(L=>{L.registerOnValidatorChange&&L.registerOnValidatorChange(V)})}function In(H,V){const L=Xn(H);null!==V.validator?H.setValidators(Hn(L,V.validator)):"function"==typeof L&&H.setValidators([L]);const ne=Jt(H);null!==V.asyncValidator?H.setAsyncValidators(Hn(ne,V.asyncValidator)):"function"==typeof ne&&H.setAsyncValidators([ne]);const lt=()=>H.updateValueAndValidity();St(V._rawValidators,lt),St(V._rawAsyncValidators,lt)}function bn(H,V){let L=!1;if(null!==H){if(null!==V.validator){const lt=Xn(H);if(Array.isArray(lt)&&lt.length>0){const Lt=lt.filter(_r=>_r!==V.validator);Lt.length!==lt.length&&(L=!0,H.setValidators(Lt))}}if(null!==V.asyncValidator){const lt=Jt(H);if(Array.isArray(lt)&&lt.length>0){const Lt=lt.filter(_r=>_r!==V.asyncValidator);Lt.length!==lt.length&&(L=!0,H.setAsyncValidators(Lt))}}}const ne=()=>{};return St(V._rawValidators,ne),St(V._rawAsyncValidators,ne),L}function ur(H,V){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),V.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function ji(H,V){In(H,V)}function go(H,V){if(!H.hasOwnProperty("model"))return!1;const L=H.model;return!!L.isFirstChange()||!Object.is(V,L.currentValue)}function Ao(H,V){H._syncPendingControls(),V.forEach(L=>{const ne=L.control;"submit"===ne.updateOn&&ne._pendingChange&&(L.viewToModelUpdate(ne._pendingValue),ne._pendingChange=!1)})}function Gr(H,V){if(!V)return null;let L,ne,lt;return Array.isArray(V),V.forEach(Lt=>{Lt.constructor===it?L=Lt:function vs(H){return Object.getPrototypeOf(H.constructor)===vt}(Lt)?ne=Lt:lt=Lt}),lt||ne||L||null}const gi={provide:An,useExisting:(0,w.Gpc)(()=>Xr)},Fs=(()=>Promise.resolve())();let Xr=(()=>{class H extends An{constructor(L,ne){super(),this.submitted=!1,this._directives=new Set,this.ngSubmit=new w.vpe,this.form=new ue({},un(L),fr(ne))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(L){Fs.then(()=>{const ne=this._findContainer(L.path);L.control=ne.registerControl(L.name,L.control),He(L.control,L),L.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(L)})}getControl(L){return this.form.get(L.path)}removeControl(L){Fs.then(()=>{const ne=this._findContainer(L.path);ne&&ne.removeControl(L.name),this._directives.delete(L)})}addFormGroup(L){Fs.then(()=>{const ne=this._findContainer(L.path),lt=new ue({});ji(lt,L),ne.registerControl(L.name,lt),lt.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(L){Fs.then(()=>{const ne=this._findContainer(L.path);ne&&ne.removeControl(L.name)})}getFormGroup(L){return this.form.get(L.path)}updateModel(L,ne){Fs.then(()=>{this.form.get(L.path).setValue(ne)})}setValue(L){this.control.setValue(L)}onSubmit(L){return this.submitted=!0,Ao(this.form,this._directives),this.ngSubmit.emit(L),"dialog"===L?.target?.method}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(L){return L.pop(),L.length?this.form.get(L):this.form}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(Et,10),w.Y36(We,10))},H.\u0275dir=w.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(L,ne){1&L&&w.NdJ("submit",function(Lt){return ne.onSubmit(Lt)})("reset",function(){return ne.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([gi]),w.qOj]}),H})();function ui(H,V){const L=H.indexOf(V);L>-1&&H.splice(L,1)}function Qi(H){return"object"==typeof H&&null!==H&&2===Object.keys(H).length&&"value"in H&&"disabled"in H}const xs=class extends de{constructor(V=null,L,ne){super(ke(L),$e(ne,L)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(V),this._setUpdateStrategy(L),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),vn(L)&&(L.nonNullable||L.initialValueIsDefault)&&(this.defaultValue=Qi(V)?V.value:V)}setValue(V,L={}){this.value=this._pendingValue=V,this._onChange.length&&!1!==L.emitModelToViewChange&&this._onChange.forEach(ne=>ne(this.value,!1!==L.emitViewToModelChange)),this.updateValueAndValidity(L)}patchValue(V,L={}){this.setValue(V,L)}reset(V=this.defaultValue,L={}){this._applyFormState(V),this.markAsPristine(L),this.markAsUntouched(L),this.setValue(this.value,L),this._pendingChange=!1}_updateValue(){}_anyControls(V){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(V){this._onChange.push(V)}_unregisterOnChange(V){ui(this._onChange,V)}registerOnDisabledChange(V){this._onDisabledChange.push(V)}_unregisterOnDisabledChange(V){ui(this._onDisabledChange,V)}_forEachChild(V){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(V){Qi(V)?(this.value=this._pendingValue=V.value,V.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=V}},Sa={provide:er,useExisting:(0,w.Gpc)(()=>Le)},xo=(()=>Promise.resolve())();let Le=(()=>{class H extends er{constructor(L,ne,lt,Lt,_r){super(),this._changeDetectorRef=_r,this.control=new xs,this._registered=!1,this.update=new w.vpe,this._parent=L,this._setValidators(ne),this._setAsyncValidators(lt),this.valueAccessor=Gr(0,Lt)}ngOnChanges(L){if(this._checkForErrors(),!this._registered||"name"in L){if(this._registered&&(this._checkName(),this.formDirective)){const ne=L.name.previousValue;this.formDirective.removeControl({name:ne,path:this._getPath(ne)})}this._setUpControl()}"isDisabled"in L&&this._updateDisabled(L),go(L,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){He(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(L){xo.then(()=>{this.control.setValue(L,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(L){const ne=L.isDisabled.currentValue,lt=0!==ne&&(0,w.D6c)(ne);xo.then(()=>{lt&&!this.control.disabled?this.control.disable():!lt&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(L){return this._parent?xn(L,this._parent):[L]}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(An,9),w.Y36(Et,10),w.Y36(We,10),w.Y36(ct,10),w.Y36(w.sBO,8))},H.\u0275dir=w.lG2({type:H,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[w._Bn([Sa]),w.qOj,w.TTD]}),H})(),xe=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275dir=w.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})();const Je={provide:ct,useExisting:(0,w.Gpc)(()=>wt),multi:!0};let wt=(()=>{class H extends vt{writeValue(L){this.setProperty("value",L??"")}registerOnChange(L){this.onChange=ne=>{L(""==ne?null:parseFloat(ne))}}}return H.\u0275fac=function(){let V;return function(ne){return(V||(V=w.n5z(H)))(ne||H)}}(),H.\u0275dir=w.lG2({type:H,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(L,ne){1&L&&w.NdJ("input",function(Lt){return ne.onChange(Lt.target.value)})("blur",function(){return ne.onTouched()})},features:[w._Bn([Je]),w.qOj]}),H})(),Ir=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=w.oAB({type:H}),H.\u0275inj=w.cJS({}),H})();const Cn=new w.OlP("NgModelWithFormControlWarning"),ds={provide:An,useExisting:(0,w.Gpc)(()=>Wa)};let Wa=(()=>{class H extends An{constructor(L,ne){super(),this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new w.vpe,this._setValidators(L),this._setAsyncValidators(ne)}ngOnChanges(L){this._checkFormPresent(),L.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(bn(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(L){const ne=this.form.get(L.path);return He(ne,L),ne.updateValueAndValidity({emitEvent:!1}),this.directives.push(L),ne}getControl(L){return this.form.get(L.path)}removeControl(L){je(L.control||null,L,!1),function to(H,V){const L=H.indexOf(V);L>-1&&H.splice(L,1)}(this.directives,L)}addFormGroup(L){this._setUpFormContainer(L)}removeFormGroup(L){this._cleanUpFormContainer(L)}getFormGroup(L){return this.form.get(L.path)}addFormArray(L){this._setUpFormContainer(L)}removeFormArray(L){this._cleanUpFormContainer(L)}getFormArray(L){return this.form.get(L.path)}updateModel(L,ne){this.form.get(L.path).setValue(ne)}onSubmit(L){return this.submitted=!0,Ao(this.form,this.directives),this.ngSubmit.emit(L),"dialog"===L?.target?.method}onReset(){this.resetForm()}resetForm(L){this.form.reset(L),this.submitted=!1}_updateDomValue(){this.directives.forEach(L=>{const ne=L.control,lt=this.form.get(L.path);ne!==lt&&(je(ne||null,L),(H=>H instanceof xs)(lt)&&(He(lt,L),L.control=lt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(L){const ne=this.form.get(L.path);ji(ne,L),ne.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(L){if(this.form){const ne=this.form.get(L.path);ne&&function ki(H,V){return bn(H,V)}(ne,L)&&ne.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){In(this.form,this),this._oldForm&&bn(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(Et,10),w.Y36(We,10))},H.\u0275dir=w.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(L,ne){1&L&&w.NdJ("submit",function(Lt){return ne.onSubmit(Lt)})("reset",function(){return ne.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[w._Bn([ds]),w.qOj,w.TTD]}),H})();const xl={provide:er,useExisting:(0,w.Gpc)(()=>No)};let No=(()=>{class H extends er{constructor(L,ne,lt,Lt,_r){super(),this._ngModelWarningConfig=_r,this._added=!1,this.update=new w.vpe,this._ngModelWarningSent=!1,this._parent=L,this._setValidators(ne),this._setAsyncValidators(lt),this.valueAccessor=Gr(0,Lt)}set isDisabled(L){}ngOnChanges(L){this._added||this._setUpControl(),go(L,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(L){this.viewModel=L,this.update.emit(L)}get path(){return xn(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}}return H._ngModelWarningSentOnce=!1,H.\u0275fac=function(L){return new(L||H)(w.Y36(An,13),w.Y36(Et,10),w.Y36(We,10),w.Y36(ct,10),w.Y36(Cn,8))},H.\u0275dir=w.lG2({type:H,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[w._Bn([xl]),w.qOj,w.TTD]}),H})();const qi={provide:ct,useExisting:(0,w.Gpc)(()=>Kr),multi:!0};function hl(H,V){return null==H?`${V}`:(V&&"object"==typeof V&&(V="Object"),`${H}: ${V}`.slice(0,50))}let Kr=(()=>{class H extends vt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(L){this._compareWith=L}writeValue(L){this.value=L;const lt=hl(this._getOptionId(L),L);this.setProperty("value",lt)}registerOnChange(L){this.onChange=ne=>{this.value=this._getOptionValue(ne),L(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(L){for(const ne of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ne),L))return ne;return null}_getOptionValue(L){const ne=function Ci(H){return H.split(":")[0]}(L);return this._optionMap.has(ne)?this._optionMap.get(ne):L}}return H.\u0275fac=function(){let V;return function(ne){return(V||(V=w.n5z(H)))(ne||H)}}(),H.\u0275dir=w.lG2({type:H,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(L,ne){1&L&&w.NdJ("change",function(Lt){return ne.onChange(Lt.target.value)})("blur",function(){return ne.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([qi]),w.qOj]}),H})(),Ka=(()=>{class H{constructor(L,ne,lt){this._element=L,this._renderer=ne,this._select=lt,this._select&&(this.id=this._select._registerOption())}set ngValue(L){null!=this._select&&(this._select._optionMap.set(this.id,L),this._setElementValue(hl(this.id,L)),this._select.writeValue(this._select.value))}set value(L){this._setElementValue(L),this._select&&this._select.writeValue(this._select.value)}_setElementValue(L){this._renderer.setProperty(this._element.nativeElement,"value",L)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(Kr,9))},H.\u0275dir=w.lG2({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),H})();const zs={provide:ct,useExisting:(0,w.Gpc)(()=>Ji),multi:!0};function yo(H,V){return null==H?`${V}`:("string"==typeof V&&(V=`'${V}'`),V&&"object"==typeof V&&(V="Object"),`${H}: ${V}`.slice(0,50))}let Ji=(()=>{class H extends vt{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(L){this._compareWith=L}writeValue(L){let ne;if(this.value=L,Array.isArray(L)){const lt=L.map(Lt=>this._getOptionId(Lt));ne=(Lt,_r)=>{Lt._setSelected(lt.indexOf(_r.toString())>-1)}}else ne=(lt,Lt)=>{lt._setSelected(!1)};this._optionMap.forEach(ne)}registerOnChange(L){this.onChange=ne=>{const lt=[],Lt=ne.selectedOptions;if(void 0!==Lt){const _r=Lt;for(let Cs=0;Cs<_r.length;Cs++){const Ps=this._getOptionValue(_r[Cs].value);lt.push(Ps)}}else{const _r=ne.options;for(let Cs=0;Cs<_r.length;Cs++){const Gi=_r[Cs];if(Gi.selected){const Ps=this._getOptionValue(Gi.value);lt.push(Ps)}}}this.value=lt,L(lt)}}_registerOption(L){const ne=(this._idCounter++).toString();return this._optionMap.set(ne,L),ne}_getOptionId(L){for(const ne of Array.from(this._optionMap.keys()))if(this._compareWith(this._optionMap.get(ne)._value,L))return ne;return null}_getOptionValue(L){const ne=function ni(H){return H.split(":")[0]}(L);return this._optionMap.has(ne)?this._optionMap.get(ne)._value:L}}return H.\u0275fac=function(){let V;return function(ne){return(V||(V=w.n5z(H)))(ne||H)}}(),H.\u0275dir=w.lG2({type:H,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(L,ne){1&L&&w.NdJ("change",function(Lt){return ne.onChange(Lt.target)})("blur",function(){return ne.onTouched()})},inputs:{compareWith:"compareWith"},features:[w._Bn([zs]),w.qOj]}),H})(),_o=(()=>{class H{constructor(L,ne,lt){this._element=L,this._renderer=ne,this._select=lt,this._select&&(this.id=this._select._registerOption(this))}set ngValue(L){null!=this._select&&(this._value=L,this._setElementValue(yo(this.id,L)),this._select.writeValue(this._select.value))}set value(L){this._select?(this._value=L,this._setElementValue(yo(this.id,L)),this._select.writeValue(this._select.value)):this._setElementValue(L)}_setElementValue(L){this._renderer.setProperty(this._element.nativeElement,"value",L)}_setSelected(L){this._renderer.setProperty(this._element.nativeElement,"selected",L)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}}return H.\u0275fac=function(L){return new(L||H)(w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(Ji,9))},H.\u0275dir=w.lG2({type:H,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}}),H})(),Us=(()=>{class H{constructor(){this._validator=Me}ngOnChanges(L){if(this.inputName in L){const ne=this.normalizeInput(L[this.inputName].currentValue);this._enabled=this.enabled(ne),this._validator=this._enabled?this.createValidator(ne):Me,this._onChange&&this._onChange()}}validate(L){return this._validator(L)}registerOnValidatorChange(L){this._onChange=L}enabled(L){return null!=L}}return H.\u0275fac=function(L){return new(L||H)},H.\u0275dir=w.lG2({type:H,features:[w.TTD]}),H})();const hs={provide:Et,useExisting:(0,w.Gpc)(()=>Hi),multi:!0};let Hi=(()=>{class H extends Us{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=w.D6c,this.createValidator=L=>Ht}enabled(L){return L}}return H.\u0275fac=function(){let V;return function(ne){return(V||(V=w.n5z(H)))(ne||H)}}(),H.\u0275dir=w.lG2({type:H,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(L,ne){2&L&&w.uIk("required",ne._enabled?"":null)},inputs:{required:"required"},features:[w._Bn([hs]),w.qOj]}),H})(),rr=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=w.oAB({type:H}),H.\u0275inj=w.cJS({imports:[Ir]}),H})(),ca=(()=>{class H{}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=w.oAB({type:H}),H.\u0275inj=w.cJS({imports:[rr]}),H})(),fl=(()=>{class H{static withConfig(L){return{ngModule:H,providers:[{provide:Cn,useValue:L.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(L){return new(L||H)},H.\u0275mod=w.oAB({type:H}),H.\u0275inj=w.cJS({imports:[rr]}),H})();class Di extends de{constructor(V,L,ne){super(ke(L),$e(ne,L)),this.controls=V,this._initObservables(),this._setUpdateStrategy(L),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(V){return this.controls[this._adjustIndex(V)]}push(V,L={}){this.controls.push(V),this._registerControl(V),this.updateValueAndValidity({emitEvent:L.emitEvent}),this._onCollectionChange()}insert(V,L,ne={}){this.controls.splice(V,0,L),this._registerControl(L),this.updateValueAndValidity({emitEvent:ne.emitEvent})}removeAt(V,L={}){let ne=this._adjustIndex(V);ne<0&&(ne=0),this.controls[ne]&&this.controls[ne]._registerOnCollectionChange(()=>{}),this.controls.splice(ne,1),this.updateValueAndValidity({emitEvent:L.emitEvent})}setControl(V,L,ne={}){let lt=this._adjustIndex(V);lt<0&&(lt=0),this.controls[lt]&&this.controls[lt]._registerOnCollectionChange(()=>{}),this.controls.splice(lt,1),L&&(this.controls.splice(lt,0,L),this._registerControl(L)),this.updateValueAndValidity({emitEvent:ne.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(V,L={}){mr(this,0,V),V.forEach((ne,lt)=>{Ln(this,!1,lt),this.at(lt).setValue(ne,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L)}patchValue(V,L={}){null!=V&&(V.forEach((ne,lt)=>{this.at(lt)&&this.at(lt).patchValue(ne,{onlySelf:!0,emitEvent:L.emitEvent})}),this.updateValueAndValidity(L))}reset(V=[],L={}){this._forEachChild((ne,lt)=>{ne.reset(V[lt],{onlySelf:!0,emitEvent:L.emitEvent})}),this._updatePristine(L),this._updateTouched(L),this.updateValueAndValidity(L)}getRawValue(){return this.controls.map(V=>V.getRawValue())}clear(V={}){this.controls.length<1||(this._forEachChild(L=>L._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:V.emitEvent}))}_adjustIndex(V){return V<0?V+this.length:V}_syncPendingControls(){let V=this.controls.reduce((L,ne)=>!!ne._syncPendingControls()||L,!1);return V&&this.updateValueAndValidity({onlySelf:!0}),V}_forEachChild(V){this.controls.forEach((L,ne)=>{V(L,ne)})}_updateValue(){this.value=this.controls.filter(V=>V.enabled||this.disabled).map(V=>V.value)}_anyControls(V){return this.controls.some(L=>L.enabled&&V(L))}_setUpControls(){this._forEachChild(V=>this._registerControl(V))}_allControlsDisabled(){for(const V of this.controls)if(V.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(V){V.setParent(this),V._registerOnCollectionChange(this._onCollectionChange)}_find(V){return this.at(V)??null}}function es(H){return!!H&&(void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn)}let no=(()=>{class H{constructor(){this.useNonNullable=!1}get nonNullable(){const L=new H;return L.useNonNullable=!0,L}group(L,ne=null){const lt=this._reduceControls(L);let Lt={};return es(ne)?Lt=ne:null!==ne&&(Lt.validators=ne.validator,Lt.asyncValidators=ne.asyncValidator),new ue(lt,Lt)}record(L,ne=null){const lt=this._reduceControls(L);return new Ct(lt,ne)}control(L,ne,lt){let Lt={};return this.useNonNullable?(es(ne)?Lt=ne:(Lt.validators=ne,Lt.asyncValidators=lt),new xs(L,{...Lt,nonNullable:!0})):new xs(L,ne,lt)}array(L,ne,lt){const Lt=L.map(_r=>this._createControl(_r));return new Di(Lt,ne,lt)}_reduceControls(L){const ne={};return Object.keys(L).forEach(lt=>{ne[lt]=this._createControl(L[lt])}),ne}_createControl(L){return L instanceof xs||L instanceof de?L:Array.isArray(L)?this.control(L[0],L.length>1?L[1]:null,L.length>2?L[2]:null):this.control(L)}}return H.\u0275fac=function(L){return new(L||H)},H.\u0275prov=w.Yz7({token:H,factory:H.\u0275fac,providedIn:fl}),H})()},1481:(rn,ot,z)=>{z.d(ot,{Cb:()=>$r,Dx:()=>Qe,b2:()=>An,ki:()=>br,q6:()=>kr,se:()=>Ht});var w=z(6895),Y=z(4650);class X extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Re extends X{static makeCurrent(){(0,w.HT)(new Re)}onAndCancel(ue,oe,Be){return ue.addEventListener(oe,Be,!1),()=>{ue.removeEventListener(oe,Be,!1)}}dispatchEvent(ue,oe){ue.dispatchEvent(oe)}remove(ue){ue.parentNode&&ue.parentNode.removeChild(ue)}createElement(ue,oe){return(oe=oe||this.getDefaultDocument()).createElement(ue)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(ue){return ue.nodeType===Node.ELEMENT_NODE}isShadowRoot(ue){return ue instanceof DocumentFragment}getGlobalEventTarget(ue,oe){return"window"===oe?window:"document"===oe?ue:"body"===oe?ue.body:null}getBaseHref(ue){const oe=function Ne(){return Ce=Ce||document.querySelector("base"),Ce?Ce.getAttribute("href"):null}();return null==oe?null:function Ge(de){Ve=Ve||document.createElement("a"),Ve.setAttribute("href",de);const ue=Ve.pathname;return"/"===ue.charAt(0)?ue:`/${ue}`}(oe)}resetBaseElement(){Ce=null}getUserAgent(){return window.navigator.userAgent}getCookie(ue){return(0,w.Mx)(document.cookie,ue)}}let Ve,Ce=null;const Ye=new Y.OlP("TRANSITION_ID"),pe=[{provide:Y.ip1,useFactory:function ye(de,ue,oe){return()=>{oe.get(Y.CZH).donePromise.then(()=>{const Be=(0,w.q)(),Ct=ue.querySelectorAll(`style[ng-transition="${de}"]`);for(let sn=0;sn<Ct.length;sn++)Be.remove(Ct[sn])})}},deps:[Ye,w.K0,Y.zs3],multi:!0}];let Rt=(()=>{class de{build(){return new XMLHttpRequest}}return de.\u0275fac=function(oe){return new(oe||de)},de.\u0275prov=Y.Yz7({token:de,factory:de.\u0275fac}),de})();const vt=new Y.OlP("EventManagerPlugins");let ct=(()=>{class de{constructor(oe,Be){this._zone=Be,this._eventNameToPlugin=new Map,oe.forEach(Ct=>Ct.manager=this),this._plugins=oe.slice().reverse()}addEventListener(oe,Be,Ct){return this._findPluginFor(Be).addEventListener(oe,Be,Ct)}addGlobalEventListener(oe,Be,Ct){return this._findPluginFor(Be).addGlobalEventListener(oe,Be,Ct)}getZone(){return this._zone}_findPluginFor(oe){const Be=this._eventNameToPlugin.get(oe);if(Be)return Be;const Ct=this._plugins;for(let sn=0;sn<Ct.length;sn++){const xn=Ct[sn];if(xn.supports(oe))return this._eventNameToPlugin.set(oe,xn),xn}throw new Error(`No event manager plugin found for event ${oe}`)}}return de.\u0275fac=function(oe){return new(oe||de)(Y.LFG(vt),Y.LFG(Y.R0b))},de.\u0275prov=Y.Yz7({token:de,factory:de.\u0275fac}),de})();class $t{constructor(ue){this._doc=ue}addGlobalEventListener(ue,oe,Be){const Ct=(0,w.q)().getGlobalEventTarget(this._doc,ue);if(!Ct)throw new Error(`Unsupported event target ${Ct} for event ${oe}`);return this.addEventListener(Ct,oe,Be)}}let pt=(()=>{class de{constructor(){this._stylesSet=new Set}addStyles(oe){const Be=new Set;oe.forEach(Ct=>{this._stylesSet.has(Ct)||(this._stylesSet.add(Ct),Be.add(Ct))}),this.onStylesAdded(Be)}onStylesAdded(oe){}getAllStyles(){return Array.from(this._stylesSet)}}return de.\u0275fac=function(oe){return new(oe||de)},de.\u0275prov=Y.Yz7({token:de,factory:de.\u0275fac}),de})(),dt=(()=>{class de extends pt{constructor(oe){super(),this._doc=oe,this._hostNodes=new Map,this._hostNodes.set(oe.head,[])}_addStylesToHost(oe,Be,Ct){oe.forEach(sn=>{const xn=this._doc.createElement("style");xn.textContent=sn,Ct.push(Be.appendChild(xn))})}addHost(oe){const Be=[];this._addStylesToHost(this._stylesSet,oe,Be),this._hostNodes.set(oe,Be)}removeHost(oe){const Be=this._hostNodes.get(oe);Be&&Be.forEach(Ue),this._hostNodes.delete(oe)}onStylesAdded(oe){this._hostNodes.forEach((Be,Ct)=>{this._addStylesToHost(oe,Ct,Be)})}ngOnDestroy(){this._hostNodes.forEach(oe=>oe.forEach(Ue))}}return de.\u0275fac=function(oe){return new(oe||de)(Y.LFG(w.K0))},de.\u0275prov=Y.Yz7({token:de,factory:de.\u0275fac}),de})();function Ue(de){(0,w.q)().remove(de)}const an={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},it=/%COMP%/g;function Mt(de,ue,oe){for(let Be=0;Be<ue.length;Be++){let Ct=ue[Be];Array.isArray(Ct)?Mt(de,Ct,oe):(Ct=Ct.replace(it,de),oe.push(Ct))}return oe}function Dt(de){return ue=>{if("__ngUnwrap__"===ue)return de;!1===de(ue)&&(ue.preventDefault(),ue.returnValue=!1)}}let Ht=(()=>{class de{constructor(oe,Be,Ct){this.eventManager=oe,this.sharedStylesHost=Be,this.appId=Ct,this.rendererByCompId=new Map,this.defaultRenderer=new Dr(oe)}createRenderer(oe,Be){if(!oe||!Be)return this.defaultRenderer;switch(Be.encapsulation){case Y.ifc.Emulated:{let Ct=this.rendererByCompId.get(Be.id);return Ct||(Ct=new Ae(this.eventManager,this.sharedStylesHost,Be,this.appId),this.rendererByCompId.set(Be.id,Ct)),Ct.applyToHost(oe),Ct}case 1:case Y.ifc.ShadowDom:return new Me(this.eventManager,this.sharedStylesHost,oe,Be);default:if(!this.rendererByCompId.has(Be.id)){const Ct=Mt(Be.id,Be.styles,[]);this.sharedStylesHost.addStyles(Ct),this.rendererByCompId.set(Be.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return de.\u0275fac=function(oe){return new(oe||de)(Y.LFG(ct),Y.LFG(dt),Y.LFG(Y.AFp))},de.\u0275prov=Y.Yz7({token:de,factory:de.\u0275fac}),de})();class Dr{constructor(ue){this.eventManager=ue,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(ue,oe){return oe?document.createElementNS(an[oe]||oe,ue):document.createElement(ue)}createComment(ue){return document.createComment(ue)}createText(ue){return document.createTextNode(ue)}appendChild(ue,oe){(se(ue)?ue.content:ue).appendChild(oe)}insertBefore(ue,oe,Be){ue&&(se(ue)?ue.content:ue).insertBefore(oe,Be)}removeChild(ue,oe){ue&&ue.removeChild(oe)}selectRootElement(ue,oe){let Be="string"==typeof ue?document.querySelector(ue):ue;if(!Be)throw new Error(`The selector "${ue}" did not match any elements`);return oe||(Be.textContent=""),Be}parentNode(ue){return ue.parentNode}nextSibling(ue){return ue.nextSibling}setAttribute(ue,oe,Be,Ct){if(Ct){oe=Ct+":"+oe;const sn=an[Ct];sn?ue.setAttributeNS(sn,oe,Be):ue.setAttribute(oe,Be)}else ue.setAttribute(oe,Be)}removeAttribute(ue,oe,Be){if(Be){const Ct=an[Be];Ct?ue.removeAttributeNS(Ct,oe):ue.removeAttribute(`${Be}:${oe}`)}else ue.removeAttribute(oe)}addClass(ue,oe){ue.classList.add(oe)}removeClass(ue,oe){ue.classList.remove(oe)}setStyle(ue,oe,Be,Ct){Ct&(Y.JOm.DashCase|Y.JOm.Important)?ue.style.setProperty(oe,Be,Ct&Y.JOm.Important?"important":""):ue.style[oe]=Be}removeStyle(ue,oe,Be){Be&Y.JOm.DashCase?ue.style.removeProperty(oe):ue.style[oe]=""}setProperty(ue,oe,Be){ue[oe]=Be}setValue(ue,oe){ue.nodeValue=oe}listen(ue,oe,Be){return"string"==typeof ue?this.eventManager.addGlobalEventListener(ue,oe,Dt(Be)):this.eventManager.addEventListener(ue,oe,Dt(Be))}}function se(de){return"TEMPLATE"===de.tagName&&void 0!==de.content}class Ae extends Dr{constructor(ue,oe,Be,Ct){super(ue),this.component=Be;const sn=Mt(Ct+"-"+Be.id,Be.styles,[]);oe.addStyles(sn),this.contentAttr=function We(de){return"_ngcontent-%COMP%".replace(it,de)}(Ct+"-"+Be.id),this.hostAttr=function Oe(de){return"_nghost-%COMP%".replace(it,de)}(Ct+"-"+Be.id)}applyToHost(ue){super.setAttribute(ue,this.hostAttr,"")}createElement(ue,oe){const Be=super.createElement(ue,oe);return super.setAttribute(Be,this.contentAttr,""),Be}}class Me extends Dr{constructor(ue,oe,Be,Ct){super(ue),this.sharedStylesHost=oe,this.hostEl=Be,this.shadowRoot=Be.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const sn=Mt(Ct.id,Ct.styles,[]);for(let xn=0;xn<sn.length;xn++){const He=document.createElement("style");He.textContent=sn[xn],this.shadowRoot.appendChild(He)}}nodeOrShadowRoot(ue){return ue===this.hostEl?this.shadowRoot:ue}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(ue,oe){return super.appendChild(this.nodeOrShadowRoot(ue),oe)}insertBefore(ue,oe,Be){return super.insertBefore(this.nodeOrShadowRoot(ue),oe,Be)}removeChild(ue,oe){return super.removeChild(this.nodeOrShadowRoot(ue),oe)}parentNode(ue){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(ue)))}}let Ke=(()=>{class de extends $t{constructor(oe){super(oe)}supports(oe){return!0}addEventListener(oe,Be,Ct){return oe.addEventListener(Be,Ct,!1),()=>this.removeEventListener(oe,Be,Ct)}removeEventListener(oe,Be,Ct){return oe.removeEventListener(Be,Ct)}}return de.\u0275fac=function(oe){return new(oe||de)(Y.LFG(w.K0))},de.\u0275prov=Y.Yz7({token:de,factory:de.\u0275fac}),de})();const tt=["alt","control","meta","shift"],gt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},et={alt:de=>de.altKey,control:de=>de.ctrlKey,meta:de=>de.metaKey,shift:de=>de.shiftKey};let zt=(()=>{class de extends $t{constructor(oe){super(oe)}supports(oe){return null!=de.parseEventName(oe)}addEventListener(oe,Be,Ct){const sn=de.parseEventName(Be),xn=de.eventCallback(sn.fullKey,Ct,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(oe,sn.domEventName,xn))}static parseEventName(oe){const Be=oe.toLowerCase().split("."),Ct=Be.shift();if(0===Be.length||"keydown"!==Ct&&"keyup"!==Ct)return null;const sn=de._normalizeKey(Be.pop());let xn="",He=Be.indexOf("code");if(He>-1&&(Be.splice(He,1),xn="code."),tt.forEach(St=>{const Pt=Be.indexOf(St);Pt>-1&&(Be.splice(Pt,1),xn+=St+".")}),xn+=sn,0!=Be.length||0===sn.length)return null;const je={};return je.domEventName=Ct,je.fullKey=xn,je}static matchEventFullKeyCode(oe,Be){let Ct=gt[oe.key]||oe.key,sn="";return Be.indexOf("code.")>-1&&(Ct=oe.code,sn="code."),!(null==Ct||!Ct)&&(Ct=Ct.toLowerCase()," "===Ct?Ct="space":"."===Ct&&(Ct="dot"),tt.forEach(xn=>{xn!==Ct&&(0,et[xn])(oe)&&(sn+=xn+".")}),sn+=Ct,sn===Be)}static eventCallback(oe,Be,Ct){return sn=>{de.matchEventFullKeyCode(sn,oe)&&Ct.runGuarded(()=>Be(sn))}}static _normalizeKey(oe){return"esc"===oe?"escape":oe}}return de.\u0275fac=function(oe){return new(oe||de)(Y.LFG(w.K0))},de.\u0275prov=Y.Yz7({token:de,factory:de.\u0275fac}),de})();const kr=(0,Y.eFA)(Y._c5,"browser",[{provide:Y.Lbi,useValue:w.bD},{provide:Y.g9A,useValue:function Hn(){Re.makeCurrent()},multi:!0},{provide:w.K0,useFactory:function Jt(){return(0,Y.RDi)(document),document},deps:[]}]),Fn=new Y.OlP(""),Ut=[{provide:Y.rWj,useClass:class Se{addToWindow(ue){Y.dqk.getAngularTestability=(Be,Ct=!0)=>{const sn=ue.findTestabilityInTree(Be,Ct);if(null==sn)throw new Error("Could not find testability for element.");return sn},Y.dqk.getAllAngularTestabilities=()=>ue.getAllTestabilities(),Y.dqk.getAllAngularRootElements=()=>ue.getAllRootElements(),Y.dqk.frameworkStabilizers||(Y.dqk.frameworkStabilizers=[]),Y.dqk.frameworkStabilizers.push(Be=>{const Ct=Y.dqk.getAllAngularTestabilities();let sn=Ct.length,xn=!1;const He=function(je){xn=xn||je,sn--,0==sn&&Be(xn)};Ct.forEach(function(je){je.whenStable(He)})})}findTestabilityInTree(ue,oe,Be){return null==oe?null:ue.getTestability(oe)??(Be?(0,w.q)().isShadowRoot(oe)?this.findTestabilityInTree(ue,oe.host,!0):this.findTestabilityInTree(ue,oe.parentElement,!0):null)}},deps:[]},{provide:Y.lri,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]},{provide:Y.dDg,useClass:Y.dDg,deps:[Y.R0b,Y.eoX,Y.rWj]}],wr=[{provide:Y.zSh,useValue:"root"},{provide:Y.qLn,useFactory:function Xn(){return new Y.qLn},deps:[]},{provide:vt,useClass:Ke,multi:!0,deps:[w.K0,Y.R0b,Y.Lbi]},{provide:vt,useClass:zt,multi:!0,deps:[w.K0]},{provide:Ht,useClass:Ht,deps:[ct,dt,Y.AFp]},{provide:Y.FYo,useExisting:Ht},{provide:pt,useExisting:dt},{provide:dt,useClass:dt,deps:[w.K0]},{provide:ct,useClass:ct,deps:[vt,Y.R0b]},{provide:w.JF,useClass:Rt,deps:[]},[]];let An=(()=>{class de{constructor(oe){}static withServerTransition(oe){return{ngModule:de,providers:[{provide:Y.AFp,useValue:oe.appId},{provide:Ye,useExisting:Y.AFp},pe]}}}return de.\u0275fac=function(oe){return new(oe||de)(Y.LFG(Fn,12))},de.\u0275mod=Y.oAB({type:de}),de.\u0275inj=Y.cJS({providers:[...wr,...Ut],imports:[w.ez,Y.hGG]}),de})(),Qe=(()=>{class de{constructor(oe){this._doc=oe}getTitle(){return this._doc.title}setTitle(oe){this._doc.title=oe||""}}return de.\u0275fac=function(oe){return new(oe||de)(Y.LFG(w.K0))},de.\u0275prov=Y.Yz7({token:de,factory:function(oe){let Be=null;return Be=oe?new oe:function wi(){return new Qe((0,Y.LFG)(w.K0))}(),Be},providedIn:"root"}),de})();function $r(de){return de}typeof window<"u"&&window;let br=(()=>{class de{constructor(){this.store={},this.onSerializeCallbacks={}}get(oe,Be){return void 0!==this.store[oe]?this.store[oe]:Be}set(oe,Be){this.store[oe]=Be}remove(oe){delete this.store[oe]}hasKey(oe){return this.store.hasOwnProperty(oe)}get isEmpty(){return 0===Object.keys(this.store).length}onSerialize(oe,Be){this.onSerializeCallbacks[oe]=Be}toJson(){for(const oe in this.onSerializeCallbacks)if(this.onSerializeCallbacks.hasOwnProperty(oe))try{this.store[oe]=this.onSerializeCallbacks[oe]()}catch(Be){console.warn("Exception in onSerialize callback: ",Be)}return JSON.stringify(this.store)}}return de.\u0275fac=function(oe){return new(oe||de)},de.\u0275prov=Y.Yz7({token:de,factory:function(){return(()=>{const ue=(0,Y.f3M)(w.K0),oe=(0,Y.f3M)(Y.AFp),Be=new de;return Be.store=function qn(de,ue){const oe=de.getElementById(ue+"-state");let Be={};if(oe&&oe.textContent)try{Be=JSON.parse(function Xt(de){const ue={"&a;":"&","&q;":'"',"&s;":"'","&l;":"<","&g;":">"};return de.replace(/&[^;]+;/g,oe=>ue[oe])}(oe.textContent))}catch(Ct){console.warn("Exception while restoring TransferState for app "+ue,Ct)}return Be}(ue,oe),Be})()},providedIn:"root"}),de})()},7001:(rn,ot,z)=>{z.d(ot,{gz:()=>ai,F0:()=>Ot,rH:()=>nn,Od:()=>Tt,yS:()=>at,Bz:()=>jl,lC:()=>Ws});var w=z(4650),Y=z(8996),X=z(9646),Re=z(7579);class Ce extends Re.x{constructor(I){super(),this._value=I}get value(){return this.getValue()}_subscribe(I){const b=super._subscribe(I);return!b.closed&&I.next(this._value),b}getValue(){const{hasError:I,thrownError:b,_value:P}=this;if(I)throw b;return this._throwIfClosed(),P}next(I){super.next(this._value=I)}}var Ne=z(6805),Ve=z(9751),Ge=z(4742),Ye=z(4671),ye=z(3268),pe=z(7669),Se=z(1810),Rt=z(5403),vt=z(9672);function ct(...A){const I=(0,pe.yG)(A),b=(0,pe.jO)(A),{args:P,keys:B}=(0,Ge.D)(A);if(0===P.length)return(0,Y.D)([],I);const ee=new Ve.y(function $t(A,I,b=Ye.y){return P=>{pt(I,()=>{const{length:B}=A,ee=new Array(B);let ce=B,ve=B;for(let ut=0;ut<B;ut++)pt(I,()=>{const qt=(0,Y.D)(A[ut],I);let Kn=!1;qt.subscribe((0,Rt.x)(P,ln=>{ee[ut]=ln,Kn||(Kn=!0,ve--),ve||P.next(b(ee.slice()))},()=>{--ce||P.complete()}))},P)},P)}}(P,I,B?ce=>(0,Se.n)(B,ce):Ye.y));return b?ee.pipe((0,ye.Z)(b)):ee}function pt(A,I,b){A?(0,vt.f)(b,A,I):I()}var dt=z(7272),Ue=z(8421);function an(A){return new Ve.y(I=>{(0,Ue.Xf)(A()).subscribe(I)})}var it=z(9635),De=z(576);function Fe(A,I){const b=(0,De.m)(A)?A:()=>A,P=B=>B.error(b());return new Ve.y(I?B=>I.schedule(P,0,B):P)}var At=z(515),Et=z(727),We=z(4482);function Oe(){return(0,We.e)((A,I)=>{let b=null;A._refCount++;const P=(0,Rt.x)(I,void 0,void 0,void 0,()=>{if(!A||A._refCount<=0||0<--A._refCount)return void(b=null);const B=A._connection,ee=b;b=null,B&&(!ee||B===ee)&&B.unsubscribe(),I.unsubscribe()});A.subscribe(P),P.closed||(b=A.connect())})}class Mt extends Ve.y{constructor(I,b){super(),this.source=I,this.subjectFactory=b,this._subject=null,this._refCount=0,this._connection=null,(0,We.A)(I)&&(this.lift=I.lift)}_subscribe(I){return this.getSubject().subscribe(I)}getSubject(){const I=this._subject;return(!I||I.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:I}=this;this._subject=this._connection=null,I?.unsubscribe()}connect(){let I=this._connection;if(!I){I=this._connection=new Et.w0;const b=this.getSubject();I.add(this.source.subscribe((0,Rt.x)(b,void 0,()=>{this._teardown(),b.complete()},P=>{this._teardown(),b.error(P)},()=>this._teardown()))),I.closed&&(this._connection=null,I=Et.w0.EMPTY)}return I}refCount(){return Oe()(this)}}var Dt=z(6895),Kt=z(4004),Ht=z(3900),Dr=z(5698),si=z(8675),kn=z(9300),se=z(5577),Ae=z(590),Me=z(4351),Ke=z(8505);function tt(A){return(0,We.e)((I,b)=>{let ee,P=null,B=!1;P=I.subscribe((0,Rt.x)(b,void 0,void 0,ce=>{ee=(0,Ue.Xf)(A(ce,tt(A)(I))),P?(P.unsubscribe(),P=null,ee.subscribe(b)):B=!0})),B&&(P.unsubscribe(),P=null,ee.subscribe(b))})}var gt=z(5026);function et(A){return A<=0?()=>At.E:(0,We.e)((I,b)=>{let P=[];I.subscribe((0,Rt.x)(b,B=>{P.push(B),A<P.length&&P.shift()},()=>{for(const B of P)b.next(B);b.complete()},void 0,()=>{P=null}))})}var zt=z(8068),dn=z(6590);function En(A,I){const b=arguments.length>=2;return P=>P.pipe(A?(0,kn.h)((B,ee)=>A(B,ee,P)):Ye.y,et(1),b?(0,dn.d)(I):(0,zt.T)(()=>new Ne.K))}function fr(A){return(0,We.e)((I,b)=>{try{I.subscribe(b)}finally{b.add(A)}})}var Hn=z(8189),Xn=z(1481);const Jt="primary",cr=Symbol("RouteTitle");class kr{constructor(I){this.params=I||{}}has(I){return Object.prototype.hasOwnProperty.call(this.params,I)}get(I){if(this.has(I)){const b=this.params[I];return Array.isArray(b)?b[0]:b}return null}getAll(I){if(this.has(I)){const b=this.params[I];return Array.isArray(b)?b:[b]}return[]}get keys(){return Object.keys(this.params)}}function Fn(A){return new kr(A)}function Ut(A,I,b){const P=b.path.split("/");if(P.length>A.length||"full"===b.pathMatch&&(I.hasChildren()||P.length<A.length))return null;const B={};for(let ee=0;ee<P.length;ee++){const ce=P[ee],ve=A[ee];if(ce.startsWith(":"))B[ce.substring(1)]=ve;else if(ce!==ve.path)return null}return{consumed:A.slice(0,P.length),posParams:B}}function An(A,I){const b=A?Object.keys(A):void 0,P=I?Object.keys(I):void 0;if(!b||!P||b.length!=P.length)return!1;let B;for(let ee=0;ee<b.length;ee++)if(B=b[ee],!er(A[B],I[B]))return!1;return!0}function er(A,I){if(Array.isArray(A)&&Array.isArray(I)){if(A.length!==I.length)return!1;const b=[...A].sort(),P=[...I].sort();return b.every((B,ee)=>P[ee]===B)}return A===I}function us(A){return Array.prototype.concat.apply([],A)}function xi(A){return A.length>0?A[A.length-1]:null}function Qe(A,I){for(const b in A)A.hasOwnProperty(b)&&I(A[b],b)}function ge(A){return(0,w.CqO)(A)?A:(0,w.QGY)(A)?(0,Y.D)(Promise.resolve(A)):(0,X.of)(A)}const mt={exact:function jt(A,I,b){if(!qn(A.segments,I.segments)||!Vn(A.segments,I.segments,b)||A.numberOfChildren!==I.numberOfChildren)return!1;for(const P in I.children)if(!A.children[P]||!jt(A.children[P],I.children[P],b))return!1;return!0},subset:Qn},cn={exact:function wn(A,I){return An(A,I)},subset:function lr(A,I){return Object.keys(I).length<=Object.keys(A).length&&Object.keys(I).every(b=>er(A[b],I[b]))},ignored:()=>!0};function Rn(A,I,b){return mt[b.paths](A.root,I.root,b.matrixParams)&&cn[b.queryParams](A.queryParams,I.queryParams)&&!("exact"===b.fragment&&A.fragment!==I.fragment)}function Qn(A,I,b){return Oi(A,I,I.segments,b)}function Oi(A,I,b,P){if(A.segments.length>b.length){const B=A.segments.slice(0,b.length);return!(!qn(B,b)||I.hasChildren()||!Vn(B,b,P))}if(A.segments.length===b.length){if(!qn(A.segments,b)||!Vn(A.segments,b,P))return!1;for(const B in I.children)if(!A.children[B]||!Qn(A.children[B],I.children[B],P))return!1;return!0}{const B=b.slice(0,A.segments.length),ee=b.slice(A.segments.length);return!!(qn(A.segments,B)&&Vn(A.segments,B,P)&&A.children[Jt])&&Oi(A.children[Jt],I,ee,P)}}function Vn(A,I,b){return I.every((P,B)=>cn[b](A[B].parameters,P.parameters))}class Un{constructor(I,b,P){this.root=I,this.queryParams=b,this.fragment=P}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fn(this.queryParams)),this._queryParamMap}toString(){return ti.serialize(this)}}class Xt{constructor(I,b){this.segments=I,this.children=b,this.parent=null,Qe(b,(P,B)=>P.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return _e(this)}}class $r{constructor(I,b){this.path=I,this.parameters=b}get parameterMap(){return this._parameterMap||(this._parameterMap=Fn(this.parameters)),this._parameterMap}toString(){return mr(this)}}function qn(A,I){return A.length===I.length&&A.every((b,P)=>b.path===I[P].path)}let jr=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=w.Yz7({token:A,factory:function(){return new Jr},providedIn:"root"}),A})();class Jr{parse(I){const b=new je(I);return new Un(b.parseRootSegment(),b.parseQueryParams(),b.parseFragment())}serialize(I){const b=`/${fe(I.root,!0)}`,P=function ue(A){const I=Object.keys(A).map(b=>{const P=A[b];return Array.isArray(P)?P.map(B=>`${rt(b)}=${rt(B)}`).join("&"):`${rt(b)}=${rt(P)}`}).filter(b=>!!b);return I.length?`?${I.join("&")}`:""}(I.queryParams);return`${b}${P}${"string"==typeof I.fragment?`#${function $e(A){return encodeURI(A)}(I.fragment)}`:""}`}}const ti=new Jr;function _e(A){return A.segments.map(I=>mr(I)).join("/")}function fe(A,I){if(!A.hasChildren())return _e(A);if(I){const b=A.children[Jt]?fe(A.children[Jt],!1):"",P=[];return Qe(A.children,(B,ee)=>{ee!==Jt&&P.push(`${ee}:${fe(B,!1)}`)}),P.length>0?`${b}(${P.join("//")})`:b}{const b=function li(A,I){let b=[];return Qe(A.children,(P,B)=>{B===Jt&&(b=b.concat(I(P,B)))}),Qe(A.children,(P,B)=>{B!==Jt&&(b=b.concat(I(P,B)))}),b}(A,(P,B)=>B===Jt?[fe(A.children[Jt],!1)]:[`${B}:${fe(P,!1)}`]);return 1===Object.keys(A.children).length&&null!=A.children[Jt]?`${_e(A)}/${b[0]}`:`${_e(A)}/(${b.join("//")})`}}function ke(A){return encodeURIComponent(A).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function rt(A){return ke(A).replace(/%3B/gi,";")}function Gt(A){return ke(A).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function vn(A){return decodeURIComponent(A)}function Ln(A){return vn(A.replace(/\+/g,"%20"))}function mr(A){return`${Gt(A.path)}${function de(A){return Object.keys(A).map(I=>`;${Gt(I)}=${Gt(A[I])}`).join("")}(A.parameters)}`}const oe=/^[^\/()?;=#]+/;function Be(A){const I=A.match(oe);return I?I[0]:""}const Ct=/^[^=?&#]+/,xn=/^[^&#]+/;class je{constructor(I){this.url=I,this.remaining=I}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Xt([],{}):new Xt([],this.parseChildren())}parseQueryParams(){const I={};if(this.consumeOptional("?"))do{this.parseQueryParam(I)}while(this.consumeOptional("&"));return I}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const I=[];for(this.peekStartsWith("(")||I.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),I.push(this.parseSegment());let b={};this.peekStartsWith("/(")&&(this.capture("/"),b=this.parseParens(!0));let P={};return this.peekStartsWith("(")&&(P=this.parseParens(!1)),(I.length>0||Object.keys(b).length>0)&&(P[Jt]=new Xt(I,b)),P}parseSegment(){const I=Be(this.remaining);if(""===I&&this.peekStartsWith(";"))throw new w.vHH(4009,!1);return this.capture(I),new $r(vn(I),this.parseMatrixParams())}parseMatrixParams(){const I={};for(;this.consumeOptional(";");)this.parseParam(I);return I}parseParam(I){const b=Be(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const B=Be(this.remaining);B&&(P=B,this.capture(P))}I[vn(b)]=vn(P)}parseQueryParam(I){const b=function sn(A){const I=A.match(Ct);return I?I[0]:""}(this.remaining);if(!b)return;this.capture(b);let P="";if(this.consumeOptional("=")){const ce=function He(A){const I=A.match(xn);return I?I[0]:""}(this.remaining);ce&&(P=ce,this.capture(P))}const B=Ln(b),ee=Ln(P);if(I.hasOwnProperty(B)){let ce=I[B];Array.isArray(ce)||(ce=[ce],I[B]=ce),ce.push(ee)}else I[B]=ee}parseParens(I){const b={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const P=Be(this.remaining),B=this.remaining[P.length];if("/"!==B&&")"!==B&&";"!==B)throw new w.vHH(4010,!1);let ee;P.indexOf(":")>-1?(ee=P.slice(0,P.indexOf(":")),this.capture(ee),this.capture(":")):I&&(ee=Jt);const ce=this.parseChildren();b[ee]=1===Object.keys(ce).length?ce[Jt]:new Xt([],ce),this.consumeOptional("//")}return b}peekStartsWith(I){return this.remaining.startsWith(I)}consumeOptional(I){return!!this.peekStartsWith(I)&&(this.remaining=this.remaining.substring(I.length),!0)}capture(I){if(!this.consumeOptional(I))throw new w.vHH(4011,!1)}}function St(A){return A.segments.length>0?new Xt([],{[Jt]:A}):A}function Pt(A){const I={};for(const P of Object.keys(A.children)){const ee=Pt(A.children[P]);(ee.segments.length>0||ee.hasChildren())&&(I[P]=ee)}return function In(A){if(1===A.numberOfChildren&&A.children[Jt]){const I=A.children[Jt];return new Xt(A.segments.concat(I.segments),I.children)}return A}(new Xt(A.segments,I))}function bn(A){return A instanceof Un}function ji(A,I,b,P,B){if(0===b.length)return po(I.root,I.root,I.root,P,B);const ee=function go(A){if("string"==typeof A[0]&&1===A.length&&"/"===A[0])return new _s(!0,0,A);let I=0,b=!1;const P=A.reduce((B,ee,ce)=>{if("object"==typeof ee&&null!=ee){if(ee.outlets){const ve={};return Qe(ee.outlets,(ut,qt)=>{ve[qt]="string"==typeof ut?ut.split("/"):ut}),[...B,{outlets:ve}]}if(ee.segmentPath)return[...B,ee.segmentPath]}return"string"!=typeof ee?[...B,ee]:0===ce?(ee.split("/").forEach((ve,ut)=>{0==ut&&"."===ve||(0==ut&&""===ve?b=!0:".."===ve?I++:""!=ve&&B.push(ve))}),B):[...B,ee]},[]);return new _s(b,I,P)}(b);return ee.toRoot()?po(I.root,I.root,new Xt([],{}),P,B):function ce(ut){const qt=function Gr(A,I,b,P){if(A.isAbsolute)return new vs(I.root,!0,0);if(-1===P)return new vs(b,b===I.root,0);return function to(A,I,b){let P=A,B=I,ee=b;for(;ee>B;){if(ee-=B,P=P.parent,!P)throw new w.vHH(4005,!1);B=P.segments.length}return new vs(P,!1,B-ee)}(b,P+(ki(A.commands[0])?0:1),A.numberOfDoubleDots)}(ee,I,A.snapshot?._urlSegment,ut),Kn=qt.processChildren?Fs(qt.segmentGroup,qt.index,ee.commands):gi(qt.segmentGroup,qt.index,ee.commands);return po(I.root,qt.segmentGroup,Kn,P,B)}(A.snapshot?._lastPathIndex)}function ki(A){return"object"==typeof A&&null!=A&&!A.outlets&&!A.segmentPath}function eo(A){return"object"==typeof A&&null!=A&&A.outlets}function po(A,I,b,P,B){let ce,ee={};P&&Qe(P,(ut,qt)=>{ee[qt]=Array.isArray(ut)?ut.map(Kn=>`${Kn}`):`${ut}`}),ce=A===I?b:xr(A,I,b);const ve=St(Pt(ce));return new Un(ve,ee,B)}function xr(A,I,b){const P={};return Qe(A.children,(B,ee)=>{P[ee]=B===I?b:xr(B,I,b)}),new Xt(A.segments,P)}class _s{constructor(I,b,P){if(this.isAbsolute=I,this.numberOfDoubleDots=b,this.commands=P,I&&P.length>0&&ki(P[0]))throw new w.vHH(4003,!1);const B=P.find(eo);if(B&&B!==xi(P))throw new w.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class vs{constructor(I,b,P){this.segmentGroup=I,this.processChildren=b,this.index=P}}function gi(A,I,b){if(A||(A=new Xt([],{})),0===A.segments.length&&A.hasChildren())return Fs(A,I,b);const P=function Xr(A,I,b){let P=0,B=I;const ee={match:!1,pathIndex:0,commandIndex:0};for(;B<A.segments.length;){if(P>=b.length)return ee;const ce=A.segments[B],ve=b[P];if(eo(ve))break;const ut=`${ve}`,qt=P<b.length-1?b[P+1]:null;if(B>0&&void 0===ut)break;if(ut&&qt&&"object"==typeof qt&&void 0===qt.outlets){if(!Es(ut,qt,ce))return ee;P+=2}else{if(!Es(ut,{},ce))return ee;P++}B++}return{match:!0,pathIndex:B,commandIndex:P}}(A,I,b),B=b.slice(P.commandIndex);if(P.match&&P.pathIndex<A.segments.length){const ee=new Xt(A.segments.slice(0,P.pathIndex),{});return ee.children[Jt]=new Xt(A.segments.slice(P.pathIndex),A.children),Fs(ee,0,B)}return P.match&&0===B.length?new Xt(A.segments,{}):P.match&&!A.hasChildren()?ui(A,I,b):P.match?Fs(A,0,B):ui(A,I,b)}function Fs(A,I,b){if(0===b.length)return new Xt(A.segments,{});{const P=function Fi(A){return eo(A[0])?A[0].outlets:{[Jt]:A}}(b),B={};return Qe(P,(ee,ce)=>{"string"==typeof ee&&(ee=[ee]),null!==ee&&(B[ce]=gi(A.children[ce],I,ee))}),Qe(A.children,(ee,ce)=>{void 0===P[ce]&&(B[ce]=ee)}),new Xt(A.segments,B)}}function ui(A,I,b){const P=A.segments.slice(0,I);let B=0;for(;B<b.length;){const ee=b[B];if(eo(ee)){const ut=Qi(ee.outlets);return new Xt(P,ut)}if(0===B&&ki(b[0])){P.push(new $r(A.segments[I].path,xs(b[0]))),B++;continue}const ce=eo(ee)?ee.outlets[Jt]:`${ee}`,ve=B<b.length-1?b[B+1]:null;ce&&ve&&ki(ve)?(P.push(new $r(ce,xs(ve))),B+=2):(P.push(new $r(ce,{})),B++)}return new Xt(P,{})}function Qi(A){const I={};return Qe(A,(b,P)=>{"string"==typeof b&&(b=[b]),null!==b&&(I[P]=ui(new Xt([],{}),0,b))}),I}function xs(A){const I={};return Qe(A,(b,P)=>I[P]=`${b}`),I}function Es(A,I,b){return A==b.path&&An(I,b.parameters)}class Ai{constructor(I,b){this.id=I,this.url=b}}class ci extends Ai{constructor(I,b,P="imperative",B=null){super(I,b),this.type=0,this.navigationTrigger=P,this.restoredState=B}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ro extends Ai{constructor(I,b,P){super(I,b),this.urlAfterRedirects=P,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Ls extends Ai{constructor(I,b,P,B){super(I,b),this.reason=P,this.code=B,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Mo extends Ai{constructor(I,b,P,B){super(I,b),this.error=P,this.target=B,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class ru extends Ai{constructor(I,b,P,B){super(I,b),this.urlAfterRedirects=P,this.state=B,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Yr extends Ai{constructor(I,b,P,B){super(I,b),this.urlAfterRedirects=P,this.state=B,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class za extends Ai{constructor(I,b,P,B,ee){super(I,b),this.urlAfterRedirects=P,this.state=B,this.shouldActivate=ee,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Sa extends Ai{constructor(I,b,P,B){super(I,b),this.urlAfterRedirects=P,this.state=B,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xo extends Ai{constructor(I,b,P,B){super(I,b),this.urlAfterRedirects=P,this.state=B,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Le{constructor(I){this.route=I,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class xe{constructor(I){this.route=I,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Je{constructor(I){this.snapshot=I,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class wt{constructor(I){this.snapshot=I,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ft{constructor(I){this.snapshot=I,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class On{constructor(I){this.snapshot=I,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ir{constructor(I,b,P){this.routerEvent=I,this.position=b,this.anchor=P,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Sr{constructor(I){this._root=I}get root(){return this._root.value}parent(I){const b=this.pathFromRoot(I);return b.length>1?b[b.length-2]:null}children(I){const b=nr(I,this._root);return b?b.children.map(P=>P.value):[]}firstChild(I){const b=nr(I,this._root);return b&&b.children.length>0?b.children[0].value:null}siblings(I){const b=dr(I,this._root);return b.length<2?[]:b[b.length-2].children.map(B=>B.value).filter(B=>B!==I)}pathFromRoot(I){return dr(I,this._root).map(b=>b.value)}}function nr(A,I){if(A===I.value)return I;for(const b of I.children){const P=nr(A,b);if(P)return P}return null}function dr(A,I){if(A===I.value)return[I];for(const b of I.children){const P=dr(A,b);if(P.length)return P.unshift(I),P}return[]}class Cn{constructor(I,b){this.value=I,this.children=b}toString(){return`TreeNode(${this.value})`}}function cs(A){const I={};return A&&A.children.forEach(b=>I[b.value.outlet]=b),I}class pr extends Sr{constructor(I,b){super(I),this.snapshot=b,xl(this,I)}toString(){return this.snapshot.toString()}}function ds(A,I){const b=function Wa(A,I){const ce=new Gn([],{},{},"",{},Jt,I,null,A.root,-1,{});return new Li("",new Cn(ce,[]))}(A,I),P=new Ce([new $r("",{})]),B=new Ce({}),ee=new Ce({}),ce=new Ce({}),ve=new Ce(""),ut=new ai(P,B,ce,ve,ee,Jt,I,b.root);return ut.snapshot=b.root,new pr(new Cn(ut,[]),b)}class ai{constructor(I,b,P,B,ee,ce,ve,ut){this.url=I,this.params=b,this.queryParams=P,this.fragment=B,this.data=ee,this.outlet=ce,this.component=ve,this.title=this.data?.pipe((0,Kt.U)(qt=>qt[cr]))??(0,X.of)(void 0),this._futureSnapshot=ut}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Kt.U)(I=>Fn(I)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Kt.U)(I=>Fn(I)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function mo(A,I="emptyOnly"){const b=A.pathFromRoot;let P=0;if("always"!==I)for(P=b.length-1;P>=1;){const B=b[P],ee=b[P-1];if(B.routeConfig&&""===B.routeConfig.path)P--;else{if(ee.component)break;P--}}return function Pr(A){return A.reduce((I,b)=>({params:{...I.params,...b.params},data:{...I.data,...b.data},resolve:{...b.data,...I.resolve,...b.routeConfig?.data,...b._resolvedData}}),{params:{},data:{},resolve:{}})}(b.slice(P))}class Gn{constructor(I,b,P,B,ee,ce,ve,ut,qt,Kn,ln,Er){this.url=I,this.params=b,this.queryParams=P,this.fragment=B,this.data=ee,this.outlet=ce,this.component=ve,this.title=this.data?.[cr],this.routeConfig=ut,this._urlSegment=qt,this._lastPathIndex=Kn,this._correctedLastPathIndex=Er??Kn,this._resolve=ln}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Fn(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Fn(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(P=>P.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Li extends Sr{constructor(I,b){super(b),this.url=I,xl(this,b)}toString(){return No(this._root)}}function xl(A,I){I.value._routerState=A,I.children.forEach(b=>xl(A,b))}function No(A){const I=A.children.length>0?` { ${A.children.map(No).join(", ")} } `:"";return`${A.value}${I}`}function qi(A){if(A.snapshot){const I=A.snapshot,b=A._futureSnapshot;A.snapshot=b,An(I.queryParams,b.queryParams)||A.queryParams.next(b.queryParams),I.fragment!==b.fragment&&A.fragment.next(b.fragment),An(I.params,b.params)||A.params.next(b.params),function wr(A,I){if(A.length!==I.length)return!1;for(let b=0;b<A.length;++b)if(!An(A[b],I[b]))return!1;return!0}(I.url,b.url)||A.url.next(b.url),An(I.data,b.data)||A.data.next(b.data)}else A.snapshot=A._futureSnapshot,A.data.next(A._futureSnapshot.data)}function hl(A,I){const b=An(A.params,I.params)&&function br(A,I){return qn(A,I)&&A.every((b,P)=>An(b.parameters,I[P].parameters))}(A.url,I.url);return b&&!(!A.parent!=!I.parent)&&(!A.parent||hl(A.parent,I.parent))}function Kr(A,I,b){if(b&&A.shouldReuseRoute(I.value,b.value.snapshot)){const P=b.value;P._futureSnapshot=I.value;const B=function Ka(A,I,b){return I.children.map(P=>{for(const B of b.children)if(A.shouldReuseRoute(P.value,B.value.snapshot))return Kr(A,P,B);return Kr(A,P)})}(A,I,b);return new Cn(P,B)}{if(A.shouldAttach(I.value)){const ee=A.retrieve(I.value);if(null!==ee){const ce=ee.route;return ce.value._futureSnapshot=I.value,ce.children=I.children.map(ve=>Kr(A,ve)),ce}}const P=function zs(A){return new ai(new Ce(A.url),new Ce(A.params),new Ce(A.queryParams),new Ce(A.fragment),new Ce(A.data),A.outlet,A.component,A)}(I.value),B=I.children.map(ee=>Kr(A,ee));return new Cn(P,B)}}const yo="ngNavigationCancelingError";function ni(A,I){const{redirectTo:b,navigationBehaviorOptions:P}=bn(I)?{redirectTo:I,navigationBehaviorOptions:void 0}:I,B=mi(!1,0,I);return B.url=b,B.navigationBehaviorOptions=P,B}function mi(A,I,b){const P=new Error("NavigationCancelingError: "+(A||""));return P[yo]=!0,P.cancellationCode=I,b&&(P.url=b),P}function Ji(A){return _o(A)&&bn(A.url)}function _o(A){return A&&A[yo]}class Vs{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Vi,this.attachRef=null}}let Vi=(()=>{class A{constructor(){this.contexts=new Map}onChildOutletCreated(b,P){const B=this.getOrCreateContext(b);B.outlet=P,this.contexts.set(b,B)}onChildOutletDestroyed(b){const P=this.getContext(b);P&&(P.outlet=null,P.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let P=this.getContext(b);return P||(P=new Vs,this.contexts.set(b,P)),P}getContext(b){return this.contexts.get(b)||null}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Us=!1;let Ws=(()=>{class A{constructor(b,P,B,ee,ce){this.parentContexts=b,this.location=P,this.changeDetector=ee,this.environmentInjector=ce,this.activated=null,this._activatedRoute=null,this.activateEvents=new w.vpe,this.deactivateEvents=new w.vpe,this.attachEvents=new w.vpe,this.detachEvents=new w.vpe,this.name=B||Jt,b.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.getContext(this.name)?.outlet===this&&this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const b=this.parentContexts.getContext(this.name);b&&b.route&&(b.attachRef?this.attach(b.attachRef,b.route):this.activateWith(b.route,b.injector))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new w.vHH(4012,Us);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new w.vHH(4012,Us);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new w.vHH(4012,Us);this.location.detach();const b=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(b.instance),b}attach(b,P){this.activated=b,this._activatedRoute=P,this.location.insert(b.hostView),this.attachEvents.emit(b.instance)}deactivate(){if(this.activated){const b=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(b)}}activateWith(b,P){if(this.isActivated)throw new w.vHH(4013,Us);this._activatedRoute=b;const B=this.location,ce=b._futureSnapshot.component,ve=this.parentContexts.getOrCreateContext(this.name).children,ut=new Jn(b,ve,B.injector);if(P&&function yi(A){return!!A.resolveComponentFactory}(P)){const qt=P.resolveComponentFactory(ce);this.activated=B.createComponent(qt,B.length,ut)}else this.activated=B.createComponent(ce,{index:B.length,injector:ut,environmentInjector:P??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return A.\u0275fac=function(b){return new(b||A)(w.Y36(Vi),w.Y36(w.s_b),w.$8M("name"),w.Y36(w.sBO),w.Y36(w.lqb))},A.\u0275dir=w.lG2({type:A,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0}),A})();class Jn{constructor(I,b,P){this.route=I,this.childContexts=b,this.parent=P}get(I,b){return I===ai?this.route:I===Vi?this.childContexts:this.parent.get(I,b)}}let vo=(()=>{class A{}return A.\u0275fac=function(b){return new(b||A)},A.\u0275cmp=w.Xpm({type:A,selectors:[["ng-component"]],standalone:!0,features:[w.jDz],decls:1,vars:0,template:function(b,P){1&b&&w._UZ(0,"router-outlet")},dependencies:[Ws],encapsulation:2}),A})();function hs(A,I){return A.providers&&!A._injector&&(A._injector=(0,w.MMx)(A.providers,I,`Route: ${A.path}`)),A._injector??I}function Ra(A){const I=A.children&&A.children.map(Ra),b=I?{...A,children:I}:{...A};return!b.component&&!b.loadComponent&&(I||b.loadChildren)&&b.outlet&&b.outlet!==Jt&&(b.component=vo),b}function ws(A){return A.outlet||Jt}function ua(A,I){const b=A.filter(P=>ws(P)===I);return b.push(...A.filter(P=>ws(P)!==I)),b}function Xi(A){if(!A)return null;if(A.routeConfig?._injector)return A.routeConfig._injector;for(let I=A.parent;I;I=I.parent){const b=I.routeConfig;if(b?._loadedInjector)return b._loadedInjector;if(b?._injector)return b._injector}return null}class xt{constructor(I,b,P,B){this.routeReuseStrategy=I,this.futureState=b,this.currState=P,this.forwardEvent=B}activate(I){const b=this.futureState._root,P=this.currState?this.currState._root:null;this.deactivateChildRoutes(b,P,I),qi(this.futureState.root),this.activateChildRoutes(b,P,I)}deactivateChildRoutes(I,b,P){const B=cs(b);I.children.forEach(ee=>{const ce=ee.value.outlet;this.deactivateRoutes(ee,B[ce],P),delete B[ce]}),Qe(B,(ee,ce)=>{this.deactivateRouteAndItsChildren(ee,P)})}deactivateRoutes(I,b,P){const B=I.value,ee=b?b.value:null;if(B===ee)if(B.component){const ce=P.getContext(B.outlet);ce&&this.deactivateChildRoutes(I,b,ce.children)}else this.deactivateChildRoutes(I,b,P);else ee&&this.deactivateRouteAndItsChildren(b,P)}deactivateRouteAndItsChildren(I,b){I.value.component&&this.routeReuseStrategy.shouldDetach(I.value.snapshot)?this.detachAndStoreRouteSubtree(I,b):this.deactivateRouteAndOutlet(I,b)}detachAndStoreRouteSubtree(I,b){const P=b.getContext(I.value.outlet),B=P&&I.value.component?P.children:b,ee=cs(I);for(const ce of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[ce],B);if(P&&P.outlet){const ce=P.outlet.detach(),ve=P.children.onOutletDeactivated();this.routeReuseStrategy.store(I.value.snapshot,{componentRef:ce,route:I,contexts:ve})}}deactivateRouteAndOutlet(I,b){const P=b.getContext(I.value.outlet),B=P&&I.value.component?P.children:b,ee=cs(I);for(const ce of Object.keys(ee))this.deactivateRouteAndItsChildren(ee[ce],B);P&&P.outlet&&(P.outlet.deactivate(),P.children.onOutletDeactivated(),P.attachRef=null,P.resolver=null,P.route=null)}activateChildRoutes(I,b,P){const B=cs(b);I.children.forEach(ee=>{this.activateRoutes(ee,B[ee.value.outlet],P),this.forwardEvent(new On(ee.value.snapshot))}),I.children.length&&this.forwardEvent(new wt(I.value.snapshot))}activateRoutes(I,b,P){const B=I.value,ee=b?b.value:null;if(qi(B),B===ee)if(B.component){const ce=P.getOrCreateContext(B.outlet);this.activateChildRoutes(I,b,ce.children)}else this.activateChildRoutes(I,b,P);else if(B.component){const ce=P.getOrCreateContext(B.outlet);if(this.routeReuseStrategy.shouldAttach(B.snapshot)){const ve=this.routeReuseStrategy.retrieve(B.snapshot);this.routeReuseStrategy.store(B.snapshot,null),ce.children.onOutletReAttached(ve.contexts),ce.attachRef=ve.componentRef,ce.route=ve.route.value,ce.outlet&&ce.outlet.attach(ve.componentRef,ve.route.value),qi(ve.route.value),this.activateChildRoutes(I,null,ce.children)}else{const ve=Xi(B.snapshot),ut=ve?.get(w._Vd)??null;ce.attachRef=null,ce.route=B,ce.resolver=ut,ce.injector=ve,ce.outlet&&ce.outlet.activateWith(B,ce.injector),this.activateChildRoutes(I,null,ce.children)}}else this.activateChildRoutes(I,null,P)}}class rr{constructor(I){this.path=I,this.route=this.path[this.path.length-1]}}class ca{constructor(I,b){this.component=I,this.route=b}}function fl(A,I,b){const P=A._root;return Ns(P,I?I._root:null,b,[P.value])}function Ar(A,I){const b=Symbol(),P=I.get(A,b);return P===b?"function"!=typeof A||(0,w.Z0I)(A)?I.get(A):A:P}function Ns(A,I,b,P,B={canDeactivateChecks:[],canActivateChecks:[]}){const ee=cs(I);return A.children.forEach(ce=>{(function es(A,I,b,P,B={canDeactivateChecks:[],canActivateChecks:[]}){const ee=A.value,ce=I?I.value:null,ve=b?b.getContext(A.value.outlet):null;if(ce&&ee.routeConfig===ce.routeConfig){const ut=function no(A,I,b){if("function"==typeof b)return b(A,I);switch(b){case"pathParamsChange":return!qn(A.url,I.url);case"pathParamsOrQueryParamsChange":return!qn(A.url,I.url)||!An(A.queryParams,I.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!hl(A,I)||!An(A.queryParams,I.queryParams);default:return!hl(A,I)}}(ce,ee,ee.routeConfig.runGuardsAndResolvers);ut?B.canActivateChecks.push(new rr(P)):(ee.data=ce.data,ee._resolvedData=ce._resolvedData),Ns(A,I,ee.component?ve?ve.children:null:b,P,B),ut&&ve&&ve.outlet&&ve.outlet.isActivated&&B.canDeactivateChecks.push(new ca(ve.outlet.component,ce))}else ce&&Oo(I,ve,B),B.canActivateChecks.push(new rr(P)),Ns(A,null,ee.component?ve?ve.children:null:b,P,B)})(ce,ee[ce.value.outlet],b,P.concat([ce.value]),B),delete ee[ce.value.outlet]}),Qe(ee,(ce,ve)=>Oo(ce,b.getContext(ve),B)),B}function Oo(A,I,b){const P=cs(A),B=A.value;Qe(P,(ee,ce)=>{Oo(ee,B.component?I?I.children.getContext(ce):null:I,b)}),b.canDeactivateChecks.push(new ca(B.component&&I&&I.outlet&&I.outlet.isActivated?I.outlet.component:null,B))}function Is(A){return"function"==typeof A}function Cs(A){return A instanceof Ne.K||"EmptyError"===A?.name}const Gi=Symbol("INITIAL_VALUE");function Ps(){return(0,Ht.w)(A=>ct(A.map(I=>I.pipe((0,Dr.q)(1),(0,si.O)(Gi)))).pipe((0,Kt.U)(I=>{for(const b of I)if(!0!==b){if(b===Gi)return Gi;if(!1===b||b instanceof Un)return b}return!0}),(0,kn.h)(I=>I!==Gi),(0,Dr.q)(1)))}function qa(A){return(0,it.z)((0,Ke.b)(I=>{if(bn(I))throw ni(0,I)}),(0,Kt.U)(I=>!0===I))}const ga={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Za(A,I,b,P,B){const ee=ma(A,I,b);return ee.matched?function pl(A,I,b,P){const B=I.canMatch;if(!B||0===B.length)return(0,X.of)(!0);const ee=B.map(ce=>{const ve=Ar(ce,A);return ge(function lt(A){return A&&Is(A.canMatch)}(ve)?ve.canMatch(I,b):A.runInContext(()=>ve(I,b)))});return(0,X.of)(ee).pipe(Ps(),qa())}(P=hs(I,P),I,b).pipe((0,Kt.U)(ce=>!0===ce?ee:{...ga})):(0,X.of)(ee)}function ma(A,I,b){if(""===I.path)return"full"===I.pathMatch&&(A.hasChildren()||b.length>0)?{...ga}:{matched:!0,consumedSegments:[],remainingSegments:b,parameters:{},positionalParamSegments:{}};const B=(I.matcher||Ut)(b,A,I);if(!B)return{...ga};const ee={};Qe(B.posParams,(ve,ut)=>{ee[ut]=ve.path});const ce=B.consumed.length>0?{...ee,...B.consumed[B.consumed.length-1].parameters}:ee;return{matched:!0,consumedSegments:B.consumed,remainingSegments:b.slice(B.consumed.length),parameters:ce,positionalParamSegments:B.posParams??{}}}function Ya(A,I,b,P,B="corrected"){if(b.length>0&&function di(A,I,b){return b.some(P=>gl(A,I,P)&&ws(P)!==Jt)}(A,b,P)){const ce=new Xt(I,function ko(A,I,b,P){const B={};B[Jt]=P,P._sourceSegment=A,P._segmentIndexShift=I.length;for(const ee of b)if(""===ee.path&&ws(ee)!==Jt){const ce=new Xt([],{});ce._sourceSegment=A,ce._segmentIndexShift=I.length,B[ws(ee)]=ce}return B}(A,I,P,new Xt(b,A.children)));return ce._sourceSegment=A,ce._segmentIndexShift=I.length,{segmentGroup:ce,slicedSegments:[]}}if(0===b.length&&function Qa(A,I,b){return b.some(P=>gl(A,I,P))}(A,b,P)){const ce=new Xt(A.segments,function Hr(A,I,b,P,B,ee){const ce={};for(const ve of P)if(gl(A,b,ve)&&!B[ws(ve)]){const ut=new Xt([],{});ut._sourceSegment=A,ut._segmentIndexShift="legacy"===ee?A.segments.length:I.length,ce[ws(ve)]=ut}return{...B,...ce}}(A,I,b,P,A.children,B));return ce._sourceSegment=A,ce._segmentIndexShift=I.length,{segmentGroup:ce,slicedSegments:b}}const ee=new Xt(A.segments,A.children);return ee._sourceSegment=A,ee._segmentIndexShift=I.length,{segmentGroup:ee,slicedSegments:b}}function gl(A,I,b){return(!(A.hasChildren()||I.length>0)||"full"!==b.pathMatch)&&""===b.path}function qo(A,I,b,P){return!!(ws(A)===P||P!==Jt&&gl(I,b,A))&&("**"===A.path||ma(I,A,b).matched)}function ya(A,I,b){return 0===I.length&&!A.children[b]}const Zo=!1;class qs{constructor(I){this.segmentGroup=I||null}}class _a{constructor(I){this.urlTree=I}}function Yo(A){return Fe(new qs(A))}function va(A){return Fe(new _a(A))}class zi{constructor(I,b,P,B,ee){this.injector=I,this.configLoader=b,this.urlSerializer=P,this.urlTree=B,this.config=ee,this.allowRedirects=!0}apply(){const I=Ya(this.urlTree.root,[],[],this.config).segmentGroup,b=new Xt(I.segments,I.children);return this.expandSegmentGroup(this.injector,this.config,b,Jt).pipe((0,Kt.U)(ee=>this.createUrlTree(Pt(ee),this.urlTree.queryParams,this.urlTree.fragment))).pipe(tt(ee=>{if(ee instanceof _a)return this.allowRedirects=!1,this.match(ee.urlTree);throw ee instanceof qs?this.noMatchError(ee):ee}))}match(I){return this.expandSegmentGroup(this.injector,this.config,I.root,Jt).pipe((0,Kt.U)(B=>this.createUrlTree(Pt(B),I.queryParams,I.fragment))).pipe(tt(B=>{throw B instanceof qs?this.noMatchError(B):B}))}noMatchError(I){return new w.vHH(4002,Zo)}createUrlTree(I,b,P){const B=St(I);return new Un(B,b,P)}expandSegmentGroup(I,b,P,B){return 0===P.segments.length&&P.hasChildren()?this.expandChildren(I,b,P).pipe((0,Kt.U)(ee=>new Xt([],ee))):this.expandSegment(I,P,b,P.segments,B,!0)}expandChildren(I,b,P){const B=[];for(const ee of Object.keys(P.children))"primary"===ee?B.unshift(ee):B.push(ee);return(0,Y.D)(B).pipe((0,Me.b)(ee=>{const ce=P.children[ee],ve=ua(b,ee);return this.expandSegmentGroup(I,ve,ce,ee).pipe((0,Kt.U)(ut=>({segment:ut,outlet:ee})))}),(0,gt.R)((ee,ce)=>(ee[ce.outlet]=ce.segment,ee),{}),En())}expandSegment(I,b,P,B,ee,ce){return(0,Y.D)(P).pipe((0,Me.b)(ve=>this.expandSegmentAgainstRoute(I,b,P,ve,B,ee,ce).pipe(tt(qt=>{if(qt instanceof qs)return(0,X.of)(null);throw qt}))),(0,Ae.P)(ve=>!!ve),tt((ve,ut)=>{if(Cs(ve))return ya(b,B,ee)?(0,X.of)(new Xt([],{})):Yo(b);throw ve}))}expandSegmentAgainstRoute(I,b,P,B,ee,ce,ve){return qo(B,b,ee,ce)?void 0===B.redirectTo?this.matchSegmentAgainstRoute(I,b,B,ee,ce):ve&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(I,b,P,B,ee,ce):Yo(b):Yo(b)}expandSegmentAgainstRouteUsingRedirect(I,b,P,B,ee,ce){return"**"===B.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(I,P,B,ce):this.expandRegularSegmentAgainstRouteUsingRedirect(I,b,P,B,ee,ce)}expandWildCardWithParamsAgainstRouteUsingRedirect(I,b,P,B){const ee=this.applyRedirectCommands([],P.redirectTo,{});return P.redirectTo.startsWith("/")?va(ee):this.lineralizeSegments(P,ee).pipe((0,se.z)(ce=>{const ve=new Xt(ce,{});return this.expandSegment(I,ve,b,ce,B,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(I,b,P,B,ee,ce){const{matched:ve,consumedSegments:ut,remainingSegments:qt,positionalParamSegments:Kn}=ma(b,B,ee);if(!ve)return Yo(b);const ln=this.applyRedirectCommands(ut,B.redirectTo,Kn);return B.redirectTo.startsWith("/")?va(ln):this.lineralizeSegments(B,ln).pipe((0,se.z)(Er=>this.expandSegment(I,b,P,Er.concat(qt),ce,!1)))}matchSegmentAgainstRoute(I,b,P,B,ee){return"**"===P.path?(I=hs(P,I),P.loadChildren?(P._loadedRoutes?(0,X.of)({routes:P._loadedRoutes,injector:P._loadedInjector}):this.configLoader.loadChildren(I,P)).pipe((0,Kt.U)(ve=>(P._loadedRoutes=ve.routes,P._loadedInjector=ve.injector,new Xt(B,{})))):(0,X.of)(new Xt(B,{}))):Za(b,P,B,I).pipe((0,Ht.w)(({matched:ce,consumedSegments:ve,remainingSegments:ut})=>ce?this.getChildConfig(I=P._injector??I,P,B).pipe((0,se.z)(Kn=>{const ln=Kn.injector??I,Er=Kn.routes,{segmentGroup:Lr,slicedSegments:Ti}=Ya(b,ve,ut,Er),ea=new Xt(Lr.segments,Lr.children);if(0===Ti.length&&ea.hasChildren())return this.expandChildren(ln,Er,ea).pipe((0,Kt.U)(_l=>new Xt(ve,_l)));if(0===Er.length&&0===Ti.length)return(0,X.of)(new Xt(ve,{}));const Lo=ws(P)===ee;return this.expandSegment(ln,ea,Er,Ti,Lo?Jt:ee,!0).pipe((0,Kt.U)(wa=>new Xt(ve.concat(wa.segments),wa.children)))})):Yo(b)))}getChildConfig(I,b,P){return b.children?(0,X.of)({routes:b.children,injector:I}):b.loadChildren?void 0!==b._loadedRoutes?(0,X.of)({routes:b._loadedRoutes,injector:b._loadedInjector}):function pa(A,I,b,P){const B=I.canLoad;if(void 0===B||0===B.length)return(0,X.of)(!0);const ee=B.map(ce=>{const ve=Ar(ce,A);return ge(function H(A){return A&&Is(A.canLoad)}(ve)?ve.canLoad(I,b):A.runInContext(()=>ve(I,b)))});return(0,X.of)(ee).pipe(Ps(),qa())}(I,b,P).pipe((0,se.z)(B=>B?this.configLoader.loadChildren(I,b).pipe((0,Ke.b)(ee=>{b._loadedRoutes=ee.routes,b._loadedInjector=ee.injector})):function Ma(A){return Fe(mi(Zo,3))}())):(0,X.of)({routes:[],injector:I})}lineralizeSegments(I,b){let P=[],B=b.root;for(;;){if(P=P.concat(B.segments),0===B.numberOfChildren)return(0,X.of)(P);if(B.numberOfChildren>1||!B.children[Jt])return Fe(new w.vHH(4e3,Zo));B=B.children[Jt]}}applyRedirectCommands(I,b,P){return this.applyRedirectCreateUrlTree(b,this.urlSerializer.parse(b),I,P)}applyRedirectCreateUrlTree(I,b,P,B){const ee=this.createSegmentGroup(I,b.root,P,B);return new Un(ee,this.createQueryParams(b.queryParams,this.urlTree.queryParams),b.fragment)}createQueryParams(I,b){const P={};return Qe(I,(B,ee)=>{if("string"==typeof B&&B.startsWith(":")){const ve=B.substring(1);P[ee]=b[ve]}else P[ee]=B}),P}createSegmentGroup(I,b,P,B){const ee=this.createSegments(I,b.segments,P,B);let ce={};return Qe(b.children,(ve,ut)=>{ce[ut]=this.createSegmentGroup(I,ve,P,B)}),new Xt(ee,ce)}createSegments(I,b,P,B){return b.map(ee=>ee.path.startsWith(":")?this.findPosParam(I,ee,B):this.findOrReturn(ee,P))}findPosParam(I,b,P){const B=P[b.path.substring(1)];if(!B)throw new w.vHH(4001,Zo);return B}findOrReturn(I,b){let P=0;for(const B of b){if(B.path===I.path)return b.splice(P),B;P++}return I}}class bu{}class Or{constructor(I,b,P,B,ee,ce,ve,ut){this.injector=I,this.rootComponentType=b,this.config=P,this.urlTree=B,this.url=ee,this.paramsInheritanceStrategy=ce,this.relativeLinkResolution=ve,this.urlSerializer=ut}recognize(){const I=Ya(this.urlTree.root,[],[],this.config.filter(b=>void 0===b.redirectTo),this.relativeLinkResolution).segmentGroup;return this.processSegmentGroup(this.injector,this.config,I,Jt).pipe((0,Kt.U)(b=>{if(null===b)return null;const P=new Gn([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Jt,this.rootComponentType,null,this.urlTree.root,-1,{}),B=new Cn(P,b),ee=new Li(this.url,B);return this.inheritParamsAndData(ee._root),ee}))}inheritParamsAndData(I){const b=I.value,P=mo(b,this.paramsInheritanceStrategy);b.params=Object.freeze(P.params),b.data=Object.freeze(P.data),I.children.forEach(B=>this.inheritParamsAndData(B))}processSegmentGroup(I,b,P,B){return 0===P.segments.length&&P.hasChildren()?this.processChildren(I,b,P):this.processSegment(I,b,P,P.segments,B)}processChildren(I,b,P){return(0,Y.D)(Object.keys(P.children)).pipe((0,Me.b)(B=>{const ee=P.children[B],ce=ua(b,B);return this.processSegmentGroup(I,ce,ee,B)}),(0,gt.R)((B,ee)=>B&&ee?(B.push(...ee),B):null),function un(A,I=!1){return(0,We.e)((b,P)=>{let B=0;b.subscribe((0,Rt.x)(P,ee=>{const ce=A(ee,B++);(ce||I)&&P.next(ee),!ce&&P.complete()}))})}(B=>null!==B),(0,dn.d)(null),En(),(0,Kt.U)(B=>{if(null===B)return null;const ee=te(B);return function N(A){A.sort((I,b)=>I.value.outlet===Jt?-1:b.value.outlet===Jt?1:I.value.outlet.localeCompare(b.value.outlet))}(ee),ee}))}processSegment(I,b,P,B,ee){return(0,Y.D)(b).pipe((0,Me.b)(ce=>this.processSegmentAgainstRoute(ce._injector??I,ce,P,B,ee)),(0,Ae.P)(ce=>!!ce),tt(ce=>{if(Cs(ce))return ya(P,B,ee)?(0,X.of)([]):(0,X.of)(null);throw ce}))}processSegmentAgainstRoute(I,b,P,B,ee){if(b.redirectTo||!qo(b,P,B,ee))return(0,X.of)(null);let ce;if("**"===b.path){const ve=B.length>0?xi(B).parameters:{},ut=bt(P)+B.length,qt=new Gn(B,ve,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tr(b),ws(b),b.component??b._loadedComponent??null,b,ft(P),ut,Yn(b),ut);ce=(0,X.of)({snapshot:qt,consumedSegments:[],remainingSegments:[]})}else ce=Za(P,b,B,I).pipe((0,Kt.U)(({matched:ve,consumedSegments:ut,remainingSegments:qt,parameters:Kn})=>{if(!ve)return null;const ln=bt(P)+ut.length;return{snapshot:new Gn(ut,Kn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,tr(b),ws(b),b.component??b._loadedComponent??null,b,ft(P),ln,Yn(b),ln),consumedSegments:ut,remainingSegments:qt}}));return ce.pipe((0,Ht.w)(ve=>{if(null===ve)return(0,X.of)(null);const{snapshot:ut,consumedSegments:qt,remainingSegments:Kn}=ve;I=b._injector??I;const ln=b._loadedInjector??I,Er=function K(A){return A.children?A.children:A.loadChildren?A._loadedRoutes:[]}(b),{segmentGroup:Lr,slicedSegments:Ti}=Ya(P,qt,Kn,Er.filter(Lo=>void 0===Lo.redirectTo),this.relativeLinkResolution);if(0===Ti.length&&Lr.hasChildren())return this.processChildren(ln,Er,Lr).pipe((0,Kt.U)(Lo=>null===Lo?null:[new Cn(ut,Lo)]));if(0===Er.length&&0===Ti.length)return(0,X.of)([new Cn(ut,[])]);const ea=ws(b)===ee;return this.processSegment(ln,Er,Lr,Ti,ea?Jt:ee).pipe((0,Kt.U)(Lo=>null===Lo?null:[new Cn(ut,Lo)]))}))}}function U(A){const I=A.value.routeConfig;return I&&""===I.path&&void 0===I.redirectTo}function te(A){const I=[],b=new Set;for(const P of A){if(!U(P)){I.push(P);continue}const B=I.find(ee=>P.value.routeConfig===ee.value.routeConfig);void 0!==B?(B.children.push(...P.children),b.add(B)):I.push(P)}for(const P of b){const B=te(P.children);I.push(new Cn(P.value,B))}return I.filter(P=>!b.has(P))}function ft(A){let I=A;for(;I._sourceSegment;)I=I._sourceSegment;return I}function bt(A){let I=A,b=I._segmentIndexShift??0;for(;I._sourceSegment;)I=I._sourceSegment,b+=I._segmentIndexShift??0;return b-1}function tr(A){return A.data||{}}function Yn(A){return A.resolve||{}}function Bi(A){return"string"==typeof A.title||null===A.title}function io(A){return(0,Ht.w)(I=>{const b=A(I);return b?(0,Y.D)(b).pipe((0,Kt.U)(()=>I)):(0,X.of)(I)})}let ts=(()=>{class A{buildTitle(b){let P,B=b.root;for(;void 0!==B;)P=this.getResolvedTitleForRoute(B)??P,B=B.children.find(ee=>ee.outlet===Jt);return P}getResolvedTitleForRoute(b){return b.data[cr]}}return A.\u0275fac=function(b){return new(b||A)},A.\u0275prov=w.Yz7({token:A,factory:function(){return(0,w.f3M)(Qo)},providedIn:"root"}),A})(),Qo=(()=>{class A extends ts{constructor(b){super(),this.title=b}updateTitle(b){const P=this.buildTitle(b);void 0!==P&&this.title.setTitle(P)}}return A.\u0275fac=function(b){return new(b||A)(w.LFG(Xn.Dx))},A.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class Nl{}class Ja extends class so{shouldDetach(I){return!1}store(I,b){}shouldAttach(I){return!1}retrieve(I){return null}shouldReuseRoute(I,b){return I.routeConfig===b.routeConfig}}{}const ml=new w.OlP("",{providedIn:"root",factory:()=>({})}),Xa=new w.OlP("ROUTES");let ou=(()=>{class A{constructor(b,P){this.injector=b,this.compiler=P,this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap}loadComponent(b){if(this.componentLoaders.get(b))return this.componentLoaders.get(b);if(b._loadedComponent)return(0,X.of)(b._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(b);const P=ge(b.loadComponent()).pipe((0,Ke.b)(ee=>{this.onLoadEndListener&&this.onLoadEndListener(b),b._loadedComponent=ee}),fr(()=>{this.componentLoaders.delete(b)})),B=new Mt(P,()=>new Re.x).pipe(Oe());return this.componentLoaders.set(b,B),B}loadChildren(b,P){if(this.childrenLoaders.get(P))return this.childrenLoaders.get(P);if(P._loadedRoutes)return(0,X.of)({routes:P._loadedRoutes,injector:P._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(P);const ee=this.loadModuleFactoryOrRoutes(P.loadChildren).pipe((0,Kt.U)(ve=>{this.onLoadEndListener&&this.onLoadEndListener(P);let ut,qt,Kn=!1;Array.isArray(ve)?qt=ve:(ut=ve.create(b).injector,qt=us(ut.get(Xa,[],w.XFs.Self|w.XFs.Optional)));return{routes:qt.map(Ra),injector:ut}}),fr(()=>{this.childrenLoaders.delete(P)})),ce=new Mt(ee,()=>new Re.x).pipe(Oe());return this.childrenLoaders.set(P,ce),ce}loadModuleFactoryOrRoutes(b){return ge(b()).pipe((0,se.z)(P=>P instanceof w.YKP||Array.isArray(P)?(0,X.of)(P):(0,Y.D)(this.compiler.compileModuleAsync(P))))}}return A.\u0275fac=function(b){return new(b||A)(w.LFG(w.zs3),w.LFG(w.Sil))},A.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();class ns{}class Tu{shouldProcessUrl(I){return!0}extract(I){return I}merge(I,b){return I}}function au(A){throw A}function Ol(A,I,b){return I.parse("/")}const Vt={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Pi={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};function Pc(){const A=(0,w.f3M)(jr),I=(0,w.f3M)(Vi),b=(0,w.f3M)(Dt.Ye),P=(0,w.f3M)(w.zs3),B=(0,w.f3M)(w.Sil),ee=(0,w.f3M)(Xa,{optional:!0})??[],ce=(0,w.f3M)(ml,{optional:!0})??{},ve=(0,w.f3M)(Qo),ut=(0,w.f3M)(ts,{optional:!0}),qt=(0,w.f3M)(ns,{optional:!0}),Kn=(0,w.f3M)(Nl,{optional:!0}),ln=new Ot(null,A,I,b,P,B,us(ee));return qt&&(ln.urlHandlingStrategy=qt),Kn&&(ln.routeReuseStrategy=Kn),ln.titleStrategy=ut??ve,function ps(A,I){A.errorHandler&&(I.errorHandler=A.errorHandler),A.malformedUriErrorHandler&&(I.malformedUriErrorHandler=A.malformedUriErrorHandler),A.onSameUrlNavigation&&(I.onSameUrlNavigation=A.onSameUrlNavigation),A.paramsInheritanceStrategy&&(I.paramsInheritanceStrategy=A.paramsInheritanceStrategy),A.relativeLinkResolution&&(I.relativeLinkResolution=A.relativeLinkResolution),A.urlUpdateStrategy&&(I.urlUpdateStrategy=A.urlUpdateStrategy),A.canceledNavigationResolution&&(I.canceledNavigationResolution=A.canceledNavigationResolution)}(ce,ln),ln}let Ot=(()=>{class A{constructor(b,P,B,ee,ce,ve,ut){this.rootComponentType=b,this.urlSerializer=P,this.rootContexts=B,this.location=ee,this.config=ut,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new Re.x,this.errorHandler=au,this.malformedUriErrorHandler=Ol,this.navigated=!1,this.lastSuccessfulId=-1,this.afterPreactivation=()=>(0,X.of)(void 0),this.urlHandlingStrategy=new Tu,this.routeReuseStrategy=new Ja,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.configLoader=ce.get(ou),this.configLoader.onLoadEndListener=Er=>this.triggerEvent(new xe(Er)),this.configLoader.onLoadStartListener=Er=>this.triggerEvent(new Le(Er)),this.ngModule=ce.get(w.h0i),this.console=ce.get(w.c2e);const ln=ce.get(w.R0b);this.isNgZoneEnabled=ln instanceof w.R0b&&w.R0b.isInAngularZone(),this.resetConfig(ut),this.currentUrlTree=function ht(){return new Un(new Xt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=ds(this.currentUrlTree,this.rootComponentType),this.transitions=new Ce({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){return this.location.getState()?.\u0275routerPageId}setupNavigations(b){const P=this.events;return b.pipe((0,kn.h)(B=>0!==B.id),(0,Kt.U)(B=>({...B,extractedUrl:this.urlHandlingStrategy.extract(B.rawUrl)})),(0,Ht.w)(B=>{let ee=!1,ce=!1;return(0,X.of)(B).pipe((0,Ke.b)(ve=>{this.currentNavigation={id:ve.id,initialUrl:ve.rawUrl,extractedUrl:ve.extractedUrl,trigger:ve.source,extras:ve.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Ht.w)(ve=>{const ut=this.browserUrlTree.toString(),qt=!this.navigated||ve.extractedUrl.toString()!==ut||ut!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||qt)&&this.urlHandlingStrategy.shouldProcessUrl(ve.rawUrl))return oc(ve.source)&&(this.browserUrlTree=ve.extractedUrl),(0,X.of)(ve).pipe((0,Ht.w)(ln=>{const Er=this.transitions.getValue();return P.next(new ci(ln.id,this.serializeUrl(ln.extractedUrl),ln.source,ln.restoredState)),Er!==this.transitions.getValue()?At.E:Promise.resolve(ln)}),function xa(A,I,b,P){return(0,Ht.w)(B=>function ro(A,I,b,P,B){return new zi(A,I,b,P,B).apply()}(A,I,b,B.extractedUrl,P).pipe((0,Kt.U)(ee=>({...B,urlAfterRedirects:ee}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,Ke.b)(ln=>{this.currentNavigation={...this.currentNavigation,finalUrl:ln.urlAfterRedirects},B.urlAfterRedirects=ln.urlAfterRedirects}),function Zn(A,I,b,P,B,ee){return(0,se.z)(ce=>function Ea(A,I,b,P,B,ee,ce="emptyOnly",ve="legacy"){return new Or(A,I,b,P,B,ce,ve,ee).recognize().pipe((0,Ht.w)(ut=>null===ut?function Ri(A){return new Ve.y(I=>I.error(A))}(new bu):(0,X.of)(ut)))}(A,I,b,ce.urlAfterRedirects,P.serialize(ce.urlAfterRedirects),P,B,ee).pipe((0,Kt.U)(ve=>({...ce,targetSnapshot:ve}))))}(this.ngModule.injector,this.rootComponentType,this.config,this.urlSerializer,this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,Ke.b)(ln=>{if(B.targetSnapshot=ln.targetSnapshot,"eager"===this.urlUpdateStrategy){if(!ln.extras.skipLocationChange){const Lr=this.urlHandlingStrategy.merge(ln.urlAfterRedirects,ln.rawUrl);this.setBrowserUrl(Lr,ln)}this.browserUrlTree=ln.urlAfterRedirects}const Er=new ru(ln.id,this.serializeUrl(ln.extractedUrl),this.serializeUrl(ln.urlAfterRedirects),ln.targetSnapshot);P.next(Er)}));if(qt&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:Er,extractedUrl:Lr,source:Ti,restoredState:ea,extras:Lo}=ve,rs=new ci(Er,this.serializeUrl(Lr),Ti,ea);P.next(rs);const wa=ds(Lr,this.rootComponentType).snapshot;return B={...ve,targetSnapshot:wa,urlAfterRedirects:Lr,extras:{...Lo,skipLocationChange:!1,replaceUrl:!1}},(0,X.of)(B)}return this.rawUrlTree=ve.rawUrl,ve.resolve(null),At.E}),(0,Ke.b)(ve=>{const ut=new Yr(ve.id,this.serializeUrl(ve.extractedUrl),this.serializeUrl(ve.urlAfterRedirects),ve.targetSnapshot);this.triggerEvent(ut)}),(0,Kt.U)(ve=>B={...ve,guards:fl(ve.targetSnapshot,ve.currentSnapshot,this.rootContexts)}),function Ds(A,I){return(0,se.z)(b=>{const{targetSnapshot:P,currentSnapshot:B,guards:{canActivateChecks:ee,canDeactivateChecks:ce}}=b;return 0===ce.length&&0===ee.length?(0,X.of)({...b,guardsResult:!0}):function Zi(A,I,b,P){return(0,Y.D)(A).pipe((0,se.z)(B=>function fa(A,I,b,P,B){const ee=I&&I.routeConfig?I.routeConfig.canDeactivate:null;if(!ee||0===ee.length)return(0,X.of)(!0);const ce=ee.map(ve=>{const ut=Xi(I)??B,qt=Ar(ve,ut);return ge(function ne(A){return A&&Is(A.canDeactivate)}(qt)?qt.canDeactivate(A,I,b,P):ut.runInContext(()=>qt(A,I,b,P))).pipe((0,Ae.P)())});return(0,X.of)(ce).pipe(Ps())}(B.component,B.route,b,I,P)),(0,Ae.P)(B=>!0!==B,!0))}(ce,P,B,A).pipe((0,se.z)(ve=>ve&&function Fr(A){return"boolean"==typeof A}(ve)?function Eo(A,I,b,P){return(0,Y.D)(I).pipe((0,Me.b)(B=>(0,dt.z)(function fs(A,I){return null!==A&&I&&I(new Je(A)),(0,X.of)(!0)}(B.route.parent,P),function su(A,I){return null!==A&&I&&I(new Ft(A)),(0,X.of)(!0)}(B.route,P),function ha(A,I,b){const P=I[I.length-1],ee=I.slice(0,I.length-1).reverse().map(ce=>function Di(A){const I=A.routeConfig?A.routeConfig.canActivateChild:null;return I&&0!==I.length?{node:A,guards:I}:null}(ce)).filter(ce=>null!==ce).map(ce=>an(()=>{const ve=ce.guards.map(ut=>{const qt=Xi(ce.node)??b,Kn=Ar(ut,qt);return ge(function L(A){return A&&Is(A.canActivateChild)}(Kn)?Kn.canActivateChild(P,A):qt.runInContext(()=>Kn(P,A))).pipe((0,Ae.P)())});return(0,X.of)(ve).pipe(Ps())}));return(0,X.of)(ee).pipe(Ps())}(A,B.path,b),function da(A,I,b){const P=I.routeConfig?I.routeConfig.canActivate:null;if(!P||0===P.length)return(0,X.of)(!0);const B=P.map(ee=>an(()=>{const ce=Xi(I)??b,ve=Ar(ee,ce);return ge(function V(A){return A&&Is(A.canActivate)}(ve)?ve.canActivate(I,A):ce.runInContext(()=>ve(I,A))).pipe((0,Ae.P)())}));return(0,X.of)(B).pipe(Ps())}(A,B.route,b))),(0,Ae.P)(B=>!0!==B,!0))}(P,ee,A,I):(0,X.of)(ve)),(0,Kt.U)(ve=>({...b,guardsResult:ve})))})}(this.ngModule.injector,ve=>this.triggerEvent(ve)),(0,Ke.b)(ve=>{if(B.guardsResult=ve.guardsResult,bn(ve.guardsResult))throw ni(0,ve.guardsResult);const ut=new za(ve.id,this.serializeUrl(ve.extractedUrl),this.serializeUrl(ve.urlAfterRedirects),ve.targetSnapshot,!!ve.guardsResult);this.triggerEvent(ut)}),(0,kn.h)(ve=>!!ve.guardsResult||(this.restoreHistory(ve),this.cancelNavigationTransition(ve,"",3),!1)),io(ve=>{if(ve.guards.canActivateChecks.length)return(0,X.of)(ve).pipe((0,Ke.b)(ut=>{const qt=new Sa(ut.id,this.serializeUrl(ut.extractedUrl),this.serializeUrl(ut.urlAfterRedirects),ut.targetSnapshot);this.triggerEvent(qt)}),(0,Ht.w)(ut=>{let qt=!1;return(0,X.of)(ut).pipe(function zn(A,I){return(0,se.z)(b=>{const{targetSnapshot:P,guards:{canActivateChecks:B}}=b;if(!B.length)return(0,X.of)(b);let ee=0;return(0,Y.D)(B).pipe((0,Me.b)(ce=>function bi(A,I,b,P){const B=A.routeConfig,ee=A._resolve;return void 0!==B?.title&&!Bi(B)&&(ee[cr]=B.title),function Nr(A,I,b,P){const B=function Wn(A){return[...Object.keys(A),...Object.getOwnPropertySymbols(A)]}(A);if(0===B.length)return(0,X.of)({});const ee={};return(0,Y.D)(B).pipe((0,se.z)(ce=>function Ni(A,I,b,P){const B=Xi(I)??P,ee=Ar(A,B);return ge(ee.resolve?ee.resolve(I,b):B.runInContext(()=>ee(I,b)))}(A[ce],I,b,P).pipe((0,Ae.P)(),(0,Ke.b)(ve=>{ee[ce]=ve}))),et(1),function Mn(A){return(0,Kt.U)(()=>A)}(ee),tt(ce=>Cs(ce)?At.E:Fe(ce)))}(ee,A,I,P).pipe((0,Kt.U)(ce=>(A._resolvedData=ce,A.data=mo(A,b).resolve,B&&Bi(B)&&(A.data[cr]=B.title),null)))}(ce.route,P,A,I)),(0,Ke.b)(()=>ee++),et(1),(0,se.z)(ce=>ee===B.length?(0,X.of)(b):At.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,Ke.b)({next:()=>qt=!0,complete:()=>{qt||(this.restoreHistory(ut),this.cancelNavigationTransition(ut,"",2))}}))}),(0,Ke.b)(ut=>{const qt=new xo(ut.id,this.serializeUrl(ut.extractedUrl),this.serializeUrl(ut.urlAfterRedirects),ut.targetSnapshot);this.triggerEvent(qt)}))}),io(ve=>{const ut=qt=>{const Kn=[];qt.routeConfig?.loadComponent&&!qt.routeConfig._loadedComponent&&Kn.push(this.configLoader.loadComponent(qt.routeConfig).pipe((0,Ke.b)(ln=>{qt.component=ln}),(0,Kt.U)(()=>{})));for(const ln of qt.children)Kn.push(...ut(ln));return Kn};return ct(ut(ve.targetSnapshot.root)).pipe((0,dn.d)(),(0,Dr.q)(1))}),io(()=>this.afterPreactivation()),(0,Kt.U)(ve=>{const ut=function Ci(A,I,b){const P=Kr(A,I._root,b?b._root:void 0);return new pr(P,I)}(this.routeReuseStrategy,ve.targetSnapshot,ve.currentRouterState);return B={...ve,targetRouterState:ut}}),(0,Ke.b)(ve=>{this.currentUrlTree=ve.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(ve.urlAfterRedirects,ve.rawUrl),this.routerState=ve.targetRouterState,"deferred"===this.urlUpdateStrategy&&(ve.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,ve),this.browserUrlTree=ve.urlAfterRedirects)}),((A,I,b)=>(0,Kt.U)(P=>(new xt(I,P.targetRouterState,P.currentRouterState,b).activate(A),P)))(this.rootContexts,this.routeReuseStrategy,ve=>this.triggerEvent(ve)),(0,Ke.b)({next(){ee=!0},complete(){ee=!0}}),fr(()=>{ee||ce||this.cancelNavigationTransition(B,"",1),this.currentNavigation?.id===B.id&&(this.currentNavigation=null)}),tt(ve=>{if(ce=!0,_o(ve)){Ji(ve)||(this.navigated=!0,this.restoreHistory(B,!0));const ut=new Ls(B.id,this.serializeUrl(B.extractedUrl),ve.message,ve.cancellationCode);if(P.next(ut),Ji(ve)){const qt=this.urlHandlingStrategy.merge(ve.url,this.rawUrlTree),Kn={skipLocationChange:B.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||oc(B.source)};this.scheduleNavigation(qt,"imperative",null,Kn,{resolve:B.resolve,reject:B.reject,promise:B.promise})}else B.resolve(!1)}else{this.restoreHistory(B,!0);const ut=new Mo(B.id,this.serializeUrl(B.extractedUrl),ve,B.targetSnapshot??void 0);P.next(ut);try{B.resolve(this.errorHandler(ve))}catch(qt){B.reject(qt)}}return At.E}))}))}resetRootComponentType(b){this.rootComponentType=b,this.routerState.root.component=this.rootComponentType}setTransition(b){this.transitions.next({...this.transitions.value,...b})}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(b=>{const P="popstate"===b.type?"popstate":"hashchange";"popstate"===P&&setTimeout(()=>{const B={replaceUrl:!0},ee=b.state?.navigationId?b.state:null;if(ee){const ve={...ee};delete ve.navigationId,delete ve.\u0275routerPageId,0!==Object.keys(ve).length&&(B.state=ve)}const ce=this.parseUrl(b.url);this.scheduleNavigation(ce,P,ee,B)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(b){this.events.next(b)}resetConfig(b){this.config=b.map(Ra),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(b,P={}){const{relativeTo:B,queryParams:ee,fragment:ce,queryParamsHandling:ve,preserveFragment:ut}=P,qt=B||this.routerState.root,Kn=ut?this.currentUrlTree.fragment:ce;let ln=null;switch(ve){case"merge":ln={...this.currentUrlTree.queryParams,...ee};break;case"preserve":ln=this.currentUrlTree.queryParams;break;default:ln=ee||null}return null!==ln&&(ln=this.removeEmptyProps(ln)),ji(qt,this.currentUrlTree,b,ln,Kn??null)}navigateByUrl(b,P={skipLocationChange:!1}){const B=bn(b)?b:this.parseUrl(b),ee=this.urlHandlingStrategy.merge(B,this.rawUrlTree);return this.scheduleNavigation(ee,"imperative",null,P)}navigate(b,P={skipLocationChange:!1}){return function Sn(A){for(let I=0;I<A.length;I++){if(null==A[I])throw new w.vHH(4008,false)}}(b),this.navigateByUrl(this.createUrlTree(b,P),P)}serializeUrl(b){return this.urlSerializer.serialize(b)}parseUrl(b){let P;try{P=this.urlSerializer.parse(b)}catch(B){P=this.malformedUriErrorHandler(B,this.urlSerializer,b)}return P}isActive(b,P){let B;if(B=!0===P?{...Vt}:!1===P?{...Pi}:P,bn(b))return Rn(this.currentUrlTree,b,B);const ee=this.parseUrl(b);return Rn(this.currentUrlTree,ee,B)}removeEmptyProps(b){return Object.keys(b).reduce((P,B)=>{const ee=b[B];return null!=ee&&(P[B]=ee),P},{})}processNavigations(){this.navigations.subscribe(b=>{this.navigated=!0,this.lastSuccessfulId=b.id,this.currentPageId=b.targetPageId,this.events.next(new Ro(b.id,this.serializeUrl(b.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.titleStrategy?.updateTitle(this.routerState.snapshot),b.resolve(!0)},b=>{this.console.warn(`Unhandled Navigation Error: ${b}`)})}scheduleNavigation(b,P,B,ee,ce){if(this.disposed)return Promise.resolve(!1);let ve,ut,qt;ce?(ve=ce.resolve,ut=ce.reject,qt=ce.promise):qt=new Promise((Er,Lr)=>{ve=Er,ut=Lr});const Kn=++this.navigationId;let ln;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(B=this.location.getState()),ln=B&&B.\u0275routerPageId?B.\u0275routerPageId:ee.replaceUrl||ee.skipLocationChange?this.browserPageId??0:(this.browserPageId??0)+1):ln=0,this.setTransition({id:Kn,targetPageId:ln,source:P,restoredState:B,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:b,extras:ee,resolve:ve,reject:ut,promise:qt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qt.catch(Er=>Promise.reject(Er))}setBrowserUrl(b,P){const B=this.urlSerializer.serialize(b),ee={...P.extras.state,...this.generateNgRouterState(P.id,P.targetPageId)};this.location.isCurrentPathEqualTo(B)||P.extras.replaceUrl?this.location.replaceState(B,"",ee):this.location.go(B,"",ee)}restoreHistory(b,P=!1){if("computed"===this.canceledNavigationResolution){const B=this.currentPageId-b.targetPageId;"popstate"!==b.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==this.currentNavigation?.finalUrl||0===B?this.currentUrlTree===this.currentNavigation?.finalUrl&&0===B&&(this.resetState(b),this.browserUrlTree=b.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(B)}else"replace"===this.canceledNavigationResolution&&(P&&this.resetState(b),this.resetUrlToCurrentUrlTree())}resetState(b){this.routerState=b.currentRouterState,this.currentUrlTree=b.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,b.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(b,P,B){const ee=new Ls(b.id,this.serializeUrl(b.extractedUrl),P,B);this.triggerEvent(ee),b.resolve(!1)}generateNgRouterState(b,P){return"computed"===this.canceledNavigationResolution?{navigationId:b,\u0275routerPageId:P}:{navigationId:b}}}return A.\u0275fac=function(b){w.$Z()},A.\u0275prov=w.Yz7({token:A,factory:function(){return Pc()},providedIn:"root"}),A})();function oc(A){return"imperative"!==A}let nn=(()=>{class A{constructor(b,P,B,ee,ce){this.router=b,this.route=P,this.tabIndexAttribute=B,this.renderer=ee,this.el=ce,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.onChanges=new Re.x,this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(b){this._preserveFragment=(0,w.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,w.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,w.D6c)(b)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(b){if(null!=this.tabIndexAttribute)return;const P=this.renderer,B=this.el.nativeElement;null!==b?P.setAttribute(B,"tabindex",b):P.removeAttribute(B,"tabindex")}ngOnChanges(b){this.onChanges.next(this)}set routerLink(b){null!=b?(this.commands=Array.isArray(b)?b:[b],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(){return null===this.urlTree||this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!0}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(b){return new(b||A)(w.Y36(Ot),w.Y36(ai),w.$8M("tabindex"),w.Y36(w.Qsj),w.Y36(w.SBq))},A.\u0275dir=w.lG2({type:A,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(b,P){1&b&&w.NdJ("click",function(){return P.onClick()})},inputs:{queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),A})(),at=(()=>{class A{constructor(b,P,B){this.router=b,this.route=P,this.locationStrategy=B,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.commands=null,this.href=null,this.onChanges=new Re.x,this.subscription=b.events.subscribe(ee=>{ee instanceof Ro&&this.updateTargetUrlAndHref()})}set preserveFragment(b){this._preserveFragment=(0,w.D6c)(b)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(b){this._skipLocationChange=(0,w.D6c)(b)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(b){this._replaceUrl=(0,w.D6c)(b)}get replaceUrl(){return this._replaceUrl}set routerLink(b){this.commands=null!=b?Array.isArray(b)?b:[b]:null}ngOnChanges(b){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(b,P,B,ee,ce){return!!(0!==b||P||B||ee||ce||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!1)}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return A.\u0275fac=function(b){return new(b||A)(w.Y36(Ot),w.Y36(ai),w.Y36(Dt.S$))},A.\u0275dir=w.lG2({type:A,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(b,P){1&b&&w.NdJ("click",function(ee){return P.onClick(ee.button,ee.ctrlKey,ee.shiftKey,ee.altKey,ee.metaKey)}),2&b&&w.uIk("target",P.target)("href",P.href,w.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[w.TTD]}),A})(),Tt=(()=>{class A{constructor(b,P,B,ee,ce,ve){this.router=b,this.element=P,this.renderer=B,this.cdr=ee,this.link=ce,this.linkWithHref=ve,this.classes=[],this.isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new w.vpe,this.routerEventsSubscription=b.events.subscribe(ut=>{ut instanceof Ro&&this.update()})}ngAfterContentInit(){(0,X.of)(this.links.changes,this.linksWithHrefs.changes,(0,X.of)(null)).pipe((0,Hn.J)()).subscribe(b=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const b=[...this.links.toArray(),...this.linksWithHrefs.toArray(),this.link,this.linkWithHref].filter(P=>!!P).map(P=>P.onChanges);this.linkInputChangesSubscription=(0,Y.D)(b).pipe((0,Hn.J)()).subscribe(P=>{this.isActive!==this.isLinkActive(this.router)(P)&&this.update()})}set routerLinkActive(b){const P=Array.isArray(b)?b:b.split(" ");this.classes=P.filter(B=>!!B)}ngOnChanges(b){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.linksWithHrefs||!this.router.navigated||Promise.resolve().then(()=>{const b=this.hasActiveLinks();this.isActive!==b&&(this.isActive=b,this.cdr.markForCheck(),this.classes.forEach(P=>{b?this.renderer.addClass(this.element.nativeElement,P):this.renderer.removeClass(this.element.nativeElement,P)}),b&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(b))})}isLinkActive(b){const P=function vr(A){return!!A.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return B=>!!B.urlTree&&b.isActive(B.urlTree,P)}hasActiveLinks(){const b=this.isLinkActive(this.router);return this.link&&b(this.link)||this.linkWithHref&&b(this.linkWithHref)||this.links.some(b)||this.linksWithHrefs.some(b)}}return A.\u0275fac=function(b){return new(b||A)(w.Y36(Ot),w.Y36(w.SBq),w.Y36(w.Qsj),w.Y36(w.sBO),w.Y36(nn,8),w.Y36(at,8))},A.\u0275dir=w.lG2({type:A,selectors:[["","routerLinkActive",""]],contentQueries:function(b,P,B){if(1&b&&(w.Suo(B,nn,5),w.Suo(B,at,5)),2&b){let ee;w.iGM(ee=w.CRH())&&(P.links=ee),w.iGM(ee=w.CRH())&&(P.linksWithHrefs=ee)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[w.TTD]}),A})();class Jo{}let el=(()=>{class A{constructor(b,P,B,ee,ce){this.router=b,this.injector=B,this.preloadingStrategy=ee,this.loader=ce}setUpPreloading(){this.subscription=this.router.events.pipe((0,kn.h)(b=>b instanceof Ro),(0,Me.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(b,P){const B=[];for(const ee of P){ee.providers&&!ee._injector&&(ee._injector=(0,w.MMx)(ee.providers,b,`Route: ${ee.path}`));const ce=ee._injector??b,ve=ee._loadedInjector??ce;ee.loadChildren&&!ee._loadedRoutes&&void 0===ee.canLoad||ee.loadComponent&&!ee._loadedComponent?B.push(this.preloadConfig(ce,ee)):(ee.children||ee._loadedRoutes)&&B.push(this.processRoutes(ve,ee.children??ee._loadedRoutes))}return(0,Y.D)(B).pipe((0,Hn.J)())}preloadConfig(b,P){return this.preloadingStrategy.preload(P,()=>{let B;B=P.loadChildren&&void 0===P.canLoad?this.loader.loadChildren(b,P):(0,X.of)(null);const ee=B.pipe((0,se.z)(ce=>null===ce?(0,X.of)(void 0):(P._loadedRoutes=ce.routes,P._loadedInjector=ce.injector,this.processRoutes(ce.injector??b,ce.routes))));if(P.loadComponent&&!P._loadedComponent){const ce=this.loader.loadComponent(P);return(0,Y.D)([ee,ce]).pipe((0,Hn.J)())}return ee})}}return A.\u0275fac=function(b){return new(b||A)(w.LFG(Ot),w.LFG(w.Sil),w.LFG(w.lqb),w.LFG(Jo),w.LFG(ou))},A.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac,providedIn:"root"}),A})();const Fl=new w.OlP("");let Su=(()=>{class A{constructor(b,P,B={}){this.router=b,this.viewportScroller=P,this.options=B,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},B.scrollPositionRestoration=B.scrollPositionRestoration||"disabled",B.anchorScrolling=B.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(b=>{b instanceof ci?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=b.navigationTrigger,this.restoredId=b.restoredState?b.restoredState.navigationId:0):b instanceof Ro&&(this.lastId=b.id,this.scheduleScrollEvent(b,this.router.parseUrl(b.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(b=>{b instanceof Ir&&(b.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(b.position):b.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(b.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(b,P){this.router.triggerEvent(new Ir(b,"popstate"===this.lastSource?this.store[this.restoredId]:null,P))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return A.\u0275fac=function(b){w.$Z()},A.\u0275prov=w.Yz7({token:A,factory:A.\u0275fac}),A})();function Ll(A,I){return{\u0275kind:A,\u0275providers:I}}function Ru(A){return[{provide:Xa,multi:!0,useValue:A}]}function Vl(){const A=(0,w.f3M)(w.zs3);return I=>{const b=A.get(w.z2F);if(I!==b.components[0])return;const P=A.get(Ot),B=A.get(Oc);1===A.get(Qr)&&P.initialNavigation(),A.get(Mu,null,w.XFs.Optional)?.setUpPreloading(),A.get(Fl,null,w.XFs.Optional)?.init(),P.resetRootComponentType(b.componentTypes[0]),B.closed||(B.next(),B.unsubscribe())}}const Oc=new w.OlP("",{factory:()=>new Re.x}),Qr=new w.OlP("",{providedIn:"root",factory:()=>1});const Mu=new w.OlP("");function _i(A){return Ll(0,[{provide:Mu,useExisting:el},{provide:Jo,useExisting:A}])}const Bs=new w.OlP("ROUTER_FORROOT_GUARD"),ac=[Dt.Ye,{provide:jr,useClass:Jr},{provide:Ot,useFactory:Pc},Vi,{provide:ai,useFactory:function Au(A){return A.routerState.root},deps:[Ot]},ou];function Bl(){return new w.PXZ("Router",Ot)}let jl=(()=>{class A{constructor(b){}static forRoot(b,P){return{ngModule:A,providers:[ac,[],Ru(b),{provide:Bs,useFactory:ao,deps:[[Ot,new w.FiY,new w.tp0]]},{provide:ml,useValue:P||{}},P?.useHash?{provide:Dt.S$,useClass:Dt.Do}:{provide:Dt.S$,useClass:Dt.b0},{provide:Fl,useFactory:()=>{const A=(0,w.f3M)(Ot),I=(0,w.f3M)(Dt.EM),b=(0,w.f3M)(ml);return b.scrollOffset&&I.setOffset(b.scrollOffset),new Su(A,I,b)}},P?.preloadingStrategy?_i(P.preloadingStrategy).\u0275providers:[],{provide:w.PXZ,multi:!0,useFactory:Bl},P?.initialNavigation?ud(P):[],[{provide:yl,useFactory:Vl},{provide:w.tb,multi:!0,useExisting:yl}]]}}static forChild(b){return{ngModule:A,providers:[Ru(b)]}}}return A.\u0275fac=function(b){return new(b||A)(w.LFG(Bs,8))},A.\u0275mod=w.oAB({type:A}),A.\u0275inj=w.cJS({imports:[vo]}),A})();function ao(A){return"guarded"}function ud(A){return["disabled"===A.initialNavigation?Ll(3,[{provide:w.ip1,multi:!0,useFactory:()=>{const I=(0,w.f3M)(Ot);return()=>{I.setUpLocationChangeListener()}}},{provide:Qr,useValue:2}]).\u0275providers:[],"enabledBlocking"===A.initialNavigation?Ll(2,[{provide:Qr,useValue:0},{provide:w.ip1,multi:!0,deps:[w.zs3],useFactory:I=>{const b=I.get(Dt.V_,Promise.resolve());let P=!1;return()=>b.then(()=>new Promise(ee=>{const ce=I.get(Ot),ve=I.get(Oc);(function B(ee){I.get(Ot).events.pipe((0,kn.h)(ve=>ve instanceof Ro||ve instanceof Ls||ve instanceof Mo),(0,Kt.U)(ve=>ve instanceof Ro||ve instanceof Ls&&(0===ve.code||1===ve.code)&&null),(0,kn.h)(ve=>null!==ve),(0,Dr.q)(1)).subscribe(()=>{ee()})})(()=>{ee(!0),P=!0}),ce.afterPreactivation=()=>(ee(!0),P||ve.closed?(0,X.of)(void 0):ve),ce.initialNavigation()}))}}]).\u0275providers:[]]}const yl=new w.OlP("")},3942:(rn,ot,z)=>{z.d(ot,{Z:()=>ct});var w=z(2090),Y=z(4859),X=z(6881),Re=z(1877);class Ce{constructor(pt,dt){this._delegate=pt,this.firebase=dt,(0,X._addComponent)(pt,new Y.wA("app-compat",()=>this,"PUBLIC")),this.container=pt.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(pt){this._delegate.automaticDataCollectionEnabled=pt}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(pt=>{this._delegate.checkDestroyed(),pt()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,X.deleteApp)(this._delegate)))}_getService(pt,dt=X._DEFAULT_ENTRY_NAME){var Ue;this._delegate.checkDestroyed();const an=this._delegate.container.getProvider(pt);return!an.isInitialized()&&"EXPLICIT"===(null===(Ue=an.getComponent())||void 0===Ue?void 0:Ue.instantiationMode)&&an.initialize(),an.getImmediate({identifier:dt})}_removeServiceInstance(pt,dt=X._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(pt).clearInstance(dt)}_addComponent(pt){(0,X._addComponent)(this._delegate,pt)}_addOrOverwriteComponent(pt){(0,X._addOrOverwriteComponent)(this._delegate,pt)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ve=new w.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ye=function Ye(){const $t=function Ge($t){const pt={},dt={__esModule:!0,initializeApp:function it(Et,We={}){const Oe=X.initializeApp(Et,We);if((0,w.r3)(pt,Oe.name))return pt[Oe.name];const Mt=new $t(Oe,dt);return pt[Oe.name]=Mt,Mt},app:an,registerVersion:X.registerVersion,setLogLevel:X.setLogLevel,onLog:X.onLog,apps:null,SDK_VERSION:X.SDK_VERSION,INTERNAL:{registerComponent:function Fe(Et){const We=Et.name,Oe=We.replace("-compat","");if(X._registerComponent(Et)&&"PUBLIC"===Et.type){const Mt=(Dt=an())=>{if("function"!=typeof Dt[Oe])throw Ve.create("invalid-app-argument",{appName:We});return Dt[Oe]()};void 0!==Et.serviceProps&&(0,w.ZB)(Mt,Et.serviceProps),dt[Oe]=Mt,$t.prototype[Oe]=function(...Dt){return this._getService.bind(this,We).apply(this,Et.multipleInstances?Dt:[])}}return"PUBLIC"===Et.type?dt[Oe]:null},removeApp:function Ue(Et){delete pt[Et]},useAsService:function At(Et,We){return"serverAuth"===We?null:We},modularAPIs:X}};function an(Et){if(!(0,w.r3)(pt,Et=Et||X._DEFAULT_ENTRY_NAME))throw Ve.create("no-app",{appName:Et});return pt[Et]}return dt.default=dt,Object.defineProperty(dt,"apps",{get:function De(){return Object.keys(pt).map(Et=>pt[Et])}}),an.App=$t,dt}(Ce);return $t.INTERNAL=Object.assign(Object.assign({},$t.INTERNAL),{createFirebaseNamespace:Ye,extendNamespace:function pt(dt){(0,w.ZB)($t,dt)},createSubscribe:w.ne,ErrorFactory:w.LL,deepExtend:w.ZB}),$t}(),pe=new Re.Yd("@firebase/app-compat");if((0,w.jU)()&&void 0!==self.firebase){pe.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const $t=self.firebase.SDK_VERSION;$t&&$t.indexOf("LITE")>=0&&pe.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ct=ye;!function vt($t){(0,X.registerVersion)("@firebase/app-compat","0.2.13",$t)}()},6881:(rn,ot,z)=>{z.r(ot),z.d(ot,{FirebaseError:()=>Re.ZR,SDK_VERSION:()=>Oi,_DEFAULT_ENTRY_NAME:()=>xi,_addComponent:()=>he,_addOrOverwriteComponent:()=>ht,_apps:()=>Qe,_clearComponents:()=>wn,_components:()=>ge,_getProvider:()=>cn,_registerComponent:()=>mt,_removeServiceInstance:()=>Rn,deleteApp:()=>$r,getApp:()=>Un,getApps:()=>Xt,initializeApp:()=>Vn,onLog:()=>li,registerVersion:()=>qn,setLogLevel:()=>jr});var w=z(5861),Y=z(4859),X=z(1877),Re=z(2090);let Ne,Ve;const ye=new WeakMap,pe=new WeakMap,Se=new WeakMap,Rt=new WeakMap,vt=new WeakMap;let pt={get(He,je,St){if(He instanceof IDBTransaction){if("done"===je)return pe.get(He);if("objectStoreNames"===je)return He.objectStoreNames||Se.get(He);if("store"===je)return St.objectStoreNames[1]?void 0:St.objectStore(St.objectStoreNames[0])}return it(He[je])},set:(He,je,St)=>(He[je]=St,!0),has:(He,je)=>He instanceof IDBTransaction&&("done"===je||"store"===je)||je in He};function an(He){return"function"==typeof He?function Ue(He){return He!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Ye(){return Ve||(Ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(He)?function(...je){return He.apply(De(this),je),it(ye.get(this))}:function(...je){return it(He.apply(De(this),je))}:function(je,...St){const Pt=He.call(De(this),je,...St);return Se.set(Pt,je.sort?je.sort():[je]),it(Pt)}}(He):(He instanceof IDBTransaction&&function $t(He){if(pe.has(He))return;const je=new Promise((St,Pt)=>{const In=()=>{He.removeEventListener("complete",bn),He.removeEventListener("error",yr),He.removeEventListener("abort",yr)},bn=()=>{St(),In()},yr=()=>{Pt(He.error||new DOMException("AbortError","AbortError")),In()};He.addEventListener("complete",bn),He.addEventListener("error",yr),He.addEventListener("abort",yr)});pe.set(He,je)}(He),((He,je)=>je.some(St=>He instanceof St))(He,function Ge(){return Ne||(Ne=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(He,pt):He)}function it(He){if(He instanceof IDBRequest)return function ct(He){const je=new Promise((St,Pt)=>{const In=()=>{He.removeEventListener("success",bn),He.removeEventListener("error",yr)},bn=()=>{St(it(He.result)),In()},yr=()=>{Pt(He.error),In()};He.addEventListener("success",bn),He.addEventListener("error",yr)});return je.then(St=>{St instanceof IDBCursor&&ye.set(St,He)}).catch(()=>{}),vt.set(je,He),je}(He);if(Rt.has(He))return Rt.get(He);const je=an(He);return je!==He&&(Rt.set(He,je),vt.set(je,He)),je}const De=He=>vt.get(He),Et=["get","getKey","getAll","getAllKeys","count"],We=["put","add","delete","clear"],Oe=new Map;function Mt(He,je){if(!(He instanceof IDBDatabase)||je in He||"string"!=typeof je)return;if(Oe.get(je))return Oe.get(je);const St=je.replace(/FromIndex$/,""),Pt=je!==St,In=We.includes(St);if(!(St in(Pt?IDBIndex:IDBObjectStore).prototype)||!In&&!Et.includes(St))return;const bn=function(){var yr=(0,w.Z)(function*(oi,...ur){const Ii=this.transaction(oi,In?"readwrite":"readonly");let ji=Ii.store;return Pt&&(ji=ji.index(ur.shift())),(yield Promise.all([ji[St](...ur),In&&Ii.done]))[0]});return function(ur){return yr.apply(this,arguments)}}();return Oe.set(je,bn),bn}!function dt(He){pt=He(pt)}(He=>({...He,get:(je,St,Pt)=>Mt(je,St)||He.get(je,St,Pt),has:(je,St)=>!!Mt(je,St)||He.has(je,St)}));class Dt{constructor(je){this.container=je}getPlatformInfoString(){return this.container.getProviders().map(St=>{if(function Kt(He){return"VERSION"===He.getComponent()?.type}(St)){const Pt=St.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(St=>St).join(" ")}}const Ht="@firebase/app",si=new X.Yd("@firebase/app"),xi="[DEFAULT]",wi={[Ht]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Qe=new Map,ge=new Map;function he(He,je){try{He.container.addComponent(je)}catch(St){si.debug(`Component ${je.name} failed to register with FirebaseApp ${He.name}`,St)}}function ht(He,je){He.container.addOrOverwriteComponent(je)}function mt(He){const je=He.name;if(ge.has(je))return si.debug(`There were multiple attempts to register component ${je}.`),!1;ge.set(je,He);for(const St of Qe.values())he(St,He);return!0}function cn(He,je){const St=He.container.getProvider("heartbeat").getImmediate({optional:!0});return St&&St.triggerHeartbeat(),He.container.getProvider(je)}function Rn(He,je,St=xi){cn(He,je).clearInstance(St)}function wn(){ge.clear()}const lr=new Re.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Qn{constructor(je,St,Pt){this._isDeleted=!1,this._options=Object.assign({},je),this._config=Object.assign({},St),this._name=St.name,this._automaticDataCollectionEnabled=St.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new Y.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(je){this.checkDestroyed(),this._automaticDataCollectionEnabled=je}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(je){this._isDeleted=je}checkDestroyed(){if(this.isDeleted)throw lr.create("app-deleted",{appName:this._name})}}const Oi="9.23.0";function Vn(He,je={}){let St=He;"object"!=typeof je&&(je={name:je});const Pt=Object.assign({name:xi,automaticDataCollectionEnabled:!1},je),In=Pt.name;if("string"!=typeof In||!In)throw lr.create("bad-app-name",{appName:String(In)});if(St||(St=(0,Re.aH)()),!St)throw lr.create("no-options");const bn=Qe.get(In);if(bn){if((0,Re.vZ)(St,bn.options)&&(0,Re.vZ)(Pt,bn.config))return bn;throw lr.create("duplicate-app",{appName:In})}const yr=new Y.H0(In);for(const ur of ge.values())yr.addComponent(ur);const oi=new Qn(St,Pt,yr);return Qe.set(In,oi),oi}function Un(He=xi){const je=Qe.get(He);if(!je&&He===xi&&(0,Re.aH)())return Vn();if(!je)throw lr.create("no-app",{appName:He});return je}function Xt(){return Array.from(Qe.values())}function $r(He){return br.apply(this,arguments)}function br(){return(br=(0,w.Z)(function*(He){const je=He.name;Qe.has(je)&&(Qe.delete(je),yield Promise.all(He.container.getProviders().map(St=>St.delete())),He.isDeleted=!0)})).apply(this,arguments)}function qn(He,je,St){var Pt;let In=null!==(Pt=wi[He])&&void 0!==Pt?Pt:He;St&&(In+=`-${St}`);const bn=In.match(/\s|\//),yr=je.match(/\s|\//);if(bn||yr){const oi=[`Unable to register library "${In}" with version "${je}":`];return bn&&oi.push(`library name "${In}" contains illegal characters (whitespace or "/")`),bn&&yr&&oi.push("and"),yr&&oi.push(`version name "${je}" contains illegal characters (whitespace or "/")`),void si.warn(oi.join(" "))}mt(new Y.wA(`${In}-version`,()=>({library:In,version:je}),"VERSION"))}function li(He,je){if(null!==He&&"function"!=typeof He)throw lr.create("invalid-log-argument");(0,X.Am)(He,je)}function jr(He){(0,X.Ub)(He)}const _e="firebase-heartbeat-store";let fe=null;function ke(){return fe||(fe=function Fe(He,je,{blocked:St,upgrade:Pt,blocking:In,terminated:bn}={}){const yr=indexedDB.open(He,je),oi=it(yr);return Pt&&yr.addEventListener("upgradeneeded",ur=>{Pt(it(yr.result),ur.oldVersion,ur.newVersion,it(yr.transaction),ur)}),St&&yr.addEventListener("blocked",ur=>St(ur.oldVersion,ur.newVersion,ur)),oi.then(ur=>{bn&&ur.addEventListener("close",()=>bn()),In&&ur.addEventListener("versionchange",Ii=>In(Ii.oldVersion,Ii.newVersion,Ii))}).catch(()=>{}),oi}("firebase-heartbeat-database",1,{upgrade:(He,je)=>{0===je&&He.createObjectStore(_e)}}).catch(He=>{throw lr.create("idb-open",{originalErrorMessage:He.message})})),fe}function $e(){return($e=(0,w.Z)(function*(He){try{return yield(yield ke()).transaction(_e).objectStore(_e).get(Ln(He))}catch(je){if(je instanceof Re.ZR)si.warn(je.message);else{const St=lr.create("idb-get",{originalErrorMessage:je?.message});si.warn(St.message)}}})).apply(this,arguments)}function Gt(He,je){return vn.apply(this,arguments)}function vn(){return(vn=(0,w.Z)(function*(He,je){try{const Pt=(yield ke()).transaction(_e,"readwrite");yield Pt.objectStore(_e).put(je,Ln(He)),yield Pt.done}catch(St){if(St instanceof Re.ZR)si.warn(St.message);else{const Pt=lr.create("idb-set",{originalErrorMessage:St?.message});si.warn(Pt.message)}}})).apply(this,arguments)}function Ln(He){return`${He.name}!${He.options.appId}`}class ue{constructor(je){this.container=je,this._heartbeatsCache=null;const St=this.container.getProvider("app").getImmediate();this._storage=new Ct(St),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var je=this;return(0,w.Z)(function*(){const Pt=je.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),In=oe();if(null===je._heartbeatsCache&&(je._heartbeatsCache=yield je._heartbeatsCachePromise),je._heartbeatsCache.lastSentHeartbeatDate!==In&&!je._heartbeatsCache.heartbeats.some(bn=>bn.date===In))return je._heartbeatsCache.heartbeats.push({date:In,agent:Pt}),je._heartbeatsCache.heartbeats=je._heartbeatsCache.heartbeats.filter(bn=>{const yr=new Date(bn.date).valueOf();return Date.now()-yr<=2592e6}),je._storage.overwrite(je._heartbeatsCache)})()}getHeartbeatsHeader(){var je=this;return(0,w.Z)(function*(){if(null===je._heartbeatsCache&&(yield je._heartbeatsCachePromise),null===je._heartbeatsCache||0===je._heartbeatsCache.heartbeats.length)return"";const St=oe(),{heartbeatsToSend:Pt,unsentEntries:In}=function Be(He,je=1024){const St=[];let Pt=He.slice();for(const In of He){const bn=St.find(yr=>yr.agent===In.agent);if(bn){if(bn.dates.push(In.date),sn(St)>je){bn.dates.pop();break}}else if(St.push({agent:In.agent,dates:[In.date]}),sn(St)>je){St.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:St,unsentEntries:Pt}}(je._heartbeatsCache.heartbeats),bn=(0,Re.L)(JSON.stringify({version:2,heartbeats:Pt}));return je._heartbeatsCache.lastSentHeartbeatDate=St,In.length>0?(je._heartbeatsCache.heartbeats=In,yield je._storage.overwrite(je._heartbeatsCache)):(je._heartbeatsCache.heartbeats=[],je._storage.overwrite(je._heartbeatsCache)),bn})()}}function oe(){return(new Date).toISOString().substring(0,10)}class Ct{constructor(je){this.app=je,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,w.Z)(function*(){return!!(0,Re.hl)()&&(0,Re.eu)().then(()=>!0).catch(()=>!1)})()}read(){var je=this;return(0,w.Z)(function*(){return(yield je._canUseIndexedDBPromise)&&(yield function rt(He){return $e.apply(this,arguments)}(je.app))||{heartbeats:[]}})()}overwrite(je){var St=this;return(0,w.Z)(function*(){var Pt;if(yield St._canUseIndexedDBPromise){const bn=yield St.read();return Gt(St.app,{lastSentHeartbeatDate:null!==(Pt=je.lastSentHeartbeatDate)&&void 0!==Pt?Pt:bn.lastSentHeartbeatDate,heartbeats:je.heartbeats})}})()}add(je){var St=this;return(0,w.Z)(function*(){var Pt;if(yield St._canUseIndexedDBPromise){const bn=yield St.read();return Gt(St.app,{lastSentHeartbeatDate:null!==(Pt=je.lastSentHeartbeatDate)&&void 0!==Pt?Pt:bn.lastSentHeartbeatDate,heartbeats:[...bn.heartbeats,...je.heartbeats]})}})()}}function sn(He){return(0,Re.L)(JSON.stringify({version:2,heartbeats:He})).length}!function xn(He){mt(new Y.wA("platform-logger",je=>new Dt(je),"PRIVATE")),mt(new Y.wA("heartbeat",je=>new ue(je),"PRIVATE")),qn(Ht,"0.9.13",He),qn(Ht,"0.9.13","esm2017"),qn("fire-js","")}("")},4859:(rn,ot,z)=>{z.d(ot,{H0:()=>Ge,wA:()=>X,zt:()=>Ce});var w=z(5861),Y=z(2090);class X{constructor(ye,pe,Se){this.name=ye,this.instanceFactory=pe,this.type=Se,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ye){return this.instantiationMode=ye,this}setMultipleInstances(ye){return this.multipleInstances=ye,this}setServiceProps(ye){return this.serviceProps=ye,this}setInstanceCreatedCallback(ye){return this.onInstanceCreated=ye,this}}const Re="[DEFAULT]";class Ce{constructor(ye,pe){this.name=ye,this.container=pe,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ye){const pe=this.normalizeInstanceIdentifier(ye);if(!this.instancesDeferred.has(pe)){const Se=new Y.BH;if(this.instancesDeferred.set(pe,Se),this.isInitialized(pe)||this.shouldAutoInitialize())try{const Rt=this.getOrInitializeService({instanceIdentifier:pe});Rt&&Se.resolve(Rt)}catch{}}return this.instancesDeferred.get(pe).promise}getImmediate(ye){var pe;const Se=this.normalizeInstanceIdentifier(ye?.identifier),Rt=null!==(pe=ye?.optional)&&void 0!==pe&&pe;if(!this.isInitialized(Se)&&!this.shouldAutoInitialize()){if(Rt)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Se})}catch(vt){if(Rt)return null;throw vt}}getComponent(){return this.component}setComponent(ye){if(ye.name!==this.name)throw Error(`Mismatching Component ${ye.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ye,this.shouldAutoInitialize()){if(function Ve(Ye){return"EAGER"===Ye.instantiationMode}(ye))try{this.getOrInitializeService({instanceIdentifier:Re})}catch{}for(const[pe,Se]of this.instancesDeferred.entries()){const Rt=this.normalizeInstanceIdentifier(pe);try{const vt=this.getOrInitializeService({instanceIdentifier:Rt});Se.resolve(vt)}catch{}}}}clearInstance(ye=Re){this.instancesDeferred.delete(ye),this.instancesOptions.delete(ye),this.instances.delete(ye)}delete(){var ye=this;return(0,w.Z)(function*(){const pe=Array.from(ye.instances.values());yield Promise.all([...pe.filter(Se=>"INTERNAL"in Se).map(Se=>Se.INTERNAL.delete()),...pe.filter(Se=>"_delete"in Se).map(Se=>Se._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ye=Re){return this.instances.has(ye)}getOptions(ye=Re){return this.instancesOptions.get(ye)||{}}initialize(ye={}){const{options:pe={}}=ye,Se=this.normalizeInstanceIdentifier(ye.instanceIdentifier);if(this.isInitialized(Se))throw Error(`${this.name}(${Se}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Rt=this.getOrInitializeService({instanceIdentifier:Se,options:pe});for(const[vt,ct]of this.instancesDeferred.entries())Se===this.normalizeInstanceIdentifier(vt)&&ct.resolve(Rt);return Rt}onInit(ye,pe){var Se;const Rt=this.normalizeInstanceIdentifier(pe),vt=null!==(Se=this.onInitCallbacks.get(Rt))&&void 0!==Se?Se:new Set;vt.add(ye),this.onInitCallbacks.set(Rt,vt);const ct=this.instances.get(Rt);return ct&&ye(ct,Rt),()=>{vt.delete(ye)}}invokeOnInitCallbacks(ye,pe){const Se=this.onInitCallbacks.get(pe);if(Se)for(const Rt of Se)try{Rt(ye,pe)}catch{}}getOrInitializeService({instanceIdentifier:ye,options:pe={}}){let Se=this.instances.get(ye);if(!Se&&this.component&&(Se=this.component.instanceFactory(this.container,{instanceIdentifier:(Ye=ye,Ye===Re?void 0:Ye),options:pe}),this.instances.set(ye,Se),this.instancesOptions.set(ye,pe),this.invokeOnInitCallbacks(Se,ye),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ye,Se)}catch{}var Ye;return Se||null}normalizeInstanceIdentifier(ye=Re){return this.component?this.component.multipleInstances?ye:Re:ye}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Ge{constructor(ye){this.name=ye,this.providers=new Map}addComponent(ye){const pe=this.getProvider(ye.name);if(pe.isComponentSet())throw new Error(`Component ${ye.name} has already been registered with ${this.name}`);pe.setComponent(ye)}addOrOverwriteComponent(ye){this.getProvider(ye.name).isComponentSet()&&this.providers.delete(ye.name),this.addComponent(ye)}getProvider(ye){if(this.providers.has(ye))return this.providers.get(ye);const pe=new Ce(ye,this);return this.providers.set(ye,pe),pe}getProviders(){return Array.from(this.providers.values())}}},1877:(rn,ot,z)=>{z.d(ot,{Am:()=>Ye,Ub:()=>Ge,Yd:()=>Ve,in:()=>Y});const w=[];var Y=(()=>{return(ye=Y||(Y={}))[ye.DEBUG=0]="DEBUG",ye[ye.VERBOSE=1]="VERBOSE",ye[ye.INFO=2]="INFO",ye[ye.WARN=3]="WARN",ye[ye.ERROR=4]="ERROR",ye[ye.SILENT=5]="SILENT",Y;var ye})();const X={debug:Y.DEBUG,verbose:Y.VERBOSE,info:Y.INFO,warn:Y.WARN,error:Y.ERROR,silent:Y.SILENT},Re=Y.INFO,Ce={[Y.DEBUG]:"log",[Y.VERBOSE]:"log",[Y.INFO]:"info",[Y.WARN]:"warn",[Y.ERROR]:"error"},Ne=(ye,pe,...Se)=>{if(pe<ye.logLevel)return;const Rt=(new Date).toISOString(),vt=Ce[pe];if(!vt)throw new Error(`Attempted to log a message with an invalid logType (value: ${pe})`);console[vt](`[${Rt}]  ${ye.name}:`,...Se)};class Ve{constructor(pe){this.name=pe,this._logLevel=Re,this._logHandler=Ne,this._userLogHandler=null,w.push(this)}get logLevel(){return this._logLevel}set logLevel(pe){if(!(pe in Y))throw new TypeError(`Invalid value "${pe}" assigned to \`logLevel\``);this._logLevel=pe}setLogLevel(pe){this._logLevel="string"==typeof pe?X[pe]:pe}get logHandler(){return this._logHandler}set logHandler(pe){if("function"!=typeof pe)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=pe}get userLogHandler(){return this._userLogHandler}set userLogHandler(pe){this._userLogHandler=pe}debug(...pe){this._userLogHandler&&this._userLogHandler(this,Y.DEBUG,...pe),this._logHandler(this,Y.DEBUG,...pe)}log(...pe){this._userLogHandler&&this._userLogHandler(this,Y.VERBOSE,...pe),this._logHandler(this,Y.VERBOSE,...pe)}info(...pe){this._userLogHandler&&this._userLogHandler(this,Y.INFO,...pe),this._logHandler(this,Y.INFO,...pe)}warn(...pe){this._userLogHandler&&this._userLogHandler(this,Y.WARN,...pe),this._logHandler(this,Y.WARN,...pe)}error(...pe){this._userLogHandler&&this._userLogHandler(this,Y.ERROR,...pe),this._logHandler(this,Y.ERROR,...pe)}}function Ge(ye){w.forEach(pe=>{pe.setLogLevel(ye)})}function Ye(ye,pe){for(const Se of w){let Rt=null;pe&&pe.level&&(Rt=X[pe.level]),Se.userLogHandler=null===ye?null:(vt,ct,...$t)=>{const pt=$t.map(dt=>{if(null==dt)return null;if("string"==typeof dt)return dt;if("number"==typeof dt||"boolean"==typeof dt)return dt.toString();if(dt instanceof Error)return dt.message;try{return JSON.stringify(dt)}catch{return null}}).filter(dt=>dt).join(" ");ct>=(Rt??vt.logLevel)&&ye({level:Y[ct].toLowerCase(),message:pt,args:$t,type:vt.name})}}}},259:(rn,ot,z)=>{z.d(ot,{C6:()=>w.getApps,Mq:()=>w.getApp});var w=z(6881);(0,w.registerVersion)("firebase","9.23.0","app")},9260:(rn,ot,z)=>{z.d(ot,{Z:()=>w.Z});var w=z(3942);w.Z.registerVersion("firebase","9.23.0","app-compat")},2644:(rn,ot,z)=>{z.r(ot);var w=z(5861),Y=z(3942),X=z(2090),Re=z(6881),Ce=z(7582),Ne=z(1877),Ve=z(4859);const ct=function Rt(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},$t=function vt(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},pt=new X.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Ue=new Ne.Yd("@firebase/auth");function it(C,...m){Ue.logLevel<=Ne.in.ERROR&&Ue.error(`Auth (${Re.SDK_VERSION}): ${C}`,...m)}function De(C,...m){throw We(C,...m)}function Fe(C,...m){return We(C,...m)}function At(C,m,y){const T=Object.assign(Object.assign({},$t()),{[m]:y});return new X.LL("auth","Firebase",T).create(m,{appName:C.name})}function Et(C,m,y){if(!(m instanceof y))throw y.name!==m.constructor.name&&De(C,"argument-error"),At(C,"argument-error",`Type of ${m.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function We(C,...m){if("string"!=typeof C){const y=m[0],T=[...m.slice(1)];return T[0]&&(T[0].appName=C.name),C._errorFactory.create(y,...T)}return pt.create(C,...m)}function Oe(C,m,...y){if(!C)throw We(m,...y)}function Mt(C){const m="INTERNAL ASSERTION FAILED: "+C;throw it(m),new Error(m)}function Dt(C,m){C||Mt(m)}function Kt(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.href)||""}function Ht(){return"http:"===Dr()||"https:"===Dr()}function Dr(){var C;return typeof self<"u"&&(null===(C=self.location)||void 0===C?void 0:C.protocol)||null}class se{constructor(m,y){this.shortDelay=m,this.longDelay=y,Dt(y>m,"Short delay should be less than long delay!"),this.isMobile=(0,X.uI)()||(0,X.b$)()}get(){return function si(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(Ht()||(0,X.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Ae(C,m){Dt(C.emulator,"Emulator should always be set here");const{url:y}=C.emulator;return m?`${y}${m.startsWith("/")?m.slice(1):m}`:y}class Me{static initialize(m,y,T){this.fetchImpl=m,y&&(this.headersImpl=y),T&&(this.responseImpl=T)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},tt=new se(3e4,6e4);function gt(C,m){return C.tenantId&&!m.tenantId?Object.assign(Object.assign({},m),{tenantId:C.tenantId}):m}function et(C,m,y,T){return zt.apply(this,arguments)}function zt(){return(zt=(0,w.Z)(function*(C,m,y,T,$={}){return dn(C,$,(0,w.Z)(function*(){let J={},me={};T&&("GET"===m?me=T:J={body:JSON.stringify(T)});const Xe=(0,X.xO)(Object.assign({key:C.config.apiKey},me)).slice(1),kt=yield C._getAdditionalHeaders();return kt["Content-Type"]="application/json",C.languageCode&&(kt["X-Firebase-Locale"]=C.languageCode),Me.fetch()(fr(C,C.config.apiHost,y,Xe),Object.assign({method:m,headers:kt,referrerPolicy:"no-referrer"},J))}))})).apply(this,arguments)}function dn(C,m,y){return En.apply(this,arguments)}function En(){return(En=(0,w.Z)(function*(C,m,y){C._canInitEmulator=!1;const T=Object.assign(Object.assign({},Ke),m);try{const $=new Hn(C),J=yield Promise.race([y(),$.promise]);$.clearNetworkTimeout();const me=yield J.json();if("needConfirmation"in me)throw Xn(C,"account-exists-with-different-credential",me);if(J.ok&&!("errorMessage"in me))return me;{const Xe=J.ok?me.errorMessage:me.error.message,[kt,Qt]=Xe.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===kt)throw Xn(C,"credential-already-in-use",me);if("EMAIL_EXISTS"===kt)throw Xn(C,"email-already-in-use",me);if("USER_DISABLED"===kt)throw Xn(C,"user-disabled",me);const yn=T[kt]||kt.toLowerCase().replace(/[_\s]+/g,"-");if(Qt)throw At(C,yn,Qt);De(C,yn)}}catch($){if($ instanceof X.ZR)throw $;De(C,"network-request-failed",{message:String($)})}})).apply(this,arguments)}function un(C,m,y,T){return Mn.apply(this,arguments)}function Mn(){return(Mn=(0,w.Z)(function*(C,m,y,T,$={}){const J=yield et(C,m,y,T,$);return"mfaPendingCredential"in J&&De(C,"multi-factor-auth-required",{_serverResponse:J}),J})).apply(this,arguments)}function fr(C,m,y,T){const $=`${m}${y}?${T}`;return C.config.emulator?Ae(C.config,$):`${C.config.apiScheme}://${$}`}class Hn{constructor(m){this.auth=m,this.timer=null,this.promise=new Promise((y,T)=>{this.timer=setTimeout(()=>T(Fe(this.auth,"network-request-failed")),tt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Xn(C,m,y){const T={appName:C.name};y.email&&(T.email=y.email),y.phoneNumber&&(T.phoneNumber=y.phoneNumber);const $=Fe(C,m,T);return $.customData._tokenResponse=y,$}function cr(){return(cr=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:delete",m)})).apply(this,arguments)}function kr(C,m){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ut(C,m){return wr.apply(this,arguments)}function wr(){return(wr=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:lookup",m)})).apply(this,arguments)}function An(C){if(C)try{const m=new Date(Number(C));if(!isNaN(m.getTime()))return m.toUTCString()}catch{}}function xi(){return(xi=(0,w.Z)(function*(C,m=!1){const y=(0,X.m9)(C),T=yield y.getIdToken(m),$=Qe(T);Oe($&&$.exp&&$.auth_time&&$.iat,y.auth,"internal-error");const J="object"==typeof $.firebase?$.firebase:void 0,me=J?.sign_in_provider;return{claims:$,token:T,authTime:An(wi($.auth_time)),issuedAtTime:An(wi($.iat)),expirationTime:An(wi($.exp)),signInProvider:me||null,signInSecondFactor:J?.sign_in_second_factor||null}})).apply(this,arguments)}function wi(C){return 1e3*Number(C)}function Qe(C){const[m,y,T]=C.split(".");if(void 0===m||void 0===y||void 0===T)return it("JWT malformed, contained fewer than 3 sections"),null;try{const $=(0,X.tV)(y);return $?JSON.parse($):(it("Failed to decode base64 JWT payload"),null)}catch($){return it("Caught error parsing JWT payload as JSON",$?.toString()),null}}function he(C,m){return ht.apply(this,arguments)}function ht(){return(ht=(0,w.Z)(function*(C,m,y=!1){if(y)return m;try{return yield m}catch(T){throw T instanceof X.ZR&&mt(T)&&C.auth.currentUser===C&&(yield C.auth.signOut()),T}})).apply(this,arguments)}function mt({code:C}){return"auth/user-disabled"===C||"auth/user-token-expired"===C}class cn{constructor(m){this.user=m,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(m){var y;if(m){const T=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),T}{this.errorBackoff=3e4;const $=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,$)}}schedule(m=!1){var y=this;if(!this.isRunning)return;const T=this.getInterval(m);this.timerId=setTimeout((0,w.Z)(function*(){yield y.iteration()}),T)}iteration(){var m=this;return(0,w.Z)(function*(){try{yield m.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y?.code&&m.schedule(!0))}m.schedule()})()}}class Rn{constructor(m,y){this.createdAt=m,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=An(this.lastLoginAt),this.creationTime=An(this.createdAt)}_copy(m){this.createdAt=m.createdAt,this.lastLoginAt=m.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function wn(C){return jt.apply(this,arguments)}function jt(){return(jt=(0,w.Z)(function*(C){var m;const y=C.auth,T=yield C.getIdToken(),$=yield he(C,Ut(y,{idToken:T}));Oe($?.users.length,y,"internal-error");const J=$.users[0];C._notifyReloadListener(J);const me=null!==(m=J.providerUserInfo)&&void 0!==m&&m.length?Vn(J.providerUserInfo):[],Xe=Oi(C.providerData,me),yn=!!C.isAnonymous&&!(C.email&&J.passwordHash||Xe?.length),Dn={uid:J.localId,displayName:J.displayName||null,photoURL:J.photoUrl||null,email:J.email||null,emailVerified:J.emailVerified||!1,phoneNumber:J.phoneNumber||null,tenantId:J.tenantId||null,providerData:Xe,metadata:new Rn(J.createdAt,J.lastLoginAt),isAnonymous:yn};Object.assign(C,Dn)})).apply(this,arguments)}function Qn(){return(Qn=(0,w.Z)(function*(C){const m=(0,X.m9)(C);yield wn(m),yield m.auth._persistUserIfCurrent(m),m.auth._notifyListenersIfCurrent(m)})).apply(this,arguments)}function Oi(C,m){return[...C.filter(T=>!m.some($=>$.providerId===T.providerId)),...m]}function Vn(C){return C.map(m=>{var{providerId:y}=m,T=(0,Ce._T)(m,["providerId"]);return{providerId:y,uid:T.rawId||"",displayName:T.displayName||null,email:T.email||null,phoneNumber:T.phoneNumber||null,photoURL:T.photoUrl||null}})}function Xt(){return(Xt=(0,w.Z)(function*(C,m){const y=yield dn(C,{},(0,w.Z)(function*(){const T=(0,X.xO)({grant_type:"refresh_token",refresh_token:m}).slice(1),{tokenApiHost:$,apiKey:J}=C.config,me=fr(C,$,"/v1/token",`key=${J}`),Xe=yield C._getAdditionalHeaders();return Xe["Content-Type"]="application/x-www-form-urlencoded",Me.fetch()(me,{method:"POST",headers:Xe,body:T})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class $r{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(m){Oe(m.idToken,"internal-error"),Oe(typeof m.idToken<"u","internal-error"),Oe(typeof m.refreshToken<"u","internal-error");const y="expiresIn"in m&&typeof m.expiresIn<"u"?Number(m.expiresIn):function ge(C){const m=Qe(C);return Oe(m,"internal-error"),Oe(typeof m.exp<"u","internal-error"),Oe(typeof m.iat<"u","internal-error"),Number(m.exp)-Number(m.iat)}(m.idToken);this.updateTokensAndExpiration(m.idToken,m.refreshToken,y)}getToken(m,y=!1){var T=this;return(0,w.Z)(function*(){return Oe(!T.accessToken||T.refreshToken,m,"user-token-expired"),y||!T.accessToken||T.isExpired?T.refreshToken?(yield T.refresh(m,T.refreshToken),T.accessToken):null:T.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(m,y){var T=this;return(0,w.Z)(function*(){const{accessToken:$,refreshToken:J,expiresIn:me}=yield function Un(C,m){return Xt.apply(this,arguments)}(m,y);T.updateTokensAndExpiration($,J,Number(me))})()}updateTokensAndExpiration(m,y,T){this.refreshToken=y||null,this.accessToken=m||null,this.expirationTime=Date.now()+1e3*T}static fromJSON(m,y){const{refreshToken:T,accessToken:$,expirationTime:J}=y,me=new $r;return T&&(Oe("string"==typeof T,"internal-error",{appName:m}),me.refreshToken=T),$&&(Oe("string"==typeof $,"internal-error",{appName:m}),me.accessToken=$),J&&(Oe("number"==typeof J,"internal-error",{appName:m}),me.expirationTime=J),me}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(m){this.accessToken=m.accessToken,this.refreshToken=m.refreshToken,this.expirationTime=m.expirationTime}_clone(){return Object.assign(new $r,this.toJSON())}_performRefresh(){return Mt("not implemented")}}function br(C,m){Oe("string"==typeof C||typeof C>"u","internal-error",{appName:m})}class qn{constructor(m){var{uid:y,auth:T,stsTokenManager:$}=m,J=(0,Ce._T)(m,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new cn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=T,this.stsTokenManager=$,this.accessToken=$.accessToken,this.displayName=J.displayName||null,this.email=J.email||null,this.emailVerified=J.emailVerified||!1,this.phoneNumber=J.phoneNumber||null,this.photoURL=J.photoURL||null,this.isAnonymous=J.isAnonymous||!1,this.tenantId=J.tenantId||null,this.providerData=J.providerData?[...J.providerData]:[],this.metadata=new Rn(J.createdAt||void 0,J.lastLoginAt||void 0)}getIdToken(m){var y=this;return(0,w.Z)(function*(){const T=yield he(y,y.stsTokenManager.getToken(y.auth,m));return Oe(T,y.auth,"internal-error"),y.accessToken!==T&&(y.accessToken=T,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),T})()}getIdTokenResult(m){return function us(C){return xi.apply(this,arguments)}(this,m)}reload(){return function lr(C){return Qn.apply(this,arguments)}(this)}_assign(m){this!==m&&(Oe(this.uid===m.uid,this.auth,"internal-error"),this.displayName=m.displayName,this.photoURL=m.photoURL,this.email=m.email,this.emailVerified=m.emailVerified,this.phoneNumber=m.phoneNumber,this.isAnonymous=m.isAnonymous,this.tenantId=m.tenantId,this.providerData=m.providerData.map(y=>Object.assign({},y)),this.metadata._copy(m.metadata),this.stsTokenManager._assign(m.stsTokenManager))}_clone(m){const y=new qn(Object.assign(Object.assign({},this),{auth:m,stsTokenManager:this.stsTokenManager._clone()}));return y.metadata._copy(this.metadata),y}_onReload(m){Oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=m,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(m){this.reloadListener?this.reloadListener(m):this.reloadUserInfo=m}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(m,y=!1){var T=this;return(0,w.Z)(function*(){let $=!1;m.idToken&&m.idToken!==T.stsTokenManager.accessToken&&(T.stsTokenManager.updateFromServerResponse(m),$=!0),y&&(yield wn(T)),yield T.auth._persistUserIfCurrent(T),$&&T.auth._notifyListenersIfCurrent(T)})()}delete(){var m=this;return(0,w.Z)(function*(){const y=yield m.getIdToken();return yield he(m,function Jt(C,m){return cr.apply(this,arguments)}(m.auth,{idToken:y})),m.stsTokenManager.clearRefreshToken(),m.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(m=>Object.assign({},m)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(m,y){var T,$,J,me,Xe,kt,Qt,yn;const Dn=null!==(T=y.displayName)&&void 0!==T?T:void 0,os=null!==($=y.email)&&void 0!==$?$:void 0,Va=null!==(J=y.phoneNumber)&&void 0!==J?J:void 0,Jh=null!==(me=y.photoURL)&&void 0!==me?me:void 0,qf=null!==(Xe=y.tenantId)&&void 0!==Xe?Xe:void 0,wc=null!==(kt=y._redirectEventId)&&void 0!==kt?kt:void 0,Cd=null!==(Qt=y.createdAt)&&void 0!==Qt?Qt:void 0,Dd=null!==(yn=y.lastLoginAt)&&void 0!==yn?yn:void 0,{uid:ch,emailVerified:zp,isAnonymous:Xh,providerData:Kc,stsTokenManager:Wp}=y;Oe(ch&&Wp,m,"internal-error");const dh=$r.fromJSON(this.name,Wp);Oe("string"==typeof ch,m,"internal-error"),br(Dn,m.name),br(os,m.name),Oe("boolean"==typeof zp,m,"internal-error"),Oe("boolean"==typeof Xh,m,"internal-error"),br(Va,m.name),br(Jh,m.name),br(qf,m.name),br(wc,m.name),br(Cd,m.name),br(Dd,m.name);const ef=new qn({uid:ch,auth:m,email:os,emailVerified:zp,displayName:Dn,isAnonymous:Xh,photoURL:Jh,phoneNumber:Va,tenantId:qf,stsTokenManager:dh,createdAt:Cd,lastLoginAt:Dd});return Kc&&Array.isArray(Kc)&&(ef.providerData=Kc.map(Js=>Object.assign({},Js))),wc&&(ef._redirectEventId=wc),ef}static _fromIdTokenResponse(m,y,T=!1){return(0,w.Z)(function*(){const $=new $r;$.updateFromServerResponse(y);const J=new qn({uid:y.localId,auth:m,stsTokenManager:$,isAnonymous:T});return yield wn(J),J})()}}const li=new Map;function jr(C){Dt(C instanceof Function,"Expected a class definition");let m=li.get(C);return m?(Dt(m instanceof C,"Instance stored in cache mismatched with class"),m):(m=new C,li.set(C,m),m)}const ti=(()=>{class C{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,w.Z)(function*(){return!0})()}_set(y,T){var $=this;return(0,w.Z)(function*(){$.storage[y]=T})()}_get(y){var T=this;return(0,w.Z)(function*(){const $=T.storage[y];return void 0===$?null:$})()}_remove(y){var T=this;return(0,w.Z)(function*(){delete T.storage[y]})()}_addListener(y,T){}_removeListener(y,T){}}return C.type="NONE",C})();function _e(C,m,y){return`firebase:${C}:${m}:${y}`}class fe{constructor(m,y,T){this.persistence=m,this.auth=y,this.userKey=T;const{config:$,name:J}=this.auth;this.fullUserKey=_e(this.userKey,$.apiKey,J),this.fullPersistenceKey=_e("persistence",$.apiKey,J),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(m){return this.persistence._set(this.fullUserKey,m.toJSON())}getCurrentUser(){var m=this;return(0,w.Z)(function*(){const y=yield m.persistence._get(m.fullUserKey);return y?qn._fromJSON(m.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(m){var y=this;return(0,w.Z)(function*(){if(y.persistence===m)return;const T=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=m,T?y.setCurrentUser(T):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(m,y,T="authUser"){return(0,w.Z)(function*(){if(!y.length)return new fe(jr(ti),m,T);const $=(yield Promise.all(y.map(function(){var Qt=(0,w.Z)(function*(yn){if(yield yn._isAvailable())return yn});return function(yn){return Qt.apply(this,arguments)}}()))).filter(Qt=>Qt);let J=$[0]||jr(ti);const me=_e(T,m.config.apiKey,m.name);let Xe=null;for(const Qt of y)try{const yn=yield Qt._get(me);if(yn){const Dn=qn._fromJSON(m,yn);Qt!==J&&(Xe=Dn),J=Qt;break}}catch{}const kt=$.filter(Qt=>Qt._shouldAllowMigration);return J._shouldAllowMigration&&kt.length?(J=kt[0],Xe&&(yield J._set(me,Xe.toJSON())),yield Promise.all(y.map(function(){var Qt=(0,w.Z)(function*(yn){if(yn!==J)try{yield yn._remove(me)}catch{}});return function(yn){return Qt.apply(this,arguments)}}())),new fe(J,m,T)):new fe(J,m,T)})()}}function ke(C){const m=C.toLowerCase();if(m.includes("opera/")||m.includes("opr/")||m.includes("opios/"))return"Opera";if(vn(m))return"IEMobile";if(m.includes("msie")||m.includes("trident/"))return"IE";if(m.includes("edge/"))return"Edge";if(rt(m))return"Firefox";if(m.includes("silk/"))return"Silk";if(mr(m))return"Blackberry";if(de(m))return"Webos";if($e(m))return"Safari";if((m.includes("chrome/")||Gt(m))&&!m.includes("edge/"))return"Chrome";if(Ln(m))return"Android";{const T=C.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===T?.length)return T[1]}return"Other"}function rt(C=(0,X.z$)()){return/firefox\//i.test(C)}function $e(C=(0,X.z$)()){const m=C.toLowerCase();return m.includes("safari/")&&!m.includes("chrome/")&&!m.includes("crios/")&&!m.includes("android")}function Gt(C=(0,X.z$)()){return/crios\//i.test(C)}function vn(C=(0,X.z$)()){return/iemobile/i.test(C)}function Ln(C=(0,X.z$)()){return/android/i.test(C)}function mr(C=(0,X.z$)()){return/blackberry/i.test(C)}function de(C=(0,X.z$)()){return/webos/i.test(C)}function ue(C=(0,X.z$)()){return/iphone|ipad|ipod/i.test(C)||/macintosh/i.test(C)&&/mobile/i.test(C)}function sn(C=(0,X.z$)()){return ue(C)||Ln(C)||de(C)||mr(C)||/windows phone/i.test(C)||vn(C)}function He(C,m=[]){let y;switch(C){case"Browser":y=ke((0,X.z$)());break;case"Worker":y=`${ke((0,X.z$)())}-${C}`;break;default:y=C}const T=m.length?m.join(","):"FirebaseCore-web";return`${y}/JsCore/${Re.SDK_VERSION}/${T}`}function St(){return(St=(0,w.Z)(function*(C){return(yield et(C,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pt(C,m){return In.apply(this,arguments)}function In(){return(In=(0,w.Z)(function*(C,m){return et(C,"GET","/v2/recaptchaConfig",gt(C,m))})).apply(this,arguments)}function bn(C){return void 0!==C&&void 0!==C.getResponse}function yr(C){return void 0!==C&&void 0!==C.enterprise}class oi{constructor(m){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===m.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=m.recaptchaKey.split("/")[3],this.emailPasswordEnabled=m.recaptchaEnforcementState.some(y=>"EMAIL_PASSWORD_PROVIDER"===y.provider&&"OFF"!==y.enforcementState)}}function Ii(C){return new Promise((m,y)=>{const T=document.createElement("script");T.setAttribute("src",C),T.onload=m,T.onerror=$=>{const J=Fe("internal-error");J.customData=$,y(J)},T.type="text/javascript",T.charset="UTF-8",function ur(){var C,m;return null!==(m=null===(C=document.getElementsByTagName("head"))||void 0===C?void 0:C[0])&&void 0!==m?m:document}().appendChild(T)})}function ji(C){return`__${C}${Math.floor(1e6*Math.random())}`}class xr{constructor(m){this.type="recaptcha-enterprise",this.auth=Gr(m)}verify(m="verify",y=!1){var T=this;return(0,w.Z)(function*(){function J(){return J=(0,w.Z)(function*(Xe){if(!y){if(null==Xe.tenantId&&null!=Xe._agentRecaptchaConfig)return Xe._agentRecaptchaConfig.siteKey;if(null!=Xe.tenantId&&void 0!==Xe._tenantRecaptchaConfigs[Xe.tenantId])return Xe._tenantRecaptchaConfigs[Xe.tenantId].siteKey}return new Promise(function(){var kt=(0,w.Z)(function*(Qt,yn){Pt(Xe,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(Dn=>{if(void 0!==Dn.recaptchaKey){const os=new oi(Dn);return null==Xe.tenantId?Xe._agentRecaptchaConfig=os:Xe._tenantRecaptchaConfigs[Xe.tenantId]=os,Qt(os.siteKey)}yn(new Error("recaptcha Enterprise site key undefined"))}).catch(Dn=>{yn(Dn)})});return function(Qt,yn){return kt.apply(this,arguments)}}())}),J.apply(this,arguments)}function me(Xe,kt,Qt){const yn=window.grecaptcha;yr(yn)?yn.enterprise.ready(()=>{yn.enterprise.execute(Xe,{action:m}).then(Dn=>{kt(Dn)}).catch(()=>{kt("NO_RECAPTCHA")})}):Qt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Xe,kt)=>{(function $(Xe){return J.apply(this,arguments)})(T.auth).then(Qt=>{if(!y&&yr(window.grecaptcha))me(Qt,Xe,kt);else{if(typeof window>"u")return void kt(new Error("RecaptchaVerifier is only supported in browser"));Ii("https://www.google.com/recaptcha/enterprise.js?render="+Qt).then(()=>{me(Qt,Xe,kt)}).catch(yn=>{kt(yn)})}}).catch(Qt=>{kt(Qt)})})})()}}function _s(C,m,y){return go.apply(this,arguments)}function go(){return(go=(0,w.Z)(function*(C,m,y,T=!1){const $=new xr(C);let J;try{J=yield $.verify(y)}catch{J=yield $.verify(y,!0)}const me=Object.assign({},m);return Object.assign(me,T?{captchaResp:J}:{captchaResponse:J}),Object.assign(me,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(me,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),me})).apply(this,arguments)}class vs{constructor(m){this.auth=m,this.queue=[]}pushCallback(m,y){const T=J=>new Promise((me,Xe)=>{try{me(m(J))}catch(kt){Xe(kt)}});T.onAbort=y,this.queue.push(T);const $=this.queue.length-1;return()=>{this.queue[$]=()=>Promise.resolve()}}runMiddleware(m){var y=this;return(0,w.Z)(function*(){if(y.auth.currentUser===m)return;const T=[];try{for(const $ of y.queue)yield $(m),$.onAbort&&T.push($.onAbort)}catch($){T.reverse();for(const J of T)try{J()}catch{}throw y.auth._errorFactory.create("login-blocked",{originalMessage:$?.message})}})()}}class Ao{constructor(m,y,T,$){this.app=m,this.heartbeatServiceProvider=y,this.appCheckServiceProvider=T,this.config=$,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new to(this),this.idTokenSubscription=new to(this),this.beforeStateQueue=new vs(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=pt,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=m.name,this.clientVersion=$.sdkClientVersion}_initializeWithPersistence(m,y){var T=this;return y&&(this._popupRedirectResolver=jr(y)),this._initializationPromise=this.queue((0,w.Z)(function*(){var $,J;if(!T._deleted&&(T.persistenceManager=yield fe.create(T,m),!T._deleted)){if(null!==($=T._popupRedirectResolver)&&void 0!==$&&$._shouldInitProactively)try{yield T._popupRedirectResolver._initialize(T)}catch{}yield T.initializeCurrentUser(y),T.lastNotifiedUid=(null===(J=T.currentUser)||void 0===J?void 0:J.uid)||null,!T._deleted&&(T._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var m=this;return(0,w.Z)(function*(){if(m._deleted)return;const y=yield m.assertedPersistence.getCurrentUser();if(m.currentUser||y){if(m.currentUser&&y&&m.currentUser.uid===y.uid)return m._currentUser._assign(y),void(yield m.currentUser.getIdToken());yield m._updateCurrentUser(y,!0)}})()}initializeCurrentUser(m){var y=this;return(0,w.Z)(function*(){var T;const $=yield y.assertedPersistence.getCurrentUser();let J=$,me=!1;if(m&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const Xe=null===(T=y.redirectUser)||void 0===T?void 0:T._redirectEventId,kt=J?._redirectEventId,Qt=yield y.tryRedirectSignIn(m);(!Xe||Xe===kt)&&Qt?.user&&(J=Qt.user,me=!0)}if(!J)return y.directlySetCurrentUser(null);if(!J._redirectEventId){if(me)try{yield y.beforeStateQueue.runMiddleware(J)}catch(Xe){J=$,y._popupRedirectResolver._overrideRedirectResult(y,()=>Promise.reject(Xe))}return J?y.reloadAndSetCurrentUserOrClear(J):y.directlySetCurrentUser(null)}return Oe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===J._redirectEventId?y.directlySetCurrentUser(J):y.reloadAndSetCurrentUserOrClear(J)})()}tryRedirectSignIn(m){var y=this;return(0,w.Z)(function*(){let T=null;try{T=yield y._popupRedirectResolver._completeRedirectFn(y,m,!0)}catch{yield y._setRedirectUser(null)}return T})()}reloadAndSetCurrentUserOrClear(m){var y=this;return(0,w.Z)(function*(){try{yield wn(m)}catch(T){if("auth/network-request-failed"!==T?.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(m)})()}useDeviceLanguage(){this.languageCode=function kn(){if(typeof navigator>"u")return null;const C=navigator;return C.languages&&C.languages[0]||C.language||null}()}_delete(){var m=this;return(0,w.Z)(function*(){m._deleted=!0})()}updateCurrentUser(m){var y=this;return(0,w.Z)(function*(){const T=m?(0,X.m9)(m):null;return T&&Oe(T.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(T&&T._clone(y))})()}_updateCurrentUser(m,y=!1){var T=this;return(0,w.Z)(function*(){if(!T._deleted)return m&&Oe(T.tenantId===m.tenantId,T,"tenant-id-mismatch"),y||(yield T.beforeStateQueue.runMiddleware(m)),T.queue((0,w.Z)(function*(){yield T.directlySetCurrentUser(m),T.notifyAuthListeners()}))})()}signOut(){var m=this;return(0,w.Z)(function*(){return yield m.beforeStateQueue.runMiddleware(null),(m.redirectPersistenceManager||m._popupRedirectResolver)&&(yield m._setRedirectUser(null)),m._updateCurrentUser(null,!0)})()}setPersistence(m){var y=this;return this.queue((0,w.Z)(function*(){yield y.assertedPersistence.setPersistence(jr(m))}))}initializeRecaptchaConfig(){var m=this;return(0,w.Z)(function*(){const y=yield Pt(m,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),T=new oi(y);null==m.tenantId?m._agentRecaptchaConfig=T:m._tenantRecaptchaConfigs[m.tenantId]=T,T.emailPasswordEnabled&&new xr(m).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(m){this._errorFactory=new X.LL("auth","Firebase",m())}onAuthStateChanged(m,y,T){return this.registerStateListener(this.authStateSubscription,m,y,T)}beforeAuthStateChanged(m,y){return this.beforeStateQueue.pushCallback(m,y)}onIdTokenChanged(m,y,T){return this.registerStateListener(this.idTokenSubscription,m,y,T)}toJSON(){var m;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(m=this._currentUser)||void 0===m?void 0:m.toJSON()}}_setRedirectUser(m,y){var T=this;return(0,w.Z)(function*(){const $=yield T.getOrInitRedirectPersistenceManager(y);return null===m?$.removeCurrentUser():$.setCurrentUser(m)})()}getOrInitRedirectPersistenceManager(m){var y=this;return(0,w.Z)(function*(){if(!y.redirectPersistenceManager){const T=m&&jr(m)||y._popupRedirectResolver;Oe(T,y,"argument-error"),y.redirectPersistenceManager=yield fe.create(y,[jr(T._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(m){var y=this;return(0,w.Z)(function*(){var T,$;return y._isInitialized&&(yield y.queue((0,w.Z)(function*(){}))),(null===(T=y._currentUser)||void 0===T?void 0:T._redirectEventId)===m?y._currentUser:(null===($=y.redirectUser)||void 0===$?void 0:$._redirectEventId)===m?y.redirectUser:null})()}_persistUserIfCurrent(m){var y=this;return(0,w.Z)(function*(){if(m===y.currentUser)return y.queue((0,w.Z)(function*(){return y.directlySetCurrentUser(m)}))})()}_notifyListenersIfCurrent(m){m===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var m,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const T=null!==(y=null===(m=this.currentUser)||void 0===m?void 0:m.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==T&&(this.lastNotifiedUid=T,this.authStateSubscription.next(this.currentUser))}registerStateListener(m,y,T,$){if(this._deleted)return()=>{};const J="function"==typeof y?y:y.next.bind(y),me=this._isInitialized?Promise.resolve():this._initializationPromise;return Oe(me,this,"internal-error"),me.then(()=>J(this.currentUser)),"function"==typeof y?m.addObserver(y,T,$):m.addObserver(y)}directlySetCurrentUser(m){var y=this;return(0,w.Z)(function*(){y.currentUser&&y.currentUser!==m&&y._currentUser._stopProactiveRefresh(),m&&y.isProactiveRefreshEnabled&&m._startProactiveRefresh(),y.currentUser=m,m?yield y.assertedPersistence.setCurrentUser(m):yield y.assertedPersistence.removeCurrentUser()})()}queue(m){return this.operations=this.operations.then(m,m),this.operations}get assertedPersistence(){return Oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(m){!m||this.frameworks.includes(m)||(this.frameworks.push(m),this.frameworks.sort(),this.clientVersion=He(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var m=this;return(0,w.Z)(function*(){var y;const T={"X-Client-Version":m.clientVersion};m.app.options.appId&&(T["X-Firebase-gmpid"]=m.app.options.appId);const $=yield null===(y=m.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();$&&(T["X-Firebase-Client"]=$);const J=yield m._getAppCheckToken();return J&&(T["X-Firebase-AppCheck"]=J),T})()}_getAppCheckToken(){var m=this;return(0,w.Z)(function*(){var y;const T=yield null===(y=m.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getToken();return T?.error&&function an(C,...m){Ue.logLevel<=Ne.in.WARN&&Ue.warn(`Auth (${Re.SDK_VERSION}): ${C}`,...m)}(`Error while retrieving App Check token: ${T.error}`),T?.token})()}}function Gr(C){return(0,X.m9)(C)}class to{constructor(m){this.auth=m,this.observer=null,this.addObserver=(0,X.ne)(y=>this.observer=y)}get next(){return Oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Xr(C){const m=C.indexOf(":");return m<0?"":C.substr(0,m+1)}function Qi(C){if(!C)return null;const m=Number(C);return isNaN(m)?null:m}class Es{constructor(m,y){this.providerId=m,this.signInMethod=y}toJSON(){return Mt("not implemented")}_getIdTokenResponse(m){return Mt("not implemented")}_linkToIdToken(m,y){return Mt("not implemented")}_getReauthenticationResolver(m){return Mt("not implemented")}}function Ai(C,m){return ci.apply(this,arguments)}function ci(){return(ci=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:resetPassword",gt(C,m))})).apply(this,arguments)}function Ro(C,m){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Mo(C,m){return ru.apply(this,arguments)}function ru(){return(ru=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:update",gt(C,m))})).apply(this,arguments)}function Yr(C,m){return za.apply(this,arguments)}function za(){return(za=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signInWithPassword",gt(C,m))})).apply(this,arguments)}function Sa(C,m){return xo.apply(this,arguments)}function xo(){return(xo=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:sendOobCode",gt(C,m))})).apply(this,arguments)}function Le(C,m){return xe.apply(this,arguments)}function xe(){return(xe=(0,w.Z)(function*(C,m){return Sa(C,m)})).apply(this,arguments)}function Je(C,m){return wt.apply(this,arguments)}function wt(){return(wt=(0,w.Z)(function*(C,m){return Sa(C,m)})).apply(this,arguments)}function Ft(C,m){return On.apply(this,arguments)}function On(){return(On=(0,w.Z)(function*(C,m){return Sa(C,m)})).apply(this,arguments)}function Ir(C,m){return Tr.apply(this,arguments)}function Tr(){return(Tr=(0,w.Z)(function*(C,m){return Sa(C,m)})).apply(this,arguments)}function nr(){return(nr=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signInWithEmailLink",gt(C,m))})).apply(this,arguments)}function Cn(){return(Cn=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signInWithEmailLink",gt(C,m))})).apply(this,arguments)}class cs extends Es{constructor(m,y,T,$=null){super("password",T),this._email=m,this._password=y,this._tenantId=$}static _fromEmailAndPassword(m,y){return new cs(m,y,"password")}static _fromEmailAndCode(m,y,T=null){return new cs(m,y,"emailLink",T)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m;if(y?.email&&y?.password){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(m){var y=this;return(0,w.Z)(function*(){var T;switch(y.signInMethod){case"password":const $={returnSecureToken:!0,email:y._email,password:y._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=m._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const J=yield _s(m,$,"signInWithPassword");return Yr(m,J)}return Yr(m,$).catch(function(){var J=(0,w.Z)(function*(me){if("auth/missing-recaptcha-token"===me.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Xe=yield _s(m,$,"signInWithPassword");return Yr(m,Xe)}return Promise.reject(me)});return function(me){return J.apply(this,arguments)}}());case"emailLink":return function Sr(C,m){return nr.apply(this,arguments)}(m,{email:y._email,oobCode:y._password});default:De(m,"internal-error")}})()}_linkToIdToken(m,y){var T=this;return(0,w.Z)(function*(){switch(T.signInMethod){case"password":return Ro(m,{idToken:y,returnSecureToken:!0,email:T._email,password:T._password});case"emailLink":return function dr(C,m){return Cn.apply(this,arguments)}(m,{idToken:y,email:T._email,oobCode:T._password});default:De(m,"internal-error")}})()}_getReauthenticationResolver(m){return this._getIdTokenResponse(m)}}function pr(C,m){return ds.apply(this,arguments)}function ds(){return(ds=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signInWithIdp",gt(C,m))})).apply(this,arguments)}class ai extends Es{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(m){const y=new ai(m.providerId,m.signInMethod);return m.idToken||m.accessToken?(m.idToken&&(y.idToken=m.idToken),m.accessToken&&(y.accessToken=m.accessToken),m.nonce&&!m.pendingToken&&(y.nonce=m.nonce),m.pendingToken&&(y.pendingToken=m.pendingToken)):m.oauthToken&&m.oauthTokenSecret?(y.accessToken=m.oauthToken,y.secret=m.oauthTokenSecret):De("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:$}=y,J=(0,Ce._T)(y,["providerId","signInMethod"]);if(!T||!$)return null;const me=new ai(T,$);return me.idToken=J.idToken||void 0,me.accessToken=J.accessToken||void 0,me.secret=J.secret,me.nonce=J.nonce,me.pendingToken=J.pendingToken||null,me}_getIdTokenResponse(m){return pr(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,pr(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,pr(m,y)}buildRequest(){const m={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)m.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),m.postBody=(0,X.xO)(y)}return m}}function mo(C,m){return Pr.apply(this,arguments)}function Pr(){return(Pr=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:sendVerificationCode",gt(C,m))})).apply(this,arguments)}function Li(){return(Li=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signInWithPhoneNumber",gt(C,m))})).apply(this,arguments)}function No(){return(No=(0,w.Z)(function*(C,m){const y=yield un(C,"POST","/v1/accounts:signInWithPhoneNumber",gt(C,m));if(y.temporaryProof)throw Xn(C,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const qi={USER_NOT_FOUND:"user-not-found"};function Ci(){return(Ci=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signInWithPhoneNumber",gt(C,Object.assign(Object.assign({},m),{operation:"REAUTH"})),qi)})).apply(this,arguments)}class Kr extends Es{constructor(m){super("phone","phone"),this.params=m}static _fromVerification(m,y){return new Kr({verificationId:m,verificationCode:y})}static _fromTokenResponse(m,y){return new Kr({phoneNumber:m,temporaryProof:y})}_getIdTokenResponse(m){return function Gn(C,m){return Li.apply(this,arguments)}(m,this._makeVerificationRequest())}_linkToIdToken(m,y){return function xl(C,m){return No.apply(this,arguments)}(m,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(m){return function hl(C,m){return Ci.apply(this,arguments)}(m,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:m,phoneNumber:y,verificationId:T,verificationCode:$}=this.params;return m&&y?{temporaryProof:m,phoneNumber:y}:{sessionInfo:T,code:$}}toJSON(){const m={providerId:this.providerId};return this.params.phoneNumber&&(m.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(m.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(m.verificationCode=this.params.verificationCode),this.params.verificationId&&(m.verificationId=this.params.verificationId),m}static fromJSON(m){"string"==typeof m&&(m=JSON.parse(m));const{verificationId:y,verificationCode:T,phoneNumber:$,temporaryProof:J}=m;return T||y||$||J?new Kr({verificationId:y,verificationCode:T,phoneNumber:$,temporaryProof:J}):null}}class yo{constructor(m){var y,T,$,J,me,Xe;const kt=(0,X.zd)((0,X.pd)(m)),Qt=null!==(y=kt.apiKey)&&void 0!==y?y:null,yn=null!==(T=kt.oobCode)&&void 0!==T?T:null,Dn=function Ka(C){switch(C){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==($=kt.mode)&&void 0!==$?$:null);Oe(Qt&&yn&&Dn,"argument-error"),this.apiKey=Qt,this.operation=Dn,this.code=yn,this.continueUrl=null!==(J=kt.continueUrl)&&void 0!==J?J:null,this.languageCode=null!==(me=kt.languageCode)&&void 0!==me?me:null,this.tenantId=null!==(Xe=kt.tenantId)&&void 0!==Xe?Xe:null}static parseLink(m){const y=function zs(C){const m=(0,X.zd)((0,X.pd)(C)).link,y=m?(0,X.zd)((0,X.pd)(m)).deep_link_id:null,T=(0,X.zd)((0,X.pd)(C)).deep_link_id;return(T?(0,X.zd)((0,X.pd)(T)).link:null)||T||y||m||C}(m);try{return new yo(y)}catch{return null}}}let mi=(()=>{class C{constructor(){this.providerId=C.PROVIDER_ID}static credential(y,T){return cs._fromEmailAndPassword(y,T)}static credentialWithLink(y,T){const $=yo.parseLink(T);return Oe($,"argument-error"),cs._fromEmailAndCode(y,$.code,$.tenantId)}}return C.PROVIDER_ID="password",C.EMAIL_PASSWORD_SIGN_IN_METHOD="password",C.EMAIL_LINK_SIGN_IN_METHOD="emailLink",C})();class Ji{constructor(m){this.providerId=m,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(m){this.defaultLanguageCode=m}setCustomParameters(m){return this.customParameters=m,this}getCustomParameters(){return this.customParameters}}class _o extends Ji{constructor(){super(...arguments),this.scopes=[]}addScope(m){return this.scopes.includes(m)||this.scopes.push(m),this}getScopes(){return[...this.scopes]}}class Vs extends _o{static credentialFromJSON(m){const y="string"==typeof m?JSON.parse(m):m;return Oe("providerId"in y&&"signInMethod"in y,"argument-error"),ai._fromParams(y)}credential(m){return this._credential(Object.assign(Object.assign({},m),{nonce:m.rawNonce}))}_credential(m){return Oe(m.idToken||m.accessToken,"argument-error"),ai._fromParams(Object.assign(Object.assign({},m),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(m){return Vs.oauthCredentialFromTaggedObject(m)}static credentialFromError(m){return Vs.oauthCredentialFromTaggedObject(m.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{oauthIdToken:y,oauthAccessToken:T,oauthTokenSecret:$,pendingToken:J,nonce:me,providerId:Xe}=m;if(!T&&!$&&!y&&!J||!Xe)return null;try{return new Vs(Xe)._credential({idToken:y,accessToken:T,nonce:me,pendingToken:J})}catch{return null}}}let Vi=(()=>{class C extends _o{constructor(){super("facebook.com")}static credential(y){return ai._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.FACEBOOK_SIGN_IN_METHOD="facebook.com",C.PROVIDER_ID="facebook.com",C})(),Us=(()=>{class C extends _o{constructor(){super("google.com"),this.addScope("profile")}static credential(y,T){return ai._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:T})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:T,oauthAccessToken:$}=y;if(!T&&!$)return null;try{return C.credential(T,$)}catch{return null}}}return C.GOOGLE_SIGN_IN_METHOD="google.com",C.PROVIDER_ID="google.com",C})(),Ws=(()=>{class C extends _o{constructor(){super("github.com")}static credential(y){return ai._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return C.credential(y.oauthAccessToken)}catch{return null}}}return C.GITHUB_SIGN_IN_METHOD="github.com",C.PROVIDER_ID="github.com",C})();class yi extends Es{constructor(m,y){super(m,m),this.pendingToken=y}_getIdTokenResponse(m){return pr(m,this.buildRequest())}_linkToIdToken(m,y){const T=this.buildRequest();return T.idToken=y,pr(m,T)}_getReauthenticationResolver(m){const y=this.buildRequest();return y.autoCreate=!1,pr(m,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(m){const y="string"==typeof m?JSON.parse(m):m,{providerId:T,signInMethod:$,pendingToken:J}=y;return T&&$&&J&&T===$?new yi(T,J):null}static _create(m,y){return new yi(m,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class hs extends Ji{constructor(m){Oe(m.startsWith("saml."),"argument-error"),super(m)}static credentialFromResult(m){return hs.samlCredentialFromTaggedObject(m)}static credentialFromError(m){return hs.samlCredentialFromTaggedObject(m.customData||{})}static credentialFromJSON(m){const y=yi.fromJSON(m);return Oe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:m}){if(!m)return null;const{pendingToken:y,providerId:T}=m;if(!y||!T)return null;try{return yi._create(T,y)}catch{return null}}}let Ks=(()=>{class C extends _o{constructor(){super("twitter.com")}static credential(y,T){return ai._fromParams({providerId:C.PROVIDER_ID,signInMethod:C.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:T})}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:T,oauthTokenSecret:$}=y;if(!T||!$)return null;try{return C.credential(T,$)}catch{return null}}}return C.TWITTER_SIGN_IN_METHOD="twitter.com",C.PROVIDER_ID="twitter.com",C})();function Hi(C,m){return $i.apply(this,arguments)}function $i(){return($i=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signUp",gt(C,m))})).apply(this,arguments)}class Ui{constructor(m){this.user=m.user,this.providerId=m.providerId,this._tokenResponse=m._tokenResponse,this.operationType=m.operationType}static _fromIdTokenResponse(m,y,T,$=!1){return(0,w.Z)(function*(){const J=yield qn._fromIdTokenResponse(m,T,$),me=fn(T);return new Ui({user:J,providerId:me,_tokenResponse:T,operationType:y})})()}static _forOperation(m,y,T){return(0,w.Z)(function*(){yield m._updateTokensIfNecessary(T,!0);const $=fn(T);return new Ui({user:m,providerId:$,_tokenResponse:T,operationType:y})})()}}function fn(C){return C.providerId?C.providerId:"phoneNumber"in C?"phone":null}function Aa(){return(Aa=(0,w.Z)(function*(C){var m;const y=Gr(C);if(yield y._initializationPromise,null!==(m=y.currentUser)&&void 0!==m&&m.isAnonymous)return new Ui({user:y.currentUser,providerId:null,operationType:"signIn"});const T=yield Hi(y,{returnSecureToken:!0}),$=yield Ui._fromIdTokenResponse(y,"signIn",T,!0);return yield y._updateCurrentUser($.user),$})).apply(this,arguments)}class la extends X.ZR{constructor(m,y,T,$){var J;super(y.code,y.message),this.operationType=T,this.user=$,Object.setPrototypeOf(this,la.prototype),this.customData={appName:m.name,tenantId:null!==(J=m.tenantId)&&void 0!==J?J:void 0,_serverResponse:y.customData._serverResponse,operationType:T}}static _fromErrorAndOperation(m,y,T,$){return new la(m,y,T,$)}}function Ra(C,m,y,T){return("reauthenticate"===m?y._getReauthenticationResolver(C):y._getIdTokenResponse(C)).catch(J=>{throw"auth/multi-factor-auth-required"===J.code?la._fromErrorAndOperation(C,J,m,T):J})}function ws(C){return new Set(C.map(({providerId:m})=>m).filter(m=>!!m))}function Xi(){return(Xi=(0,w.Z)(function*(C,m){const y=(0,X.m9)(C);yield rr(!0,y,m);const{providerUserInfo:T}=yield kr(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[m]}),$=ws(T||[]);return y.providerData=y.providerData.filter(J=>$.has(J.providerId)),$.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function Po(C,m){return xt.apply(this,arguments)}function xt(){return(xt=(0,w.Z)(function*(C,m,y=!1){const T=yield he(C,m._linkToIdToken(C.auth,yield C.getIdToken()),y);return Ui._forOperation(C,"link",T)})).apply(this,arguments)}function rr(C,m,y){return ca.apply(this,arguments)}function ca(){return(ca=(0,w.Z)(function*(C,m,y){yield wn(m);const $=!1===C?"provider-already-linked":"no-such-provider";Oe(ws(m.providerData).has(y)===C,m.auth,$)})).apply(this,arguments)}function fl(C,m){return Di.apply(this,arguments)}function Di(){return(Di=(0,w.Z)(function*(C,m,y=!1){const{auth:T}=C,$="reauthenticate";try{const J=yield he(C,Ra(T,$,m,C),y);Oe(J.idToken,T,"internal-error");const me=Qe(J.idToken);Oe(me,T,"internal-error");const{sub:Xe}=me;return Oe(C.uid===Xe,T,"user-mismatch"),Ui._forOperation(C,$,J)}catch(J){throw"auth/user-not-found"===J?.code&&De(T,"user-mismatch"),J}})).apply(this,arguments)}function Ar(C,m){return Ns.apply(this,arguments)}function Ns(){return(Ns=(0,w.Z)(function*(C,m,y=!1){const T="signIn",$=yield Ra(C,T,m),J=yield Ui._fromIdTokenResponse(C,T,$);return y||(yield C._updateCurrentUser(J.user)),J})).apply(this,arguments)}function es(C,m){return no.apply(this,arguments)}function no(){return(no=(0,w.Z)(function*(C,m){return Ar(Gr(C),m)})).apply(this,arguments)}function Oo(C,m){return Is.apply(this,arguments)}function Is(){return(Is=(0,w.Z)(function*(C,m){const y=(0,X.m9)(C);return yield rr(!1,y,m.providerId),Po(y,m)})).apply(this,arguments)}function Fr(C,m){return H.apply(this,arguments)}function H(){return(H=(0,w.Z)(function*(C,m){return fl((0,X.m9)(C),m)})).apply(this,arguments)}function V(C,m){return L.apply(this,arguments)}function L(){return(L=(0,w.Z)(function*(C,m){return un(C,"POST","/v1/accounts:signInWithCustomToken",gt(C,m))})).apply(this,arguments)}function lt(){return(lt=(0,w.Z)(function*(C,m){const y=Gr(C),T=yield V(y,{token:m,returnSecureToken:!0}),$=yield Ui._fromIdTokenResponse(y,"signIn",T);return yield y._updateCurrentUser($.user),$})).apply(this,arguments)}class Lt{constructor(m,y){this.factorId=m,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(m,y){return"phoneInfo"in y?_r._fromServerResponse(m,y):"totpInfo"in y?Cs._fromServerResponse(m,y):De(m,"internal-error")}}class _r extends Lt{constructor(m){super("phone",m),this.phoneNumber=m.phoneInfo}static _fromServerResponse(m,y){return new _r(y)}}class Cs extends Lt{constructor(m){super("totp",m)}static _fromServerResponse(m,y){return new Cs(y)}}function Gi(C,m,y){var T;Oe((null===(T=y.url)||void 0===T?void 0:T.length)>0,C,"invalid-continue-uri"),Oe(typeof y.dynamicLinkDomain>"u"||y.dynamicLinkDomain.length>0,C,"invalid-dynamic-link-domain"),m.continueUrl=y.url,m.dynamicLinkDomain=y.dynamicLinkDomain,m.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(Oe(y.iOS.bundleId.length>0,C,"missing-ios-bundle-id"),m.iOSBundleId=y.iOS.bundleId),y.android&&(Oe(y.android.packageName.length>0,C,"missing-android-pkg-name"),m.androidInstallApp=y.android.installApp,m.androidMinimumVersionCode=y.android.minimumVersion,m.androidPackageName=y.android.packageName)}function Ds(){return Ds=(0,w.Z)(function*(C,m,y){var T;const $=Gr(C),J={requestType:"PASSWORD_RESET",email:m,clientType:"CLIENT_TYPE_WEB"};if(null!==(T=$._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const me=yield _s($,J,"getOobCode",!0);y&&Gi($,me,y),yield Je($,me)}else y&&Gi($,J,y),yield Je($,J).catch(function(){var me=(0,w.Z)(function*(Xe){if("auth/missing-recaptcha-token"!==Xe.code)return Promise.reject(Xe);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const kt=yield _s($,J,"getOobCode",!0);y&&Gi($,kt,y),yield Je($,kt)}});return function(Xe){return me.apply(this,arguments)}}())}),Ds.apply(this,arguments)}function Eo(){return(Eo=(0,w.Z)(function*(C,m,y){yield Ai((0,X.m9)(C),{oobCode:m,newPassword:y})})).apply(this,arguments)}function fs(){return(fs=(0,w.Z)(function*(C,m){yield Mo((0,X.m9)(C),{oobCode:m})})).apply(this,arguments)}function da(C,m){return ha.apply(this,arguments)}function ha(){return(ha=(0,w.Z)(function*(C,m){const y=(0,X.m9)(C),T=yield Ai(y,{oobCode:m}),$=T.requestType;switch(Oe($,y,"internal-error"),$){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Oe(T.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Oe(T.mfaInfo,y,"internal-error");default:Oe(T.email,y,"internal-error")}let J=null;return T.mfaInfo&&(J=Lt._fromServerResponse(Gr(y),T.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.newEmail:T.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===T.requestType?T.email:T.newEmail)||null,multiFactorInfo:J},operation:$}})).apply(this,arguments)}function pa(){return(pa=(0,w.Z)(function*(C,m){const{data:y}=yield da((0,X.m9)(C),m);return y.email})).apply(this,arguments)}function pl(){return pl=(0,w.Z)(function*(C,m,y){var T;const $=Gr(C),J={returnSecureToken:!0,email:m,password:y,clientType:"CLIENT_TYPE_WEB"};let me;if(null!==(T=$._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const Qt=yield _s($,J,"signUpPassword");me=Hi($,Qt)}else me=Hi($,J).catch(function(){var Qt=(0,w.Z)(function*(yn){if("auth/missing-recaptcha-token"===yn.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const Dn=yield _s($,J,"signUpPassword");return Hi($,Dn)}return Promise.reject(yn)});return function(yn){return Qt.apply(this,arguments)}}());const Xe=yield me.catch(Qt=>Promise.reject(Qt)),kt=yield Ui._fromIdTokenResponse($,"signIn",Xe);return yield $._updateCurrentUser(kt.user),kt}),pl.apply(this,arguments)}function ma(){return ma=(0,w.Z)(function*(C,m,y){var T;const $=Gr(C),J={requestType:"EMAIL_SIGNIN",email:m,clientType:"CLIENT_TYPE_WEB"};function me(Xe,kt){Oe(kt.handleCodeInApp,$,"argument-error"),kt&&Gi($,Xe,kt)}if(null!==(T=$._getRecaptchaConfig())&&void 0!==T&&T.emailPasswordEnabled){const Xe=yield _s($,J,"getOobCode",!0);me(Xe,y),yield Ft($,Xe)}else me(J,y),yield Ft($,J).catch(function(){var Xe=(0,w.Z)(function*(kt){if("auth/missing-recaptcha-token"!==kt.code)return Promise.reject(kt);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Qt=yield _s($,J,"getOobCode",!0);me(Qt,y),yield Ft($,Qt)}});return function(kt){return Xe.apply(this,arguments)}}())}),ma.apply(this,arguments)}function ko(){return(ko=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C),$=mi.credentialWithLink(m,y||Kt());return Oe($._tenantId===(T.tenantId||null),T,"tenant-id-mismatch"),es(T,$)})).apply(this,arguments)}function di(C,m){return Qa.apply(this,arguments)}function Qa(){return(Qa=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:createAuthUri",gt(C,m))})).apply(this,arguments)}function qo(){return(qo=(0,w.Z)(function*(C,m){const T={identifier:m,continueUri:Ht()?Kt():"http://localhost"},{signinMethods:$}=yield di((0,X.m9)(C),T);return $||[]})).apply(this,arguments)}function Zo(){return(Zo=(0,w.Z)(function*(C,m){const y=(0,X.m9)(C),$={requestType:"VERIFY_EMAIL",idToken:yield C.getIdToken()};m&&Gi(y.auth,$,m);const{email:J}=yield Le(y.auth,$);J!==C.email&&(yield C.reload())})).apply(this,arguments)}function _a(){return(_a=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C),J={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield C.getIdToken(),newEmail:m};y&&Gi(T.auth,J,y);const{email:me}=yield Ir(T.auth,J);me!==C.email&&(yield C.reload())})).apply(this,arguments)}function Yo(C,m){return va.apply(this,arguments)}function va(){return(va=(0,w.Z)(function*(C,m){return et(C,"POST","/v1/accounts:update",m)})).apply(this,arguments)}function Ma(){return(Ma=(0,w.Z)(function*(C,{displayName:m,photoURL:y}){if(void 0===m&&void 0===y)return;const T=(0,X.m9)(C),J={idToken:yield T.getIdToken(),displayName:m,photoUrl:y,returnSecureToken:!0},me=yield he(T,Yo(T.auth,J));T.displayName=me.displayName||null,T.photoURL=me.photoUrl||null;const Xe=T.providerData.find(({providerId:kt})=>"password"===kt);Xe&&(Xe.displayName=T.displayName,Xe.photoURL=T.photoURL),yield T._updateTokensIfNecessary(me)})).apply(this,arguments)}function xa(C,m,y){return Zs.apply(this,arguments)}function Zs(){return(Zs=(0,w.Z)(function*(C,m,y){const{auth:T}=C,J={idToken:yield C.getIdToken(),returnSecureToken:!0};m&&(J.email=m),y&&(J.password=y);const me=yield he(C,Ro(T,J));yield C._updateTokensIfNecessary(me,!0)})).apply(this,arguments)}class Ri{constructor(m,y,T={}){this.isNewUser=m,this.providerId=y,this.profile=T}}class Ea extends Ri{constructor(m,y,T,$){super(m,y,T),this.username=$}}class Or extends Ri{constructor(m,y){super(m,"facebook.com",y)}}class N extends Ea{constructor(m,y){super(m,"github.com",y,"string"==typeof y?.login?y?.login:null)}}class K extends Ri{constructor(m,y){super(m,"google.com",y)}}class U extends Ea{constructor(m,y,T){super(m,"twitter.com",y,T)}}function te(C){const{user:m,_tokenResponse:y}=C;return m.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function bu(C){var m,y;if(!C)return null;const{providerId:T}=C,$=C.rawUserInfo?JSON.parse(C.rawUserInfo):{},J=C.isNewUser||"identitytoolkit#SignupNewUserResponse"===C.kind;if(!T&&C?.idToken){const me=null===(y=null===(m=Qe(C.idToken))||void 0===m?void 0:m.firebase)||void 0===y?void 0:y.sign_in_provider;if(me)return new Ri(J,"anonymous"!==me&&"custom"!==me?me:null)}if(!T)return null;switch(T){case"facebook.com":return new Or(J,$);case"github.com":return new N(J,$);case"google.com":return new K(J,$);case"twitter.com":return new U(J,$,C.screenName||null);case"custom":case"anonymous":return new Ri(J,null);default:return new Ri(J,T,$)}}(y)}class Wn{constructor(m,y,T){this.type=m,this.credential=y,this.auth=T}static _fromIdtoken(m,y){return new Wn("enroll",m,y)}static _fromMfaPendingCredential(m){return new Wn("signin",m)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(m){var y,T;if(m?.multiFactorSession){if(null!==(y=m.multiFactorSession)&&void 0!==y&&y.pendingCredential)return Wn._fromMfaPendingCredential(m.multiFactorSession.pendingCredential);if(null!==(T=m.multiFactorSession)&&void 0!==T&&T.idToken)return Wn._fromIdtoken(m.multiFactorSession.idToken)}return null}}class Ni{constructor(m,y,T){this.session=m,this.hints=y,this.signInResolver=T}static _fromError(m,y){const T=Gr(m),$=y.customData._serverResponse,J=($.mfaInfo||[]).map(Xe=>Lt._fromServerResponse(T,Xe));Oe($.mfaPendingCredential,T,"internal-error");const me=Wn._fromMfaPendingCredential($.mfaPendingCredential);return new Ni(me,J,function(){var Xe=(0,w.Z)(function*(kt){const Qt=yield kt._process(T,me);delete $.mfaInfo,delete $.mfaPendingCredential;const yn=Object.assign(Object.assign({},$),{idToken:Qt.idToken,refreshToken:Qt.refreshToken});switch(y.operationType){case"signIn":const Dn=yield Ui._fromIdTokenResponse(T,y.operationType,yn);return yield T._updateCurrentUser(Dn.user),Dn;case"reauthenticate":return Oe(y.user,T,"internal-error"),Ui._forOperation(y.user,y.operationType,yn);default:De(T,"internal-error")}});return function(kt){return Xe.apply(this,arguments)}}())}resolveSignIn(m){var y=this;return(0,w.Z)(function*(){return y.signInResolver(m)})()}}function io(C,m){return et(C,"POST","/v2/accounts/mfaEnrollment:start",gt(C,m))}class so{constructor(m){this.user=m,this.enrolledFactors=[],m._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(T=>Lt._fromServerResponse(m.auth,T)))})}static _fromUser(m){return new so(m)}getSession(){var m=this;return(0,w.Z)(function*(){return Wn._fromIdtoken(yield m.user.getIdToken(),m.user.auth)})()}enroll(m,y){var T=this;return(0,w.Z)(function*(){const $=m,J=yield T.getSession(),me=yield he(T.user,$._process(T.user.auth,J,y));return yield T.user._updateTokensIfNecessary(me),T.user.reload()})()}unenroll(m){var y=this;return(0,w.Z)(function*(){const T="string"==typeof m?m:m.uid,$=yield y.user.getIdToken();try{const J=yield he(y.user,function Nl(C,m){return et(C,"POST","/v2/accounts/mfaEnrollment:withdraw",gt(C,m))}(y.user.auth,{idToken:$,mfaEnrollmentId:T}));y.enrolledFactors=y.enrolledFactors.filter(({uid:me})=>me!==T),yield y.user._updateTokensIfNecessary(J),yield y.user.reload()}catch(J){throw J}})()}}const Ja=new WeakMap,ml="__sak";class Pl{constructor(m,y){this.storageRetriever=m,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(ml,"1"),this.storage.removeItem(ml),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(m,y){return this.storage.setItem(m,JSON.stringify(y)),Promise.resolve()}_get(m){const y=this.storage.getItem(m);return Promise.resolve(y?JSON.parse(y):null)}_remove(m){return this.storage.removeItem(m),Promise.resolve()}get storage(){return this.storageRetriever()}}const bs=(()=>{class C extends Pl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,T)=>this.onStorageEvent(y,T),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Xa(){const C=(0,X.z$)();return $e(C)||ue(C)}()&&function xn(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=sn(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const T of Object.keys(this.listeners)){const $=this.storage.getItem(T),J=this.localCache[T];$!==J&&y(T,J,$)}}onStorageEvent(y,T=!1){if(!y.key)return void this.forAllChangedKeys((Xe,kt,Qt)=>{this.notifyListeners(Xe,Qt)});const $=y.key;if(T?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Xe=this.storage.getItem($);if(y.newValue!==Xe)null!==y.newValue?this.storage.setItem($,y.newValue):this.storage.removeItem($);else if(this.localCache[$]===y.newValue&&!T)return}const J=()=>{const Xe=this.storage.getItem($);!T&&this.localCache[$]===Xe||this.notifyListeners($,Xe)},me=this.storage.getItem($);!function Ct(){return(0,X.w1)()&&10===document.documentMode}()||me===y.newValue||y.newValue===y.oldValue?J():setTimeout(J,10)}notifyListeners(y,T){this.localCache[y]=T;const $=this.listeners[y];if($)for(const J of Array.from($))J(T&&JSON.parse(T))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,T,$)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:T,newValue:$}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,T){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,T){var $=()=>super._set,J=this;return(0,w.Z)(function*(){yield $().call(J,y,T),J.localCache[y]=JSON.stringify(T)})()}_get(y){var T=()=>super._get,$=this;return(0,w.Z)(function*(){const J=yield T().call($,y);return $.localCache[y]=JSON.stringify(J),J})()}_remove(y){var T=()=>super._remove,$=this;return(0,w.Z)(function*(){yield T().call($,y),delete $.localCache[y]})()}}return C.type="LOCAL",C})(),Ol=(()=>{class C extends Pl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,T){}_removeListener(y,T){}}return C.type="SESSION",C})();let Pi=(()=>{class C{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const T=this.receivers.find(J=>J.isListeningto(y));if(T)return T;const $=new C(y);return this.receivers.push($),$}isListeningto(y){return this.eventTarget===y}handleEvent(y){var T=this;return(0,w.Z)(function*(){const $=y,{eventId:J,eventType:me,data:Xe}=$.data,kt=T.handlersMap[me];if(!kt?.size)return;$.ports[0].postMessage({status:"ack",eventId:J,eventType:me});const Qt=Array.from(kt).map(function(){var Dn=(0,w.Z)(function*(os){return os($.origin,Xe)});return function(os){return Dn.apply(this,arguments)}}()),yn=yield function Vt(C){return Promise.all(C.map(function(){var m=(0,w.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(T){return{fulfilled:!1,reason:T}}});return function(y){return m.apply(this,arguments)}}()))}(Qt);$.ports[0].postMessage({status:"done",eventId:J,eventType:me,response:yn})})()}_subscribe(y,T){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(T)}_unsubscribe(y,T){this.handlersMap[y]&&T&&this.handlersMap[y].delete(T),(!T||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return C.receivers=[],C})();function ps(C="",m=10){let y="";for(let T=0;T<m;T++)y+=Math.floor(10*Math.random());return C+y}class Pc{constructor(m){this.target=m,this.handlers=new Set}removeMessageHandler(m){m.messageChannel&&(m.messageChannel.port1.removeEventListener("message",m.onMessage),m.messageChannel.port1.close()),this.handlers.delete(m)}_send(m,y,T=50){var $=this;return(0,w.Z)(function*(){const J=typeof MessageChannel<"u"?new MessageChannel:null;if(!J)throw new Error("connection_unavailable");let me,Xe;return new Promise((kt,Qt)=>{const yn=ps("",20);J.port1.start();const Dn=setTimeout(()=>{Qt(new Error("unsupported_event"))},T);Xe={messageChannel:J,onMessage(os){const Va=os;if(Va.data.eventId===yn)switch(Va.data.status){case"ack":clearTimeout(Dn),me=setTimeout(()=>{Qt(new Error("timeout"))},3e3);break;case"done":clearTimeout(me),kt(Va.data.response);break;default:clearTimeout(Dn),clearTimeout(me),Qt(new Error("invalid_response"))}}},$.handlers.add(Xe),J.port1.addEventListener("message",Xe.onMessage),$.target.postMessage({eventType:m,eventId:yn,data:y},[J.port2])}).finally(()=>{Xe&&$.removeMessageHandler(Xe)})})()}}function Ot(){return window}function oc(){return typeof Ot().WorkerGlobalScope<"u"&&"function"==typeof Ot().importScripts}function at(){return(at=(0,w.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Jo="firebaseLocalStorageDb",kl="firebaseLocalStorage",el="fbase_key";class Fl{constructor(m){this.request=m}toPromise(){return new Promise((m,y)=>{this.request.addEventListener("success",()=>{m(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function Su(C,m){return C.transaction([kl],m?"readwrite":"readonly").objectStore(kl)}function ld(){const C=indexedDB.open(Jo,1);return new Promise((m,y)=>{C.addEventListener("error",()=>{y(C.error)}),C.addEventListener("upgradeneeded",()=>{const T=C.result;try{T.createObjectStore(kl,{keyPath:el})}catch($){y($)}}),C.addEventListener("success",(0,w.Z)(function*(){const T=C.result;T.objectStoreNames.contains(kl)?m(T):(T.close(),yield function ri(){const C=indexedDB.deleteDatabase(Jo);return new Fl(C).toPromise()}(),m(yield ld()))}))})}function Au(C,m,y){return Ll.apply(this,arguments)}function Ll(){return(Ll=(0,w.Z)(function*(C,m,y){const T=Su(C,!0).put({[el]:m,value:y});return new Fl(T).toPromise()})).apply(this,arguments)}function ir(){return(ir=(0,w.Z)(function*(C,m){const y=Su(C,!1).get(m),T=yield new Fl(y).toPromise();return void 0===T?null:T.value})).apply(this,arguments)}function Vl(C,m){const y=Su(C,!0).delete(m);return new Fl(y).toPromise()}const Na=(()=>{class C{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,w.Z)(function*(){return y.db||(y.db=yield ld()),y.db})()}_withRetries(y){var T=this;return(0,w.Z)(function*(){let $=0;for(;;)try{const J=yield T._openDb();return yield y(J)}catch(J){if($++>3)throw J;T.db&&(T.db.close(),T.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,w.Z)(function*(){return oc()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,w.Z)(function*(){y.receiver=Pi._getInstance(function vr(){return oc()?self:null}()),y.receiver._subscribe("keyChanged",function(){var T=(0,w.Z)(function*($,J){return{keyProcessed:(yield y._poll()).includes(J.key)}});return function($,J){return T.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var T=(0,w.Z)(function*($,J){return["keyChanged"]});return function($,J){return T.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,w.Z)(function*(){var T,$;if(y.activeServiceWorker=yield function nn(){return at.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new Pc(y.activeServiceWorker);const J=yield y.sender._send("ping",{},800);!J||(null===(T=J[0])||void 0===T?void 0:T.fulfilled)&&(null===($=J[0])||void 0===$?void 0:$.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var T=this;return(0,w.Z)(function*(){if(T.sender&&T.activeServiceWorker&&function Tt(){var C;return(null===(C=navigator?.serviceWorker)||void 0===C?void 0:C.controller)||null}()===T.activeServiceWorker)try{yield T.sender._send("keyChanged",{key:y},T.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,w.Z)(function*(){try{if(!indexedDB)return!1;const y=yield ld();return yield Au(y,ml,"1"),yield Vl(y,ml),!0}catch{}return!1})()}_withPendingWrite(y){var T=this;return(0,w.Z)(function*(){T.pendingWrites++;try{yield y()}finally{T.pendingWrites--}})()}_set(y,T){var $=this;return(0,w.Z)(function*(){return $._withPendingWrite((0,w.Z)(function*(){return yield $._withRetries(J=>Au(J,y,T)),$.localCache[y]=T,$.notifyServiceWorker(y)}))})()}_get(y){var T=this;return(0,w.Z)(function*(){const $=yield T._withRetries(J=>function Ru(C,m){return ir.apply(this,arguments)}(J,y));return T.localCache[y]=$,$})()}_remove(y){var T=this;return(0,w.Z)(function*(){return T._withPendingWrite((0,w.Z)(function*(){return yield T._withRetries($=>Vl($,y)),delete T.localCache[y],T.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,w.Z)(function*(){const T=yield y._withRetries(me=>{const Xe=Su(me,!1).getAll();return new Fl(Xe).toPromise()});if(!T)return[];if(0!==y.pendingWrites)return[];const $=[],J=new Set;for(const{fbase_key:me,value:Xe}of T)J.add(me),JSON.stringify(y.localCache[me])!==JSON.stringify(Xe)&&(y.notifyListeners(me,Xe),$.push(me));for(const me of Object.keys(y.localCache))y.localCache[me]&&!J.has(me)&&(y.notifyListeners(me,null),$.push(me));return $})()}notifyListeners(y,T){this.localCache[y]=T;const $=this.listeners[y];if($)for(const J of Array.from($))J(T)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,w.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,T){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(T)}_removeListener(y,T){this.listeners[y]&&(this.listeners[y].delete(T),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return C.type="LOCAL",C})();function $n(C,m){return et(C,"POST","/v2/accounts/mfaSignIn:start",gt(C,m))}const Ts=1e12;class Bs{constructor(m){this.auth=m,this.counter=Ts,this._widgets=new Map}render(m,y){const T=this.counter;return this._widgets.set(T,new ac(m,this.auth.name,y||{})),this.counter++,T}reset(m){var y;const T=m||Ts;null===(y=this._widgets.get(T))||void 0===y||y.delete(),this._widgets.delete(T)}getResponse(m){var y;return(null===(y=this._widgets.get(m||Ts))||void 0===y?void 0:y.getResponse())||""}execute(m){var y=this;return(0,w.Z)(function*(){var T;return null===(T=y._widgets.get(m||Ts))||void 0===T||T.execute(),""})()}}class ac{constructor(m,y,T){this.params=T,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const $="string"==typeof m?document.getElementById(m):m;Oe($,"argument-error",{appName:y}),this.container=$,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Bl(C){const m=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let T=0;T<C;T++)m.push(y.charAt(Math.floor(Math.random()*y.length)));return m.join("")}(50);const{callback:m,"expired-callback":y}=this.params;if(m)try{m(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const jl=ji("rcb"),Hl=new se(3e4,6e4);class kc{constructor(){var m;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(m=Ot().grecaptcha)||void 0===m||!m.render)}load(m,y=""){return Oe(function ao(C){return C.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(C)}(y),m,"argument-error"),this.shouldResolveImmediately(y)&&bn(Ot().grecaptcha)?Promise.resolve(Ot().grecaptcha):new Promise((T,$)=>{const J=Ot().setTimeout(()=>{$(Fe(m,"network-request-failed"))},Hl.get());Ot()[jl]=()=>{Ot().clearTimeout(J),delete Ot()[jl];const Xe=Ot().grecaptcha;if(!Xe||!bn(Xe))return void $(Fe(m,"internal-error"));const kt=Xe.render;Xe.render=(Qt,yn)=>{const Dn=kt(Qt,yn);return this.counter++,Dn},this.hostLanguage=y,T(Xe)},Ii(`https://www.google.com/recaptcha/api.js??${(0,X.xO)({onload:jl,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(J),$(Fe(m,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(m){var y;return!(null===(y=Ot().grecaptcha)||void 0===y||!y.render)&&(m===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class ud{load(m){return(0,w.Z)(function*(){return new Bs(m)})()}clearedOneInstance(){}}const yl="recaptcha",js={theme:"light",type:"image"};class Xo{constructor(m,y=Object.assign({},js),T){this.parameters=y,this.type=yl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Gr(T),this.isInvisible="invisible"===this.parameters.size,Oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const $="string"==typeof m?document.getElementById(m):m;Oe($,this.auth,"argument-error"),this.container=$,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new ud:new kc,this.validateStartingState()}verify(){var m=this;return(0,w.Z)(function*(){m.assertNotDestroyed();const y=yield m.render(),T=m.getAssertedRecaptcha();return T.getResponse(y)||new Promise(J=>{const me=Xe=>{!Xe||(m.tokenChangeListeners.delete(me),J(Xe))};m.tokenChangeListeners.add(me),m.isInvisible&&T.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(m){return Promise.reject(m)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(m=>{throw this.renderPromise=null,m})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(m=>{this.container.removeChild(m)})}validateStartingState(){Oe(!this.parameters.sitekey,this.auth,"argument-error"),Oe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Oe(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(m){return y=>{if(this.tokenChangeListeners.forEach(T=>T(y)),"function"==typeof m)m(y);else if("string"==typeof m){const T=Ot()[m];"function"==typeof T&&T(y)}}}assertNotDestroyed(){Oe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var m=this;return(0,w.Z)(function*(){if(yield m.init(),!m.widgetId){let y=m.container;if(!m.isInvisible){const T=document.createElement("div");y.appendChild(T),y=T}m.widgetId=m.getAssertedRecaptcha().render(y,m.parameters)}return m.widgetId})()}init(){var m=this;return(0,w.Z)(function*(){Oe(Ht()&&!oc(),m.auth,"internal-error"),yield function A(){let C=null;return new Promise(m=>{"complete"!==document.readyState?(C=()=>m(),window.addEventListener("load",C)):m()}).catch(m=>{throw C&&window.removeEventListener("load",C),m})}(),m.recaptcha=yield m._recaptchaLoader.load(m.auth,m.auth.languageCode||void 0);const y=yield function je(C){return St.apply(this,arguments)}(m.auth);Oe(y,m.auth,"internal-error"),m.parameters.sitekey=y})()}getAssertedRecaptcha(){return Oe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class I{constructor(m,y){this.verificationId=m,this.onConfirmation=y}confirm(m){const y=Kr._fromVerification(this.verificationId,m);return this.onConfirmation(y)}}function P(){return(P=(0,w.Z)(function*(C,m,y){const T=Gr(C),$=yield ut(T,m,(0,X.m9)(y));return new I($,J=>es(T,J))})).apply(this,arguments)}function ee(){return(ee=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C);yield rr(!1,T,"phone");const $=yield ut(T.auth,m,(0,X.m9)(y));return new I($,J=>Oo(T,J))})).apply(this,arguments)}function ve(){return(ve=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C),$=yield ut(T.auth,m,(0,X.m9)(y));return new I($,J=>Fr(T,J))})).apply(this,arguments)}function ut(C,m,y){return qt.apply(this,arguments)}function qt(){return(qt=(0,w.Z)(function*(C,m,y){var T;const $=yield y.verify();try{let J;if(Oe("string"==typeof $,C,"argument-error"),Oe(y.type===yl,C,"argument-error"),J="string"==typeof m?{phoneNumber:m}:m,"session"in J){const me=J.session;if("phoneNumber"in J)return Oe("enroll"===me.type,C,"internal-error"),(yield io(C,{idToken:me.credential,phoneEnrollmentInfo:{phoneNumber:J.phoneNumber,recaptchaToken:$}})).phoneSessionInfo.sessionInfo;{Oe("signin"===me.type,C,"internal-error");const Xe=(null===(T=J.multiFactorHint)||void 0===T?void 0:T.uid)||J.multiFactorUid;return Oe(Xe,C,"missing-multi-factor-info"),(yield $n(C,{mfaPendingCredential:me.credential,mfaEnrollmentId:Xe,phoneSignInInfo:{recaptchaToken:$}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:me}=yield mo(C,{phoneNumber:J.phoneNumber,recaptchaToken:$});return me}}finally{y._reset()}})).apply(this,arguments)}function ln(){return(ln=(0,w.Z)(function*(C,m){yield Po((0,X.m9)(C),m)})).apply(this,arguments)}let Er=(()=>{class C{constructor(y){this.providerId=C.PROVIDER_ID,this.auth=Gr(y)}verifyPhoneNumber(y,T){return ut(this.auth,y,(0,X.m9)(T))}static credential(y,T){return Kr._fromVerification(y,T)}static credentialFromResult(y){return C.credentialFromTaggedObject(y)}static credentialFromError(y){return C.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:T,temporaryProof:$}=y;return T&&$?Kr._fromTokenResponse(T,$):null}}return C.PROVIDER_ID="phone",C.PHONE_SIGN_IN_METHOD="phone",C})();function Lr(C,m){return m?jr(m):(Oe(C._popupRedirectResolver,C,"argument-error"),C._popupRedirectResolver)}class Ti extends Es{constructor(m){super("custom","custom"),this.params=m}_getIdTokenResponse(m){return pr(m,this._buildIdpRequest())}_linkToIdToken(m,y){return pr(m,this._buildIdpRequest(y))}_getReauthenticationResolver(m){return pr(m,this._buildIdpRequest())}_buildIdpRequest(m){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return m&&(y.idToken=m),y}}function ea(C){return Ar(C.auth,new Ti(C),C.bypassAuthState)}function Lo(C){const{auth:m,user:y}=C;return Oe(y,m,"internal-error"),fl(y,new Ti(C),C.bypassAuthState)}function rs(C){return wa.apply(this,arguments)}function wa(){return(wa=(0,w.Z)(function*(C){const{auth:m,user:y}=C;return Oe(y,m,"internal-error"),Po(y,new Ti(C),C.bypassAuthState)})).apply(this,arguments)}class _l{constructor(m,y,T,$,J=!1){this.auth=m,this.resolver=T,this.user=$,this.bypassAuthState=J,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var m=this;return new Promise(function(){var y=(0,w.Z)(function*(T,$){m.pendingPromise={resolve:T,reject:$};try{m.eventManager=yield m.resolver._initialize(m.auth),yield m.onExecution(),m.eventManager.registerConsumer(m)}catch(J){m.reject(J)}});return function(T,$){return y.apply(this,arguments)}}())}onAuthEvent(m){var y=this;return(0,w.Z)(function*(){const{urlResponse:T,sessionId:$,postBody:J,tenantId:me,error:Xe,type:kt}=m;if(Xe)return void y.reject(Xe);const Qt={auth:y.auth,requestUri:T,sessionId:$,tenantId:me||void 0,postBody:J||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(kt)(Qt))}catch(yn){y.reject(yn)}})()}onError(m){this.reject(m)}getIdpTask(m){switch(m){case"signInViaPopup":case"signInViaRedirect":return ea;case"linkViaPopup":case"linkViaRedirect":return rs;case"reauthViaPopup":case"reauthViaRedirect":return Lo;default:De(this.auth,"internal-error")}}resolve(m){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(m),this.unregisterAndCleanUp()}reject(m){Dt(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(m),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const hi=new se(2e3,1e4);function Yi(){return(Yi=(0,w.Z)(function*(C,m,y){const T=Gr(C);Et(C,m,Ji);const $=Lr(T,y);return new Gd(T,"signInViaPopup",m,$).executeNotNull()})).apply(this,arguments)}function cd(){return(cd=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C);Et(T.auth,m,Ji);const $=Lr(T.auth,y);return new Gd(T.auth,"reauthViaPopup",m,$,T).executeNotNull()})).apply(this,arguments)}function uu(){return(uu=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C);Et(T.auth,m,Ji);const $=Lr(T.auth,y);return new Gd(T.auth,"linkViaPopup",m,$,T).executeNotNull()})).apply(this,arguments)}let Gd=(()=>{class C extends _l{constructor(y,T,$,J,me){super(y,T,J,me),this.provider=$,this.authWindow=null,this.pollId=null,C.currentPopupAction&&C.currentPopupAction.cancel(),C.currentPopupAction=this}executeNotNull(){var y=this;return(0,w.Z)(function*(){const T=yield y.execute();return Oe(T,y.auth,"internal-error"),T})()}onExecution(){var y=this;return(0,w.Z)(function*(){Dt(1===y.filter.length,"Popup operations only handle one event");const T=ps();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],T),y.authWindow.associatedEvent=T,y.resolver._originValidation(y.auth).catch($=>{y.reject($)}),y.resolver._isIframeWebStorageSupported(y.auth,$=>{$||y.reject(Fe(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(Fe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,C.currentPopupAction=null}pollUserCancellation(){const y=()=>{var T,$;this.pollId=null!==($=null===(T=this.authWindow)||void 0===T?void 0:T.window)&&void 0!==$&&$.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Fe(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(y,hi.get())};y()}}return C.currentPopupAction=null,C})();const xu=new Map;class Gh extends _l{constructor(m,y,T=!1){super(m,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,T),this.eventId=null}execute(){var m=()=>super.execute,y=this;return(0,w.Z)(function*(){let T=xu.get(y.auth._key());if(!T){try{const J=(yield function Pa(C,m){return dd.apply(this,arguments)}(y.resolver,y.auth))?yield m().call(y):null;T=()=>Promise.resolve(J)}catch($){T=()=>Promise.reject($)}xu.set(y.auth._key(),T)}return y.bypassAuthState||xu.set(y.auth._key(),()=>Promise.resolve(null)),T()})()}onAuthEvent(m){var y=()=>super.onAuthEvent,T=this;return(0,w.Z)(function*(){if("signInViaRedirect"===m.type)return y().call(T,m);if("unknown"!==m.type){if(m.eventId){const $=yield T.auth._redirectUserForId(m.eventId);if($)return T.user=$,y().call(T,m);T.resolve(null)}}else T.resolve(null)})()}onExecution(){return(0,w.Z)(function*(){})()}cleanUp(){}}function dd(){return(dd=(0,w.Z)(function*(C,m){const y=cc(m),T=uc(C);if(!(yield T._isAvailable()))return!1;const $="true"===(yield T._get(y));return yield T._remove(y),$})).apply(this,arguments)}function Nu(C,m){return zd.apply(this,arguments)}function zd(){return(zd=(0,w.Z)(function*(C,m){return uc(C)._set(cc(m),"true")})).apply(this,arguments)}function vl(C,m){xu.set(C._key(),m)}function uc(C){return jr(C._redirectPersistence)}function cc(C){return _e("pendingRedirect",C.config.apiKey,C.name)}function Ia(){return(Ia=(0,w.Z)(function*(C,m,y){const T=Gr(C);Et(C,m,Ji),yield T._initializationPromise;const $=Lr(T,y);return yield Nu($,T),$._openRedirect(T,m,"signInViaRedirect")})).apply(this,arguments)}function hd(){return(hd=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C);Et(T.auth,m,Ji),yield T.auth._initializationPromise;const $=Lr(T.auth,y);yield Nu($,T.auth);const J=yield fi(T);return $._openRedirect(T.auth,m,"reauthViaRedirect",J)})).apply(this,arguments)}function $l(){return($l=(0,w.Z)(function*(C,m,y){const T=(0,X.m9)(C);Et(T.auth,m,Ji),yield T.auth._initializationPromise;const $=Lr(T.auth,y);yield rr(!1,T,m.providerId),yield Nu($,T.auth);const J=yield fi(T);return $._openRedirect(T.auth,m,"linkViaRedirect",J)})).apply(this,arguments)}function Si(){return(Si=(0,w.Z)(function*(C,m){return yield Gr(C)._initializationPromise,Pu(C,m,!1)})).apply(this,arguments)}function Pu(C,m){return is.apply(this,arguments)}function is(){return(is=(0,w.Z)(function*(C,m,y=!1){const T=Gr(C),$=Lr(T,m),me=yield new Gh(T,$,y).execute();return me&&!y&&(delete me.user._redirectEventId,yield T._persistUserIfCurrent(me.user),yield T._setRedirectUser(null,m)),me})).apply(this,arguments)}function fi(C){return cu.apply(this,arguments)}function cu(){return(cu=(0,w.Z)(function*(C){const m=ps(`${C.uid}:::`);return C._redirectEventId=m,yield C.auth._setRedirectUser(C),yield C.auth._persistUserIfCurrent(C),m})).apply(this,arguments)}class Hs{constructor(m){this.auth=m,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(m){this.consumers.add(m),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,m)&&(this.sendToConsumer(this.queuedRedirectEvent,m),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(m){this.consumers.delete(m)}onEvent(m){if(this.hasEventBeenHandled(m))return!1;let y=!1;return this.consumers.forEach(T=>{this.isEventForConsumer(m,T)&&(y=!0,this.sendToConsumer(m,T),this.saveEventToCache(m))}),this.hasHandledPotentialRedirect||!function gs(C){switch(C.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Bc(C);default:return!1}}(m)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=m,y=!0)),y}sendToConsumer(m,y){var T;if(m.error&&!Bc(m)){const $=(null===(T=m.error.code)||void 0===T?void 0:T.split("auth/")[1])||"internal-error";y.onError(Fe(this.auth,$))}else y.onAuthEvent(m)}isEventForConsumer(m,y){const T=null===y.eventId||!!m.eventId&&m.eventId===y.eventId;return y.filter.includes(m.type)&&T}hasEventBeenHandled(m){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Oa(m))}saveEventToCache(m){this.cachedEventUids.add(Oa(m)),this.lastProcessedEventTime=Date.now()}}function Oa(C){return[C.type,C.eventId,C.sessionId,C.tenantId].filter(m=>m).join("-")}function Bc({type:C,error:m}){return"unknown"===C&&"auth/no-auth-event"===m?.code}function Vf(C){return ta.apply(this,arguments)}function ta(){return(ta=(0,w.Z)(function*(C,m={}){return et(C,"GET","/v1/projects",m)})).apply(this,arguments)}const As=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,du=/^https?/;function ka(){return(ka=(0,w.Z)(function*(C){if(C.config.emulator)return;const{authorizedDomains:m}=yield Vf(C);for(const y of m)try{if(jc(y))return}catch{}De(C,"unauthorized-domain")})).apply(this,arguments)}function jc(C){const m=Kt(),{protocol:y,hostname:T}=new URL(m);if(C.startsWith("chrome-extension://")){const me=new URL(C);return""===me.hostname&&""===T?"chrome-extension:"===y&&C.replace("chrome-extension://","")===m.replace("chrome-extension://",""):"chrome-extension:"===y&&me.hostname===T}if(!du.test(y))return!1;if(As.test(C))return T===C;const $=C.replace(/\./g,"\\.");return new RegExp("^(.+\\."+$+"|"+$+")$","i").test(T)}const Bp=new se(3e4,6e4);function hu(){const C=Ot().___jsl;if(C?.H)for(const m of Object.keys(C.H))if(C.H[m].r=C.H[m].r||[],C.H[m].L=C.H[m].L||[],C.H[m].r=[...C.H[m].L],C.CP)for(let y=0;y<C.CP.length;y++)C.CP[y]=null}let wl=null;function Io(C){return wl=wl||function Vo(C){return new Promise((m,y)=>{var T,$,J;function me(){hu(),gapi.load("gapi.iframes",{callback:()=>{m(gapi.iframes.getContext())},ontimeout:()=>{hu(),y(Fe(C,"network-request-failed"))},timeout:Bp.get()})}if(null!==($=null===(T=Ot().gapi)||void 0===T?void 0:T.iframes)&&void 0!==$&&$.Iframe)m(gapi.iframes.getContext());else{if(null===(J=Ot().gapi)||void 0===J||!J.load){const Xe=ji("iframefcb");return Ot()[Xe]=()=>{gapi.load?me():y(Fe(C,"network-request-failed"))},Ii(`https://apis.google.com/js/api.js?onload=${Xe}`).catch(kt=>y(kt))}me()}}).catch(m=>{throw wl=null,m})}(C),wl}const Fa=new se(5e3,15e3),Ou={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Uo=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function qd(C){const m=C.config;Oe(m.authDomain,C,"auth-domain-config-required");const y=m.emulator?Ae(m,"emulator/auth/iframe"):`https://${C.config.authDomain}/__/auth/iframe`,T={apiKey:m.apiKey,appName:C.name,v:Re.SDK_VERSION},$=Uo.get(C.config.apiHost);$&&(T.eid=$);const J=C._getFrameworks();return J.length&&(T.fw=J.join(",")),`${y}?${(0,X.xO)(T).slice(1)}`}function k(){return k=(0,w.Z)(function*(C){const m=yield Io(C),y=Ot().gapi;return Oe(y,C,"internal-error"),m.open({where:document.body,url:qd(C),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ou,dontclear:!0},T=>new Promise(function(){var $=(0,w.Z)(function*(J,me){yield T.restyle({setHideOnLeave:!1});const Xe=Fe(C,"network-request-failed"),kt=Ot().setTimeout(()=>{me(Xe)},Fa.get());function Qt(){Ot().clearTimeout(kt),J(T)}T.ping(Qt).then(Qt,()=>{me(Xe)})});return function(J,me){return $.apply(this,arguments)}}()))}),k.apply(this,arguments)}const Z={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Yt{constructor(m){this.window=m,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Bo=encodeURIComponent("fac");function zr(C,m,y,T,$,J){return ms.apply(this,arguments)}function ms(){return(ms=(0,w.Z)(function*(C,m,y,T,$,J){Oe(C.config.authDomain,C,"auth-domain-config-required"),Oe(C.config.apiKey,C,"invalid-api-key");const me={apiKey:C.config.apiKey,appName:C.name,authType:y,redirectUrl:T,v:Re.SDK_VERSION,eventId:$};if(m instanceof Ji){m.setDefaultLanguage(C.languageCode),me.providerId=m.providerId||"",(0,X.xb)(m.getCustomParameters())||(me.customParameters=JSON.stringify(m.getCustomParameters()));for(const[yn,Dn]of Object.entries(J||{}))me[yn]=Dn}if(m instanceof _o){const yn=m.getScopes().filter(Dn=>""!==Dn);yn.length>0&&(me.scopes=yn.join(","))}C.tenantId&&(me.tid=C.tenantId);const Xe=me;for(const yn of Object.keys(Xe))void 0===Xe[yn]&&delete Xe[yn];const kt=yield C._getAppCheckToken(),Qt=kt?`#${Bo}=${encodeURIComponent(kt)}`:"";return`${pi(C)}?${(0,X.xO)(Xe).slice(1)}${Qt}`})).apply(this,arguments)}function pi({config:C}){return C.emulator?Ae(C,"emulator/auth/handler"):`https://${C.authDomain}/__/auth/handler`}const Co="webStorageSupport";class Uf extends class zl{constructor(m){this.factorId=m}_process(m,y,T){switch(y.type){case"enroll":return this._finalizeEnroll(m,y.credential,T);case"signin":return this._finalizeSignIn(m,y.credential);default:return Mt("unexpected MultiFactorSessionType")}}}{constructor(m){super("phone"),this.credential=m}static _fromCredential(m){return new Uf(m)}_finalizeEnroll(m,y,T){return function ts(C,m){return et(C,"POST","/v2/accounts/mfaEnrollment:finalize",gt(C,m))}(m,{idToken:y,displayName:T,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(m,y){return function Mu(C,m){return et(C,"POST","/v2/accounts/mfaSignIn:finalize",gt(C,m))}(m,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Zd=(()=>{class C{constructor(){}static assertion(y){return Uf._fromCredential(y)}}return C.FACTOR_ID="phone",C})();var pd="@firebase/auth";class zh{constructor(m){this.auth=m,this.internalListeners=new Map}getUid(){var m;return this.assertAuthConfigured(),(null===(m=this.auth.currentUser)||void 0===m?void 0:m.uid)||null}getToken(m){var y=this;return(0,w.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(m)}:null})()}addAuthTokenListener(m){if(this.assertAuthConfigured(),this.internalListeners.has(m))return;const y=this.auth.onIdTokenChanged(T=>{m(T?.stsTokenManager.accessToken||null)});this.internalListeners.set(m,y),this.updateProactiveRefresh()}removeAuthTokenListener(m){this.assertAuthConfigured();const y=this.internalListeners.get(m);!y||(this.internalListeners.delete(m),y(),this.updateProactiveRefresh())}assertAuthConfigured(){Oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Ca(){return window}function pc(){return(pc=(0,w.Z)(function*(C,m,y){var T;const{BuildInfo:$}=Ca();Dt(m.sessionId,"AuthEvent did not contain a session ID");const J=yield Jd(m.sessionId),me={};return ue()?me.ibi=$.packageName:Ln()?me.apn=$.packageName:De(C,"operation-not-supported-in-this-environment"),$.displayName&&(me.appDisplayName=$.displayName),me.sessionId=J,zr(C,y,m.type,void 0,null!==(T=m.eventId)&&void 0!==T?T:void 0,me)})).apply(this,arguments)}function fu(){return(fu=(0,w.Z)(function*(C){const{BuildInfo:m}=Ca(),y={};ue()?y.iosBundleId=m.packageName:Ln()?y.androidPackageName=m.packageName:De(C,"operation-not-supported-in-this-environment"),yield Vf(C,y)})).apply(this,arguments)}function Hc(){return(Hc=(0,w.Z)(function*(C,m,y){const{cordova:T}=Ca();let $=()=>{};try{yield new Promise((J,me)=>{let Xe=null;function kt(){var Dn;J();const os=null===(Dn=T.plugins.browsertab)||void 0===Dn?void 0:Dn.close;"function"==typeof os&&os(),"function"==typeof y?.close&&y.close()}function Qt(){Xe||(Xe=window.setTimeout(()=>{me(Fe(C,"redirect-cancelled-by-user"))},2e3))}function yn(){"visible"===document?.visibilityState&&Qt()}m.addPassiveListener(kt),document.addEventListener("resume",Qt,!1),Ln()&&document.addEventListener("visibilitychange",yn,!1),$=()=>{m.removePassiveListener(kt),document.removeEventListener("resume",Qt,!1),document.removeEventListener("visibilitychange",yn,!1),Xe&&window.clearTimeout(Xe)}})}finally{$()}})).apply(this,arguments)}function Jd(C){return yd.apply(this,arguments)}function yd(){return(yd=(0,w.Z)(function*(C){const m=Wl(C),y=yield crypto.subtle.digest("SHA-256",m);return Array.from(new Uint8Array(y)).map($=>$.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Wl(C){if(Dt(/[0-9a-zA-Z]+/.test(C),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(C);const m=new ArrayBuffer(C.length),y=new Uint8Array(m);for(let T=0;T<C.length;T++)y[T]=C.charCodeAt(T);return y}(0,X.Pz)("authIdTokenMaxAge"),function jp(C){(0,Re._registerComponent)(new Ve.wA("auth",(m,{options:y})=>{const T=m.getProvider("app").getImmediate(),$=m.getProvider("heartbeat"),J=m.getProvider("app-check-internal"),{apiKey:me,authDomain:Xe}=T.options;Oe(me&&!me.includes(":"),"invalid-api-key",{appName:T.name});const kt={apiKey:me,authDomain:Xe,clientPlatform:C,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:He(C)},Qt=new Ao(T,$,J,kt);return function gi(C,m){const y=m?.persistence||[],T=(Array.isArray(y)?y:[y]).map(jr);m?.errorMap&&C._updateErrorMap(m.errorMap),C._initializeWithPersistence(T,m?.popupRedirectResolver)}(Qt,y),Qt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((m,y,T)=>{m.getProvider("auth-internal").initialize()})),(0,Re._registerComponent)(new Ve.wA("auth-internal",m=>{const y=Gr(m.getProvider("auth").getImmediate());return new zh(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.registerVersion)(pd,"0.23.2",function Bf(C){switch(C){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(C)),(0,Re.registerVersion)(pd,"0.23.2","esm2017")}("Browser");class gc extends Hs{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(m=>{this.resolveInialized=m})}addPassiveListener(m){this.passiveListeners.add(m)}removePassiveListener(m){this.passiveListeners.delete(m)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(m){return this.resolveInialized(),this.passiveListeners.forEach(y=>y(m)),super.onEvent(m)}initialized(){var m=this;return(0,w.Z)(function*(){yield m.initPromise})()}}function _d(C){return th.apply(this,arguments)}function th(){return(th=(0,w.Z)(function*(C){const m=yield rl()._get(mc(C));return m&&(yield rl()._remove(mc(C))),m})).apply(this,arguments)}function jo(){const C=[],m="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let y=0;y<20;y++){const T=Math.floor(Math.random()*m.length);C.push(m.charAt(T))}return C.join("")}function rl(){return jr(bs)}function mc(C){return _e("authEvent",C.config.apiKey,C.name)}function Il(C){if(!C?.includes("?"))return{};const[m,...y]=C.split("?");return(0,X.zd)(y.join("?"))}function Wh(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Fe("no-auth-event")}}function Cl(){var C;return(null===(C=self?.location)||void 0===C?void 0:C.protocol)||null}function sl(C=(0,X.z$)()){return!("file:"!==Cl()&&"ionic:"!==Cl()&&"capacitor:"!==Cl()||!C.toLowerCase().match(/iphone|ipad|ipod|android/))}function gr(){try{const C=self.localStorage,m=ps();if(C)return C.setItem(m,"1"),C.removeItem(m),!function oh(C=(0,X.z$)()){return function $c(){return(0,X.w1)()&&11===document?.documentMode}()||function sh(C=(0,X.z$)()){return/Edge\/\d+/.test(C)}(C)}()||(0,X.hl)()}catch{return Gc()&&(0,X.hl)()}return!1}function Gc(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function zc(){return(function ih(){return"http:"===Cl()||"https:"===Cl()}()||(0,X.ru)()||sl())&&!function Kh(){return(0,X.b$)()||(0,X.UG)()}()&&gr()&&!Gc()}function ah(){return sl()&&typeof document<"u"}function yc(){return(yc=(0,w.Z)(function*(){return!!ah()&&new Promise(C=>{const m=setTimeout(()=>{C(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(m),C(!0)})})})).apply(this,arguments)}const Ys={LOCAL:"local",NONE:"none",SESSION:"session"},Da=Oe,qh="persistence";function Bu(C){return vd.apply(this,arguments)}function vd(){return(vd=(0,w.Z)(function*(C){yield C._initializationPromise;const m=Zh(),y=_e(qh,C.config.apiKey,C.name);m&&m.setItem(y,C._getPersistence())})).apply(this,arguments)}function Zh(){var C;try{return(null===(C=function Wc(){return typeof window<"u"?window:null}())||void 0===C?void 0:C.sessionStorage)||null}catch{return null}}const ju=Oe;class Zl{constructor(){this.browserResolver=jr(class Do{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Ol,this._completeRedirectFn=Pu,this._overrideRedirectResult=vl}_openPopup(m,y,T,$){var J=this;return(0,w.Z)(function*(){var me;Dt(null===(me=J.eventManagers[m._key()])||void 0===me?void 0:me.manager,"_initialize() not called before _openPopup()");const Xe=yield zr(m,y,T,Kt(),$);return function en(C,m,y,T=500,$=600){const J=Math.max((window.screen.availHeight-$)/2,0).toString(),me=Math.max((window.screen.availWidth-T)/2,0).toString();let Xe="";const kt=Object.assign(Object.assign({},Z),{width:T.toString(),height:$.toString(),top:J,left:me}),Qt=(0,X.z$)().toLowerCase();y&&(Xe=Gt(Qt)?"_blank":y),rt(Qt)&&(m=m||"http://localhost",kt.scrollbars="yes");const yn=Object.entries(kt).reduce((os,[Va,Jh])=>`${os}${Va}=${Jh},`,"");if(function Be(C=(0,X.z$)()){var m;return ue(C)&&!(null===(m=window.navigator)||void 0===m||!m.standalone)}(Qt)&&"_self"!==Xe)return function hn(C,m){const y=document.createElement("a");y.href=C,y.target=m;const T=document.createEvent("MouseEvent");T.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(T)}(m||"",Xe),new Yt(null);const Dn=window.open(m||"",Xe,yn);Oe(Dn,C,"popup-blocked");try{Dn.focus()}catch{}return new Yt(Dn)}(m,Xe,ps())})()}_openRedirect(m,y,T,$){var J=this;return(0,w.Z)(function*(){return yield J._originValidation(m),function Sn(C){Ot().location.href=C}(yield zr(m,y,T,Kt(),$)),new Promise(()=>{})})()}_initialize(m){const y=m._key();if(this.eventManagers[y]){const{manager:$,promise:J}=this.eventManagers[y];return $?Promise.resolve($):(Dt(J,"If manager is not set, promise should be"),J)}const T=this.initAndGetManager(m);return this.eventManagers[y]={promise:T},T.catch(()=>{delete this.eventManagers[y]}),T}initAndGetManager(m){var y=this;return(0,w.Z)(function*(){const T=yield function R(C){return k.apply(this,arguments)}(m),$=new Hs(m);return T.register("authEvent",J=>(Oe(J?.authEvent,m,"invalid-auth-event"),{status:$.onEvent(J.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[m._key()]={manager:$},y.iframes[m._key()]=T,$})()}_isIframeWebStorageSupported(m,y){this.iframes[m._key()].send(Co,{type:Co},$=>{var J;const me=null===(J=$?.[0])||void 0===J?void 0:J[Co];void 0!==me&&y(!!me),De(m,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function El(C){return ka.apply(this,arguments)}(m)),this.originValidationPromises[y]}get _shouldInitProactively(){return sn()||$e()||ue()}}),this.cordovaResolver=jr(class il{constructor(){this._redirectPersistence=Ol,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Pu,this._overrideRedirectResult=vl}_initialize(m){var y=this;return(0,w.Z)(function*(){const T=m._key();let $=y.eventManagers.get(T);return $||($=new gc(m),y.eventManagers.set(T,$),y.attachCallbackListeners(m,$)),$})()}_openPopup(m){De(m,"operation-not-supported-in-this-environment")}_openRedirect(m,y,T,$){var J=this;return(0,w.Z)(function*(){!function Qd(C){var m,y,T,$,J,me,Xe,kt,Qt,yn;const Dn=Ca();Oe("function"==typeof(null===(m=Dn?.universalLinks)||void 0===m?void 0:m.subscribe),C,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Oe(typeof(null===(y=Dn?.BuildInfo)||void 0===y?void 0:y.packageName)<"u",C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Oe("function"==typeof(null===(J=null===($=null===(T=Dn?.cordova)||void 0===T?void 0:T.plugins)||void 0===$?void 0:$.browsertab)||void 0===J?void 0:J.openUrl),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(kt=null===(Xe=null===(me=Dn?.cordova)||void 0===me?void 0:me.plugins)||void 0===Xe?void 0:Xe.browsertab)||void 0===kt?void 0:kt.isAvailable),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Oe("function"==typeof(null===(yn=null===(Qt=Dn?.cordova)||void 0===Qt?void 0:Qt.InAppBrowser)||void 0===yn?void 0:yn.open),C,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(m);const me=yield J._initialize(m);yield me.initialized(),me.resetRedirect(),function Vc(){xu.clear()}(),yield J._originValidation(m);const Xe=function Xd(C,m,y=null){return{type:m,eventId:y,urlResponse:null,sessionId:jo(),postBody:null,tenantId:C.tenantId,error:Fe(C,"no-auth-event")}}(m,T,$);yield function eh(C,m){return rl()._set(mc(C),m)}(m,Xe);const kt=yield function fc(C,m,y){return pc.apply(this,arguments)}(m,Xe,y),Qt=yield function Fu(C){const{cordova:m}=Ca();return new Promise(y=>{m.plugins.browsertab.isAvailable(T=>{let $=null;T?m.plugins.browsertab.openUrl(C):$=m.InAppBrowser.open(C,function oe(C=(0,X.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(C)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(C)}()?"_blank":"_system","location=yes"),y($)})})}(kt);return function md(C,m,y){return Hc.apply(this,arguments)}(m,me,Qt)})()}_isIframeWebStorageSupported(m,y){throw new Error("Method not implemented.")}_originValidation(m){const y=m._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Hp(C){return fu.apply(this,arguments)}(m)),this.originValidationPromises[y]}attachCallbackListeners(m,y){const{universalLinks:T,handleOpenURL:$,BuildInfo:J}=Ca(),me=setTimeout((0,w.Z)(function*(){yield _d(m),y.onEvent(Wh())}),500),Xe=function(){var yn=(0,w.Z)(function*(Dn){clearTimeout(me);const os=yield _d(m);let Va=null;os&&Dn?.url&&(Va=function Lu(C,m){var y,T;const $=function nh(C){const m=Il(C),y=m.link?decodeURIComponent(m.link):void 0,T=Il(y).link,$=m.deep_link_id?decodeURIComponent(m.deep_link_id):void 0;return Il($).link||$||T||y||C}(m);if($.includes("/__/auth/callback")){const J=Il($),me=J.firebaseError?function lo(C){try{return JSON.parse(C)}catch{return null}}(decodeURIComponent(J.firebaseError)):null,Xe=null===(T=null===(y=me?.code)||void 0===y?void 0:y.split("auth/"))||void 0===T?void 0:T[1],kt=Xe?Fe(Xe):null;return kt?{type:C.type,eventId:C.eventId,tenantId:C.tenantId,error:kt,urlResponse:null,sessionId:null,postBody:null}:{type:C.type,eventId:C.eventId,tenantId:C.tenantId,sessionId:C.sessionId,urlResponse:$,postBody:null}}return null}(os,Dn.url)),y.onEvent(Va||Wh())});return function(os){return yn.apply(this,arguments)}}();typeof T<"u"&&"function"==typeof T.subscribe&&T.subscribe(null,Xe);const kt=$,Qt=`${J.packageName.toLowerCase()}://`;Ca().handleOpenURL=function(){var yn=(0,w.Z)(function*(Dn){if(Dn.toLowerCase().startsWith(Qt)&&Xe({url:Dn}),"function"==typeof kt)try{kt(Dn)}catch(os){console.error(os)}});return function(Dn){return yn.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=Ol,this._completeRedirectFn=Pu,this._overrideRedirectResult=vl}_initialize(m){var y=this;return(0,w.Z)(function*(){return yield y.selectUnderlyingResolver(),y.assertedUnderlyingResolver._initialize(m)})()}_openPopup(m,y,T,$){var J=this;return(0,w.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openPopup(m,y,T,$)})()}_openRedirect(m,y,T,$){var J=this;return(0,w.Z)(function*(){return yield J.selectUnderlyingResolver(),J.assertedUnderlyingResolver._openRedirect(m,y,T,$)})()}_isIframeWebStorageSupported(m,y){this.assertedUnderlyingResolver._isIframeWebStorageSupported(m,y)}_originValidation(m){return this.assertedUnderlyingResolver._originValidation(m)}get _shouldInitProactively(){return ah()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return ju(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var m=this;return(0,w.Z)(function*(){if(m.underlyingResolver)return;const y=yield function lh(){return yc.apply(this,arguments)}();m.underlyingResolver=y?m.cordovaResolver:m.browserResolver})()}}function Yh(C){return C.unwrap()}function $p(C){return ss(C)}function ss(C){const{_tokenResponse:m}=C instanceof X.ZR?C.customData:C;if(!m)return null;if(!(C instanceof X.ZR)&&"temporaryProof"in m&&"phoneNumber"in m)return Er.credentialFromResult(C);const y=m.providerId;if(!y||"password"===y)return null;let T;switch(y){case"google.com":T=Us;break;case"facebook.com":T=Vi;break;case"github.com":T=Ws;break;case"twitter.com":T=Ks;break;default:const{oauthIdToken:$,oauthAccessToken:J,oauthTokenSecret:me,pendingToken:Xe,nonce:kt}=m;return J||me||$||Xe?Xe?y.startsWith("saml.")?yi._create(y,Xe):ai._fromParams({providerId:y,signInMethod:y,pendingToken:Xe,idToken:$,accessToken:J}):new Vs(y).credential({idToken:$,accessToken:J,rawNonce:kt}):null}return C instanceof X.ZR?T.credentialFromError(C):T.credentialFromResult(C)}function Ho(C,m){return m.catch(y=>{throw y instanceof X.ZR&&function Gp(C,m){var y;const T=null===(y=m.customData)||void 0===y?void 0:y._tokenResponse;if("auth/multi-factor-auth-required"===m?.code)m.resolver=new om(C,function Bi(C,m){var y;const T=(0,X.m9)(C),$=m;return Oe(m.customData.operationType,T,"argument-error"),Oe(null===(y=$.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,T,"argument-error"),Ni._fromError(T,$)}(C,m));else if(T){const $=ss(m),J=m;$&&(J.credential=$,J.tenantId=T.tenantId||void 0,J.email=T.email||void 0,J.phoneNumber=T.phoneNumber||void 0)}}(C,y),y}).then(y=>{const $=y.user;return{operationType:y.operationType,credential:$p(y),additionalUserInfo:te(y),user:Qs.getOrCreate($)}})}function wd(C,m){return Qh.apply(this,arguments)}function Qh(){return(Qh=(0,w.Z)(function*(C,m){const y=yield m;return{verificationId:y.verificationId,confirm:T=>Ho(C,y.confirm(T))}})).apply(this,arguments)}class om{constructor(m,y){this.resolver=y,this.auth=function Ed(C){return C.wrapped()}(m)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(m){return Ho(Yh(this.auth),this.resolver.resolveSignIn(m))}}class Qs{constructor(m){this._delegate=m,this.multiFactor=function Fo(C){const m=(0,X.m9)(C);return Ja.has(m)||Ja.set(m,so._fromUser(m)),Ja.get(m)}(m)}static getOrCreate(m){return Qs.USER_MAP.has(m)||Qs.USER_MAP.set(m,new Qs(m)),Qs.USER_MAP.get(m)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(m){return this._delegate.getIdTokenResult(m)}getIdToken(m){return this._delegate.getIdToken(m)}linkAndRetrieveDataWithCredential(m){return this.linkWithCredential(m)}linkWithCredential(m){var y=this;return(0,w.Z)(function*(){return Ho(y.auth,Oo(y._delegate,m))})()}linkWithPhoneNumber(m,y){var T=this;return(0,w.Z)(function*(){return wd(T.auth,function B(C,m,y){return ee.apply(this,arguments)}(T._delegate,m,y))})()}linkWithPopup(m){var y=this;return(0,w.Z)(function*(){return Ho(y.auth,function Fc(C,m,y){return uu.apply(this,arguments)}(y._delegate,m,Zl))})()}linkWithRedirect(m){var y=this;return(0,w.Z)(function*(){return yield Bu(Gr(y.auth)),function Ss(C,m,y){return function Wd(C,m,y){return $l.apply(this,arguments)}(C,m,y)}(y._delegate,m,Zl)})()}reauthenticateAndRetrieveDataWithCredential(m){return this.reauthenticateWithCredential(m)}reauthenticateWithCredential(m){var y=this;return(0,w.Z)(function*(){return Ho(y.auth,Fr(y._delegate,m))})()}reauthenticateWithPhoneNumber(m,y){return wd(this.auth,function ce(C,m,y){return ve.apply(this,arguments)}(this._delegate,m,y))}reauthenticateWithPopup(m){return Ho(this.auth,function $d(C,m,y){return cd.apply(this,arguments)}(this._delegate,m,Zl))}reauthenticateWithRedirect(m){var y=this;return(0,w.Z)(function*(){return yield Bu(Gr(y.auth)),function dc(C,m,y){return function Lf(C,m,y){return hd.apply(this,arguments)}(C,m,y)}(y._delegate,m,Zl)})()}sendEmailVerification(m){return function ya(C,m){return Zo.apply(this,arguments)}(this._delegate,m)}unlink(m){var y=this;return(0,w.Z)(function*(){return yield function ua(C,m){return Xi.apply(this,arguments)}(y._delegate,m),y})()}updateEmail(m){return function ro(C,m){return xa((0,X.m9)(C),m,null)}(this._delegate,m)}updatePassword(m){return function zi(C,m){return xa((0,X.m9)(C),null,m)}(this._delegate,m)}updatePhoneNumber(m){return function Kn(C,m){return ln.apply(this,arguments)}(this._delegate,m)}updateProfile(m){return function Du(C,m){return Ma.apply(this,arguments)}(this._delegate,m)}verifyBeforeUpdateEmail(m,y){return function qs(C,m,y){return _a.apply(this,arguments)}(this._delegate,m,y)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Qs.USER_MAP=new WeakMap;const Hu=Oe;let zf=(()=>{class C{constructor(y,T){if(this.app=y,T.isInitialized())return this._delegate=T.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:$}=y.options;Hu($,"invalid-api-key",{appName:y.name}),Hu($,"invalid-api-key",{appName:y.name});const J=typeof window<"u"?Zl:void 0;this._delegate=T.initialize({options:{persistence:vc($,y.name),popupRedirectResolver:J}}),this._delegate._updateErrorMap(ct),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Qs.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(y){this._delegate.languageCode=y}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(y){this._delegate.tenantId=y}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(y,T){!function Fs(C,m,y){const T=Gr(C);Oe(T._canInitEmulator,T,"emulator-config-failed"),Oe(/^https?:\/\//.test(m),T,"invalid-emulator-scheme");const $=!!y?.disableWarnings,J=Xr(m),{host:me,port:Xe}=function ui(C){const m=Xr(C),y=/(\/\/)?([^?#/]+)/.exec(C.substr(m.length));if(!y)return{host:"",port:null};const T=y[2].split("@").pop()||"",$=/^(\[[^\]]+\])(:|$)/.exec(T);if($){const J=$[1];return{host:J,port:Qi(T.substr(J.length+1))}}{const[J,me]=T.split(":");return{host:J,port:Qi(me)}}}(m);T.config.emulator={url:`${J}//${me}${null===Xe?"":`:${Xe}`}/`},T.settings.appVerificationDisabledForTesting=!0,T.emulatorConfig=Object.freeze({host:me,port:Xe,protocol:J.replace(":",""),options:Object.freeze({disableWarnings:$})}),$||function xs(){function C(){const m=document.createElement("p"),y=m.style;m.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",m.classList.add("firebase-emulator-warning"),document.body.appendChild(m)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",C):C())}()}(this._delegate,y,T)}applyActionCode(y){return function su(C,m){return fs.apply(this,arguments)}(this._delegate,y)}checkActionCode(y){return da(this._delegate,y)}confirmPasswordReset(y,T){return function Zi(C,m,y){return Eo.apply(this,arguments)}(this._delegate,y,T)}createUserWithEmailAndPassword(y,T){var $=this;return(0,w.Z)(function*(){return Ho($._delegate,function qa(C,m,y){return pl.apply(this,arguments)}($._delegate,y,T))})()}fetchProvidersForEmail(y){return this.fetchSignInMethodsForEmail(y)}fetchSignInMethodsForEmail(y){return function gl(C,m){return qo.apply(this,arguments)}(this._delegate,y)}isSignInWithEmailLink(y){return function Ya(C,m){return"EMAIL_SIGNIN"===yo.parseLink(m)?.operation}(0,y)}getRedirectResult(){var y=this;return(0,w.Z)(function*(){Hu(zc(),y._delegate,"operation-not-supported-in-this-environment");const T=yield function Kd(C,m){return Si.apply(this,arguments)}(y._delegate,Zl);return T?Ho(y._delegate,Promise.resolve(T)):{credential:null,user:null}})()}addFrameworkForLogging(y){!function ql(C,m){Gr(C)._logFramework(m)}(this._delegate,y)}onAuthStateChanged(y,T,$){const{next:J,error:me,complete:Xe}=Id(y,T,$);return this._delegate.onAuthStateChanged(J,me,Xe)}onIdTokenChanged(y,T,$){const{next:J,error:me,complete:Xe}=Id(y,T,$);return this._delegate.onIdTokenChanged(J,me,Xe)}sendSignInLinkToEmail(y,T){return function Za(C,m,y){return ma.apply(this,arguments)}(this._delegate,y,T)}sendPasswordResetEmail(y,T){return function Ps(C,m,y){return Ds.apply(this,arguments)}(this._delegate,y,T||void 0)}setPersistence(y){var T=this;return(0,w.Z)(function*(){let $;switch(function uh(C,m){Da(Object.values(Ys).includes(m),C,"invalid-persistence-type"),(0,X.b$)()?Da(m!==Ys.SESSION,C,"unsupported-persistence-type"):(0,X.UG)()?Da(m===Ys.NONE,C,"unsupported-persistence-type"):Gc()?Da(m===Ys.NONE||m===Ys.LOCAL&&(0,X.hl)(),C,"unsupported-persistence-type"):Da(m===Ys.NONE||gr(),C,"unsupported-persistence-type")}(T._delegate,y),y){case Ys.SESSION:$=Ol;break;case Ys.LOCAL:$=(yield jr(Na)._isAvailable())?Na:bs;break;case Ys.NONE:$=ti;break;default:return De("argument-error",{appName:T._delegate.name})}return T._delegate.setPersistence($)})()}signInAndRetrieveDataWithCredential(y){return this.signInWithCredential(y)}signInAnonymously(){return Ho(this._delegate,function iu(C){return Aa.apply(this,arguments)}(this._delegate))}signInWithCredential(y){return Ho(this._delegate,es(this._delegate,y))}signInWithCustomToken(y){return Ho(this._delegate,function ne(C,m){return lt.apply(this,arguments)}(this._delegate,y))}signInWithEmailAndPassword(y,T){return Ho(this._delegate,function ga(C,m,y){return es((0,X.m9)(C),mi.credential(m,y))}(this._delegate,y,T))}signInWithEmailLink(y,T){return Ho(this._delegate,function Hr(C,m,y){return ko.apply(this,arguments)}(this._delegate,y,T))}signInWithPhoneNumber(y,T){return wd(this._delegate,function b(C,m,y){return P.apply(this,arguments)}(this._delegate,y,T))}signInWithPopup(y){var T=this;return(0,w.Z)(function*(){return Hu(zc(),T._delegate,"operation-not-supported-in-this-environment"),Ho(T._delegate,function lu(C,m,y){return Yi.apply(this,arguments)}(T._delegate,y,Zl))})()}signInWithRedirect(y){var T=this;return(0,w.Z)(function*(){return Hu(zc(),T._delegate,"operation-not-supported-in-this-environment"),yield Bu(T._delegate),function Uc(C,m,y){return function Ff(C,m,y){return Ia.apply(this,arguments)}(C,m,y)}(T._delegate,y,Zl)})()}updateCurrentUser(y){return this._delegate.updateCurrentUser(y)}verifyPasswordResetCode(y){return function fa(C,m){return pa.apply(this,arguments)}(this._delegate,y)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return C.Persistence=Ys,C})();function Id(C,m,y){let T=C;"function"!=typeof C&&({next:T,error:m,complete:y}=C);const $=T;return{next:me=>$(me&&Qs.getOrCreate(me)),error:m,complete:y}}function vc(C,m){const y=function _c(C,m){const y=Zh();if(!y)return[];const T=_e(qh,C,m);switch(y.getItem(T)){case Ys.NONE:return[ti];case Ys.LOCAL:return[Na,Ol];case Ys.SESSION:return[Ol];default:return[]}}(C,m);if(typeof self<"u"&&!y.includes(Na)&&y.push(Na),typeof window<"u")for(const T of[bs,Ol])y.includes(T)||y.push(T);return y.includes(ti)||y.push(ti),y}class ol{constructor(){this.providerId="phone",this._delegate=new Er(Yh(Y.Z.auth()))}static credential(m,y){return Er.credential(m,y)}verifyPhoneNumber(m,y){return this._delegate.verifyPhoneNumber(m,y)}unwrap(){return this._delegate}}ol.PHONE_SIGN_IN_METHOD=Er.PHONE_SIGN_IN_METHOD,ol.PROVIDER_ID=Er.PROVIDER_ID;const am=Oe;class Wf{constructor(m,y,T=Y.Z.app()){var $;am(null===($=T.options)||void 0===$?void 0:$.apiKey,"invalid-api-key",{appName:T.name}),this._delegate=new Xo(m,y,T.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function Kf(C){C.INTERNAL.registerComponent(new Ve.wA("auth-compat",m=>{const y=m.getProvider("app-compat").getImmediate(),T=m.getProvider("auth");return new zf(y,T)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:mi,FacebookAuthProvider:Vi,GithubAuthProvider:Ws,GoogleAuthProvider:Us,OAuthProvider:Vs,SAMLAuthProvider:hs,PhoneAuthProvider:ol,PhoneMultiFactorGenerator:Zd,RecaptchaVerifier:Wf,TwitterAuthProvider:Ks,Auth:zf,AuthCredential:Es,Error:X.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),C.registerVersion("@firebase/auth-compat","0.4.2")}(Y.Z)},5861:(rn,ot,z)=>{function w(X,Re,Ce,Ne,Ve,Ge,Ye){try{var ye=X[Ge](Ye),pe=ye.value}catch(Se){return void Ce(Se)}ye.done?Re(pe):Promise.resolve(pe).then(Ne,Ve)}function Y(X){return function(){var Re=this,Ce=arguments;return new Promise(function(Ne,Ve){var Ge=X.apply(Re,Ce);function Ye(pe){w(Ge,Ne,Ve,Ye,ye,"next",pe)}function ye(pe){w(Ge,Ne,Ve,Ye,ye,"throw",pe)}Ye(void 0)})}}z.d(ot,{Z:()=>Y})},7582:(rn,ot,z)=>{function Re(Ae,Me){var Ke={};for(var tt in Ae)Object.prototype.hasOwnProperty.call(Ae,tt)&&Me.indexOf(tt)<0&&(Ke[tt]=Ae[tt]);if(null!=Ae&&"function"==typeof Object.getOwnPropertySymbols){var gt=0;for(tt=Object.getOwnPropertySymbols(Ae);gt<tt.length;gt++)Me.indexOf(tt[gt])<0&&Object.prototype.propertyIsEnumerable.call(Ae,tt[gt])&&(Ke[tt[gt]]=Ae[tt[gt]])}return Ke}function Se(Ae,Me,Ke,tt){return new(Ke||(Ke=Promise))(function(et,zt){function dn(Mn){try{un(tt.next(Mn))}catch(fr){zt(fr)}}function En(Mn){try{un(tt.throw(Mn))}catch(fr){zt(fr)}}function un(Mn){Mn.done?et(Mn.value):function gt(et){return et instanceof Ke?et:new Ke(function(zt){zt(et)})}(Mn.value).then(dn,En)}un((tt=tt.apply(Ae,Me||[])).next())})}function it(Ae){return this instanceof it?(this.v=Ae,this):new it(Ae)}function De(Ae,Me,Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var gt,tt=Ke.apply(Ae,Me||[]),et=[];return gt={},zt("next"),zt("throw"),zt("return"),gt[Symbol.asyncIterator]=function(){return this},gt;function zt(Hn){tt[Hn]&&(gt[Hn]=function(Xn){return new Promise(function(Jt,cr){et.push([Hn,Xn,Jt,cr])>1||dn(Hn,Xn)})})}function dn(Hn,Xn){try{!function En(Hn){Hn.value instanceof it?Promise.resolve(Hn.value.v).then(un,Mn):fr(et[0][2],Hn)}(tt[Hn](Xn))}catch(Jt){fr(et[0][3],Jt)}}function un(Hn){dn("next",Hn)}function Mn(Hn){dn("throw",Hn)}function fr(Hn,Xn){Hn(Xn),et.shift(),et.length&&dn(et[0][0],et[0][1])}}function At(Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Me=Ae[Symbol.asyncIterator];return Me?Me.call(Ae):(Ae=function $t(Ae){var Me="function"==typeof Symbol&&Symbol.iterator,Ke=Me&&Ae[Me],tt=0;if(Ke)return Ke.call(Ae);if(Ae&&"number"==typeof Ae.length)return{next:function(){return Ae&&tt>=Ae.length&&(Ae=void 0),{value:Ae&&Ae[tt++],done:!Ae}}};throw new TypeError(Me?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ae),Ke={},tt("next"),tt("throw"),tt("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke);function tt(et){Ke[et]=Ae[et]&&function(zt){return new Promise(function(dn,En){!function gt(et,zt,dn,En){Promise.resolve(En).then(function(un){et({value:un,done:dn})},zt)}(dn,En,(zt=Ae[et](zt)).done,zt.value)})}}}z.d(ot,{FC:()=>De,KL:()=>At,_T:()=>Re,mG:()=>Se,qq:()=>it}),"function"==typeof SuppressedError&&SuppressedError}},rn=>{rn(rn.s=3269)}]);